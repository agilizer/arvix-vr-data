if ('undefined' == typeof jQuery) throw new Error('Bootstrap\'s JavaScript requires jQuery');
+ function (t) {
    'use strict';
    function e(e) {
        return this.each(function () {
            var i = t(this),
                s = i.data('bs.tooltip'),
                n = 'object' == typeof e && e;
            (s || 'destroy' != e) && (s || i.data('bs.tooltip', s = new o(this, n)), 'string' == typeof e && s[e]())
        })
    }
    var o = function (t, e) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null,
            this.init('tooltip', t, e)
    };
    o.VERSION = '3.2.0',
        o.DEFAULTS = {
            animation: !0,
            placement: 'top',
            selector: !1,
            template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
            trigger: 'hover focus',
            title: '',
            delay: 0,
            html: !1,
            container: !1,
            viewport: {
                selector: 'body',
                padding: 0
            }
        },
        o.prototype.init = function (e, o, i) {
            this.enabled = !0,
                this.type = e,
                this.$element = t(o),
                this.options = this.getOptions(i),
                this.$viewport = this.options.viewport && t(this.options.viewport.selector || this.options.viewport);
            for (var s = this.options.trigger.split(' '), n = s.length; n--; ) {
                var r = s[n];
                if ('click' == r) this.$element.on('click.' + this.type, this.options.selector, t.proxy(this.toggle, this));
                else if ('manual' != r) {
                    var a = 'hover' == r ? 'mouseenter' : 'focusin',
                        l = 'hover' == r ? 'mouseleave' : 'focusout';
                    this.$element.on(a + '.' + this.type, this.options.selector, t.proxy(this.enter, this)),
                        this.$element.on(l + '.' + this.type, this.options.selector, t.proxy(this.leave, this))
                }
            }
            this.options.selector ? this._options = t.extend({
            }, this.options, {
                trigger: 'manual',
                selector: ''
            })  : this.fixTitle()
        },
        o.prototype.getDefaults = function () {
            return o.DEFAULTS
        },
        o.prototype.getOptions = function (e) {
            return e = t.extend({
            }, this.getDefaults(), this.$element.data(), e),
            e.delay && 'number' == typeof e.delay && (e.delay = {
                show: e.delay,
                hide: e.delay
            }),
                e
        },
        o.prototype.getDelegateOptions = function () {
            var e = {
                },
                o = this.getDefaults();
            return this._options && t.each(this._options, function (t, i) {
                o[t] != i && (e[t] = i)
            }),
                e
        },
        o.prototype.enter = function (e) {
            var o = e instanceof this.constructor ? e : t(e.currentTarget).data('bs.' + this.type);
            return o || (o = new this.constructor(e.currentTarget, this.getDelegateOptions()), t(e.currentTarget).data('bs.' + this.type, o)),
                clearTimeout(o.timeout),
                o.hoverState = 'in',
                o.options.delay && o.options.delay.show ? void (o.timeout = setTimeout(function () {
                    'in' == o.hoverState && o.show()
                }, o.options.delay.show))  : o.show()
        },
        o.prototype.leave = function (e) {
            var o = e instanceof this.constructor ? e : t(e.currentTarget).data('bs.' + this.type);
            return o || (o = new this.constructor(e.currentTarget, this.getDelegateOptions()), t(e.currentTarget).data('bs.' + this.type, o)),
                clearTimeout(o.timeout),
                o.hoverState = 'out',
                o.options.delay && o.options.delay.hide ? void (o.timeout = setTimeout(function () {
                    'out' == o.hoverState && o.hide()
                }, o.options.delay.hide))  : o.hide()
        },
        o.prototype.show = function () {
            var e = t.Event('show.bs.' + this.type);
            if (this.hasContent() && this.enabled) {
                this.$element.trigger(e);
                var o = t.contains(document.documentElement, this.$element[0]);
                if (e.isDefaultPrevented() || !o) return;
                var i = this,
                    s = this.tip(),
                    n = this.getUID(this.type);
                this.setContent(),
                    s.attr('id', n),
                    this.$element.attr('aria-describedby', n),
                this.options.animation && s.addClass('fade');
                var r = 'function' == typeof this.options.placement ? this.options.placement.call(this, s[0], this.$element[0])  : this.options.placement,
                    a = /\s?auto?\s?/i,
                    l = a.test(r);
                l && (r = r.replace(a, '') || 'top'),
                    s.detach().css({
                        top: 0,
                        left: 0,
                        display: 'block'
                    }).addClass(r).data('bs.' + this.type, this),
                    this.options.container ? s.appendTo(this.options.container)  : s.insertAfter(this.$element);
                var p = this.getPosition(),
                    h = s[0].offsetWidth,
                    f = s[0].offsetHeight;
                if (l) {
                    var u = r,
                        d = this.$element.parent(),
                        c = this.getPosition(d);
                    r = 'bottom' == r && p.top + p.height + f - c.scroll > c.height ? 'top' : 'top' == r && p.top - c.scroll - f < 0 ? 'bottom' : 'right' == r && p.right + h > c.width ? 'left' : 'left' == r && p.left - h < c.left ? 'right' : r,
                        s.removeClass(u).addClass(r)
                }
                var g = this.getCalculatedOffset(r, p, h, f);
                this.applyPlacement(g, r);
                var y = function () {
                    i.$element.trigger('shown.bs.' + i.type),
                        i.hoverState = null
                };
                t.support.transition && this.$tip.hasClass('fade') ? s.one('bsTransitionEnd', y).emulateTransitionEnd(150)  : y()
            }
        },
        o.prototype.applyPlacement = function (e, o) {
            var i = this.tip(),
                s = i[0].offsetWidth,
                n = i[0].offsetHeight,
                r = parseInt(i.css('margin-top'), 10),
                a = parseInt(i.css('margin-left'), 10);
            isNaN(r) && (r = 0),
            isNaN(a) && (a = 0),
                e.top = e.top + r,
                e.left = e.left + a,
                t.offset.setOffset(i[0], t.extend({
                    using: function (t) {
                        i.css({
                            top: Math.round(t.top),
                            left: Math.round(t.left)
                        })
                    }
                }, e), 0),
                i.addClass('in');
            var l = i[0].offsetWidth,
                p = i[0].offsetHeight;
            'top' == o && p != n && (e.top = e.top + n - p);
            var h = this.getViewportAdjustedDelta(o, e, l, p);
            h.left ? e.left += h.left : e.top += h.top;
            var f = h.left ? 2 * h.left - s + l : 2 * h.top - n + p,
                u = h.left ? 'left' : 'top',
                d = h.left ? 'offsetWidth' : 'offsetHeight';
            i.offset(e),
                this.replaceArrow(f, i[0][d], u)
        },
        o.prototype.replaceArrow = function (t, e, o) {
            this.arrow().css(o, t ? 50 * (1 - t / e) + '%' : '')
        },
        o.prototype.setContent = function () {
            var t = this.tip(),
                e = this.getTitle();
            t.find('.tooltip-inner') [this.options.html ? 'html' : 'text'](e),
                t.removeClass('fade in top bottom left right')
        },
        o.prototype.hide = function () {
            function e() {
                'in' != o.hoverState && i.detach(),
                    o.$element.trigger('hidden.bs.' + o.type)
            }
            var o = this,
                i = this.tip(),
                s = t.Event('hide.bs.' + this.type);
            return this.$element.removeAttr('aria-describedby'),
                this.$element.trigger(s),
                s.isDefaultPrevented() ? void 0 : (i.removeClass('in'), t.support.transition && this.$tip.hasClass('fade') ? i.one('bsTransitionEnd', e).emulateTransitionEnd(150)  : e(), this.hoverState = null, this)
        },
        o.prototype.fixTitle = function () {
            var t = this.$element;
            (t.attr('title') || 'string' != typeof t.attr('data-original-title')) && t.attr('data-original-title', t.attr('title') || '').attr('title', '')
        },
        o.prototype.hasContent = function () {
            return this.getTitle()
        },
        o.prototype.getPosition = function (e) {
            e = e || this.$element;
            var o = e[0],
                i = 'BODY' == o.tagName;
            return t.extend({
            }, 'function' == typeof o.getBoundingClientRect ? o.getBoundingClientRect()  : null, {
                scroll: i ? document.documentElement.scrollTop || document.body.scrollTop : e.scrollTop(),
                width: i ? t(window).width()  : e.outerWidth(),
                height: i ? t(window).height()  : e.outerHeight()
            }, i ? {
                top: 0,
                left: 0
            }
                : e.offset())
        },
        o.prototype.getCalculatedOffset = function (t, e, o, i) {
            return 'bottom' == t ? {
                top: e.top + e.height,
                left: e.left + e.width / 2 - o / 2
            }
                : 'top' == t ? {
                top: e.top - i,
                left: e.left + e.width / 2 - o / 2
            }
                : 'left' == t ? {
                top: e.top + e.height / 2 - i / 2,
                left: e.left - o
            }
                : {
                top: e.top + e.height / 2 - i / 2,
                left: e.left + e.width
            }
        },
        o.prototype.getViewportAdjustedDelta = function (t, e, o, i) {
            var s = {
                top: 0,
                left: 0
            };
            if (!this.$viewport) return s;
            var n = this.options.viewport && this.options.viewport.padding || 0,
                r = this.getPosition(this.$viewport);
            if (/right|left/.test(t)) {
                var a = e.top - n - r.scroll,
                    l = e.top + n - r.scroll + i;
                a < r.top ? s.top = r.top - a : l > r.top + r.height && (s.top = r.top + r.height - l)
            } else {
                var p = e.left - n,
                    h = e.left + n + o;
                p < r.left ? s.left = r.left - p : h > r.width && (s.left = r.left + r.width - h)
            }
            return s
        },
        o.prototype.getTitle = function () {
            var t,
                e = this.$element,
                o = this.options;
            return t = e.attr('data-original-title') || ('function' == typeof o.title ? o.title.call(e[0])  : o.title)
        },
        o.prototype.getUID = function (t) {
            do t += ~~(1000000 * Math.random());
            while (document.getElementById(t));
            return t
        },
        o.prototype.tip = function () {
            return this.$tip = this.$tip || t(this.options.template)
        },
        o.prototype.arrow = function () {
            return this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow')
        },
        o.prototype.validate = function () {
            this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null)
        },
        o.prototype.enable = function () {
            this.enabled = !0
        },
        o.prototype.disable = function () {
            this.enabled = !1
        },
        o.prototype.toggleEnabled = function () {
            this.enabled = !this.enabled
        },
        o.prototype.toggle = function (e) {
            var o = this;
            e && (o = t(e.currentTarget).data('bs.' + this.type), o || (o = new this.constructor(e.currentTarget, this.getDelegateOptions()), t(e.currentTarget).data('bs.' + this.type, o))),
                o.tip().hasClass('in') ? o.leave(o)  : o.enter(o)
        },
        o.prototype.destroy = function () {
            clearTimeout(this.timeout),
                this.hide().$element.off('.' + this.type).removeData('bs.' + this.type)
        };
    var i = t.fn.tooltip;
    t.fn.tooltip = e,
        t.fn.tooltip.Constructor = o,
        t.fn.tooltip.noConflict = function () {
            return t.fn.tooltip = i,
                this
        }
}(jQuery);
!function (e, t, n) {
    'undefined' != typeof module && module.exports ? module.exports = n()  : 'function' == typeof define && define.amd ? define(n)  : t[e] = n()
}('Keen', this, function () {
    'use strict';
    function Keen() {
        return _init.apply(this, arguments)
    }
    function _init(e) {
        if (_isUndefined(e)) throw new Error('Check out our JavaScript SDK Usage Guide: https://keen.io/docs/clients/javascript/usage-guide/');
        if (_isUndefined(e.projectId) || 'String' !== _type(e.projectId) || e.projectId.length < 1) throw new Error('Please provide a projectId');
        this.configure(e)
    }
    function _extend(e) {
        for (var t = 1; t < arguments.length; t++) for (var n in arguments[t]) e[n] = arguments[t][n];
        return e
    }
    function _isUndefined(e) {
        return void 0 === e
    }
    function _type(e) {
        var t = e && e.constructor ? e.constructor.toString()  : void 0;
        return t ? t.match(/function (.*)\(/) [1] : 'Null'
    }
    function _each(e, t, n) {
        var r;
        if (!e) return 0;
        if (n = n ? n : e, 'array' === _type(e)) {
            for (r = 0; r < e.length; r++) if (t.call(n, e[r], r, e) === !1) return 0
        } else for (r in e) if (e.hasOwnProperty(r) && t.call(n, e[r], r, e) === !1) return 0;
        return 1
    }
    function _parse_params(e) {
        for (var t, n = {
        }, r = /\+/g, i = /([^&=]+)=?([^&]*)/g, o = function (e) {
            return decodeURIComponent(e.replace(r, ' '))
        }, a = e.split('?') [1]; t = i.exec(a); ) n[o(t[1])] = o(t[2]);
        return n
    }
    function _set_protocol(e) {
        switch (e) {
            case 'http':
                return 'http';
            case 'auto':
                return location.protocol.replace(/:/g, '');
            case 'https':
            case void 0:
            default:
                return 'https'
        }
    }
    function _set_request_type(e) {
        var t = e || 'jsonp',
            n = !1;
        return ('Object' === _type(XMLHttpRequest) || 'Function' === _type(XMLHttpRequest)) && 'withCredentials' in new XMLHttpRequest && (n = !0),
            null == t || 'xhr' == t ? n ? 'xhr' : 'jsonp' : t
    }
    function _build_url(e) {
        return this.client.endpoint + '/projects/' + this.client.projectId + e
    }
    function _uploadEvent(e, t, n, r, i) {
        var o = _build_url.apply(this, [
                '/events/' + e
            ]),
            a = {
            };
        n = n === !1 ? !1 : !0,
        this.client.globalProperties && (a = this.client.globalProperties(e));
        for (var c in t) t.hasOwnProperty(c) && (a[c] = t[c]);
        switch (this.client.requestType) {
            case 'xhr':
                _request.xhr.apply(this, [
                    'POST',
                    o,
                    null,
                    a,
                    this.client.writeKey,
                    n,
                    r,
                    i
                ]);
                break;
            case 'jsonp':
                var s = JSON.stringify(a),
                    l = Keen.Base64.encode(s);
                o = o + '?api_key=' + this.client.writeKey,
                    o = o + '&data=' + l,
                    o = o + '&modified=' + (new Date).getTime(),
                    _request.jsonp.apply(this, [
                        o,
                        this.client.writeKey,
                        r,
                        i
                    ]);
                break;
            case 'beacon':
                var s = JSON.stringify(a),
                    l = Keen.Base64.encode(s);
                o = o + '?api_key=' + encodeURIComponent(this.client.writeKey),
                    o = o + '&data=' + encodeURIComponent(l),
                    o = o + '&modified=' + encodeURIComponent((new Date).getTime()),
                    o += '&c=clv1',
                    _request.beacon.apply(this, [
                        o,
                        null,
                        r,
                        i
                    ])
        }
    }
    Keen.prototype.configure = function (e) {
        return e.host = _isUndefined(e.host) ? 'api.keen.io/3.0' : e.host.replace(/.*?:\/\//g, ''),
            e.protocol = _set_protocol(e.protocol),
            e.requestType = _set_request_type(e.requestType),
            this.client = {
                projectId: e.projectId,
                writeKey: e.writeKey,
                readKey: e.readKey,
                globalProperties: null,
                endpoint: e.protocol + '://' + e.host,
                requestType: e.requestType
            },
            Keen.trigger('client', this, e),
            this.trigger('ready'),
            this
    };
    var _request = {
            xhr: function (e, t, n, r, i, o, a, c) {
                if (!i) return Keen.log('Please provide a writeKey for https://keen.io/project/' + this.client.projectId);
                var s = new XMLHttpRequest;
                if (s.onreadystatechange = function () {
                        if (4 == s.readyState) if (s.status >= 200 && s.status < 300) {
                            var e;
                            try {
                                e = JSON.parse(s.responseText)
                            } catch (t) {
                                Keen.log('Could not JSON parse HTTP response: ' + s.responseText),
                                c && c(s, t)
                            }
                            a && e && a(e)
                        } else Keen.log('HTTP request failed.'),
                        c && c(s, null)
                    }, s.open(e, t, o), i && s.setRequestHeader('Authorization', i), r && s.setRequestHeader('Content-Type', 'application/json'), n) for (var l in n) n.hasOwnProperty(l) && s.setRequestHeader(l, n[l]);
                var u = r ? JSON.stringify(r)  : null;
                s.send(u)
            },
            jsonp: function (e, t, n, r) {
                if (!t) return Keen.log('Please provide a writeKey for https://keen.io/project/' + this.client.projectId);
                if (t && e.indexOf('api_key') < 0) {
                    var i = e.indexOf('?') > 0 ? '&' : '?';
                    e = e + i + 'api_key=' + t
                }
                for (var o = 'keenJSONPCallback' + (new Date).getTime(); o in window; ) o += 'a';
                var a = !1;
                window[o] = function (e) {
                    a = !0,
                    n && e && n(e),
                        window[o] = void 0
                },
                    e = e + '&jsonp=' + o;
                var c = document.createElement('script');
                c.id = 'keen-jsonp',
                    c.src = e,
                    document.getElementsByTagName('head') [0].appendChild(c),
                    c.onreadystatechange = function () {
                        a === !1 && 'loaded' === this.readyState && (a = !0, r && r())
                    },
                    c.onerror = function () {
                        a === !1 && (a = !0, r && r())
                    }
            },
            beacon: function (e, t, n, r) {
                if (t && e.indexOf('api_key') < 0) {
                    var i = e.indexOf('?') > 0 ? '&' : '?';
                    e = e + i + 'api_key=' + t
                }
                var o = !1,
                    a = document.createElement('img');
                a.onload = function () {
                    if (o = !0, 'naturalHeight' in this) {
                        if (this.naturalHeight + this.naturalWidth === 0) return void this.onerror()
                    } else if (this.width + this.height === 0) return void this.onerror();
                    n && n({
                        created: !0
                    })
                },
                    a.onerror = function () {
                        o = !0,
                        r && r()
                    },
                    a.src = e
            }
        },
        Events = Keen.Events = {
            on: function (e, t) {
                this.listeners || (this.listeners = {
                });
                var n = this.listeners[e] || (this.listeners[e] = [
                    ]);
                return n.push({
                    callback: t
                }),
                    this
            },
            off: function (e, t) {
                if (!e && !t) return this.listeners = void 0,
                    delete this.listeners,
                    this;
                for (var n = this.listeners[e] || [], r = n.length; r--; ) t && t == n[r].callback && this.listeners[e].splice(r, 1),
                t && 0 != n.length || (this.listeners[e] = void 0, delete this.listeners[e]);
                return this
            },
            trigger: function (e) {
                if (!this.listeners) return this;
                for (var t = Array.prototype.slice.call(arguments, 1), n = this.listeners[e] || [], r = 0; r < n.length; r++) n[r].callback.apply(this, t);
                return this
            }
        };
    _extend(Keen.prototype, Events),
        _extend(Keen, Events),
        Keen.loaded = !0,
        Keen.utils = {
            each: _each,
            extend: _extend,
            parseParams: _parse_params
        },
        Keen.ready = function (e) {
            Keen.loaded ? e()  : Keen.on('ready', e)
        },
        Keen.log = function (e) {
            'object' == typeof console && console.log('[Keen IO]', e)
        };
    var Plugins = Keen.Plugins = {
    };
    Keen.prototype.addEvent = function () {
        _uploadEvent.apply(this, arguments)
    },
        Keen.prototype.addEventSync = function (e, t, n, r) {
            _uploadEvent.apply(this, [
                e,
                t,
                !1,
                n,
                r
            ])
        },
        Keen.prototype.trackExternalLink = function (e, t, n, r, i) {
            var o = e,
                a = o.metaKey,
                c = o.target,
                s = !1,
                l = function () {
                };
            return void 0 === r && (r = 500),
                'A' === c.nodeName ? l = function () {
                    a || s || (s = !0, window.location = c.href)
                }
                    : 'FORM' === c.nodeName && (l = function () {
                    s || (s = !0, c.submit())
                }),
            i && (l = function () {
                s || (s = !0, i())
            }),
                _uploadEvent.call(this, t, n, l, l),
                setTimeout(function () {
                    l()
                }, r),
                a ? void 0 : !1
        },
        Keen.prototype.setGlobalProperties = function (e) {
            if (!this.client) return Keen.log('Check out our JavaScript SDK Usage Guide: https://keen.io/docs/clients/javascript/usage-guide/');
            if (!e || 'function' != typeof e) throw new Error('Invalid value for global properties: ' + e);
            this.client.globalProperties = e
        },
        Keen.Base64 = {
            map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',
            encode: function (e) {
                var t,
                    n,
                    r,
                    i,
                    o,
                    a,
                    c,
                    s = '',
                    l = 0,
                    u = this.map;
                for (e = this.utf8.encode(e); l < e.length; ) t = e.charCodeAt(l++),
                    n = e.charCodeAt(l++),
                    r = e.charCodeAt(l++),
                    i = t >> 2,
                    o = (3 & t) << 4 | n >> 4,
                    a = isNaN(n) ? 64 : (15 & n) << 2 | r >> 6,
                    c = isNaN(n) || isNaN(r) ? 64 : 63 & r,
                    s = s + u.charAt(i) + u.charAt(o) + u.charAt(a) + u.charAt(c);
                return s
            },
            decode: function (e) {
                var t,
                    n,
                    r,
                    i,
                    o,
                    a,
                    c,
                    s = '',
                    l = 0,
                    u = this.map,
                    f = String.fromCharCode;
                for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ''); l < e.length; ) t = u.indexOf(e.charAt(l++)),
                    n = u.indexOf(e.charAt(l++)),
                    r = u.indexOf(e.charAt(l++)),
                    i = u.indexOf(e.charAt(l++)),
                    o = t << 2 | n >> 4,
                    a = (15 & n) << 4 | r >> 2,
                    c = (3 & r) << 6 | i,
                    s = s + (f(o) + (64 != r ? f(a)  : '')) + (64 != i ? f(c)  : '');
                return this.utf8.decode(s)
            },
            utf8: {
                encode: function (e) {
                    for (var t, n = '', r = 0, i = String.fromCharCode; r < e.length; ) t = e.charCodeAt(r++),
                        n += 128 > t ? i(t)  : t > 127 && 2048 > t ? i(t >> 6 | 192) + i(63 & t | 128)  : i(t >> 12 | 224) + i(t >> 6 & 63 | 128) + i(63 & t | 128);
                    return n
                },
                decode: function (e) {
                    for (var t, n, r = '', i = 0, o = String.fromCharCode; i < e.length; ) n = e.charCodeAt(i),
                        r += 128 > n ? [
                            o(n),
                            i++
                        ][0] : n > 191 && 224 > n ? [
                            o((31 & n) << 6 | 63 & (t = e.charCodeAt(i + 1))),
                            i += 2
                        ][0] : [
                            o((15 & n) << 12 | (63 & (t = e.charCodeAt(i + 1))) << 6 | 63 & (c3 = e.charCodeAt(i + 2))),
                            i += 3
                        ][0];
                    return r
                }
            }
        },
    'object' != typeof JSON && (JSON = {
    }),
        function () {
            function f(e) {
                return 10 > e ? '0' + e : e
            }
            function quote(e) {
                return escapable.lastIndex = 0,
                    escapable.test(e) ? '"' + e.replace(escapable, function (e) {
                        var t = meta[e];
                        return 'string' == typeof t ? t : '\\u' + ('0000' + e.charCodeAt(0).toString(16)).slice( - 4)
                    }) + '"' : '"' + e + '"'
            }
            function str(e, t) {
                var n,
                    r,
                    i,
                    o,
                    a,
                    c = gap,
                    s = t[e];
                switch (s && 'object' == typeof s && 'function' == typeof s.toJSON && (s = s.toJSON(e)), 'function' == typeof rep && (s = rep.call(t, e, s)), typeof s) {
                    case 'string':
                        return quote(s);
                    case 'number':
                        return isFinite(s) ? String(s)  : 'null';
                    case 'boolean':
                    case 'null':
                        return String(s);
                    case 'object':
                        if (!s) return 'null';
                        if (gap += indent, a = [
                            ], '[object Array]' === Object.prototype.toString.apply(s)) {
                            for (o = s.length, n = 0; o > n; n += 1) a[n] = str(n, s) || 'null';
                            return i = 0 === a.length ? '[]' : gap ? '[\n' + gap + a.join(',\n' + gap) + '\n' + c + ']' : '[' + a.join(',') + ']',
                                gap = c,
                                i
                        }
                        if (rep && 'object' == typeof rep) for (o = rep.length, n = 0; o > n; n += 1) 'string' == typeof rep[n] && (r = rep[n], i = str(r, s), i && a.push(quote(r) + (gap ? ': ' : ':') + i));
                        else for (r in s) Object.prototype.hasOwnProperty.call(s, r) && (i = str(r, s), i && a.push(quote(r) + (gap ? ': ' : ':') + i));
                        return i = 0 === a.length ? '{}' : gap ? '{\n' + gap + a.join(',\n' + gap) + '\n' + c + '}' : '{' + a.join(',') + '}',
                            gap = c,
                            i
                }
            }
            'function' != typeof Date.prototype.toJSON && (Date.prototype.toJSON = function () {
                return isFinite(this.valueOf()) ? this.getUTCFullYear() + '-' + f(this.getUTCMonth() + 1) + '-' + f(this.getUTCDate()) + 'T' + f(this.getUTCHours()) + ':' + f(this.getUTCMinutes()) + ':' + f(this.getUTCSeconds()) + 'Z' : null
            }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function () {
                return this.valueOf()
            });
            var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
                escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
                gap,
                indent,
                meta = {
                    '': '\\b',
                    '\t': '\\t',
                    '\n': '\\n',
                    '\f': '\\f',
                    '\r': '\\r',
                    '"': '\\"',
                    '\\': '\\\\'
                },
                rep;
            'function' != typeof JSON.stringify && (JSON.stringify = function (e, t, n) {
                var r;
                if (gap = '', indent = '', 'number' == typeof n) for (r = 0; n > r; r += 1) indent += ' ';
                else 'string' == typeof n && (indent = n);
                if (rep = t, t && 'function' != typeof t && ('object' != typeof t || 'number' != typeof t.length)) throw new Error('JSON.stringify');
                return str('', {
                    '': e
                })
            }),
            'function' != typeof JSON.parse && (JSON.parse = function (text, reviver) {
                function walk(e, t) {
                    var n,
                        r,
                        i = e[t];
                    if (i && 'object' == typeof i) for (n in i) Object.prototype.hasOwnProperty.call(i, n) && (r = walk(i, n), void 0 !== r ? i[n] = r : delete i[n]);
                    return reviver.call(e, t, i)
                }
                var j;
                if (text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function (e) {
                        return '\\u' + ('0000' + e.charCodeAt(0).toString(16)).slice( - 4)
                    })), /^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']').replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) return j = eval('(' + text + ')'),
                    'function' == typeof reviver ? walk({
                        '': j
                    }, '')  : j;
                throw new SyntaxError('JSON.parse')
            })
        }(),
        !function (e, t, n) {
            'undefined' != typeof module && module.exports ? module.exports = n()  : 'function' == typeof define && define.amd ? define(n)  : t[e] = n()
        }('domready', Keen.utils, function (e) {
            function t(e) {
                for (d = 1; e = r.shift(); ) e()
            }
            var n,
                r = [
                ],
                i = !1,
                o = document,
                a = o.documentElement,
                c = a.doScroll,
                s = 'DOMContentLoaded',
                l = 'addEventListener',
                u = 'onreadystatechange',
                f = 'readyState',
                p = c ? /^loaded|^c/ : /^loaded|c/,
                d = p.test(o[f]);
            return o[l] && o[l](s, n = function () {
                o.removeEventListener(s, n, i),
                    t()
            }, i),
            c && o.attachEvent(u, n = function () {
                /^c/.test(o[f]) && (o.detachEvent(u, n), t())
            }),
                e = c ? function (t) {
                    self != top ? d ? t()  : r.push(t)  : function () {
                        try {
                            a.doScroll('left')
                        } catch (n) {
                            return setTimeout(function () {
                                e(t)
                            }, 50)
                        }
                        t()
                    }()
                }
                    : function (e) {
                    d ? e()  : r.push(e)
                }
        });
    var loaded = window.Keen,
        cached = window._Keen || {
            },
        clients,
        ready;
    if (loaded && cached) {
        clients = cached.clients || {
            },
            ready = cached.ready || [];
        for (var instance in clients) if (clients.hasOwnProperty(instance)) {
            var client = clients[instance];
            for (var method in Keen.prototype) Keen.prototype.hasOwnProperty(method) && (loaded.prototype[method] = Keen.prototype[method]);
            if (loaded.Query = Keen.Query ? Keen.Query : function () {
                }, loaded.Visualization = Keen.Visualization ? Keen.Visualization : function () {
                }, client._config && (client.configure.call(client, client._config), delete client._config), client._setGlobalProperties) {
                for (var globals = client._setGlobalProperties, i = 0; i < globals.length; i++) client.setGlobalProperties.apply(client, globals[i]);
                delete client._setGlobalProperties
            }
            if (client._addEvent) {
                for (var queue = client._addEvent || [], i = 0; i < queue.length; i++) client.addEvent.apply(client, queue[i]);
                delete client._addEvent
            }
            var callback = client._on || [];
            if (client._on) {
                for (var i = 0; i < callback.length; i++) client.on.apply(client, callback[i]);
                client.trigger('ready'),
                    delete client._on
            }
        }
        for (var i = 0; i < ready.length; i++) {
            var callback = ready[i];
            Keen.on('ready', function () {
                callback()
            })
        }
    }
    return Keen.loaded && setTimeout(function () {
        Keen.utils.domready(function () {
            Keen.trigger('ready')
        })
    }, 0),
        Keen
});
!function (e, t) {
    if (!t.__SV) {
        var n,
            p,
            i,
            r;
        window.mixpanel = t,
            t._i = [
            ],
            t.init = function (e, n, p) {
                function a(e, t) {
                    var n = t.split('.');
                    2 == n.length && (e = e[n[0]], t = n[1]),
                        e[t] = function () {
                            e.push([t].concat(Array.prototype.slice.call(arguments, 0)))
                        }
                }
                var o = t;
                for ('undefined' != typeof p ? o = t[p] = [
                ] : p = 'mixpanel', o.people = o.people || [], o.toString = function (e) {
                    var t = 'mixpanel';
                    return 'mixpanel' !== p && (t += '.' + p),
                    e || (t += ' (stub)'),
                        t
                }, o.people.toString = function () {
                    return o.toString(1) + '.people (stub)'
                }, i = 'disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user'.split(' '), r = 0; r < i.length; r++) a(o, i[r]);
                t._i.push([e,
                    n,
                    p])
            },
            t.__SV = 1.2,
            n = e.createElement('script'),
            n.type = 'text/javascript',
            n.async = !0,
            n.src = '//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js',
            p = e.getElementsByTagName('script') [0],
            p.parentNode.insertBefore(n, p)
    }
}(document, window.mixpanel || []);
!function (i, e) {
    'use strict';
    var s = '',
        r = '?',
        o = 'function',
        a = 'undefined',
        n = 'object',
        t = 'major',
        d = 'model',
        w = 'name',
        l = 'type',
        p = 'vendor',
        m = 'version',
        c = 'architecture',
        u = 'console',
        g = 'mobile',
        f = 'tablet',
        h = 'smarttv',
        b = {
            has: function (i, e) {
                return - 1 !== e.toLowerCase().indexOf(i.toLowerCase())
            },
            lowerize: function (i) {
                return i.toLowerCase()
            }
        },
        y = {
            rgx: function () {
                for (var i, s, r, t, d, w, l, p = 0, m = arguments; p < m.length; p += 2) {
                    var c = m[p],
                        u = m[p + 1];
                    if (typeof i === a) {
                        i = {
                        };
                        for (t in u) d = u[t],
                            typeof d === n ? i[d[0]] = e : i[d] = e
                    }
                    for (s = r = 0; s < c.length; s++) if (w = c[s].exec(this.getUA())) {
                        for (t = 0; t < u.length; t++) l = w[++r],
                            d = u[t],
                            typeof d === n && d.length > 0 ? 2 == d.length ? i[d[0]] = typeof d[1] == o ? d[1].call(this, l)  : d[1] : 3 == d.length ? i[d[0]] = typeof d[1] !== o || d[1].exec && d[1].test ? l ? l.replace(d[1], d[2])  : e : l ? d[1].call(this, l, d[2])  : e : 4 == d.length && (i[d[0]] = l ? d[3].call(this, l.replace(d[1], d[2]))  : e)  : i[d] = l ? l : e;
                        break
                    }
                    if (w) break
                }
                return i
            },
            str: function (i, s) {
                for (var o in s) if (typeof s[o] === n && s[o].length > 0) {
                    for (var a = 0; a < s[o].length; a++) if (b.has(s[o][a], i)) return o === r ? e : o
                } else if (b.has(s[o], i)) return o === r ? e : o;
                return i
            }
        },
        v = {
            browser: {
                oldsafari: {
                    major: {
                        1: [
                            '/8',
                            '/1',
                            '/3'
                        ],
                        2: '/4',
                        '?': '/'
                    },
                    version: {
                        '1.0': '/8',
                        1.2: '/1',
                        1.3: '/3',
                        '2.0': '/412',
                        '2.0.2': '/416',
                        '2.0.3': '/417',
                        '2.0.4': '/419',
                        '?': '/'
                    }
                }
            },
            device: {
                sprint: {
                    model: {
                        'Evo Shift 4G': '7373KT'
                    },
                    vendor: {
                        HTC: 'APA',
                        Sprint: 'Sprint'
                    }
                }
            },
            os: {
                windows: {
                    version: {
                        ME: '4.90',
                        'NT 3.11': 'NT3.51',
                        'NT 4.0': 'NT4.0',
                        2000: 'NT 5.0',
                        XP: [
                            'NT 5.1',
                            'NT 5.2'
                        ],
                        Vista: 'NT 6.0',
                        7: 'NT 6.1',
                        8: 'NT 6.2',
                        8.1: 'NT 6.3',
                        RT: 'ARM'
                    }
                }
            }
        },
        k = {
            browser: [
                [/(opera\smini)\/((\d+)?[\w\.-]+)/i,
                    /(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,
                    /(opera).+version\/((\d+)?[\w\.]+)/i,
                    /(opera)[\/\s]+((\d+)?[\w\.]+)/i],
                [
                    w,
                    m,
                    t
                ],
                [
                    /\s(opr)\/((\d+)?[\w\.]+)/i
                ],
                [
                    [w,
                        'Opera'],
                    m,
                    t
                ],
                [
                    /(kindle)\/((\d+)?[\w\.]+)/i,
                    /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,
                    /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,
                    /(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,
                    /(rekonq)((?:\/)[\w\.]+)*/i,
                    /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i
                ],
                [
                    [w,
                        'IE'],
                    m,
                    t
                ],
                [
                    /(yabrowser)\/((\d+)?[\w\.]+)/i
                ],
                [
                    [w,
                        'Yandex'],
                    m,
                    t
                ],
                [
                    /(comodo_dragon)\/((\d+)?[\w\.]+)/i
                ],
                [
                    [w,
                        /_/g,
                        ' '],
                    m,
                    t
                ],
                [
                    /(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(dolfin)\/((\d+)?[\w\.]+)/i
                ],
                [
                    [w,
                        'Dolphin'],
                    m,
                    t
                ],
                [
                    /((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i
                ],
                [
                    [w,
                        'Chrome'],
                    m,
                    t
                ],
                [
                    /version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i
                ],
                [
                    m,
                    t,
                    [
                        w,
                        'Mobile Safari'
                    ]
                ],
                [
                    /version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i
                ],
                [
                    m,
                    t,
                    w
                ],
                [
                    /webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i
                ],
                [
                    w,
                    [
                        t,
                        y.str,
                        v.browser.oldsafari.major
                    ],
                    [
                        m,
                        y.str,
                        v.browser.oldsafari.version
                    ]
                ],
                [
                    /(konqueror)\/((\d+)?[\w\.]+)/i,
                    /(webkit|khtml)\/((\d+)?[\w\.]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(navigator|netscape)\/((\d+)?[\w\.-]+)/i
                ],
                [
                    [w,
                        'Netscape'],
                    m,
                    t
                ],
                [
                    /(swiftfox)/i,
                    /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,
                    /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,
                    /(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,
                    /(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,
                    /(links)\s\(((\d+)?[\w\.]+)/i,
                    /(gobrowser)\/?((\d+)?[\w\.]+)*/i,
                    /(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,
                    /(mosaic)[\/\s]((\d+)?[\w\.]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(apple(?:coremedia|))\/((\d+)[\w\._]+)/i,
                    /(coremedia) v((\d+)[\w\._]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(aqualung|lyssna|bsplayer)\/([\w\.-]+)/i
                ],
                [
                    w,
                    m
                ],
                [
                    /(ares|ossproxy)\s((\d+)[\w\.-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\/((\d+)[\w\.-]+)/i,
                    /(clementine|music player daemon)\s((\d+)[\w\.-]+)/i,
                    /(lg player|nexplayer)\s((\d+)[\d\.]+)/i,
                    /player\/(nexplayer|lg player)\s((\d+)[\w\.-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(nexplayer)\s((\d+)[\w\.-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(flrp)\/((\d+)[\w\.-]+)/i
                ],
                [
                    [w,
                        'Flip Player'],
                    m,
                    t
                ],
                [
                    /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i
                ],
                [
                    w
                ],
                [
                    /(gstreamer) souphttpsrc (?:\([^\)]+\)){0,1} libsoup\/((\d+)[\w\.-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(htc streaming player)\s[\w_]+\s\/\s((\d+)[\d\.]+)/i,
                    /(java|python-urllib|python-requests|wget|libcurl)\/((\d+)[\w\.-_]+)/i,
                    /(lavf)((\d+)[\d\.]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(htc_one_s)\/((\d+)[\d\.]+)/i
                ],
                [
                    [w,
                        /_/g,
                        ' '],
                    m,
                    t
                ],
                [
                    /(mplayer)(?:\s|\/)(?:(?:sherpya-){0,1}svn)(?:-|\s)(r\d+(?:-\d+[\w\.-]+){0,1})/i
                ],
                [
                    w,
                    m
                ],
                [
                    /(mplayer)(?:\s|\/)((\d+)[\w\.-]+)/i,
                    /(mplayer) unknown-((\d+)[\w\.\-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(mplayer)/i,
                    /(yourmuze)/i,
                    /(media player classic|nero showtime)/i
                ],
                [
                    w
                ],
                [
                    /(nero (?:home|scout))\/((\d+)[\w\.-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(nokia\d+)\/((\d+)[\w\.-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /\s(songbird)\/((\d+)[\w\.-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(winamp)3 version ((\d+)[\w\.-]+)/i,
                    /(winamp)\s((\d+)[\w\.-]+)/i,
                    /(winamp)mpeg\/((\d+)[\w\.-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i
                ],
                [
                    w
                ],
                [
                    /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\/((\d+)[\w\.-]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(smp)((\d+)[\d\.]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(vlc) media player - version ((\d+)[\w\.]+)/i,
                    /(vlc)\/((\d+)[\w\.-]+)/i,
                    /(xbmc|gvfs|xine|xmms|irapp)\/((\d+)[\w\.-]+)/i,
                    /(foobar2000)\/((\d+)[\d\.]+)/i,
                    /(itunes)\/((\d+)[\d\.]+)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(wmplayer)\/((\d+)[\w\.-]+)/i,
                    /(windows-media-player)\/((\d+)[\w\.-]+)/i
                ],
                [
                    [w,
                        /-/g,
                        ' '],
                    m,
                    t
                ],
                [
                    /windows\/((\d+)[\w\.-]+) upnp\/[\d\.]+ dlnadoc\/[\d\.]+ (home media server)/i
                ],
                [
                    m,
                    t,
                    [
                        w,
                        'Windows'
                    ]
                ],
                [
                    /(com\.riseupradioalarm)\/((\d+)[\d\.]*)/i
                ],
                [
                    w,
                    m,
                    t
                ],
                [
                    /(rad.io)\s((\d+)[\d\.]+)/i,
                    /(radio.(?:de|at|fr))\s((\d+)[\d\.]+)/i
                ],
                [
                    [w,
                        'rad.io'],
                    m,
                    t
                ]
            ],
            cpu: [
                [/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],
                [
                    [c,
                        'amd64']
                ],
                [
                    /(ia32(?=;))/i
                ],
                [
                    [c,
                        b.lowerize]
                ],
                [
                    /((?:i[346]|x)86)[;\)]/i
                ],
                [
                    [c,
                        'ia32']
                ],
                [
                    /windows\s(ce|mobile);\sppc;/i
                ],
                [
                    [c,
                        'arm']
                ],
                [
                    /((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i
                ],
                [
                    [c,
                        /ower/,
                        '',
                        b.lowerize]
                ],
                [
                    /(sun4\w)[;\)]/i
                ],
                [
                    [c,
                        'sparc']
                ],
                [
                    /(ia64(?=;)|68k(?=\))|arm(?=v\d+;)|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i
                ],
                [
                    c,
                    b.lowerize
                ]
            ],
            device: [
                [/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],
                [
                    d,
                    p,
                    [
                        l,
                        f
                    ]
                ],
                [
                    /applecoremedia\/[\w\.]+ \((ipad)/
                ],
                [
                    d,
                    [
                        p,
                        'Apple'
                    ],
                    [
                        l,
                        f
                    ]
                ],
                [
                    /(apple\s{0,1}tv)/i
                ],
                [
                    [d,
                        'Apple TV'],
                    [
                        p,
                        'Apple'
                    ]
                ],
                [
                    /(hp).+(touchpad)/i,
                    /(kindle)\/([\w\.]+)/i,
                    /\s(nook)[\w\s]+build\/(\w+)/i,
                    /(dell)\s(strea[kpr\s\d]*[\dko])/i
                ],
                [
                    p,
                    d,
                    [
                        l,
                        f
                    ]
                ],
                [
                    /\((ip[honed|\s\w*]+);.+(apple)/i
                ],
                [
                    d,
                    p,
                    [
                        l,
                        g
                    ]
                ],
                [
                    /\((ip[honed|\s\w*]+);/i
                ],
                [
                    d,
                    [
                        p,
                        'Apple'
                    ],
                    [
                        l,
                        g
                    ]
                ],
                [
                    /(blackberry)[\s-]?(\w+)/i,
                    /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i,
                    /(hp)\s([\w\s]+\w)/i,
                    /(asus)-?(\w+)/i
                ],
                [
                    p,
                    d,
                    [
                        l,
                        g
                    ]
                ],
                [
                    /\((bb10);\s(\w+)/i
                ],
                [
                    [p,
                        'BlackBerry'],
                    d,
                    [
                        l,
                        g
                    ]
                ],
                [
                    /android.+((transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+))/i
                ],
                [
                    [p,
                        'Asus'],
                    d,
                    [
                        l,
                        f
                    ]
                ],
                [
                    /(sony)\s(tablet\s[ps])/i
                ],
                [
                    p,
                    d,
                    [
                        l,
                        f
                    ]
                ],
                [
                    /(nintendo)\s([wids3u]+)/i
                ],
                [
                    p,
                    d,
                    [
                        l,
                        u
                    ]
                ],
                [
                    /((playstation)\s[3portablevi]+)/i
                ],
                [
                    [p,
                        'Sony'],
                    d,
                    [
                        l,
                        u
                    ]
                ],
                [
                    /(sprint\s(\w+))/i
                ],
                [
                    [p,
                        y.str,
                        v.device.sprint.vendor],
                    [
                        d,
                        y.str,
                        v.device.sprint.model
                    ],
                    [
                        l,
                        g
                    ]
                ],
                [
                    /(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,
                    /(zte)-(\w+)*/i,
                    /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i
                ],
                [
                    p,
                    [
                        d,
                        /_/g,
                        ' '
                    ],
                    [
                        l,
                        g
                    ]
                ],
                [
                    /\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,
                    /(mot)[\s-]?(\w+)*/i
                ],
                [
                    [p,
                        'Motorola'],
                    d,
                    [
                        l,
                        g
                    ]
                ],
                [
                    /android.+\s((mz60\d|xoom[\s2]{0,2}))\sbuild\//i
                ],
                [
                    [p,
                        'Motorola'],
                    d,
                    [
                        l,
                        f
                    ]
                ],
                [
                    /android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9))/i
                ],
                [
                    [p,
                        'Samsung'],
                    d,
                    [
                        l,
                        f
                    ]
                ],
                [
                    /((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i,
                    /(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,
                    /sec-((sgh\w+))/i
                ],
                [
                    [p,
                        'Samsung'],
                    d,
                    [
                        l,
                        g
                    ]
                ],
                [
                    /(sie)-(\w+)*/i
                ],
                [
                    [p,
                        'Siemens'],
                    d,
                    [
                        l,
                        g
                    ]
                ],
                [
                    /(maemo|nokia).*(n900|lumia\s\d+)/i,
                    /(nokia)[\s_-]?([\w-]+)*/i
                ],
                [
                    [p,
                        'Nokia'],
                    d,
                    [
                        l,
                        g
                    ]
                ],
                [
                    /android\s3\.[\s\w-;]{10}((a\d{3}))/i
                ],
                [
                    [p,
                        'Acer'],
                    d,
                    [
                        l,
                        f
                    ]
                ],
                [
                    /android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i
                ],
                [
                    [p,
                        'LG'],
                    d,
                    [
                        l,
                        f
                    ]
                ],
                [
                    /((nexus\s[45]))/i,
                    /(lg)[e;\s-\/]+(\w+)*/i
                ],
                [
                    [p,
                        'LG'],
                    d,
                    [
                        l,
                        g
                    ]
                ],
                [
                    /android.+((ideatab[a-z0-9\-\s]+))/i
                ],
                [
                    [p,
                        'Lenovo'],
                    d,
                    [
                        l,
                        f
                    ]
                ],
                [
                    /(lg) netcast\.tv/i
                ],
                [
                    p,
                    [
                        l,
                        h
                    ]
                ],
                [
                    /(mobile|tablet);.+rv\:.+gecko\//i
                ],
                [
                    l,
                    p,
                    d
                ]
            ],
            engine: [
                [/(presto)\/([\w\.]+)/i,
                    /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,
                    /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,
                    /(icab)[\/\s]([23]\.[\d\.]+)/i],
                [
                    w,
                    m
                ],
                [
                    /rv\:([\w\.]+).*(gecko)/i
                ],
                [
                    m,
                    w
                ]
            ],
            os: [
                [/microsoft\s(windows)\s(vista|xp)/i],
                [
                    w,
                    m
                ],
                [
                    /(windows)\snt\s6\.2;\s(arm)/i,
                    /(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i
                ],
                [
                    w,
                    [
                        m,
                        y.str,
                        v.os.windows.version
                    ]
                ],
                [
                    /(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i
                ],
                [
                    [w,
                        'Windows'],
                    [
                        m,
                        y.str,
                        v.os.windows.version
                    ]
                ],
                [
                    /\((bb)(10);/i
                ],
                [
                    [w,
                        'BlackBerry'],
                    m
                ],
                [
                    /(blackberry)\w*\/?([\w\.]+)*/i,
                    /(tizen)\/([\w\.]+)/i,
                    /(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i
                ],
                [
                    w,
                    m
                ],
                [
                    /(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i
                ],
                [
                    [w,
                        'Symbian'],
                    m
                ],
                [
                    /mozilla.+\(mobile;.+gecko.+firefox/i
                ],
                [
                    [w,
                        'Firefox OS'],
                    m
                ],
                [
                    /(nintendo|playstation)\s([wids3portablevu]+)/i,
                    /(mint)[\/\s\(]?(\w+)*/i,
                    /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,
                    /(hurd|linux)\s?([\w\.]+)*/i,
                    /(gnu)\s?([\w\.]+)*/i
                ],
                [
                    w,
                    m
                ],
                [
                    /(cros)\s[\w]+\s([\w\.]+\w)/i
                ],
                [
                    [w,
                        'Chromium OS'],
                    m
                ],
                [
                    /(sunos)\s?([\w\.]+\d)*/i
                ],
                [
                    [w,
                        'Solaris'],
                    m
                ],
                [
                    /\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i
                ],
                [
                    w,
                    m
                ],
                [
                    /(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i
                ],
                [
                    [w,
                        'iOS'],
                    [
                        m,
                        /_/g,
                        '.'
                    ]
                ],
                [
                    /(mac\sos\sx)\s?([\w\s\.]+\w)*/i
                ],
                [
                    w,
                    [
                        m,
                        /_/g,
                        '.'
                    ]
                ],
                [
                    /(haiku)\s(\w+)/i,
                    /(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,
                    /(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,
                    /(unix)\s?([\w\.]+)*/i
                ],
                [
                    w,
                    m
                ]
            ]
        },
        x = function (e) {
            var r = e || (i && i.navigator && i.navigator.userAgent ? i.navigator.userAgent : s);
            return this instanceof x ? (this.getBrowser = function () {
                return y.rgx.apply(this, k.browser)
            }, this.getCPU = function () {
                return y.rgx.apply(this, k.cpu)
            }, this.getDevice = function () {
                return y.rgx.apply(this, k.device)
            }, this.getEngine = function () {
                return y.rgx.apply(this, k.engine)
            }, this.getOS = function () {
                return y.rgx.apply(this, k.os)
            }, this.getResult = function () {
                return {
                    ua: this.getUA(),
                    browser: this.getBrowser(),
                    engine: this.getEngine(),
                    os: this.getOS(),
                    device: this.getDevice(),
                    cpu: this.getCPU()
                }
            }, this.getUA = function () {
                return r
            }, this.setUA = function (i) {
                return r = i,
                    this
            }, void this.setUA(r))  : new x(e).getResult()
        };
    if (typeof exports !== a) typeof module !== a && module.exports && (exports = module.exports = x),
        exports.UAParser = x;
    else if (i.UAParser = x, typeof define === o && define.amd && define(function () {
            return x
        }), typeof i.jQuery !== a) {
        var A = i.jQuery,
            _ = new x;
        A.ua = _.getResult(),
            A.ua.get = function () {
                return _.getUA()
            },
            A.ua.set = function (i) {
                _.setUA(i);
                var e = _.getResult();
                for (var s in e) A.ua[s] = e[s]
            }
    }
}(this);
window.Modernizr = function (n, e, t) {
    function r(n) {
        d.cssText = n
    }
    function o(n, e) {
        return typeof n === e
    }
    var i,
        u,
        c,
        a = '2.8.2',
        s = {
        },
        f = e.documentElement,
        l = 'modernizr',
        p = e.createElement(l),
        d = p.style,
        y = ({
        }.toString, {
        }),
        m = [
        ],
        w = m.slice,
        b = {
        }.hasOwnProperty;
    c = o(b, 'undefined') || o(b.call, 'undefined') ? function (n, e) {
        return e in n && o(n.constructor.prototype[e], 'undefined')
    }
        : function (n, e) {
        return b.call(n, e)
    },
    Function.prototype.bind || (Function.prototype.bind = function (n) {
        var e = this;
        if ('function' != typeof e) throw new TypeError;
        var t = w.call(arguments, 1),
            r = function () {
                if (this instanceof r) {
                    var o = function () {
                    };
                    o.prototype = e.prototype;
                    var i = new o,
                        u = e.apply(i, t.concat(w.call(arguments)));
                    return Object(u) === u ? u : i
                }
                return e.apply(n, t.concat(w.call(arguments)))
            };
        return r
    }),
        y.webgl = function () {
            return !!n.WebGLRenderingContext
        };
    for (var v in y) c(y, v) && (u = v.toLowerCase(), s[u] = y[v](), m.push((s[u] ? '' : 'no-') + u));
    return s.addTest = function (n, e) {
        if ('object' == typeof n) for (var r in n) c(n, r) && s.addTest(r, n[r]);
        else {
            if (n = n.toLowerCase(), s[n] !== t) return s;
            e = 'function' == typeof e ? e()  : e,
            'undefined' != typeof enableClasses && enableClasses && (f.className += ' ' + (e ? '' : 'no-') + n),
                s[n] = e
        }
        return s
    },
        r(''),
        p = i = null,
        s._version = a,
        s
}(this, this.document);
!function (t) {
    'use strict';
    function e(t) {
        function e(t) {
            for (var e = new ArrayBuffer(t.length), r = new Uint8Array(e), n = 0, i = t.length; i > n; ++n) r[n] = t[n];
            return e
        }
        var r = null;
        if ('function' == typeof require) try {
            var n = require('buffer');
            r = n && 'function' == typeof n.Buffer && 'function' == typeof n.Buffer.isBuffer ? n.Buffer : null
        } catch (i) {
        }
        var o = function (t, e, r) {
            t = 'undefined' != typeof t ? parseInt(t, 10)  : o.DEFAULT_CAPACITY,
            1 > t && (t = o.DEFAULT_CAPACITY),
                this.array = r ? null : new ArrayBuffer(t),
                this.view = r ? null : new DataView(this.array),
                this.offset = 0,
                this.markedOffset = - 1,
                this.length = 0,
                this.littleEndian = 'undefined' != typeof e ? !!e : !1
        };
        o.VERSION = '2.3.1',
            o.DEFAULT_CAPACITY = 16,
            o.LITTLE_ENDIAN = !0,
            o.BIG_ENDIAN = !1,
            o.Long = t || null,
            o.isByteBuffer = function (t) {
                return t && (t instanceof o || 'object' == typeof t && (null === t.array || t.array instanceof ArrayBuffer) && (null === t.view || t.view instanceof DataView) && 'number' == typeof t.offset && 'number' == typeof t.markedOffset && 'number' == typeof t.length && 'boolean' == typeof t.littleEndian)
            },
            o.allocate = function (t, e) {
                return new o(t, e)
            },
            o.wrap = function (t, n, i) {
                if ('boolean' == typeof n && (i = n, n = 'utf8'), 'string' == typeof t) switch (n) {
                    case 'base64':
                        return o.decode64(t, i);
                    case 'hex':
                        return o.decodeHex(t, i);
                    case 'binary':
                        return o.decodeBinary(t, i);
                    default:
                        return new o(o.DEFAULT_CAPACITY, i).writeUTF8String(t).flip()
                }
                var a;
                if (r && r.isBuffer(t) && (a = new Uint8Array(t).buffer, t = a === t ? e(t)  : a), null === t || 'object' != typeof t) throw new Error('Cannot wrap null or non-object');
                if (o.isByteBuffer(t)) return o.prototype.clone.call(t);
                if (t.array ? t = t.array : t.buffer && (t = t.buffer), !(t instanceof ArrayBuffer)) throw new Error('Cannot wrap buffer of type ' + typeof t + ', ' + t.constructor.name);
                return a = new o(0, i, !0),
                    a.array = t,
                    a.view = a.array.byteLength > 0 ? new DataView(a.array)  : null,
                    a.offset = 0,
                    a.length = t.byteLength,
                    a
            },
            o.prototype.LE = function (t) {
                return this.littleEndian = 'undefined' != typeof t ? !!t : !0,
                    this
            },
            o.prototype.BE = function (t) {
                return this.littleEndian = 'undefined' != typeof t ? !t : !1,
                    this
            },
            o.prototype.resize = function (t) {
                if (1 > t) return !1;
                if (null === this.array && (this.array = new ArrayBuffer(t), this.view = new DataView(this.array)), this.array.byteLength < t) {
                    var e = this.array,
                        r = new Uint8Array(e),
                        n = new ArrayBuffer(t),
                        i = new Uint8Array(n);
                    i.set(r),
                        this.array = n,
                        this.view = new DataView(n)
                }
                return this
            },
            o.prototype.slice = function (t, e) {
                if (null == this.array) throw new Error(this + ' cannot be sliced: Already destroyed');
                if ('undefined' == typeof t && (t = this.offset), 'undefined' == typeof e && (e = this.length), t >= e) {
                    var r = e;
                    e = t,
                        t = r
                }
                if (0 > t || t > this.array.byteLength || 1 > e || e > this.array.byteLength) throw new Error(this + ' cannot be sliced: Index out of bounds (0-' + this.array.byteLength + ' -> ' + t + '-' + e + ')');
                var n = this.clone();
                return n.offset = t,
                    n.length = e,
                    n
            },
            o.prototype.ensureCapacity = function (t) {
                return null === this.array ? this.resize(t)  : this.array.byteLength < t ? this.resize(2 * this.array.byteLength >= t ? 2 * this.array.byteLength : t)  : this
            },
            o.prototype.flip = function () {
                return this.length = null == this.array ? 0 : this.offset,
                    this.offset = 0,
                    this
            },
            o.prototype.mark = function (t) {
                if (null == this.array) throw new Error(this + ' cannot be marked: Already destroyed');
                if (t = 'undefined' != typeof t ? parseInt(t, 10)  : this.offset, 0 > t || t > this.array.byteLength) throw new Error(this + ' cannot be marked: Offset to mark is less than 0 or bigger than the capacity (' + this.array.byteLength + '): ' + t);
                return this.markedOffset = t,
                    this
            },
            o.prototype.reset = function () {
                if (null === this.array) throw new Error(this + ' cannot be reset: Already destroyed');
                return this.markedOffset >= 0 ? (this.offset = this.markedOffset, this.markedOffset = - 1)  : (this.offset = 0, this.length = 0),
                    this
            },
            o.prototype.clone = function () {
                var t = new o( - 1, this.littleEndian, !0);
                return t.array = this.array,
                    t.view = this.view,
                    t.offset = this.offset,
                    t.markedOffset = this.markedOffset,
                    t.length = this.length,
                    t
            },
            o.prototype.copy = function () {
                if (null == this.array) return this.clone();
                var t = new o(this.array.byteLength, this.littleEndian),
                    e = new Uint8Array(this.array),
                    r = new Uint8Array(t.array);
                return r.set(e),
                    t.offset = this.offset,
                    t.markedOffset = this.markedOffset,
                    t.length = this.length,
                    t
            },
            o.prototype.remaining = function () {
                return null === this.array ? 0 : this.length - this.offset
            },
            o.prototype.capacity = function () {
                return null != this.array ? this.array.byteLength : 0
            },
            o.prototype.compact = function () {
                if (null == this.array) throw new Error(this + ' cannot be compacted: Already destroyed');
                if (this.offset > this.length && this.flip(), this.offset === this.length) return this.array = new ArrayBuffer(0),
                    this.view = null,
                    this;
                if (0 === this.offset && this.length === this.array.byteLength) return this;
                var t = new Uint8Array(this.array),
                    e = new ArrayBuffer(this.length - this.offset),
                    r = new Uint8Array(e);
                return r.set(t.subarray(this.offset, this.length)),
                    this.array = e,
                    this.markedOffset >= this.offset ? this.markedOffset -= this.offset : this.markedOffset = - 1,
                    this.offset = 0,
                    this.length = this.array.byteLength,
                    this
            },
            o.prototype.destroy = function () {
                return null !== this.array && (this.array = null, this.view = null, this.offset = 0, this.markedOffset = - 1, this.length = 0),
                    this
            },
            o.prototype.reverse = function () {
                if (null === this.array) throw new Error(this + ' cannot be reversed: Already destroyed');
                Array.prototype.reverse.call(new Uint8Array(this.array));
                var t = this.offset;
                return this.offset = this.array.byteLength - this.length,
                    this.markedOffset = - 1,
                    this.length = this.array.byteLength - t,
                    this.view = new DataView(this.array),
                    this
            },
            o.prototype.append = function (t, e) {
                if (t instanceof o || (t = o.wrap(t)), null === t.array) throw new Error(t + ' cannot be appended to ' + this + ': Already destroyed');
                var r = t.length - t.offset;
                if (0 == r) return this;
                0 > r && (t = t.clone().flip(), r = t.length - t.offset),
                    e = 'undefined' != typeof e ? e : (this.offset += r) - r,
                    this.ensureCapacity(e + r);
                var n = new Uint8Array(t.array),
                    i = new Uint8Array(this.array);
                return i.set(n.subarray(t.offset, t.length), e),
                    this
            },
            o.prototype.prepend = function (t, e) {
                if (t instanceof o || (t = o.wrap(t)), null === t.array) throw t + ' cannot be prepended to ' + this + ': Already destroyed';
                var r = t.length - t.offset;
                if (0 == r) return this;
                0 > r && (t = t.clone().flip(), r = t.length - t.offset);
                var n = 'undefined' == typeof e;
                e = 'undefined' != typeof e ? e : this.offset;
                var i = r - e;
                return i > 0 ? (this.ensureCapacity(this.length + i), this.append(this, r), this.offset += i, this.length += i, this.append(t, 0))  : this.append(t, e - r),
                n && (this.offset -= r),
                    this
            },
            o.prototype.writeInt8 = function (t, e) {
                return e = 'undefined' != typeof e ? e : (this.offset += 1) - 1,
                    this.ensureCapacity(e + 1),
                    this.view.setInt8(e, t),
                    this
            },
            o.prototype.readInt8 = function (t) {
                if (t = 'undefined' != typeof t ? t : (this.offset += 1) - 1, t >= this.array.byteLength) throw new Error('Cannot read int8 from ' + this + ' at ' + t + ': Capacity overflow');
                return this.view.getInt8(t)
            },
            o.prototype.writeByte = o.prototype.writeInt8,
            o.prototype.readByte = o.prototype.readInt8,
            o.prototype.writeUint8 = function (t, e) {
                return e = 'undefined' != typeof e ? e : (this.offset += 1) - 1,
                    this.ensureCapacity(e + 1),
                    this.view.setUint8(e, t),
                    this
            },
            o.prototype.readUint8 = function (t) {
                if (t = 'undefined' != typeof t ? t : (this.offset += 1) - 1, t + 1 > this.array.byteLength) throw new Error('Cannot read uint8 from ' + this + ' at ' + t + ': Capacity overflow');
                return this.view.getUint8(t)
            },
            o.prototype.writeInt16 = function (t, e) {
                return e = 'undefined' != typeof e ? e : (this.offset += 2) - 2,
                    this.ensureCapacity(e + 2),
                    this.view.setInt16(e, t, this.littleEndian),
                    this
            },
            o.prototype.readInt16 = function (t) {
                if (t = 'undefined' != typeof t ? t : (this.offset += 2) - 2, t + 2 > this.array.byteLength) throw new Error('Cannot read int16 from ' + this + ' at ' + t + ': Capacity overflow');
                return this.view.getInt16(t, this.littleEndian)
            },
            o.prototype.writeShort = o.prototype.writeInt16,
            o.prototype.readShort = o.prototype.readInt16,
            o.prototype.writeUint16 = function (t, e) {
                return e = 'undefined' != typeof e ? e : (this.offset += 2) - 2,
                    this.ensureCapacity(e + 2),
                    this.view.setUint16(e, t, this.littleEndian),
                    this
            },
            o.prototype.readUint16 = function (t) {
                if (t = 'undefined' != typeof t ? t : (this.offset += 2) - 2, t + 2 > this.array.byteLength) throw new Error('Cannot read int16 from ' + this + ' at ' + t + ': Capacity overflow');
                return this.view.getUint16(t, this.littleEndian)
            },
            o.prototype.writeInt32 = function (t, e) {
                return e = 'undefined' != typeof e ? e : (this.offset += 4) - 4,
                    this.ensureCapacity(e + 4),
                    this.view.setInt32(e, t, this.littleEndian),
                    this
            },
            o.prototype.readInt32 = function (t) {
                if (t = 'undefined' != typeof t ? t : (this.offset += 4) - 4, t + 4 > this.array.byteLength) throw new Error('Cannot read int32 from ' + this + ' at ' + t + ': Capacity overflow');
                return this.view.getInt32(t, this.littleEndian)
            },
            o.prototype.writeInt = o.prototype.writeInt32,
            o.prototype.readInt = o.prototype.readInt32,
            o.prototype.writeUint32 = function (t, e) {
                return e = 'undefined' != typeof e ? e : (this.offset += 4) - 4,
                    this.ensureCapacity(e + 4),
                    this.view.setUint32(e, t, this.littleEndian),
                    this
            },
            o.prototype.readUint32 = function (t) {
                if (t = 'undefined' != typeof t ? t : (this.offset += 4) - 4, t + 4 > this.array.byteLength) throw new Error('Cannot read uint32 from ' + this + ' at ' + t + ': Capacity overflow');
                return this.view.getUint32(t, this.littleEndian)
            },
            o.prototype.writeFloat32 = function (t, e) {
                return e = 'undefined' != typeof e ? e : (this.offset += 4) - 4,
                    this.ensureCapacity(e + 4),
                    this.view.setFloat32(e, t, this.littleEndian),
                    this
            },
            o.prototype.readFloat32 = function (t) {
                if (t = 'undefined' != typeof t ? t : (this.offset += 4) - 4, null === this.array || t + 4 > this.array.byteLength) throw new Error('Cannot read float32 from ' + this + ' at ' + t + ': Capacity overflow');
                return this.view.getFloat32(t, this.littleEndian)
            },
            o.prototype.writeFloat = o.prototype.writeFloat32,
            o.prototype.readFloat = o.prototype.readFloat32,
            o.prototype.writeFloat64 = function (t, e) {
                return e = 'undefined' != typeof e ? e : (this.offset += 8) - 8,
                    this.ensureCapacity(e + 8),
                    this.view.setFloat64(e, t, this.littleEndian),
                    this
            },
            o.prototype.readFloat64 = function (t) {
                if (t = 'undefined' != typeof t ? t : (this.offset += 8) - 8, null === this.array || t + 8 > this.array.byteLength) throw new Error('Cannot read float64 from ' + this + ' at ' + t + ': Capacity overflow');
                return this.view.getFloat64(t, this.littleEndian)
            },
            o.prototype.writeDouble = o.prototype.writeFloat64,
            o.prototype.readDouble = o.prototype.readFloat64,
        t && (o.prototype.writeInt64 = function (e, r) {
            return r = 'undefined' != typeof r ? r : (this.offset += 8) - 8,
            'object' == typeof e && e instanceof t || (e = t.fromNumber(e, !1)),
                this.ensureCapacity(r + 8),
                this.littleEndian ? (this.view.setInt32(r, e.getLowBits(), !0), this.view.setInt32(r + 4, e.getHighBits(), !0))  : (this.view.setInt32(r, e.getHighBits(), !1), this.view.setInt32(r + 4, e.getLowBits(), !1)),
                this
        }, o.prototype.readInt64 = function (e) {
            if (e = 'undefined' != typeof e ? e : (this.offset += 8) - 8, null === this.array || e + 8 > this.array.byteLength) throw this.offset -= 8,
                new Error('Cannot read int64 from ' + this + ' at ' + e + ': Capacity overflow');
            var r;
            return r = this.littleEndian ? t.fromBits(this.view.getInt32(e, !0), this.view.getInt32(e + 4, !0), !1)  : t.fromBits(this.view.getInt32(e + 4, !1), this.view.getInt32(e, !1), !1)
        }, o.prototype.writeUint64 = function (e, r) {
            return r = 'undefined' != typeof r ? r : (this.offset += 8) - 8,
            'object' == typeof e && e instanceof t || (e = t.fromNumber(e, !0)),
                this.ensureCapacity(r + 8),
                this.littleEndian ? (this.view.setUint32(r, e.getLowBitsUnsigned(), !0), this.view.setUint32(r + 4, e.getHighBitsUnsigned(), !0))  : (this.view.setUint32(r, e.getHighBitsUnsigned(), !1), this.view.setUint32(r + 4, e.getLowBitsUnsigned(), !1)),
                this
        }, o.prototype.readUint64 = function (e) {
            if (e = 'undefined' != typeof e ? e : (this.offset += 8) - 8, null === this.array || e + 8 > this.array.byteLength) throw this.offset -= 8,
                new Error('Cannot read int64 from ' + this + ' at ' + e + ': Capacity overflow');
            var r;
            return r = this.littleEndian ? t.fromBits(this.view.getUint32(e, !0), this.view.getUint32(e + 4, !0), !0)  : t.fromBits(this.view.getUint32(e + 4, !1), this.view.getUint32(e, !1), !0)
        }, o.prototype.writeLong = o.prototype.writeInt64, o.prototype.readLong = o.prototype.readInt64),
            o.MAX_VARINT32_BYTES = 5,
            o.prototype.writeVarint32 = function (t, e) {
                var r = 'undefined' == typeof e;
                e = 'undefined' != typeof e ? e : this.offset,
                    t >>>= 0,
                    this.ensureCapacity(e + o.calculateVarint32(t));
                var n = this.view,
                    i = 0;
                return n.setUint8(e, 128 | t),
                    t >= 128 ? (n.setUint8(e + 1, t >> 7 | 128), t >= 16384 ? (n.setUint8(e + 2, t >> 14 | 128), t >= 1 << 21 ? (n.setUint8(e + 3, t >> 21 | 128), t >= 1 << 28 ? (n.setUint8(e + 4, t >> 28 & 127), i = 5)  : (n.setUint8(e + 3, 127 & n.getUint8(e + 3)), i = 4))  : (n.setUint8(e + 2, 127 & n.getUint8(e + 2)), i = 3))  : (n.setUint8(e + 1, 127 & n.getUint8(e + 1)), i = 2))  : (n.setUint8(e, 127 & n.getUint8(e)), i = 1),
                    r ? (this.offset += i, this)  : i
            },
            o.prototype.readVarint32 = function (t) {
                var e = 'undefined' == typeof t;
                t = 'undefined' != typeof t ? t : this.offset;
                var r,
                    n = 0,
                    i = this.view,
                    a = 0;
                do r = i.getUint8(t + n),
                n < o.MAX_VARINT32_BYTES && (a |= (127 & r) << 7 * n >>> 0),
                    ++n;
                while (128 & r);
                return a = 0 | a,
                    e ? (this.offset += n, a)  : {
                        value: a,
                        length: n
                    }
            },
            o.prototype.writeZigZagVarint32 = function (t, e) {
                return this.writeVarint32(o.zigZagEncode32(t), e)
            },
            o.prototype.readZigZagVarint32 = function (t) {
                var e = this.readVarint32(t);
                return 'object' == typeof e ? (e.value = o.zigZagDecode32(e.value), e)  : o.zigZagDecode32(e)
            },
            o.MAX_VARINT64_BYTES = 10;
        var a = 128,
            s = a * a,
            f = a * s,
            h = s * s;
        t && (o.prototype.writeVarint64 = function (e, r) {
            var n = 'undefined' == typeof r;
            r = 'undefined' != typeof r ? r : this.offset,
            'object' == typeof e && e instanceof t || (e = t.fromNumber(e, !1));
            var i = e.toInt() >>> 0,
                a = e.shiftRightUnsigned(28).toInt() >>> 0,
                s = e.shiftRightUnsigned(56).toInt() >>> 0,
                f = o.calculateVarint64(e);
            this.ensureCapacity(r + f);
            var h = this.view;
            switch (f) {
                case 10:
                    h.setUint8(r + 9, s >>> 7 | 128);
                case 9:
                    h.setUint8(r + 8, 128 | s);
                case 8:
                    h.setUint8(r + 7, a >>> 21 | 128);
                case 7:
                    h.setUint8(r + 6, a >>> 14 | 128);
                case 6:
                    h.setUint8(r + 5, a >>> 7 | 128);
                case 5:
                    h.setUint8(r + 4, 128 | a);
                case 4:
                    h.setUint8(r + 3, i >>> 21 | 128);
                case 3:
                    h.setUint8(r + 2, i >>> 14 | 128);
                case 2:
                    h.setUint8(r + 1, i >>> 7 | 128);
                case 1:
                    h.setUint8(r + 0, 128 | i)
            }
            return h.setUint8(r + f - 1, 127 & h.getUint8(r + f - 1)),
                n ? (this.offset += f, this)  : f
        },
            o.prototype.readVarint64 = function (e) {
                var r = 'undefined' == typeof e;
                e = 'undefined' != typeof e ? e : this.offset;
                var n,
                    i,
                    o = e,
                    a = this.view,
                    s = 0,
                    f = 0;
                if (i = a.getUint8(e++), n = 127 & i, 128 & i && (i = a.getUint8(e++), n |= (127 & i) << 7, 128 & i && (i = a.getUint8(e++), n |= (127 & i) << 14, 128 & i && (i = a.getUint8(e++), n |= (127 & i) << 21, 128 & i && (i = a.getUint8(e++), s = 127 & i, 128 & i && (i = a.getUint8(e++), s |= (127 & i) << 7, 128 & i && (i = a.getUint8(e++), s |= (127 & i) << 14, 128 & i && (i = a.getUint8(e++), s |= (127 & i) << 21, 128 & i && (i = a.getUint8(e++), f = 127 & i, 128 & i && (i = a.getUint8(e++), f |= (127 & i) << 7, 128 & i)))))))))) throw new Error('Data must be corrupt: Buffer overrun');
                var h = t.from28Bits(n, s, f, !1);
                return r ? (this.offset = e, h)  : {
                    value: h,
                    length: e - o
                }
            },
            o.prototype.writeZigZagVarint64 = function (t, e) {
                return this.writeVarint64(o.zigZagEncode64(t), e)
            },
            o.prototype.readZigZagVarint64 = function (e) {
                var r = this.readVarint64(e);
                return 'object' != typeof r || r instanceof t ? o.zigZagDecode64(r)  : (r.value = o.zigZagDecode64(r.value), r)
            }), o.prototype.writeVarint = o.prototype.writeVarint32, o.prototype.readVarint = o.prototype.readVarint32, o.prototype.writeZigZagVarint = o.prototype.writeZigZagVarint32, o.prototype.readZigZagVarint = o.prototype.readZigZagVarint32, o.calculateVarint32 = function (t) {
            return t >>>= 0,
                a > t ? 1 : s > t ? 2 : f > t ? 3 : h > t ? 4 : 5
        }, t && (o.calculateVarint64 = function (e) {
            'object' == typeof e && e instanceof t || (e = t.fromNumber(e, !1));
            var r = e.toInt() >>> 0,
                n = e.shiftRightUnsigned(28).toInt() >>> 0,
                i = e.shiftRightUnsigned(56).toInt() >>> 0;
            return 0 == i ? 0 == n ? s > r ? a > r ? 1 : 2 : f > r ? 3 : 4 : s > n ? a > n ? 5 : 6 : f > n ? 7 : 8 : a > i ? 9 : 10
        }), o.zigZagEncode32 = function (t) {
            return ((t |= 0) << 1 ^ t >> 31) >>> 0
        }, o.zigZagDecode32 = function (t) {
            return t >>> 1 ^ - (1 & t) | 0
        }, t && (o.zigZagEncode64 = function (e) {
            return 'object' == typeof e && e instanceof t ? e.unsigned && (e = e.toSigned())  : e = t.fromNumber(e, !1),
                e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned()
        }, o.zigZagDecode64 = function (e) {
            return 'object' == typeof e && e instanceof t ? e.unsigned || (e = e.toUnsigned())  : e = t.fromNumber(e, !0),
                e.shiftRightUnsigned(1).xor(e.and(t.ONE).toSigned().negate()).toSigned()
        }), o.decodeUTF8Char = function (t, e) {
            var r,
                n,
                i,
                o,
                a,
                s,
                f = t.readUint8(e),
                h = e;
            if (0 == (128 & f)) s = f,
                e += 1;
            else if (192 == (224 & f)) r = t.readUint8(e + 1),
                s = (31 & f) << 6 | 63 & r,
                e += 2;
            else if (224 == (240 & f)) r = t.readUint8(e + 1),
                n = t.readUint8(e + 2),
                s = (15 & f) << 12 | (63 & r) << 6 | 63 & n,
                e += 3;
            else if (240 == (248 & f)) r = t.readUint8(e + 1),
                n = t.readUint8(e + 2),
                i = t.readUint8(e + 3),
                s = (7 & f) << 18 | (63 & r) << 12 | (63 & n) << 6 | 63 & i,
                e += 4;
            else if (248 == (252 & f)) r = t.readUint8(e + 1),
                n = t.readUint8(e + 2),
                i = t.readUint8(e + 3),
                o = t.readUint8(e + 4),
                s = (3 & f) << 24 | (63 & r) << 18 | (63 & n) << 12 | (63 & i) << 6 | 63 & o,
                e += 5;
            else {
                if (252 != (254 & f)) throw new Error('Cannot decode UTF8 character at offset ' + e + ': charCode (0x' + f.toString(16) + ') is invalid');
                r = t.readUint8(e + 1),
                    n = t.readUint8(e + 2),
                    i = t.readUint8(e + 3),
                    o = t.readUint8(e + 4),
                    a = t.readUint8(e + 5),
                    s = (1 & f) << 30 | (63 & r) << 24 | (63 & n) << 18 | (63 & i) << 12 | (63 & o) << 6 | 63 & a,
                    e += 6
            }
            return {
                'char': s,
                length: e - h
            }
        }, o.encodeUTF8Char = function (t, e, r) {
            var n = r;
            if (0 > t) throw new Error('Cannot encode UTF8 character: charCode (' + t + ') is negative');
            if (128 > t) e.writeUint8(127 & t, r),
                r += 1;
            else if (2048 > t) e.writeUint8(t >> 6 & 31 | 192, r).writeUint8(63 & t | 128, r + 1),
                r += 2;
            else if (65536 > t) e.writeUint8(t >> 12 & 15 | 224, r).writeUint8(t >> 6 & 63 | 128, r + 1).writeUint8(63 & t | 128, r + 2),
                r += 3;
            else if (2097152 > t) e.writeUint8(t >> 18 & 7 | 240, r).writeUint8(t >> 12 & 63 | 128, r + 1).writeUint8(t >> 6 & 63 | 128, r + 2).writeUint8(63 & t | 128, r + 3),
                r += 4;
            else if (67108864 > t) e.writeUint8(t >> 24 & 3 | 248, r).writeUint8(t >> 18 & 63 | 128, r + 1).writeUint8(t >> 12 & 63 | 128, r + 2).writeUint8(t >> 6 & 63 | 128, r + 3).writeUint8(63 & t | 128, r + 4),
                r += 5;
            else {
                if (!(2147483648 > t)) throw new Error('Cannot encode UTF8 character: charCode (0x' + t.toString(16) + ') is too large (>= 0x80000000)');
                e.writeUint8(t >> 30 & 1 | 252, r).writeUint8(t >> 24 & 63 | 128, r + 1).writeUint8(t >> 18 & 63 | 128, r + 2).writeUint8(t >> 12 & 63 | 128, r + 3).writeUint8(t >> 6 & 63 | 128, r + 4).writeUint8(63 & t | 128, r + 5),
                    r += 6
            }
            return r - n
        }, o.calculateUTF8Char = function (t) {
            if (0 > t) throw new Error('Cannot calculate length of UTF8 character: charCode (' + t + ') is negative');
            if (128 > t) return 1;
            if (2048 > t) return 2;
            if (65536 > t) return 3;
            if (2097152 > t) return 4;
            if (67108864 > t) return 5;
            if (2147483648 > t) return 6;
            throw new Error('Cannot calculate length of UTF8 character: charCode (0x' + t.toString(16) + ') is too large (>= 0x80000000)')
        }, o.calculateUTF8String = function (t) {
            t = '' + t;
            for (var e = 0, r = 0, n = t.length; n > r; ++r) e += o.calculateUTF8Char(t.charCodeAt(r));
            return e
        }; var u = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='; return u += '', o.encode64 = function (t) {
            t instanceof o ? t.length < t.offset && (t = t.clone().flip())  : t = o.wrap(t);
            var e,
                r,
                n,
                i,
                a,
                s,
                f,
                h,
                y = t.offset,
                d = 0,
                l = [
                ];
            do e = t.readUint8(y++),
                r = t.length > y ? t.readUint8(y++)  : 0,
                n = t.length > y ? t.readUint8(y++)  : 0,
                h = e << 16 | r << 8 | n,
                i = h >> 18 & 63,
                a = h >> 12 & 63,
                s = h >> 6 & 63,
                f = 63 & h,
                l[d++] = u.charAt(i) + u.charAt(a) + u.charAt(s) + u.charAt(f);
            while (y < t.length);
            var p = l.join(''),
                g = (t.length - t.offset) % 3;
            return (g ? p.slice(0, g - 3)  : p) + '==='.slice(g || 3)
        }, o.decode64 = function (t, e) {
            if ('string' != typeof t) throw new Error('Illegal argument: Not a string');
            var r,
                n,
                i,
                a,
                s,
                f,
                h,
                y,
                d = 0,
                l = new o(Math.ceil(t.length / 3), e);
            do {
                if (a = u.indexOf(t.charAt(d++)), s = u.indexOf(t.charAt(d++)), f = u.indexOf(t.charAt(d++)), h = u.indexOf(t.charAt(d++)), 0 > a || 0 > s || 0 > f || 0 > h) throw new Error('Illegal argument: Not a valid base64 encoded string');
                y = a << 18 | s << 12 | f << 6 | h,
                    r = y >> 16 & 255,
                    n = y >> 8 & 255,
                    i = 255 & y,
                    64 == f ? l.writeUint8(r)  : 64 == h ? l.writeUint8(r).writeUint8(n)  : l.writeUint8(r).writeUint8(n).writeUint8(i)
            } while (d < t.length);
            return l.flip()
        }, o.encodeHex = function (t) {
            if (t instanceof o ? t.length < t.offset && (t = t.clone().flip())  : t = o.wrap(t), null === t.array) return '';
            for (var e, r = [
            ], n = t.offset, i = t.length; i > n; ++n) e = t.view.getUint8(n).toString(16).toUpperCase(),
            e.length < 2 && (e = '0' + e),
                r.push(e);
            return r.join('')
        }, o.decodeHex = function (t, e) {
            if ('string' != typeof t) throw new Error('Illegal argument: Not a string');
            if (t.length % 2 !== 0) throw new Error('Illegal argument: Not a hex encoded string');
            for (var r = new o(t.length / 2, e), n = 0, i = t.length; i > n; n += 2) r.writeUint8(parseInt(t.substring(n, n + 2), 16));
            return r.flip()
        }, o.encodeBinary = function (t) {
            t instanceof o ? t.length < t.offset && (t = t.clone().flip())  : t = o.wrap(t);
            for (var e = [
            ], r = t.view, n = t.offset, i = t.length; i > n; ++n) e.push(String.fromCharCode(r.getUint8(n)));
            return e.join('')
        }, o.decodeBinary = function (t, e) {
            if ('string' != typeof t) throw new Error('Illegal argument: Not a string');
            for (var r, n = t.length, i = new ArrayBuffer(n), a = new DataView(i), s = 0; n > s; ++s) {
                if ((r = t.charCodeAt(s)) > 255) throw new Error('Illegal argument: Not a binary string (char code ' + r + ')');
                a.setUint8(s, r)
            }
            var f = new o(n, e, !0);
            return f.array = i,
                f.view = a,
                f.length = n,
                f
        }, o.prototype.writeUTF8String = function (t, e) {
            var r = 'undefined' == typeof e;
            e = 'undefined' != typeof e ? e : this.offset;
            var n = e,
                i = o.calculateUTF8String(t);
            this.ensureCapacity(e + i);
            for (var a = 0, s = t.length; s > a; ++a) e += o.encodeUTF8Char(t.charCodeAt(a), this, e);
            return r ? (this.offset = e, this)  : e - n
        }, o.prototype.readUTF8String = function (t, e) {
            var r = 'undefined' == typeof e;
            e = 'undefined' != typeof e ? e : this.offset;
            for (var n, i = '', a = e, s = 0; t > s; ++s) n = o.decodeUTF8Char(this, e),
                e += n.length,
                i += String.fromCharCode(n['char']);
            return r ? (this.offset = e, i)  : {
                string: i,
                length: e - a
            }
        }, o.prototype.readUTF8StringBytes = function (t, e) {
            var r = 'undefined' == typeof e;
            e = 'undefined' != typeof e ? e : this.offset;
            var n,
                i = '',
                a = e;
            for (t = e + t; t > e; ) n = o.decodeUTF8Char(this, e),
                e += n.length,
                i += String.fromCharCode(n['char']);
            if (e != t) throw new Error('Actual string length differs from the specified: ' + ((e > t ? '+' : '') + e - t) + ' bytes');
            return r ? (this.offset = e, i)  : {
                string: i,
                length: e - a
            }
        }, o.prototype.writeLString = function (t, e) {
            t = '' + t;
            var r = 'undefined' == typeof e;
            e = 'undefined' != typeof e ? e : this.offset;
            var n = o.encodeUTF8Char(t.length, this, e);
            return n += this.writeUTF8String(t, e + n),
                r ? (this.offset += n, this)  : n
        }, o.prototype.readLString = function (t) {
            var e = 'undefined' == typeof t;
            t = 'undefined' != typeof t ? t : this.offset;
            var r = o.decodeUTF8Char(this, t),
                n = this.readUTF8String(r['char'], t + r.length);
            return e ? (this.offset += r.length + n.length, n.string)  : {
                string: n.string,
                length: r.length + n.length
            }
        }, o.prototype.writeVString = function (t, e) {
            t = '' + t;
            var r = 'undefined' == typeof e;
            e = 'undefined' != typeof e ? e : this.offset;
            var n = this.writeVarint32(o.calculateUTF8String(t), e);
            return n += this.writeUTF8String(t, e + n),
                r ? (this.offset += n, this)  : n
        }, o.prototype.readVString = function (t) {
            var e = 'undefined' == typeof t;
            t = 'undefined' != typeof t ? t : this.offset;
            var r = this.readVarint32(t),
                n = this.readUTF8StringBytes(r.value, t + r.length);
            return e ? (this.offset += r.length + n.length, n.string)  : {
                string: n.string,
                length: r.length + n.length
            }
        }, o.prototype.writeCString = function (t, e) {
            t = '' + t;
            var r = 'undefined' == typeof e;
            e = 'undefined' != typeof e ? e : this.offset;
            var n = this.writeUTF8String(t, e);
            return this.writeUint8(0, e + n),
                r ? (this.offset += n + 1, this)  : n + 1
        }, o.prototype.readCString = function (t) {
            var e = 'undefined' == typeof t;
            t = 'undefined' != typeof t ? t : this.offset;
            var r,
                n = '',
                i = t;
            do r = o.decodeUTF8Char(this, t),
                t += r.length,
            0 != r['char'] && (n += String.fromCharCode(r['char']));
            while (0 != r['char']);
            return e ? (this.offset = t, n)  : {
                string: n,
                length: t - i
            }
        }, o.prototype.writeJSON = function (t, e, r) {
            return r = 'function' == typeof r ? r : JSON.stringify,
                this.writeLString(r(t), e)
        }, o.prototype.readJSON = function (t, e) {
            e = 'function' == typeof e ? e : JSON.parse;
            var r = this.readLString(t);
            return 'string' == typeof r ? e(r)  : {
                data: e(r.string),
                length: r.length
            }
        }, o.prototype.toColumns = function (t) {
            if (null === this.array) return 'DESTROYED';
            t = 'undefined' != typeof t ? parseInt(t, 10)  : 16,
            1 > t && (t = 16);
            var e,
                r = '',
                n = [
                ],
                i = this.view;
            r += 0 == this.offset && 0 == this.length ? '|' : 0 == this.length ? '>' : 0 == this.offset ? '<' : ' ';
            for (var o = 0, a = this.array.byteLength; a > o; ++o) {
                if (o > 0 && o % t == 0) {
                    for (; r.length < 3 * t + 1; ) r += '   ';
                    n.push(r),
                        r = ' '
                }
                e = i.getUint8(o).toString(16).toUpperCase(),
                e.length < 2 && (e = '0' + e),
                    r += e,
                    r += o + 1 == this.offset && o + 1 == this.length ? '|' : o + 1 == this.offset ? '<' : o + 1 == this.length ? '>' : ' '
            }
            for (' ' != r && n.push(r), o = 0, a = n.length; a > o; ++o) for (; n[o].length < 3 * t + 1; ) n[o] += '   ';
            var s = 0;
            for (r = '', o = 0, a = this.array.byteLength; a > o; ++o) o > 0 && o % t == 0 && (n[s] += ' ' + r, r = '', s++),
                e = i.getUint8(o),
                r += e > 32 && 127 > e ? String.fromCharCode(e)  : '.';
            return '' != r && (n[s] += ' ' + r),
                n.join('\n')
        }, o.prototype.printDebug = function (t) {
            'function' != typeof t && (t = console.log.bind(console)),
                t((null != this.array ? 'ByteBuffer(offset=' + this.offset + ',markedOffset=' + this.markedOffset + ',length=' + this.length + ',capacity=' + this.array.byteLength + ')' : 'ByteBuffer(DESTROYED)') + '\n-------------------------------------------------------------------\n' + this.toColumns() + '\n')
        }, o.prototype.toHex = function (t) {
            var e,
                r,
                n,
                i = '',
                a = this.view;
            if (t) {
                if (null === this.array) return 'DESTROYED';
                for (i += 0 == this.offset && 0 == this.length ? '|' : 0 == this.length ? '>' : 0 == this.offset ? '<' : ' ', r = 0, n = this.array.byteLength; n > r; ++r) e = a.getUint8(r).toString(16).toUpperCase(),
                e.length < 2 && (e = '0' + e),
                    i += e,
                    i += r + 1 === this.offset && r + 1 === this.length ? '|' : r + 1 == this.offset ? '<' : r + 1 == this.length ? '>' : ' ';
                return i
            }
            return o.encodeHex(this)
        }, o.prototype.toBinary = function () {
            return o.encodeBinary(this)
        }, o.prototype.toBase64 = function () {
            return null === this.array || this.offset >= this.length ? '' : o.encode64(this)
        }, o.prototype.toUTF8 = function () {
            return null === this.array || this.offset >= this.length ? '' : this.readUTF8StringBytes(this.length - this.offset, this.offset).string
        }, o.prototype.toString = function (t) {
            switch (t = t || '') {
                case 'utf8':
                    return this.toUTF8();
                case 'base64':
                    return this.toBase64();
                case 'hex':
                    return this.toHex();
                case 'binary':
                    return this.toBinary();
                case 'debug':
                    return this.toHex(!0);
                default:
                    return null === this.array ? 'ByteBuffer(DESTROYED)' : 'ByteBuffer(offset=' + this.offset + ',markedOffset=' + this.markedOffset + ',length=' + this.length + ',capacity=' + this.array.byteLength + ')'
            }
        },
            o.prototype.toArrayBuffer = function (t) {
                if (null === this.array) return null;
                var e = this.clone();
                e.offset > e.length && e.flip();
                var r = !1;
                return (e.offset > 0 || e.length < e.array.byteLength) && (e.compact(), r = !0),
                    t && !r ? e.copy().array : e.array
            },
        r && (o.prototype.toBuffer = function () {
            if (null === this.array) return null;
            var t = this.offset,
                e = this.length;
            if (t > e) {
                var n = t;
                t = e,
                    e = n
            }
            return new r(new Uint8Array(this.array).subarray(t, e))
        }),
            o
    }
    'undefined' != typeof module && module.exports ? module.exports = e(require('long'))  : 'undefined' != typeof define && define.amd ? define('ByteBuffer', [
        'Math/Long'
    ], function (t) {
        return e(t)
    })  : (t.dcodeIO || (t.dcodeIO = {
    }), t.dcodeIO.ByteBuffer = e(t.dcodeIO.Long))
}(this);
!function (e) {
    'use strict';
    function t(e) {
        var t = {
        };
        return t.VERSION = '2.2.0',
            t.WIRE_TYPES = {
            },
            t.WIRE_TYPES.VARINT = 0,
            t.WIRE_TYPES.BITS64 = 1,
            t.WIRE_TYPES.LDELIM = 2,
            t.WIRE_TYPES.STARTGROUP = 3,
            t.WIRE_TYPES.ENDGROUP = 4,
            t.WIRE_TYPES.BITS32 = 5,
            t.TYPES = {
                int32: {
                    name: 'int32',
                    wireType: t.WIRE_TYPES.VARINT
                },
                uint32: {
                    name: 'uint32',
                    wireType: t.WIRE_TYPES.VARINT
                },
                sint32: {
                    name: 'sint32',
                    wireType: t.WIRE_TYPES.VARINT
                },
                int64: {
                    name: 'int64',
                    wireType: t.WIRE_TYPES.VARINT
                },
                uint64: {
                    name: 'uint64',
                    wireType: t.WIRE_TYPES.VARINT
                },
                sint64: {
                    name: 'sint64',
                    wireType: t.WIRE_TYPES.VARINT
                },
                bool: {
                    name: 'bool',
                    wireType: t.WIRE_TYPES.VARINT
                },
                'double': {
                    name: 'double',
                    wireType: t.WIRE_TYPES.BITS64
                },
                string: {
                    name: 'string',
                    wireType: t.WIRE_TYPES.LDELIM
                },
                bytes: {
                    name: 'bytes',
                    wireType: t.WIRE_TYPES.LDELIM
                },
                fixed32: {
                    name: 'fixed32',
                    wireType: t.WIRE_TYPES.BITS32
                },
                sfixed32: {
                    name: 'sfixed32',
                    wireType: t.WIRE_TYPES.BITS32
                },
                fixed64: {
                    name: 'fixed64',
                    wireType: t.WIRE_TYPES.BITS64
                },
                sfixed64: {
                    name: 'sfixed64',
                    wireType: t.WIRE_TYPES.BITS64
                },
                'float': {
                    name: 'float',
                    wireType: t.WIRE_TYPES.BITS32
                },
                'enum': {
                    name: 'enum',
                    wireType: t.WIRE_TYPES.VARINT
                },
                message: {
                    name: 'message',
                    wireType: t.WIRE_TYPES.LDELIM
                }
            },
            t.Long = e.Long,
            t.convertFieldsToCamelCase = !1,
            t.Util = function () {
                Object.create || (Object.create = function (e) {
                    function t() {
                    }
                    if (arguments.length > 1) throw new Error('Object.create implementation only accepts the first parameter.');
                    return t.prototype = e,
                        new t
                });
                var e = {
                };
                return e.IS_NODE = ('undefined' == typeof window || !window.window) && 'function' == typeof require && 'undefined' != typeof process && 'function' == typeof process.nextTick,
                    e.XHR = function () {
                        for (var e = [
                            function () {
                                return new XMLHttpRequest
                            },
                            function () {
                                return new ActiveXObject('Msxml2.XMLHTTP')
                            },
                            function () {
                                return new ActiveXObject('Msxml3.XMLHTTP')
                            },
                            function () {
                                return new ActiveXObject('Microsoft.XMLHTTP')
                            }
                        ], t = null, i = 0; i < e.length; i++) {
                            try {
                                t = e[i]()
                            } catch (n) {
                                continue
                            }
                            break
                        }
                        if (!t) throw new Error('XMLHttpRequest is not supported');
                        return t
                    },
                    e.fetch = function (t, i) {
                        if (i && 'function' != typeof i && (i = null), e.IS_NODE) if (i) require('fs').readFile(t, function (e, t) {
                            i(e ? null : '' + t)
                        });
                        else try {
                                return require('fs').readFileSync(t)
                            } catch (n) {
                                return null
                            } else {
                            var r = e.XHR();
                            if (r.open('GET', t, i ? !0 : !1), r.setRequestHeader('Accept', 'text/plain'), 'function' == typeof r.overrideMimeType && r.overrideMimeType('text/plain'), !i) return r.send(null),
                                200 == r.status || 0 == r.status && 'string' == typeof r.responseText ? r.responseText : null;
                            if (r.onreadystatechange = function () {
                                    4 == r.readyState && i(200 == r.status || 0 == r.status && 'string' == typeof r.responseText ? r.responseText : null)
                                }, 4 == r.readyState) return;
                            r.send(null)
                        }
                    },
                    e.isArray = function (e) {
                        return e ? e instanceof Array ? !0 : Array.isArray ? Array.isArray(e)  : '[object Array]' === Object.prototype.toString.call(e)  : !1
                    },
                    e
            }(),
            t.Lang = function () {
                var e = {
                    OPEN: '{',
                    CLOSE: '}',
                    OPTOPEN: '[',
                    OPTCLOSE: ']',
                    OPTEND: ',',
                    EQUAL: '=',
                    END: ';',
                    STRINGOPEN: '"',
                    STRINGCLOSE: '"',
                    STRINGOPEN_SQ: '\'',
                    STRINGCLOSE_SQ: '\'',
                    COPTOPEN: '(',
                    COPTCLOSE: ')',
                    DELIM: /[\s\{\}=;\[\],'"\(\)]/g,
                    KEYWORD: /^(?:package|option|import|message|enum|extend|service|syntax|extensions)$/,
                    RULE: /^(?:required|optional|repeated)$/,
                    TYPE: /^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,
                    NAME: /^[a-zA-Z_][a-zA-Z_0-9]*$/,
                    OPTNAME: /^(?:[a-zA-Z][a-zA-Z_0-9]*|\([a-zA-Z][a-zA-Z_0-9]*\))$/,
                    TYPEDEF: /^[a-zA-Z][a-zA-Z_0-9]*$/,
                    TYPEREF: /^(?:\.?[a-zA-Z][a-zA-Z_0-9]*)+$/,
                    FQTYPEREF: /^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,
                    NUMBER: /^-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+|[0-9]*\.[0-9]+)$/,
                    NUMBER_DEC: /^(?:[1-9][0-9]*|0)$/,
                    NUMBER_HEX: /^0x[0-9a-fA-F]+$/,
                    NUMBER_OCT: /^0[0-7]+$/,
                    NUMBER_FLT: /^[0-9]*\.[0-9]+$/,
                    ID: /^(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,
                    NEGID: /^\-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,
                    WHITESPACE: /\s/,
                    STRING: /['"]([^'"\\]*(\\.[^"\\]*)*)['"]/g,
                    BOOL: /^(?:true|false)$/i,
                    ID_MIN: 1,
                    ID_MAX: 536870911
                };
                return e
            }(),
            t.DotProto = {
            },
            t.DotProto.Tokenizer = function (e) {
                var t = function (t) {
                    this.source = '' + t,
                        this.index = 0,
                        this.line = 1,
                        this.stack = [
                        ],
                        this.readingString = !1,
                        this.stringEndsWith = e.STRINGCLOSE
                };
                return t.prototype._readString = function () {
                    e.STRING.lastIndex = this.index - 1;
                    var t;
                    if (null !== (t = e.STRING.exec(this.source))) {
                        var i = t[1];
                        return this.index = e.STRING.lastIndex,
                            this.stack.push(this.stringEndsWith),
                            i
                    }
                    throw new Error('Illegal string value at line ' + this.line + ', index ' + this.index)
                },
                    t.prototype.next = function () {
                        if (this.stack.length > 0) return this.stack.shift();
                        if (this.index >= this.source.length) return null;
                        if (this.readingString) return this.readingString = !1,
                            this._readString();
                        var t,
                            i;
                        do {
                            for (t = !1; e.WHITESPACE.test(i = this.source.charAt(this.index)); ) if (this.index++, '\n' === i && this.line++, this.index === this.source.length) return null;
                            if ('/' === this.source.charAt(this.index)) if ('/' === this.source.charAt(++this.index)) {
                                for (; '\n' !== this.source.charAt(this.index); ) if (this.index++, this.index == this.source.length) return null;
                                this.index++,
                                    this.line++,
                                    t = !0
                            } else {
                                if ('*' !== this.source.charAt(this.index)) throw new Error('Invalid comment at line ' + this.line + ': /' + this.source.charAt(this.index) + ' (\'/\' or \'*\' expected)');
                                for (i = ''; i + (i = this.source.charAt(this.index)) !== '*/'; ) if (this.index++, '\n' === i && this.line++, this.index === this.source.length) return null;
                                this.index++,
                                    t = !0
                            }
                        } while (t);
                        if (this.index === this.source.length) return null;
                        var n = this.index;
                        e.DELIM.lastIndex = 0;
                        var r = e.DELIM.test(this.source.charAt(n));
                        if (r) n++;
                        else for (n++; n < this.source.length && !e.DELIM.test(this.source.charAt(n)); ) n++;
                        var s = this.source.substring(this.index, this.index = n);
                        return s === e.STRINGOPEN ? (this.readingString = !0, this.stringEndsWith = e.STRINGCLOSE)  : s === e.STRINGOPEN_SQ && (this.readingString = !0, this.stringEndsWith = e.STRINGCLOSE_SQ),
                            s
                    },
                    t.prototype.peek = function () {
                        if (0 == this.stack.length) {
                            var e = this.next();
                            if (null === e) return null;
                            this.stack.push(e)
                        }
                        return this.stack[0]
                    },
                    t.prototype.toString = function () {
                        return 'Tokenizer(' + this.index + '/' + this.source.length + ' at line ' + this.line + ')'
                    },
                    t
            }(t.Lang),
            t.DotProto.Parser = function (e, t, i) {
                var n = function (e) {
                    this.tn = new i(e)
                };
                return n.prototype.parse = function () {
                    for (var e, t = {
                        name: '[ROOT]',
                        'package': null,
                        messages: [
                        ],
                        enums: [
                        ],
                        imports: [
                        ],
                        options: {
                        },
                        services: [
                        ]
                    }, i = !0; ; ) {
                        if (e = this.tn.next(), null == e) break;
                        if ('package' == e) {
                            if (!i) throw new Error('Illegal package definition at line ' + this.tn.line + ': Must be declared before the first message or enum');
                            if (null !== t['package']) throw new Error('Illegal package definition at line ' + this.tn.line + ': Package already declared');
                            t['package'] = this._parsePackage(e)
                        } else if ('import' == e) {
                            if (!i) throw new Error('Illegal import definition at line ' + this.tn.line + ': Must be declared before the first message or enum');
                            t.imports.push(this._parseImport(e))
                        } else if ('message' === e) this._parseMessage(t, e),
                            i = !1;
                        else if ('enum' === e) this._parseEnum(t, e),
                            i = !1;
                        else if ('option' === e) {
                            if (!i) throw new Error('Illegal option definition at line ' + this.tn.line + ': Must be declared before the first message or enum');
                            this._parseOption(t, e)
                        } else if ('service' === e) this._parseService(t, e);
                        else if ('extend' === e) this._parseExtend(t, e);
                        else {
                            if ('syntax' !== e) throw new Error('Illegal top level declaration at line ' + this.tn.line + ': ' + e);
                            this._parseIgnoredStatement(t, e)
                        }
                    }
                    return delete t.name,
                        t
                },
                    n.prototype._parseNumber = function (e) {
                        var i = 1;
                        if ('-' == e.charAt(0) && (i = - 1, e = e.substring(1)), t.NUMBER_DEC.test(e)) return i * parseInt(e, 10);
                        if (t.NUMBER_HEX.test(e)) return i * parseInt(e.substring(2), 16);
                        if (t.NUMBER_OCT.test(e)) return i * parseInt(e.substring(1), 8);
                        if (t.NUMBER_FLT.test(e)) return i * parseFloat(e);
                        throw new Error('Illegal number value at line ' + this.tn.line + ': ' + (0 > i ? '-' : '') + e)
                    },
                    n.prototype._parseId = function (e, i) {
                        var n = - 1,
                            r = 1;
                        if ('-' == e.charAt(0) && (r = - 1, e = e.substring(1)), t.NUMBER_DEC.test(e)) n = parseInt(e);
                        else if (t.NUMBER_HEX.test(e)) n = parseInt(e.substring(2), 16);
                        else {
                            if (!t.NUMBER_OCT.test(e)) throw new Error('Illegal ID value at line ' + this.tn.line + ': ' + (0 > r ? '-' : '') + e);
                            n = parseInt(e.substring(1), 8)
                        }
                        if (n = r * n | 0, !i && 0 > n) throw new Error('Illegal ID range at line ' + this.tn.line + ': ' + (0 > r ? '-' : '') + e);
                        return n
                    },
                    n.prototype._parsePackage = function (e) {
                        if (e = this.tn.next(), !t.TYPEREF.test(e)) throw new Error('Illegal package name at line ' + this.tn.line + ': ' + e);
                        var i = e;
                        if (e = this.tn.next(), e != t.END) throw new Error('Illegal end of package definition at line ' + this.tn.line + ': ' + e + ' (\'' + t.END + '\' expected)');
                        return i
                    },
                    n.prototype._parseImport = function (e) {
                        if (e = this.tn.next(), 'public' === e && (e = this.tn.next()), e !== t.STRINGOPEN && e !== t.STRINGOPEN_SQ) throw new Error('Illegal begin of import value at line ' + this.tn.line + ': ' + e + ' (\'' + t.STRINGOPEN + '\' or \'' + t.STRINGOPEN_SQ + '\' expected)');
                        var i = this.tn.next();
                        if (e = this.tn.next(), e !== this.tn.stringEndsWith) throw new Error('Illegal end of import value at line ' + this.tn.line + ': ' + e + ' (\'' + this.tn.stringEndsWith + '\' expected)');
                        if (e = this.tn.next(), e !== t.END) throw new Error('Illegal end of import definition at line ' + this.tn.line + ': ' + e + ' (\'' + t.END + '\' expected)');
                        return i
                    },
                    n.prototype._parseOption = function (e, i) {
                        i = this.tn.next();
                        var n = !1;
                        if (i == t.COPTOPEN && (n = !0, i = this.tn.next()), !t.NAME.test(i) && !/google\.protobuf\./.test(i)) throw new Error('Illegal option name in message ' + e.name + ' at line ' + this.tn.line + ': ' + i);
                        var r = i;
                        if (i = this.tn.next(), n) {
                            if (i !== t.COPTCLOSE) throw new Error('Illegal custom option name delimiter in message ' + e.name + ', option ' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.COPTCLOSE + '\' expected)');
                            r = '(' + r + ')',
                                i = this.tn.next(),
                            t.FQTYPEREF.test(i) && (r += i, i = this.tn.next())
                        }
                        if (i !== t.EQUAL) throw new Error('Illegal option operator in message ' + e.name + ', option ' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.EQUAL + '\' expected)');
                        var s;
                        if (i = this.tn.next(), i === t.STRINGOPEN || i === t.STRINGOPEN_SQ) {
                            if (s = this.tn.next(), i = this.tn.next(), i !== this.tn.stringEndsWith) throw new Error('Illegal end of option value in message ' + e.name + ', option ' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'' + this.tn.stringEndsWith + '\' expected)')
                        } else if (t.NUMBER.test(i)) s = this._parseNumber(i, !0);
                        else {
                            if (!t.TYPEREF.test(i)) throw new Error('Illegal option value in message ' + e.name + ', option ' + r + ' at line ' + this.tn.line + ': ' + i);
                            s = i
                        }
                        if (i = this.tn.next(), i !== t.END) throw new Error('Illegal end of option in message ' + e.name + ', option ' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.END + '\' expected)');
                        e.options[r] = s
                    },
                    n.prototype._parseIgnoredBlock = function (e, i) {
                        var n = this.tn.next();
                        if (!t.TYPEREF.test(n)) throw new Error('Illegal ' + i + ' type in ' + e.name + ': ' + n);
                        var r = n;
                        if (n = this.tn.next(), n !== t.OPEN) throw new Error('Illegal OPEN in ' + e.name + ' after ' + i + ' ' + r + ' at line ' + this.tn.line + ': ' + n);
                        for (var s = 1; ; ) {
                            if (n = this.tn.next(), null === n) throw new Error('Unexpected EOF in ' + e.name + ', ' + i + ' (ignored) at line ' + this.tn.line + ': ' + r);
                            if (n === t.OPEN) s++;
                            else if (n === t.CLOSE && (n = this.tn.peek(), n === t.END && this.tn.next(), s--, 0 === s)) break
                        }
                    },
                    n.prototype._parseIgnoredStatement = function (e, i) {
                        for (var n; ; ) {
                            if (n = this.tn.next(), null === n) throw new Error('Unexpected EOF in ' + e.name + ', ' + i + ' (ignored) at line ' + this.tn.line);
                            if (n === t.END) break
                        }
                    },
                    n.prototype._parseService = function (e, i) {
                        var n = this.tn.next();
                        if (!t.NAME.test(n)) throw new Error('Illegal service name at line ' + this.tn.line + ': ' + n);
                        var r = n,
                            s = {
                                name: r,
                                rpc: {
                                },
                                options: {
                                }
                            };
                        if (n = this.tn.next(), n !== t.OPEN) throw new Error('Illegal OPEN after service ' + r + ' at line ' + this.tn.line + ': ' + n + ' (\'' + t.OPEN + '\' expected)');
                        do if (n = this.tn.next(), 'option' === n) this._parseOption(s, n);
                        else if ('rpc' === n) this._parseServiceRPC(s, n);
                        else if (n !== t.CLOSE) throw new Error('Illegal type for service ' + r + ' at line ' + this.tn.line + ': ' + n);
                        while (n !== t.CLOSE);
                        e.services.push(s)
                    },
                    n.prototype._parseServiceRPC = function (e, i) {
                        var n = i;
                        if (i = this.tn.next(), !t.NAME.test(i)) throw new Error('Illegal RPC method name in service ' + e.name + ' at line ' + this.tn.line + ': ' + i);
                        var r = i,
                            s = {
                                request: null,
                                response: null,
                                options: {
                                }
                            };
                        if (i = this.tn.next(), i !== t.COPTOPEN) throw new Error('Illegal start of request type in RPC service ' + e.name + '#' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.COPTOPEN + '\' expected)');
                        if (i = this.tn.next(), !t.TYPEREF.test(i)) throw new Error('Illegal request type in RPC service ' + e.name + '#' + r + ' at line ' + this.tn.line + ': ' + i);
                        if (s.request = i, i = this.tn.next(), i != t.COPTCLOSE) throw new Error('Illegal end of request type in RPC service ' + e.name + '#' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.COPTCLOSE + '\' expected)');
                        if (i = this.tn.next(), 'returns' !== i.toLowerCase()) throw new Error('Illegal request/response delimiter in RPC service ' + e.name + '#' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'returns\' expected)');
                        if (i = this.tn.next(), i != t.COPTOPEN) throw new Error('Illegal start of response type in RPC service ' + e.name + '#' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.COPTOPEN + '\' expected)');
                        if (i = this.tn.next(), s.response = i, i = this.tn.next(), i !== t.COPTCLOSE) throw new Error('Illegal end of response type in RPC service ' + e.name + '#' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.COPTCLOSE + '\' expected)');
                        if (i = this.tn.next(), i === t.OPEN) {
                            do if (i = this.tn.next(), 'option' === i) this._parseOption(s, i);
                            else if (i !== t.CLOSE) throw new Error('Illegal start of option in RPC service ' + e.name + '#' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'option\' expected)');
                            while (i !== t.CLOSE)
                        } else if (i !== t.END) throw new Error('Illegal method delimiter in RPC service ' + e.name + '#' + r + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.END + '\' or \'' + t.OPEN + '\' expected)');
                        'undefined' == typeof e[n] && (e[n] = {
                        }),
                            e[n][r] = s
                    },
                    n.prototype._parseMessage = function (e, i) {
                        var n = {
                        };
                        if (i = this.tn.next(), !t.NAME.test(i)) throw new Error('Illegal message name' + (e ? ' in message ' + e.name : '') + ' at line ' + this.tn.line + ': ' + i);
                        if (n.name = i, i = this.tn.next(), i != t.OPEN) throw new Error('Illegal OPEN after message ' + n.name + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.OPEN + '\' expected)');
                        for (n.fields = [
                        ], n.enums = [
                        ], n.messages = [
                        ], n.options = {
                        }; ; ) {
                            if (i = this.tn.next(), i === t.CLOSE) {
                                i = this.tn.peek(),
                                i === t.END && this.tn.next();
                                break
                            }
                            if (t.RULE.test(i)) this._parseMessageField(n, i);
                            else if ('enum' === i) this._parseEnum(n, i);
                            else if ('message' === i) this._parseMessage(n, i);
                            else if ('option' === i) this._parseOption(n, i);
                            else if ('extensions' === i) n.extensions = this._parseExtensions(n, i);
                            else {
                                if ('extend' !== i) throw new Error('Illegal token in message ' + n.name + ' at line ' + this.tn.line + ': ' + i + ' (type or \'' + t.CLOSE + '\' expected)');
                                this._parseExtend(n, i)
                            }
                        }
                        return e.messages.push(n),
                            n
                    },
                    n.prototype._parseMessageField = function (e, i) {
                        var n = {
                        };
                        if (n.rule = i, i = this.tn.next(), !t.TYPE.test(i) && !t.TYPEREF.test(i)) throw new Error('Illegal field type in message ' + e.name + ' at line ' + this.tn.line + ': ' + i);
                        if (n.type = i, i = this.tn.next(), !t.NAME.test(i)) throw new Error('Illegal field name in message ' + e.name + ' at line ' + this.tn.line + ': ' + i);
                        if (n.name = i, i = this.tn.next(), i !== t.EQUAL) throw new Error('Illegal field number operator in message ' + e.name + '#' + n.name + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.EQUAL + '\' expected)');
                        i = this.tn.next();
                        try {
                            n.id = this._parseId(i)
                        } catch (r) {
                            throw new Error('Illegal field id in message ' + e.name + '#' + n.name + ' at line ' + this.tn.line + ': ' + i)
                        }
                        if (n.options = {
                            }, i = this.tn.next(), i === t.OPTOPEN && (this._parseFieldOptions(e, n, i), i = this.tn.next()), i !== t.END) throw new Error('Illegal field delimiter in message ' + e.name + '#' + n.name + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.END + '\' expected)');
                        e.fields.push(n)
                    },
                    n.prototype._parseFieldOptions = function (e, i, n) {
                        for (var r = !0; ; ) {
                            if (n = this.tn.next(), n === t.OPTCLOSE) break;
                            if (n === t.OPTEND) {
                                if (r) throw new Error('Illegal start of message field options in message ' + e.name + '#' + i.name + ' at line ' + this.tn.line + ': ' + n);
                                n = this.tn.next()
                            }
                            this._parseFieldOption(e, i, n),
                                r = !1
                        }
                    },
                    n.prototype._parseFieldOption = function (e, i, n) {
                        var r = !1;
                        if (n === t.COPTOPEN && (n = this.tn.next(), r = !0), !t.NAME.test(n)) throw new Error('Illegal field option in message ' + e.name + '#' + i.name + ' at line ' + this.tn.line + ': ' + n);
                        var s = n;
                        if (n = this.tn.next(), r) {
                            if (n !== t.COPTCLOSE) throw new Error('Illegal custom field option name delimiter in message ' + e.name + '#' + i.name + ' at line ' + this.tn.line + ': ' + n + ' (\')\' expected)');
                            s = '(' + s + ')',
                                n = this.tn.next(),
                            t.FQTYPEREF.test(n) && (s += n, n = this.tn.next())
                        }
                        if (n !== t.EQUAL) throw new Error('Illegal field option operation in message ' + e.name + '#' + i.name + ' at line ' + this.tn.line + ': ' + n + ' (\'=\' expected)');
                        var o;
                        if (n = this.tn.next(), n === t.STRINGOPEN || n === t.STRINGOPEN_SQ) {
                            if (o = this.tn.next(), n = this.tn.next(), n != this.tn.stringEndsWith) throw new Error('Illegal end of field value in message ' + e.name + '#' + i.name + ', option ' + s + ' at line ' + this.tn.line + ': ' + n + ' (\'' + this.tn.stringEndsWith + '\' expected)')
                        } else if (t.NUMBER.test(n, !0)) o = this._parseNumber(n, !0);
                        else if (t.BOOL.test(n)) o = 'true' === n.toLowerCase();
                        else {
                            if (!t.TYPEREF.test(n)) throw new Error('Illegal field option value in message ' + e.name + '#' + i.name + ', option ' + s + ' at line ' + this.tn.line + ': ' + n);
                            o = n
                        }
                        i.options[s] = o
                    },
                    n.prototype._parseEnum = function (e, i) {
                        var n = {
                        };
                        if (i = this.tn.next(), !t.NAME.test(i)) throw new Error('Illegal enum name in message ' + e.name + ' at line ' + this.tn.line + ': ' + i);
                        if (n.name = i, i = this.tn.next(), i !== t.OPEN) throw new Error('Illegal OPEN after enum ' + n.name + ' at line ' + this.tn.line + ': ' + i);
                        for (n.values = [
                        ], n.options = {
                        }; ; ) {
                            if (i = this.tn.next(), i === t.CLOSE) {
                                i = this.tn.peek(),
                                i === t.END && this.tn.next();
                                break
                            }
                            if ('option' == i) this._parseOption(n, i);
                            else {
                                if (!t.NAME.test(i)) throw new Error('Illegal enum value name in enum ' + n.name + ' at line ' + this.tn.line + ': ' + i);
                                this._parseEnumValue(n, i)
                            }
                        }
                        e.enums.push(n)
                    },
                    n.prototype._parseEnumValue = function (e, i) {
                        var n = {
                        };
                        if (n.name = i, i = this.tn.next(), i !== t.EQUAL) throw new Error('Illegal enum value operator in enum ' + e.name + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.EQUAL + '\' expected)');
                        i = this.tn.next();
                        try {
                            n.id = this._parseId(i, !0)
                        } catch (r) {
                            throw new Error('Illegal enum value id in enum ' + e.name + ' at line ' + this.tn.line + ': ' + i)
                        }
                        if (e.values.push(n), i = this.tn.next(), i === t.OPTOPEN) {
                            var s = {
                                options: {
                                }
                            };
                            this._parseFieldOptions(e, s, i),
                                i = this.tn.next()
                        }
                        if (i !== t.END) throw new Error('Illegal enum value delimiter in enum ' + e.name + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.END + '\' expected)')
                    },
                    n.prototype._parseExtensions = function (e, i) {
                        var n = [
                        ];
                        if (i = this.tn.next(), n.push('min' === i ? t.ID_MIN : 'max' === i ? t.ID_MAX : this._parseNumber(i)), i = this.tn.next(), 'to' !== i) throw 'Illegal extensions delimiter in message ' + e.name + ' at line ' + this.tn.line + ' (\'to\' expected)';
                        if (i = this.tn.next(), n.push('min' === i ? t.ID_MIN : 'max' === i ? t.ID_MAX : this._parseNumber(i)), i = this.tn.next(), i !== t.END) throw new Error('Illegal extension delimiter in message ' + e.name + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.END + '\' expected)');
                        return n
                    },
                    n.prototype._parseExtend = function (e, i) {
                        if (i = this.tn.next(), !t.TYPEREF.test(i)) throw new Error('Illegal extended message name at line ' + this.tn.line + ': ' + i);
                        var n = {
                        };
                        if (n.ref = i, n.fields = [
                            ], i = this.tn.next(), i !== t.OPEN) throw new Error('Illegal OPEN in extend ' + n.name + ' at line ' + this.tn.line + ': ' + i + ' (\'' + t.OPEN + '\' expected)');
                        for (; ; ) {
                            if (i = this.tn.next(), i === t.CLOSE) {
                                i = this.tn.peek(),
                                i == t.END && this.tn.next();
                                break
                            }
                            if (!t.RULE.test(i)) throw new Error('Illegal token in extend ' + n.name + ' at line ' + this.tn.line + ': ' + i + ' (rule or \'' + t.CLOSE + '\' expected)');
                            this._parseMessageField(n, i)
                        }
                        return e.messages.push(n),
                            n
                    },
                    n.prototype.toString = function () {
                        return 'Parser'
                    },
                    n
            }(t, t.Lang, t.DotProto.Tokenizer),
            t.Reflect = function (t) {
                var i = {
                    },
                    n = function (e, t) {
                        this.parent = e,
                            this.name = t
                    };
                n.prototype.fqn = function () {
                    for (var e = this.name, t = this; ; ) {
                        if (t = t.parent, null == t) break;
                        e = t.name + '.' + e
                    }
                    return e
                },
                    n.prototype.toString = function (e) {
                        var t = this.fqn();
                        return e && (this instanceof s ? t = 'Message ' + t : this instanceof s.Field ? t = 'Message.Field ' + t : this instanceof l ? t = 'Enum ' + t : this instanceof l.Value ? t = 'Enum.Value ' + t : this instanceof f ? t = 'Service ' + t : this instanceof f.Method ? t = this instanceof f.RPCMethod ? 'Service.RPCMethod ' + t : 'Service.Method ' + t : this instanceof r && (t = 'Namespace ' + t)),
                            t
                    },
                    n.prototype.build = function () {
                        throw new Error(this.toString(!0) + ' cannot be built directly')
                    },
                    i.T = n;
                var r = function (e, t, i) {
                    n.call(this, e, t),
                        this.children = [
                        ],
                        this.options = i || {
                            }
                };
                r.prototype = Object.create(n.prototype),
                    r.prototype.getChildren = function (e) {
                        if (e = e || null, null == e) return this.children.slice();
                        for (var t = [
                        ], i = 0; i < this.children.length; i++) this.children[i] instanceof e && t.push(this.children[i]);
                        return t
                    },
                    r.prototype.addChild = function (e) {
                        var t;
                        if (t = this.getChild(e.name)) if (t instanceof s.Field && t.name !== t.originalName && !this.hasChild(t.originalName)) t.name = t.originalName;
                        else {
                            if (!(e instanceof s.Field && e.name !== e.originalName) || this.hasChild(e.originalName)) throw new Error('Duplicate name in namespace ' + this.toString(!0) + ': ' + e.name);
                            e.name = e.originalName
                        }
                        this.children.push(e)
                    },
                    r.prototype.hasChild = function (e) {
                        var t;
                        if ('number' == typeof e) {
                            for (t = 0; t < this.children.length; t++) if ('undefined' != typeof this.children[t].id && this.children[t].id == e) return !0
                        } else for (t = 0; t < this.children.length; t++) if ('undefined' != typeof this.children[t].name && this.children[t].name == e) return !0;
                        return !1
                    },
                    r.prototype.getChild = function (e) {
                        var t;
                        if ('number' == typeof e) {
                            for (t = 0; t < this.children.length; t++) if ('undefined' != typeof this.children[t].id && this.children[t].id == e) return this.children[t]
                        } else for (t = 0; t < this.children.length; t++) if ('undefined' != typeof this.children[t].name && this.children[t].name == e) return this.children[t];
                        return null
                    },
                    r.prototype.resolve = function (e, t) {
                        var n = e.split('.'),
                            r = this,
                            s = 0;
                        if ('' == n[s]) {
                            for (; null != r.parent; ) r = r.parent;
                            s++
                        }
                        var o;
                        do {
                            do {
                                if (o = r.getChild(n[s]), !o || !(o instanceof i.T) || t && o instanceof i.Message.Field) {
                                    r = null;
                                    break
                                }
                                r = o,
                                    s++
                            } while (s < n.length);
                            if (null != r) break;
                            if (null !== this.parent) return this.parent.resolve(e, t)
                        } while (null != r);
                        return r
                    },
                    r.prototype.build = function () {
                        for (var e, t = {
                        }, i = this.getChildren(), n = 0; n < i.length; n++) e = i[n],
                        e instanceof r && (t[e.name] = e.build());
                        return Object.defineProperty && Object.defineProperty(t, '$options', {
                            value: this.buildOpt(),
                            enumerable: !1,
                            configurable: !1,
                            writable: !1
                        }),
                            t
                    },
                    r.prototype.buildOpt = function () {
                        for (var e = {
                        }, t = Object.keys(this.options), i = 0; i < t.length; i++) {
                            var n = t[i],
                                r = this.options[t[i]];
                            e[n] = r
                        }
                        return e
                    },
                    r.prototype.getOption = function (e) {
                        return 'undefined' == typeof e ? this.options : 'undefined' != typeof this.options[e] ? this.options[e] : null
                    },
                    i.Namespace = r;
                var s = function (e, i, n) {
                    r.call(this, e, i, n),
                        this.extensions = [
                            t.Lang.ID_MIN,
                            t.Lang.ID_MAX
                        ],
                        this.clazz = null
                };
                s.prototype = Object.create(r.prototype),
                    s.prototype.build = function (n) {
                        if (this.clazz && !n) return this.clazz;
                        for (var r = function (t, n) {
                            var r = n.getChildren(i.Message.Field),
                                s = function (i) {
                                    t.Builder.Message.call(this);
                                    var n,
                                        s;
                                    for (n = 0; n < r.length; n++) s = r[n],
                                        this[s.name] = s.repeated ? [
                                        ] : null;
                                    for (n = 0; n < r.length; n++) if (s = r[n], 'undefined' != typeof s.options['default']) try {
                                        this.$set(s.name, s.options['default'])
                                    } catch (o) {
                                        throw new Error('[INTERNAL] ' + o)
                                    }
                                    if (1 != arguments.length || 'object' != typeof i || 'function' == typeof i.encode || t.Util.isArray(i) || i instanceof e || i instanceof ArrayBuffer || t.Long && i instanceof t.Long) for (n = 0; n < arguments.length; n++) n < r.length && this.$set(r[n].name, arguments[n]);
                                    else {
                                        var l = Object.keys(i);
                                        for (n = 0; n < l.length; n++) this.$set(l[n], i[l[n]])
                                    }
                                };
                            s.prototype = Object.create(t.Builder.Message.prototype),
                                s.prototype.add = function (e, i, r) {
                                    var s = n.getChild(e);
                                    if (!s) throw new Error(this + '#' + e + ' is undefined');
                                    if (!(s instanceof t.Reflect.Message.Field)) throw new Error(this + '#' + e + ' is not a field: ' + s.toString(!0));
                                    if (!s.repeated) throw new Error(this + '#' + e + ' is not a repeated field');
                                    null === this[s.name] && (this[s.name] = [
                                    ]),
                                        this[s.name].push(r ? i : s.verifyValue(i, !0))
                                },
                                s.prototype.$add = s.prototype.add,
                                s.prototype.set = function (e, i, r) {
                                    var s = n.getChild(e);
                                    if (!s) throw new Error(this + '#' + e + ' is not a field: undefined');
                                    if (!(s instanceof t.Reflect.Message.Field)) throw new Error(this + '#' + e + ' is not a field: ' + s.toString(!0));
                                    this[s.name] = r ? i : s.verifyValue(i)
                                },
                                s.prototype.$set = s.prototype.set,
                                s.prototype.get = function (e) {
                                    var i = n.getChild(e);
                                    if (!(i && i instanceof t.Reflect.Message.Field)) throw new Error(this + '#' + e + ' is not a field: undefined');
                                    if (!(i instanceof t.Reflect.Message.Field)) throw new Error(this + '#' + e + ' is not a field: ' + i.toString(!0));
                                    return this[i.name]
                                },
                                s.prototype.$get = s.prototype.get;
                            for (var o = 0; o < r.length; o++) {
                                var l = r[o];
                                !function (e) {
                                    var t = e.originalName.replace(/(_[a-zA-Z])/g, function (e) {
                                        return e.toUpperCase().replace('_', '')
                                    });
                                    t = t.substring(0, 1).toUpperCase() + t.substring(1);
                                    var i = e.originalName.replace(/([A-Z])/g, function (e) {
                                        return '_' + e
                                    });
                                    n.hasChild('set' + t) || (s.prototype['set' + t] = function (t) {
                                        this.$set(e.name, t)
                                    }),
                                    n.hasChild('set_' + i) || (s.prototype['set_' + i] = function (t) {
                                        this.$set(e.name, t)
                                    }),
                                    n.hasChild('get' + t) || (s.prototype['get' + t] = function () {
                                        return this.$get(e.name)
                                    }),
                                    n.hasChild('get_' + i) || (s.prototype['get_' + i] = function () {
                                        return this.$get(e.name)
                                    })
                                }(l)
                            }
                            s.prototype.encode = function (t) {
                                var i = !1;
                                t || (t = new e, i = !0);
                                var r = t.littleEndian;
                                try {
                                    return n.encode(this, t.LE()),
                                        (i ? t.flip()  : t).LE(r)
                                } catch (s) {
                                    throw t.LE(r),
                                        s
                                }
                            },
                                s.prototype.encodeDelimited = function (t) {
                                    var i = !1;
                                    t || (t = new e, i = !0);
                                    try {
                                        var r = (new e).LE();
                                        return n.encode(this, r).flip(),
                                            t.writeVarint32(r.remaining()),
                                            t.append(r),
                                            i ? t.flip()  : t
                                    } catch (s) {
                                        throw t.LE(le),
                                            s
                                    }
                                },
                                s.prototype.encodeAB = function () {
                                    try {
                                        return this.encode().toArrayBuffer()
                                    } catch (e) {
                                        throw e.encoded && (e.encoded = e.encoded.toArrayBuffer()),
                                            e
                                    }
                                },
                                s.prototype.toArrayBuffer = s.prototype.encodeAB,
                                s.prototype.encodeNB = function () {
                                    try {
                                        return this.encode().toBuffer()
                                    } catch (e) {
                                        throw e.encoded && (e.encoded = e.encoded.toBuffer()),
                                            e
                                    }
                                },
                                s.prototype.toBuffer = s.prototype.encodeNB,
                                s.prototype.encode64 = function () {
                                    try {
                                        return this.encode().toBase64()
                                    } catch (e) {
                                        throw e.encoded && (e.encoded = e.encoded.toBase64()),
                                            e
                                    }
                                },
                                s.prototype.toBase64 = s.prototype.encode64,
                                s.prototype.encodeHex = function () {
                                    try {
                                        return this.encode().toHex()
                                    } catch (e) {
                                        throw e.encoded && (e.encoded = e.encoded.toHex()),
                                            e
                                    }
                                },
                                s.prototype.toHex = s.prototype.encodeHex,
                                s.decode = function (t, i) {
                                    if (null === t) throw new Error('buffer must not be null');
                                    'string' == typeof t && (t = e.wrap(t, i ? i : 'base64')),
                                        t = t instanceof e ? t : e.wrap(t);
                                    var r = t.littleEndian;
                                    try {
                                        var s = n.decode(t.LE());
                                        return t.LE(r),
                                            s
                                    } catch (o) {
                                        throw t.LE(r),
                                            o
                                    }
                                },
                                s.decodeDelimited = function (t, i) {
                                    if (null === t) throw new Error('buffer must not be null');
                                    'string' == typeof t && (t = e.wrap(t, i ? i : 'base64')),
                                        t = t instanceof e ? t : e.wrap(t);
                                    var r = t.readVarint32(),
                                        s = n.decode(t.slice(t.offset, t.offset + r).LE());
                                    return t.offset += r,
                                        s
                                },
                                s.decode64 = function (e) {
                                    return s.decode(e, 'base64')
                                },
                                s.decodeHex = function (e) {
                                    return s.decode(e, 'hex')
                                },
                                s.prototype.toString = function () {
                                    return n.toString()
                                };
                            return Object.defineProperty && Object.defineProperty(s, '$options', {
                                value: n.buildOpt(),
                                enumerable: !1,
                                configurable: !1,
                                writable: !1
                            }),
                                s
                        }(t, this), o = this.getChildren(), a = 0; a < o.length; a++) if (o[a] instanceof l) r[o[a].name] = o[a].build();
                        else if (o[a] instanceof s) r[o[a].name] = o[a].build();
                        else if (!(o[a] instanceof s.Field)) throw new Error('Illegal reflect child of ' + this.toString(!0) + ': ' + o[a].toString(!0));
                        return this.clazz = r
                    },
                    s.prototype.encode = function (e, t) {
                        for (var i = this.getChildren(s.Field), n = null, r = 0; r < i.length; r++) {
                            var o = e.$get(i[r].name);
                            i[r].required && null === o ? null === n && (n = i[r])  : i[r].encode(o, t)
                        }
                        if (null !== n) {
                            var l = new Error('Missing at least one required field for ' + this.toString(!0) + ': ' + n);
                            throw l.encoded = t,
                                l
                        }
                        return t
                    },
                    s.prototype.encodeDelimitied = function (t, i) {
                        var n = new e;
                        return this.encode(t, n),
                            n.flip(),
                            i.writeVarint32(n.remaining()),
                            i.append(n),
                            i
                    },
                    s.prototype.decode = function (e, i) {
                        i = 'number' == typeof i ? i : - 1;
                        for (var n = e.offset, r = new this.clazz; e.offset < n + i || - 1 == i && e.remaining() > 0; ) {
                            var s = e.readVarint32(),
                                o = 7 & s,
                                l = s >> 3,
                                a = this.getChild(l);
                            if (a) a.repeated && !a.options.packed ? r.$add(a.name, a.decode(o, e), !0)  : r.$set(a.name, a.decode(o, e), !0);
                            else switch (o) {
                                case t.WIRE_TYPES.VARINT:
                                    e.readVarint32();
                                    break;
                                case t.WIRE_TYPES.BITS32:
                                    e.offset += 4;
                                    break;
                                case t.WIRE_TYPES.BITS64:
                                    e.offset += 8;
                                    break;
                                case t.WIRE_TYPES.LDELIM:
                                    var f = e.readVarint32();
                                    e.offset += f;
                                    break;
                                default:
                                    throw new Error('Illegal wire type of unknown field ' + l + ' in ' + this.toString(!0) + '#decode: ' + o)
                            }
                        }
                        for (var p = this.getChildren(t.Reflect.Field), h = 0; h < p.length; h++) if (p[h].required && null === r[p[h].name]) {
                            var d = new Error('Missing at least one required field for ' + this.toString(!0) + ': ' + p[h].name);
                            throw d.decoded = r,
                                d
                        }
                        return r
                    },
                    i.Message = s;
                var o = function (e, i, r, s, o, l) {
                    n.call(this, e, s),
                        this.required = 'required' == i,
                        this.repeated = 'repeated' == i,
                        this.type = r,
                        this.resolvedType = null,
                        this.id = o,
                        this.options = l || {
                            },
                        this.originalName = this.name,
                    t.convertFieldsToCamelCase && (this.name = this.name.replace(/_([a-zA-Z])/g, function (e, t) {
                        return t.toUpperCase()
                    }))
                };
                o.prototype = Object.create(n.prototype),
                    o.prototype.verifyValue = function (i, n) {
                        if (n = n || !1, null === i) {
                            if (this.required) throw new Error('Illegal value for ' + this.toString(!0) + ': ' + i + ' (required)');
                            return null
                        }
                        var r;
                        if (this.repeated && !n) {
                            t.Util.isArray(i) || (i = [
                                i
                            ]);
                            var s = [
                            ];
                            for (r = 0; r < i.length; r++) s.push(this.verifyValue(i[r], !0));
                            return s
                        }
                        if (!this.repeated && t.Util.isArray(i)) throw new Error('Illegal value for ' + this.toString(!0) + ': ' + i + ' (no array expected)');
                        if (this.type == t.TYPES.int32 || this.type == t.TYPES.sint32 || this.type == t.TYPES.sfixed32) return isNaN(r = parseInt(i, 10)) ? r : 0 | r;
                        if (this.type == t.TYPES.uint32 || this.type == t.TYPES.fixed32) return isNaN(r = parseInt(i, 10)) ? r : r >>> 0;
                        if (t.Long) {
                            if (this.type == t.TYPES.int64 || this.type == t.TYPES.sint64 || this.type == t.TYPES.sfixed64) return 'object' == typeof i && i instanceof t.Long ? i.unsigned ? i.toSigned()  : i : t.Long.fromNumber(i, !1);
                            if (this.type == t.TYPES.uint64 || this.type == t.TYPES.fixed64) return 'object' == typeof i && i instanceof t.Long ? i.unsigned ? i : i.toUnsigned()  : t.Long.fromNumber(i, !0)
                        }
                        if (this.type == t.TYPES.bool) return 'string' == typeof i ? 'true' === i : !!i;
                        if (this.type == t.TYPES['float'] || this.type == t.TYPES['double']) return parseFloat(i);
                        if (this.type == t.TYPES.string) return '' + i;
                        if (this.type == t.TYPES.bytes) return i && i instanceof e ? i : e.wrap(i);
                        if (this.type == t.TYPES['enum']) {
                            var o = this.resolvedType.getChildren(l.Value);
                            for (r = 0; r < o.length; r++) {
                                if (o[r].name == i) return o[r].id;
                                if (o[r].id == i) return o[r].id
                            }
                            throw new Error('Illegal value for ' + this.toString(!0) + ': ' + i + ' (not a valid enum value)')
                        }
                        if (this.type == t.TYPES.message) {
                            if ('object' != typeof i) throw new Error('Illegal value for ' + this.toString(!0) + ': ' + i + ' (object expected)');
                            return i instanceof this.resolvedType.clazz ? i : new this.resolvedType.clazz(i)
                        }
                        throw new Error('[INTERNAL] Illegal value for ' + this.toString(!0) + ': ' + i + ' (undefined type ' + this.type + ')')
                    },
                    o.prototype.encode = function (i, n) {
                        if (i = this.verifyValue(i), null == this.type || 'object' != typeof this.type) throw new Error('[INTERNAL] Unresolved type in ' + this.toString(!0) + ': ' + this.type);
                        if (null === i || this.repeated && 0 == i.length) return n;
                        try {
                            if (this.repeated) {
                                var r;
                                if (this.options.packed) {
                                    n.writeVarint32(this.id << 3 | t.WIRE_TYPES.LDELIM),
                                        n.ensureCapacity(n.offset += 1);
                                    var s = n.offset;
                                    for (r = 0; r < i.length; r++) this.encodeValue(i[r], n);
                                    var o = n.offset - s,
                                        l = e.calculateVarint32(o);
                                    if (l > 1) {
                                        var a = n.slice(s, n.offset);
                                        s += l - 1,
                                            n.offset = s,
                                            n.append(a)
                                    }
                                    n.writeVarint32(o, s - l)
                                } else for (r = 0; r < i.length; r++) n.writeVarint32(this.id << 3 | this.type.wireType),
                                    this.encodeValue(i[r], n)
                            } else n.writeVarint32(this.id << 3 | this.type.wireType),
                                this.encodeValue(i, n)
                        } catch (f) {
                            throw new Error('Illegal value for ' + this.toString(!0) + ': ' + i + ' (' + f + ')')
                        }
                        return n
                    },
                    o.prototype.encodeValue = function (i, n) {
                        if (null !== i) {
                            if (this.type == t.TYPES.int32) 0 > i ? n.writeVarint64(i)  : n.writeVarint32(i);
                            else if (this.type == t.TYPES.uint32) n.writeVarint32(i);
                            else if (this.type == t.TYPES.sint32) n.writeZigZagVarint32(i);
                            else if (this.type == t.TYPES.fixed32) n.writeUint32(i);
                            else if (this.type == t.TYPES.sfixed32) n.writeInt32(i);
                            else if (this.type == t.TYPES.int64 || this.type == t.TYPES.uint64) n.writeVarint64(i);
                            else if (this.type == t.TYPES.sint64) n.writeZigZagVarint64(i);
                            else if (this.type == t.TYPES.fixed64) n.writeUint64(i);
                            else if (this.type == t.TYPES.sfixed64) n.writeInt64(i);
                            else if (this.type == t.TYPES.bool) n.writeVarint32('string' == typeof i ? 'false' === i.toLowerCase() ? 0 : !!i : i ? 1 : 0);
                            else if (this.type == t.TYPES['enum']) n.writeVarint32(i);
                            else if (this.type == t.TYPES['float']) n.writeFloat32(i);
                            else if (this.type == t.TYPES['double']) n.writeFloat64(i);
                            else if (this.type == t.TYPES.string) n.writeVString(i);
                            else if (this.type == t.TYPES.bytes) i.offset > i.length && (n = n.clone().flip()),
                                n.writeVarint32(i.remaining()),
                                n.append(i);
                            else {
                                if (this.type != t.TYPES.message) throw new Error('[INTERNAL] Illegal value to encode in ' + this.toString(!0) + ': ' + i + ' (unknown type)');
                                var r = (new e).LE();
                                this.resolvedType.encode(i, r),
                                    n.writeVarint32(r.offset),
                                    n.append(r.flip())
                            }
                            return n
                        }
                    },
                    o.prototype.decode = function (e, i, n) {
                        var r,
                            s;
                        if (e != this.type.wireType && (n || e != t.WIRE_TYPES.LDELIM || !this.repeated)) throw new Error('Illegal wire type for field ' + this.toString(!0) + ': ' + e + ' (' + this.type.wireType + ' expected)');
                        if (e == t.WIRE_TYPES.LDELIM && this.repeated && this.options.packed && !n) {
                            s = i.readVarint32(),
                                s = i.offset + s;
                            for (var o = [
                            ]; i.offset < s; ) o.push(this.decode(this.type.wireType, i, !0));
                            return o
                        }
                        if (this.type == t.TYPES.int32) return 0 | i.readVarint32();
                        if (this.type == t.TYPES.uint32) return i.readVarint32() >>> 0;
                        if (this.type == t.TYPES.sint32) return 0 | i.readZigZagVarint32();
                        if (this.type == t.TYPES.fixed32) return i.readUint32() >>> 0;
                        if (this.type == t.TYPES.sfixed32) return 0 | i.readInt32();
                        if (this.type == t.TYPES.int64) return i.readVarint64();
                        if (this.type == t.TYPES.uint64) return i.readVarint64().toUnsigned();
                        if (this.type == t.TYPES.sint64) return i.readZigZagVarint64();
                        if (this.type == t.TYPES.fixed64) return i.readUint64();
                        if (this.type == t.TYPES.sfixed64) return i.readInt64();
                        if (this.type == t.TYPES.bool) return !!i.readVarint32();
                        if (this.type == t.TYPES['enum']) return i.readVarint32();
                        if (this.type == t.TYPES['float']) return i.readFloat();
                        if (this.type == t.TYPES['double']) return i.readDouble();
                        if (this.type == t.TYPES.string) return i.readVString();
                        if (this.type == t.TYPES.bytes) {
                            if (s = i.readVarint32(), i.remaining() < s) throw new Error('Illegal number of bytes for ' + this.toString(!0) + ': ' + s + ' required but got only ' + i.remaining());
                            return r = i.clone(),
                                r.length = r.offset + s,
                                i.offset += s,
                                r
                        }
                        if (this.type == t.TYPES.message) return s = i.readVarint32(),
                            this.resolvedType.decode(i, s);
                        throw new Error('[INTERNAL] Illegal wire type for ' + this.toString(!0) + ': ' + e)
                    },
                    i.Message.Field = o;
                var l = function (e, t, i) {
                    r.call(this, e, t, i),
                        this.object = null
                };
                l.prototype = Object.create(r.prototype),
                    l.prototype.build = function () {
                        for (var e = {
                        }, t = this.getChildren(l.Value), i = 0; i < t.length; i++) e[t[i].name] = t[i].id;
                        return Object.defineProperty && Object.defineProperty(e, '$options', {
                            value: this.buildOpt(),
                            enumerable: !1,
                            configurable: !1,
                            writable: !1
                        }),
                            this.object = e
                    },
                    i.Enum = l;
                var a = function (e, t, i) {
                    n.call(this, e, t),
                        this.id = i
                };
                a.prototype = Object.create(n.prototype),
                    i.Enum.Value = a;
                var f = function (e, t, i) {
                    r.call(this, e, t, i),
                        this.clazz = null
                };
                f.prototype = Object.create(r.prototype),
                    f.prototype.build = function (e) {
                        return this.clazz && !e ? this.clazz : this.clazz = function (e, t) {
                            var n = function (t) {
                                e.Builder.Service.call(this),
                                    this.rpcImpl = t || function (e, t, i) {
                                            setTimeout(i.bind(this, new Error('Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services')), 0)
                                        }
                            };
                            n.prototype = Object.create(e.Builder.Service.prototype),
                            Object.defineProperty && (Object.defineProperty(n, '$options', {
                                value: t.buildOpt(),
                                enumerable: !1,
                                configurable: !1,
                                writable: !1
                            }), Object.defineProperty(n.prototype, '$options', {
                                value: n.$options,
                                enumerable: !1,
                                configurable: !1,
                                writable: !1
                            }));
                            for (var r = t.getChildren(i.Service.RPCMethod), s = 0; s < r.length; s++) !function (e) {
                                n.prototype[e.name] = function (i, n) {
                                    try {
                                        i && i instanceof e.resolvedRequestType.clazz || setTimeout(n.bind(this, new Error('Illegal request type provided to service method ' + t.name + '#' + e.name))),
                                            this.rpcImpl(e.fqn(), i, function (i, r) {
                                                if (i) return void n(i);
                                                try {
                                                    r = e.resolvedResponseType.clazz.decode(r)
                                                } catch (s) {
                                                }
                                                return r && r instanceof e.resolvedResponseType.clazz ? void n(null, r)  : void n(new Error('Illegal response type received in service method ' + t.name + '#' + e.name))
                                            })
                                    } catch (r) {
                                        setTimeout(n.bind(this, r), 0)
                                    }
                                },
                                    n[e.name] = function (t, i, r) {
                                        new n(t) [e.name](i, r)
                                    },
                                Object.defineProperty && (Object.defineProperty(n[e.name], '$options', {
                                    value: e.buildOpt(),
                                    enumerable: !1,
                                    configurable: !1,
                                    writable: !1
                                }), Object.defineProperty(n.prototype[e.name], '$options', {
                                    value: n[e.name].$options,
                                    enumerable: !1,
                                    configurable: !1,
                                    writable: !1
                                }))
                            }(r[s]);
                            return n
                        }(t, this)
                    },
                    i.Service = f;
                var p = function (e, t, i) {
                    n.call(this, e, t),
                        this.options = i || {
                            }
                };
                p.prototype = Object.create(n.prototype),
                    p.prototype.buildOpt = r.prototype.buildOpt,
                    i.Service.Method = p;
                var h = function (e, t, i, n, r) {
                    p.call(this, e, t, r),
                        this.requestName = i,
                        this.responseName = n,
                        this.resolvedRequestType = null,
                        this.resolvedResponseType = null
                };
                return h.prototype = Object.create(p.prototype),
                    i.Service.RPCMethod = h,
                    i
            }(t),
            t.Builder = function (e, t, i) {
                var n = function () {
                    this.ns = new i.Namespace(null, ''),
                        this.ptr = this.ns,
                        this.resolved = !1,
                        this.result = null,
                        this.files = {
                        },
                        this.importRoot = null
                };
                return n.prototype.reset = function () {
                    this.ptr = this.ns
                },
                    n.prototype.define = function (e, n) {
                        if ('string' != typeof e || !t.TYPEREF.test(e)) throw new Error('Illegal package name: ' + e);
                        var r,
                            s = e.split('.');
                        for (r = 0; r < s.length; r++) if (!t.NAME.test(s[r])) throw new Error('Illegal package name: ' + s[r]);
                        for (r = 0; r < s.length; r++) this.ptr.hasChild(s[r]) || this.ptr.addChild(new i.Namespace(this.ptr, s[r], n)),
                            this.ptr = this.ptr.getChild(s[r]);
                        return this
                    },
                    n.isValidMessage = function (i) {
                        if ('string' != typeof i.name || !t.NAME.test(i.name)) return !1;
                        if ('undefined' != typeof i.values || 'undefined' != typeof i.rpc) return !1;
                        var r;
                        if ('undefined' != typeof i.fields) {
                            if (!e.Util.isArray(i.fields)) return !1;
                            var s,
                                o = [
                                ];
                            for (r = 0; r < i.fields.length; r++) {
                                if (!n.isValidMessageField(i.fields[r])) return !1;
                                if (s = parseInt(i.fields[r].id, 10), o.indexOf(s) >= 0) return !1;
                                o.push(s)
                            }
                            o = null
                        }
                        if ('undefined' != typeof i.enums) {
                            if (!e.Util.isArray(i.enums)) return !1;
                            for (r = 0; r < i.enums.length; r++) if (!n.isValidEnum(i.enums[r])) return !1
                        }
                        if ('undefined' != typeof i.messages) {
                            if (!e.Util.isArray(i.messages)) return !1;
                            for (r = 0; r < i.messages.length; r++) if (!n.isValidMessage(i.messages[r]) && !n.isValidExtend(i.messages[r])) return !1
                        }
                        return 'undefined' == typeof i.extensions || e.Util.isArray(i.extensions) && 2 === i.extensions.length && 'number' == typeof i.extensions[0] && 'number' == typeof i.extensions[1] ? !0 : !1
                    },
                    n.isValidMessageField = function (e) {
                        if ('string' != typeof e.rule || 'string' != typeof e.name || 'string' != typeof e.type || 'undefined' == typeof e.id) return !1;
                        if (!(t.RULE.test(e.rule) && t.NAME.test(e.name) && t.TYPEREF.test(e.type) && t.ID.test('' + e.id))) return !1;
                        if ('undefined' != typeof e.options) {
                            if ('object' != typeof e.options) return !1;
                            for (var i = Object.keys(e.options), n = 0; n < i.length; n++) if (!t.OPTNAME.test(i[n]) || 'string' != typeof e.options[i[n]] && 'number' != typeof e.options[i[n]] && 'boolean' != typeof e.options[i[n]]) return !1
                        }
                        return !0
                    },
                    n.isValidEnum = function (i) {
                        if ('string' != typeof i.name || !t.NAME.test(i.name)) return !1;
                        if ('undefined' == typeof i.values || !e.Util.isArray(i.values) || 0 == i.values.length) return !1;
                        for (var n = 0; n < i.values.length; n++) {
                            if ('object' != typeof i.values[n]) return !1;
                            if ('string' != typeof i.values[n].name || 'undefined' == typeof i.values[n].id) return !1;
                            if (!t.NAME.test(i.values[n].name) || !t.NEGID.test('' + i.values[n].id)) return !1
                        }
                        return !0
                    },
                    n.prototype.create = function (r) {
                        if (r && (e.Util.isArray(r) || (r = [
                                r
                            ]), 0 != r.length)) {
                            var s,
                                o,
                                l,
                                a,
                                f,
                                p = [
                                ];
                            for (p.push(r); p.length > 0; ) {
                                if (r = p.pop(), !e.Util.isArray(r)) throw new Error('Not a valid namespace definition: ' + JSON.stringify(r));
                                for (; r.length > 0; ) {
                                    if (s = r.shift(), n.isValidMessage(s)) {
                                        if (o = new i.Message(this.ptr, s.name, s.options), s.fields && s.fields.length > 0) for (a = 0; a < s.fields.length; a++) {
                                            if (o.hasChild(s.fields[a].id)) throw new Error('Duplicate field id in message ' + o.name + ': ' + s.fields[a].id);
                                            if (s.fields[a].options) {
                                                for (l = Object.keys(s.fields[a].options), f = 0; f < l.length; f++) {
                                                    if (!t.OPTNAME.test(l[f])) throw new Error('Illegal field option name in message ' + o.name + '#' + s.fields[a].name + ': ' + l[f]);
                                                    if ('string' != typeof s.fields[a].options[l[f]] && 'number' != typeof s.fields[a].options[l[f]] && 'boolean' != typeof s.fields[a].options[l[f]]) throw new Error('Illegal field option value in message ' + o.name + '#' + s.fields[a].name + '#' + l[f] + ': ' + s.fields[a].options[l[f]])
                                                }
                                                l = null
                                            }
                                            o.addChild(new i.Message.Field(o, s.fields[a].rule, s.fields[a].type, s.fields[a].name, s.fields[a].id, s.fields[a].options))
                                        }
                                        if (l = [
                                            ], 'undefined' != typeof s.enums && s.enums.length > 0) for (a = 0; a < s.enums.length; a++) l.push(s.enums[a]);
                                        if (s.messages && s.messages.length > 0) for (a = 0; a < s.messages.length; a++) l.push(s.messages[a]);
                                        if (s.extensions && (o.extensions = s.extensions, o.extensions[0] < e.Lang.ID_MIN && (o.extensions[0] = e.Lang.ID_MIN), o.extensions[1] > e.Lang.ID_MAX && (o.extensions[1] = e.Lang.ID_MAX)), this.ptr.addChild(o), l.length > 0) {
                                            p.push(r),
                                                r = l,
                                                l = null,
                                                this.ptr = o,
                                                o = null;
                                            continue
                                        }
                                        l = null,
                                            o = null
                                    } else if (n.isValidEnum(s)) {
                                        for (o = new i.Enum(this.ptr, s.name, s.options), a = 0; a < s.values.length; a++) o.addChild(new i.Enum.Value(o, s.values[a].name, s.values[a].id));
                                        this.ptr.addChild(o),
                                            o = null
                                    } else if (n.isValidService(s)) {
                                        o = new i.Service(this.ptr, s.name, s.options);
                                        for (a in s.rpc) s.rpc.hasOwnProperty(a) && o.addChild(new i.Service.RPCMethod(o, a, s.rpc[a].request, s.rpc[a].response, s.rpc[a].options));
                                        this.ptr.addChild(o),
                                            o = null
                                    } else {
                                        if (!n.isValidExtend(s)) throw new Error('Not a valid message, enum, service or extend definition: ' + JSON.stringify(s));
                                        if (o = this.ptr.resolve(s.ref)) for (a = 0; a < s.fields.length; a++) {
                                            if (o.hasChild(s.fields[a].id)) throw new Error('Duplicate extended field id in message ' + o.name + ': ' + s.fields[a].id);
                                            if (s.fields[a].id < o.extensions[0] || s.fields[a].id > o.extensions[1]) throw new Error('Illegal extended field id in message ' + o.name + ': ' + s.fields[a].id + ' (' + o.extensions.join(' to ') + ' expected)');
                                            o.addChild(new i.Message.Field(o, s.fields[a].rule, s.fields[a].type, s.fields[a].name, s.fields[a].id, s.fields[a].options))
                                        } else if (!/\.?google\.protobuf\./.test(s.ref)) throw new Error('Extended message ' + s.ref + ' is not defined')
                                    }
                                    s = null
                                }
                                r = null,
                                    this.ptr = this.ptr.parent
                            }
                            return this.resolved = !1,
                                this.result = null,
                                this
                        }
                    },
                    n.isValidImport = function (e) {
                        return !/google\/protobuf\//.test(e)
                    },
                    n.prototype['import'] = function (t, i) {
                        if ('string' == typeof i) {
                            if (e.Util.IS_NODE) {
                                var r = require('path');
                                i = r.resolve(i)
                            }
                            if (this.files[i]) return this.reset(),
                                this;
                            this.files[i] = !0
                        }
                        if (t.imports && t.imports.length > 0) {
                            var s,
                                o = '/',
                                l = !1;
                            'object' == typeof i ? (this.importRoot = i.root, l = !0, s = this.importRoot, i = i.file, (s.indexOf('\\') >= 0 || i.indexOf('\\') >= 0) && (o = '\\'))  : 'string' == typeof i ? this.importRoot ? s = this.importRoot : i.indexOf('/') >= 0 ? (s = i.replace(/\/[^\/]*$/, ''), '' === s && (s = '/'))  : i.indexOf('\\') >= 0 ? (s = i.replace(/\\[^\\]*$/, ''), o = '\\')  : s = '.' : s = null;
                            for (var a = 0; a < t.imports.length; a++) if ('string' == typeof t.imports[a]) {
                                if (!s) throw new Error('Cannot determine import root: File name is unknown');
                                var f = s + o + t.imports[a];
                                if (!n.isValidImport(f)) continue;
                                /\.proto$/i.test(f) && !e.DotProto && (f = f.replace(/\.proto$/, '.json'));
                                var p = e.Util.fetch(f);
                                if (null === p) throw new Error('Failed to import \'' + f + '\' in \'' + i + '\': File not found');
                                /\.json$/i.test(f) ? this['import'](JSON.parse(p + ''), f)  : this['import'](new e.DotProto.Parser(p + '').parse(), f)
                            } else i ? /\.(\w+)$/.test(i) ? this['import'](t.imports[a], i.replace(/^(.+)\.(\w+)$/, function (e, t, i) {
                                return t + '_import' + a + '.' + i
                            }))  : this['import'](t.imports[a], i + '_import' + a)  : this['import'](t.imports[a]);
                            l && (this.importRoot = null)
                        }
                        return t.messages && (t['package'] && this.define(t['package'], t.options), this.create(t.messages), this.reset()),
                        t.enums && (t['package'] && this.define(t['package'], t.options), this.create(t.enums), this.reset()),
                        t.services && (t['package'] && this.define(t['package'], t.options), this.create(t.services), this.reset()),
                        t['extends'] && (t['package'] && this.define(t['package'], t.options), this.create(t['extends']), this.reset()),
                            this
                    },
                    n.isValidService = function (e) {
                        return 'string' == typeof e.name && t.NAME.test(e.name) && 'object' == typeof e.rpc ? !0 : !1
                    },
                    n.isValidExtend = function (i) {
                        if ('string' != typeof i.ref || !t.TYPEREF.test(i.name)) return !1;
                        var r;
                        if ('undefined' != typeof i.fields) {
                            if (!e.Util.isArray(i.fields)) return !1;
                            var s,
                                o = [
                                ];
                            for (r = 0; r < i.fields.length; r++) {
                                if (!n.isValidMessageField(i.fields[r])) return !1;
                                if (s = parseInt(i.id, 10), o.indexOf(s) >= 0) return !1;
                                o.push(s)
                            }
                            o = null
                        }
                        return !0
                    },
                    n.prototype.resolveAll = function () {
                        var n;
                        if (null != this.ptr && 'object' != typeof this.ptr.type) {
                            if (this.ptr instanceof i.Namespace) for (var r = this.ptr.getChildren(), s = 0; s < r.length; s++) this.ptr = r[s],
                                this.resolveAll();
                            else if (this.ptr instanceof i.Message.Field) if (t.TYPE.test(this.ptr.type)) this.ptr.type = e.TYPES[this.ptr.type];
                            else {
                                if (!t.TYPEREF.test(this.ptr.type)) throw new Error('Illegal type reference in ' + this.ptr.toString(!0) + ': ' + this.ptr.type);
                                if (n = this.ptr.parent.resolve(this.ptr.type, !0), !n) throw new Error('Unresolvable type reference in ' + this.ptr.toString(!0) + ': ' + this.ptr.type);
                                if (this.ptr.resolvedType = n, n instanceof i.Enum) this.ptr.type = e.TYPES['enum'];
                                else {
                                    if (!(n instanceof i.Message)) throw new Error('Illegal type reference in ' + this.ptr.toString(!0) + ': ' + this.ptr.type);
                                    this.ptr.type = e.TYPES.message
                                }
                            } else if (this.ptr instanceof e.Reflect.Enum.Value);
                            else {
                                if (!(this.ptr instanceof e.Reflect.Service.Method)) throw new Error('Illegal object type in namespace: ' + typeof this.ptr + ':' + this.ptr);
                                if (!(this.ptr instanceof e.Reflect.Service.RPCMethod)) throw new Error('Illegal service method type in ' + this.ptr.toString(!0));
                                if (n = this.ptr.parent.resolve(this.ptr.requestName), !(n && n instanceof e.Reflect.Message)) throw new Error('Illegal request type reference in ' + this.ptr.toString(!0) + ': ' + this.ptr.requestName);
                                if (this.ptr.resolvedRequestType = n, n = this.ptr.parent.resolve(this.ptr.responseName), !(n && n instanceof e.Reflect.Message)) throw new Error('Illegal response type reference in ' + this.ptr.toString(!0) + ': ' + this.ptr.responseName);
                                this.ptr.resolvedResponseType = n
                            }
                            this.reset()
                        }
                    },
                    n.prototype.build = function (e) {
                        if (this.reset(), this.resolved || (this.resolveAll(), this.resolved = !0, this.result = null), null == this.result && (this.result = this.ns.build()), e) {
                            for (var t = e.split('.'), i = this.result, n = 0; n < t.length; n++) {
                                if (!i[t[n]]) {
                                    i = null;
                                    break
                                }
                                i = i[t[n]]
                            }
                            return i
                        }
                        return this.result
                    },
                    n.prototype.lookup = function (e) {
                        return e ? this.ns.resolve(e)  : this.ns
                    },
                    n.prototype.toString = function () {
                        return 'Builder'
                    },
                    n.Message = function () {
                    },
                    n.Service = function () {
                    },
                    n
            }(t, t.Lang, t.Reflect),
            t.loadProto = function (e, i, n) {
                return ('string' == typeof i || i && 'string' == typeof i.file && 'string' == typeof i.root) && (n = i, i = null),
                    t.loadJson(new t.DotProto.Parser(e + '').parse(), i, n)
            },
            t.protoFromString = t.loadProto,
            t.loadProtoFile = function (e, i, n) {
                if (i && 'object' == typeof i ? (n = i, i = null)  : i && 'function' == typeof i || (i = null), !i) {
                    var r = t.Util.fetch('object' == typeof e ? e.root + '/' + e.file : e);
                    return null !== r ? t.protoFromString(r, n, e)  : null
                }
                t.Util.fetch('object' == typeof e ? e.root + '/' + e.file : e, function (r) {
                    i(t.loadProto(r, n, e))
                })
            },
            t.protoFromFile = t.loadProtoFile,
            t.newBuilder = function (e, i) {
                var n = new t.Builder;
                return 'undefined' != typeof e && null !== e && n.define(e, i),
                    n
            },
            t.loadJson = function (e, i, n) {
                return ('string' == typeof i || i && 'string' == typeof i.file && 'string' == typeof i.root) && (n = i, i = null),
                i && 'object' == typeof i || (i = t.newBuilder()),
                'string' == typeof e && (e = JSON.parse(e)),
                    i['import'](e, n),
                    i.resolveAll(),
                    i.build(),
                    i
            },
            t.loadJsonFile = function (e, i, n) {
                if (i && 'object' == typeof i ? (n = i, i = null)  : i && 'function' == typeof i || (i = null), !i) {
                    var r = t.Util.fetch('object' == typeof e ? e.root + '/' + e.file : e);
                    return null !== r ? t.loadJson(JSON.parse(r), n, e)  : null
                }
                t.Util.fetch('object' == typeof e ? e.root + '/' + e.file : e, function (r) {
                    try {
                        i(t.loadJson(JSON.parse(r), n, e))
                    } catch (s) {
                        i(s)
                    }
                })
            },
            t
    }
    'undefined' != typeof module && module.exports ? module.exports = t(require('bytebuffer'))  : 'undefined' != typeof define && define.amd ? define('ProtoBuf', [
        'ByteBuffer'
    ], t)  : (e.dcodeIO || (e.dcodeIO = {
    }), e.dcodeIO.ProtoBuf = t(e.dcodeIO.ByteBuffer))
}(this);
THREE.CopyShader = {
    uniforms: {
        tDiffuse: {
            type: 't',
            value: null
        },
        opacity: {
            type: 'f',
            value: 1
        }
    },
    vertexShader: [
        'varying vec2 vUv;',
        'void main() {',
        'vUv = uv;',
        'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
        '}'
    ].join('\n'),
    fragmentShader: [
        'uniform float opacity;',
        'uniform sampler2D tDiffuse;',
        'varying vec2 vUv;',
        'void main() {',
        'vec4 texel = texture2D( tDiffuse, vUv );',
        'gl_FragColor = opacity * texel;',
        '}'
    ].join('\n')
};
THREE.HorizontalBlurShader = {
    uniforms: {
        tDiffuse: {
            type: 't',
            value: null
        },
        h: {
            type: 'f',
            value: 1 / 512
        }
    },
    vertexShader: [
        'varying vec2 vUv;',
        'void main() {',
        'vUv = uv;',
        'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
        '}'
    ].join('\n'),
    fragmentShader: [
        'uniform sampler2D tDiffuse;',
        'uniform float h;',
        'varying vec2 vUv;',
        'void main() {',
        'vec4 sum = vec4( 0.0 );',
        'sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;',
        'sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;',
        'sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;',
        'sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;',
        'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;',
        'sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;',
        'sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;',
        'sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;',
        'sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;',
        'gl_FragColor = sum;',
        '}'
    ].join('\n')
};
THREE.VerticalBlurShader = {
    uniforms: {
        tDiffuse: {
            type: 't',
            value: null
        },
        v: {
            type: 'f',
            value: 1 / 512
        }
    },
    vertexShader: [
        'varying vec2 vUv;',
        'void main() {',
        'vUv = uv;',
        'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
        '}'
    ].join('\n'),
    fragmentShader: [
        'uniform sampler2D tDiffuse;',
        'uniform float v;',
        'varying vec2 vUv;',
        'void main() {',
        'vec4 sum = vec4( 0.0 );',
        'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;',
        'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;',
        'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;',
        'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;',
        'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;',
        'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;',
        'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;',
        'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;',
        'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;',
        'gl_FragColor = sum;',
        '}'
    ].join('\n')
};
THREE.EffectComposer = function (e, r) {
    if (this.renderer = e, void 0 === r) {
        var t = window.innerWidth || 1,
            i = window.innerHeight || 1,
            s = {
                minFilter: THREE.LinearFilter,
                magFilter: THREE.LinearFilter,
                format: THREE.RGBFormat,
                stencilBuffer: !1
            };
        r = new THREE.WebGLRenderTarget(t, i, s)
    }
    this.renderTarget1 = r,
        this.renderTarget2 = r.clone(),
        this.writeBuffer = this.renderTarget1,
        this.readBuffer = this.renderTarget2,
        this.passes = [
        ],
    void 0 === THREE.CopyShader && console.error('THREE.EffectComposer relies on THREE.CopyShader'),
        this.copyPass = new THREE.ShaderPass(THREE.CopyShader)
},
    THREE.EffectComposer.prototype = {
        swapBuffers: function () {
            var e = this.readBuffer;
            this.readBuffer = this.writeBuffer,
                this.writeBuffer = e
        },
        addPass: function (e) {
            this.passes.push(e)
        },
        insertPass: function (e, r) {
            this.passes.splice(r, 0, e)
        },
        render: function (e) {
            this.writeBuffer = this.renderTarget1,
                this.readBuffer = this.renderTarget2;
            var r,
                t,
                i = !1,
                s = this.passes.length;
            for (t = 0; s > t; t++) if (r = this.passes[t], r.enabled) {
                if (r.render(this.renderer, this.writeBuffer, this.readBuffer, e, i), r.needsSwap) {
                    if (i) {
                        var n = this.renderer.context;
                        n.stencilFunc(n.NOTEQUAL, 1, 4294967295),
                            this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, e),
                            n.stencilFunc(n.EQUAL, 1, 4294967295)
                    }
                    this.swapBuffers()
                }
                r instanceof THREE.MaskPass ? i = !0 : r instanceof THREE.ClearMaskPass && (i = !1)
            }
        },
        reset: function (e) {
            void 0 === e && (e = this.renderTarget1.clone(), e.width = window.innerWidth, e.height = window.innerHeight),
                this.renderTarget1 = e,
                this.renderTarget2 = e.clone(),
                this.writeBuffer = this.renderTarget1,
                this.readBuffer = this.renderTarget2
        },
        setSize: function (e, r) {
            var t = this.renderTarget1.clone();
            t.width = e,
                t.height = r,
                this.reset(t)
        }
    };
THREE.RenderPass = function (e, r, l, a, o) {
    this.scene = e,
        this.camera = r,
        this.overrideMaterial = l,
        this.clearColor = a,
        this.clearAlpha = void 0 !== o ? o : 1,
        this.oldClearColor = new THREE.Color,
        this.oldClearAlpha = 1,
        this.enabled = !0,
        this.clear = !0,
        this.needsSwap = !1
},
    THREE.RenderPass.prototype = {
        render: function (e, r, l, a) {
            this.scene.overrideMaterial = this.overrideMaterial,
            this.clearColor && (this.oldClearColor.copy(e.getClearColor()), this.oldClearAlpha = e.getClearAlpha(), e.setClearColor(this.clearColor, this.clearAlpha)),
                e.render(this.scene, this.camera, l, this.clear),
            this.clearColor && e.setClearColor(this.oldClearColor, this.oldClearAlpha),
                this.scene.overrideMaterial = null
        }
    };
THREE.MaskPass = function (e, s) {
    this.scene = e,
        this.camera = s,
        this.enabled = !0,
        this.clear = !0,
        this.needsSwap = !1,
        this.inverse = !1
},
    THREE.MaskPass.prototype = {
        render: function (e, s, t, a) {
            var n = e.context;
            n.colorMask(!1, !1, !1, !1),
                n.depthMask(!1);
            var i,
                r;
            this.inverse ? (i = 0, r = 1)  : (i = 1, r = 0),
                n.enable(n.STENCIL_TEST),
                n.stencilOp(n.REPLACE, n.REPLACE, n.REPLACE),
                n.stencilFunc(n.ALWAYS, i, 4294967295),
                n.clearStencil(r),
                e.render(this.scene, this.camera, t, this.clear),
                e.render(this.scene, this.camera, s, this.clear),
                n.colorMask(!0, !0, !0, !0),
                n.depthMask(!0),
                n.stencilFunc(n.EQUAL, 1, 4294967295),
                n.stencilOp(n.KEEP, n.KEEP, n.KEEP)
        }
    },
    THREE.ClearMaskPass = function () {
        this.enabled = !0
    },
    THREE.ClearMaskPass.prototype = {
        render: function (e, s, t, a) {
            var n = e.context;
            n.disable(n.STENCIL_TEST)
        }
    };
THREE.ShaderPass = function (e, r) {
    this.textureID = void 0 !== r ? r : 'tDiffuse',
        this.uniforms = THREE.UniformsUtils.clone(e.uniforms),
        this.material = new THREE.ShaderMaterial({
            uniforms: this.uniforms,
            vertexShader: e.vertexShader,
            fragmentShader: e.fragmentShader
        }),
        this.renderToScreen = !1,
        this.enabled = !0,
        this.needsSwap = !0,
        this.clear = !1,
        this.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1),
        this.scene = new THREE.Scene,
        this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null),
        this.scene.add(this.quad)
},
    THREE.ShaderPass.prototype = {
        render: function (e, r, t, s) {
            this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = t),
                this.quad.material = this.material,
                this.renderToScreen ? e.render(this.scene, this.camera)  : e.render(this.scene, this.camera, r, this.clear)
        }
    };
THREE.MTLLoader = function (t, e, r) {
    this.baseUrl = t,
        this.options = e,
        this.crossOrigin = r
},
    THREE.MTLLoader.prototype = {
        constructor: THREE.MTLLoader,
        load: function (t, e, r, a) {
            var i = this,
                s = new THREE.XHRLoader;
            s.setCrossOrigin(this.crossOrigin),
                s.load(t, function (t) {
                    e(i.parse(t))
                })
        },
        parse: function (t) {
            for (var e = t.split('\n'), r = {
            }, a = /\s+/, i = {
            }, s = 0; s < e.length; s++) {
                var o = e[s];
                if (o = o.trim(), 0 !== o.length && '#' !== o.charAt(0)) {
                    var n = o.indexOf(' '),
                        h = n >= 0 ? o.substring(0, n)  : o;
                    h = h.toLowerCase();
                    var p = n >= 0 ? o.substring(n + 1)  : '';
                    if (p = p.trim(), 'newmtl' === h) r = {
                        name: p
                    },
                        i[p] = r;
                    else if (r) if ('ka' === h || 'kd' === h || 'ks' === h) {
                        var l = p.split(a, 3);
                        r[h] = [
                            parseFloat(l[0]),
                            parseFloat(l[1]),
                            parseFloat(l[2])
                        ]
                    } else r[h] = p
                }
            }
            var d = new THREE.MTLLoader.MaterialCreator(this.baseUrl, this.options);
            return d.setMaterials(i),
                d
        }
    },
    THREE.MTLLoader.MaterialCreator = function (t, e) {
        this.baseUrl = t,
            this.options = e,
            this.materialsInfo = {
            },
            this.materials = {
            },
            this.materialsArray = [
            ],
            this.nameLookup = {
            },
            this.side = this.options && this.options.side ? this.options.side : THREE.FrontSide,
            this.wrap = this.options && this.options.wrap ? this.options.wrap : THREE.RepeatWrapping
    },
    THREE.MTLLoader.MaterialCreator.prototype = {
        constructor: THREE.MTLLoader.MaterialCreator,
        setMaterials: function (t) {
            this.materialsInfo = this.convert(t),
                this.materials = {
                },
                this.materialsArray = [
                ],
                this.nameLookup = {
                }
        },
        convert: function (t) {
            if (!this.options) return t;
            var e = {
            };
            for (var r in t) {
                var a = t[r],
                    i = {
                    };
                e[r] = i;
                for (var s in a) {
                    var o = !0,
                        n = a[s],
                        h = s.toLowerCase();
                    switch (h) {
                        case 'kd':
                        case 'ka':
                        case 'ks':
                            this.options && this.options.normalizeRGB && (n = [
                                n[0] / 255,
                                n[1] / 255,
                                n[2] / 255
                            ]),
                            this.options && this.options.ignoreZeroRGBs && 0 === n[0] && 0 === n[1] && 0 === n[1] && (o = !1);
                            break;
                        case 'd':
                            this.options && this.options.invertTransparency && (n = 1 - n)
                    }
                    o && (i[h] = n)
                }
            }
            return e
        },
        preload: function () {
            for (var t in this.materialsInfo) this.create(t)
        },
        getIndex: function (t) {
            return this.nameLookup[t]
        },
        getAsArray: function () {
            var t = 0;
            for (var e in this.materialsInfo) this.materialsArray[t] = this.create(e),
                this.nameLookup[e] = t,
                t++;
            return this.materialsArray
        },
        create: function (t) {
            return void 0 === this.materials[t] && this.createMaterial_(t),
                this.materials[t]
        },
        createMaterial_: function (t) {
            var e = this.materialsInfo[t],
                r = {
                    name: t,
                    side: this.side
                };
            for (var a in e) {
                var i = e[a];
                switch (a.toLowerCase()) {
                    case 'kd':
                        r.diffuse = (new THREE.Color).fromArray(i);
                        break;
                    case 'ka':
                        r.ambient = (new THREE.Color).fromArray(i);
                        break;
                    case 'ks':
                        r.specular = (new THREE.Color).fromArray(i);
                        break;
                    case 'map_kd':
                        r.map = this.loadTexture(this.baseUrl + i),
                            r.map.wrapS = this.wrap,
                            r.map.wrapT = this.wrap;
                        break;
                    case 'ns':
                        r.shininess = i;
                        break;
                    case 'd':
                        1 > i && (r.transparent = !0, r.opacity = i)
                }
            }
            return r.diffuse && (r.ambient || (r.ambient = r.diffuse), r.color = r.diffuse),
                this.materials[t] = new THREE.MeshPhongMaterial(r),
                this.materials[t]
        },
        loadTexture: function (t, e, r, a) {
            var i = /\.dds$/i.test(t);
            if (i) var s = THREE.ImageUtils.loadCompressedTexture(t, e, r, a);
            else {
                var o = new Image,
                    s = new THREE.Texture(o, e),
                    n = new THREE.ImageLoader;
                n.crossOrigin = this.crossOrigin,
                    n.load(t, function (t) {
                        s.image = THREE.MTLLoader.ensurePowerOfTwo_(t),
                            s.needsUpdate = !0,
                        r && r(s)
                    })
            }
            return s
        }
    },
    THREE.MTLLoader.ensurePowerOfTwo_ = function (t) {
        if (!THREE.Math.isPowerOfTwo(t.width) || !THREE.Math.isPowerOfTwo(t.height)) {
            var e = document.createElement('canvas');
            e.width = THREE.MTLLoader.nextHighestPowerOfTwo_(t.width),
                e.height = THREE.MTLLoader.nextHighestPowerOfTwo_(t.height);
            var r = e.getContext('2d');
            return r.drawImage(t, 0, 0, t.width, t.height, 0, 0, e.width, e.height),
                e
        }
        return t
    },
    THREE.MTLLoader.nextHighestPowerOfTwo_ = function (t) {
        --t;
        for (var e = 1; 32 > e; e <<= 1) t |= t >> e;
        return t + 1
    },
    THREE.EventDispatcher.prototype.apply(THREE.MTLLoader.prototype);
THREE.OBJLoader = function (e) {
    this.manager = void 0 !== e ? e : THREE.DefaultLoadingManager
},
    THREE.OBJLoader.prototype = {
        constructor: THREE.OBJLoader,
        load: function (e, t, r, n) {
            var a = this,
                d = new THREE.XHRLoader(a.manager);
            d.setCrossOrigin(this.crossOrigin),
                d.load(e, function (e) {
                    t(a.parse(e))
                }, r, n)
        },
        parse: function (e) {
            function t(e) {
                var t = parseInt(e);
                return 3 * (t >= 0 ? t - 1 : t + m.length / 3)
            }
            function r(e) {
                var t = parseInt(e);
                return 3 * (t >= 0 ? t - 1 : t + E.length / 3)
            }
            function n(e) {
                var t = parseInt(e);
                return 2 * (t >= 0 ? t - 1 : t + c.length / 2)
            }
            function a(e, t, r) {
                l.vertices.push(m[e], m[e + 1], m[e + 2], m[t], m[t + 1], m[t + 2], m[r], m[r + 1], m[r + 2])
            }
            function d(e, t, r) {
                l.normals.push(E[e], E[e + 1], E[e + 2], E[t], E[t + 1], E[t + 2], E[r], E[r + 1], E[r + 2])
            }
            function o(e, t, r) {
                l.uvs.push(c[e], c[e + 1], c[t], c[t + 1], c[r], c[r + 1])
            }
            function s(e, s, i, l, u, v, m, E, c, f, p, h) {
                var g,
                    H = t(e),
                    R = t(s),
                    T = t(i);
                void 0 === l ? a(H, R, T)  : (g = t(l), a(H, R, g), a(R, T, g)),
                void 0 !== u && (H = n(u), R = n(v), T = n(m), void 0 === l ? o(H, R, T)  : (g = n(E), o(H, R, g), o(R, T, g))),
                void 0 !== c && (H = r(c), R = r(f), T = r(p), void 0 === l ? d(H, R, T)  : (g = r(h), d(H, R, g), d(R, T, g)))
            }
            console.time('OBJLoader');
            var i,
                l,
                u,
                v = [
                ];
            /^o /gm.test(e) === !1 && (l = {
                vertices: [
                ],
                normals: [
                ],
                uvs: [
                ]
            }, u = {
                name: ''
            }, i = {
                name: '',
                geometry: l,
                material: u
            }, v.push(i));
            for (var m = [
            ], E = [
            ], c = [
            ], f = /v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/, p = /vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/, h = /vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/, g = /f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/, H = /f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/, R = /f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/, T = /f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/, b = e.split('\n'), w = 0; w < b.length; w++) {
                var F = b[w];
                F = F.trim();
                var A;
                0 !== F.length && '#' !== F.charAt(0) && (null !== (A = f.exec(F)) ? m.push(parseFloat(A[1]), parseFloat(A[2]), parseFloat(A[3]))  : null !== (A = p.exec(F)) ? E.push(parseFloat(A[1]), parseFloat(A[2]), parseFloat(A[3]))  : null !== (A = h.exec(F)) ? c.push(parseFloat(A[1]), parseFloat(A[2]))  : null !== (A = g.exec(F)) ? s(A[1], A[2], A[3], A[4])  : null !== (A = H.exec(F)) ? s(A[2], A[5], A[8], A[11], A[3], A[6], A[9], A[12])  : null !== (A = R.exec(F)) ? s(A[2], A[6], A[10], A[14], A[3], A[7], A[11], A[15], A[4], A[8], A[12], A[16])  : null !== (A = T.exec(F)) ? s(A[2], A[5], A[8], A[11], void 0, void 0, void 0, void 0, A[3], A[6], A[9], A[12])  : /^o /.test(F) ? (l = {
                    vertices: [
                    ],
                    normals: [
                    ],
                    uvs: [
                    ]
                }, u = {
                    name: ''
                }, i = {
                    name: F.substring(2).trim(),
                    geometry: l,
                    material: u
                }, v.push(i))  : /^g /.test(F) || (/^usemtl /.test(F) ? u.name = F.substring(7).trim()  : /^mtllib /.test(F) || /^s /.test(F)))
            }
            for (var B = new THREE.Object3D, w = 0, y = v.length; y > w; w++) {
                i = v[w],
                    l = i.geometry;
                var L = new THREE.BufferGeometry;
                L.addAttribute('position', new THREE.BufferAttribute(new Float32Array(l.vertices), 3)),
                l.normals.length > 0 && L.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(l.normals), 3)),
                l.uvs.length > 0 && L.addAttribute('uv', new THREE.BufferAttribute(new Float32Array(l.uvs), 2)),
                    u = new THREE.MeshLambertMaterial,
                    u.name = i.material.name;
                var O = new THREE.Mesh(L, u);
                O.name = i.name,
                    B.add(O)
            }
            return console.timeEnd('OBJLoader'),
                B
        }
    };
var dat = dat || {
    };
dat.gui = dat.gui || {
    },
    dat.utils = dat.utils || {
        },
    dat.controllers = dat.controllers || {
        },
    dat.dom = dat.dom || {
        },
    dat.color = dat.color || {
        },
    dat.utils.css = function () {
        return {
            load: function (e, t) {
                t = t || document;
                var n = t.createElement('link');
                n.type = 'text/css',
                    n.rel = 'stylesheet',
                    n.href = e,
                    t.getElementsByTagName('head') [0].appendChild(n)
            },
            inject: function (e, t) {
                t = t || document;
                var n = document.createElement('style');
                n.type = 'text/css',
                    n.innerHTML = e,
                    t.getElementsByTagName('head') [0].appendChild(n)
            }
        }
    }(),
    dat.utils.common = function () {
        var e = Array.prototype.forEach,
            t = Array.prototype.slice;
        return {
            BREAK: {
            },
            extend: function (e) {
                return this.each(t.call(arguments, 1), function (t) {
                    for (var n in t) this.isUndefined(t[n]) || (e[n] = t[n])
                }, this),
                    e
            },
            defaults: function (e) {
                return this.each(t.call(arguments, 1), function (t) {
                    for (var n in t) this.isUndefined(e[n]) && (e[n] = t[n])
                }, this),
                    e
            },
            compose: function () {
                var e = t.call(arguments);
                return function () {
                    for (var n = t.call(arguments), o = e.length - 1; o >= 0; o--) n = [
                        e[o].apply(this, n)
                    ];
                    return n[0]
                }
            },
            each: function (t, n, o) {
                if (t) if (e && t.forEach && t.forEach === e) t.forEach(n, o);
                else if (t.length === t.length + 0) {
                    for (var i = 0, r = t.length; r > i; i++) if (i in t && n.call(o, t[i], i) === this.BREAK) return
                } else for (var i in t) if (n.call(o, t[i], i) === this.BREAK) return
            },
            defer: function (e) {
                setTimeout(e, 0)
            },
            toArray: function (e) {
                return e.toArray ? e.toArray()  : t.call(e)
            },
            isUndefined: function (e) {
                return void 0 === e
            },
            isNull: function (e) {
                return null === e
            },
            isNaN: function (e) {
                return e !== e
            },
            isArray: Array.isArray || function (e) {
                return e.constructor === Array
            },
            isObject: function (e) {
                return e === Object(e)
            },
            isNumber: function (e) {
                return e === e + 0
            },
            isString: function (e) {
                return e === e + ''
            },
            isBoolean: function (e) {
                return e === !1 || e === !0
            },
            isFunction: function (e) {
                return '[object Function]' === Object.prototype.toString.call(e)
            }
        }
    }(),
    dat.controllers.Controller = function (e) {
        var t = function (e, t) {
            this.initialValue = e[t],
                this.domElement = document.createElement('div'),
                this.object = e,
                this.property = t,
                this.__onChange = void 0,
                this.__onFinishChange = void 0
        };
        return e.extend(t.prototype, {
            onChange: function (e) {
                return this.__onChange = e,
                    this
            },
            onFinishChange: function (e) {
                return this.__onFinishChange = e,
                    this
            },
            setValue: function (e) {
                return this.object[this.property] = e,
                this.__onChange && this.__onChange.call(this, e),
                    this.updateDisplay(),
                    this
            },
            getValue: function () {
                return this.object[this.property]
            },
            updateDisplay: function () {
                return this
            },
            isModified: function () {
                return this.initialValue !== this.getValue()
            }
        }),
            t
    }(dat.utils.common),
    dat.dom.dom = function (e) {
        function t(t) {
            if ('0' === t || e.isUndefined(t)) return 0;
            var n = t.match(i);
            return e.isNull(n) ? 0 : parseFloat(n[1])
        }
        var n = {
                HTMLEvents: [
                    'change'
                ],
                MouseEvents: [
                    'click',
                    'mousemove',
                    'mousedown',
                    'mouseup',
                    'mouseover'
                ],
                KeyboardEvents: [
                    'keydown'
                ]
            },
            o = {
            };
        e.each(n, function (t, n) {
            e.each(t, function (e) {
                o[e] = n
            })
        });
        var i = /(\d+(\.\d+)?)px/,
            r = {
                makeSelectable: function (e, t) {
                    void 0 !== e && void 0 !== e.style && (e.onselectstart = t ? function () {
                        return !1
                    }
                        : function () {
                    }, e.style.MozUserSelect = t ? 'auto' : 'none', e.style.KhtmlUserSelect = t ? 'auto' : 'none', e.unselectable = t ? 'on' : 'off')
                },
                makeFullscreen: function (t, n, o) {
                    e.isUndefined(n) && (n = !0),
                    e.isUndefined(o) && (o = !0),
                        t.style.position = 'absolute',
                    n && (t.style.left = 0, t.style.right = 0),
                    o && (t.style.top = 0, t.style.bottom = 0)
                },
                fakeEvent: function (t, n, i, r) {
                    i = i || {
                        };
                    var s = o[n];
                    if (!s) throw new Error('Event type ' + n + ' not supported.');
                    var a = document.createEvent(s);
                    switch (s) {
                        case 'MouseEvents':
                            var l = i.x || i.clientX || 0,
                                d = i.y || i.clientY || 0;
                            a.initMouseEvent(n, i.bubbles || !1, i.cancelable || !0, window, i.clickCount || 1, 0, 0, l, d, !1, !1, !1, !1, 0, null);
                            break;
                        case 'KeyboardEvents':
                            var c = a.initKeyboardEvent || a.initKeyEvent;
                            e.defaults(i, {
                                cancelable: !0,
                                ctrlKey: !1,
                                altKey: !1,
                                shiftKey: !1,
                                metaKey: !1,
                                keyCode: void 0,
                                charCode: void 0
                            }),
                                c(n, i.bubbles || !1, i.cancelable, window, i.ctrlKey, i.altKey, i.shiftKey, i.metaKey, i.keyCode, i.charCode);
                            break;
                        default:
                            a.initEvent(n, i.bubbles || !1, i.cancelable || !0)
                    }
                    e.defaults(a, r),
                        t.dispatchEvent(a)
                },
                bind: function (e, t, n, o) {
                    return o = o || !1,
                        e.addEventListener ? e.addEventListener(t, n, o)  : e.attachEvent && e.attachEvent('on' + t, n),
                        r
                },
                unbind: function (e, t, n, o) {
                    return o = o || !1,
                        e.removeEventListener ? e.removeEventListener(t, n, o)  : e.detachEvent && e.detachEvent('on' + t, n),
                        r
                },
                addClass: function (e, t) {
                    if (void 0 === e.className) e.className = t;
                    else if (e.className !== t) {
                        var n = e.className.split(/ +/);
                        - 1 == n.indexOf(t) && (n.push(t), e.className = n.join(' ').replace(/^\s+/, '').replace(/\s+$/, ''))
                    }
                    return r
                },
                removeClass: function (e, t) {
                    if (t) if (void 0 === e.className);
                    else if (e.className === t) e.removeAttribute('class');
                    else {
                        var n = e.className.split(/ +/),
                            o = n.indexOf(t);
                        - 1 != o && (n.splice(o, 1), e.className = n.join(' '))
                    } else e.className = void 0;
                    return r
                },
                hasClass: function (e, t) {
                    return new RegExp('(?:^|\\s+)' + t + '(?:\\s+|$)').test(e.className) || !1
                },
                getWidth: function (e) {
                    var n = getComputedStyle(e);
                    return t(n['border-left-width']) + t(n['border-right-width']) + t(n['padding-left']) + t(n['padding-right']) + t(n.width)
                },
                getHeight: function (e) {
                    var n = getComputedStyle(e);
                    return t(n['border-top-width']) + t(n['border-bottom-width']) + t(n['padding-top']) + t(n['padding-bottom']) + t(n.height)
                },
                getOffset: function (e) {
                    var t = {
                        left: 0,
                        top: 0
                    };
                    if (e.offsetParent) do t.left += e.offsetLeft,
                        t.top += e.offsetTop;
                    while (e = e.offsetParent);
                    return t
                },
                isActive: function (e) {
                    return e === document.activeElement && (e.type || e.href)
                }
            };
        return r
    }(dat.utils.common),
    dat.controllers.OptionController = function (e, t, n) {
        var o = function (e, i, r) {
            o.superclass.call(this, e, i);
            var s = this;
            if (this.__select = document.createElement('select'), n.isArray(r)) {
                var a = {
                };
                n.each(r, function (e) {
                    a[e] = e
                }),
                    r = a
            }
            n.each(r, function (e, t) {
                var n = document.createElement('option');
                n.innerHTML = t,
                    n.setAttribute('value', e),
                    s.__select.appendChild(n)
            }),
                this.updateDisplay(),
                t.bind(this.__select, 'change', function () {
                    var e = this.options[this.selectedIndex].value;
                    s.setValue(e)
                }),
                this.domElement.appendChild(this.__select)
        };
        return o.superclass = e,
            n.extend(o.prototype, e.prototype, {
                setValue: function (e) {
                    var t = o.superclass.prototype.setValue.call(this, e);
                    return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()),
                        t
                },
                updateDisplay: function () {
                    return this.__select.value = this.getValue(),
                        o.superclass.prototype.updateDisplay.call(this)
                }
            }),
            o
    }(dat.controllers.Controller, dat.dom.dom, dat.utils.common),
    dat.controllers.NumberController = function (e, t) {
        function n(e) {
            return e = e.toString(),
                e.indexOf('.') > - 1 ? e.length - e.indexOf('.') - 1 : 0
        }
        var o = function (e, i, r) {
            o.superclass.call(this, e, i),
                r = r || {
                    },
                this.__min = r.min,
                this.__max = r.max,
                this.__step = r.step,
                this.__impliedStep = t.isUndefined(this.__step) ? 0 == this.initialValue ? 1 : Math.pow(10, Math.floor(Math.log(this.initialValue) / Math.LN10)) / 10 : this.__step,
                this.__precision = n(this.__impliedStep)
        };
        return o.superclass = e,
            t.extend(o.prototype, e.prototype, {
                setValue: function (e) {
                    return void 0 !== this.__min && e < this.__min ? e = this.__min : void 0 !== this.__max && e > this.__max && (e = this.__max),
                    void 0 !== this.__step && e % this.__step != 0 && (e = Math.round(e / this.__step) * this.__step),
                        o.superclass.prototype.setValue.call(this, e)
                },
                min: function (e) {
                    return this.__min = e,
                        this
                },
                max: function (e) {
                    return this.__max = e,
                        this
                },
                step: function (e) {
                    return this.__step = e,
                        this.__impliedStep = e,
                        this.__precision = n(e),
                        this
                }
            }),
            o
    }(dat.controllers.Controller, dat.utils.common),
    dat.controllers.NumberControllerBox = function (e, t, n) {
        function o(e, t) {
            var n = Math.pow(10, t);
            return Math.round(e * n) / n
        }
        var i = function (e, o, r) {
            function s() {
                var e = parseFloat(h.__input.value);
                n.isNaN(e) || h.setValue(e)
            }
            function a() {
                s(),
                h.__onFinishChange && h.__onFinishChange.call(h, h.getValue())
            }
            function l(e) {
                t.bind(window, 'mousemove', d),
                    t.bind(window, 'mouseup', c),
                    u = e.clientY
            }
            function d(e) {
                var t = u - e.clientY;
                h.setValue(h.getValue() + t * h.__impliedStep),
                    u = e.clientY
            }
            function c() {
                t.unbind(window, 'mousemove', d),
                    t.unbind(window, 'mouseup', c)
            }
            this.__truncationSuspended = !1,
                i.superclass.call(this, e, o, r);
            var u,
                h = this;
            this.__input = document.createElement('input'),
                this.__input.setAttribute('type', 'text'),
                t.bind(this.__input, 'change', s),
                t.bind(this.__input, 'blur', a),
                t.bind(this.__input, 'mousedown', l),
                t.bind(this.__input, 'keydown', function (e) {
                    13 === e.keyCode && (h.__truncationSuspended = !0, this.blur(), h.__truncationSuspended = !1)
                }),
                this.updateDisplay(),
                this.domElement.appendChild(this.__input)
        };
        return i.superclass = e,
            n.extend(i.prototype, e.prototype, {
                updateDisplay: function () {
                    return this.__input.value = this.__truncationSuspended ? this.getValue()  : o(this.getValue(), this.__precision),
                        i.superclass.prototype.updateDisplay.call(this)
                }
            }),
            i
    }(dat.controllers.NumberController, dat.dom.dom, dat.utils.common),
    dat.controllers.NumberControllerSlider = function (e, t, n, o, i) {
        function r(e, t, n, o, i) {
            return o + (i - o) * ((e - t) / (n - t))
        }
        var s = function (e, n, o, i, a) {
            function l(e) {
                t.bind(window, 'mousemove', d),
                    t.bind(window, 'mouseup', c),
                    d(e)
            }
            function d(e) {
                e.preventDefault();
                var n = t.getOffset(u.__background),
                    o = t.getWidth(u.__background);
                return u.setValue(r(e.clientX, n.left, n.left + o, u.__min, u.__max)),
                    !1
            }
            function c() {
                t.unbind(window, 'mousemove', d),
                    t.unbind(window, 'mouseup', c),
                u.__onFinishChange && u.__onFinishChange.call(u, u.getValue())
            }
            s.superclass.call(this, e, n, {
                min: o,
                max: i,
                step: a
            });
            var u = this;
            this.__background = document.createElement('div'),
                this.__foreground = document.createElement('div'),
                t.bind(this.__background, 'mousedown', l),
                t.addClass(this.__background, 'slider'),
                t.addClass(this.__foreground, 'slider-fg'),
                this.updateDisplay(),
                this.__background.appendChild(this.__foreground),
                this.domElement.appendChild(this.__background)
        };
        return s.superclass = e,
            s.useDefaultStyles = function () {
                n.inject(i)
            },
            o.extend(s.prototype, e.prototype, {
                updateDisplay: function () {
                    var e = (this.getValue() - this.__min) / (this.__max - this.__min);
                    return this.__foreground.style.width = 100 * e + '%',
                        s.superclass.prototype.updateDisplay.call(this)
                }
            }),
            s
    }(dat.controllers.NumberController, dat.dom.dom, dat.utils.css, dat.utils.common, '/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: \'\';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}'),
    dat.controllers.FunctionController = function (e, t, n) {
        var o = function (e, n, i) {
            o.superclass.call(this, e, n);
            var r = this;
            this.__button = document.createElement('div'),
                this.__button.innerHTML = void 0 === i ? 'Fire' : i,
                t.bind(this.__button, 'click', function (e) {
                    return e.preventDefault(),
                        r.fire(),
                        !1
                }),
                t.addClass(this.__button, 'button'),
                this.domElement.appendChild(this.__button)
        };
        return o.superclass = e,
            n.extend(o.prototype, e.prototype, {
                fire: function () {
                    this.__onChange && this.__onChange.call(this),
                    this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()),
                        this.getValue().call(this.object)
                }
            }),
            o
    }(dat.controllers.Controller, dat.dom.dom, dat.utils.common),
    dat.controllers.BooleanController = function (e, t, n) {
        var o = function (e, n) {
            function i() {
                r.setValue(!r.__prev)
            }
            o.superclass.call(this, e, n);
            var r = this;
            this.__prev = this.getValue(),
                this.__checkbox = document.createElement('input'),
                this.__checkbox.setAttribute('type', 'checkbox'),
                t.bind(this.__checkbox, 'change', i, !1),
                this.domElement.appendChild(this.__checkbox),
                this.updateDisplay()
        };
        return o.superclass = e,
            n.extend(o.prototype, e.prototype, {
                setValue: function (e) {
                    var t = o.superclass.prototype.setValue.call(this, e);
                    return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()),
                        this.__prev = this.getValue(),
                        t
                },
                updateDisplay: function () {
                    return this.getValue() === !0 ? (this.__checkbox.setAttribute('checked', 'checked'), this.__checkbox.checked = !0)  : this.__checkbox.checked = !1,
                        o.superclass.prototype.updateDisplay.call(this)
                }
            }),
            o
    }(dat.controllers.Controller, dat.dom.dom, dat.utils.common),
    dat.color.toString = function (e) {
        return function (t) {
            if (1 == t.a || e.isUndefined(t.a)) {
                for (var n = t.hex.toString(16); n.length < 6; ) n = '0' + n;
                return '#' + n
            }
            return 'rgba(' + Math.round(t.r) + ',' + Math.round(t.g) + ',' + Math.round(t.b) + ',' + t.a + ')'
        }
    }(dat.utils.common),
    dat.color.interpret = function (e, t) {
        var n,
            o,
            i = function () {
                o = !1;
                var e = arguments.length > 1 ? t.toArray(arguments)  : arguments[0];
                return t.each(r, function (i) {
                    return i.litmus(e) ? (t.each(i.conversions, function (i, r) {
                        return n = i.read(e),
                            o === !1 && n !== !1 ? (o = n, n.conversionName = r, n.conversion = i, t.BREAK)  : void 0
                    }), t.BREAK)  : void 0
                }),
                    o
            },
            r = [
                {
                    litmus: t.isString,
                    conversions: {
                        THREE_CHAR_HEX: {
                            read: function (e) {
                                var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                                return null === t ? !1 : {
                                    space: 'HEX',
                                    hex: parseInt('0x' + t[1].toString() + t[1].toString() + t[2].toString() + t[2].toString() + t[3].toString() + t[3].toString())
                                }
                            },
                            write: e
                        },
                        SIX_CHAR_HEX: {
                            read: function (e) {
                                var t = e.match(/^#([A-F0-9]{6})$/i);
                                return null === t ? !1 : {
                                    space: 'HEX',
                                    hex: parseInt('0x' + t[1].toString())
                                }
                            },
                            write: e
                        },
                        CSS_RGB: {
                            read: function (e) {
                                var t = e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                                return null === t ? !1 : {
                                    space: 'RGB',
                                    r: parseFloat(t[1]),
                                    g: parseFloat(t[2]),
                                    b: parseFloat(t[3])
                                }
                            },
                            write: e
                        },
                        CSS_RGBA: {
                            read: function (e) {
                                var t = e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);
                                return null === t ? !1 : {
                                    space: 'RGB',
                                    r: parseFloat(t[1]),
                                    g: parseFloat(t[2]),
                                    b: parseFloat(t[3]),
                                    a: parseFloat(t[4])
                                }
                            },
                            write: e
                        }
                    }
                },
                {
                    litmus: t.isNumber,
                    conversions: {
                        HEX: {
                            read: function (e) {
                                return {
                                    space: 'HEX',
                                    hex: e,
                                    conversionName: 'HEX'
                                }
                            },
                            write: function (e) {
                                return e.hex
                            }
                        }
                    }
                },
                {
                    litmus: t.isArray,
                    conversions: {
                        RGB_ARRAY: {
                            read: function (e) {
                                return 3 != e.length ? !1 : {
                                    space: 'RGB',
                                    r: e[0],
                                    g: e[1],
                                    b: e[2]
                                }
                            },
                            write: function (e) {
                                return [e.r,
                                    e.g,
                                    e.b]
                            }
                        },
                        RGBA_ARRAY: {
                            read: function (e) {
                                return 4 != e.length ? !1 : {
                                    space: 'RGB',
                                    r: e[0],
                                    g: e[1],
                                    b: e[2],
                                    a: e[3]
                                }
                            },
                            write: function (e) {
                                return [e.r,
                                    e.g,
                                    e.b,
                                    e.a]
                            }
                        }
                    }
                },
                {
                    litmus: t.isObject,
                    conversions: {
                        RGBA_OBJ: {
                            read: function (e) {
                                return t.isNumber(e.r) && t.isNumber(e.g) && t.isNumber(e.b) && t.isNumber(e.a) ? {
                                    space: 'RGB',
                                    r: e.r,
                                    g: e.g,
                                    b: e.b,
                                    a: e.a
                                }
                                    : !1
                            },
                            write: function (e) {
                                return {
                                    r: e.r,
                                    g: e.g,
                                    b: e.b,
                                    a: e.a
                                }
                            }
                        },
                        RGB_OBJ: {
                            read: function (e) {
                                return t.isNumber(e.r) && t.isNumber(e.g) && t.isNumber(e.b) ? {
                                    space: 'RGB',
                                    r: e.r,
                                    g: e.g,
                                    b: e.b
                                }
                                    : !1
                            },
                            write: function (e) {
                                return {
                                    r: e.r,
                                    g: e.g,
                                    b: e.b
                                }
                            }
                        },
                        HSVA_OBJ: {
                            read: function (e) {
                                return t.isNumber(e.h) && t.isNumber(e.s) && t.isNumber(e.v) && t.isNumber(e.a) ? {
                                    space: 'HSV',
                                    h: e.h,
                                    s: e.s,
                                    v: e.v,
                                    a: e.a
                                }
                                    : !1
                            },
                            write: function (e) {
                                return {
                                    h: e.h,
                                    s: e.s,
                                    v: e.v,
                                    a: e.a
                                }
                            }
                        },
                        HSV_OBJ: {
                            read: function (e) {
                                return t.isNumber(e.h) && t.isNumber(e.s) && t.isNumber(e.v) ? {
                                    space: 'HSV',
                                    h: e.h,
                                    s: e.s,
                                    v: e.v
                                }
                                    : !1
                            },
                            write: function (e) {
                                return {
                                    h: e.h,
                                    s: e.s,
                                    v: e.v
                                }
                            }
                        }
                    }
                }
            ];
        return i
    }(dat.color.toString, dat.utils.common),
    dat.GUI = dat.gui.GUI = function (e, t, n, o, i, r, s, a, l, d, c, u, h, _, p) {
        function f(e, t, n, r) {
            if (void 0 === t[n]) throw new Error('Object ' + t + ' has no property "' + n + '"');
            var s;
            if (r.color) s = new c(t, n);
            else {
                var a = [
                    t,
                    n
                ].concat(r.factoryArgs);
                s = o.apply(e, a)
            }
            r.before instanceof i && (r.before = r.before.__li),
                b(e, s),
                _.addClass(s.domElement, 'c');
            var l = document.createElement('span');
            _.addClass(l, 'property-name'),
                l.innerHTML = s.property;
            var d = document.createElement('div');
            d.appendChild(l),
                d.appendChild(s.domElement);
            var u = m(e, d, r.before);
            return _.addClass(u, H.CLASS_CONTROLLER_ROW),
                _.addClass(u, typeof s.getValue()),
                g(e, u, s),
                e.__controllers.push(s),
                s
        }
        function m(e, t, n) {
            var o = document.createElement('li');
            return t && o.appendChild(t),
                n ? e.__ul.insertBefore(o, params.before)  : e.__ul.appendChild(o),
                e.onResize(),
                o
        }
        function g(e, t, n) {
            if (n.__li = t, n.__gui = e, p.extend(n, {
                    options: function (t) {
                        return arguments.length > 1 ? (n.remove(), f(e, n.object, n.property, {
                            before: n.__li.nextElementSibling,
                            factoryArgs: [
                                p.toArray(arguments)
                            ]
                        }))  : p.isArray(t) || p.isObject(t) ? (n.remove(), f(e, n.object, n.property, {
                            before: n.__li.nextElementSibling,
                            factoryArgs: [
                                t
                            ]
                        }))  : void 0
                    },
                    name: function (e) {
                        return n.__li.firstElementChild.firstElementChild.innerHTML = e,
                            n
                    },
                    listen: function () {
                        return n.__gui.listen(n),
                            n
                    },
                    remove: function () {
                        return n.__gui.remove(n),
                            n
                    }
                }), n instanceof l) {
                var o = new a(n.object, n.property, {
                    min: n.__min,
                    max: n.__max,
                    step: n.__step
                });
                p.each(['updateDisplay',
                    'onChange',
                    'onFinishChange'], function (e) {
                    var t = n[e],
                        i = o[e];
                    n[e] = o[e] = function () {
                        var e = Array.prototype.slice.call(arguments);
                        return t.apply(n, e),
                            i.apply(o, e)
                    }
                }),
                    _.addClass(t, 'has-slider'),
                    n.domElement.insertBefore(o.domElement, n.domElement.firstElementChild)
            } else if (n instanceof a) {
                var i = function (t) {
                    return p.isNumber(n.__min) && p.isNumber(n.__max) ? (n.remove(), f(e, n.object, n.property, {
                        before: n.__li.nextElementSibling,
                        factoryArgs: [
                            n.__min,
                            n.__max,
                            n.__step
                        ]
                    }))  : t
                };
                n.min = p.compose(i, n.min),
                    n.max = p.compose(i, n.max)
            } else n instanceof r ? (_.bind(t, 'click', function () {
                _.fakeEvent(n.__checkbox, 'click')
            }), _.bind(n.__checkbox, 'click', function (e) {
                e.stopPropagation()
            }))  : n instanceof s ? (_.bind(t, 'click', function () {
                _.fakeEvent(n.__button, 'click')
            }), _.bind(t, 'mouseover', function () {
                _.addClass(n.__button, 'hover')
            }), _.bind(t, 'mouseout', function () {
                _.removeClass(n.__button, 'hover')
            }))  : n instanceof c && (_.addClass(t, 'color'), n.updateDisplay = p.compose(function (e) {
                return t.style.borderLeftColor = n.__color.toString(),
                    e
            }, n.updateDisplay), n.updateDisplay());
            n.setValue = p.compose(function (t) {
                return e.getRoot().__preset_select && n.isModified() && k(e.getRoot(), !0),
                    t
            }, n.setValue)
        }
        function b(e, t) {
            var n = e.getRoot(),
                o = n.__rememberedObjects.indexOf(t.object);
            if ( - 1 != o) {
                var i = n.__rememberedObjectIndecesToControllers[o];
                if (void 0 === i && (i = {
                    }, n.__rememberedObjectIndecesToControllers[o] = i), i[t.property] = t, n.load && n.load.remembered) {
                    var r,
                        s = n.load.remembered;
                    if (s[e.preset]) r = s[e.preset];
                    else {
                        if (!s[B]) return;
                        r = s[B]
                    }
                    if (r[o] && void 0 !== r[o][t.property]) {
                        var a = r[o][t.property];
                        t.initialValue = a,
                            t.setValue(a)
                    }
                }
            }
        }
        function v(e, t) {
            return document.location.href + '.' + t
        }
        function y(e) {
            function t() {
                d.style.display = e.useLocalStorage ? 'block' : 'none'
            }
            var n = e.__save_row = document.createElement('li');
            _.addClass(e.domElement, 'has-save'),
                e.__ul.insertBefore(n, e.__ul.firstChild),
                _.addClass(n, 'save-row');
            var o = document.createElement('span');
            o.innerHTML = '&nbsp;',
                _.addClass(o, 'button gears');
            var i = document.createElement('span');
            i.innerHTML = 'Save',
                _.addClass(i, 'button'),
                _.addClass(i, 'save');
            var r = document.createElement('span');
            r.innerHTML = 'New',
                _.addClass(r, 'button'),
                _.addClass(r, 'save-as');
            var s = document.createElement('span');
            s.innerHTML = 'Revert',
                _.addClass(s, 'button'),
                _.addClass(s, 'revert');
            var a = e.__preset_select = document.createElement('select');
            if (e.load && e.load.remembered ? p.each(e.load.remembered, function (t, n) {
                    E(e, n, n == e.preset)
                })  : E(e, B, !1), _.bind(a, 'change', function () {
                    for (var t = 0; t < e.__preset_select.length; t++) e.__preset_select[t].innerHTML = e.__preset_select[t].value;
                    e.preset = this.value
                }), n.appendChild(a), n.appendChild(o), n.appendChild(i), n.appendChild(r), n.appendChild(s), D) {
                var l = document.getElementById('dg-save-locally'),
                    d = document.getElementById('dg-local-explain');
                l.style.display = 'block';
                var c = document.getElementById('dg-local-storage');
                'true' === localStorage.getItem(v(e, 'isLocal')) && c.setAttribute('checked', 'checked'),
                    t(),
                    _.bind(c, 'change', function () {
                        e.useLocalStorage = !e.useLocalStorage,
                            t()
                    })
            }
            var u = document.getElementById('dg-new-constructor');
            _.bind(u, 'keydown', function (e) {
                !e.metaKey || 67 !== e.which && 67 != e.keyCode || O.hide()
            }),
                _.bind(o, 'click', function () {
                    u.innerHTML = JSON.stringify(e.getSaveObject(), void 0, 2),
                        O.show(),
                        u.focus(),
                        u.select()
                }),
                _.bind(i, 'click', function () {
                    e.save()
                }),
                _.bind(r, 'click', function () {
                    var t = prompt('Enter a new preset name.');
                    t && e.saveAs(t)
                }),
                _.bind(s, 'click', function () {
                    e.revert()
                })
        }
        function x(e) {
            function t(t) {
                return t.preventDefault(),
                    i = t.clientX,
                    _.addClass(e.__closeButton, H.CLASS_DRAG),
                    _.bind(window, 'mousemove', n),
                    _.bind(window, 'mouseup', o),
                    !1
            }
            function n(t) {
                return t.preventDefault(),
                    e.width += i - t.clientX,
                    e.onResize(),
                    i = t.clientX,
                    !1
            }
            function o() {
                _.removeClass(e.__closeButton, H.CLASS_DRAG),
                    _.unbind(window, 'mousemove', n),
                    _.unbind(window, 'mouseup', o)
            }
            e.__resize_handle = document.createElement('div'),
                p.extend(e.__resize_handle.style, {
                    width: '6px',
                    marginLeft: '-3px',
                    height: '200px',
                    cursor: 'ew-resize',
                    position: 'absolute'
                });
            var i;
            _.bind(e.__resize_handle, 'mousedown', t),
                _.bind(e.__closeButton, 'mousedown', t),
                e.domElement.insertBefore(e.__resize_handle, e.domElement.firstElementChild)
        }
        function w(e, t) {
            e.domElement.style.width = t + 'px',
            e.__save_row && e.autoPlace && (e.__save_row.style.width = t + 'px'),
            e.__closeButton && (e.__closeButton.style.width = t + 'px')
        }
        function C(e, t) {
            var n = {
            };
            return p.each(e.__rememberedObjects, function (o, i) {
                var r = {
                    },
                    s = e.__rememberedObjectIndecesToControllers[i];
                p.each(s, function (e, n) {
                    r[n] = t ? e.initialValue : e.getValue()
                }),
                    n[i] = r
            }),
                n
        }
        function E(e, t, n) {
            var o = document.createElement('option');
            o.innerHTML = t,
                o.value = t,
                e.__preset_select.appendChild(o),
            n && (e.__preset_select.selectedIndex = e.__preset_select.length - 1)
        }
        function A(e) {
            for (var t = 0; t < e.__preset_select.length; t++) e.__preset_select[t].value == e.preset && (e.__preset_select.selectedIndex = t)
        }
        function k(e, t) {
            var n = e.__preset_select[e.__preset_select.selectedIndex];
            n.innerHTML = t ? n.value + '*' : n.value
        }
        function S(e) {
            0 != e.length && u(function () {
                S(e)
            }),
                p.each(e, function (e) {
                    e.updateDisplay()
                })
        }
        e.inject(n);
        var O,
            T,
            L = 'dg',
            N = 72,
            R = 20,
            B = 'Default',
            D = function () {
                try {
                    return 'localStorage' in window && null !== window.localStorage
                } catch (e) {
                    return !1
                }
            }(),
            F = !0,
            V = !1,
            I = [
            ],
            H = function (e) {
                function t() {
                    var e = n.getRoot();
                    e.width += 1,
                        p.defer(function () {
                            e.width -= 1
                        })
                }
                var n = this;
                this.domElement = document.createElement('div'),
                    this.__ul = document.createElement('ul'),
                    this.domElement.appendChild(this.__ul),
                    _.addClass(this.domElement, L),
                    this.__folders = {
                    },
                    this.__controllers = [
                    ],
                    this.__rememberedObjects = [
                    ],
                    this.__rememberedObjectIndecesToControllers = [
                    ],
                    this.__listening = [
                    ],
                    e = e || {
                        },
                    e = p.defaults(e, {
                        autoPlace: !0,
                        width: H.DEFAULT_WIDTH
                    }),
                    e = p.defaults(e, {
                        resizable: e.autoPlace,
                        hideable: e.autoPlace
                    }),
                    p.isUndefined(e.load) ? e.load = {
                        preset: B
                    }
                        : e.preset && (e.load.preset = e.preset),
                p.isUndefined(e.parent) && e.hideable && I.push(this),
                    e.resizable = p.isUndefined(e.parent) && e.resizable,
                e.autoPlace && p.isUndefined(e.scrollable) && (e.scrollable = !0);
                var o,
                    i = D && 'true' === localStorage.getItem(v(this, 'isLocal'));
                if (Object.defineProperties(this, {
                        parent: {
                            get: function () {
                                return e.parent
                            }
                        },
                        scrollable: {
                            get: function () {
                                return e.scrollable
                            }
                        },
                        autoPlace: {
                            get: function () {
                                return e.autoPlace
                            }
                        },
                        preset: {
                            get: function () {
                                return n.parent ? n.getRoot().preset : e.load.preset
                            },
                            set: function (t) {
                                n.parent ? n.getRoot().preset = t : e.load.preset = t,
                                    A(this),
                                    n.revert()
                            }
                        },
                        width: {
                            get: function () {
                                return e.width
                            },
                            set: function (t) {
                                e.width = t,
                                    w(n, t)
                            }
                        },
                        name: {
                            get: function () {
                                return e.name
                            },
                            set: function (t) {
                                e.name = t,
                                s && (s.innerHTML = e.name)
                            }
                        },
                        closed: {
                            get: function () {
                                return e.closed
                            },
                            set: function (t) {
                                e.closed = t,
                                    e.closed ? _.addClass(n.__ul, H.CLASS_CLOSED)  : _.removeClass(n.__ul, H.CLASS_CLOSED),
                                    this.onResize(),
                                n.__closeButton && (n.__closeButton.innerHTML = t ? H.TEXT_OPEN : H.TEXT_CLOSED)
                            }
                        },
                        load: {
                            get: function () {
                                return e.load
                            }
                        },
                        useLocalStorage: {
                            get: function () {
                                return i
                            },
                            set: function (e) {
                                D && (i = e, e ? _.bind(window, 'unload', o)  : _.unbind(window, 'unload', o), localStorage.setItem(v(n, 'isLocal'), e))
                            }
                        }
                    }), p.isUndefined(e.parent)) {
                    if (e.closed = !1, _.addClass(this.domElement, H.CLASS_MAIN), _.makeSelectable(this.domElement, !1), D && i) {
                        n.useLocalStorage = !0;
                        var r = localStorage.getItem(v(this, 'gui'));
                        r && (e.load = JSON.parse(r))
                    }
                    this.__closeButton = document.createElement('div'),
                        this.__closeButton.innerHTML = H.TEXT_CLOSED,
                        _.addClass(this.__closeButton, H.CLASS_CLOSE_BUTTON),
                        this.domElement.appendChild(this.__closeButton),
                        _.bind(this.__closeButton, 'click', function () {
                            n.closed = !n.closed
                        })
                } else {
                    void 0 === e.closed && (e.closed = !0);
                    var s = document.createTextNode(e.name);
                    _.addClass(s, 'controller-name');
                    var a = m(n, s),
                        l = function (e) {
                            return e.preventDefault(),
                                n.closed = !n.closed,
                                !1
                        };
                    _.addClass(this.__ul, H.CLASS_CLOSED),
                        _.addClass(a, 'title'),
                        _.bind(a, 'click', l),
                    e.closed || (this.closed = !1)
                }
                e.autoPlace && (p.isUndefined(e.parent) && (F && (T = document.createElement('div'), _.addClass(T, L), _.addClass(T, H.CLASS_AUTO_PLACE_CONTAINER), document.body.appendChild(T), F = !1), T.appendChild(this.domElement), _.addClass(this.domElement, H.CLASS_AUTO_PLACE)), this.parent || w(n, e.width)),
                    _.bind(window, 'resize', function () {
                        n.onResize()
                    }),
                    _.bind(this.__ul, 'webkitTransitionEnd', function () {
                        n.onResize()
                    }),
                    _.bind(this.__ul, 'transitionend', function () {
                        n.onResize()
                    }),
                    _.bind(this.__ul, 'oTransitionEnd', function () {
                        n.onResize()
                    }),
                    this.onResize(),
                e.resizable && x(this),
                    o = function () {
                        D && 'true' === localStorage.getItem(v(n, 'isLocal')) && localStorage.setItem(v(n, 'gui'), JSON.stringify(n.getSaveObject()))
                    },
                    this.saveToLocalStorageIfPossible = o;
                n.getRoot();
                e.parent || t()
            };
        return H.toggleHide = function () {
            V = !V,
                p.each(I, function (e) {
                    e.domElement.style.zIndex = V ? - 999 : 999,
                        e.domElement.style.opacity = V ? 0 : 1
                })
        },
            H.CLASS_AUTO_PLACE = 'a',
            H.CLASS_AUTO_PLACE_CONTAINER = 'ac',
            H.CLASS_MAIN = 'main',
            H.CLASS_CONTROLLER_ROW = 'cr',
            H.CLASS_TOO_TALL = 'taller-than-window',
            H.CLASS_CLOSED = 'closed',
            H.CLASS_CLOSE_BUTTON = 'close-button',
            H.CLASS_DRAG = 'drag',
            H.DEFAULT_WIDTH = 245,
            H.TEXT_CLOSED = 'Close Controls',
            H.TEXT_OPEN = 'Open Controls',
            _.bind(window, 'keydown', function (e) {
                'text' === document.activeElement.type || e.which !== N && e.keyCode != N || H.toggleHide()
            }, !1),
            p.extend(H.prototype, {
                add: function (e, t) {
                    return f(this, e, t, {
                        factoryArgs: Array.prototype.slice.call(arguments, 2)
                    })
                },
                addColor: function (e, t) {
                    return f(this, e, t, {
                        color: !0
                    })
                },
                remove: function (e) {
                    this.__ul.removeChild(e.__li),
                        this.__controllers.slice(this.__controllers.indexOf(e), 1);
                    var t = this;
                    p.defer(function () {
                        t.onResize()
                    })
                },
                destroy: function () {
                    this.autoPlace && T.removeChild(this.domElement)
                },
                addFolder: function (e) {
                    if (void 0 !== this.__folders[e]) throw new Error('You already have a folder in this GUI by the name "' + e + '"');
                    var t = {
                        name: e,
                        parent: this
                    };
                    t.autoPlace = this.autoPlace,
                    this.load && this.load.folders && this.load.folders[e] && (t.closed = this.load.folders[e].closed, t.load = this.load.folders[e]);
                    var n = new H(t);
                    this.__folders[e] = n;
                    var o = m(this, n.domElement);
                    return _.addClass(o, 'folder'),
                        n
                },
                open: function () {
                    this.closed = !1
                },
                close: function () {
                    this.closed = !0
                },
                onResize: function () {
                    var e = this.getRoot();
                    if (e.scrollable) {
                        var t = _.getOffset(e.__ul).top,
                            n = 0;
                        p.each(e.__ul.childNodes, function (t) {
                            e.autoPlace && t === e.__save_row || (n += _.getHeight(t))
                        }),
                            window.innerHeight - t - R < n ? (_.addClass(e.domElement, H.CLASS_TOO_TALL), e.__ul.style.height = window.innerHeight - t - R + 'px')  : (_.removeClass(e.domElement, H.CLASS_TOO_TALL), e.__ul.style.height = 'auto')
                    }
                    e.__resize_handle && p.defer(function () {
                        e.__resize_handle.style.height = e.__ul.offsetHeight + 'px'
                    }),
                    e.__closeButton && (e.__closeButton.style.width = e.width + 'px')
                },
                remember: function () {
                    if (p.isUndefined(O) && (O = new h, O.domElement.innerHTML = t), this.parent) throw new Error('You can only call remember on a top level GUI.');
                    var e = this;
                    p.each(Array.prototype.slice.call(arguments), function (t) {
                        0 == e.__rememberedObjects.length && y(e),
                        - 1 == e.__rememberedObjects.indexOf(t) && e.__rememberedObjects.push(t)
                    }),
                    this.autoPlace && w(this, this.width)
                },
                getRoot: function () {
                    for (var e = this; e.parent; ) e = e.parent;
                    return e
                },
                getSaveObject: function () {
                    var e = this.load;
                    return e.closed = this.closed,
                    this.__rememberedObjects.length > 0 && (e.preset = this.preset, e.remembered || (e.remembered = {
                    }), e.remembered[this.preset] = C(this)),
                        e.folders = {
                        },
                        p.each(this.__folders, function (t, n) {
                            e.folders[n] = t.getSaveObject()
                        }),
                        e
                },
                save: function () {
                    this.load.remembered || (this.load.remembered = {
                    }),
                        this.load.remembered[this.preset] = C(this),
                        k(this, !1),
                        this.saveToLocalStorageIfPossible()
                },
                saveAs: function (e) {
                    this.load.remembered || (this.load.remembered = {
                    }, this.load.remembered[B] = C(this, !0)),
                        this.load.remembered[e] = C(this),
                        this.preset = e,
                        E(this, e, !0),
                        this.saveToLocalStorageIfPossible()
                },
                revert: function (e) {
                    p.each(this.__controllers, function (t) {
                        this.getRoot().load.remembered ? b(e || this.getRoot(), t)  : t.setValue(t.initialValue)
                    }, this),
                        p.each(this.__folders, function (e) {
                            e.revert(e)
                        }),
                    e || k(this.getRoot(), !1)
                },
                listen: function (e) {
                    var t = 0 == this.__listening.length;
                    this.__listening.push(e),
                    t && S(this.__listening)
                }
            }),
            H
    }(dat.utils.css, '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>', '.dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI\'s */\n  /* Line items that don\'t contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don\'t hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px \'Lucida Grande\', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n', dat.controllers.factory = function (e, t, n, o, i, r, s) {
        return function (a, l) {
            var d = a[l];
            return s.isArray(arguments[2]) || s.isObject(arguments[2]) ? new e(a, l, arguments[2])  : s.isNumber(d) ? s.isNumber(arguments[2]) && s.isNumber(arguments[3]) ? new n(a, l, arguments[2], arguments[3])  : new t(a, l, {
                min: arguments[2],
                max: arguments[3]
            })  : s.isString(d) ? new o(a, l)  : s.isFunction(d) ? new i(a, l, '')  : s.isBoolean(d) ? new r(a, l)  : void 0
        }
    }(dat.controllers.OptionController, dat.controllers.NumberControllerBox, dat.controllers.NumberControllerSlider, dat.controllers.StringController = function (e, t, n) {
        var o = function (e, n) {
            function i() {
                s.setValue(s.__input.value)
            }
            function r() {
                s.__onFinishChange && s.__onFinishChange.call(s, s.getValue())
            }
            o.superclass.call(this, e, n);
            var s = this;
            this.__input = document.createElement('input'),
                this.__input.setAttribute('type', 'text'),
                t.bind(this.__input, 'keyup', i),
                t.bind(this.__input, 'change', i),
                t.bind(this.__input, 'blur', r),
                t.bind(this.__input, 'keydown', function (e) {
                    13 === e.keyCode && this.blur()
                }),
                this.updateDisplay(),
                this.domElement.appendChild(this.__input)
        };
        return o.superclass = e,
            n.extend(o.prototype, e.prototype, {
                updateDisplay: function () {
                    return t.isActive(this.__input) || (this.__input.value = this.getValue()),
                        o.superclass.prototype.updateDisplay.call(this)
                }
            }),
            o
    }(dat.controllers.Controller, dat.dom.dom, dat.utils.common), dat.controllers.FunctionController, dat.controllers.BooleanController, dat.utils.common), dat.controllers.Controller, dat.controllers.BooleanController, dat.controllers.FunctionController, dat.controllers.NumberControllerBox, dat.controllers.NumberControllerSlider, dat.controllers.OptionController, dat.controllers.ColorController = function (e, t, n, o, i) {
        function r(e, t, n, o) {
            e.style.background = '',
                i.each(l, function (i) {
                    e.style.cssText += 'background: ' + i + 'linear-gradient(' + t + ', ' + n + ' 0%, ' + o + ' 100%); '
                })
        }
        function s(e) {
            e.style.background = '',
                e.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);',
                e.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);',
                e.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);',
                e.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);',
                e.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'
        }
        var a = function (e, l) {
            function d(e) {
                _(e),
                    t.bind(window, 'mousemove', _),
                    t.bind(window, 'mouseup', c)
            }
            function c() {
                t.unbind(window, 'mousemove', _),
                    t.unbind(window, 'mouseup', c)
            }
            function u() {
                var e = o(this.value);
                e !== !1 ? (f.__color.__state = e, f.setValue(f.__color.toOriginal()))  : this.value = f.__color.toString()
            }
            function h() {
                t.unbind(window, 'mousemove', p),
                    t.unbind(window, 'mouseup', h)
            }
            function _(e) {
                e.preventDefault();
                var n = t.getWidth(f.__saturation_field),
                    o = t.getOffset(f.__saturation_field),
                    i = (e.clientX - o.left + document.body.scrollLeft) / n,
                    r = 1 - (e.clientY - o.top + document.body.scrollTop) / n;
                return r > 1 ? r = 1 : 0 > r && (r = 0),
                    i > 1 ? i = 1 : 0 > i && (i = 0),
                    f.__color.v = r,
                    f.__color.s = i,
                    f.setValue(f.__color.toOriginal()),
                    !1
            }
            function p(e) {
                e.preventDefault();
                var n = t.getHeight(f.__hue_field),
                    o = t.getOffset(f.__hue_field),
                    i = 1 - (e.clientY - o.top + document.body.scrollTop) / n;
                return i > 1 ? i = 1 : 0 > i && (i = 0),
                    f.__color.h = 360 * i,
                    f.setValue(f.__color.toOriginal()),
                    !1
            }
            a.superclass.call(this, e, l),
                this.__color = new n(this.getValue()),
                this.__temp = new n(0);
            var f = this;
            this.domElement = document.createElement('div'),
                t.makeSelectable(this.domElement, !1),
                this.__selector = document.createElement('div'),
                this.__selector.className = 'selector',
                this.__saturation_field = document.createElement('div'),
                this.__saturation_field.className = 'saturation-field',
                this.__field_knob = document.createElement('div'),
                this.__field_knob.className = 'field-knob',
                this.__field_knob_border = '2px solid ',
                this.__hue_knob = document.createElement('div'),
                this.__hue_knob.className = 'hue-knob',
                this.__hue_field = document.createElement('div'),
                this.__hue_field.className = 'hue-field',
                this.__input = document.createElement('input'),
                this.__input.type = 'text',
                this.__input_textShadow = '0 1px 1px ',
                t.bind(this.__input, 'keydown', function (e) {
                    13 === e.keyCode && u.call(this)
                }),
                t.bind(this.__input, 'blur', u),
                t.bind(this.__selector, 'mousedown', function (e) {
                    t.addClass(this, 'drag').bind(window, 'mouseup', function (e) {
                        t.removeClass(f.__selector, 'drag')
                    })
                });
            var m = document.createElement('div');
            i.extend(this.__selector.style, {
                width: '122px',
                height: '102px',
                padding: '3px',
                backgroundColor: '#222',
                boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'
            }),
                i.extend(this.__field_knob.style, {
                    position: 'absolute',
                    width: '12px',
                    height: '12px',
                    border: this.__field_knob_border + (this.__color.v < 0.5 ? '#fff' : '#000'),
                    boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',
                    borderRadius: '12px',
                    zIndex: 1
                }),
                i.extend(this.__hue_knob.style, {
                    position: 'absolute',
                    width: '15px',
                    height: '2px',
                    borderRight: '4px solid #fff',
                    zIndex: 1
                }),
                i.extend(this.__saturation_field.style, {
                    width: '100px',
                    height: '100px',
                    border: '1px solid #555',
                    marginRight: '3px',
                    display: 'inline-block',
                    cursor: 'pointer'
                }),
                i.extend(m.style, {
                    width: '100%',
                    height: '100%',
                    background: 'none'
                }),
                r(m, 'top', 'rgba(0,0,0,0)', '#000'),
                i.extend(this.__hue_field.style, {
                    width: '15px',
                    height: '100px',
                    display: 'inline-block',
                    border: '1px solid #555',
                    cursor: 'ns-resize'
                }),
                s(this.__hue_field),
                i.extend(this.__input.style, {
                    outline: 'none',
                    textAlign: 'center',
                    color: '#fff',
                    border: 0,
                    fontWeight: 'bold',
                    textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'
                }),
                t.bind(this.__saturation_field, 'mousedown', d),
                t.bind(this.__field_knob, 'mousedown', d),
                t.bind(this.__hue_field, 'mousedown', function (e) {
                    p(e),
                        t.bind(window, 'mousemove', p),
                        t.bind(window, 'mouseup', h)
                }),
                this.__saturation_field.appendChild(m),
                this.__selector.appendChild(this.__field_knob),
                this.__selector.appendChild(this.__saturation_field),
                this.__selector.appendChild(this.__hue_field),
                this.__hue_field.appendChild(this.__hue_knob),
                this.domElement.appendChild(this.__input),
                this.domElement.appendChild(this.__selector),
                this.updateDisplay()
        };
        a.superclass = e,
            i.extend(a.prototype, e.prototype, {
                updateDisplay: function () {
                    var e = o(this.getValue());
                    if (e !== !1) {
                        var t = !1;
                        i.each(n.COMPONENTS, function (n) {
                            return i.isUndefined(e[n]) || i.isUndefined(this.__color.__state[n]) || e[n] === this.__color.__state[n] ? void 0 : (t = !0, {
                            })
                        }, this),
                        t && i.extend(this.__color.__state, e)
                    }
                    i.extend(this.__temp.__state, this.__color.__state),
                        this.__temp.a = 1;
                    var s = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0,
                        a = 255 - s;
                    i.extend(this.__field_knob.style, {
                        marginLeft: 100 * this.__color.s - 7 + 'px',
                        marginTop: 100 * (1 - this.__color.v) - 7 + 'px',
                        backgroundColor: this.__temp.toString(),
                        border: this.__field_knob_border + 'rgb(' + s + ',' + s + ',' + s + ')'
                    }),
                        this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + 'px',
                        this.__temp.s = 1,
                        this.__temp.v = 1,
                        r(this.__saturation_field, 'left', '#fff', this.__temp.toString()),
                        i.extend(this.__input.style, {
                            backgroundColor: this.__input.value = this.__color.toString(),
                            color: 'rgb(' + s + ',' + s + ',' + s + ')',
                            textShadow: this.__input_textShadow + 'rgba(' + a + ',' + a + ',' + a + ',.7)'
                        })
                }
            });
        var l = [
            '-moz-',
            '-o-',
            '-webkit-',
            '-ms-',
            ''
        ];
        return a
    }(dat.controllers.Controller, dat.dom.dom, dat.color.Color = function (e, t, n, o) {
        function i(e, t, n) {
            Object.defineProperty(e, t, {
                get: function () {
                    return 'RGB' === this.__state.space ? this.__state[t] : (s(this, t, n), this.__state[t])
                },
                set: function (e) {
                    'RGB' !== this.__state.space && (s(this, t, n), this.__state.space = 'RGB'),
                        this.__state[t] = e
                }
            })
        }
        function r(e, t) {
            Object.defineProperty(e, t, {
                get: function () {
                    return 'HSV' === this.__state.space ? this.__state[t] : (a(this), this.__state[t])
                },
                set: function (e) {
                    'HSV' !== this.__state.space && (a(this), this.__state.space = 'HSV'),
                        this.__state[t] = e
                }
            })
        }
        function s(e, n, i) {
            if ('HEX' === e.__state.space) e.__state[n] = t.component_from_hex(e.__state.hex, i);
            else {
                if ('HSV' !== e.__state.space) throw 'Corrupted color state';
                o.extend(e.__state, t.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v))
            }
        }
        function a(e) {
            var n = t.rgb_to_hsv(e.r, e.g, e.b);
            o.extend(e.__state, {
                s: n.s,
                v: n.v
            }),
                o.isNaN(n.h) ? o.isUndefined(e.__state.h) && (e.__state.h = 0)  : e.__state.h = n.h
        }
        var l = function () {
            if (this.__state = e.apply(this, arguments), this.__state === !1) throw 'Failed to interpret color arguments';
            this.__state.a = this.__state.a || 1
        };
        return l.COMPONENTS = [
            'r',
            'g',
            'b',
            'h',
            's',
            'v',
            'hex',
            'a'
        ],
            o.extend(l.prototype, {
                toString: function () {
                    return n(this)
                },
                toOriginal: function () {
                    return this.__state.conversion.write(this)
                }
            }),
            i(l.prototype, 'r', 2),
            i(l.prototype, 'g', 1),
            i(l.prototype, 'b', 0),
            r(l.prototype, 'h'),
            r(l.prototype, 's'),
            r(l.prototype, 'v'),
            Object.defineProperty(l.prototype, 'a', {
                get: function () {
                    return this.__state.a
                },
                set: function (e) {
                    this.__state.a = e
                }
            }),
            Object.defineProperty(l.prototype, 'hex', {
                get: function () {
                    return 'HEX' !== !this.__state.space && (this.__state.hex = t.rgb_to_hex(this.r, this.g, this.b)),
                        this.__state.hex
                },
                set: function (e) {
                    this.__state.space = 'HEX',
                        this.__state.hex = e
                }
            }),
            l
    }(dat.color.interpret, dat.color.math = function () {
        var e;
        return {
            hsv_to_rgb: function (e, t, n) {
                var o = Math.floor(e / 60) % 6,
                    i = e / 60 - Math.floor(e / 60),
                    r = n * (1 - t),
                    s = n * (1 - i * t),
                    a = n * (1 - (1 - i) * t),
                    l = [
                        [n,
                            a,
                            r],
                        [
                            s,
                            n,
                            r
                        ],
                        [
                            r,
                            n,
                            a
                        ],
                        [
                            r,
                            s,
                            n
                        ],
                        [
                            a,
                            r,
                            n
                        ],
                        [
                            n,
                            r,
                            s
                        ]
                    ][o];
                return {
                    r: 255 * l[0],
                    g: 255 * l[1],
                    b: 255 * l[2]
                }
            },
            rgb_to_hsv: function (e, t, n) {
                var o,
                    i,
                    r = Math.min(e, t, n),
                    s = Math.max(e, t, n),
                    a = s - r;
                return 0 == s ? {
                    h: 0 / 0,
                    s: 0,
                    v: 0
                }
                    : (i = a / s, o = e == s ? (t - n) / a : t == s ? 2 + (n - e) / a : 4 + (e - t) / a, o /= 6, 0 > o && (o += 1), {
                    h: 360 * o,
                    s: i,
                    v: s / 255
                })
            },
            rgb_to_hex: function (e, t, n) {
                var o = this.hex_with_component(0, 2, e);
                return o = this.hex_with_component(o, 1, t),
                    o = this.hex_with_component(o, 0, n)
            },
            component_from_hex: function (e, t) {
                return e >> 8 * t & 255
            },
            hex_with_component: function (t, n, o) {
                return o << (e = 8 * n) | t & ~(255 << e)
            }
        }
    }(), dat.color.toString, dat.utils.common), dat.color.interpret, dat.utils.common), dat.utils.requestAnimationFrame = function () {
        return window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (e, t) {
                window.setTimeout(e, 1000 / 60)
            }
    }(), dat.dom.CenteredDiv = function (e, t) {
        var n = function () {
            this.backgroundElement = document.createElement('div'),
                t.extend(this.backgroundElement.style, {
                    backgroundColor: 'rgba(0,0,0,0.8)',
                    top: 0,
                    left: 0,
                    display: 'none',
                    zIndex: '1000',
                    opacity: 0,
                    WebkitTransition: 'opacity 0.2s linear'
                }),
                e.makeFullscreen(this.backgroundElement),
                this.backgroundElement.style.position = 'fixed',
                this.domElement = document.createElement('div'),
                t.extend(this.domElement.style, {
                    position: 'fixed',
                    display: 'none',
                    zIndex: '1001',
                    opacity: 0,
                    WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear'
                }),
                document.body.appendChild(this.backgroundElement),
                document.body.appendChild(this.domElement);
            var n = this;
            e.bind(this.backgroundElement, 'click', function () {
                n.hide()
            })
        };
        return n.prototype.show = function () {
            var e = this;
            this.backgroundElement.style.display = 'block',
                this.domElement.style.display = 'block',
                this.domElement.style.opacity = 0,
                this.domElement.style.webkitTransform = 'scale(1.1)',
                this.layout(),
                t.defer(function () {
                    e.backgroundElement.style.opacity = 1,
                        e.domElement.style.opacity = 1,
                        e.domElement.style.webkitTransform = 'scale(1)'
                })
        },
            n.prototype.hide = function () {
                var t = this,
                    n = function () {
                        t.domElement.style.display = 'none',
                            t.backgroundElement.style.display = 'none',
                            e.unbind(t.domElement, 'webkitTransitionEnd', n),
                            e.unbind(t.domElement, 'transitionend', n),
                            e.unbind(t.domElement, 'oTransitionEnd', n)
                    };
                e.bind(this.domElement, 'webkitTransitionEnd', n),
                    e.bind(this.domElement, 'transitionend', n),
                    e.bind(this.domElement, 'oTransitionEnd', n),
                    this.backgroundElement.style.opacity = 0,
                    this.domElement.style.opacity = 0,
                    this.domElement.style.webkitTransform = 'scale(1.1)'
            },
            n.prototype.layout = function () {
                this.domElement.style.left = window.innerWidth / 2 - e.getWidth(this.domElement) / 2 + 'px',
                    this.domElement.style.top = window.innerHeight / 2 - e.getHeight(this.domElement) / 2 + 'px'
            },
            n
    }(dat.dom.dom, dat.utils.common), dat.dom.dom, dat.utils.common);
!function (e) {
    'object' == typeof exports ? module.exports = e()  : 'function' == typeof define && define.amd ? define(e)  : 'undefined' != typeof window ? window.JSZip = e()  : 'undefined' != typeof global ? global.JSZip = e()  : 'undefined' != typeof self && (self.JSZip = e())
}(function () {
    return function e(r, t, n) {
        function i(s, o) {
            if (!t[s]) {
                if (!r[s]) {
                    var f = 'function' == typeof require && require;
                    if (!o && f) return f(s, !0);
                    if (a) return a(s, !0);
                    throw new Error('Cannot find module \'' + s + '\'')
                }
                var h = t[s] = {
                    exports: {
                    }
                };
                r[s][0].call(h.exports, function (e) {
                    var t = r[s][1][e];
                    return i(t ? t : e)
                }, h, h.exports, e, r, t, n)
            }
            return t[s].exports
        }
        for (var a = 'function' == typeof require && require, s = 0; s < n.length; s++) i(n[s]);
        return i
    }({
        1: [
            function (e, r, t) {
                'use strict';
                var n = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
                t.encode = function (e) {
                    for (var r, t, i, a, s, o, f, h = '', u = 0; u < e.length; ) r = e.charCodeAt(u++),
                        t = e.charCodeAt(u++),
                        i = e.charCodeAt(u++),
                        a = r >> 2,
                        s = (3 & r) << 4 | t >> 4,
                        o = (15 & t) << 2 | i >> 6,
                        f = 63 & i,
                        isNaN(t) ? o = f = 64 : isNaN(i) && (f = 64),
                        h = h + n.charAt(a) + n.charAt(s) + n.charAt(o) + n.charAt(f);
                    return h
                },
                    t.decode = function (e) {
                        var r,
                            t,
                            i,
                            a,
                            s,
                            o,
                            f,
                            h = '',
                            u = 0;
                        for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ''); u < e.length; ) a = n.indexOf(e.charAt(u++)),
                            s = n.indexOf(e.charAt(u++)),
                            o = n.indexOf(e.charAt(u++)),
                            f = n.indexOf(e.charAt(u++)),
                            r = a << 2 | s >> 4,
                            t = (15 & s) << 4 | o >> 2,
                            i = (3 & o) << 6 | f,
                            h += String.fromCharCode(r),
                        64 != o && (h += String.fromCharCode(t)),
                        64 != f && (h += String.fromCharCode(i));
                        return h
                    }
            },
            {
            }
        ],
        2: [
            function (e, r) {
                'use strict';
                function t() {
                    this.compressedSize = 0,
                        this.uncompressedSize = 0,
                        this.crc32 = 0,
                        this.compressionMethod = null,
                        this.compressedContent = null
                }
                t.prototype = {
                    getContent: function () {
                        return null
                    },
                    getCompressedContent: function () {
                        return null
                    }
                },
                    r.exports = t
            },
            {
            }
        ],
        3: [
            function (e, r, t) {
                'use strict';
                t.STORE = {
                    magic: '\0\0',
                    compress: function (e) {
                        return e
                    },
                    uncompress: function (e) {
                        return e
                    },
                    compressInputType: null,
                    uncompressInputType: null
                },
                    t.DEFLATE = e('./flate')
            },
            {
                './flate': 6
            }
        ],
        4: [
            function (e, r) {
                'use strict';
                function t() {
                    this.data = null,
                        this.length = 0,
                        this.index = 0
                }
                var n = e('./utils');
                t.prototype = {
                    checkOffset: function (e) {
                        this.checkIndex(this.index + e)
                    },
                    checkIndex: function (e) {
                        if (this.length < e || 0 > e) throw new Error('End of data reached (data length = ' + this.length + ', asked index = ' + e + '). Corrupted zip ?')
                    },
                    setIndex: function (e) {
                        this.checkIndex(e),
                            this.index = e
                    },
                    skip: function (e) {
                        this.setIndex(this.index + e)
                    },
                    byteAt: function () {
                    },
                    readInt: function (e) {
                        var r,
                            t = 0;
                        for (this.checkOffset(e), r = this.index + e - 1; r >= this.index; r--) t = (t << 8) + this.byteAt(r);
                        return this.index += e,
                            t
                    },
                    readString: function (e) {
                        return n.transformTo('string', this.readData(e))
                    },
                    readData: function () {
                    },
                    lastIndexOfSignature: function () {
                    },
                    readDate: function () {
                        var e = this.readInt(4);
                        return new Date((e >> 25 & 127) + 1980, (e >> 21 & 15) - 1, e >> 16 & 31, e >> 11 & 31, e >> 5 & 63, (31 & e) << 1)
                    }
                },
                    r.exports = t
            },
            {
                './utils': 14
            }
        ],
        5: [
            function (e, r, t) {
                'use strict';
                t.base64 = !1,
                    t.binary = !1,
                    t.dir = !1,
                    t.date = null,
                    t.compression = null
            },
            {
            }
        ],
        6: [
            function (e, r, t) {
                'use strict';
                var n = 'undefined' != typeof Uint8Array && 'undefined' != typeof Uint16Array && 'undefined' != typeof Uint32Array,
                    i = e('zlibjs/bin/rawdeflate.min').Zlib,
                    a = e('zlibjs/bin/rawinflate.min').Zlib;
                t.uncompressInputType = n ? 'uint8array' : 'array',
                    t.compressInputType = n ? 'uint8array' : 'array',
                    t.magic = '\0',
                    t.compress = function (e) {
                        var r = new i.RawDeflate(e);
                        return r.compress()
                    },
                    t.uncompress = function (e) {
                        var r = new a.RawInflate(e);
                        return r.decompress()
                    }
            },
            {
                'zlibjs/bin/rawdeflate.min': 19,
                'zlibjs/bin/rawinflate.min': 20
            }
        ],
        7: [
            function (e, r) {
                'use strict';
                function t(e, r) {
                    return this instanceof t ? (this.files = {
                    }, this.root = '', e && this.load(e, r), void (this.clone = function () {
                        var e = new t;
                        for (var r in this) 'function' != typeof this[r] && (e[r] = this[r]);
                        return e
                    }))  : new t(e, r)
                }
                t.prototype = e('./object'),
                    t.prototype.load = e('./load'),
                    t.support = e('./support'),
                    t.defaults = e('./defaults'),
                    t.utils = e('./utils'),
                    t.base64 = e('./base64'),
                    t.compressions = e('./compressions'),
                    r.exports = t
            },
            {
                './base64': 1,
                './compressions': 3,
                './defaults': 5,
                './load': 8,
                './object': 9,
                './support': 12,
                './utils': 14
            }
        ],
        8: [
            function (e, r) {
                'use strict';
                var t = e('./base64'),
                    n = e('./zipEntries');
                r.exports = function (e, r) {
                    var i,
                        a,
                        s,
                        o;
                    for (r = r || {
                        }, r.base64 && (e = t.decode(e)), a = new n(e, r), i = a.files, s = 0; s < i.length; s++) o = i[s],
                        this.file(o.fileName, o.decompressed, {
                            binary: !0,
                            optimizedBinaryString: !0,
                            date: o.date,
                            dir: o.dir
                        });
                    return this
                }
            },
            {
                './base64': 1,
                './zipEntries': 15
            }
        ],
        9: [
            function (e, r) {
                'use strict';
                var t,
                    n,
                    i = e('./support'),
                    a = e('./utils'),
                    s = e('./signature'),
                    o = e('./defaults'),
                    f = e('./base64'),
                    h = e('./compressions'),
                    u = e('./compressedObject'),
                    d = e('./nodeBuffer');
                i.uint8array && 'function' == typeof TextEncoder && 'function' == typeof TextDecoder && (t = new TextEncoder('utf-8'), n = new TextDecoder('utf-8'));
                var c = function (e) {
                        if (e._data instanceof u && (e._data = e._data.getContent(), e.options.binary = !0, e.options.base64 = !1, 'uint8array' === a.getTypeOf(e._data))) {
                            var r = e._data;
                            e._data = new Uint8Array(r.length),
                            0 !== r.length && e._data.set(r, 0)
                        }
                        return e._data
                    },
                    l = function (e) {
                        var r = c(e),
                            n = a.getTypeOf(r);
                        if ('string' === n) {
                            if (!e.options.binary) {
                                if (t) return t.encode(r);
                                if (i.nodebuffer) return d(r, 'utf-8')
                            }
                            return e.asBinary()
                        }
                        return r
                    },
                    p = function (e) {
                        var r = c(this);
                        return null === r || 'undefined' == typeof r ? '' : (this.options.base64 && (r = f.decode(r)), r = e && this.options.binary ? S.utf8decode(r)  : a.transformTo('string', r), e || this.options.binary || (r = S.utf8encode(r)), r)
                    },
                    y = function (e, r, t) {
                        this.name = e,
                            this._data = r,
                            this.options = t
                    };
                y.prototype = {
                    asText: function () {
                        return p.call(this, !0)
                    },
                    asBinary: function () {
                        return p.call(this, !1)
                    },
                    asNodeBuffer: function () {
                        var e = l(this);
                        return a.transformTo('nodebuffer', e)
                    },
                    asUint8Array: function () {
                        var e = l(this);
                        return a.transformTo('uint8array', e)
                    },
                    asArrayBuffer: function () {
                        return this.asUint8Array().buffer
                    }
                };
                var g = function (e, r) {
                        var t,
                            n = '';
                        for (t = 0; r > t; t++) n += String.fromCharCode(255 & e),
                            e >>>= 8;
                        return n
                    },
                    b = function () {
                        var e,
                            r,
                            t = {
                            };
                        for (e = 0; e < arguments.length; e++) for (r in arguments[e]) arguments[e].hasOwnProperty(r) && 'undefined' == typeof t[r] && (t[r] = arguments[e][r]);
                        return t
                    },
                    m = function (e) {
                        return e = e || {
                            },
                        e.base64 !== !0 || null !== e.binary && void 0 !== e.binary || (e.binary = !0),
                            e = b(e, o),
                            e.date = e.date || new Date,
                        null !== e.compression && (e.compression = e.compression.toUpperCase()),
                            e
                    },
                    w = function (e, r, t) {
                        var n = A(e),
                            i = a.getTypeOf(r);
                        if (n && v.call(this, n), t = m(t), t.dir || null === r || 'undefined' == typeof r) t.base64 = !1,
                            t.binary = !1,
                            r = null;
                        else if ('string' === i) t.binary && !t.base64 && t.optimizedBinaryString !== !0 && (r = a.string2binary(r));
                        else {
                            if (t.base64 = !1, t.binary = !0, !(i || r instanceof u)) throw new Error('The data of \'' + e + '\' is in an unsupported format !');
                            'arraybuffer' === i && (r = a.transformTo('uint8array', r))
                        }
                        var s = new y(e, r, t);
                        return this.files[e] = s,
                            s
                    },
                    A = function (e) {
                        '/' == e.slice( - 1) && (e = e.substring(0, e.length - 1));
                        var r = e.lastIndexOf('/');
                        return r > 0 ? e.substring(0, r)  : ''
                    },
                    v = function (e) {
                        return '/' != e.slice( - 1) && (e += '/'),
                        this.files[e] || w.call(this, e, null, {
                            dir: !0
                        }),
                            this.files[e]
                    },
                    C = function (e, r) {
                        var t,
                            n = new u;
                        return e._data instanceof u ? (n.uncompressedSize = e._data.uncompressedSize, n.crc32 = e._data.crc32, 0 === n.uncompressedSize || e.options.dir ? (r = h.STORE, n.compressedContent = '', n.crc32 = 0)  : e._data.compressionMethod === r.magic ? n.compressedContent = e._data.getCompressedContent()  : (t = e._data.getContent(), n.compressedContent = r.compress(a.transformTo(r.compressInputType, t))))  : (t = l(e), (!t || 0 === t.length || e.options.dir) && (r = h.STORE, t = ''), n.uncompressedSize = t.length, n.crc32 = this.crc32(t), n.compressedContent = r.compress(a.transformTo(r.compressInputType, t))),
                            n.compressedSize = n.compressedContent.length,
                            n.compressionMethod = r.magic,
                            n
                    },
                    x = function (e, r, t, n) {
                        var i,
                            a,
                            o = (t.compressedContent, this.utf8encode(r.name)),
                            f = o !== r.name,
                            h = r.options,
                            u = '',
                            d = '';
                        i = h.date.getHours(),
                            i <<= 6,
                            i |= h.date.getMinutes(),
                            i <<= 5,
                            i |= h.date.getSeconds() / 2,
                            a = h.date.getFullYear() - 1980,
                            a <<= 4,
                            a |= h.date.getMonth() + 1,
                            a <<= 5,
                            a |= h.date.getDate(),
                        f && (d = g(1, 1) + g(this.crc32(o), 4) + o, u += 'up' + g(d.length, 2) + d);
                        var c = '';
                        c += '\n\0',
                            c += f ? '\0' : '\0\0',
                            c += t.compressionMethod,
                            c += g(i, 2),
                            c += g(a, 2),
                            c += g(t.crc32, 4),
                            c += g(t.compressedSize, 4),
                            c += g(t.uncompressedSize, 4),
                            c += g(o.length, 2),
                            c += g(u.length, 2);
                        var l = s.LOCAL_FILE_HEADER + c + o + u,
                            p = s.CENTRAL_FILE_HEADER + '\0' + c + '\0\0\0\0\0\0' + (r.options.dir === !0 ? '\0\0\0' : '\0\0\0\0') + g(n, 4) + o + u;
                        return {
                            fileRecord: l,
                            dirRecord: p,
                            compressedObject: t
                        }
                    },
                    E = function () {
                        this.data = [
                        ]
                    };
                E.prototype = {
                    append: function (e) {
                        e = a.transformTo('string', e),
                            this.data.push(e)
                    },
                    finalize: function () {
                        return this.data.join('')
                    }
                };
                var I = function (e) {
                    this.data = new Uint8Array(e),
                        this.index = 0
                };
                I.prototype = {
                    append: function (e) {
                        0 !== e.length && (e = a.transformTo('uint8array', e), this.data.set(e, this.index), this.index += e.length)
                    },
                    finalize: function () {
                        return this.data
                    }
                };
                var S = {
                    load: function () {
                        throw new Error('Load method is not defined. Is the file jszip-load.js included ?')
                    },
                    filter: function (e) {
                        var r,
                            t,
                            n,
                            i,
                            a = [
                            ];
                        for (r in this.files) this.files.hasOwnProperty(r) && (n = this.files[r], i = new y(n.name, n._data, b(n.options)), t = r.slice(this.root.length, r.length), r.slice(0, this.root.length) === this.root && e(t, i) && a.push(i));
                        return a
                    },
                    file: function (e, r, t) {
                        if (1 === arguments.length) {
                            if (a.isRegExp(e)) {
                                var n = e;
                                return this.filter(function (e, r) {
                                    return !r.options.dir && n.test(e)
                                })
                            }
                            return this.filter(function (r, t) {
                                    return !t.options.dir && r === e
                                }) [0] || null
                        }
                        return e = this.root + e,
                            w.call(this, e, r, t),
                            this
                    },
                    folder: function (e) {
                        if (!e) return this;
                        if (a.isRegExp(e)) return this.filter(function (r, t) {
                            return t.options.dir && e.test(r)
                        });
                        var r = this.root + e,
                            t = v.call(this, r),
                            n = this.clone();
                        return n.root = t.name,
                            n
                    },
                    remove: function (e) {
                        e = this.root + e;
                        var r = this.files[e];
                        if (r || ('/' != e.slice( - 1) && (e += '/'), r = this.files[e]), r) if (r.options.dir) for (var t = this.filter(function (r, t) {
                            return t.name.slice(0, e.length) === e
                        }), n = 0; n < t.length; n++) delete this.files[t[n].name];
                        else delete this.files[e];
                        return this
                    },
                    generate: function (e) {
                        e = b(e || {
                            }, {
                            base64: !0,
                            compression: 'STORE',
                            type: 'base64'
                        }),
                            a.checkSupport(e.type);
                        var r,
                            t,
                            n = [
                            ],
                            i = 0,
                            o = 0;
                        for (var u in this.files) if (this.files.hasOwnProperty(u)) {
                            var d = this.files[u],
                                c = d.options.compression || e.compression.toUpperCase(),
                                l = h[c];
                            if (!l) throw new Error(c + ' is not a valid compression method !');
                            var p = C.call(this, d, l),
                                y = x.call(this, u, d, p, i);
                            i += y.fileRecord.length + p.compressedSize,
                                o += y.dirRecord.length,
                                n.push(y)
                        }
                        var m = '';
                        m = s.CENTRAL_DIRECTORY_END + '\0\0\0\0' + g(n.length, 2) + g(n.length, 2) + g(o, 4) + g(i, 4) + '\0\0';
                        var w = e.type.toLowerCase();
                        for (r = 'uint8array' === w || 'arraybuffer' === w || 'blob' === w || 'nodebuffer' === w ? new I(i + o + m.length)  : new E(i + o + m.length), t = 0; t < n.length; t++) r.append(n[t].fileRecord),
                            r.append(n[t].compressedObject.compressedContent);
                        for (t = 0; t < n.length; t++) r.append(n[t].dirRecord);
                        r.append(m);
                        var A = r.finalize();
                        switch (e.type.toLowerCase()) {
                            case 'uint8array':
                            case 'arraybuffer':
                            case 'nodebuffer':
                                return a.transformTo(e.type.toLowerCase(), A);
                            case 'blob':
                                return a.arrayBuffer2Blob(a.transformTo('arraybuffer', A));
                            case 'base64':
                                return e.base64 ? f.encode(A)  : A;
                            default:
                                return A
                        }
                    },
                    crc32: function (e, r) {
                        if ('undefined' == typeof e || !e.length) return 0;
                        var t = 'string' !== a.getTypeOf(e),
                            n = [
                                0,
                                1996959894,
                                3993919788,
                                2567524794,
                                124634137,
                                1886057615,
                                3915621685,
                                2657392035,
                                249268274,
                                2044508324,
                                3772115230,
                                2547177864,
                                162941995,
                                2125561021,
                                3887607047,
                                2428444049,
                                498536548,
                                1789927666,
                                4089016648,
                                2227061214,
                                450548861,
                                1843258603,
                                4107580753,
                                2211677639,
                                325883990,
                                1684777152,
                                4251122042,
                                2321926636,
                                335633487,
                                1661365465,
                                4195302755,
                                2366115317,
                                997073096,
                                1281953886,
                                3579855332,
                                2724688242,
                                1006888145,
                                1258607687,
                                3524101629,
                                2768942443,
                                901097722,
                                1119000684,
                                3686517206,
                                2898065728,
                                853044451,
                                1172266101,
                                3705015759,
                                2882616665,
                                651767980,
                                1373503546,
                                3369554304,
                                3218104598,
                                565507253,
                                1454621731,
                                3485111705,
                                3099436303,
                                671266974,
                                1594198024,
                                3322730930,
                                2970347812,
                                795835527,
                                1483230225,
                                3244367275,
                                3060149565,
                                1994146192,
                                31158534,
                                2563907772,
                                4023717930,
                                1907459465,
                                112637215,
                                2680153253,
                                3904427059,
                                2013776290,
                                251722036,
                                2517215374,
                                3775830040,
                                2137656763,
                                141376813,
                                2439277719,
                                3865271297,
                                1802195444,
                                476864866,
                                2238001368,
                                4066508878,
                                1812370925,
                                453092731,
                                2181625025,
                                4111451223,
                                1706088902,
                                314042704,
                                2344532202,
                                4240017532,
                                1658658271,
                                366619977,
                                2362670323,
                                4224994405,
                                1303535960,
                                984961486,
                                2747007092,
                                3569037538,
                                1256170817,
                                1037604311,
                                2765210733,
                                3554079995,
                                1131014506,
                                879679996,
                                2909243462,
                                3663771856,
                                1141124467,
                                855842277,
                                2852801631,
                                3708648649,
                                1342533948,
                                654459306,
                                3188396048,
                                3373015174,
                                1466479909,
                                544179635,
                                3110523913,
                                3462522015,
                                1591671054,
                                702138776,
                                2966460450,
                                3352799412,
                                1504918807,
                                783551873,
                                3082640443,
                                3233442989,
                                3988292384,
                                2596254646,
                                62317068,
                                1957810842,
                                3939845945,
                                2647816111,
                                81470997,
                                1943803523,
                                3814918930,
                                2489596804,
                                225274430,
                                2053790376,
                                3826175755,
                                2466906013,
                                167816743,
                                2097651377,
                                4027552580,
                                2265490386,
                                503444072,
                                1762050814,
                                4150417245,
                                2154129355,
                                426522225,
                                1852507879,
                                4275313526,
                                2312317920,
                                282753626,
                                1742555852,
                                4189708143,
                                2394877945,
                                397917763,
                                1622183637,
                                3604390888,
                                2714866558,
                                953729732,
                                1340076626,
                                3518719985,
                                2797360999,
                                1068828381,
                                1219638859,
                                3624741850,
                                2936675148,
                                906185462,
                                1090812512,
                                3747672003,
                                2825379669,
                                829329135,
                                1181335161,
                                3412177804,
                                3160834842,
                                628085408,
                                1382605366,
                                3423369109,
                                3138078467,
                                570562233,
                                1426400815,
                                3317316542,
                                2998733608,
                                733239954,
                                1555261956,
                                3268935591,
                                3050360625,
                                752459403,
                                1541320221,
                                2607071920,
                                3965973030,
                                1969922972,
                                40735498,
                                2617837225,
                                3943577151,
                                1913087877,
                                83908371,
                                2512341634,
                                3803740692,
                                2075208622,
                                213261112,
                                2463272603,
                                3855990285,
                                2094854071,
                                198958881,
                                2262029012,
                                4057260610,
                                1759359992,
                                534414190,
                                2176718541,
                                4139329115,
                                1873836001,
                                414664567,
                                2282248934,
                                4279200368,
                                1711684554,
                                285281116,
                                2405801727,
                                4167216745,
                                1634467795,
                                376229701,
                                2685067896,
                                3608007406,
                                1308918612,
                                956543938,
                                2808555105,
                                3495958263,
                                1231636301,
                                1047427035,
                                2932959818,
                                3654703836,
                                1088359270,
                                936918000,
                                2847714899,
                                3736837829,
                                1202900863,
                                817233897,
                                3183342108,
                                3401237130,
                                1404277552,
                                615818150,
                                3134207493,
                                3453421203,
                                1423857449,
                                601450431,
                                3009837614,
                                3294710456,
                                1567103746,
                                711928724,
                                3020668471,
                                3272380065,
                                1510334235,
                                755167117
                            ];
                        'undefined' == typeof r && (r = 0);
                        var i = 0,
                            s = 0,
                            o = 0;
                        r = - 1 ^ r;
                        for (var f = 0, h = e.length; h > f; f++) o = t ? e[f] : e.charCodeAt(f),
                            s = 255 & (r ^ o),
                            i = n[s],
                            r = r >>> 8 ^ i;
                        return - 1 ^ r
                    },
                    utf8encode: function (e) {
                        if (t) {
                            var r = t.encode(e);
                            return a.transformTo('string', r)
                        }
                        if (i.nodebuffer) return a.transformTo('string', d(e, 'utf-8'));
                        for (var n = [
                        ], s = 0, o = 0; o < e.length; o++) {
                            var f = e.charCodeAt(o);
                            128 > f ? n[s++] = String.fromCharCode(f)  : f > 127 && 2048 > f ? (n[s++] = String.fromCharCode(f >> 6 | 192), n[s++] = String.fromCharCode(63 & f | 128))  : (n[s++] = String.fromCharCode(f >> 12 | 224), n[s++] = String.fromCharCode(f >> 6 & 63 | 128), n[s++] = String.fromCharCode(63 & f | 128))
                        }
                        return n.join('')
                    },
                    utf8decode: function (e) {
                        var r = [
                            ],
                            t = 0,
                            s = a.getTypeOf(e),
                            o = 'string' !== s,
                            f = 0,
                            h = 0,
                            u = 0,
                            d = 0;
                        if (n) return n.decode(a.transformTo('uint8array', e));
                        if (i.nodebuffer) return a.transformTo('nodebuffer', e).toString('utf-8');
                        for (; f < e.length; ) h = o ? e[f] : e.charCodeAt(f),
                            128 > h ? (r[t++] = String.fromCharCode(h), f++)  : h > 191 && 224 > h ? (u = o ? e[f + 1] : e.charCodeAt(f + 1), r[t++] = String.fromCharCode((31 & h) << 6 | 63 & u), f += 2)  : (u = o ? e[f + 1] : e.charCodeAt(f + 1), d = o ? e[f + 2] : e.charCodeAt(f + 2), r[t++] = String.fromCharCode((15 & h) << 12 | (63 & u) << 6 | 63 & d), f += 3);
                        return r.join('')
                    }
                };
                r.exports = S
            },
            {
                './base64': 1,
                './compressedObject': 2,
                './compressions': 3,
                './defaults': 5,
                './nodeBuffer': 17,
                './signature': 10,
                './support': 12,
                './utils': 14
            }
        ],
        10: [
            function (e, r, t) {
                'use strict';
                t.LOCAL_FILE_HEADER = 'PK',
                    t.CENTRAL_FILE_HEADER = 'PK',
                    t.CENTRAL_DIRECTORY_END = 'PK',
                    t.ZIP64_CENTRAL_DIRECTORY_LOCATOR = 'PK',
                    t.ZIP64_CENTRAL_DIRECTORY_END = 'PK',
                    t.DATA_DESCRIPTOR = 'PK'
            },
            {
            }
        ],
        11: [
            function (e, r) {
                'use strict';
                function t(e, r) {
                    this.data = e,
                    r || (this.data = i.string2binary(this.data)),
                        this.length = this.data.length,
                        this.index = 0
                }
                var n = e('./dataReader'),
                    i = e('./utils');
                t.prototype = new n,
                    t.prototype.byteAt = function (e) {
                        return this.data.charCodeAt(e)
                    },
                    t.prototype.lastIndexOfSignature = function (e) {
                        return this.data.lastIndexOf(e)
                    },
                    t.prototype.readData = function (e) {
                        this.checkOffset(e);
                        var r = this.data.slice(this.index, this.index + e);
                        return this.index += e,
                            r
                    },
                    r.exports = t
            },
            {
                './dataReader': 4,
                './utils': 14
            }
        ],
        12: [
            function (e, r, t) {
                var n = e('__browserify_process');
                if (t.base64 = !0, t.array = !0, t.string = !0, t.arraybuffer = 'undefined' != typeof ArrayBuffer && 'undefined' != typeof Uint8Array, t.nodebuffer = !n.browser, t.uint8array = 'undefined' != typeof Uint8Array, 'undefined' == typeof ArrayBuffer) t.blob = !1;
                else {
                    var i = new ArrayBuffer(0);
                    try {
                        t.blob = 0 === new Blob([i], {
                                type: 'application/zip'
                            }).size
                    } catch (a) {
                        try {
                            var s = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,
                                o = new s;
                            o.append(i),
                                t.blob = 0 === o.getBlob('application/zip').size
                        } catch (a) {
                            t.blob = !1
                        }
                    }
                }
            },
            {
                __browserify_process: 18
            }
        ],
        13: [
            function (e, r) {
                'use strict';
                function t(e) {
                    e && (this.data = e, this.length = this.data.length, this.index = 0)
                }
                var n = e('./dataReader');
                t.prototype = new n,
                    t.prototype.byteAt = function (e) {
                        return this.data[e]
                    },
                    t.prototype.lastIndexOfSignature = function (e) {
                        for (var r = e.charCodeAt(0), t = e.charCodeAt(1), n = e.charCodeAt(2), i = e.charCodeAt(3), a = this.length - 4; a >= 0; --a) if (this.data[a] === r && this.data[a + 1] === t && this.data[a + 2] === n && this.data[a + 3] === i) return a;
                        return - 1
                    },
                    t.prototype.readData = function (e) {
                        this.checkOffset(e);
                        var r = this.data.subarray(this.index, this.index + e);
                        return this.index += e,
                            r
                    },
                    r.exports = t
            },
            {
                './dataReader': 4
            }
        ],
        14: [
            function (e, r, t) {
                'use strict';
                function n(e) {
                    return e
                }
                function i(e, r) {
                    for (var t = 0; t < e.length; ++t) r[t] = 255 & e.charCodeAt(t);
                    return r
                }
                function a(e) {
                    var r = 65536,
                        n = [
                        ],
                        i = e.length,
                        a = t.getTypeOf(e),
                        s = 0,
                        o = !0;
                    try {
                        switch (a) {
                            case 'uint8array':
                                String.fromCharCode.apply(null, new Uint8Array(0));
                                break;
                            case 'nodebuffer':
                                String.fromCharCode.apply(null, h(0))
                        }
                    } catch (f) {
                        o = !1
                    }
                    if (!o) {
                        for (var u = '', d = 0; d < e.length; d++) u += String.fromCharCode(e[d]);
                        return u
                    }
                    for (; i > s && r > 1; ) try {
                        n.push('array' === a || 'nodebuffer' === a ? String.fromCharCode.apply(null, e.slice(s, Math.min(s + r, i)))  : String.fromCharCode.apply(null, e.subarray(s, Math.min(s + r, i)))),
                            s += r
                    } catch (f) {
                        r = Math.floor(r / 2)
                    }
                    return n.join('')
                }
                function s(e, r) {
                    for (var t = 0; t < e.length; t++) r[t] = e[t];
                    return r
                }
                var o = e('./support'),
                    f = e('./compressions'),
                    h = e('./nodeBuffer');
                t.string2binary = function (e) {
                    for (var r = '', t = 0; t < e.length; t++) r += String.fromCharCode(255 & e.charCodeAt(t));
                    return r
                },
                    t.string2Uint8Array = function (e) {
                        return t.transformTo('uint8array', e)
                    },
                    t.uint8Array2String = function (e) {
                        return t.transformTo('string', e)
                    },
                    t.string2Blob = function (e) {
                        var r = t.transformTo('arraybuffer', e);
                        return t.arrayBuffer2Blob(r)
                    },
                    t.arrayBuffer2Blob = function (e) {
                        t.checkSupport('blob');
                        try {
                            return new Blob([e], {
                                type: 'application/zip'
                            })
                        } catch (r) {
                            try {
                                var n = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,
                                    i = new n;
                                return i.append(e),
                                    i.getBlob('application/zip')
                            } catch (r) {
                                throw new Error('Bug : can\'t construct the Blob.')
                            }
                        }
                    };
                var u = {
                };
                u.string = {
                    string: n,
                    array: function (e) {
                        return i(e, new Array(e.length))
                    },
                    arraybuffer: function (e) {
                        return u.string.uint8array(e).buffer
                    },
                    uint8array: function (e) {
                        return i(e, new Uint8Array(e.length))
                    },
                    nodebuffer: function (e) {
                        return i(e, h(e.length))
                    }
                },
                    u.array = {
                        string: a,
                        array: n,
                        arraybuffer: function (e) {
                            return new Uint8Array(e).buffer
                        },
                        uint8array: function (e) {
                            return new Uint8Array(e)
                        },
                        nodebuffer: function (e) {
                            return h(e)
                        }
                    },
                    u.arraybuffer = {
                        string: function (e) {
                            return a(new Uint8Array(e))
                        },
                        array: function (e) {
                            return s(new Uint8Array(e), new Array(e.byteLength))
                        },
                        arraybuffer: n,
                        uint8array: function (e) {
                            return new Uint8Array(e)
                        },
                        nodebuffer: function (e) {
                            return h(new Uint8Array(e))
                        }
                    },
                    u.uint8array = {
                        string: a,
                        array: function (e) {
                            return s(e, new Array(e.length))
                        },
                        arraybuffer: function (e) {
                            return e.buffer
                        },
                        uint8array: n,
                        nodebuffer: function (e) {
                            return h(e)
                        }
                    },
                    u.nodebuffer = {
                        string: a,
                        array: function (e) {
                            return s(e, new Array(e.length))
                        },
                        arraybuffer: function (e) {
                            return u.nodebuffer.uint8array(e).buffer
                        },
                        uint8array: function (e) {
                            return s(e, new Uint8Array(e.length))
                        },
                        nodebuffer: n
                    },
                    t.transformTo = function (e, r) {
                        if (r || (r = ''), !e) return r;
                        t.checkSupport(e);
                        var n = t.getTypeOf(r),
                            i = u[n][e](r);
                        return i
                    },
                    t.getTypeOf = function (e) {
                        return 'string' == typeof e ? 'string' : '[object Array]' === Object.prototype.toString.call(e) ? 'array' : o.nodebuffer && h.test(e) ? 'nodebuffer' : o.uint8array && e instanceof Uint8Array ? 'uint8array' : o.arraybuffer && e instanceof ArrayBuffer ? 'arraybuffer' : void 0
                    },
                    t.checkSupport = function (e) {
                        var r = o[e.toLowerCase()];
                        if (!r) throw new Error(e + ' is not supported by this browser')
                    },
                    t.MAX_VALUE_16BITS = 65535,
                    t.MAX_VALUE_32BITS = - 1,
                    t.pretty = function (e) {
                        var r,
                            t,
                            n = '';
                        for (t = 0; t < (e || '').length; t++) r = e.charCodeAt(t),
                            n += '\\x' + (16 > r ? '0' : '') + r.toString(16).toUpperCase();
                        return n
                    },
                    t.findCompression = function (e) {
                        for (var r in f) if (f.hasOwnProperty(r) && f[r].magic === e) return f[r];
                        return null
                    },
                    t.isRegExp = function (e) {
                        return '[object RegExp]' === Object.prototype.toString.call(e)
                    }
            },
            {
                './compressions': 3,
                './nodeBuffer': 17,
                './support': 12
            }
        ],
        15: [
            function (e, r) {
                'use strict';
                function t(e, r) {
                    this.files = [
                    ],
                        this.loadOptions = r,
                    e && this.load(e)
                }
                var n = e('./stringReader'),
                    i = e('./nodeBufferReader'),
                    a = e('./uint8ArrayReader'),
                    s = e('./utils'),
                    o = e('./signature'),
                    f = e('./zipEntry'),
                    h = e('./support');
                t.prototype = {
                    checkSignature: function (e) {
                        var r = this.reader.readString(4);
                        if (r !== e) throw new Error('Corrupted zip or bug : unexpected signature (' + s.pretty(r) + ', expected ' + s.pretty(e) + ')')
                    },
                    readBlockEndOfCentral: function () {
                        this.diskNumber = this.reader.readInt(2),
                            this.diskWithCentralDirStart = this.reader.readInt(2),
                            this.centralDirRecordsOnThisDisk = this.reader.readInt(2),
                            this.centralDirRecords = this.reader.readInt(2),
                            this.centralDirSize = this.reader.readInt(4),
                            this.centralDirOffset = this.reader.readInt(4),
                            this.zipCommentLength = this.reader.readInt(2),
                            this.zipComment = this.reader.readString(this.zipCommentLength)
                    },
                    readBlockZip64EndOfCentral: function () {
                        this.zip64EndOfCentralSize = this.reader.readInt(8),
                            this.versionMadeBy = this.reader.readString(2),
                            this.versionNeeded = this.reader.readInt(2),
                            this.diskNumber = this.reader.readInt(4),
                            this.diskWithCentralDirStart = this.reader.readInt(4),
                            this.centralDirRecordsOnThisDisk = this.reader.readInt(8),
                            this.centralDirRecords = this.reader.readInt(8),
                            this.centralDirSize = this.reader.readInt(8),
                            this.centralDirOffset = this.reader.readInt(8),
                            this.zip64ExtensibleData = {
                            };
                        for (var e, r, t, n = this.zip64EndOfCentralSize - 44, i = 0; n > i; ) e = this.reader.readInt(2),
                            r = this.reader.readInt(4),
                            t = this.reader.readString(r),
                            this.zip64ExtensibleData[e] = {
                                id: e,
                                length: r,
                                value: t
                            }
                    },
                    readBlockZip64EndOfCentralLocator: function () {
                        if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), this.disksCount > 1) throw new Error('Multi-volumes zip are not supported')
                    },
                    readLocalFiles: function () {
                        var e,
                            r;
                        for (e = 0; e < this.files.length; e++) r = this.files[e],
                            this.reader.setIndex(r.localHeaderOffset),
                            this.checkSignature(o.LOCAL_FILE_HEADER),
                            r.readLocalPart(this.reader),
                            r.handleUTF8()
                    },
                    readCentralDir: function () {
                        var e;
                        for (this.reader.setIndex(this.centralDirOffset); this.reader.readString(4) === o.CENTRAL_FILE_HEADER; ) e = new f({
                            zip64: this.zip64
                        }, this.loadOptions),
                            e.readCentralPart(this.reader),
                            this.files.push(e)
                    },
                    readEndOfCentral: function () {
                        var e = this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);
                        if ( - 1 === e) throw new Error('Corrupted zip : can\'t find end of central directory');
                        if (this.reader.setIndex(e), this.checkSignature(o.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === s.MAX_VALUE_16BITS || this.diskWithCentralDirStart === s.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === s.MAX_VALUE_16BITS || this.centralDirRecords === s.MAX_VALUE_16BITS || this.centralDirSize === s.MAX_VALUE_32BITS || this.centralDirOffset === s.MAX_VALUE_32BITS) {
                            if (this.zip64 = !0, e = this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR), - 1 === e) throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory locator');
                            this.reader.setIndex(e),
                                this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),
                                this.readBlockZip64EndOfCentralLocator(),
                                this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),
                                this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),
                                this.readBlockZip64EndOfCentral()
                        }
                    },
                    prepareReader: function (e) {
                        var r = s.getTypeOf(e);
                        this.reader = 'string' !== r || h.uint8array ? 'nodebuffer' === r ? new i(e)  : new a(s.transformTo('uint8array', e))  : new n(e, this.loadOptions.optimizedBinaryString)
                    },
                    load: function (e) {
                        this.prepareReader(e),
                            this.readEndOfCentral(),
                            this.readCentralDir(),
                            this.readLocalFiles()
                    }
                },
                    r.exports = t
            },
            {
                './nodeBufferReader': 17,
                './signature': 10,
                './stringReader': 11,
                './support': 12,
                './uint8ArrayReader': 13,
                './utils': 14,
                './zipEntry': 16
            }
        ],
        16: [
            function (e, r) {
                'use strict';
                function t(e, r) {
                    this.options = e,
                        this.loadOptions = r
                }
                var n = e('./stringReader'),
                    i = e('./utils'),
                    a = e('./compressedObject'),
                    s = e('./object');
                t.prototype = {
                    isEncrypted: function () {
                        return 1 === (1 & this.bitFlag)
                    },
                    useUTF8: function () {
                        return 2048 === (2048 & this.bitFlag)
                    },
                    prepareCompressedContent: function (e, r, t) {
                        return function () {
                            var n = e.index;
                            e.setIndex(r);
                            var i = e.readData(t);
                            return e.setIndex(n),
                                i
                        }
                    },
                    prepareContent: function (e, r, t, n, a) {
                        return function () {
                            var e = i.transformTo(n.uncompressInputType, this.getCompressedContent()),
                                r = n.uncompress(e);
                            if (r.length !== a) throw new Error('Bug : uncompressed data size mismatch');
                            return r
                        }
                    },
                    readLocalPart: function (e) {
                        var r,
                            t;
                        if (e.skip(22), this.fileNameLength = e.readInt(2), t = e.readInt(2), this.fileName = e.readString(this.fileNameLength), e.skip(t), - 1 == this.compressedSize || - 1 == this.uncompressedSize) throw new Error('Bug or corrupted zip : didn\'t get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)');
                        if (r = i.findCompression(this.compressionMethod), null === r) throw new Error('Corrupted zip : compression ' + i.pretty(this.compressionMethod) + ' unknown (inner file : ' + this.fileName + ')');
                        if (this.decompressed = new a, this.decompressed.compressedSize = this.compressedSize, this.decompressed.uncompressedSize = this.uncompressedSize, this.decompressed.crc32 = this.crc32, this.decompressed.compressionMethod = this.compressionMethod, this.decompressed.getCompressedContent = this.prepareCompressedContent(e, e.index, this.compressedSize, r), this.decompressed.getContent = this.prepareContent(e, e.index, this.compressedSize, r, this.uncompressedSize), this.loadOptions.checkCRC32 && (this.decompressed = i.transformTo('string', this.decompressed.getContent()), s.crc32(this.decompressed) !== this.crc32)) throw new Error('Corrupted zip : CRC32 mismatch')
                    },
                    readCentralPart: function (e) {
                        if (this.versionMadeBy = e.readString(2), this.versionNeeded = e.readInt(2), this.bitFlag = e.readInt(2), this.compressionMethod = e.readString(2), this.date = e.readDate(), this.crc32 = e.readInt(4), this.compressedSize = e.readInt(4), this.uncompressedSize = e.readInt(4), this.fileNameLength = e.readInt(2), this.extraFieldsLength = e.readInt(2), this.fileCommentLength = e.readInt(2), this.diskNumberStart = e.readInt(2), this.internalFileAttributes = e.readInt(2), this.externalFileAttributes = e.readInt(4), this.localHeaderOffset = e.readInt(4), this.isEncrypted()) throw new Error('Encrypted zip are not supported');
                        this.fileName = e.readString(this.fileNameLength),
                            this.readExtraFields(e),
                            this.parseZIP64ExtraField(e),
                            this.fileComment = e.readString(this.fileCommentLength),
                            this.dir = 16 & this.externalFileAttributes ? !0 : !1
                    },
                    parseZIP64ExtraField: function () {
                        if (this.extraFields[1]) {
                            var e = new n(this.extraFields[1].value);
                            this.uncompressedSize === i.MAX_VALUE_32BITS && (this.uncompressedSize = e.readInt(8)),
                            this.compressedSize === i.MAX_VALUE_32BITS && (this.compressedSize = e.readInt(8)),
                            this.localHeaderOffset === i.MAX_VALUE_32BITS && (this.localHeaderOffset = e.readInt(8)),
                            this.diskNumberStart === i.MAX_VALUE_32BITS && (this.diskNumberStart = e.readInt(4))
                        }
                    },
                    readExtraFields: function (e) {
                        var r,
                            t,
                            n,
                            i = e.index;
                        for (this.extraFields = this.extraFields || {
                            }; e.index < i + this.extraFieldsLength; ) r = e.readInt(2),
                            t = e.readInt(2),
                            n = e.readString(t),
                            this.extraFields[r] = {
                                id: r,
                                length: t,
                                value: n
                            }
                    },
                    handleUTF8: function () {
                        if (this.useUTF8()) this.fileName = s.utf8decode(this.fileName),
                            this.fileComment = s.utf8decode(this.fileComment);
                        else {
                            var e = this.findExtraFieldUnicodePath();
                            null !== e && (this.fileName = e)
                        }
                    },
                    findExtraFieldUnicodePath: function () {
                        var e = this.extraFields[28789];
                        if (e) {
                            var r = new n(e.value);
                            return 1 !== r.readInt(1) ? null : s.crc32(this.fileName) !== r.readInt(4) ? null : s.utf8decode(r.readString(e.length - 5))
                        }
                        return null
                    }
                },
                    r.exports = t
            },
            {
                './compressedObject': 2,
                './object': 9,
                './stringReader': 11,
                './utils': 14
            }
        ],
        17: [
            function () {
            },
            {
            }
        ],
        18: [
            function (e, r) {
                var t = r.exports = {
                };
                t.nextTick = function () {
                    var e = 'undefined' != typeof window && window.setImmediate,
                        r = 'undefined' != typeof window && window.postMessage && window.addEventListener;
                    if (e) return function (e) {
                        return window.setImmediate(e)
                    };
                    if (r) {
                        var t = [
                        ];
                        return window.addEventListener('message', function (e) {
                            var r = e.source;
                            if ((r === window || null === r) && 'process-tick' === e.data && (e.stopPropagation(), t.length > 0)) {
                                var n = t.shift();
                                n()
                            }
                        }, !0),
                            function (e) {
                                t.push(e),
                                    window.postMessage('process-tick', '*')
                            }
                    }
                    return function (e) {
                        setTimeout(e, 0)
                    }
                }(),
                    t.title = 'browser',
                    t.browser = !0,
                    t.env = {
                    },
                    t.argv = [
                    ],
                    t.binding = function () {
                        throw new Error('process.binding is not supported')
                    },
                    t.cwd = function () {
                        return '/'
                    },
                    t.chdir = function () {
                        throw new Error('process.chdir is not supported')
                    }
            },
            {
            }
        ],
        19: [
            function () {
                (function () {
                    'use strict';
                    function e(e, r) {
                        var t = e.split('.'),
                            n = l;
                        !(t[0] in n) && n.execScript && n.execScript('var ' + t[0]);
                        for (var i; t.length && (i = t.shift()); ) t.length || r === d ? n = n[i] ? n[i] : n[i] = {
                        }
                            : n[i] = r
                    }
                    function r(e, r) {
                        if (this.index = 'number' == typeof r ? r : 0, this.d = 0, this.buffer = e instanceof (p ? Uint8Array : Array) ? e : new (p ? Uint8Array : Array) (32768), 2 * this.buffer.length <= this.index) throw Error('invalid index');
                        this.buffer.length <= this.index && t(this)
                    }
                    function t(e) {
                        var r,
                            t = e.buffer,
                            n = t.length,
                            i = new (p ? Uint8Array : Array) (n << 1);
                        if (p) i.set(t);
                        else for (r = 0; n > r; ++r) i[r] = t[r];
                        return e.buffer = i
                    }
                    function n(e) {
                        this.buffer = new (p ? Uint16Array : Array) (2 * e),
                            this.length = 0
                    }
                    function i(e, r) {
                        this.e = C,
                            this.f = 0,
                            this.input = p && e instanceof Array ? new Uint8Array(e)  : e,
                            this.c = 0,
                        r && (r.lazy && (this.f = r.lazy), 'number' == typeof r.compressionType && (this.e = r.compressionType), r.outputBuffer && (this.b = p && r.outputBuffer instanceof Array ? new Uint8Array(r.outputBuffer)  : r.outputBuffer), 'number' == typeof r.outputIndex && (this.c = r.outputIndex)),
                        this.b || (this.b = new (p ? Uint8Array : Array) (32768))
                    }
                    function a(e, r) {
                        this.length = e,
                            this.g = r
                    }
                    function s(e, r) {
                        function t(e, r) {
                            var t,
                                n = e.g,
                                i = [
                                ],
                                a = 0;
                            t = I[e.length],
                                i[a++] = 65535 & t,
                                i[a++] = t >> 16 & 255,
                                i[a++] = t >> 24;
                            var s;
                            switch (c) {
                                case 1 === n:
                                    s = [
                                        0,
                                        n - 1,
                                        0
                                    ];
                                    break;
                                case 2 === n:
                                    s = [
                                        1,
                                        n - 2,
                                        0
                                    ];
                                    break;
                                case 3 === n:
                                    s = [
                                        2,
                                        n - 3,
                                        0
                                    ];
                                    break;
                                case 4 === n:
                                    s = [
                                        3,
                                        n - 4,
                                        0
                                    ];
                                    break;
                                case 6 >= n:
                                    s = [
                                        4,
                                        n - 5,
                                        1
                                    ];
                                    break;
                                case 8 >= n:
                                    s = [
                                        5,
                                        n - 7,
                                        1
                                    ];
                                    break;
                                case 12 >= n:
                                    s = [
                                        6,
                                        n - 9,
                                        2
                                    ];
                                    break;
                                case 16 >= n:
                                    s = [
                                        7,
                                        n - 13,
                                        2
                                    ];
                                    break;
                                case 24 >= n:
                                    s = [
                                        8,
                                        n - 17,
                                        3
                                    ];
                                    break;
                                case 32 >= n:
                                    s = [
                                        9,
                                        n - 25,
                                        3
                                    ];
                                    break;
                                case 48 >= n:
                                    s = [
                                        10,
                                        n - 33,
                                        4
                                    ];
                                    break;
                                case 64 >= n:
                                    s = [
                                        11,
                                        n - 49,
                                        4
                                    ];
                                    break;
                                case 96 >= n:
                                    s = [
                                        12,
                                        n - 65,
                                        5
                                    ];
                                    break;
                                case 128 >= n:
                                    s = [
                                        13,
                                        n - 97,
                                        5
                                    ];
                                    break;
                                case 192 >= n:
                                    s = [
                                        14,
                                        n - 129,
                                        6
                                    ];
                                    break;
                                case 256 >= n:
                                    s = [
                                        15,
                                        n - 193,
                                        6
                                    ];
                                    break;
                                case 384 >= n:
                                    s = [
                                        16,
                                        n - 257,
                                        7
                                    ];
                                    break;
                                case 512 >= n:
                                    s = [
                                        17,
                                        n - 385,
                                        7
                                    ];
                                    break;
                                case 768 >= n:
                                    s = [
                                        18,
                                        n - 513,
                                        8
                                    ];
                                    break;
                                case 1024 >= n:
                                    s = [
                                        19,
                                        n - 769,
                                        8
                                    ];
                                    break;
                                case 1536 >= n:
                                    s = [
                                        20,
                                        n - 1025,
                                        9
                                    ];
                                    break;
                                case 2048 >= n:
                                    s = [
                                        21,
                                        n - 1537,
                                        9
                                    ];
                                    break;
                                case 3072 >= n:
                                    s = [
                                        22,
                                        n - 2049,
                                        10
                                    ];
                                    break;
                                case 4096 >= n:
                                    s = [
                                        23,
                                        n - 3073,
                                        10
                                    ];
                                    break;
                                case 6144 >= n:
                                    s = [
                                        24,
                                        n - 4097,
                                        11
                                    ];
                                    break;
                                case 8192 >= n:
                                    s = [
                                        25,
                                        n - 6145,
                                        11
                                    ];
                                    break;
                                case 12288 >= n:
                                    s = [
                                        26,
                                        n - 8193,
                                        12
                                    ];
                                    break;
                                case 16384 >= n:
                                    s = [
                                        27,
                                        n - 12289,
                                        12
                                    ];
                                    break;
                                case 24576 >= n:
                                    s = [
                                        28,
                                        n - 16385,
                                        13
                                    ];
                                    break;
                                case 32768 >= n:
                                    s = [
                                        29,
                                        n - 24577,
                                        13
                                    ];
                                    break;
                                default:
                                    throw 'invalid distance'
                            }
                            t = s,
                                i[a++] = t[0],
                                i[a++] = t[1],
                                i[a++] = t[2];
                            var o,
                                f;
                            for (o = 0, f = i.length; f > o; ++o) b[m++] = i[o];
                            A[i[0]]++,
                                v[i[3]]++,
                                w = e.length + r - 1,
                                l = null
                        }
                        var n,
                            i,
                            a,
                            s,
                            f,
                            h,
                            u,
                            l,
                            y,
                            g = {
                            },
                            b = p ? new Uint16Array(2 * r.length)  : [
                            ],
                            m = 0,
                            w = 0,
                            A = new (p ? Uint32Array : Array) (286),
                            v = new (p ? Uint32Array : Array) (30),
                            C = e.f;
                        if (!p) {
                            for (a = 0; 285 >= a; ) A[a++] = 0;
                            for (a = 0; 29 >= a; ) v[a++] = 0
                        }
                        for (A[256] = 1, n = 0, i = r.length; i > n; ++n) {
                            for (a = f = 0, s = 3; s > a && n + a !== i; ++a) f = f << 8 | r[n + a];
                            if (g[f] === d && (g[f] = [
                                ]), h = g[f], !(0 < w--)) {
                                for (; 0 < h.length && 32768 < n - h[0]; ) h.shift();
                                if (n + 3 >= i) {
                                    for (l && t(l, - 1), a = 0, s = i - n; s > a; ++a) y = r[n + a],
                                        b[m++] = y,
                                        ++A[y];
                                    break
                                }
                                0 < h.length ? (u = o(r, n, h), l ? l.length < u.length ? (y = r[n - 1], b[m++] = y, ++A[y], t(u, 0))  : t(l, - 1)  : u.length < C ? l = u : t(u, 0))  : l ? t(l, - 1)  : (y = r[n], b[m++] = y, ++A[y])
                            }
                            h.push(n)
                        }
                        return b[m++] = 256,
                            A[256]++,
                            e.j = A,
                            e.i = v,
                            p ? b.subarray(0, m)  : b
                    }
                    function o(e, r, t) {
                        var n,
                            i,
                            s,
                            o,
                            f,
                            h,
                            u = 0,
                            d = e.length;
                        o = 0,
                            h = t.length;
                        e: for (; h > o; o++) {
                            if (n = t[h - o - 1], s = 3, u > 3) {
                                for (f = u; f > 3; f--) if (e[n + f - 1] !== e[r + f - 1]) continue e;
                                s = u
                            }
                            for (; 258 > s && d > r + s && e[n + s] === e[r + s]; ) ++s;
                            if (s > u && (i = n, u = s), 258 === s) break
                        }
                        return new a(u, r - i)
                    }
                    function f(e, r) {
                        var t,
                            i,
                            a,
                            s,
                            o,
                            f = e.length,
                            u = new n(572),
                            d = new (p ? Uint8Array : Array) (f);
                        if (!p) for (s = 0; f > s; s++) d[s] = 0;
                        for (s = 0; f > s; ++s) 0 < e[s] && u.push(s, e[s]);
                        if (t = Array(u.length / 2), i = new (p ? Uint32Array : Array) (u.length / 2), 1 === t.length) return d[u.pop().index] = 1,
                            d;
                        for (s = 0, o = u.length / 2; o > s; ++s) t[s] = u.pop(),
                            i[s] = t[s].value;
                        for (a = h(i, i.length, r), s = 0, o = t.length; o > s; ++s) d[t[s].index] = a[s];
                        return d
                    }
                    function h(e, r, t) {
                        function n(e) {
                            var t = l[e][y[e]];
                            t === r ? (n(e + 1), n(e + 1))  : --d[t],
                                ++y[e]
                        }
                        var i,
                            a,
                            s,
                            o,
                            f,
                            h = new (p ? Uint16Array : Array) (t),
                            u = new (p ? Uint8Array : Array) (t),
                            d = new (p ? Uint8Array : Array) (r),
                            c = Array(t),
                            l = Array(t),
                            y = Array(t),
                            g = (1 << t) - r,
                            b = 1 << t - 1;
                        for (h[t - 1] = r, a = 0; t > a; ++a) b > g ? u[a] = 0 : (u[a] = 1, g -= b),
                            g <<= 1,
                            h[t - 2 - a] = (h[t - 1 - a] / 2 | 0) + r;
                        for (h[0] = u[0], c[0] = Array(h[0]), l[0] = Array(h[0]), a = 1; t > a; ++a) h[a] > 2 * h[a - 1] + u[a] && (h[a] = 2 * h[a - 1] + u[a]),
                            c[a] = Array(h[a]),
                            l[a] = Array(h[a]);
                        for (i = 0; r > i; ++i) d[i] = t;
                        for (s = 0; s < h[t - 1]; ++s) c[t - 1][s] = e[s],
                            l[t - 1][s] = s;
                        for (i = 0; t > i; ++i) y[i] = 0;
                        for (1 === u[t - 1] && (--d[0], ++y[t - 1]), a = t - 2; a >= 0; --a) {
                            for (o = i = 0, f = y[a + 1], s = 0; s < h[a]; s++) o = c[a + 1][f] + c[a + 1][f + 1],
                                o > e[i] ? (c[a][s] = o, l[a][s] = r, f += 2)  : (c[a][s] = e[i], l[a][s] = i, ++i);
                            y[a] = 0,
                            1 === u[a] && n(a)
                        }
                        return d
                    }
                    function u(e) {
                        var r,
                            t,
                            n,
                            i,
                            a = new (p ? Uint16Array : Array) (e.length),
                            s = [
                            ],
                            o = [
                            ],
                            f = 0;
                        for (r = 0, t = e.length; t > r; r++) s[e[r]] = (0 | s[e[r]]) + 1;
                        for (r = 1, t = 16; t >= r; r++) o[r] = f,
                            f += 0 | s[r],
                            f <<= 1;
                        for (r = 0, t = e.length; t > r; r++) for (f = o[e[r]], o[e[r]] += 1, n = a[r] = 0, i = e[r]; i > n; n++) a[r] = a[r] << 1 | 1 & f,
                            f >>>= 1;
                        return a
                    }
                    var d = void 0,
                        c = !0,
                        l = this,
                        p = 'undefined' != typeof Uint8Array && 'undefined' != typeof Uint16Array && 'undefined' != typeof Uint32Array && 'undefined' != typeof DataView;
                    r.prototype.a = function (e, r, n) {
                        var i,
                            a = this.buffer,
                            s = this.index,
                            o = this.d,
                            f = a[s];
                        if (n && r > 1 && (e = r > 8 ? (A[255 & e] << 24 | A[e >>> 8 & 255] << 16 | A[e >>> 16 & 255] << 8 | A[e >>> 24 & 255]) >> 32 - r : A[e] >> 8 - r), 8 > r + o) f = f << r | e,
                            o += r;
                        else for (i = 0; r > i; ++i) f = f << 1 | e >> r - i - 1 & 1,
                        8 === ++o && (o = 0, a[s++] = A[f], f = 0, s === a.length && (a = t(this)));
                        a[s] = f,
                            this.buffer = a,
                            this.d = o,
                            this.index = s
                    },
                        r.prototype.finish = function () {
                            var e,
                                r = this.buffer,
                                t = this.index;
                            return 0 < this.d && (r[t] <<= 8 - this.d, r[t] = A[r[t]], t++),
                                p ? e = r.subarray(0, t)  : (r.length = t, e = r),
                                e
                        };
                    var y,
                        g = new (p ? Uint8Array : Array) (256);
                    for (y = 0; 256 > y; ++y) {
                        for (var b = y, m = b, w = 7, b = b >>> 1; b; b >>>= 1) m <<= 1,
                            m |= 1 & b,
                            --w;
                        g[y] = (m << w & 255) >>> 0
                    }
                    var A = g;
                    n.prototype.getParent = function (e) {
                        return 2 * ((e - 2) / 4 | 0)
                    },
                        n.prototype.push = function (e, r) {
                            var t,
                                n,
                                i,
                                a = this.buffer;
                            for (t = this.length, a[this.length++] = r, a[this.length++] = e; t > 0 && (n = this.getParent(t), a[t] > a[n]); ) i = a[t],
                                a[t] = a[n],
                                a[n] = i,
                                i = a[t + 1],
                                a[t + 1] = a[n + 1],
                                a[n + 1] = i,
                                t = n;
                            return this.length
                        },
                        n.prototype.pop = function () {
                            var e,
                                r,
                                t,
                                n,
                                i,
                                a = this.buffer;
                            for (r = a[0], e = a[1], this.length -= 2, a[0] = a[this.length], a[1] = a[this.length + 1], i = 0; n = 2 * i + 2, !(n >= this.length) && (n + 2 < this.length && a[n + 2] > a[n] && (n += 2), a[n] > a[i]); ) t = a[i],
                                a[i] = a[n],
                                a[n] = t,
                                t = a[i + 1],
                                a[i + 1] = a[n + 1],
                                a[n + 1] = t,
                                i = n;
                            return {
                                index: e,
                                value: r,
                                length: this.length
                            }
                        };
                    var v,
                        C = 2,
                        x = [
                        ];
                    for (v = 0; 288 > v; v++) switch (c) {
                        case 143 >= v:
                            x.push([v + 48,
                                8]);
                            break;
                        case 255 >= v:
                            x.push([v - 144 + 400,
                                9]);
                            break;
                        case 279 >= v:
                            x.push([v - 256 + 0,
                                7]);
                            break;
                        case 287 >= v:
                            x.push([v - 280 + 192,
                                8]);
                            break;
                        default:
                            throw 'invalid literal: ' + v
                    }
                    i.prototype.h = function () {
                        var e,
                            t,
                            n,
                            i,
                            a = this.input;
                        switch (this.e) {
                            case 0:
                                for (n = 0, i = a.length; i > n; ) {
                                    t = p ? a.subarray(n, n + 65535)  : a.slice(n, n + 65535),
                                        n += t.length;
                                    var o = t,
                                        h = n === i,
                                        l = d,
                                        y = d,
                                        g = d,
                                        b = d,
                                        m = d,
                                        w = this.b,
                                        A = this.c;
                                    if (p) {
                                        for (w = new Uint8Array(this.b.buffer); w.length <= A + o.length + 5; ) w = new Uint8Array(w.length << 1);
                                        w.set(this.b)
                                    }
                                    if (l = h ? 1 : 0, w[A++] = 0 | l, y = o.length, g = ~y + 65536 & 65535, w[A++] = 255 & y, w[A++] = y >>> 8 & 255, w[A++] = 255 & g, w[A++] = g >>> 8 & 255, p) w.set(o, A),
                                        A += o.length,
                                        w = w.subarray(0, A);
                                    else {
                                        for (b = 0, m = o.length; m > b; ++b) w[A++] = o[b];
                                        w.length = A
                                    }
                                    this.c = A,
                                        this.b = w
                                }
                                break;
                            case 1:
                                var v = new r(p ? new Uint8Array(this.b.buffer)  : this.b, this.c);
                                v.a(1, 1, c),
                                    v.a(1, 2, c);
                                var E,
                                    I,
                                    S,
                                    k = s(this, a);
                                for (E = 0, I = k.length; I > E; E++) if (S = k[E], r.prototype.a.apply(v, x[S]), S > 256) v.a(k[++E], k[++E], c),
                                    v.a(k[++E], 5),
                                    v.a(k[++E], k[++E], c);
                                else if (256 === S) break;
                                this.b = v.finish(),
                                    this.c = this.b.length;
                                break;
                            case C:
                                var T,
                                    O,
                                    U,
                                    R,
                                    z,
                                    _,
                                    B,
                                    D,
                                    L,
                                    N,
                                    F,
                                    M,
                                    j,
                                    P,
                                    Z,
                                    V = new r(p ? new Uint8Array(this.b.buffer)  : this.b, this.c),
                                    X = [
                                        16,
                                        17,
                                        18,
                                        0,
                                        8,
                                        7,
                                        9,
                                        6,
                                        10,
                                        5,
                                        11,
                                        4,
                                        12,
                                        3,
                                        13,
                                        2,
                                        14,
                                        1,
                                        15
                                    ],
                                    Y = Array(19);
                                for (T = C, V.a(1, 1, c), V.a(T, 2, c), O = s(this, a), _ = f(this.j, 15), B = u(_), D = f(this.i, 7), L = u(D), U = 286; U > 257 && 0 === _[U - 1]; U--);
                                for (R = 30; R > 1 && 0 === D[R - 1]; R--);
                                var H,
                                    K,
                                    q,
                                    W,
                                    J,
                                    G,
                                    Q = U,
                                    $ = R,
                                    ee = new (p ? Uint32Array : Array) (Q + $),
                                    re = new (p ? Uint32Array : Array) (316),
                                    te = new (p ? Uint8Array : Array) (19);
                                for (H = K = 0; Q > H; H++) ee[K++] = _[H];
                                for (H = 0; $ > H; H++) ee[K++] = D[H];
                                if (!p) for (H = 0, W = te.length; W > H; ++H) te[H] = 0;
                                for (H = J = 0, W = ee.length; W > H; H += K) {
                                    for (K = 1; W > H + K && ee[H + K] === ee[H]; ++K);
                                    if (q = K, 0 === ee[H]) if (3 > q) for (; 0 < q--; ) re[J++] = 0,
                                        te[0]++;
                                    else for (; q > 0; ) G = 138 > q ? q : 138,
                                        G > q - 3 && q > G && (G = q - 3),
                                            10 >= G ? (re[J++] = 17, re[J++] = G - 3, te[17]++)  : (re[J++] = 18, re[J++] = G - 11, te[18]++),
                                            q -= G;
                                    else if (re[J++] = ee[H], te[ee[H]]++, q--, 3 > q) for (; 0 < q--; ) re[J++] = ee[H],
                                        te[ee[H]]++;
                                    else for (; q > 0; ) G = 6 > q ? q : 6,
                                        G > q - 3 && q > G && (G = q - 3),
                                            re[J++] = 16,
                                            re[J++] = G - 3,
                                            te[16]++,
                                            q -= G
                                }
                                for (e = p ? re.subarray(0, J)  : re.slice(0, J), N = f(te, 7), P = 0; 19 > P; P++) Y[P] = N[X[P]];
                                for (z = 19; z > 4 && 0 === Y[z - 1]; z--);
                                for (F = u(N), V.a(U - 257, 5, c), V.a(R - 1, 5, c), V.a(z - 4, 4, c), P = 0; z > P; P++) V.a(Y[P], 3, c);
                                for (P = 0, Z = e.length; Z > P; P++) if (M = e[P], V.a(F[M], N[M], c), M >= 16) {
                                    switch (P++, M) {
                                        case 16:
                                            j = 2;
                                            break;
                                        case 17:
                                            j = 3;
                                            break;
                                        case 18:
                                            j = 7;
                                            break;
                                        default:
                                            throw 'invalid code: ' + M
                                    }
                                    V.a(e[P], j, c)
                                }
                                var ne,
                                    ie,
                                    ae,
                                    se,
                                    oe,
                                    fe,
                                    he,
                                    ue,
                                    de = [
                                        B,
                                        _
                                    ],
                                    ce = [
                                        L,
                                        D
                                    ];
                                for (oe = de[0], fe = de[1], he = ce[0], ue = ce[1], ne = 0, ie = O.length; ie > ne; ++ne) if (ae = O[ne], V.a(oe[ae], fe[ae], c), ae > 256) V.a(O[++ne], O[++ne], c),
                                    se = O[++ne],
                                    V.a(he[se], ue[se], c),
                                    V.a(O[++ne], O[++ne], c);
                                else if (256 === ae) break;
                                this.b = V.finish(),
                                    this.c = this.b.length;
                                break;
                            default:
                                throw 'invalid compression type'
                        }
                        return this.b
                    };
                    var E = function () {
                            function e(e) {
                                switch (c) {
                                    case 3 === e:
                                        return [257,
                                            e - 3,
                                            0];
                                    case 4 === e:
                                        return [258,
                                            e - 4,
                                            0];
                                    case 5 === e:
                                        return [259,
                                            e - 5,
                                            0];
                                    case 6 === e:
                                        return [260,
                                            e - 6,
                                            0];
                                    case 7 === e:
                                        return [261,
                                            e - 7,
                                            0];
                                    case 8 === e:
                                        return [262,
                                            e - 8,
                                            0];
                                    case 9 === e:
                                        return [263,
                                            e - 9,
                                            0];
                                    case 10 === e:
                                        return [264,
                                            e - 10,
                                            0];
                                    case 12 >= e:
                                        return [265,
                                            e - 11,
                                            1];
                                    case 14 >= e:
                                        return [266,
                                            e - 13,
                                            1];
                                    case 16 >= e:
                                        return [267,
                                            e - 15,
                                            1];
                                    case 18 >= e:
                                        return [268,
                                            e - 17,
                                            1];
                                    case 22 >= e:
                                        return [269,
                                            e - 19,
                                            2];
                                    case 26 >= e:
                                        return [270,
                                            e - 23,
                                            2];
                                    case 30 >= e:
                                        return [271,
                                            e - 27,
                                            2];
                                    case 34 >= e:
                                        return [272,
                                            e - 31,
                                            2];
                                    case 42 >= e:
                                        return [273,
                                            e - 35,
                                            3];
                                    case 50 >= e:
                                        return [274,
                                            e - 43,
                                            3];
                                    case 58 >= e:
                                        return [275,
                                            e - 51,
                                            3];
                                    case 66 >= e:
                                        return [276,
                                            e - 59,
                                            3];
                                    case 82 >= e:
                                        return [277,
                                            e - 67,
                                            4];
                                    case 98 >= e:
                                        return [278,
                                            e - 83,
                                            4];
                                    case 114 >= e:
                                        return [279,
                                            e - 99,
                                            4];
                                    case 130 >= e:
                                        return [280,
                                            e - 115,
                                            4];
                                    case 162 >= e:
                                        return [281,
                                            e - 131,
                                            5];
                                    case 194 >= e:
                                        return [282,
                                            e - 163,
                                            5];
                                    case 226 >= e:
                                        return [283,
                                            e - 195,
                                            5];
                                    case 257 >= e:
                                        return [284,
                                            e - 227,
                                            5];
                                    case 258 === e:
                                        return [285,
                                            e - 258,
                                            0];
                                    default:
                                        throw 'invalid length: ' + e
                                }
                            }
                            var r,
                                t,
                                n = [
                                ];
                            for (r = 3; 258 >= r; r++) t = e(r),
                                n[r] = t[2] << 24 | t[1] << 16 | t[0];
                            return n
                        }(),
                        I = p ? new Uint32Array(E)  : E;
                    e('Zlib.RawDeflate', i),
                        e('Zlib.RawDeflate.prototype.compress', i.prototype.h);
                    var S,
                        k,
                        T,
                        O,
                        U = {
                            NONE: 0,
                            FIXED: 1,
                            DYNAMIC: C
                        };
                    if (Object.keys) S = Object.keys(U);
                    else for (k in S = [
                    ], T = 0, U) S[T++] = k;
                    for (T = 0, O = S.length; O > T; ++T) k = S[T],
                        e('Zlib.RawDeflate.CompressionType.' + k, U[k])
                }).call(this)
            },
            {
            }
        ],
        20: [
            function () {
                (function () {
                    'use strict';
                    function e(e, r) {
                        var t = e.split('.'),
                            n = s;
                        !(t[0] in n) && n.execScript && n.execScript('var ' + t[0]);
                        for (var i; t.length && (i = t.shift()); ) t.length || void 0 === r ? n = n[i] ? n[i] : n[i] = {
                        }
                            : n[i] = r
                    }
                    function r(e) {
                        var r,
                            t,
                            n,
                            i,
                            a,
                            s,
                            f,
                            h,
                            u,
                            d,
                            c = e.length,
                            l = 0,
                            p = Number.POSITIVE_INFINITY;
                        for (h = 0; c > h; ++h) e[h] > l && (l = e[h]),
                        e[h] < p && (p = e[h]);
                        for (r = 1 << l, t = new (o ? Uint32Array : Array) (r), n = 1, i = 0, a = 2; l >= n; ) {
                            for (h = 0; c > h; ++h) if (e[h] === n) {
                                for (s = 0, f = i, u = 0; n > u; ++u) s = s << 1 | 1 & f,
                                    f >>= 1;
                                for (d = n << 16 | h, u = s; r > u; u += a) t[u] = d;
                                ++i
                            }
                            ++n,
                                i <<= 1,
                                a <<= 1
                        }
                        return [t,
                            l,
                            p]
                    }
                    function t(e, r) {
                        switch (this.g = [
                        ], this.h = 32768, this.c = this.f = this.d = this.k = 0, this.input = o ? new Uint8Array(e)  : e, this.l = !1, this.i = h, this.q = !1, (r || !(r = {
                        })) && (r.index && (this.d = r.index), r.bufferSize && (this.h = r.bufferSize), r.bufferType && (this.i = r.bufferType), r.resize && (this.q = r.resize)), this.i) {
                            case f:
                                this.a = 32768,
                                    this.b = new (o ? Uint8Array : Array) (32768 + this.h + 258);
                                break;
                            case h:
                                this.a = 0,
                                    this.b = new (o ? Uint8Array : Array) (this.h),
                                    this.e = this.v,
                                    this.m = this.s,
                                    this.j = this.t;
                                break;
                            default:
                                throw Error('invalid inflate mode')
                        }
                    }
                    function n(e, r) {
                        for (var t, n = e.f, i = e.c, a = e.input, s = e.d, o = a.length; r > i; ) {
                            if (s >= o) throw Error('input buffer is broken');
                            n |= a[s++] << i,
                                i += 8
                        }
                        return t = n & (1 << r) - 1,
                            e.f = n >>> r,
                            e.c = i - r,
                            e.d = s,
                            t
                    }
                    function i(e, r) {
                        for (var t, n, i = e.f, a = e.c, s = e.input, o = e.d, f = s.length, h = r[0], u = r[1]; u > a && !(o >= f); ) i |= s[o++] << a,
                            a += 8;
                        return t = h[i & (1 << u) - 1],
                            n = t >>> 16,
                            e.f = i >> n,
                            e.c = a - n,
                            e.d = o,
                        65535 & t
                    }
                    function a(e) {
                        function t(e, r, t) {
                            var a,
                                s,
                                o,
                                f = this.p;
                            for (o = 0; e > o; ) switch (a = i(this, r)) {
                                case 16:
                                    for (s = 3 + n(this, 2); s--; ) t[o++] = f;
                                    break;
                                case 17:
                                    for (s = 3 + n(this, 3); s--; ) t[o++] = 0;
                                    f = 0;
                                    break;
                                case 18:
                                    for (s = 11 + n(this, 7); s--; ) t[o++] = 0;
                                    f = 0;
                                    break;
                                default:
                                    f = t[o++] = a
                            }
                            return this.p = f,
                                t
                        }
                        var a,
                            s,
                            f,
                            h,
                            u = n(e, 5) + 257,
                            d = n(e, 5) + 1,
                            c = n(e, 4) + 4,
                            p = new (o ? Uint8Array : Array) (l.length);
                        for (h = 0; c > h; ++h) p[l[h]] = n(e, 3);
                        if (!o) for (h = c, c = p.length; c > h; ++h) p[l[h]] = 0;
                        a = r(p),
                            s = new (o ? Uint8Array : Array) (u),
                            f = new (o ? Uint8Array : Array) (d),
                            e.p = 0,
                            e.j(r(t.call(e, u, a, s)), r(t.call(e, d, a, f)))
                    }
                    var s = this,
                        o = 'undefined' != typeof Uint8Array && 'undefined' != typeof Uint16Array && 'undefined' != typeof Uint32Array && 'undefined' != typeof DataView,
                        f = 0,
                        h = 1;
                    t.prototype.u = function () {
                        for (; !this.l; ) {
                            var e = n(this, 3);
                            switch (1 & e && (this.l = !0), e >>>= 1) {
                                case 0:
                                    var r = this.input,
                                        t = this.d,
                                        i = this.b,
                                        s = this.a,
                                        u = r.length,
                                        d = void 0,
                                        c = void 0,
                                        l = i.length,
                                        p = void 0;
                                    if (this.c = this.f = 0, t + 1 >= u) throw Error('invalid uncompressed block header: LEN');
                                    if (d = r[t++] | r[t++] << 8, t + 1 >= u) throw Error('invalid uncompressed block header: NLEN');
                                    if (c = r[t++] | r[t++] << 8, d === ~c) throw Error('invalid uncompressed block header: length verify');
                                    if (t + d > r.length) throw Error('input buffer is broken');
                                    switch (this.i) {
                                        case f:
                                            for (; s + d > i.length; ) {
                                                if (p = l - s, d -= p, o) i.set(r.subarray(t, t + p), s),
                                                    s += p,
                                                    t += p;
                                                else for (; p--; ) i[s++] = r[t++];
                                                this.a = s,
                                                    i = this.e(),
                                                    s = this.a
                                            }
                                            break;
                                        case h:
                                            for (; s + d > i.length; ) i = this.e({
                                                o: 2
                                            });
                                            break;
                                        default:
                                            throw Error('invalid inflate mode')
                                    }
                                    if (o) i.set(r.subarray(t, t + d), s),
                                        s += d,
                                        t += d;
                                    else for (; d--; ) i[s++] = r[t++];
                                    this.d = t,
                                        this.a = s,
                                        this.b = i;
                                    break;
                                case 1:
                                    this.j(I, k);
                                    break;
                                case 2:
                                    a(this);
                                    break;
                                default:
                                    throw Error('unknown BTYPE: ' + e)
                            }
                        }
                        return this.m()
                    };
                    var u,
                        d,
                        c = [
                            16,
                            17,
                            18,
                            0,
                            8,
                            7,
                            9,
                            6,
                            10,
                            5,
                            11,
                            4,
                            12,
                            3,
                            13,
                            2,
                            14,
                            1,
                            15
                        ],
                        l = o ? new Uint16Array(c)  : c,
                        p = [
                            3,
                            4,
                            5,
                            6,
                            7,
                            8,
                            9,
                            10,
                            11,
                            13,
                            15,
                            17,
                            19,
                            23,
                            27,
                            31,
                            35,
                            43,
                            51,
                            59,
                            67,
                            83,
                            99,
                            115,
                            131,
                            163,
                            195,
                            227,
                            258,
                            258,
                            258
                        ],
                        y = o ? new Uint16Array(p)  : p,
                        g = [
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            1,
                            1,
                            1,
                            1,
                            2,
                            2,
                            2,
                            2,
                            3,
                            3,
                            3,
                            3,
                            4,
                            4,
                            4,
                            4,
                            5,
                            5,
                            5,
                            5,
                            0,
                            0,
                            0
                        ],
                        b = o ? new Uint8Array(g)  : g,
                        m = [
                            1,
                            2,
                            3,
                            4,
                            5,
                            7,
                            9,
                            13,
                            17,
                            25,
                            33,
                            49,
                            65,
                            97,
                            129,
                            193,
                            257,
                            385,
                            513,
                            769,
                            1025,
                            1537,
                            2049,
                            3073,
                            4097,
                            6145,
                            8193,
                            12289,
                            16385,
                            24577
                        ],
                        w = o ? new Uint16Array(m)  : m,
                        A = [
                            0,
                            0,
                            0,
                            0,
                            1,
                            1,
                            2,
                            2,
                            3,
                            3,
                            4,
                            4,
                            5,
                            5,
                            6,
                            6,
                            7,
                            7,
                            8,
                            8,
                            9,
                            9,
                            10,
                            10,
                            11,
                            11,
                            12,
                            12,
                            13,
                            13
                        ],
                        v = o ? new Uint8Array(A)  : A,
                        C = new (o ? Uint8Array : Array) (288);
                    for (u = 0, d = C.length; d > u; ++u) C[u] = 143 >= u ? 8 : 255 >= u ? 9 : 279 >= u ? 7 : 8;
                    var x,
                        E,
                        I = r(C),
                        S = new (o ? Uint8Array : Array) (30);
                    for (x = 0, E = S.length; E > x; ++x) S[x] = 5;
                    var k = r(S);
                    t.prototype.j = function (e, r) {
                        var t = this.b,
                            a = this.a;
                        this.n = e;
                        for (var s, o, f, h, u = t.length - 258; 256 !== (s = i(this, e)); ) if (256 > s) a >= u && (this.a = a, t = this.e(), a = this.a),
                            t[a++] = s;
                        else for (o = s - 257, h = y[o], 0 < b[o] && (h += n(this, b[o])), s = i(this, r), f = w[s], 0 < v[s] && (f += n(this, v[s])), a >= u && (this.a = a, t = this.e(), a = this.a); h--; ) t[a] = t[a++ - f];
                        for (; 8 <= this.c; ) this.c -= 8,
                            this.d--;
                        this.a = a
                    },
                        t.prototype.t = function (e, r) {
                            var t = this.b,
                                a = this.a;
                            this.n = e;
                            for (var s, o, f, h, u = t.length; 256 !== (s = i(this, e)); ) if (256 > s) a >= u && (t = this.e(), u = t.length),
                                t[a++] = s;
                            else for (o = s - 257, h = y[o], 0 < b[o] && (h += n(this, b[o])), s = i(this, r), f = w[s], 0 < v[s] && (f += n(this, v[s])), a + h > u && (t = this.e(), u = t.length); h--; ) t[a] = t[a++ - f];
                            for (; 8 <= this.c; ) this.c -= 8,
                                this.d--;
                            this.a = a
                        },
                        t.prototype.e = function () {
                            var e,
                                r,
                                t = new (o ? Uint8Array : Array) (this.a - 32768),
                                n = this.a - 32768,
                                i = this.b;
                            if (o) t.set(i.subarray(32768, t.length));
                            else for (e = 0, r = t.length; r > e; ++e) t[e] = i[e + 32768];
                            if (this.g.push(t), this.k += t.length, o) i.set(i.subarray(n, n + 32768));
                            else for (e = 0; 32768 > e; ++e) i[e] = i[n + e];
                            return this.a = 32768,
                                i
                        },
                        t.prototype.v = function (e) {
                            var r,
                                t,
                                n,
                                i,
                                a = this.input.length / this.d + 1 | 0,
                                s = this.input,
                                f = this.b;
                            return e && ('number' == typeof e.o && (a = e.o), 'number' == typeof e.r && (a += e.r)),
                                2 > a ? (t = (s.length - this.d) / this.n[2], i = 258 * (t / 2) | 0, n = i < f.length ? f.length + i : f.length << 1)  : n = f.length * a,
                                o ? (r = new Uint8Array(n), r.set(f))  : r = f,
                                this.b = r
                        },
                        t.prototype.m = function () {
                            var e,
                                r,
                                t,
                                n,
                                i,
                                a = 0,
                                s = this.b,
                                f = this.g,
                                h = new (o ? Uint8Array : Array) (this.k + (this.a - 32768));
                            if (0 === f.length) return o ? this.b.subarray(32768, this.a)  : this.b.slice(32768, this.a);
                            for (r = 0, t = f.length; t > r; ++r) for (e = f[r], n = 0, i = e.length; i > n; ++n) h[a++] = e[n];
                            for (r = 32768, t = this.a; t > r; ++r) h[a++] = s[r];
                            return this.g = [
                            ],
                                this.buffer = h
                        },
                        t.prototype.s = function () {
                            var e,
                                r = this.a;
                            return o ? this.q ? (e = new Uint8Array(r), e.set(this.b.subarray(0, r)))  : e = this.b.subarray(0, r)  : (this.b.length > r && (this.b.length = r), e = this.b),
                                this.buffer = e
                        },
                        e('Zlib.RawInflate', t),
                        e('Zlib.RawInflate.prototype.decompress', t.prototype.u);
                    var T,
                        O,
                        U,
                        R,
                        z = {
                            ADAPTIVE: h,
                            BLOCK: f
                        };
                    if (Object.keys) T = Object.keys(z);
                    else for (O in T = [
                    ], U = 0, z) T[U++] = O;
                    for (U = 0, R = T.length; R > U; ++U) O = T[U],
                        e('Zlib.RawInflate.BufferType.' + O, z[O])
                }).call(this)
            },
            {
            }
        ]
    }, {
    }, [
        7
    ]) (7)
});
!function (t) {
    if ('object' == typeof exports && 'undefined' != typeof module) module.exports = t();
    else if ('function' == typeof define && define.amd) define([], t);
    else {
        var e;
        'undefined' != typeof window ? e = window : 'undefined' != typeof global ? e = global : 'undefined' != typeof self && (e = self),
            e.LZMA = t()
    }
}(function () {
    return function t(e, i, s) {
        function r(o, a) {
            if (!i[o]) {
                if (!e[o]) {
                    var h = 'function' == typeof require && require;
                    if (!a && h) return h(o, !0);
                    if (n) return n(o, !0);
                    var c = new Error('Cannot find module \'' + o + '\'');
                    throw c.code = 'MODULE_NOT_FOUND',
                        c
                }
                var u = i[o] = {
                    exports: {
                    }
                };
                e[o][0].call(u.exports, function (t) {
                    var i = e[o][1][t];
                    return r(i ? i : t)
                }, u, u.exports, t, e, i, s)
            }
            return i[o].exports
        }
        for (var n = 'function' == typeof require && require, o = 0; o < s.length; o++) r(s[o]);
        return r
    }({
            1: [
                function (t, e, i) {
                    (function (e) {
                        t('buffer'),
                            function () {
                                var t,
                                    i,
                                    s;
                                !function (e) {
                                    function r(t, e) {
                                        return b.call(t, e)
                                    }
                                    function n(t, e) {
                                        var i,
                                            s,
                                            r,
                                            n,
                                            o,
                                            a,
                                            h,
                                            c,
                                            u,
                                            f,
                                            p,
                                            d = e && e.split('/'),
                                            _ = v.map,
                                            l = _ && _['*'] || {
                                                };
                                        if (t && '.' === t.charAt(0)) if (e) {
                                            for (d = d.slice(0, d.length - 1), t = t.split('/'), o = t.length - 1, v.nodeIdCompat && k.test(t[o]) && (t[o] = t[o].replace(k, '')), t = d.concat(t), u = 0; u < t.length; u += 1) if (p = t[u], '.' === p) t.splice(u, 1),
                                                u -= 1;
                                            else if ('..' === p) {
                                                if (1 === u && ('..' === t[2] || '..' === t[0])) break;
                                                u > 0 && (t.splice(u - 1, 2), u -= 2)
                                            }
                                            t = t.join('/')
                                        } else 0 === t.indexOf('./') && (t = t.substring(2));
                                        if ((d || l) && _) {
                                            for (i = t.split('/'), u = i.length; u > 0; u -= 1) {
                                                if (s = i.slice(0, u).join('/'), d) for (f = d.length; f > 0; f -= 1) if (r = _[d.slice(0, f).join('/')], r && (r = r[s])) {
                                                    n = r,
                                                        a = u;
                                                    break
                                                }
                                                if (n) break;
                                                !h && l && l[s] && (h = l[s], c = u)
                                            }
                                            !n && h && (n = h, a = c),
                                            n && (i.splice(0, a, n), t = i.join('/'))
                                        }
                                        return t
                                    }
                                    function o(t, i) {
                                        return function () {
                                            return d.apply(e, B.call(arguments, 0).concat([t,
                                                i]))
                                        }
                                    }
                                    function a(t) {
                                        return function (e) {
                                            return n(e, t)
                                        }
                                    }
                                    function h(t) {
                                        return function (e) {
                                            m[t] = e
                                        }
                                    }
                                    function c(t) {
                                        if (r(g, t)) {
                                            var i = g[t];
                                            delete g[t],
                                                y[t] = !0,
                                                p.apply(e, i)
                                        }
                                        if (!r(m, t) && !r(y, t)) throw new Error('No ' + t);
                                        return m[t]
                                    }
                                    function u(t) {
                                        var e,
                                            i = t ? t.indexOf('!')  : - 1;
                                        return i > - 1 && (e = t.substring(0, i), t = t.substring(i + 1, t.length)),
                                            [
                                                e,
                                                t
                                            ]
                                    }
                                    function f(t) {
                                        return function () {
                                            return v && v.config && v.config[t] || {
                                                }
                                        }
                                    }
                                    var p,
                                        d,
                                        _,
                                        l,
                                        m = {
                                        },
                                        g = {
                                        },
                                        v = {
                                        },
                                        y = {
                                        },
                                        b = Object.prototype.hasOwnProperty,
                                        B = [
                                        ].slice,
                                        k = /\.js$/;
                                    _ = function (t, e) {
                                        var i,
                                            s = u(t),
                                            r = s[0];
                                        return t = s[1],
                                        r && (r = n(r, e), i = c(r)),
                                            r ? t = i && i.normalize ? i.normalize(t, a(e))  : n(t, e)  : (t = n(t, e), s = u(t), r = s[0], t = s[1], r && (i = c(r))),
                                        {
                                            f: r ? r + '!' + t : t,
                                            n: t,
                                            pr: r,
                                            p: i
                                        }
                                    },
                                        l = {
                                            require: function (t) {
                                                return o(t)
                                            },
                                            exports: function (t) {
                                                var e = m[t];
                                                return 'undefined' != typeof e ? e : m[t] = {
                                                }
                                            },
                                            module: function (t) {
                                                return {
                                                    id: t,
                                                    uri: '',
                                                    exports: m[t],
                                                    config: f(t)
                                                }
                                            }
                                        },
                                        p = function (t, i, s, n) {
                                            var a,
                                                u,
                                                f,
                                                p,
                                                d,
                                                v,
                                                b = [
                                                ],
                                                B = typeof s;
                                            if (n = n || t, 'undefined' === B || 'function' === B) {
                                                for (i = !i.length && s.length ? [
                                                    'require',
                                                    'exports',
                                                    'module'
                                                ] : i, d = 0; d < i.length; d += 1) if (p = _(i[d], n), u = p.f, 'require' === u) b[d] = l.require(t);
                                                else if ('exports' === u) b[d] = l.exports(t),
                                                    v = !0;
                                                else if ('module' === u) a = b[d] = l.module(t);
                                                else if (r(m, u) || r(g, u) || r(y, u)) b[d] = c(u);
                                                else {
                                                    if (!p.p) throw new Error(t + ' missing ' + u);
                                                    p.p.load(p.n, o(n, !0), h(u), {
                                                    }),
                                                        b[d] = m[u]
                                                }
                                                f = s ? s.apply(m[t], b)  : void 0,
                                                t && (a && a.exports !== e && a.exports !== m[t] ? m[t] = a.exports : f === e && v || (m[t] = f))
                                            } else t && (m[t] = s)
                                        },
                                        t = i = d = function (t, i, s, r, n) {
                                            if ('string' == typeof t) return l[t] ? l[t](i)  : c(_(t, i).f);
                                            if (!t.splice) {
                                                if (v = t, v.deps && d(v.deps, v.callback), !i) return;
                                                i.splice ? (t = i, i = s, s = null)  : t = e
                                            }
                                            return i = i || function () {
                                                },
                                            'function' == typeof s && (s = r, r = n),
                                                r ? p(e, t, i, s)  : setTimeout(function () {
                                                    p(e, t, i, s)
                                                }, 4),
                                                d
                                        },
                                        d.config = function (t) {
                                            return d(t)
                                        },
                                        t._defined = m,
                                        s = function (t, e, i) {
                                            e.splice || (i = e, e = [
                                            ]),
                                            !r(m, t) && !r(g, t) && (g[t] = [
                                                t,
                                                e,
                                                i
                                            ])
                                        },
                                        s.amd = {
                                            jQuery: !0
                                        }
                                }(),
                                    s('../almond', function () {
                                    }),
                                    s('lib/freeze', [
                                    ], function () {
                                        return function (t) {
                                            return t
                                        }
                                    }),
                                    s('lib/makeBuffer', [
                                    ], function () {
                                        var t = function (t) {
                                            var i = new e(t);
                                            return i.fill(0),
                                                i
                                        };
                                        return t
                                    }),
                                    s('lib/LZ/InWindow', [
                                        '../freeze',
                                        '../makeBuffer'
                                    ], function (t, e) {
                                        var i = function (t, e, i, s) {
                                            if (arguments.length >= 4) {
                                                var r = Array.prototype.slice.call(arguments, 0),
                                                    n = r.pop();
                                                this.create.apply(this, r),
                                                    this.setStream(n),
                                                    this.init()
                                            }
                                        };
                                        return i.prototype.moveBlock = function () {
                                            var t,
                                                e = this._bufferOffset + this._pos + this._keepSizeBefore;
                                            e > 0 && e--;
                                            var i = this._bufferOffset + this._streamPos - e;
                                            for (t = 0; i > t; t++) this._bufferBase[t] = this._bufferBase[e + t];
                                            this._bufferOffset -= e
                                        },
                                            i.prototype.readBlock = function () {
                                                if (!this._streamEndWasReached) for (; ; ) {
                                                    var t = - this._bufferOffset + this._blockSize - this._streamPos;
                                                    if (0 === t) return;
                                                    var e = this._stream.read(this._bufferBase, this._bufferOffset + this._streamPos, t);
                                                    if (0 >= e) {
                                                        this._posLimit = this._streamPos;
                                                        var i = this._bufferOffset + this._posLimit;
                                                        return i > this._pointerToLastSafePosition && (this._posLimit = this._pointerToLastSafePosition - this._bufferOffset),
                                                            void (this._streamEndWasReached = !0)
                                                    }
                                                    this._streamPos += e,
                                                    this._streamPos >= this._pos + this._keepSizeAfter && (this._posLimit = this._streamPos - this._keepSizeAfter)
                                                }
                                            },
                                            i.prototype.free = function () {
                                                this._bufferBase = null
                                            },
                                            i.prototype.create = function (t, i, s) {
                                                this._keepSizeBefore = t,
                                                    this._keepSizeAfter = i;
                                                var r = t + i + s;
                                                this._bufferBase && this._blockSize === r || (this.free(), this._blockSize = r, this._bufferBase = e(this._blockSize)),
                                                    this._pointerToLastSafePosition = this._blockSize - i
                                            },
                                            i.prototype.setStream = function (t) {
                                                this._stream = t
                                            },
                                            i.prototype.releaseStream = function () {
                                                this._stream = null
                                            },
                                            i.prototype.init = function () {
                                                this._bufferOffset = 0,
                                                    this._pos = 0,
                                                    this._streamPos = 0,
                                                    this._streamEndWasReached = !1,
                                                    this.readBlock()
                                            },
                                            i.prototype.movePos = function () {
                                                if (this._pos++, this._pos > this._posLimit) {
                                                    var t = this._bufferOffset + this._pos;
                                                    t > this._pointerToLastSafePosition && this.moveBlock(),
                                                        this.readBlock()
                                                }
                                            },
                                            i.prototype.getIndexByte = function (t) {
                                                return this._bufferBase[this._bufferOffset + this._pos + t]
                                            },
                                            i.prototype.getMatchLen = function (t, e, i) {
                                                var s,
                                                    r;
                                                for (this._streamEndWasReached && this._pos + t + i > this._streamPos && (i = this._streamPos - (this._pos + t)), e++, s = this._bufferOffset + this._pos + t, r = 0; i > r && this._bufferBase[s + r] === this._bufferBase[s + r - e]; ) r++;
                                                return r
                                            },
                                            i.prototype.getNumAvailableBytes = function () {
                                                return this._streamPos - this._pos
                                            },
                                            i.prototype.reduceOffsets = function (t) {
                                                this._bufferOffset += t,
                                                    this._posLimit -= t,
                                                    this._pos -= t,
                                                    this._streamPos -= t
                                            },
                                            t(i)
                                    }),
                                    s('lib/LZ/BinTree', [
                                        '../freeze',
                                        './InWindow'
                                    ], function (t, e) {
                                        function i() {
                                            if (e.call(this), this._cyclicBufferSize = 0, this._son = [
                                                ], this._hash = [
                                                ], this._cutValue = 255, this._hashSizeSum = 0, this.HASH_ARRAY = !0, this.kNumHashDirectBytes = 0, this.kMinMatchCheck = 4, this.kFixHashSize = r + n, arguments.length >= 6) {
                                                var t = Array.prototype.slice.call(arguments, 0);
                                                this.setType(t.shift());
                                                var i = t.pop();
                                                this.create.apply(this, t),
                                                    this.setStream(i),
                                                    this.init()
                                            }
                                        }
                                        var s = function () {
                                            var t = [
                                            ];
                                            'undefined' != typeof Uint32Array && (t = new Uint32Array(256));
                                            var e,
                                                i,
                                                s,
                                                r = 3988292384;
                                            for (e = 0; 256 > e; e++) {
                                                for (s = e, i = 0; 8 > i; i++) 0 !== (1 & s) ? s = s >>> 1 ^ r : s >>>= 1;
                                                t[e] = s
                                            }
                                            return t
                                        }();
                                        console.assert(256 === s.length);
                                        var r = 1024,
                                            n = 65536,
                                            o = 65536,
                                            a = 1,
                                            h = r,
                                            c = 0,
                                            u = (1 << 30) - 1,
                                            f = e.prototype;
                                        return i.prototype = Object.create(f),
                                            i.prototype.setType = function (t) {
                                                this.HASH_ARRAY = t > 2,
                                                    this.HASH_ARRAY ? (this.kNumHashDirectBytes = 0, this.kMinMatchCheck = 4, this.kFixHashSize = r + n)  : (this.kNumHashDirectBytes = 2, this.kMinMatchCheck = 3, this.kFixHashSize = 0)
                                            },
                                            i.prototype.init = function () {
                                                var t;
                                                for (f.init.call(this), t = 0; t < this._hashSizeSum; t++) this._hash[t] = c;
                                                this._cyclicBufferPos = 0,
                                                    this.reduceOffsets( - 1)
                                            },
                                            i.prototype.movePos = function () {
                                                ++this._cyclicBufferPos >= this._cyclicBufferSize && (this._cyclicBufferPos = 0),
                                                    f.movePos.call(this),
                                                this._pos === u && this.normalize()
                                            },
                                            i.prototype.create = function (t, e, i, s) {
                                                var r,
                                                    n,
                                                    a;
                                                return t > u - 256 ? (console.assert(!1, 'Unsupported historySize'), !1)  : (this._cutValue = 16 + (i >>> 1), r = (t + e + i + s) / 2 + 256, f.create.call(this, t + e, i + s, r), this._matchMaxLen = i, n = t + 1, this._cyclicBufferSize !== n && (this._cyclicBufferSize = n, this._son = [
                                                ], this._son.length = 2 * n), a = o, this.HASH_ARRAY && (a = t - 1, a |= a >>> 1, a |= a >>> 2, a |= a >>> 4, a |= a >>> 8, a >>>= 1, a |= 65535, a > 1 << 24 && (a >>>= 1), this._hashMask = a, a++, a += this.kFixHashSize), a !== this._hashSizeSum && (this._hashSizeSum = a, this._hash = [
                                                ], this._hash.length = this._hashSizeSum), !0)
                                            },
                                            i.prototype.getMatches = function (t) {
                                                var e;
                                                if (this._pos + this._matchMaxLen <= this._streamPos) e = this._matchMaxLen;
                                                else if (e = this._streamPos - this._pos, e < this.kMinMatchCheck) return this.movePos(),
                                                    0;
                                                var i = 0,
                                                    o = this._pos > this._cyclicBufferSize ? this._pos - this._cyclicBufferSize : 0,
                                                    u = this._bufferOffset + this._pos,
                                                    f = a,
                                                    p = 0,
                                                    d = 0,
                                                    _ = 0;
                                                if (this.HASH_ARRAY) {
                                                    var l = s[this._bufferBase[u]] ^ this._bufferBase[u + 1];
                                                    d = l & r - 1,
                                                        l ^= this._bufferBase[u + 2] << 8,
                                                        _ = l & n - 1,
                                                        p = (l ^ s[this._bufferBase[u + 3]] << 5) & this._hashMask
                                                } else p = this._bufferBase[u] ^ this._bufferBase[u + 1] << 8;
                                                var m = this._hash[this.kFixHashSize + p];
                                                if (this.HASH_ARRAY) {
                                                    var g = this._hash[d],
                                                        v = this._hash[h + _];
                                                    this._hash[d] = this._pos,
                                                        this._hash[h + _] = this._pos,
                                                    g > o && this._bufferBase[this._bufferOffset + g] === this._bufferBase[u] && (t[i++] = f = 2, t[i++] = this._pos - g - 1),
                                                    v > o && this._bufferBase[this._bufferOffset + v] === this._bufferBase[u] && (v === g && (i -= 2), t[i++] = f = 3, t[i++] = this._pos - v - 1, g = v),
                                                    0 !== i && g === m && (i -= 2, f = a)
                                                }
                                                this._hash[this.kFixHashSize + p] = this._pos;
                                                var y,
                                                    b,
                                                    B = (this._cyclicBufferPos << 1) + 1,
                                                    k = this._cyclicBufferPos << 1;
                                                y = b = this.kNumHashDirectBytes,
                                                0 !== this.kNumHashDirectBytes && m > o && this._bufferBase[this._bufferOffset + m + this.kNumHashDirectBytes] !== this._bufferBase[u + this.kNumHashDirectBytes] && (t[i++] = f = this.kNumHashDirectBytes, t[i++] = this._pos - m - 1);
                                                for (var P = this._cutValue; ; ) {
                                                    if (o >= m || 0 === P--) {
                                                        this._son[B] = this._son[k] = c;
                                                        break
                                                    }
                                                    var S = this._pos - m,
                                                        w = (S <= this._cyclicBufferPos ? this._cyclicBufferPos - S : this._cyclicBufferPos - S + this._cyclicBufferSize) << 1,
                                                        E = this._bufferOffset + m,
                                                        M = Math.min(y, b);
                                                    if (this._bufferBase[E + M] === this._bufferBase[u + M]) {
                                                        for (; ++M !== e && this._bufferBase[E + M] === this._bufferBase[u + M]; );
                                                        if (M > f && (t[i++] = f = M, t[i++] = S - 1, M === e)) {
                                                            this._son[k] = this._son[w],
                                                                this._son[B] = this._son[w + 1];
                                                            break
                                                        }
                                                    }
                                                    this._bufferBase[E + M] < this._bufferBase[u + M] ? (this._son[k] = m, k = w + 1, m = this._son[k], b = M)  : (this._son[B] = m, B = w, m = this._son[B], y = M)
                                                }
                                                return this.movePos(),
                                                    i
                                            },
                                            i.prototype.skip = function (t) {
                                                var e,
                                                    i,
                                                    o,
                                                    a,
                                                    u,
                                                    f,
                                                    p,
                                                    d,
                                                    _,
                                                    l,
                                                    m,
                                                    g,
                                                    v,
                                                    y,
                                                    b,
                                                    B,
                                                    k;
                                                do {
                                                    if (this._pos + this._matchMaxLen <= this._streamPos) e = this._matchMaxLen;
                                                    else if (e = this._streamPos - this._pos, e < this.kMinMatchCheck) {
                                                        this.movePos();
                                                        continue
                                                    }
                                                    for (i = this._pos > this._cyclicBufferSize ? this._pos - this._cyclicBufferSize : 0, o = this._bufferOffset + this._pos, this.HASH_ARRAY ? (d = s[this._bufferBase[o]] ^ this._bufferBase[o + 1], f = d & r - 1, this._hash[f] = this._pos, d ^= this._bufferBase[o + 2] << 8, p = d & n - 1, this._hash[h + p] = this._pos, u = (d ^ s[this._bufferBase[o + 3]] << 5) & this._hashMask)  : u = this._bufferBase[o] ^ this._bufferBase[o + 1] << 8, a = this._hash[this.kFixHashSize + u], this._hash[this.kFixHashSize + u] = this._pos, _ = (this._cyclicBufferPos << 1) + 1, l = this._cyclicBufferPos << 1, m = g = this.kNumHashDirectBytes, v = this._cutValue; ; ) {
                                                        if (i >= a || 0 === v--) {
                                                            this._son[_] = this._son[l] = c;
                                                            break
                                                        }
                                                        if (y = this._pos - a, b = (y <= this._cyclicBufferPos ? this._cyclicBufferPos - y : this._cyclicBufferPos - y + this._cyclicBufferSize) << 1, B = this._bufferOffset + a, k = g > m ? m : g, this._bufferBase[B + k] === this._bufferBase[o + k]) {
                                                            for (; ++k !== e && this._bufferBase[B + k] === this._bufferBase[o + k]; );
                                                            if (k === e) {
                                                                this._son[l] = this._son[b],
                                                                    this._son[_] = this._son[b + 1];
                                                                break
                                                            }
                                                        }
                                                        this._bufferBase[B + k] < this._bufferBase[o + k] ? (this._son[l] = a, l = b + 1, a = this._son[l], g = k)  : (this._son[_] = a, _ = b, a = this._son[_], m = k)
                                                    }
                                                    this.movePos()
                                                } while (0 !== --t)
                                            },
                                            i.prototype.normalizeLinks = function (t, e, i) {
                                                var s,
                                                    r;
                                                for (s = 0; e > s; s++) r = t[s],
                                                    i >= r ? r = c : r -= i,
                                                    t[s] = r
                                            },
                                            i.prototype.normalize = function () {
                                                var t = this._pos - this._cyclicBufferSize;
                                                this.normalizeLinks(this._son, 2 * this._cyclicBufferSize, t),
                                                    this.normalizeLinks(this._hash, this._hashSizeSum, t),
                                                    this.reduceOffsets(t)
                                            },
                                            i.prototype.setCutValue = function (t) {
                                                this._cutValue = t
                                            },
                                            t(i.prototype),
                                            t(i)
                                    }),
                                    s('lib/LZ/OutWindow', [
                                        '../freeze',
                                        '../makeBuffer'
                                    ], function (t, e) {
                                        var i = function () {
                                            this._windowSize = 0
                                        };
                                        return i.prototype.create = function (t) {
                                            this._buffer && this._windowSize === t || (this._buffer = e(t)),
                                                this._windowSize = t,
                                                this._pos = 0,
                                                this._streamPos = 0
                                        },
                                            i.prototype.flush = function () {
                                                var t = this._pos - this._streamPos;
                                                if (0 !== t) {
                                                    for (; t--; ) this._stream.writeByte(this._buffer[this._streamPos++]);
                                                    this._pos >= this._windowSize && (this._pos = 0),
                                                        this._streamPos = this._pos
                                                }
                                            },
                                            i.prototype.releaseStream = function () {
                                                this.flush(),
                                                    this._stream = null
                                            },
                                            i.prototype.setStream = function (t) {
                                                this.releaseStream(),
                                                    this._stream = t
                                            },
                                            i.prototype.init = function (t) {
                                                t || (this._streamPos = 0, this._pos = 0)
                                            },
                                            i.prototype.copyBlock = function (t, e) {
                                                var i = this._pos - t - 1;
                                                for (0 > i && (i += this._windowSize); e--; ) i >= this._windowSize && (i = 0),
                                                    this._buffer[this._pos++] = this._buffer[i++],
                                                this._pos >= this._windowSize && this.flush()
                                            },
                                            i.prototype.putByte = function (t) {
                                                this._buffer[this._pos++] = t,
                                                this._pos >= this._windowSize && this.flush()
                                            },
                                            i.prototype.getByte = function (t) {
                                                var e = this._pos - t - 1;
                                                return 0 > e && (e += this._windowSize),
                                                    this._buffer[e]
                                            },
                                            t(i.prototype),
                                            t(i)
                                    }),
                                    s('lib/LZ', [
                                        './freeze',
                                        './LZ/BinTree',
                                        './LZ/InWindow',
                                        './LZ/OutWindow'
                                    ], function (t, e, i, s) {
                                        return t({
                                            BinTree: e,
                                            InWindow: i,
                                            OutWindow: s
                                        })
                                    }),
                                    s('lib/LZMA/Base', [
                                        '../freeze'
                                    ], function (t) {
                                        var e = Object.create(null);
                                        return e.kNumRepDistances = 4,
                                            e.kNumStates = 12,
                                            e.stateInit = function () {
                                                return 0
                                            },
                                            e.stateUpdateChar = function (t) {
                                                return 4 > t ? 0 : 10 > t ? t - 3 : t - 6
                                            },
                                            e.stateUpdateMatch = function (t) {
                                                return 7 > t ? 7 : 10
                                            },
                                            e.stateUpdateRep = function (t) {
                                                return 7 > t ? 8 : 11
                                            },
                                            e.stateUpdateShortRep = function (t) {
                                                return 7 > t ? 9 : 11
                                            },
                                            e.stateIsCharState = function (t) {
                                                return 7 > t
                                            },
                                            e.kNumPosSlotBits = 6,
                                            e.kDicLogSizeMin = 0,
                                            e.kNumLenToPosStatesBits = 2,
                                            e.kNumLenToPosStates = 1 << e.kNumLenToPosStatesBits,
                                            e.kMatchMinLen = 2,
                                            e.getLenToPosState = function (t) {
                                                return t -= e.kMatchMinLen,
                                                    t < e.kNumLenToPosStates ? t : e.kNumLenToPosStates - 1
                                            },
                                            e.kNumAlignBits = 4,
                                            e.kAlignTableSize = 1 << e.kNumAlignBits,
                                            e.kAlignMask = e.kAlignTableSize - 1,
                                            e.kStartPosModelIndex = 4,
                                            e.kEndPosModelIndex = 14,
                                            e.kNumPosModels = e.kEndPosModelIndex - e.kStartPosModelIndex,
                                            e.kNumFullDistances = 1 << e.kEndPosModelIndex / 2,
                                            e.kNumLitPosStatesBitsEncodingMax = 4,
                                            e.kNumLitContextBitsMax = 8,
                                            e.kNumPosStatesBitsMax = 4,
                                            e.kNumPosStatesMax = 1 << e.kNumPosStatesBitsMax,
                                            e.kNumPosStatesBitsEncodingMax = 4,
                                            e.kNumPosStatesEncodingMax = 1 << e.kNumPosStatesBitsEncodingMax,
                                            e.kNumLowLenBits = 3,
                                            e.kNumMidLenBits = 3,
                                            e.kNumHighLenBits = 8,
                                            e.kNumLowLenSymbols = 1 << e.kNumLowLenBits,
                                            e.kNumMidLenSymbols = 1 << e.kNumMidLenBits,
                                            e.kNumLenSymbols = e.kNumLowLenSymbols + e.kNumMidLenSymbols + (1 << e.kNumHighLenBits),
                                            e.kMatchMaxLen = e.kMatchMinLen + e.kNumLenSymbols - 1,
                                            t(e)
                                    }),
                                    s('lib/RangeCoder/Encoder', [
                                        '../freeze'
                                    ], function (t) {
                                        var e = 4294967295,
                                            i = 16777215,
                                            s = 255,
                                            r = 4278190080,
                                            n = 11,
                                            o = 1 << n,
                                            a = 5,
                                            h = 2,
                                            c = 6,
                                            u = function (t) {
                                                this.init(),
                                                t && this.setStream(t)
                                            };
                                        u.prototype.setStream = function (t) {
                                            this._stream = t
                                        },
                                            u.prototype.releaseStream = function () {
                                                this._stream = null
                                            },
                                            u.prototype.init = function () {
                                                this._position = 0,
                                                    this.low = 0,
                                                    this.range = e,
                                                    this._cacheSize = 1,
                                                    this._cache = 0
                                            },
                                            u.prototype.flushData = function () {
                                                var t;
                                                for (t = 0; 5 > t; t++) this.shiftLow()
                                            },
                                            u.prototype.flushStream = function () {
                                                this._stream.flush && this._stream.flush()
                                            },
                                            u.prototype.shiftLow = function () {
                                                var t = this.low > e ? 1 : 0;
                                                if (this.low < r || t) {
                                                    this._position += this._cacheSize;
                                                    var n = this._cache;
                                                    do this._stream.writeByte(n + t & s),
                                                        n = s;
                                                    while (0 !== --this._cacheSize);
                                                    this._cache = this.low >>> 24
                                                }
                                                this._cacheSize++,
                                                    this.low = 256 * (this.low & i)
                                            },
                                            u.prototype.encodeDirectBits = function (t, e) {
                                                var s,
                                                    r;
                                                for (r = 1 << e - 1, s = e - 1; s >= 0; s--, r >>>= 1) this.range >>>= 1,
                                                t & r && (this.low += this.range),
                                                this.range <= i && (this.range *= 256, this.shiftLow())
                                            },
                                            u.prototype.getProcessedSizeAdd = function () {
                                                return this._cacheSize + this._position + 4
                                            },
                                            u.initBitModels = function (t, e) {
                                                var i;
                                                for (e && !t && ('undefined' != typeof Uint16Array ? t = new Uint16Array(e)  : (t = [
                                                ], t.length = e)), i = 0; i < t.length; i++) t[i] = o >>> 1;
                                                return t
                                            },
                                            u.prototype.encode = function (t, e, s) {
                                                var r = t[e],
                                                    h = (this.range >>> n) * r;
                                                0 === s ? (this.range = h, t[e] = r + (o - r >>> a))  : (this.low += h, this.range -= h, t[e] = r - (r >>> a)),
                                                this.range <= i && (this.range *= 256, this.shiftLow())
                                            };
                                        var f = [
                                        ];
                                        return 'undefined' != typeof Uint32Array && (f = new Uint32Array(o >>> h)),
                                            function () {
                                                var t,
                                                    e,
                                                    i = n - h;
                                                for (t = i - 1; t >= 0; t--) {
                                                    var s = 1 << i - t - 1,
                                                        r = 1 << i - t;
                                                    for (e = s; r > e; e++) f[e] = (t << c) + (r - e << c >>> i - t - 1)
                                                }
                                            }(),
                                            u.getPrice = function (t, e) {
                                                return f[((t - e ^ - e) & o - 1) >>> h]
                                            },
                                            u.getPrice0 = function (t) {
                                                return f[t >>> h]
                                            },
                                            u.getPrice1 = function (t) {
                                                return f[o - t >>> h]
                                            },
                                            u.kNumBitPriceShiftBits = c,
                                            t(u.prototype),
                                            t(u)
                                    }),
                                    s('lib/RangeCoder/BitTreeDecoder', [
                                        '../freeze',
                                        './Encoder'
                                    ], function (t, e) {
                                        var i = function (t) {
                                            this._numBitLevels = t,
                                                this.init()
                                        };
                                        return i.prototype.init = function () {
                                            this._models = e.initBitModels(null, 1 << this._numBitLevels)
                                        },
                                            i.prototype.decode = function (t) {
                                                for (var e = 1, i = this._numBitLevels; i--; ) e = e << 1 | t.decodeBit(this._models, e);
                                                return e - (1 << this._numBitLevels)
                                            },
                                            i.prototype.reverseDecode = function (t) {
                                                for (var e, i = 1, s = 0, r = 0; r < this._numBitLevels; ++r) e = t.decodeBit(this._models, i),
                                                    i = i << 1 | e,
                                                    s |= e << r;
                                                return s
                                            },
                                            i.reverseDecode = function (t, e, i, s) {
                                                for (var r, n = 1, o = 0, a = 0; s > a; ++a) r = i.decodeBit(t, e + n),
                                                    n = n << 1 | r,
                                                    o |= r << a;
                                                return o
                                            },
                                            t(i.prototype),
                                            t(i)
                                    }),
                                    s('lib/RangeCoder/BitTreeEncoder', [
                                        '../freeze',
                                        './Encoder'
                                    ], function (t, e) {
                                        var i = function (t) {
                                            this._numBitLevels = t,
                                                this.init()
                                        };
                                        return i.prototype.init = function () {
                                            this._models = e.initBitModels(null, 1 << this._numBitLevels)
                                        },
                                            i.prototype.encode = function (t, e) {
                                                var i,
                                                    s = 1;
                                                for (i = this._numBitLevels; i > 0; ) {
                                                    i--;
                                                    var r = e >>> i & 1;
                                                    t.encode(this._models, s, r),
                                                        s = s << 1 | r
                                                }
                                            },
                                            i.prototype.reverseEncode = function (t, e) {
                                                var i,
                                                    s = 1;
                                                for (i = 0; i < this._numBitLevels; i++) {
                                                    var r = 1 & e;
                                                    t.encode(this._models, s, r),
                                                        s = s << 1 | r,
                                                        e >>>= 1
                                                }
                                            },
                                            i.reverseEncode = function (t, e, i, s, r) {
                                                var n,
                                                    o = 1;
                                                for (n = 0; s > n; n++) {
                                                    var a = 1 & r;
                                                    i.encode(t, e + o, a),
                                                        o = o << 1 | a,
                                                        r >>>= 1
                                                }
                                            },
                                            i.prototype.getPrice = function (t) {
                                                var i,
                                                    s = 0,
                                                    r = 1;
                                                for (i = this._numBitLevels; i > 0; ) {
                                                    i--;
                                                    var n = t >>> i & 1;
                                                    s += e.getPrice(this._models[r], n),
                                                        r = r << 1 | n
                                                }
                                                return s
                                            },
                                            i.prototype.reverseGetPrice = function (t) {
                                                var i,
                                                    s = 0,
                                                    r = 1;
                                                for (i = this._numBitLevels; i > 0; i--) {
                                                    var n = 1 & t;
                                                    t >>>= 1,
                                                        s += e.getPrice(this._models[r], n),
                                                        r = r << 1 | n
                                                }
                                                return s
                                            },
                                            i.reverseGetPrice = function (t, i, s, r) {
                                                var n,
                                                    o = 0,
                                                    a = 1;
                                                for (n = s; n > 0; n--) {
                                                    var h = 1 & r;
                                                    r >>>= 1,
                                                        o += e.getPrice(t[i + a], h),
                                                        a = a << 1 | h
                                                }
                                                return o
                                            },
                                            t(i.prototype),
                                            t(i)
                                    }),
                                    s('lib/RangeCoder/Decoder', [
                                        '../freeze'
                                    ], function (t) {
                                        var e = function (t) {
                                            t && (this.setStream(t), this.init())
                                        };
                                        return e.prototype.setStream = function (t) {
                                            this._stream = t
                                        },
                                            e.prototype.releaseStream = function () {
                                                this._stream = null
                                            },
                                            e.prototype.init = function () {
                                                var t = 5;
                                                for (this._code = 0, this._range = - 1; t--; ) this._code = this._code << 8 | this._stream.readByte()
                                            },
                                            e.prototype.decodeDirectBits = function (t) {
                                                for (var e, i = 0, s = t; s--; ) this._range >>>= 1,
                                                    e = this._code - this._range >>> 31,
                                                    this._code -= this._range & e - 1,
                                                    i = i << 1 | 1 - e,
                                                0 === (4278190080 & this._range) && (this._code = this._code << 8 | this._stream.readByte(), this._range <<= 8);
                                                return i
                                            },
                                            e.prototype.decodeBit = function (t, e) {
                                                var i = t[e],
                                                    s = (this._range >>> 11) * i;
                                                return (2147483648 ^ this._code) < (2147483648 ^ s) ? (this._range = s, t[e] += 2048 - i >>> 5, 0 === (4278190080 & this._range) && (this._code = this._code << 8 | this._stream.readByte(), this._range <<= 8), 0)  : (this._range -= s, this._code -= s, t[e] -= i >>> 5, 0 === (4278190080 & this._range) && (this._code = this._code << 8 | this._stream.readByte(), this._range <<= 8), 1)
                                            },
                                            t(e.prototype),
                                            t(e)
                                    }),
                                    s('lib/RangeCoder', [
                                        './freeze',
                                        './RangeCoder/BitTreeDecoder',
                                        './RangeCoder/BitTreeEncoder',
                                        './RangeCoder/Decoder',
                                        './RangeCoder/Encoder'
                                    ], function (t, e, i, s, r) {
                                        return t({
                                            BitTreeDecoder: e,
                                            BitTreeEncoder: i,
                                            Decoder: s,
                                            Encoder: r
                                        })
                                    }),
                                    s('lib/LZMA/Decoder', [
                                        './Base',
                                        '../LZ',
                                        '../RangeCoder'
                                    ], function (t, e, i) {
                                        var s = i.Encoder.initBitModels,
                                            r = function () {
                                                this._choice = s(null, 2),
                                                    this._lowCoder = [
                                                    ],
                                                    this._midCoder = [
                                                    ],
                                                    this._highCoder = new i.BitTreeDecoder(8),
                                                    this._numPosStates = 0
                                            };
                                        r.prototype.create = function (t) {
                                            for (; this._numPosStates < t; ++this._numPosStates) this._lowCoder[this._numPosStates] = new i.BitTreeDecoder(3),
                                                this._midCoder[this._numPosStates] = new i.BitTreeDecoder(3)
                                        },
                                            r.prototype.init = function () {
                                                var t = this._numPosStates;
                                                for (s(this._choice); t--; ) this._lowCoder[t].init(),
                                                    this._midCoder[t].init();
                                                this._highCoder.init()
                                            },
                                            r.prototype.decode = function (t, e) {
                                                return 0 === t.decodeBit(this._choice, 0) ? this._lowCoder[e].decode(t)  : 0 === t.decodeBit(this._choice, 1) ? 8 + this._midCoder[e].decode(t)  : 16 + this._highCoder.decode(t)
                                            };
                                        var n = function () {
                                        };
                                        n.Decoder2 = function () {
                                            this._decoders = s(null, 768)
                                        },
                                            n.Decoder2.prototype.init = function () {
                                                s(this._decoders)
                                            },
                                            n.Decoder2.prototype.decodeNormal = function (t) {
                                                var e = 1;
                                                do e = e << 1 | t.decodeBit(this._decoders, e);
                                                while (256 > e);
                                                return 255 & e
                                            },
                                            n.Decoder2.prototype.decodeWithMatchByte = function (t, e) {
                                                var i,
                                                    s,
                                                    r = 1;
                                                do if (i = e >> 7 & 1, e <<= 1, s = t.decodeBit(this._decoders, (1 + i << 8) + r), r = r << 1 | s, i !== s) {
                                                    for (; 256 > r; ) r = r << 1 | t.decodeBit(this._decoders, r);
                                                    break
                                                } while (256 > r);
                                                return 255 & r
                                            },
                                            n.prototype.create = function (t, e) {
                                                var i;
                                                if (!this._coders || this._numPrevBits !== e || this._numPosBits !== t) for (this._numPosBits = t, this._posMask = (1 << t) - 1, this._numPrevBits = e, this._coders = [
                                                ], i = 1 << this._numPrevBits + this._numPosBits; i--; ) this._coders[i] = new n.Decoder2
                                            },
                                            n.prototype.init = function () {
                                                for (var t = 1 << this._numPrevBits + this._numPosBits; t--; ) this._coders[t].init()
                                            },
                                            n.prototype.getDecoder = function (t, e) {
                                                return this._coders[((t & this._posMask) << this._numPrevBits) + ((255 & e) >>> 8 - this._numPrevBits)]
                                            };
                                        var o = function () {
                                            var o;
                                            for (this._outWindow = new e.OutWindow, this._rangeDecoder = new i.Decoder, this._isMatchDecoders = s(null, t.kNumStates << t.kNumPosStatesBitsMax), this._isRepDecoders = s(null, t.kNumStates), this._isRepG0Decoders = s(null, t.kNumStates), this._isRepG1Decoders = s(null, t.kNumStates), this._isRepG2Decoders = s(null, t.kNumStates), this._isRep0LongDecoders = s(null, t.kNumStates << t.kNumPosStatesBitsMax), this._posSlotDecoder = [
                                            ], this._posDecoders = s(null, t.kNumFullDistances - t.kEndPosModelIndex), this._posAlignDecoder = new i.BitTreeDecoder(t.kNumAlignBits), this._lenDecoder = new r, this._repLenDecoder = new r, this._literalDecoder = new n, this._dictionarySize = - 1, this._dictionarySizeCheck = - 1, this._posStateMask = 0, o = 0; o < t.kNumLenToPosStates; o++) this._posSlotDecoder[o] = new i.BitTreeDecoder(t.kNumPosSlotBits)
                                        };
                                        return o.prototype.setDictionarySize = function (t) {
                                            return 0 > t ? !1 : (this._dictionarySize !== t && (this._dictionarySize = t, this._dictionarySizeCheck = Math.max(this._dictionarySize, 1), this._outWindow.create(Math.max(this._dictionarySizeCheck, 4096))), !0)
                                        },
                                            o.prototype.setLcLpPb = function (e, i, s) {
                                                var r = 1 << s;
                                                return e > t.kNumLitContextBitsMax || i > 4 || s > t.kNumPosStatesBitsMax ? !1 : (this._literalDecoder.create(i, e), this._lenDecoder.create(r), this._repLenDecoder.create(r), this._posStateMask = r - 1, !0)
                                            },
                                            o.prototype.init = function () {
                                                var e = t.kNumLenToPosStates;
                                                for (this._outWindow.init(!1), s(this._isMatchDecoders), s(this._isRepDecoders), s(this._isRepG0Decoders), s(this._isRepG1Decoders), s(this._isRepG2Decoders), s(this._isRep0LongDecoders), s(this._posDecoders), this._literalDecoder.init(); e--; ) this._posSlotDecoder[e].init();
                                                this._lenDecoder.init(),
                                                    this._repLenDecoder.init(),
                                                    this._posAlignDecoder.init(),
                                                    this._rangeDecoder.init()
                                            },
                                            o.prototype.code = function (e, s, r) {
                                                var n,
                                                    o,
                                                    a,
                                                    h,
                                                    c,
                                                    u,
                                                    f,
                                                    p = 0,
                                                    d = 0,
                                                    _ = 0,
                                                    l = 0,
                                                    m = 0,
                                                    g = 0;
                                                for (this._rangeDecoder.setStream(e), this._outWindow.setStream(s), this.init(), n = t.stateInit(); 0 > r || r > m; ) if (o = m & this._posStateMask, 0 === this._rangeDecoder.decodeBit(this._isMatchDecoders, (n << t.kNumPosStatesBitsMax) + o)) a = this._literalDecoder.getDecoder(m, g),
                                                    g = t.stateIsCharState(n) ? a.decodeNormal(this._rangeDecoder)  : a.decodeWithMatchByte(this._rangeDecoder, this._outWindow.getByte(p)),
                                                    this._outWindow.putByte(g),
                                                    n = t.stateUpdateChar(n),
                                                    m++;
                                                else {
                                                    if (1 === this._rangeDecoder.decodeBit(this._isRepDecoders, n)) h = 0,
                                                        0 === this._rangeDecoder.decodeBit(this._isRepG0Decoders, n) ? 0 === this._rangeDecoder.decodeBit(this._isRep0LongDecoders, (n << t.kNumPosStatesBitsMax) + o) && (n = t.stateUpdateShortRep(n), h = 1)  : (0 === this._rangeDecoder.decodeBit(this._isRepG1Decoders, n) ? c = d : (0 === this._rangeDecoder.decodeBit(this._isRepG2Decoders, n) ? c = _ : (c = l, l = _), _ = d), d = p, p = c),
                                                    0 === h && (h = t.kMatchMinLen + this._repLenDecoder.decode(this._rangeDecoder, o), n = t.stateUpdateRep(n));
                                                    else if (l = _, _ = d, d = p, h = t.kMatchMinLen + this._lenDecoder.decode(this._rangeDecoder, o), n = t.stateUpdateMatch(n), u = this._posSlotDecoder[t.getLenToPosState(h)].decode(this._rangeDecoder), u >= t.kStartPosModelIndex) {
                                                        if (f = (u >> 1) - 1, p = (2 | 1 & u) << f, u < t.kEndPosModelIndex) p += i.BitTreeDecoder.reverseDecode(this._posDecoders, p - u - 1, this._rangeDecoder, f);
                                                        else if (p += this._rangeDecoder.decodeDirectBits(f - t.kNumAlignBits) << t.kNumAlignBits, p += this._posAlignDecoder.reverseDecode(this._rangeDecoder), 0 > p) {
                                                            if ( - 1 === p) break;
                                                            return !1
                                                        }
                                                    } else p = u;
                                                    if (p >= m || p >= this._dictionarySizeCheck) return !1;
                                                    this._outWindow.copyBlock(p, h),
                                                        m += h,
                                                        g = this._outWindow.getByte(0)
                                                }
                                                return this._outWindow.flush(),
                                                    this._outWindow.releaseStream(),
                                                    this._rangeDecoder.releaseStream(),
                                                    !0
                                            },
                                            o.prototype.setDecoderProperties = function (t) {
                                                var e,
                                                    i,
                                                    s,
                                                    r,
                                                    n,
                                                    o,
                                                    a;
                                                if (t.length < 5) return !1;
                                                if (e = 255 & t[0], i = e % 9, e = ~~(e / 9), s = e % 5, r = ~~(e / 5), !this.setLcLpPb(i, s, r)) return !1;
                                                for (n = 0, o = 0, a = 1; 4 > o; o++, a *= 256) n += (255 & t[1 + o]) * a;
                                                return this.setDictionarySize(n)
                                            },
                                            o.prototype.setDecoderPropertiesFromStream = function (t) {
                                                var e,
                                                    i = [
                                                    ];
                                                for (e = 0; 5 > e; e++) i[e] = t.readByte();
                                                return this.setDecoderProperties(i)
                                            },
                                            o
                                    }),
                                    s('lib/LZMA/Encoder', [
                                        './Base',
                                        '../RangeCoder',
                                        '../LZ',
                                        '../freeze',
                                        '../makeBuffer'
                                    ], function (t, e, i, s, r) {
                                        var n = e.Encoder.initBitModels,
                                            o = 0,
                                            a = 1,
                                            h = 268435455,
                                            c = 22,
                                            u = 32,
                                            f = 4096,
                                            p = 5,
                                            d = function () {
                                                var t,
                                                    e = r(2048),
                                                    i = 22,
                                                    s = 2;
                                                for (e[0] = 0, e[1] = 1, t = 2; i > t; t++) {
                                                    var n,
                                                        o = 1 << (t >> 1) - 1;
                                                    for (n = 0; o > n; n++, s++) e[s] = t
                                                }
                                                return e
                                            }(),
                                            _ = function (t) {
                                                return 2048 > t ? d[t] : 1 << 21 > t ? d[t >>> 10] + 20 : d[t >>> 20] + 40
                                            },
                                            l = function (t) {
                                                return 1 << 17 > t ? d[t >>> 6] + 12 : 1 << 27 > t ? d[t >>> 16] + 32 : d[t >>> 26] + 52
                                            },
                                            m = function () {
                                                var i;
                                                for (this._state = t.stateInit(), this._previousByte = 0, this._repDistances = [
                                                ], this._repDistances.length = t.kNumRepDistances, this._optimum = [
                                                ], this._matchFinder = null, this._rangeEncoder = new e.Encoder, this._isMatch = n(null, t.kNumStates << t.kNumPosStatesBitsMax), this._isRep = n(null, t.kNumStates), this._isRepG0 = n(null, t.kNumStates), this._isRepG1 = n(null, t.kNumStates), this._isRepG2 = n(null, t.kNumStates), this._isRep0Long = n(null, t.kNumStates << t.kNumPosStatesBitsMax), this._posSlotEncoder = [
                                                ], this._posEncoders = n(null, t.kNumFullDistances - t.kEndPosModelIndex), this._posAlignEncoder = new e.BitTreeEncoder(t.kNumAlignBits), this._lenEncoder = new m.LenPriceTableEncoder, this._repMatchLenEncoder = new m.LenPriceTableEncoder, this._literalEncoder = new m.LiteralEncoder, this._matchDistances = [
                                                ], this._matchDistances.length = 2 * t.kMatchMaxLen + 2, i = 0; i < this._matchDistances.length; i++) this._matchDistances[i] = 0;
                                                for (this._numFastBytes = u, this._longestMatchLength = 0, this._numDistancePairs = 0, this._additionalOffset = 0, this._optimumEndIndex = 0, this._optimumCurrentIndex = 0, this._longestMatchWasFound = !1, this._posSlotPrices = [
                                                ], this._distancesPrices = [
                                                ], this._alignPrices = [
                                                ], this._alignPriceCount = 0, this._distTableSize = 2 * c, this._posStateBits = 2, this._posStateMask = 3, this._numLiteralPosStateBits = 0, this._numLiteralContextBits = 3, this._dictionarySize = 1 << c, this._dictionarySizePrev = 4294967295, this._numFastBytesPrev = 4294967295, this.nowPos64 = 0, this._finished = !1, this._inStream = null, this._matchFinderType = a, this._writeEndMark = !1, this._needReleaseMFStream = !1, this.reps = [
                                                ], this.repLens = [
                                                ], this.backRes = 0, i = 0; f > i; i++) this._optimum[i] = new m.Optimal;
                                                for (i = 0; i < t.kNumLenToPosStates; i++) this._posSlotEncoder[i] = new e.BitTreeEncoder(t.kNumPosSlotBits);
                                                this._matchPriceCount = 0,
                                                    this.processedInSize = [
                                                        0
                                                    ],
                                                    this.processedOutSize = [
                                                        0
                                                    ],
                                                    this.finished = [
                                                        !1
                                                    ]
                                            };
                                        m.prototype.baseInit = function () {
                                            var e;
                                            for (this._state = t.stateInit(), this._previousByte = 0, e = 0; e < t.kNumRepDistances; e++) this._repDistances[e] = 0
                                        };
                                        var g = m.LiteralEncoder = function () {
                                            this._coders = null,
                                                this._numPrevBits = - 1,
                                                this._numPosBits = - 1,
                                                this._posMask = 0
                                        };
                                        g.Encoder2 = function () {
                                            this._encoders = n(null, 768)
                                        },
                                            g.Encoder2.prototype.init = function () {
                                                n(this._encoders)
                                            },
                                            g.Encoder2.prototype.encode = function (t, e) {
                                                var i,
                                                    s = 1;
                                                for (i = 7; i >= 0; i--) {
                                                    var r = e >>> i & 1;
                                                    t.encode(this._encoders, s, r),
                                                        s = s << 1 | r
                                                }
                                            },
                                            g.Encoder2.prototype.encodeMatched = function (t, e, i) {
                                                var s,
                                                    r = 1,
                                                    n = !0;
                                                for (s = 7; s >= 0; s--) {
                                                    var o = i >> s & 1,
                                                        a = r;
                                                    if (n) {
                                                        var h = e >>> s & 1;
                                                        a += 1 + h << 8,
                                                            n = h === o
                                                    }
                                                    t.encode(this._encoders, a, o),
                                                        r = r << 1 | o
                                                }
                                            },
                                            g.Encoder2.prototype.getPrice = function (t, i, s) {
                                                var r,
                                                    n,
                                                    o = 0,
                                                    a = 1,
                                                    h = 7;
                                                if (t) for (; h >= 0; h--) if (n = i >>> h & 1, r = s >>> h & 1, o += e.Encoder.getPrice(this._encoders[(1 + n << 8) + a], r), a = a << 1 | r, n !== r) {
                                                    h--;
                                                    break
                                                }
                                                for (; h >= 0; h--) r = s >>> h & 1,
                                                    o += e.Encoder.getPrice(this._encoders[a], r),
                                                    a = a << 1 | r;
                                                return o
                                            },
                                            g.prototype.create = function (t, e) {
                                                var i;
                                                if (!this._coders || this._numPrevBits !== e || this._numPosBits !== t) {
                                                    this._numPosBits = t,
                                                        this._posMask = (1 << t) - 1,
                                                        this._numPrevBits = e;
                                                    var s = 1 << this._numPrevBits + this._numPosBits;
                                                    for (this._coders = [
                                                    ], i = 0; s > i; i++) this._coders[i] = new g.Encoder2
                                                }
                                            },
                                            g.prototype.init = function () {
                                                var t,
                                                    e = 1 << this._numPrevBits + this._numPosBits;
                                                for (t = 0; e > t; t++) this._coders[t].init()
                                            },
                                            g.prototype.getSubCoder = function (t, e) {
                                                return this._coders[((t & this._posMask) << this._numPrevBits) + (e >> 8 - this._numPrevBits)]
                                            };
                                        var v = m.LenEncoder = function () {
                                            var i;
                                            for (this._choice = n(null, 2), this._lowCoder = [
                                            ], this._midCoder = [
                                            ], this._highCoder = new e.BitTreeEncoder(t.kNumHighLenBits), i = 0; i < t.kNumPosStatesEncodingMax; i++) this._lowCoder[i] = new e.BitTreeEncoder(t.kNumLowLenBits),
                                                this._midCoder[i] = new e.BitTreeEncoder(t.kNumMidLenBits)
                                        };
                                        v.prototype.init = function (t) {
                                            var e;
                                            for (n(this._choice), e = 0; t > e; e++) this._lowCoder[e].init(),
                                                this._midCoder[e].init();
                                            this._highCoder.init()
                                        },
                                            v.prototype.encode = function (e, i, s) {
                                                i < t.kNumLowLenSymbols ? (e.encode(this._choice, 0, 0), this._lowCoder[s].encode(e, i))  : (i -= t.kNumLowLenSymbols, e.encode(this._choice, 0, 1), i < t.kNumMidLenSymbols ? (e.encode(this._choice, 1, 0), this._midCoder[s].encode(e, i))  : (e.encode(this._choice, 1, 1), this._highCoder.encode(e, i - t.kNumMidLenSymbols)))
                                            },
                                            v.prototype.setPrices = function (i, s, r, n) {
                                                var o,
                                                    a = e.Encoder.getPrice0(this._choice[0]),
                                                    h = e.Encoder.getPrice1(this._choice[0]),
                                                    c = h + e.Encoder.getPrice0(this._choice[1]),
                                                    u = h + e.Encoder.getPrice1(this._choice[1]);
                                                for (o = 0; o < t.kNumLowLenSymbols; o++) {
                                                    if (o >= s) return;
                                                    r[n + o] = a + this._lowCoder[i].getPrice(o)
                                                }
                                                for (; o < t.kNumLowLenSymbols + t.kNumMidLenSymbols; o++) {
                                                    if (o >= s) return;
                                                    r[n + o] = c + this._midCoder[i].getPrice(o - t.kNumLowLenSymbols)
                                                }
                                                for (; s > o; o++) r[n + o] = u + this._highCoder.getPrice(o - t.kNumLowLenSymbols - t.kNumMidLenSymbols)
                                            };
                                        var y = (t.kNumLowLenSymbols + t.kNumMidLenSymbols, m.LenPriceTableEncoder = function () {
                                            v.call(this),
                                                this._prices = [
                                                ],
                                                this._counters = [
                                                ],
                                                this._tableSize = 0
                                        });
                                        y.prototype = Object.create(v.prototype),
                                            y.prototype.setTableSize = function (t) {
                                                this._tableSize = t
                                            },
                                            y.prototype.getPrice = function (e, i) {
                                                return this._prices[i * t.kNumLenSymbols + e]
                                            },
                                            y.prototype.updateTable = function (e) {
                                                this.setPrices(e, this._tableSize, this._prices, e * t.kNumLenSymbols),
                                                    this._counters[e] = this._tableSize
                                            },
                                            y.prototype.updateTables = function (t) {
                                                var e;
                                                for (e = 0; t > e; e++) this.updateTable(e)
                                            },
                                            y.prototype.encode = function (t) {
                                                return function (e, i, s) {
                                                    t.call(this, e, i, s),
                                                    0 === --this._counters[s] && this.updateTable(s)
                                                }
                                            }(y.prototype.encode);
                                        var b = m.Optimal = function () {
                                            this.state = 0,
                                                this.prev1IsChar = !1,
                                                this.prev2 = !1,
                                                this.posPrev2 = 0,
                                                this.backPrev2 = 0,
                                                this.price = 0,
                                                this.posPrev = 0,
                                                this.backPrev = 0,
                                                this.backs0 = 0,
                                                this.backs1 = 0,
                                                this.backs2 = 0,
                                                this.backs3 = 0
                                        };
                                        return b.prototype.makeAsChar = function () {
                                            this.backPrev = - 1,
                                                this.prev1IsChar = !1
                                        },
                                            b.prototype.makeAsShortRep = function () {
                                                this.backPrev = 0,
                                                    this.prev1IsChar = !1
                                            },
                                            b.prototype.isShortRep = function () {
                                                return 0 === this.backPrev
                                            },
                                            m.prototype.create = function () {
                                                var e;
                                                if (!this._matchFinder) {
                                                    var s = new i.BinTree;
                                                    e = 4,
                                                    this._matchFinderType === o && (e = 2),
                                                        s.setType(e),
                                                        this._matchFinder = s
                                                }
                                                this._literalEncoder.create(this._numLiteralPosStateBits, this._numLiteralContextBits),
                                                (this._dictionarySize !== this._dictionarySizePrev || this._numFastBytesPrev !== this._numFastBytes) && (this._matchFinder.create(this._dictionarySize, f, this._numFastBytes, t.kMatchMaxLen + 1), this._dictionarySizePrev = this._dictionarySize, this._numFastBytesPrev = this._numFastBytes)
                                            },
                                            m.prototype.setWriteEndMarkerMode = function (t) {
                                                this._writeEndMark = t
                                            },
                                            m.prototype.init = function () {
                                                var e;
                                                for (this.baseInit(), this._rangeEncoder.init(), n(this._isMatch), n(this._isRep0Long), n(this._isRep), n(this._isRepG0), n(this._isRepG1), n(this._isRepG2), n(this._posEncoders), this._literalEncoder.init(), e = 0; e < t.kNumLenToPosStates; e++) this._posSlotEncoder[e].init();
                                                this._lenEncoder.init(1 << this._posStateBits),
                                                    this._repMatchLenEncoder.init(1 << this._posStateBits),
                                                    this._posAlignEncoder.init(),
                                                    this._longestMatchWasFound = !1,
                                                    this._optimumEndIndex = 0,
                                                    this._optimumCurrentIndex = 0,
                                                    this._additionalOffset = 0
                                            },
                                            m.prototype.readMatchDistances = function () {
                                                var e = 0;
                                                return this._numDistancePairs = this._matchFinder.getMatches(this._matchDistances),
                                                this._numDistancePairs > 0 && (e = this._matchDistances[this._numDistancePairs - 2], e === this._numFastBytes && (e += this._matchFinder.getMatchLen(e - 1, this._matchDistances[this._numDistancePairs - 1], t.kMatchMaxLen - e))),
                                                    this._additionalOffset++,
                                                    e
                                            },
                                            m.prototype.movePos = function (t) {
                                                t > 0 && (this._matchFinder.skip(t), this._additionalOffset += t)
                                            },
                                            m.prototype.getRepLen1Price = function (i, s) {
                                                return e.Encoder.getPrice0(this._isRepG0[i]) + e.Encoder.getPrice0(this._isRep0Long[(i << t.kNumPosStatesBitsMax) + s])
                                            },
                                            m.prototype.getPureRepPrice = function (i, s, r) {
                                                var n;
                                                return 0 === i ? (n = e.Encoder.getPrice0(this._isRepG0[s]), n += e.Encoder.getPrice1(this._isRep0Long[(s << t.kNumPosStatesBitsMax) + r]))  : (n = e.Encoder.getPrice1(this._isRepG0[s]), 1 === i ? n += e.Encoder.getPrice0(this._isRepG1[s])  : (n += e.Encoder.getPrice1(this._isRepG1[s]), n += e.Encoder.getPrice(this._isRepG2[s], i - 2))),
                                                    n
                                            },
                                            m.prototype.getRepPrice = function (e, i, s, r) {
                                                var n = this._repMatchLenEncoder.getPrice(i - t.kMatchMinLen, r);
                                                return n + this.getPureRepPrice(e, s, r)
                                            },
                                            m.prototype.getPosLenPrice = function (e, i, s) {
                                                var r,
                                                    n = t.getLenToPosState(i);
                                                return r = e < t.kNumFullDistances ? this._distancesPrices[n * t.kNumFullDistances + e] : this._posSlotPrices[(n << t.kNumPosSlotBits) + l(e)] + this._alignPrices[e & t.kAlignMask],
                                                r + this._lenEncoder.getPrice(i - t.kMatchMinLen, s)
                                            },
                                            m.prototype.backward = function (t) {
                                                this._optimumEndIndex = t;
                                                var e = this._optimum[t].posPrev,
                                                    i = this._optimum[t].backPrev;
                                                do {
                                                    this._optimum[t].prev1IsChar && (this._optimum[e].makeAsChar(), this._optimum[e].posPrev = e - 1, this._optimum[t].prev2 && (this._optimum[e - 1].prev1IsChar = !1, this._optimum[e - 1].posPrev = this._optimum[t].posPrev2, this._optimum[e - 1].backPrev = this._optimum[t].backPrev2));
                                                    var s = e,
                                                        r = i;
                                                    i = this._optimum[s].backPrev,
                                                        e = this._optimum[s].posPrev,
                                                        this._optimum[s].backPrev = r,
                                                        this._optimum[s].posPrev = t,
                                                        t = s
                                                } while (t > 0);
                                                return this.backRes = this._optimum[0].backPrev,
                                                    this._optimumCurrentIndex = this._optimum[0].posPrev,
                                                    this._optimumCurrentIndex
                                            },
                                            m.prototype.getOptimum = function (i) {
                                                if (this._optimumEndIndex !== this._optimumCurrentIndex) {
                                                    var s = this._optimum[this._optimumCurrentIndex].posPrev - this._optimumCurrentIndex;
                                                    return this.backRes = this._optimum[this._optimumCurrentIndex].backPrev,
                                                        this._optimumCurrentIndex = this._optimum[this._optimumCurrentIndex].posPrev,
                                                        s
                                                }
                                                this._optimumCurrentIndex = this._optimumEndIndex = 0;
                                                var r;
                                                this._longestMatchWasFound ? (r = this._longestMatchLength, this._longestMatchWasFound = !1)  : r = this.readMatchDistances();
                                                var n = this._numDistancePairs,
                                                    o = this._matchFinder.getNumAvailableBytes() + 1;
                                                if (2 > o) return this.backRes = - 1,
                                                    1;
                                                o > t.kMatchMaxLen && (o = t.kMatchMaxLen);
                                                var a,
                                                    c = 0;
                                                for (a = 0; a < t.kNumRepDistances; a++) this.reps[a] = this._repDistances[a],
                                                    this.repLens[a] = this._matchFinder.getMatchLen( - 1, this.reps[a], t.kMatchMaxLen),
                                                this.repLens[a] > this.repLens[c] && (c = a);
                                                if (this.repLens[c] >= this._numFastBytes) {
                                                    this.backRes = c;
                                                    var u = this.repLens[c];
                                                    return this.movePos(u - 1),
                                                        u
                                                }
                                                if (r >= this._numFastBytes) return this.backRes = this._matchDistances[n - 1] + t.kNumRepDistances,
                                                    this.movePos(r - 1),
                                                    r;
                                                var p = this._matchFinder.getIndexByte( - 1),
                                                    d = this._matchFinder.getIndexByte( - this._repDistances[0] - 2);
                                                if (2 > r && p !== d && this.repLens[c] < 2) return this.backRes = - 1,
                                                    1;
                                                this._optimum[0].state = this._state;
                                                var _ = i & this._posStateMask;
                                                this._optimum[1].price = e.Encoder.getPrice0(this._isMatch[(this._state << t.kNumPosStatesBitsMax) + _]) + this._literalEncoder.getSubCoder(i, this._previousByte).getPrice(!t.stateIsCharState(this._state), d, p),
                                                    this._optimum[1].makeAsChar();
                                                var l = e.Encoder.getPrice1(this._isMatch[(this._state << t.kNumPosStatesBitsMax) + _]),
                                                    m = l + e.Encoder.getPrice1(this._isRep[this._state]);
                                                if (d === p) {
                                                    var g = m + this.getRepLen1Price(this._state, _);
                                                    g < this._optimum[1].price && (this._optimum[1].price = g, this._optimum[1].makeAsShortRep())
                                                }
                                                var v = r >= this.repLens[c] ? r : this.repLens[c];
                                                if (2 > v) return this.backRes = this._optimum[1].backPrev,
                                                    1;
                                                this._optimum[1].posPrev = 0,
                                                    this._optimum[0].backs0 = this.reps[0],
                                                    this._optimum[0].backs1 = this.reps[1],
                                                    this._optimum[0].backs2 = this.reps[2],
                                                    this._optimum[0].backs3 = this.reps[3];
                                                var y = v;
                                                do this._optimum[y--].price = h;
                                                while (y >= 2);
                                                for (a = 0; a < t.kNumRepDistances; a++) {
                                                    var b = this.repLens[a];
                                                    if (!(2 > b)) {
                                                        var B = m + this.getPureRepPrice(a, this._state, _);
                                                        do {
                                                            var k = B + this._repMatchLenEncoder.getPrice(b - 2, _),
                                                                P = this._optimum[b];
                                                            k < P.price && (P.price = k, P.posPrev = 0, P.backPrev = a, P.prev1IsChar = !1)
                                                        } while (--b >= 2)
                                                    }
                                                }
                                                var S = l + e.Encoder.getPrice0(this._isRep[this._state]);
                                                if (y = this.repLens[0] >= 2 ? this.repLens[0] + 1 : 2, r >= y) {
                                                    for (var w = 0; y > this._matchDistances[w]; ) w += 2;
                                                    for (; ; y++) {
                                                        var E = this._matchDistances[w + 1],
                                                            M = S + this.getPosLenPrice(E, y, _),
                                                            L = this._optimum[y];
                                                        if (M < L.price && (L.price = M, L.posPrev = 0, L.backPrev = E + t.kNumRepDistances, L.prev1IsChar = !1), y === this._matchDistances[w] && (w += 2, w === n)) break
                                                    }
                                                }
                                                for (var D = 0; ; ) {
                                                    if (D++, D === v) return this.backward(D);
                                                    var N = this.readMatchDistances();
                                                    if (n = this._numDistancePairs, N >= this._numFastBytes) return this._longestMatchLength = N,
                                                        this._longestMatchWasFound = !0,
                                                        this.backward(D);
                                                    i++;
                                                    var I,
                                                        A = this._optimum[D].posPrev;
                                                    if (this._optimum[D].prev1IsChar ? (A--, this._optimum[D].prev2 ? (I = this._optimum[this._optimum[D].posPrev2].state, I = this._optimum[D].backPrev2 < t.kNumRepDistances ? t.stateUpdateRep(I)  : t.stateUpdateMatch(I))  : I = this._optimum[A].state, I = t.stateUpdateChar(I))  : I = this._optimum[A].state, A === D - 1) I = this._optimum[D].isShortRep() ? t.stateUpdateShortRep(I)  : t.stateUpdateChar(I);
                                                    else {
                                                        var C;
                                                        this._optimum[D].prev1IsChar && this._optimum[D].prev2 ? (A = this._optimum[D].posPrev2, C = this._optimum[D].backPrev2, I = t.stateUpdateRep(I))  : (C = this._optimum[D].backPrev, I = C < t.kNumRepDistances ? t.stateUpdateRep(I)  : t.stateUpdateMatch(I));
                                                        var R = this._optimum[A];
                                                        C < t.kNumRepDistances ? 0 === C ? (this.reps[0] = R.backs0, this.reps[1] = R.backs1, this.reps[2] = R.backs2, this.reps[3] = R.backs3)  : 1 === C ? (this.reps[0] = R.backs1, this.reps[1] = R.backs0, this.reps[2] = R.backs2, this.reps[3] = R.backs3)  : 2 === C ? (this.reps[0] = R.backs2, this.reps[1] = R.backs0, this.reps[2] = R.backs1, this.reps[3] = R.backs3)  : (this.reps[0] = R.backs3, this.reps[1] = R.backs0, this.reps[2] = R.backs1, this.reps[3] = R.backs2)  : (this.reps[0] = C - t.kNumRepDistances, this.reps[1] = R.backs0, this.reps[2] = R.backs1, this.reps[3] = R.backs2)
                                                    }
                                                    this._optimum[D].state = I,
                                                        this._optimum[D].backs0 = this.reps[0],
                                                        this._optimum[D].backs1 = this.reps[1],
                                                        this._optimum[D].backs2 = this.reps[2],
                                                        this._optimum[D].backs3 = this.reps[3];
                                                    var x = this._optimum[D].price;
                                                    p = this._matchFinder.getIndexByte( - 1),
                                                        d = this._matchFinder.getIndexByte( - this.reps[0] - 2),
                                                        _ = i & this._posStateMask;
                                                    var z = x + e.Encoder.getPrice0(this._isMatch[(I << t.kNumPosStatesBitsMax) + _]) + this._literalEncoder.getSubCoder(i, this._matchFinder.getIndexByte( - 2)).getPrice(!t.stateIsCharState(I), d, p),
                                                        F = this._optimum[D + 1],
                                                        T = !1;
                                                    if (z < F.price && (F.price = z, F.posPrev = D, F.makeAsChar(), T = !0), l = x + e.Encoder.getPrice1(this._isMatch[(I << t.kNumPosStatesBitsMax) + _]), m = l + e.Encoder.getPrice1(this._isRep[I]), d === p && !(F.posPrev < D && 0 === F.backPrev)) {
                                                        var U = m + this.getRepLen1Price(I, _);
                                                        U <= F.price && (F.price = U, F.posPrev = D, F.makeAsShortRep(), T = !0)
                                                    }
                                                    var O = this._matchFinder.getNumAvailableBytes() + 1;
                                                    if (O = Math.min(f - 1 - D, O), o = O, !(2 > o)) {
                                                        if (o > this._numFastBytes && (o = this._numFastBytes), !T && d !== p) {
                                                            var H = Math.min(O - 1, this._numFastBytes),
                                                                G = this._matchFinder.getMatchLen(0, this.reps[0], H);
                                                            if (G >= 2) {
                                                                for (var W = t.stateUpdateChar(I), Z = i + 1 & this._posStateMask, j = z + e.Encoder.getPrice1(this._isMatch[(W << t.kNumPosStatesBitsMax) + Z]) + e.Encoder.getPrice1(this._isRep[W]), q = D + 1 + G; q > v; ) this._optimum[++v].price = h;
                                                                var Y = j + this.getRepPrice(0, G, W, Z),
                                                                    V = this._optimum[q];
                                                                Y < V.price && (V.price = Y, V.posPrev = D + 1, V.backPrev = 0, V.prev1IsChar = !0, V.prev2 = !1)
                                                            }
                                                        }
                                                        var J,
                                                            X = 2;
                                                        for (J = 0; J < t.kNumRepDistances; J++) {
                                                            var Q = this._matchFinder.getMatchLen( - 1, this.reps[J], o);
                                                            if (!(2 > Q)) {
                                                                var $ = Q;
                                                                do {
                                                                    for (; D + Q > v; ) this._optimum[++v].price = h;
                                                                    var K = m + this.getRepPrice(J, Q, I, _),
                                                                        tt = this._optimum[D + Q];
                                                                    K < tt.price && (tt.price = K, tt.posPrev = D, tt.backPrev = J, tt.prev1IsChar = !1)
                                                                } while (--Q >= 2);
                                                                if (Q = $, 0 === J && (X = Q + 1), O > Q) {
                                                                    var et = Math.min(O - 1 - Q, this._numFastBytes),
                                                                        it = this._matchFinder.getMatchLen(Q, this.reps[J], et);
                                                                    if (it >= 2) {
                                                                        var st = t.stateUpdateRep(I),
                                                                            rt = i + Q & this._posStateMask,
                                                                            nt = m + this.getRepPrice(J, Q, I, _) + e.Encoder.getPrice0(this._isMatch[(st << t.kNumPosStatesBitsMax) + rt]) + this._literalEncoder.getSubCoder(i + Q, this._matchFinder.getIndexByte(Q - 2)).getPrice(!0, this._matchFinder.getIndexByte(Q - 1 - (this.reps[J] + 1)), this._matchFinder.getIndexByte(Q - 1));
                                                                        st = t.stateUpdateChar(st),
                                                                            rt = i + Q + 1 & this._posStateMask;
                                                                        for (var ot = nt + e.Encoder.getPrice1(this._isMatch[(st << t.kNumPosStatesBitsMax) + rt]), at = ot + e.Encoder.getPrice1(this._isRep[st]), ht = Q + 1 + it; D + ht > v; ) this._optimum[++v].price = h;
                                                                        var ct = at + this.getRepPrice(0, it, st, rt),
                                                                            ut = this._optimum[D + ht];
                                                                        ct < ut.price && (ut.price = ct, ut.posPrev = D + Q + 1, ut.backPrev = 0, ut.prev1IsChar = !0, ut.prev2 = !0, ut.posPrev2 = D, ut.backPrev2 = J)
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        if (N > o) {
                                                            for (N = o, n = 0; N > this._matchDistances[n]; ) n += 2;
                                                            this._matchDistances[n] = N,
                                                                n += 2
                                                        }
                                                        if (N >= X) {
                                                            for (S = l + e.Encoder.getPrice0(this._isRep[I]); D + N > v; ) this._optimum[++v].price = h;
                                                            for (var ft = 0; X > this._matchDistances[ft]; ) ft += 2;
                                                            var pt;
                                                            for (pt = X; ; pt++) {
                                                                var dt = this._matchDistances[ft + 1],
                                                                    _t = S + this.getPosLenPrice(dt, pt, _),
                                                                    lt = this._optimum[D + pt];
                                                                if (_t < lt.price && (lt.price = _t, lt.posPrev = D, lt.backPrev = dt + t.kNumRepDistances, lt.prev1IsChar = !1), pt === this._matchDistances[ft]) {
                                                                    if (O > pt) {
                                                                        var mt = Math.min(O - 1 - pt, this._numFastBytes),
                                                                            gt = this._matchFinder.getMatchLen(pt, dt, mt);
                                                                        if (gt >= 2) {
                                                                            var vt = t.stateUpdateMatch(I),
                                                                                yt = i + pt & this._posStateMask,
                                                                                bt = _t + e.Encoder.getPrice0(this._isMatch[(vt << t.kNumPosStatesBitsMax) + yt]) + this._literalEncoder.getSubCoder(i + pt, this._matchFinder.getIndexByte(pt - 2)).getPrice(!0, this._matchFinder.getIndexByte(pt - (dt + 1) - 1), this._matchFinder.getIndexByte(pt - 1));
                                                                            vt = t.stateUpdateChar(vt),
                                                                                yt = i + pt + 1 & this._posStateMask;
                                                                            for (var Bt = bt + e.Encoder.getPrice1(this._isMatch[(vt << t.kNumPosStatesBitsMax) + yt]), kt = Bt + e.Encoder.getPrice1(this._isRep[vt]), Pt = pt + 1 + gt; D + Pt > v; ) this._optimum[++v].price = h;
                                                                            var St = kt + this.getRepPrice(0, gt, vt, yt),
                                                                                wt = this._optimum[D + Pt];
                                                                            St < wt.price && (wt.price = St, wt.posPrev = D + pt + 1, wt.backPrev = 0, wt.prev1IsChar = !0, wt.prev2 = !0, wt.posPrev2 = D, wt.backPrev2 = dt + t.kNumRepDistances)
                                                                        }
                                                                    }
                                                                    if (ft += 2, ft === n) break
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            },
                                            m.prototype.changePair = function (t, e) {
                                                var i = 7;
                                                return 1 << 32 - i > t && e >= t << i
                                            },
                                            m.prototype.writeEndMarker = function (e) {
                                                if (this._writeEndMark) {
                                                    this._rangeEncoder.encode(this._isMatch, (this._state << t.kNumPosStatesBitsMax) + e, 1),
                                                        this._rangeEncoder.encode(this._isRep, this._state, 0),
                                                        this._state = t.stateUpdateMatch(this._state);
                                                    var i = t.kMatchMinLen;
                                                    this._lenEncoder.encode(this._rangeEncoder, i - t.kMatchMinLen, e);
                                                    var s = (1 << t.kNumPosSlotBits) - 1,
                                                        r = t.getLenToPosState(i);
                                                    this._posSlotEncoder[r].encode(this._rangeEncoder, s);
                                                    var n = 30,
                                                        o = (1 << n) - 1;
                                                    this._rangeEncoder.encodeDirectBits(o >> t.kNumAlignBits, n - t.kNumAlignBits),
                                                        this._posAlignEncoder.reverseEncode(this._rangeEncoder, o & t.kAlignMask)
                                                }
                                            },
                                            m.prototype.flush = function (t) {
                                                this.releaseMFStream(),
                                                    this.writeEndMarker(t & this._posStateMask),
                                                    this._rangeEncoder.flushData(),
                                                    this._rangeEncoder.flushStream()
                                            },
                                            m.prototype.codeOneBlock = function (i, s, r) {
                                                if (i[0] = 0, s[0] = 0, r[0] = !0, this._inStream && (this._matchFinder.setStream(this._inStream), this._matchFinder.init(), this._needReleaseMFStream = !0, this._inStream = null), !this._finished) {
                                                    this._finished = !0;
                                                    var n,
                                                        o,
                                                        a,
                                                        h = this.nowPos64;
                                                    if (0 === this.nowPos64) {
                                                        if (0 === this._matchFinder.getNumAvailableBytes()) return void this.flush(this.nowPos64);
                                                        this.readMatchDistances(),
                                                            n = this.nowPos64 & this._posStateMask,
                                                            this._rangeEncoder.encode(this._isMatch, (this._state << t.kNumPosStatesBitsMax) + n, 0),
                                                            this._state = t.stateUpdateChar(this._state),
                                                            o = this._matchFinder.getIndexByte(0 - this._additionalOffset),
                                                            this._literalEncoder.getSubCoder(this.nowPos64, this._previousByte).encode(this._rangeEncoder, o),
                                                            this._previousByte = o,
                                                            this._additionalOffset--,
                                                            this.nowPos64++
                                                    }
                                                    if (0 === this._matchFinder.getNumAvailableBytes()) return void this.flush(this.nowPos64);
                                                    for (; ; ) {
                                                        var c = this.getOptimum(this.nowPos64),
                                                            u = this.backRes;
                                                        n = this.nowPos64 & this._posStateMask;
                                                        var f = (this._state << t.kNumPosStatesBitsMax) + n;
                                                        if (1 === c && - 1 === u) {
                                                            this._rangeEncoder.encode(this._isMatch, f, 0),
                                                                o = this._matchFinder.getIndexByte( - this._additionalOffset);
                                                            var p = this._literalEncoder.getSubCoder(this.nowPos64, this._previousByte);
                                                            if (t.stateIsCharState(this._state)) p.encode(this._rangeEncoder, o);
                                                            else {
                                                                var d = this._matchFinder.getIndexByte( - this._repDistances[0] - 1 - this._additionalOffset);
                                                                p.encodeMatched(this._rangeEncoder, d, o)
                                                            }
                                                            this._previousByte = o,
                                                                this._state = t.stateUpdateChar(this._state)
                                                        } else {
                                                            if (this._rangeEncoder.encode(this._isMatch, f, 1), u < t.kNumRepDistances) {
                                                                this._rangeEncoder.encode(this._isRep, this._state, 1),
                                                                    0 === u ? (this._rangeEncoder.encode(this._isRepG0, this._state, 0), 1 === c ? this._rangeEncoder.encode(this._isRep0Long, f, 0)  : this._rangeEncoder.encode(this._isRep0Long, f, 1))  : (this._rangeEncoder.encode(this._isRepG0, this._state, 1), 1 === u ? this._rangeEncoder.encode(this._isRepG1, this._state, 0)  : (this._rangeEncoder.encode(this._isRepG1, this._state, 1), this._rangeEncoder.encode(this._isRepG2, this._state, u - 2))),
                                                                    1 === c ? this._state = t.stateUpdateShortRep(this._state)  : (this._repMatchLenEncoder.encode(this._rangeEncoder, c - t.kMatchMinLen, n), this._state = t.stateUpdateRep(this._state));
                                                                var l = this._repDistances[u];
                                                                if (0 !== u) {
                                                                    for (a = u; a >= 1; a--) this._repDistances[a] = this._repDistances[a - 1];
                                                                    this._repDistances[0] = l
                                                                }
                                                            } else {
                                                                this._rangeEncoder.encode(this._isRep, this._state, 0),
                                                                    this._state = t.stateUpdateMatch(this._state),
                                                                    this._lenEncoder.encode(this._rangeEncoder, c - t.kMatchMinLen, n),
                                                                    u -= t.kNumRepDistances;
                                                                var m = _(u),
                                                                    g = t.getLenToPosState(c);
                                                                if (this._posSlotEncoder[g].encode(this._rangeEncoder, m), m >= t.kStartPosModelIndex) {
                                                                    var v = (m >>> 1) - 1,
                                                                        y = (2 | 1 & m) << v,
                                                                        b = u - y;
                                                                    m < t.kEndPosModelIndex ? e.BitTreeEncoder.reverseEncode(this._posEncoders, y - m - 1, this._rangeEncoder, v, b)  : (this._rangeEncoder.encodeDirectBits(b >> t.kNumAlignBits, v - t.kNumAlignBits), this._posAlignEncoder.reverseEncode(this._rangeEncoder, b & t.kAlignMask), this._alignPriceCount++)
                                                                }
                                                                var B = u;
                                                                for (a = t.kNumRepDistances - 1; a >= 1; a--) this._repDistances[a] = this._repDistances[a - 1];
                                                                this._repDistances[0] = B,
                                                                    this._matchPriceCount++
                                                            }
                                                            this._previousByte = this._matchFinder.getIndexByte(c - 1 - this._additionalOffset)
                                                        }
                                                        if (this._additionalOffset -= c, this.nowPos64 += c, 0 === this._additionalOffset) {
                                                            if (this._matchPriceCount >= 128 && this.fillDistancesPrices(), this._alignPriceCount >= t.kAlignTableSize && this.fillAlignPrices(), i[0] = this.nowPos64, s[0] = this._rangeEncoder.getProcessedSizeAdd(), 0 === this._matchFinder.getNumAvailableBytes()) return void this.flush(this.nowPos64);
                                                            if (this.nowPos64 - h >= 4096) return this._finished = !1,
                                                                void (r[0] = !1)
                                                        }
                                                    }
                                                }
                                            },
                                            m.prototype.releaseMFStream = function () {
                                                this._matchFinder && this._needReleaseMFStream && (this._matchFinder.releaseStream(), this._needReleaseMFStream = !1)
                                            },
                                            m.prototype.setOutStream = function (t) {
                                                this._rangeEncoder.setStream(t)
                                            },
                                            m.prototype.releaseOutStream = function () {
                                                this._rangeEncoder.releaseStream()
                                            },
                                            m.prototype.releaseStreams = function () {
                                                this.releaseMFStream(),
                                                    this.releaseOutStream()
                                            },
                                            m.prototype.setStreams = function (e, i, s, r) {
                                                this._inStream = e,
                                                    this._finished = !1,
                                                    this.create(),
                                                    this.setOutStream(i),
                                                    this.init(),
                                                    this.fillDistancesPrices(),
                                                    this.fillAlignPrices(),
                                                    this._lenEncoder.setTableSize(this._numFastBytes + 1 - t.kMatchMinLen),
                                                    this._lenEncoder.updateTables(1 << this._posStateBits),
                                                    this._repMatchLenEncoder.setTableSize(this._numFastBytes + 1 - t.kMatchMinLen),
                                                    this._repMatchLenEncoder.updateTables(1 << this._posStateBits),
                                                    this.nowPos64 = 0
                                            },
                                            m.prototype.code = function (t, e, i, s, r) {
                                                this._needReleaseMFStream = !1;
                                                try {
                                                    for (this.setStreams(t, e, i, s); ; ) {
                                                        if (this.codeOneBlock(this.processedInSize, this.processedOutSize, this.finished), this.finished[0]) return;
                                                        r && r.setProgress(this.processedInSize[0], this.processedOutSize[0])
                                                    }
                                                } finally {
                                                    this.releaseStreams()
                                                }
                                            },
                                            m.prototype.writeCoderProperties = function (t) {
                                                var e,
                                                    i = r(p);
                                                for (i[0] = 9 * (5 * this._posStateBits + this._numLiteralPosStateBits) + this._numLiteralContextBits, e = 0; 4 > e; e++) i[1 + e] = this._dictionarySize >>> 8 * e;
                                                for (e = 0; p > e; e++) t.writeByte(i[e])
                                            },
                                            m.prototype.fillDistancesPrices = function () {
                                                var i = [
                                                ];
                                                i.length = t.kNumFullDistances;
                                                var s,
                                                    r;
                                                for (s = t.kStartPosModelIndex; s < t.kNumFullDistances; s++) {
                                                    r = _(s);
                                                    var n = (r >>> 1) - 1,
                                                        o = (2 | 1 & r) << n;
                                                    i[s] = e.BitTreeEncoder.reverseGetPrice(this._posEncoders, o - r - 1, n, s - o)
                                                }
                                                for (var a = 0; a < t.kNumLenToPosStates; a++) {
                                                    var h = this._posSlotEncoder[a],
                                                        c = a << t.kNumPosSlotBits;
                                                    for (r = 0; r < this._distTableSize; r++) this._posSlotPrices[c + r] = h.getPrice(r);
                                                    for (r = t.kEndPosModelIndex; r < this._distTableSize; r++) this._posSlotPrices[c + r] += (r >>> 1) - 1 - t.kNumAlignBits << e.Encoder.kNumBitPriceShiftBits;
                                                    var u = a * t.kNumFullDistances;
                                                    for (s = 0; s < t.kStartPosModelIndex; s++) this._distancesPrices[u + s] = this._posSlotPrices[c + s];
                                                    for (; s < t.kNumFullDistances; s++) this._distancesPrices[u + s] = this._posSlotPrices[c + _(s)] + i[s]
                                                }
                                                this._matchPriceCount = 0
                                            },
                                            m.prototype.fillAlignPrices = function () {
                                                var e;
                                                for (e = 0; e < t.kAlignTableSize; e++) this._alignPrices[e] = this._posAlignEncoder.reverseGetPrice(e);
                                                this._alignPriceCount = 0
                                            },
                                            m.prototype.setAlgorithm = function (t) {
                                                return !0
                                            },
                                            m.prototype.setDictionarySize = function (e) {
                                                var i = 29;
                                                if (e < 1 << t.kDicLogSizeMin || e > 1 << i) return !1;
                                                this._dictionarySize = e;
                                                for (var s = 0; e > 1 << s; ) s++;
                                                return this._distTableSize = 2 * s,
                                                    !0
                                            },
                                            m.prototype.setNumFastBytes = function (e) {
                                                return 5 > e || e > t.kMatchMaxLen ? !1 : (this._numFastBytes = e, !0)
                                            },
                                            m.prototype.setMatchFinder = function (t) {
                                                if (0 > t || t > 2) return !1;
                                                var e = this._matchFinderType;
                                                return this._matchFinderType = t,
                                                this._matchFinder && e != this._matchFinderType && (this._dictionarySizePrev = - 1, this._matchFinder = null),
                                                    !0
                                            },
                                            m.prototype.setLcLpPb = function (e, i, s) {
                                                return 0 > i || i > t.kNumLitPosStatesBitsEncodingMax || 0 > e || e > t.kNumLitContextBitsMax || 0 > s || s > t.kNumPosStatesBitsEncodingMax ? !1 : (this._numLiteralPosStateBits = i, this._numLiteralContextBits = e, this._posStateBits = s, this._posStateMask = (1 << this._posStateBits) - 1, !0)
                                            },
                                            m.prototype.setEndMarkerMode = function (t) {
                                                this._writeEndMark = t
                                            },
                                            m.EMatchFinderTypeBT2 = o,
                                            m.EMatchFinderTypeBT4 = a,
                                            s(m.prototype),
                                            s(m)
                                    }),
                                    s('lib/LZMA', [
                                        './freeze',
                                        './LZMA/Decoder',
                                        './LZMA/Encoder'
                                    ], function (t, e, i) {
                                        return t({
                                            Decoder: e,
                                            Encoder: i
                                        })
                                    }),
                                    s('lib/Stream', [
                                        './freeze'
                                    ], function (t) {
                                        var e = function () {
                                        };
                                        return e.prototype.readByte = function () {
                                            throw new Error('abstract method readByte() not implemented')
                                        },
                                            e.prototype.read = function (t, e, i) {
                                                for (var s = 0; i > s; ) {
                                                    var r = this.readByte();
                                                    if (0 > r) return 0 === s ? - 1 : s;
                                                    t[e++] = r,
                                                        s++
                                                }
                                                return s
                                            },
                                            e.prototype.seek = function (t) {
                                                throw new Error('abstract method seek() not implemented')
                                            },
                                            e.prototype.writeByte = function (t) {
                                                throw new Error('abstract method readByte() not implemented')
                                            },
                                            e.prototype.write = function (t, e, i) {
                                                var s;
                                                for (s = 0; i > s; s++) this.writeByte(t[e++]);
                                                return i
                                            },
                                            e.prototype.flush = function () {
                                            },
                                            t(e)
                                    }),
                                    s('lib/Util', [
                                        './freeze',
                                        './makeBuffer',
                                        './LZMA',
                                        './Stream'
                                    ], function (t, e, i, s) {
                                        var r = function (t) {
                                                if ('readByte' in t) return t;
                                                var e = new s;
                                                return e.pos = 0,
                                                    e.size = t.length,
                                                    e.readByte = function () {
                                                        return this.eof() ? - 1 : t[this.pos++]
                                                    },
                                                    e.read = function (e, i, s) {
                                                        for (var r = 0; s > r && this.pos < t.length; ) e[i++] = t[this.pos++],
                                                            r++;
                                                        return r
                                                    },
                                                    e.seek = function (t) {
                                                        this.pos = t
                                                    },
                                                    e.eof = function () {
                                                        return this.pos >= t.length
                                                    },
                                                    e
                                            },
                                            n = function (t) {
                                                var i = new s,
                                                    r = !0;
                                                if (t) if ('number' == typeof t) i.buffer = e(t),
                                                    r = !1;
                                                else {
                                                    if ('writeByte' in t) return t;
                                                    i.buffer = t,
                                                        r = !1
                                                } else i.buffer = e(16384);
                                                return i.pos = 0,
                                                    i.writeByte = function (t) {
                                                        if (r && this.pos >= this.buffer.length) {
                                                            var i = e(2 * this.buffer.length);
                                                            this.buffer.copy(i),
                                                                this.buffer = i
                                                        }
                                                        this.buffer[this.pos++] = t
                                                    },
                                                    i.getBuffer = function () {
                                                        if (this.pos !== this.buffer.length) {
                                                            if (!r) throw new TypeError('outputsize does not match decoded input');
                                                            var t = e(this.pos);
                                                            this.buffer.copy(t, 0, 0, this.pos),
                                                                this.buffer = t
                                                        }
                                                        return this.buffer
                                                    },
                                                    i._coerced = !0,
                                                    i
                                            },
                                            o = Object.create(null);
                                        o.decompress = function (t, e, s, r) {
                                            var n = new i.Decoder;
                                            if (!n.setDecoderProperties(t)) throw 'Incorrect stream properties';
                                            if (!n.code(e, s, r)) throw 'Error in data stream';
                                            return !0
                                        },
                                            o.decompressFile = function (t, e) {
                                                var s,
                                                    o,
                                                    a = new i.Decoder;
                                                if (t = r(t), !a.setDecoderPropertiesFromStream(t)) throw 'Incorrect stream properties';
                                                var h = 0;
                                                for (s = 0, o = 1; 4 > s; s++, o *= 256) h += t.readByte() * o;
                                                var c = 0;
                                                for (s = 0, o = 1; 4 > s; s++, o *= 256) c += t.readByte() * o;
                                                var u = h + 4294967296 * c;
                                                if (4294967295 === h && 4294967295 === c ? u = - 1 : c >= 2097152 && (u = - 1), u >= 0 && !e && (e = u), e = n(e), !a.code(t, e, u)) throw 'Error in data stream';
                                                return 'getBuffer' in e ? e.getBuffer()  : !0
                                            };
                                        var a = [
                                                {
                                                    a: 0,
                                                    d: 0,
                                                    fb: 0,
                                                    mf: null,
                                                    lc: 0,
                                                    lp: 0,
                                                    pb: 0
                                                },
                                                {
                                                    a: 0,
                                                    d: 16,
                                                    fb: 64,
                                                    mf: 'hc4',
                                                    lc: 3,
                                                    lp: 0,
                                                    pb: 2
                                                },
                                                {
                                                    a: 0,
                                                    d: 20,
                                                    fb: 64,
                                                    mf: 'hc4',
                                                    lc: 3,
                                                    lp: 0,
                                                    pb: 2
                                                },
                                                {
                                                    a: 1,
                                                    d: 19,
                                                    fb: 64,
                                                    mf: 'bt4',
                                                    lc: 3,
                                                    lp: 0,
                                                    pb: 2
                                                },
                                                {
                                                    a: 2,
                                                    d: 20,
                                                    fb: 64,
                                                    mf: 'bt4',
                                                    lc: 3,
                                                    lp: 0,
                                                    pb: 2
                                                },
                                                {
                                                    a: 2,
                                                    d: 21,
                                                    fb: 128,
                                                    mf: 'bt4',
                                                    lc: 3,
                                                    lp: 0,
                                                    pb: 2
                                                },
                                                {
                                                    a: 2,
                                                    d: 22,
                                                    fb: 128,
                                                    mf: 'bt4',
                                                    lc: 3,
                                                    lp: 0,
                                                    pb: 2
                                                },
                                                {
                                                    a: 2,
                                                    d: 23,
                                                    fb: 128,
                                                    mf: 'bt4',
                                                    lc: 3,
                                                    lp: 0,
                                                    pb: 2
                                                },
                                                {
                                                    a: 2,
                                                    d: 24,
                                                    fb: 255,
                                                    mf: 'bt4',
                                                    lc: 3,
                                                    lp: 0,
                                                    pb: 2
                                                },
                                                {
                                                    a: 2,
                                                    d: 25,
                                                    fb: 255,
                                                    mf: 'bt4',
                                                    lc: 3,
                                                    lp: 0,
                                                    pb: 2
                                                }
                                            ],
                                            h = function (t) {
                                                var e = new i.Encoder,
                                                    s = {
                                                        a: 1,
                                                        d: 23,
                                                        fb: 128,
                                                        lc: 3,
                                                        lp: 0,
                                                        pb: 2,
                                                        mf: 'bt4',
                                                        eos: !1
                                                    };
                                                if (t) {
                                                    'number' == typeof t && (t = a[t]);
                                                    var r;
                                                    for (r in t) Object.prototype.hasOwnProperty.call(t, r) && (s[r] = t[r])
                                                }
                                                return e.setAlgorithm(s.a),
                                                    e.setDictionarySize(1 << + s.d),
                                                    e.setNumFastBytes( + s.fb),
                                                    e.setMatchFinder('bt4' === s.mf ? i.Encoder.EMatchFinderTypeBT4 : i.Encoder.EMatchFinderTypeBT2),
                                                    e.setLcLpPb( + s.lc, + s.lp, + s.pb),
                                                    e.setEndMarkerMode(!!s.eos),
                                                    e
                                            };
                                        return o.compress = function (t, e, i, s) {
                                            var r = h(i);
                                            return r.writeCoderProperties(e),
                                                r.code(t, e, - 1, - 1, {
                                                    setProgress: function (t, e) {
                                                        s && s(t, e)
                                                    }
                                                }),
                                                !0
                                        },
                                            o.compressFile = function (t, e, i, s) {
                                                var o = h(i);
                                                t = r(t);
                                                var a;
                                                'size' in t && t.size >= 0 ? a = t.size : (a = - 1, o.setEndMarkerMode(!0)),
                                                    e = n(e),
                                                    o.writeCoderProperties(e);
                                                var c = function (t) {
                                                    var i;
                                                    for (i = 0; 8 > i; i++) e.writeByte(255 & t),
                                                        t = Math.floor(t / 256)
                                                };
                                                return c(a),
                                                    o.code(t, e, a, - 1, {
                                                        setProgress: function (t, e) {
                                                            s && s(t, e)
                                                        }
                                                    }),
                                                    'getBuffer' in e ? e.getBuffer()  : !0
                                            },
                                            t(o)
                                    }),
                                    s('main', [
                                        './lib/freeze',
                                        './lib/LZ',
                                        './lib/LZMA',
                                        './lib/RangeCoder',
                                        './lib/Stream',
                                        './lib/Util'
                                    ], function (t, e, i, s, r, n) {
                                        return t({
                                            version: '0.9.0',
                                            LZ: e,
                                            LZMA: i,
                                            RangeCoder: s,
                                            Stream: r,
                                            Util: n,
                                            compress: n.compress,
                                            compressFile: n.compressFile,
                                            decompress: n.decompress,
                                            decompressFile: n.decompressFile
                                        })
                                    }),
                                    i(['main'], function (t) {
                                        window.LZMA = t
                                    })
                            }()
                    }).call(this, t('buffer').Buffer)
                },
                {
                    buffer: 2
                }
            ],
            2: [
                function (t, e, i) {
                    function s(t, e, i) {
                        if (!(this instanceof s)) return new s(t, e, i);
                        var r,
                            n = typeof t;
                        if ('number' === n) r = t > 0 ? t >>> 0 : 0;
                        else if ('string' === n) 'base64' === e && (t = L(t)),
                            r = s.byteLength(t, e);
                        else {
                            if ('object' !== n || null === t) throw new Error('First argument needs to be a number, array or string.');
                            'Buffer' === t.type && N(t.data) && (t = t.data),
                                r = + t.length > 0 ? Math.floor( + t.length)  : 0
                        }
                        var o;
                        j ? o = s._augment(new Uint8Array(r))  : (o = this, o.length = r, o._isBuffer = !0);
                        var a;
                        if (j && 'number' == typeof t.byteLength) o._set(t);
                        else if (I(t)) if (s.isBuffer(t)) for (a = 0; r > a; a++) o[a] = t.readUInt8(a);
                        else for (a = 0; r > a; a++) o[a] = (t[a] % 256 + 256) % 256;
                        else if ('string' === n) o.write(t, 0, e);
                        else if ('number' === n && !j && !i) for (a = 0; r > a; a++) o[a] = 0;
                        return o
                    }
                    function r(t, e, i, s) {
                        i = Number(i) || 0;
                        var r = t.length - i;
                        s ? (s = Number(s), s > r && (s = r))  : s = r;
                        var n = e.length;
                        G(n % 2 === 0, 'Invalid hex string'),
                        s > n / 2 && (s = n / 2);
                        for (var o = 0; s > o; o++) {
                            var a = parseInt(e.substr(2 * o, 2), 16);
                            G(!isNaN(a), 'Invalid hex string'),
                                t[i + o] = a
                        }
                        return o
                    }
                    function n(t, e, i, s) {
                        var r = F(C(e), t, i, s);
                        return r
                    }
                    function o(t, e, i, s) {
                        var r = F(R(e), t, i, s);
                        return r
                    }
                    function a(t, e, i, s) {
                        return o(t, e, i, s)
                    }
                    function h(t, e, i, s) {
                        var r = F(z(e), t, i, s);
                        return r
                    }
                    function c(t, e, i, s) {
                        var r = F(x(e), t, i, s);
                        return r
                    }
                    function u(t, e, i) {
                        return W.fromByteArray(0 === e && i === t.length ? t : t.slice(e, i))
                    }
                    function f(t, e, i) {
                        var s = '',
                            r = '';
                        i = Math.min(t.length, i);
                        for (var n = e; i > n; n++) t[n] <= 127 ? (s += T(r) + String.fromCharCode(t[n]), r = '')  : r += '%' + t[n].toString(16);
                        return s + T(r)
                    }
                    function p(t, e, i) {
                        var s = '';
                        i = Math.min(t.length, i);
                        for (var r = e; i > r; r++) s += String.fromCharCode(t[r]);
                        return s
                    }
                    function d(t, e, i) {
                        return p(t, e, i)
                    }
                    function _(t, e, i) {
                        var s = t.length;
                        (!e || 0 > e) && (e = 0),
                        (!i || 0 > i || i > s) && (i = s);
                        for (var r = '', n = e; i > n; n++) r += A(t[n]);
                        return r
                    }
                    function l(t, e, i) {
                        for (var s = t.slice(e, i), r = '', n = 0; n < s.length; n += 2) r += String.fromCharCode(s[n] + 256 * s[n + 1]);
                        return r
                    }
                    function m(t, e, i, s) {
                        s || (G('boolean' == typeof i, 'missing or invalid endian'), G(void 0 !== e && null !== e, 'missing offset'), G(e + 1 < t.length, 'Trying to read beyond buffer length'));
                        var r = t.length;
                        if (!(e >= r)) {
                            var n;
                            return i ? (n = t[e], r > e + 1 && (n |= t[e + 1] << 8))  : (n = t[e] << 8, r > e + 1 && (n |= t[e + 1])),
                                n
                        }
                    }
                    function g(t, e, i, s) {
                        s || (G('boolean' == typeof i, 'missing or invalid endian'), G(void 0 !== e && null !== e, 'missing offset'), G(e + 3 < t.length, 'Trying to read beyond buffer length'));
                        var r = t.length;
                        if (!(e >= r)) {
                            var n;
                            return i ? (r > e + 2 && (n = t[e + 2] << 16), r > e + 1 && (n |= t[e + 1] << 8), n |= t[e], r > e + 3 && (n += t[e + 3] << 24 >>> 0))  : (r > e + 1 && (n = t[e + 1] << 16), r > e + 2 && (n |= t[e + 2] << 8), r > e + 3 && (n |= t[e + 3]), n += t[e] << 24 >>> 0),
                                n
                        }
                    }
                    function v(t, e, i, s) {
                        s || (G('boolean' == typeof i, 'missing or invalid endian'), G(void 0 !== e && null !== e, 'missing offset'), G(e + 1 < t.length, 'Trying to read beyond buffer length'));
                        var r = t.length;
                        if (!(e >= r)) {
                            var n = m(t, e, i, !0),
                                o = 32768 & n;
                            return o ? - 1 * (65535 - n + 1)  : n
                        }
                    }
                    function y(t, e, i, s) {
                        s || (G('boolean' == typeof i, 'missing or invalid endian'), G(void 0 !== e && null !== e, 'missing offset'), G(e + 3 < t.length, 'Trying to read beyond buffer length'));
                        var r = t.length;
                        if (!(e >= r)) {
                            var n = g(t, e, i, !0),
                                o = 2147483648 & n;
                            return o ? - 1 * (4294967295 - n + 1)  : n
                        }
                    }
                    function b(t, e, i, s) {
                        return s || (G('boolean' == typeof i, 'missing or invalid endian'), G(e + 3 < t.length, 'Trying to read beyond buffer length')),
                            Z.read(t, e, i, 23, 4)
                    }
                    function B(t, e, i, s) {
                        return s || (G('boolean' == typeof i, 'missing or invalid endian'), G(e + 7 < t.length, 'Trying to read beyond buffer length')),
                            Z.read(t, e, i, 52, 8)
                    }
                    function k(t, e, i, s, r) {
                        r || (G(void 0 !== e && null !== e, 'missing value'), G('boolean' == typeof s, 'missing or invalid endian'), G(void 0 !== i && null !== i, 'missing offset'), G(i + 1 < t.length, 'trying to write beyond buffer length'), U(e, 65535));
                        var n = t.length;
                        if (!(i >= n)) {
                            for (var o = 0, a = Math.min(n - i, 2); a > o; o++) t[i + o] = (e & 255 << 8 * (s ? o : 1 - o)) >>> 8 * (s ? o : 1 - o);
                            return i + 2
                        }
                    }
                    function P(t, e, i, s, r) {
                        r || (G(void 0 !== e && null !== e, 'missing value'), G('boolean' == typeof s, 'missing or invalid endian'), G(void 0 !== i && null !== i, 'missing offset'), G(i + 3 < t.length, 'trying to write beyond buffer length'), U(e, 4294967295));
                        var n = t.length;
                        if (!(i >= n)) {
                            for (var o = 0, a = Math.min(n - i, 4); a > o; o++) t[i + o] = e >>> 8 * (s ? o : 3 - o) & 255;
                            return i + 4
                        }
                    }
                    function S(t, e, i, s, r) {
                        r || (G(void 0 !== e && null !== e, 'missing value'), G('boolean' == typeof s, 'missing or invalid endian'), G(void 0 !== i && null !== i, 'missing offset'), G(i + 1 < t.length, 'Trying to write beyond buffer length'), O(e, 32767, - 32768));
                        var n = t.length;
                        if (!(i >= n)) return e >= 0 ? k(t, e, i, s, r)  : k(t, 65535 + e + 1, i, s, r),
                        i + 2
                    }
                    function w(t, e, i, s, r) {
                        r || (G(void 0 !== e && null !== e, 'missing value'), G('boolean' == typeof s, 'missing or invalid endian'), G(void 0 !== i && null !== i, 'missing offset'), G(i + 3 < t.length, 'Trying to write beyond buffer length'), O(e, 2147483647, - 2147483648));
                        var n = t.length;
                        if (!(i >= n)) return e >= 0 ? P(t, e, i, s, r)  : P(t, 4294967295 + e + 1, i, s, r),
                        i + 4
                    }
                    function E(t, e, i, s, r) {
                        r || (G(void 0 !== e && null !== e, 'missing value'), G('boolean' == typeof s, 'missing or invalid endian'), G(void 0 !== i && null !== i, 'missing offset'), G(i + 3 < t.length, 'Trying to write beyond buffer length'), H(e, 3.4028234663852886e+38, - 3.4028234663852886e+38));
                        var n = t.length;
                        if (!(i >= n)) return Z.write(t, e, i, s, 23, 4),
                        i + 4
                    }
                    function M(t, e, i, s, r) {
                        r || (G(void 0 !== e && null !== e, 'missing value'), G('boolean' == typeof s, 'missing or invalid endian'), G(void 0 !== i && null !== i, 'missing offset'), G(i + 7 < t.length, 'Trying to write beyond buffer length'), H(e, 1.7976931348623157e+308, - 1.7976931348623157e+308));
                        var n = t.length;
                        if (!(i >= n)) return Z.write(t, e, i, s, 52, 8),
                        i + 8
                    }
                    function L(t) {
                        for (t = D(t).replace(Y, ''); t.length % 4 !== 0; ) t += '=';
                        return t
                    }
                    function D(t) {
                        return t.trim ? t.trim()  : t.replace(/^\s+|\s+$/g, '')
                    }
                    function N(t) {
                        return (Array.isArray || function (t) {
                            return '[object Array]' === Object.prototype.toString.call(t)
                        }) (t)
                    }
                    function I(t) {
                        return N(t) || s.isBuffer(t) || t && 'object' == typeof t && 'number' == typeof t.length
                    }
                    function A(t) {
                        return 16 > t ? '0' + t.toString(16)  : t.toString(16)
                    }
                    function C(t) {
                        for (var e = [
                        ], i = 0; i < t.length; i++) {
                            var s = t.charCodeAt(i);
                            if (127 >= s) e.push(s);
                            else {
                                var r = i;
                                s >= 55296 && 57343 >= s && i++;
                                for (var n = encodeURIComponent(t.slice(r, i + 1)).substr(1).split('%'), o = 0; o < n.length; o++) e.push(parseInt(n[o], 16))
                            }
                        }
                        return e
                    }
                    function R(t) {
                        for (var e = [
                        ], i = 0; i < t.length; i++) e.push(255 & t.charCodeAt(i));
                        return e
                    }
                    function x(t) {
                        for (var e, i, s, r = [
                        ], n = 0; n < t.length; n++) e = t.charCodeAt(n),
                            i = e >> 8,
                            s = e % 256,
                            r.push(s),
                            r.push(i);
                        return r
                    }
                    function z(t) {
                        return W.toByteArray(t)
                    }
                    function F(t, e, i, s) {
                        for (var r = 0; s > r && !(r + i >= e.length || r >= t.length); r++) e[r + i] = t[r];
                        return r
                    }
                    function T(t) {
                        try {
                            return decodeURIComponent(t)
                        } catch (e) {
                            return String.fromCharCode(65533)
                        }
                    }
                    function U(t, e) {
                        G('number' == typeof t, 'cannot write a non-number as a number'),
                            G(t >= 0, 'specified a negative value for writing an unsigned value'),
                            G(e >= t, 'value is larger than maximum value for type'),
                            G(Math.floor(t) === t, 'value has a fractional component')
                    }
                    function O(t, e, i) {
                        G('number' == typeof t, 'cannot write a non-number as a number'),
                            G(e >= t, 'value larger than maximum allowed value'),
                            G(t >= i, 'value smaller than minimum allowed value'),
                            G(Math.floor(t) === t, 'value has a fractional component')
                    }
                    function H(t, e, i) {
                        G('number' == typeof t, 'cannot write a non-number as a number'),
                            G(e >= t, 'value larger than maximum allowed value'),
                            G(t >= i, 'value smaller than minimum allowed value')
                    }
                    function G(t, e) {
                        if (!t) throw new Error(e || 'Failed assertion')
                    }
                    var W = t('base64-js'),
                        Z = t('ieee754');
                    i.Buffer = s,
                        i.SlowBuffer = s,
                        i.INSPECT_MAX_BYTES = 50,
                        s.poolSize = 8192;
                    var j = function () {
                        try {
                            var t = new ArrayBuffer(0),
                                e = new Uint8Array(t);
                            return e.foo = function () {
                                return 42
                            },
                            42 === e.foo() && 'function' == typeof e.subarray && 0 === new Uint8Array(1).subarray(1, 1).byteLength
                        } catch (i) {
                            return !1
                        }
                    }();
                    s.isEncoding = function (t) {
                        switch (String(t).toLowerCase()) {
                            case 'hex':
                            case 'utf8':
                            case 'utf-8':
                            case 'ascii':
                            case 'binary':
                            case 'base64':
                            case 'raw':
                            case 'ucs2':
                            case 'ucs-2':
                            case 'utf16le':
                            case 'utf-16le':
                                return !0;
                            default:
                                return !1
                        }
                    },
                        s.isBuffer = function (t) {
                            return !(null == t || !t._isBuffer)
                        },
                        s.byteLength = function (t, e) {
                            var i;
                            switch (t = t.toString(), e || 'utf8') {
                                case 'hex':
                                    i = t.length / 2;
                                    break;
                                case 'utf8':
                                case 'utf-8':
                                    i = C(t).length;
                                    break;
                                case 'ascii':
                                case 'binary':
                                case 'raw':
                                    i = t.length;
                                    break;
                                case 'base64':
                                    i = z(t).length;
                                    break;
                                case 'ucs2':
                                case 'ucs-2':
                                case 'utf16le':
                                case 'utf-16le':
                                    i = 2 * t.length;
                                    break;
                                default:
                                    throw new Error('Unknown encoding')
                            }
                            return i
                        },
                        s.concat = function (t, e) {
                            if (G(N(t), 'Usage: Buffer.concat(list[, length])'), 0 === t.length) return new s(0);
                            if (1 === t.length) return t[0];
                            var i;
                            if (void 0 === e) for (e = 0, i = 0; i < t.length; i++) e += t[i].length;
                            var r = new s(e),
                                n = 0;
                            for (i = 0; i < t.length; i++) {
                                var o = t[i];
                                o.copy(r, n),
                                    n += o.length
                            }
                            return r
                        },
                        s.compare = function (t, e) {
                            G(s.isBuffer(t) && s.isBuffer(e), 'Arguments must be Buffers');
                            for (var i = t.length, r = e.length, n = 0, o = Math.min(i, r); o > n && t[n] === e[n]; n++);
                            return n !== o && (i = t[n], r = e[n]),
                                r > i ? - 1 : i > r ? 1 : 0
                        },
                        s.prototype.write = function (t, e, i, s) {
                            if (isFinite(e)) isFinite(i) || (s = i, i = void 0);
                            else {
                                var u = s;
                                s = e,
                                    e = i,
                                    i = u
                            }
                            e = Number(e) || 0;
                            var f = this.length - e;
                            i ? (i = Number(i), i > f && (i = f))  : i = f,
                                s = String(s || 'utf8').toLowerCase();
                            var p;
                            switch (s) {
                                case 'hex':
                                    p = r(this, t, e, i);
                                    break;
                                case 'utf8':
                                case 'utf-8':
                                    p = n(this, t, e, i);
                                    break;
                                case 'ascii':
                                    p = o(this, t, e, i);
                                    break;
                                case 'binary':
                                    p = a(this, t, e, i);
                                    break;
                                case 'base64':
                                    p = h(this, t, e, i);
                                    break;
                                case 'ucs2':
                                case 'ucs-2':
                                case 'utf16le':
                                case 'utf-16le':
                                    p = c(this, t, e, i);
                                    break;
                                default:
                                    throw new Error('Unknown encoding')
                            }
                            return p
                        },
                        s.prototype.toString = function (t, e, i) {
                            var s = this;
                            if (t = String(t || 'utf8').toLowerCase(), e = Number(e) || 0, i = void 0 === i ? s.length : Number(i), i === e) return '';
                            var r;
                            switch (t) {
                                case 'hex':
                                    r = _(s, e, i);
                                    break;
                                case 'utf8':
                                case 'utf-8':
                                    r = f(s, e, i);
                                    break;
                                case 'ascii':
                                    r = p(s, e, i);
                                    break;
                                case 'binary':
                                    r = d(s, e, i);
                                    break;
                                case 'base64':
                                    r = u(s, e, i);
                                    break;
                                case 'ucs2':
                                case 'ucs-2':
                                case 'utf16le':
                                case 'utf-16le':
                                    r = l(s, e, i);
                                    break;
                                default:
                                    throw new Error('Unknown encoding')
                            }
                            return r
                        },
                        s.prototype.toJSON = function () {
                            return {
                                type: 'Buffer',
                                data: Array.prototype.slice.call(this._arr || this, 0)
                            }
                        },
                        s.prototype.equals = function (t) {
                            return G(s.isBuffer(t), 'Argument must be a Buffer'),
                            0 === s.compare(this, t)
                        },
                        s.prototype.compare = function (t) {
                            return G(s.isBuffer(t), 'Argument must be a Buffer'),
                                s.compare(this, t)
                        },
                        s.prototype.copy = function (t, e, i, s) {
                            var r = this;
                            if (i || (i = 0), s || 0 === s || (s = this.length), e || (e = 0), s !== i && 0 !== t.length && 0 !== r.length) {
                                G(s >= i, 'sourceEnd < sourceStart'),
                                    G(e >= 0 && e < t.length, 'targetStart out of bounds'),
                                    G(i >= 0 && i < r.length, 'sourceStart out of bounds'),
                                    G(s >= 0 && s <= r.length, 'sourceEnd out of bounds'),
                                s > this.length && (s = this.length),
                                t.length - e < s - i && (s = t.length - e + i);
                                var n = s - i;
                                if (100 > n || !j) for (var o = 0; n > o; o++) t[o + e] = this[o + i];
                                else t._set(this.subarray(i, i + n), e)
                            }
                        },
                        s.prototype.slice = function (t, e) {
                            var i = this.length;
                            if (t = ~~t, e = void 0 === e ? i : ~~e, 0 > t ? (t += i, 0 > t && (t = 0))  : t > i && (t = i), 0 > e ? (e += i, 0 > e && (e = 0))  : e > i && (e = i), t > e && (e = t), j) return s._augment(this.subarray(t, e));
                            for (var r = e - t, n = new s(r, void 0, !0), o = 0; r > o; o++) n[o] = this[o + t];
                            return n
                        },
                        s.prototype.get = function (t) {
                            return console.log('.get() is deprecated. Access using array indexes instead.'),
                                this.readUInt8(t)
                        },
                        s.prototype.set = function (t, e) {
                            return console.log('.set() is deprecated. Access using array indexes instead.'),
                                this.writeUInt8(t, e)
                        },
                        s.prototype.readUInt8 = function (t, e) {
                            return e || (G(void 0 !== t && null !== t, 'missing offset'), G(t < this.length, 'Trying to read beyond buffer length')),
                                t >= this.length ? void 0 : this[t]
                        },
                        s.prototype.readUInt16LE = function (t, e) {
                            return m(this, t, !0, e)
                        },
                        s.prototype.readUInt16BE = function (t, e) {
                            return m(this, t, !1, e);
                        },
                        s.prototype.readUInt32LE = function (t, e) {
                            return g(this, t, !0, e)
                        },
                        s.prototype.readUInt32BE = function (t, e) {
                            return g(this, t, !1, e)
                        },
                        s.prototype.readInt8 = function (t, e) {
                            if (e || (G(void 0 !== t && null !== t, 'missing offset'), G(t < this.length, 'Trying to read beyond buffer length')), !(t >= this.length)) {
                                var i = 128 & this[t];
                                return i ? - 1 * (255 - this[t] + 1)  : this[t]
                            }
                        },
                        s.prototype.readInt16LE = function (t, e) {
                            return v(this, t, !0, e)
                        },
                        s.prototype.readInt16BE = function (t, e) {
                            return v(this, t, !1, e)
                        },
                        s.prototype.readInt32LE = function (t, e) {
                            return y(this, t, !0, e)
                        },
                        s.prototype.readInt32BE = function (t, e) {
                            return y(this, t, !1, e)
                        },
                        s.prototype.readFloatLE = function (t, e) {
                            return b(this, t, !0, e)
                        },
                        s.prototype.readFloatBE = function (t, e) {
                            return b(this, t, !1, e)
                        },
                        s.prototype.readDoubleLE = function (t, e) {
                            return B(this, t, !0, e)
                        },
                        s.prototype.readDoubleBE = function (t, e) {
                            return B(this, t, !1, e)
                        },
                        s.prototype.writeUInt8 = function (t, e, i) {
                            return i || (G(void 0 !== t && null !== t, 'missing value'), G(void 0 !== e && null !== e, 'missing offset'), G(e < this.length, 'trying to write beyond buffer length'), U(t, 255)),
                                e >= this.length ? void 0 : (this[e] = t, e + 1)
                        },
                        s.prototype.writeUInt16LE = function (t, e, i) {
                            return k(this, t, e, !0, i)
                        },
                        s.prototype.writeUInt16BE = function (t, e, i) {
                            return k(this, t, e, !1, i)
                        },
                        s.prototype.writeUInt32LE = function (t, e, i) {
                            return P(this, t, e, !0, i)
                        },
                        s.prototype.writeUInt32BE = function (t, e, i) {
                            return P(this, t, e, !1, i)
                        },
                        s.prototype.writeInt8 = function (t, e, i) {
                            return i || (G(void 0 !== t && null !== t, 'missing value'), G(void 0 !== e && null !== e, 'missing offset'), G(e < this.length, 'Trying to write beyond buffer length'), O(t, 127, - 128)),
                                e >= this.length ? void 0 : (t >= 0 ? this.writeUInt8(t, e, i)  : this.writeUInt8(255 + t + 1, e, i), e + 1)
                        },
                        s.prototype.writeInt16LE = function (t, e, i) {
                            return S(this, t, e, !0, i)
                        },
                        s.prototype.writeInt16BE = function (t, e, i) {
                            return S(this, t, e, !1, i)
                        },
                        s.prototype.writeInt32LE = function (t, e, i) {
                            return w(this, t, e, !0, i)
                        },
                        s.prototype.writeInt32BE = function (t, e, i) {
                            return w(this, t, e, !1, i)
                        },
                        s.prototype.writeFloatLE = function (t, e, i) {
                            return E(this, t, e, !0, i)
                        },
                        s.prototype.writeFloatBE = function (t, e, i) {
                            return E(this, t, e, !1, i)
                        },
                        s.prototype.writeDoubleLE = function (t, e, i) {
                            return M(this, t, e, !0, i)
                        },
                        s.prototype.writeDoubleBE = function (t, e, i) {
                            return M(this, t, e, !1, i)
                        },
                        s.prototype.fill = function (t, e, i) {
                            if (t || (t = 0), e || (e = 0), i || (i = this.length), G(i >= e, 'end < start'), i !== e && 0 !== this.length) {
                                G(e >= 0 && e < this.length, 'start out of bounds'),
                                    G(i >= 0 && i <= this.length, 'end out of bounds');
                                var s;
                                if ('number' == typeof t) for (s = e; i > s; s++) this[s] = t;
                                else {
                                    var r = C(t.toString()),
                                        n = r.length;
                                    for (s = e; i > s; s++) this[s] = r[s % n]
                                }
                                return this
                            }
                        },
                        s.prototype.inspect = function () {
                            for (var t = [
                            ], e = this.length, s = 0; e > s; s++) if (t[s] = A(this[s]), s === i.INSPECT_MAX_BYTES) {
                                t[s + 1] = '...';
                                break
                            }
                            return '<Buffer ' + t.join(' ') + '>'
                        },
                        s.prototype.toArrayBuffer = function () {
                            if ('undefined' != typeof Uint8Array) {
                                if (j) return new s(this).buffer;
                                for (var t = new Uint8Array(this.length), e = 0, i = t.length; i > e; e += 1) t[e] = this[e];
                                return t.buffer
                            }
                            throw new Error('Buffer.toArrayBuffer not supported in this browser')
                        };
                    var q = s.prototype;
                    s._augment = function (t) {
                        return t._isBuffer = !0,
                            t._get = t.get,
                            t._set = t.set,
                            t.get = q.get,
                            t.set = q.set,
                            t.write = q.write,
                            t.toString = q.toString,
                            t.toLocaleString = q.toString,
                            t.toJSON = q.toJSON,
                            t.equals = q.equals,
                            t.compare = q.compare,
                            t.copy = q.copy,
                            t.slice = q.slice,
                            t.readUInt8 = q.readUInt8,
                            t.readUInt16LE = q.readUInt16LE,
                            t.readUInt16BE = q.readUInt16BE,
                            t.readUInt32LE = q.readUInt32LE,
                            t.readUInt32BE = q.readUInt32BE,
                            t.readInt8 = q.readInt8,
                            t.readInt16LE = q.readInt16LE,
                            t.readInt16BE = q.readInt16BE,
                            t.readInt32LE = q.readInt32LE,
                            t.readInt32BE = q.readInt32BE,
                            t.readFloatLE = q.readFloatLE,
                            t.readFloatBE = q.readFloatBE,
                            t.readDoubleLE = q.readDoubleLE,
                            t.readDoubleBE = q.readDoubleBE,
                            t.writeUInt8 = q.writeUInt8,
                            t.writeUInt16LE = q.writeUInt16LE,
                            t.writeUInt16BE = q.writeUInt16BE,
                            t.writeUInt32LE = q.writeUInt32LE,
                            t.writeUInt32BE = q.writeUInt32BE,
                            t.writeInt8 = q.writeInt8,
                            t.writeInt16LE = q.writeInt16LE,
                            t.writeInt16BE = q.writeInt16BE,
                            t.writeInt32LE = q.writeInt32LE,
                            t.writeInt32BE = q.writeInt32BE,
                            t.writeFloatLE = q.writeFloatLE,
                            t.writeFloatBE = q.writeFloatBE,
                            t.writeDoubleLE = q.writeDoubleLE,
                            t.writeDoubleBE = q.writeDoubleBE,
                            t.fill = q.fill,
                            t.inspect = q.inspect,
                            t.toArrayBuffer = q.toArrayBuffer,
                            t
                    };
                    var Y = /[^+\/0-9A-z]/g
                },
                {
                    'base64-js': 3,
                    ieee754: 4
                }
            ],
            3: [
                function (t, e, i) {
                    var s = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
                    !function (t) {
                        'use strict';
                        function e(t) {
                            var e = t.charCodeAt(0);
                            return e === o ? 62 : e === a ? 63 : h > e ? - 1 : h + 10 > e ? e - h + 26 + 26 : u + 26 > e ? e - u : c + 26 > e ? e - c + 26 : void 0
                        }
                        function i(t) {
                            function i(t) {
                                c[f++] = t
                            }
                            var s,
                                r,
                                o,
                                a,
                                h,
                                c;
                            if (t.length % 4 > 0) throw new Error('Invalid string. Length must be a multiple of 4');
                            var u = t.length;
                            h = '=' === t.charAt(u - 2) ? 2 : '=' === t.charAt(u - 1) ? 1 : 0,
                                c = new n(3 * t.length / 4 - h),
                                o = h > 0 ? t.length - 4 : t.length;
                            var f = 0;
                            for (s = 0, r = 0; o > s; s += 4, r += 3) a = e(t.charAt(s)) << 18 | e(t.charAt(s + 1)) << 12 | e(t.charAt(s + 2)) << 6 | e(t.charAt(s + 3)),
                                i((16711680 & a) >> 16),
                                i((65280 & a) >> 8),
                                i(255 & a);
                            return 2 === h ? (a = e(t.charAt(s)) << 2 | e(t.charAt(s + 1)) >> 4, i(255 & a))  : 1 === h && (a = e(t.charAt(s)) << 10 | e(t.charAt(s + 1)) << 4 | e(t.charAt(s + 2)) >> 2, i(a >> 8 & 255), i(255 & a)),
                                c
                        }
                        function r(t) {
                            function e(t) {
                                return s.charAt(t)
                            }
                            function i(t) {
                                return e(t >> 18 & 63) + e(t >> 12 & 63) + e(t >> 6 & 63) + e(63 & t)
                            }
                            var r,
                                n,
                                o,
                                a = t.length % 3,
                                h = '';
                            for (r = 0, o = t.length - a; o > r; r += 3) n = (t[r] << 16) + (t[r + 1] << 8) + t[r + 2],
                                h += i(n);
                            switch (a) {
                                case 1:
                                    n = t[t.length - 1],
                                        h += e(n >> 2),
                                        h += e(n << 4 & 63),
                                        h += '==';
                                    break;
                                case 2:
                                    n = (t[t.length - 2] << 8) + t[t.length - 1],
                                        h += e(n >> 10),
                                        h += e(n >> 4 & 63),
                                        h += e(n << 2 & 63),
                                        h += '='
                            }
                            return h
                        }
                        var n = 'undefined' != typeof Uint8Array ? Uint8Array : Array,
                            o = '+'.charCodeAt(0),
                            a = '/'.charCodeAt(0),
                            h = '0'.charCodeAt(0),
                            c = 'a'.charCodeAt(0),
                            u = 'A'.charCodeAt(0);
                        t.toByteArray = i,
                            t.fromByteArray = r
                    }('undefined' == typeof i ? this.base64js = {
                    }
                        : i)
                },
                {
                }
            ],
            4: [
                function (t, e, i) {
                    i.read = function (t, e, i, s, r) {
                        var n,
                            o,
                            a = 8 * r - s - 1,
                            h = (1 << a) - 1,
                            c = h >> 1,
                            u = - 7,
                            f = i ? r - 1 : 0,
                            p = i ? - 1 : 1,
                            d = t[e + f];
                        for (f += p, n = d & (1 << - u) - 1, d >>= - u, u += a; u > 0; n = 256 * n + t[e + f], f += p, u -= 8);
                        for (o = n & (1 << - u) - 1, n >>= - u, u += s; u > 0; o = 256 * o + t[e + f], f += p, u -= 8);
                        if (0 === n) n = 1 - c;
                        else {
                            if (n === h) return o ? 0 / 0 : (d ? - 1 : 1) * (1 / 0);
                            o += Math.pow(2, s),
                                n -= c
                        }
                        return (d ? - 1 : 1) * o * Math.pow(2, n - s)
                    },
                        i.write = function (t, e, i, s, r, n) {
                            var o,
                                a,
                                h,
                                c = 8 * n - r - 1,
                                u = (1 << c) - 1,
                                f = u >> 1,
                                p = 23 === r ? Math.pow(2, - 24) - Math.pow(2, - 77)  : 0,
                                d = s ? 0 : n - 1,
                                _ = s ? 1 : - 1,
                                l = 0 > e || 0 === e && 0 > 1 / e ? 1 : 0;
                            for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (a = isNaN(e) ? 1 : 0, o = u)  : (o = Math.floor(Math.log(e) / Math.LN2), e * (h = Math.pow(2, - o)) < 1 && (o--, h *= 2), e += o + f >= 1 ? p / h : p * Math.pow(2, 1 - f), e * h >= 2 && (o++, h /= 2), o + f >= u ? (a = 0, o = u)  : o + f >= 1 ? (a = (e * h - 1) * Math.pow(2, r), o += f)  : (a = e * Math.pow(2, f - 1) * Math.pow(2, r), o = 0)); r >= 8; t[i + d] = 255 & a, d += _, a /= 256, r -= 8);
                            for (o = o << r | a, c += r; c > 0; t[i + d] = 255 & o, d += _, o /= 256, c -= 8);
                            t[i + d - _] |= 128 * l
                        }
                },
                {
                }
            ]
        },
        {
        },
        [
            1
        ]) (1)
});
!function (e, t, a) {
    'use strict';
    function n(t, h, m) {
        function H(a) {
            var n = 0,
                i = Ee.length;
            if (Ce.old = e.extend({
                }, Ce), Ie = we ? 0 : be[ge.horizontal ? 'width' : 'height'](), ke = Be[ge.horizontal ? 'width' : 'height'](), ze = we ? t : Pe[ge.horizontal ? 'outerWidth' : 'outerHeight'](), Ee.length = 0, Ce.start = 0, Ce.end = q(ze - Ie, 0), Re) {
                n = Ne.length,
                    qe = Pe.children(ge.itemSelector),
                    Ne.length = 0;
                var r,
                    s = c(Pe, ge.horizontal ? 'paddingLeft' : 'paddingTop'),
                    o = c(Pe, ge.horizontal ? 'paddingRight' : 'paddingBottom'),
                    l = 'border-box' === e(qe).css('boxSizing'),
                    u = 'none' !== qe.css('float'),
                    f = 0,
                    v = qe.length - 1;
                ze = 0,
                    qe.each(function (t, a) {
                        var n = e(a),
                            i = a.getBoundingClientRect(),
                            l = E(ge.horizontal ? i.width || i.right - i.left : i.height || i.bottom - i.top),
                            d = c(n, ge.horizontal ? 'marginLeft' : 'marginTop'),
                            p = c(n, ge.horizontal ? 'marginRight' : 'marginBottom'),
                            h = l + d + p,
                            m = !d || !p,
                            g = {
                            };
                        g.el = a,
                            g.size = m ? l : h,
                            g.half = g.size / 2,
                            g.start = ze + (m ? d : 0),
                            g.center = g.start - E(Ie / 2 - g.size / 2),
                            g.end = g.start - Ie + g.size,
                        t || (ze += s),
                            ze += h,
                        ge.horizontal || u || p && d && t > 0 && (ze -= N(d, p)),
                        t === v && (g.end += o, ze += o, f = m ? p : 0),
                            Ne.push(g),
                            r = g
                    }),
                    Pe[0].style[ge.horizontal ? 'width' : 'height'] = (l ? ze : ze - s - o) + 'px',
                    ze -= f,
                    Ne.length ? (Ce.start = Ne[0][Me ? 'center' : 'start'], Ce.end = Me ? r.center : ze > Ie ? r.end : Ce.start)  : Ce.start = Ce.end = 0
            }
            if (Ce.center = E(Ce.end / 2 + Ce.start / 2), Q(), Se.length && ke > 0 && (ge.dynamicHandle ? (Te = Ce.start === Ce.end ? ke : E(ke * Ie / ze), Te = d(Te, ge.minHandleSize, ke), Se[0].style[ge.horizontal ? 'width' : 'height'] = Te + 'px')  : Te = Se[ge.horizontal ? 'outerWidth' : 'outerHeight'](), xe.end = ke - Te, it || j()), !we && Ie > 0) {
                var p = Ce.start,
                    h = '';
                if (Re) e.each(Ne, function (e, t) {
                    Me ? Ee.push(t.center)  : t.start + t.size > p && p <= Ce.end && (p = t.start, Ee.push(p), p += Ie, p > Ce.end && p < Ce.end + Ie && Ee.push(Ce.end))
                });
                else for (; p - Ie < Ce.end; ) Ee.push(p),
                    p += Ie;
                if (De[0] && i !== Ee.length) {
                    for (var m = 0; m < Ee.length; m++) h += ge.pageBuilder.call(ye, m);
                    Ae = De.html(h).children(),
                        Ae.eq(Oe.activePage).addClass(ge.activeClass)
                }
            }
            if (Oe.slideeSize = ze, Oe.frameSize = Ie, Oe.sbSize = ke, Oe.handleSize = Te, Re) {
                a && null != ge.startAt && (W(ge.startAt), ye[Le ? 'toCenter' : 'toStart'](ge.startAt));
                var g = Ne[Oe.activeItem];
                X(Le && g ? g.center : d(Ce.dest, Ce.start, Ce.end))
            } else a ? null != ge.startAt && X(ge.startAt, 1)  : X(d(Ce.dest, Ce.start, Ce.end));
            pe('load')
        }
        function X(e, t, a) {
            if (Re && at.released && !a) {
                var n = $(e),
                    i = e > Ce.start && e < Ce.end;
                Le ? (i && (e = Ne[n.centerItem].center), Me && ge.activateMiddle && W(n.centerItem))  : i && (e = Ne[n.firstItem].start)
            }
            at.init && at.slidee && ge.elasticBounds ? e > Ce.end ? e = Ce.end + (e - Ce.end) / 6 : e < Ce.start && (e = Ce.start + (e - Ce.start) / 6)  : e = d(e, Ce.start, Ce.end),
                et.start = + new Date,
                et.time = 0,
                et.from = Ce.cur,
                et.to = e,
                et.delta = e - Ce.cur,
                et.tweesing = at.tweese || at.init && !at.slidee,
                et.immediate = !et.tweesing && (t || at.init && at.slidee || !ge.speed),
                at.tweese = 0,
            e !== Ce.dest && (Ce.dest = e, pe('change'), it || Y()),
                K(),
                Q(),
                Z(),
                F()
        }
        function Y() {
            if (ye.initialized) {
                if (!it) return it = w(Y),
                    void (at.released && pe('moveStart'));
                et.immediate ? Ce.cur = et.to : et.tweesing ? (et.tweeseDelta = et.to - Ce.cur, x(et.tweeseDelta) < 0.1 ? Ce.cur = et.to : Ce.cur += et.tweeseDelta * (at.released ? ge.swingSpeed : ge.syncSpeed))  : (et.time = N( + new Date - et.start, ge.speed), Ce.cur = et.from + et.delta * e.easing[ge.easing](et.time / ge.speed, et.time, 0, 1, ge.speed)),
                    et.to === Ce.cur ? (Ce.cur = et.to, at.tweese = it = 0)  : it = w(Y),
                    pe('move'),
                we || (f ? Pe[0].style[f] = v + (ge.horizontal ? 'translateX' : 'translateY') + '(' + - Ce.cur + 'px)' : Pe[0].style[ge.horizontal ? 'left' : 'top'] = - E(Ce.cur) + 'px'),
                !it && at.released && pe('moveEnd'),
                    j()
            }
        }
        function j() {
            Se.length && (xe.cur = Ce.start === Ce.end ? 0 : ((at.init && !at.slidee ? Ce.dest : Ce.cur) - Ce.start) / (Ce.end - Ce.start) * xe.end, xe.cur = d(E(xe.cur), xe.start, xe.end), _e.hPos !== xe.cur && (_e.hPos = xe.cur, f ? Se[0].style[f] = v + (ge.horizontal ? 'translateX' : 'translateY') + '(' + xe.cur + 'px)' : Se[0].style[ge.horizontal ? 'left' : 'top'] = xe.cur + 'px'))
        }
        function F() {
            Ae[0] && _e.page !== Oe.activePage && (_e.page = Oe.activePage, Ae.removeClass(ge.activeClass).eq(Oe.activePage).addClass(ge.activeClass), pe('activePage', _e.page))
        }
        function M() {
            tt.speed && Ce.cur !== (tt.speed > 0 ? Ce.end : Ce.start) || ye.stop(),
                ot = at.init ? w(M)  : 0,
                tt.now = + new Date,
                tt.pos = Ce.cur + (tt.now - tt.lastTime) / 1000 * tt.speed,
                X(at.init ? tt.pos : E(tt.pos)),
            at.init || Ce.cur !== Ce.dest || pe('moveEnd'),
                tt.lastTime = tt.now
        }
        function L(e, t, n) {
            if ('boolean' === i(t) && (n = t, t = a), t === a) X(Ce[e], n);
            else {
                if (Le && 'center' !== e) return;
                var r = ye.getPos(t);
                r && X(r[e], n, !Le)
            }
        }
        function R(e) {
            return null != e ? l(e) ? e >= 0 && e < Ne.length ? e : - 1 : qe.index(e)  : - 1
        }
        function U(e) {
            return R(l(e) && 0 > e ? e + Ne.length : e)
        }
        function W(e, t) {
            var a = R(e);
            return !Re || 0 > a ? !1 : ((_e.active !== a || t) && (qe.eq(Oe.activeItem).removeClass(ge.activeClass), qe.eq(a).addClass(ge.activeClass), _e.active = Oe.activeItem = a, Z(), pe('active', a)), a)
        }
        function $(e) {
            e = d(l(e) ? e : Ce.dest, Ce.start, Ce.end);
            var t = {
                },
                a = Me ? 0 : Ie / 2;
            if (!we) for (var n = 0, i = Ee.length; i > n; n++) {
                if (e >= Ce.end || n === Ee.length - 1) {
                    t.activePage = Ee.length - 1;
                    break
                }
                if (e <= Ee[n] + a) {
                    t.activePage = n;
                    break
                }
            }
            if (Re) {
                for (var r = !1, s = !1, o = !1, c = 0, u = Ne.length; u > c; c++) if (r === !1 && e <= Ne[c].start + Ne[c].half && (r = c), o === !1 && e <= Ne[c].center + Ne[c].half && (o = c), c === u - 1 || e <= Ne[c].end + Ne[c].half) {
                    s = c;
                    break
                }
                t.firstItem = l(r) ? r : 0,
                    t.centerItem = l(o) ? o : t.firstItem,
                    t.lastItem = l(s) ? s : t.centerItem
            }
            return t
        }
        function Q(t) {
            e.extend(Oe, $(t))
        }
        function Z() {
            var e = Ce.dest <= Ce.start,
                t = Ce.dest >= Ce.end,
                a = (e ? 1 : 0) | (t ? 2 : 0);
            if (_e.slideePosState !== a && (_e.slideePosState = a, Je.is('button,input') && Je.prop('disabled', e), Ke.is('button,input') && Ke.prop('disabled', t), Je.add(Qe) [e ? 'addClass' : 'removeClass'](ge.disabledClass), Ke.add($e) [t ? 'addClass' : 'removeClass'](ge.disabledClass)), _e.fwdbwdState !== a && at.released && (_e.fwdbwdState = a, Qe.is('button,input') && Qe.prop('disabled', e), $e.is('button,input') && $e.prop('disabled', t)), Re && null != Oe.activeItem) {
                var n = 0 === Oe.activeItem,
                    i = Oe.activeItem >= Ne.length - 1,
                    r = (n ? 1 : 0) | (i ? 2 : 0);
                _e.itemsButtonState !== r && (_e.itemsButtonState = r, Ze.is('button,input') && Ze.prop('disabled', n), Ge.is('button,input') && Ge.prop('disabled', i), Ze[n ? 'addClass' : 'removeClass'](ge.disabledClass), Ge[i ? 'addClass' : 'removeClass'](ge.disabledClass))
            }
        }
        function G(e, t, a) {
            if (e = U(e), t = U(t), e > - 1 && t > - 1 && e !== t && (!a || t !== e - 1) && (a || t !== e + 1)) {
                qe.eq(e) [a ? 'insertAfter' : 'insertBefore'](Ne[t].el);
                var n = t > e ? e : a ? t : t - 1,
                    i = e > t ? e : a ? t + 1 : t,
                    r = e > t;
                null != Oe.activeItem && (e === Oe.activeItem ? _e.active = Oe.activeItem = a ? r ? t + 1 : t : r ? t : t - 1 : Oe.activeItem > n && Oe.activeItem < i && (_e.active = Oe.activeItem += r ? 1 : - 1)),
                    H()
            }
        }
        function J(e, t) {
            for (var a = 0, n = Ve[e].length; n > a; a++) if (Ve[e][a] === t) return a;
            return - 1
        }
        function K() {
            at.released && !ye.isPaused && ye.resume()
        }
        function V(e) {
            return E(d(e, xe.start, xe.end) / xe.end * (Ce.end - Ce.start)) + Ce.start
        }
        function _() {
            at.history[0] = at.history[1],
                at.history[1] = at.history[2],
                at.history[2] = at.history[3],
                at.history[3] = at.delta
        }
        function ee(e) {
            at.released = 0,
                at.source = e,
                at.slidee = 'slidee' === e
        }
        function te(t) {
            var a = 'touchstart' === t.type,
                n = t.data.source,
                i = 'slidee' === n;
            at.init || !a && ie(t.target) || ('handle' !== n || ge.dragHandle && xe.start !== xe.end) && (!i || (a ? ge.touchDragging : ge.mouseDragging && t.which < 2)) && (a || r(t), ee(n), at.init = 0, at.$source = e(t.target), at.touch = a, at.pointer = a ? t.originalEvent.touches[0] : t, at.initX = at.pointer.pageX, at.initY = at.pointer.pageY, at.initPos = i ? Ce.cur : xe.cur, at.start = + new Date, at.time = 0, at.path = 0, at.delta = 0, at.locked = 0, at.history = [
                0,
                0,
                0,
                0
            ], at.pathToLock = i ? a ? 30 : 10 : 0, b.on(a ? z : I, ae), ye.pause(1), (i ? Pe : Se).addClass(ge.draggedClass), pe('moveStart'), i && (rt = setInterval(_, 10)))
        }
        function ae(e) {
            if (at.released = 'mouseup' === e.type || 'touchend' === e.type, at.pointer = at.touch ? e.originalEvent[at.released ? 'changedTouches' : 'touches'][0] : e, at.pathX = at.pointer.pageX - at.initX, at.pathY = at.pointer.pageY - at.initY, at.path = D(A(at.pathX, 2) + A(at.pathY, 2)), at.delta = ge.horizontal ? at.pathX : at.pathY, at.released || !(at.path < 1)) {
                if (!at.init) {
                    if (!(ge.horizontal ? x(at.pathX) > x(at.pathY)  : x(at.pathX) < x(at.pathY))) return ne();
                    at.init = 1
                }
                r(e),
                !at.locked && at.path > at.pathToLock && at.slidee && (at.locked = 1, at.$source.on(B, s)),
                at.released && (ne(), ge.releaseSwing && at.slidee && (at.swing = (at.delta - at.history[0]) / 40 * 300, at.delta += at.swing, at.tweese = x(at.swing) > 10)),
                    X(at.slidee ? E(at.initPos - at.delta)  : V(at.initPos + at.delta))
            }
        }
        function ne() {
            clearInterval(rt),
                at.released = !0,
                b.off(at.touch ? z : I, ae),
                (at.slidee ? Pe : Se).removeClass(ge.draggedClass),
                setTimeout(function () {
                    at.$source.off(B, s)
                }),
            Ce.cur === Ce.dest && at.init && pe('moveEnd'),
                ye.resume(1),
                at.init = 0
        }
        function ie(t) {
            return ~e.inArray(t.nodeName, k) || e(t).is(ge.interactive)
        }
        function re() {
            ye.stop(),
                b.off('mouseup', re)
        }
        function se(e) {
            switch (r(e), this) {
                case $e[0]:
                case Qe[0]:
                    ye.moveBy($e.is(this) ? ge.moveBy : - ge.moveBy),
                        b.on('mouseup', re);
                    break;
                case Ze[0]:
                    ye.prev();
                    break;
                case Ge[0]:
                    ye.next();
                    break;
                case Je[0]:
                    ye.prevPage();
                    break;
                case Ke[0]:
                    ye.nextPage()
            }
        }
        function oe(e) {
            return nt.curDelta = (ge.horizontal ? e.deltaY || e.deltaX : e.deltaY) || - e.wheelDelta,
                nt.curDelta /= 1 === e.deltaMode ? 3 : 100,
                Re ? (p = + new Date, nt.last < p - nt.resetTime && (nt.delta = 0), nt.last = p, nt.delta += nt.curDelta, x(nt.delta) < 1 ? nt.finalDelta = 0 : (nt.finalDelta = E(nt.delta / 1), nt.delta %= 1), nt.finalDelta)  : nt.curDelta
        }
        function le(e) {
            e.originalEvent[g] = ye;
            var t = + new Date;
            if (O + ge.scrollHijack > t && Ue[0] !== document && Ue[0] !== window) return void (O = t);
            if (ge.scrollBy && Ce.start !== Ce.end) {
                var a = oe(e.originalEvent);
                (ge.scrollTrap || a > 0 && Ce.dest < Ce.end || 0 > a && Ce.dest > Ce.start) && r(e, 1),
                    ye.slideBy(ge.scrollBy * a)
            }
        }
        function ce(e) {
            ge.clickBar && e.target === Be[0] && (r(e), X(V((ge.horizontal ? e.pageX - Be.offset().left : e.pageY - Be.offset().top) - Te / 2)))
        }
        function de(e) {
            if (ge.keyboardNavBy) switch (e.which) {
                case ge.horizontal ? 37 : 38:
                    r(e),
                        ye['pages' === ge.keyboardNavBy ? 'prevPage' : 'prev']();
                    break;
                case ge.horizontal ? 39 : 40:
                    r(e),
                        ye['pages' === ge.keyboardNavBy ? 'nextPage' : 'next']()
            }
        }
        function ue(e) {
            return ie(this) ? void (e.originalEvent[g + 'ignore'] = !0)  : void (this.parentNode !== Pe[0] || e.originalEvent[g + 'ignore'] || ye.activate(this))
        }
        function fe() {
            this.parentNode === De[0] && ye.activatePage(Ae.index(this))
        }
        function ve(e) {
            ge.pauseOnHover && ye['mouseenter' === e.type ? 'pause' : 'resume'](2)
        }
        function pe(e, t) {
            if (Ve[e]) {
                for (me = Ve[e].length, T.length = 0, he = 0; me > he; he++) T.push(Ve[e][he]);
                for (he = 0; me > he; he++) T[he].call(ye, e, t)
            }
        }
        var he,
            me,
            ge = e.extend({
            }, n.defaults, h),
            ye = this,
            we = l(t),
            be = e(t),
            Pe = ge.slidee ? e(ge.slidee).eq(0)  : be.children().eq(0),
            Ie = 0,
            ze = 0,
            Ce = {
                start: 0,
                center: 0,
                end: 0,
                cur: 0,
                dest: 0
            },
            Be = e(ge.scrollBar).eq(0),
            Se = Be.children().eq(0),
            ke = 0,
            Te = 0,
            xe = {
                start: 0,
                end: 0,
                cur: 0
            },
            De = e(ge.pagesBar),
            Ae = 0,
            Ee = [
            ],
            qe = 0,
            Ne = [
            ],
            Oe = {
                firstItem: 0,
                lastItem: 0,
                centerItem: 0,
                activeItem: null,
                activePage: 0
            },
            He = new u(be[0]),
            Xe = new u(Pe[0]),
            Ye = new u(Be[0]),
            je = new u(Se[0]),
            Fe = 'basic' === ge.itemNav,
            Me = 'forceCentered' === ge.itemNav,
            Le = 'centered' === ge.itemNav || Me,
            Re = !we && (Fe || Le || Me),
            Ue = ge.scrollSource ? e(ge.scrollSource)  : be,
            We = ge.dragSource ? e(ge.dragSource)  : be,
            $e = e(ge.forward),
            Qe = e(ge.backward),
            Ze = e(ge.prev),
            Ge = e(ge.next),
            Je = e(ge.prevPage),
            Ke = e(ge.nextPage),
            Ve = {
            },
            _e = {
            },
            et = {
            },
            tt = {
            },
            at = {
                released: 1
            },
            nt = {
                last: 0,
                delta: 0,
                resetTime: 200
            },
            it = 0,
            rt = 0,
            st = 0,
            ot = 0;
        we || (t = be[0]),
            ye.initialized = 0,
            ye.frame = t,
            ye.slidee = Pe[0],
            ye.pos = Ce,
            ye.rel = Oe,
            ye.items = Ne,
            ye.pages = Ee,
            ye.isPaused = 0,
            ye.options = ge,
            ye.dragging = at,
            ye.reload = function () {
                H()
            },
            ye.getPos = function (e) {
                if (Re) {
                    var t = R(e);
                    return - 1 !== t ? Ne[t] : !1
                }
                var a = Pe.find(e).eq(0);
                if (a[0]) {
                    var n = ge.horizontal ? a.offset().left - Pe.offset().left : a.offset().top - Pe.offset().top,
                        i = a[ge.horizontal ? 'outerWidth' : 'outerHeight']();
                    return {
                        start: n,
                        center: n - Ie / 2 + i / 2,
                        end: n - Ie + i,
                        size: i
                    }
                }
                return !1
            },
            ye.moveBy = function (e) {
                tt.speed = e,
                !at.init && tt.speed && Ce.cur !== (tt.speed > 0 ? Ce.end : Ce.start) && (tt.lastTime = + new Date, tt.startPos = Ce.cur, ee('button'), at.init = 1, pe('moveStart'), y(ot), M())
            },
            ye.stop = function () {
                'button' === at.source && (at.init = 0, at.released = 1)
            },
            ye.prev = function () {
                ye.activate(null == Oe.activeItem ? 0 : Oe.activeItem - 1)
            },
            ye.next = function () {
                ye.activate(null == Oe.activeItem ? 0 : Oe.activeItem + 1)
            },
            ye.prevPage = function () {
                ye.activatePage(Oe.activePage - 1)
            },
            ye.nextPage = function () {
                ye.activatePage(Oe.activePage + 1)
            },
            ye.slideBy = function (e, t) {
                e && (Re ? ye[Le ? 'toCenter' : 'toStart'](d((Le ? Oe.centerItem : Oe.firstItem) + ge.scrollBy * e, 0, Ne.length))  : X(Ce.dest + e, t))
            },
            ye.slideTo = function (e, t) {
                X(e, t)
            },
            ye.toStart = function (e, t) {
                L('start', e, t)
            },
            ye.toEnd = function (e, t) {
                L('end', e, t)
            },
            ye.toCenter = function (e, t) {
                L('center', e, t)
            },
            ye.getIndex = R,
            ye.activate = function (e, t) {
                var a = W(e);
                ge.smart && a !== !1 && (Le ? ye.toCenter(a, t)  : a >= Oe.lastItem ? ye.toStart(a, t)  : a <= Oe.firstItem ? ye.toEnd(a, t)  : K())
            },
            ye.activatePage = function (e, t) {
                l(e) && X(Ee[d(e, 0, Ee.length - 1)], t)
            },
            ye.resume = function (e) {
                ge.cycleBy && ge.cycleInterval && ('items' !== ge.cycleBy || Ne[0] && null != Oe.activeItem) && !(e < ye.isPaused) && (ye.isPaused = 0, st ? st = clearTimeout(st)  : pe('resume'), st = setTimeout(function () {
                        switch (pe('cycle'), ge.cycleBy) {
                            case 'items':
                                ye.activate(Oe.activeItem >= Ne.length - 1 ? 0 : Oe.activeItem + 1);
                                break;
                            case 'pages':
                                ye.activatePage(Oe.activePage >= Ee.length - 1 ? 0 : Oe.activePage + 1)
                        }
                    },
                    ge.cycleInterval))
            },
            ye.pause = function (e) {
                e < ye.isPaused || (ye.isPaused = e || 100, st && (st = clearTimeout(st), pe('pause')))
            },
            ye.toggle = function () {
                ye[st ? 'pause' : 'resume']()
            },
            ye.set = function (t, a) {
                e.isPlainObject(t) ? e.extend(ge, t)  : ge.hasOwnProperty(t) && (ge[t] = a)
            },
            ye.add = function (t, a) {
                var n = e(t);
                Re ? (null == a || !Ne[0] || a >= Ne.length ? n.appendTo(Pe)  : Ne.length && n.insertBefore(Ne[a].el), null != Oe.activeItem && a <= Oe.activeItem && (_e.active = Oe.activeItem += n.length))  : Pe.append(n),
                    H()
            },
            ye.remove = function (t) {
                if (Re) {
                    var a = U(t);
                    if (a > - 1) {
                        qe.eq(a).remove();
                        var n = a === Oe.activeItem;
                        null != Oe.activeItem && a < Oe.activeItem && (_e.active = --Oe.activeItem),
                            H(),
                        n && (_e.active = null, ye.activate(Oe.activeItem))
                    }
                } else e(t).remove(),
                    H()
            },
            ye.moveAfter = function (e, t) {
                G(e, t, 1)
            },
            ye.moveBefore = function (e, t) {
                G(e, t)
            },
            ye.on = function (e, t) {
                if ('object' === i(e)) for (var a in e) e.hasOwnProperty(a) && ye.on(a, e[a]);
                else if ('function' === i(t)) for (var n = e.split(' '), r = 0, s = n.length; s > r; r++) Ve[n[r]] = Ve[n[r]] || [],
                - 1 === J(n[r], t) && Ve[n[r]].push(t);
                else if ('array' === i(t)) for (var o = 0, l = t.length; l > o; o++) ye.on(e, t[o])
            },
            ye.one = function (e, t) {
                function a() {
                    t.apply(ye, arguments),
                        ye.off(e, a)
                }
                ye.on(e, a)
            },
            ye.off = function (e, t) {
                if (t instanceof Array) for (var a = 0, n = t.length; n > a; a++) ye.off(e, t[a]);
                else for (var i = e.split(' '), r = 0, s = i.length; s > r; r++) if (Ve[i[r]] = Ve[i[r]] || [], null == t) Ve[i[r]].length = 0;
                else {
                    var o = J(i[r], t);
                    - 1 !== o && Ve[i[r]].splice(o, 1)
                }
            },
            ye.destroy = function () {
                return Ue.add(Se).add(Be).add(De).add($e).add(Qe).add(Ze).add(Ge).add(Je).add(Ke).off('.' + g),
                    b.off('keydown', de),
                    Ze.add(Ge).add(Je).add(Ke).removeClass(ge.disabledClass),
                qe && null != Oe.activeItem && qe.eq(Oe.activeItem).removeClass(ge.activeClass),
                    De.empty(),
                we || (be.off('.' + g), He.restore(), Xe.restore(), Ye.restore(), je.restore(), e.removeData(t, g)),
                    Ne.length = Ee.length = 0,
                    _e = {
                    },
                    ye.initialized = 0,
                    ye
            },
            ye.init = function () {
                if (!ye.initialized) {
                    ye.on(m);
                    var e = [
                            'overflow',
                            'position'
                        ],
                        t = [
                            'position',
                            'webkitTransform',
                            'msTransform',
                            'transform',
                            'left',
                            'top',
                            'width',
                            'height'
                        ];
                    He.save.apply(He, e),
                        Ye.save.apply(Ye, e),
                        Xe.save.apply(Xe, t),
                        je.save.apply(je, t);
                    var a = Se;
                    return we || (a = a.add(Pe), be.css('overflow', 'hidden'), f || 'static' !== be.css('position') || be.css('position', 'relative')),
                        f ? v && a.css(f, v)  : ('static' === Be.css('position') && Be.css('position', 'relative'), a.css({
                            position: 'absolute'
                        })),
                    ge.forward && $e.on(S, se),
                    ge.backward && Qe.on(S, se),
                    ge.prev && Ze.on(B, se),
                    ge.next && Ge.on(B, se),
                    ge.prevPage && Je.on(B, se),
                    ge.nextPage && Ke.on(B, se),
                        Ue.on(C, le),
                    Be[0] && Be.on(B, ce),
                    Re && ge.activateOn && be.on(ge.activateOn + '.' + g, '*', ue),
                    De[0] && ge.activatePageOn && De.on(ge.activatePageOn + '.' + g, '*', fe),
                        We.on(P, {
                            source: 'slidee'
                        }, te),
                    Se && Se.on(P, {
                        source: 'handle'
                    }, te),
                        b.on('keydown', de),
                    we || (be.on('mouseenter.' + g + ' mouseleave.' + g, ve), be.on('scroll.' + g, o)),
                        ye.initialized = 1,
                        H(!0),
                    ge.cycleBy && !we && ye[ge.startPaused ? 'pause' : 'resume'](),
                        ye
                }
            }
    }
    function i(e) {
        return null == e ? String(e)  : 'object' == typeof e || 'function' == typeof e ? Object.prototype.toString.call(e).match(/\s([a-z]+)/i) [1].toLowerCase() || 'object' : typeof e
    }
    function r(e, t) {
        e.preventDefault(),
        t && e.stopPropagation()
    }
    function s(t) {
        r(t, 1),
            e(this).off(t.type, s)
    }
    function o() {
        this.scrollLeft = 0,
            this.scrollTop = 0
    }
    function l(e) {
        return !isNaN(parseFloat(e)) && isFinite(e)
    }
    function c(e, t) {
        return 0 | E(String(e.css(t)).replace(/[^\-0-9.]/g, ''))
    }
    function d(e, t, a) {
        return t > e ? t : e > a ? a : e
    }
    function u(e) {
        var t = {
        };
        return t.style = {
        },
            t.save = function () {
                if (e && e.nodeType) {
                    for (var a = 0; a < arguments.length; a++) t.style[arguments[a]] = e.style[arguments[a]];
                    return t
                }
            },
            t.restore = function () {
                if (e && e.nodeType) {
                    for (var a in t.style) t.style.hasOwnProperty(a) && (e.style[a] = t.style[a]);
                    return t
                }
            },
            t
    }
    var f,
        v,
        p,
        h = 'sly',
        m = 'Sly',
        g = h,
        y = t.cancelAnimationFrame || t.cancelRequestAnimationFrame,
        w = t.requestAnimationFrame,
        b = e(document),
        P = 'touchstart.' + g + ' mousedown.' + g,
        I = 'mousemove.' + g + ' mouseup.' + g,
        z = 'touchmove.' + g + ' touchend.' + g,
        C = (document.implementation.hasFeature('Event.wheel', '3.0') ? 'wheel.' : 'mousewheel.') + g,
        B = 'click.' + g,
        S = 'mousedown.' + g,
        k = [
            'INPUT',
            'SELECT',
            'BUTTON',
            'TEXTAREA'
        ],
        T = [
        ],
        x = Math.abs,
        D = Math.sqrt,
        A = Math.pow,
        E = Math.round,
        q = Math.max,
        N = Math.min,
        O = 0;
    b.on(C, function (e) {
        var t = e.originalEvent[g],
            a = + new Date;
        (!t || t.options.scrollHijack < a - O) && (O = a)
    }),
        function (e) {
            function t(e) {
                var t = (new Date).getTime(),
                    n = Math.max(0, 16 - (t - a)),
                    i = setTimeout(e, n);
                return a = t,
                    i
            }
            w = e.requestAnimationFrame || e.webkitRequestAnimationFrame || t;
            var a = (new Date).getTime(),
                n = e.cancelAnimationFrame || e.webkitCancelAnimationFrame || e.clearTimeout;
            y = function (t) {
                n.call(e, t)
            }
        }(window),
        function () {
            function e(e) {
                for (var n = 0, i = t.length; i > n; n++) {
                    var r = t[n] ? t[n] + e.charAt(0).toUpperCase() + e.slice(1)  : e;
                    if (null != a.style[r]) return r
                }
            }
            var t = [
                    '',
                    'webkit',
                    'moz',
                    'ms',
                    'o'
                ],
                a = document.createElement('div');
            f = e('transform'),
                v = e('perspective') ? 'translateZ(0) ' : ''
        }(),
        t[m] = n,
        e.fn[h] = function (t, a) {
            var r,
                s;
            return e.isPlainObject(t) || (('string' === i(t) || t === !1) && (r = t === !1 ? 'destroy' : t, s = Array.prototype.slice.call(arguments, 1)), t = {
            }),
                this.each(function (i, o) {
                    var l = e.data(o, g);
                    l || r ? l && r && l[r] && l[r].apply(l, s)  : l = e.data(o, g, new n(o, t, a).init())
                })
        },
        n.defaults = {
            slidee: null,
            horizontal: !1,
            itemNav: null,
            itemSelector: null,
            smart: !1,
            activateOn: null,
            activateMiddle: !1,
            scrollSource: null,
            scrollBy: 0,
            scrollHijack: 300,
            scrollTrap: !1,
            dragSource: null,
            mouseDragging: !1,
            touchDragging: !1,
            releaseSwing: !1,
            swingSpeed: 0.2,
            elasticBounds: !1,
            interactive: null,
            scrollBar: null,
            dragHandle: !1,
            dynamicHandle: !1,
            minHandleSize: 50,
            clickBar: !1,
            syncSpeed: 0.5,
            pagesBar: null,
            activatePageOn: null,
            pageBuilder: function (e) {
                return '<li>' + (e + 1) + '</li>'
            },
            forward: null,
            backward: null,
            prev: null,
            next: null,
            prevPage: null,
            nextPage: null,
            cycleBy: null,
            cycleInterval: 5000,
            pauseOnHover: !1,
            startPaused: !1,
            moveBy: 300,
            speed: 0,
            easing: 'swing',
            startAt: null,
            keyboardNavBy: null,
            draggedClass: 'dragged',
            activeClass: 'active',
            disabledClass: 'disabled'
        }
}(jQuery, window);
!function t(e, o, n) {
    function i(a, s) {
        if (!o[a]) {
            if (!e[a]) {
                var l = 'function' == typeof require && require;
                if (!s && l) return l(a, !0);
                if (r) return r(a, !0);
                var h = new Error('Cannot find module \'' + a + '\'');
                throw h.code = 'MODULE_NOT_FOUND',
                    h
            }
            var c = o[a] = {
                exports: {
                }
            };
            e[a][0].call(c.exports, function (t) {
                var o = e[a][1][t];
                return i(o ? o : t)
            }, c, c.exports, t, e, o, n)
        }
        return o[a].exports
    }
    for (var r = 'function' == typeof require && require, a = 0; a < n.length; a++) i(n[a]);
    return i
}({
        1: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n() {
                        return {
                            addons: [
                                {
                                    name: 'keen:ua_parser',
                                    input: {
                                        ua_string: 'user_agent'
                                    },
                                    output: 'parsed_user_agent'
                                }
                            ]
                        }
                    }
                    function i() {
                        var t;
                        try {
                            t = window.localStorage.getItem('distinctID'),
                            null === t && (t = 'anon_' + h.randomString(11), window.localStorage.setItem('distinctID', t))
                        } catch (e) {
                            t = 'anon_' + h.randomString(11)
                        }
                        return d.debug('analytics distinctID = ' + t),
                            t
                    }
                    function r() {
                        var t = 0,
                            e = window.onerror;
                        window.onerror = function (o, n, i) {
                            return t++ <= c.analytics.maxTrackedErrors && mixpanel.track('USER', {
                                event_type: 'error',
                                error_type: 'window',
                                error_severity: 'error'
                            }),
                                e ? e(o, n, i)  : !1
                        };
                        var o = console.warn;
                        console.warn = function () {
                            var e = Array.prototype.slice.call(arguments);
                            t++ <= c.analytics.maxTrackedErrors && mixpanel.track('USER', {
                                event_type: 'error',
                                error_type: 'console',
                                error_severity: 'warning'
                            }),
                                o.apply(console, e)
                        };
                        var n = console.error;
                        console.error = function () {
                            var e = Array.prototype.slice.call(arguments);
                            t++ <= c.analytics.maxTrackedErrors && mixpanel.track('USER', {
                                event_type: 'error',
                                error_type: 'console',
                                error_severity: 'error'
                            }),
                                n.apply(console, e)
                        }
                    }
                    function a(t, e) {
                        var o = Date.now() - b;
                        clearTimeout(w),
                            mixpanel.track('USER', {
                                event_type: 'model_loaded',
                                duration: o
                            }),
                            t.panos.forEach(function (t) {
                                d.debug('adding handler for tracking pano ' + t.id),
                                    t.on('enter', function () {
                                        mixpanel.track('USER', {
                                            event_type: 'view_pano',
                                            pano_id: t.id,
                                            interaction_source: f,
                                            navigation_source: g
                                        })
                                    })
                            }),
                            e.on('tour_auto', function (t) {
                                g = 'tour_' + t
                            }),
                            e.on('tour_manual', function (t) {
                                g = 'tour_manual'
                            }),
                            e.controls[u.PANORAMA].on('interaction.key', function () {
                                e.mode === u.TRANSITIONING || e.flying || (f = 'keyboard', g = 'self_guided')
                            }),
                            e.controls[u.PANORAMA].on('interaction.direct', function () {
                                e.mode === u.TRANSITIONING || e.flying || (f = 'direct', g = 'self_guided')
                            }),
                            e.controls[u.PANORAMA].on('interaction.gui', function () {
                                e.mode === u.TRANSITIONING || e.flying || (f = 'gui', g = 'self_guided')
                            }),
                            $(window).resize(function () {
                                mixpanel.register({
                                    aspect_ratio: l.aspectRatio()
                                })
                            })
                    }
                    function s(t, e) {
                        if (v) {
                            var o = {
                                },
                                n = {
                                };
                            t.panos.forEach(function (t) {
                                d.debug('adding load handler for tracking pano ' + t.id),
                                    t.on('loading', function (e) {
                                        n[t.id] || (n[t.id] = E.getElapsedTime())
                                    }),
                                    t.on('load', function (e) {
                                        if ('high' === e) {
                                            var i = E.getElapsedTime() - n[t.id];
                                            if (mixpanel.track('USER', {
                                                    event_type: 'pano_loaded',
                                                    pano_id: t.id,
                                                    download_time: i.toFixed(1)
                                                }), o[t.id]) {
                                                var r = E.getElapsedTime() - o[t.id];
                                                mixpanel.track('USER', {
                                                    event_type: 'pano_wait',
                                                    pano_id: t.id,
                                                    wait_duration: r.toFixed(1),
                                                    navigation_source: g
                                                })
                                            }
                                        }
                                    }),
                                    t.on('enter', function () {
                                        void 0 === o[t.id] && (o[t.id] = E.getElapsedTime(), t.isLoaded('high') && mixpanel.track('USER', {
                                            event_type: 'pano_wait',
                                            pano_id: t.id,
                                            wait_duration: 0,
                                            navigation_source: g
                                        }))
                                    })
                            }),
                                t.on('floor.changed', function (t, e) {
                                    mixpanel.track('USER', {
                                        event_type: 'floor_change',
                                        floor_id: t.name,
                                        interaction_source: f
                                    })
                                }),
                                e.on('mode.changed', function (t, e) {
                                    e !== u.TRANSITIONING && mixpanel.track('USER', {
                                        event_type: 'mode_change',
                                        view_mode: e,
                                        interaction_source: f
                                    })
                                }),
                                mixpanel.track('USER', {
                                    event_type: 'session_duration_start'
                                }),
                                setInterval(function () {
                                    document.hidden || (d.debug('Sending session duration ping'), mixpanel.track('USER', {
                                        event_type: 'session_duration_ping'
                                    }))
                                }, 1000 * c.analytics.sessionDurationPingFrequency)
                        }
                    }
                    var l = t('./util/browser'),
                        h = t('./util/common'),
                        c = t('./settings'),
                        u = t('./enum/Viewmode'),
                        p = t('./util/logger'),
                        d = new p(o),
                        m = new Keen({
                            projectId: '53a9baf536bca4213d000000',
                            writeKey: 'dcfae0ec6709a6d21f2f5e50a091a0cc6ab8abc88f1c66e961f9e33db58544ca90a37d6698df874334c6dddbde8eaaeb45d8e80d963978d87ada717c1b66e8e3a46d7686538c29db04227fd2ce04a0f7e35c3c5ef07b24b2c77400f29ed15258efbe9312722711abb9fbc2d7bf245803',
                            readKey: '',
                            requestType: 'xhr'
                        }),
                        f = 'direct',
                        g = void 0,
                        y = null,
                        v = !1,
                        b = null,
                        w = null,
                        E = new THREE.Clock(!0);
                    E.start(),
                        e.exports = {
                            report: function (t, e) {
                                m.addEvent('Session starts', {
                                    host: window.location.host,
                                    model: t,
                                    keen: n(),
                                    user_agent: '${keen.user_agent}',
                                    status: e,
                                    referrer: {
                                        url: document.referrer,
                                        domain: h.domainFromUrl(document.referrer)
                                    },
                                    embedded: l.inIframe()
                                })
                            },
                            getMixpanelToken: function (t) {
                                var e = $.Deferred();
                                return c.debug ? e.resolve('')  : t.data && t.data.mixpanel ? (d.info('Using prefetched mixpanel token'), e.resolve(t.data.mixpanel))  : ($.ajax('/api/v1/metrics/keys/').done(function (t) {
                                    'mixpanel' in t ? e.resolve(t.mixpanel)  : (d.error('No mixpanel token available'), e.reject('loading-failed-mixpanel'))
                                }).fail(function (t) {
                                    d.error('No mixpanel token available'),
                                        e.reject('loading-failed-mixpanel')
                                }), e.promise())
                            },
                            impression: function (t) {
                                y && (mixpanel.track('USER', {
                                    event_type: 'impression',
                                    visible: t
                                }), v && r())
                            },
                            initMixpanel: function (t) {
                                y = t.token,
                                    mixpanel.init(y, {
                                        persistence: 'localStorage'
                                    }),
                                    mixpanel.identify(i()),
                                    c.analytics.sessionTrackingRate = 1 === c.analytics.sessionTrackingRate ? 1 : 0.15,
                                    v = Math.random() < c.analytics.sessionTrackingRate,
                                    d.debug('tracking sample rate = ' + c.analytics.sessionTrackingRate),
                                    d.debug('tracking this session = ' + v);
                                var e = 'anonymous',
                                    o = 'anonymous';
                                mixpanel.register({
                                    app: 'showcase',
                                    app_version: t.version,
                                    model_id: t.model,
                                    user_id: e,
                                    group_id: o,
                                    session_tracking_rate: c.analytics.sessionTrackingRate,
                                    session_tracking: v,
                                    start_source: t.startSource
                                })
                            },
                            initMixpanelModel: function (t) {
                                if (y) {
                                    var e = t.data.owner,
                                        o = e && e.user_sid ? e.user_sid : 'anonymous',
                                        n = e && e.group_sid ? e.group_sid : 'anonymous',
                                        i = 'anonymous',
                                        r = 'anonymous';
                                    mixpanel.register({
                                        manifest_id: t.data.job.uuid,
                                        owner_user_id: o,
                                        owner_group_id: n,
                                        editor_user_id: i,
                                        editor_group_id: r,
                                        ua_string: l.userAgent(),
                                        is_mobile: l.isMobile(),
                                        iframe: l.inIframe(),
                                        aspect_ratio: l.aspectRatio()
                                    })
                                }
                            },
                            sessionStart: function (t) {
                                if (y && (d.debug('analytics user_session_start'), mixpanel.track('USER', {
                                        event_type: 'user_session_start'
                                    }), b = Date.now(), v)) {
                                    var e = function () {
                                        mixpanel.track('USER', {
                                            event_type: 'long_load'
                                        })
                                    };
                                    w = setTimeout(e, 15000)
                                }
                            },
                            modelLoaded: function (t, e) {
                                y && (a(t, e), s(t, e))
                            },
                            track: function (t, e) {
                                y && v && (d.debug('analytics.track("USER", ' + JSON.stringify(e) + ' )'), mixpanel.track(t, e))
                            },
                            trackAlways: function (t, e) {
                                y && (d.debug('analytics.trackAlways("USER", ' + JSON.stringify(e) + ' )'), mixpanel.track(t, e))
                            }
                        }
                }).call(this, '/js/analytics.js')
            },
            {
                './enum/Viewmode': 11,
                './settings': 38,
                './util/browser': 44,
                './util/common': 45,
                './util/logger': 48
            }
        ],
        2: [
            function (t, e, o) {
                'use strict';
                function n(t) {
                    THREE.PerspectiveCamera.call(this, r.dollhouseFOV, window.innerWidth / window.innerHeight, 1, 500),
                        this.parent = t,
                        this.controls = null
                }
                var i = t('../enum/Viewmode'),
                    r = t('../settings');
                n.prototype = Object.create(THREE.PerspectiveCamera.prototype),
                    n.prototype.set = function (t) {
                        if (this.controls.target.copy(this.parent.target), this.controls.target.y = 0, this.parent.mode === i.PANORAMA) this.position.set(0, 6, 0).add(this.parent.position).add(this.parent.getDirection().multiplyScalar( - 10));
                        else if (this.parent.mode === i.FLOORPLAN) {
                            var e = new THREE.Vector3(0, - 1, 0).applyQuaternion(this.parent.quaternion);
                            this.position.copy(this.parent.position).add(e.multiplyScalar(6)),
                                this.position.y = 6
                        }
                        this.controls.update()
                    },
                    e.exports = n
            },
            {
                '../enum/Viewmode': 11,
                '../settings': 38
            }
        ],
        3: [
            function (t, e, o) {
                'use strict';
                function n(t) {
                    THREE.OrthographicCamera.call(this, - i.orthoBase, i.orthoBase, i.orthoBase / (window.innerWidth / window.innerHeight), - i.orthoBase / (window.innerWidth / window.innerHeight), 1, 500),
                        this.parent = t,
                        this.controls = null
                }
                var i = (t('../util/transitions'), t('../util/easing'), t('../util/lerp'), t('../settings'));
                n.prototype = Object.create(THREE.OrthographicCamera.prototype),
                    n.prototype.set = function (t) {
                        var e = this.parent.model;
                        this.controls.target.set(e.center.x, 0, e.center.z),
                            this.position.set(e.center.x, 10, e.center.z);
                        var o = Math.max(e.size.x, e.size.z),
                            n = Math.min(e.size.x, e.size.z);
                        this.controls.zoomToContain(Math.max(o, n * i.aspect));
                        var r;
                        e.size.x < e.size.z ? (r = Math.PI / 2, this.parent.getDirection().x < 0 && (r += Math.PI))  : (r = 0, this.parent.getDirection().z > 0 && (r += Math.PI)),
                            this.controls.rotateLeft(r),
                            this.controls.update()
                    },
                    e.exports = n
            },
            {
                '../settings': 38,
                '../util/easing': 46,
                '../util/lerp': 47,
                '../util/transitions': 51
            }
        ],
        4: [
            function (t, e, o) {
                'use strict';
                function n(t) {
                    THREE.PerspectiveCamera.call(this, i.insideFOV, window.innerWidth / window.innerHeight, 0.1, 500),
                        this.parent = t,
                        this.controls = null
                }
                {
                    var i = t('../settings');
                    t('../util/transitions'),
                        t('../util/lerp')
                }
                n.prototype = Object.create(THREE.PerspectiveCamera.prototype),
                    n.prototype.set = function (t, e) {
                        this.parent.model.setProjectedPanos(t, t),
                            this.parent.currentPano = t,
                            this.parent.emit('pano.chosen', t, t),
                            this.position.copy(t.position);
                        var o;
                        if (e) o = new THREE.Vector3(0, 0, - 1).applyQuaternion(e);
                        else {
                            var o = this.parent.getDirection();
                            o.y = 0,
                                o.normalize()
                        }
                        var n = o.add(t.position);
                        this.controls.reset(),
                            this.controls.lookAt(n),
                            this.controls.update(0, !0)
                    },
                    e.exports = n
            },
            {
                '../settings': 38,
                '../util/lerp': 47,
                '../util/transitions': 51
            }
        ],
        5: [
            function (t, e, o) {
                'use strict';
                function n(t, e, o, n, a) {
                    r.call(this, t, e, o, n, a),
                        this.minPolarAngle = i.dollhouseDefault.minPolarAngle,
                        this.maxPolarAngle = i.dollhouseDefault.maxPolarAngle,
                        this.defaultMinDistance = this.adjustedMinDistance(),
                        this.minDistance = this.defaultMinDistance,
                        this.maxDistance = 50
                }
                var i = t('../settings'),
                    r = t('./OutsideControls');
                n.prototype = Object.create(r.prototype),
                    e.exports = n,
                    n.prototype.setModel = function (t) {
                        r.prototype.setModel.call(this, t),
                            this.defaultMinDistance = this.adjustedMinDistance(),
                            this.resetRanges()
                    },
                    n.prototype.adjustedMinDistance = function () {
                        if (void 0 === this.model) return i.dollhouseDefault.minDistance;
                        var t = this.model.boundingBox.max,
                            e = this.model.boundingBox.min,
                            o = e.distanceTo(t);
                        return Math.min(o / 2, i.dollhouseDefault.minDistance)
                    },
                    n.prototype.resetRanges = function (t, e) {
                        var o = t || this.adjustedMinDistance();
                        o = Math.min(o, this.defaultMinDistance),
                            this.minDistance = o;
                        var n = e || !1;
                        n ? (this.minPolarAngle = THREE.Math.degToRad( - 15), this.maxPolarAngle = THREE.Math.degToRad(89.9))  : (this.minPolarAngle = i.dollhouseDefault.minPolarAngle, this.maxPolarAngle = i.dollhouseDefault.maxPolarAngle)
                    },
                    n.prototype.calculateMaxDistance = function (t) {
                        var e = this.object,
                            o = t.boundingBox.max,
                            n = t.boundingBox.min,
                            i = Math.max(o.x - n.x, o.z - n.z) / 2,
                            r = (o.y - n.y) / 2,
                            a = i / Math.tan(e.fov / 2 * e.aspect * (Math.PI / 180));
                        a += Math.min(o.x - n.x, o.z - n.z) / 2;
                        var s = r / Math.tan(e.fov / 2 * (Math.PI / 180));
                        return 1.1 * Math.min(Math.max(a, s, 25), this.scene.skybox.geometry.boundingSphere.radius)
                    }
            },
            {
                '../settings': 38,
                './OutsideControls': 7
            }
        ],
        6: [
            function (t, e, o) {
                'use strict';
                function n(t, e, o, n, r) {
                    i.call(this, t, e, o, n, r),
                        this.minDistance = 15,
                        this.maxDistance = 50,
                        this.noRotateUpDown = !0,
                        this.minPolarAngle = 0,
                        this.maxPolarAngle = 0
                }
                var i = (t('../settings'), t('./OutsideControls'));
                n.prototype = Object.create(i.prototype),
                    e.exports = n
            },
            {
                '../settings': 38,
                './OutsideControls': 7
            }
        ],
        7: [
            function (t, e, o) {
                'use strict';
                function n(t, e, o, i, r) {
                    this.player = t,
                        this.model = r,
                        this.object = e,
                        this.object.controls = this,
                        this.scene = i,
                        this.domElement = void 0 !== o ? o : document,
                        this.enabled = !0,
                        this.target = new THREE.Vector3,
                        this.noZoom = !1,
                        this.zoomSpeed = 1,
                        this.minDistance = 0,
                        this.maxDistance = 1 / 0,
                        this.noRotate = !1,
                        this.noRotateUpDown = !1,
                        this.rotateSpeed = 1,
                        this.keyboardZoomSpeed = 0,
                        this.noPan = !1,
                        this.keyPanSpeed = 7,
                        this.autoRotate = !1,
                        this.autoRotateSpeed = 2,
                        this.minPolarAngle = THREE.Math.degToRad(25),
                        this.maxPolarAngle = THREE.Math.degToRad(65),
                        this.noKeys = !1,
                        this.keys = {
                            LEFT: 37,
                            UP: 38,
                            RIGHT: 39,
                            BOTTOM: 40
                        },
                        this.rotationAcceleration = new THREE.Vector2,
                        this.rotationSpeed = new THREE.Vector2,
                        this.panAcceleration = new THREE.Vector2,
                        this.panSpeed = new THREE.Vector2,
                        this.rotateStart = new THREE.Vector2,
                        this.rotateEnd = new THREE.Vector2,
                        this.rotateDelta = new THREE.Vector2,
                        this.panStart = new THREE.Vector2,
                        this.panEnd = new THREE.Vector2,
                        this.panDelta = new THREE.Vector2,
                        this.panOffset = new THREE.Vector3,
                        this.offset = new THREE.Vector3,
                        this.dollyStart = new THREE.Vector2,
                        this.dollyEnd = new THREE.Vector2,
                        this.dollyDelta = new THREE.Vector2,
                        this.phiDelta = 0,
                        this.thetaDelta = 0,
                        this.scale = 1,
                        this.panVector = new THREE.Vector3,
                        this.lastPosition = new THREE.Vector3,
                        this.state = l.NONE,
                        this.target0 = this.target.clone(),
                        this.position0 = this.object.position.clone(),
                        this.lastMoveTime = 0,
                        this.pointersLimit = 2,
                        this.pointers = [
                        ],
                        this.absoluteScale = 1,
                        this.currentScale = 1,
                        this.originalTop = this.object.top,
                        this.originalBottom = this.object.bottom,
                        this.originalLeft = this.object.left,
                        this.originalRight = this.object.right,
                        this.on('touch-one-finger-start', n.touch.rotate.start),
                        this.on('touch-one-finger-move', n.touch.rotate.move),
                        this.on('touch-two-finger-start', n.touch.pan.start),
                        this.on('touch-two-finger-move', n.touch.pan.move),
                        this.on('touch-two-finger-start', n.touch.zoom.start),
                        this.on('touch-two-finger-move', n.touch.zoom.move)
                }
                var i = t('../settings'),
                    r = t('../util/common'),
                    a = t('events').EventEmitter,
                    s = 0.000001,
                    l = {
                        NONE: - 1,
                        ROTATE: 0,
                        DOLLY: 1,
                        PAN: 2,
                        TOUCH_ROTATE: 3,
                        TOUCH_DOLLY_PAN: 4
                    };
                n.prototype = Object.create(a.prototype),
                    n.prototype.setModel = function (t) {
                        this.model = t
                    },
                    n.prototype.bindEvents = function () {
                        this.domElement.addEventListener('contextmenu', function (t) {
                            t.preventDefault()
                        }),
                            this.domElement.addEventListener('mousedown', this.onMouseDown.bind(this)),
                            this.domElement.addEventListener('mousemove', this.onMouseMove.bind(this)),
                            this.domElement.addEventListener('mouseup', this.onMouseUp.bind(this)),
                            this.domElement.addEventListener('mouseover', function (t) {
                                (0 === t.which || 0 === t.buttons) && this.onMouseUp(t)
                            }.bind(this)),
                            this.domElement.addEventListener('mousewheel', this.onMouseWheel.bind(this)),
                            this.domElement.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this)),
                            this.domElement.addEventListener('touchstart', this.touchstart.bind(this)),
                            this.domElement.addEventListener('touchend', this.touchend.bind(this)),
                            this.domElement.addEventListener('touchmove', this.touchmove.bind(this)),
                            this.domElement.addEventListener('pointerdown', this.pointerdown.bind(this)),
                            this.domElement.addEventListener('pointerup', this.pointerup.bind(this)),
                            this.domElement.addEventListener('pointerout', this.pointerup.bind(this)),
                            this.domElement.addEventListener('pointercancel', this.pointerup.bind(this)),
                            this.domElement.addEventListener('pointermove', this.pointermove.bind(this)),
                            document.addEventListener('keydown', this.onKeyDown.bind(this)),
                            document.addEventListener('keyup', this.onKeyUp.bind(this))
                    },
                    n.prototype.rotateLeft = function (t) {
                        void 0 === t && (t = this.getAutoRotationAngle()),
                            this.thetaDelta -= t
                    },
                    n.prototype.rotateUp = function (t) {
                        this.noRotateUpDown || (void 0 === t && (t = this.getAutoRotationAngle()), this.phiDelta -= t)
                    },
                    n.prototype.panLeft = function (t) {
                        var e = this.object.matrix.elements;
                        this.panOffset.set(e[0], 0, e[2]).normalize(),
                            this.panOffset.multiplyScalar( - t),
                            this.panVector.add(this.panOffset)
                    },
                    n.prototype.panUp = function (t) {
                        var e = this.object.matrix.elements;
                        this.panOffset.set(e[4], 0, e[6]).normalize(),
                            this.panOffset.multiplyScalar( - t),
                            this.panVector.add(this.panOffset)
                    },
                    n.prototype.pan = function (t, e) {
                        var o = this.domElement === document ? this.domElement.body : this.domElement;
                        if (this.object.updateMatrix(), void 0 !== this.object.fov) {
                            var n = this.object.position,
                                i = n.clone().sub(this.target),
                                r = i.length();
                            r *= Math.tan(this.object.fov / 2 * Math.PI / 180),
                                this.panLeft(2 * t * r / o.clientHeight),
                                this.panUp( - 2 * e * r / o.clientHeight)
                        } else void 0 !== this.object.top ? (this.panLeft(t * (this.object.right - this.object.left) / o.clientWidth), this.panUp( - e * (this.object.top - this.object.bottom) / o.clientHeight))  : console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.')
                    },
                    n.prototype.dollyIn = function (t) {
                        void 0 === t && (t = this.getZoomScale()),
                            this.scale /= t
                    },
                    n.prototype.dollyOut = function (t) {
                        void 0 === t && (t = this.getZoomScale()),
                            this.scale *= t
                    },
                    n.prototype.update = function (t) {
                        this.rotationSpeed.x = this.rotationSpeed.x * (1 - i.rotationFriction) + this.rotationAcceleration.x * i.rotationAccelerationOutside / 1000,
                            this.rotationSpeed.y = this.rotationSpeed.y * (1 - i.rotationFriction) + this.rotationAcceleration.y * i.rotationAccelerationOutside / 1000,
                            this.rotateLeft( - this.rotationSpeed.x),
                        this.noRotateUpDown || this.rotateUp(this.rotationSpeed.y),
                            this.panSpeed.x = this.panSpeed.x * (1 - i.panFriction) + this.panAcceleration.x * i.panAccelerationOutside,
                            this.panSpeed.y = this.panSpeed.y * (1 - i.panFriction) + this.panAcceleration.y * i.panAccelerationOutside,
                            this.pan( - this.panSpeed.x, this.panSpeed.y);
                        var e = this.object.position;
                        this.offset.copy(e).sub(this.target);
                        var o = Math.atan2(this.offset.x, this.offset.z),
                            n = Math.atan2(Math.sqrt(this.offset.x * this.offset.x + this.offset.z * this.offset.z), this.offset.y);
                        this.autoRotate && this.rotateLeft(this.getAutoRotationAngle()),
                            o += this.thetaDelta,
                            n += this.phiDelta,
                            n = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, n)),
                            n = Math.max(s, Math.min(Math.PI - s, n));
                        var r = this.offset.length();
                        this.object.top ? (this.absoluteScale *= this.scale - 0.03 * this.keyboardZoomSpeed, this.absoluteScale = Math.max(i.zoomNearLimit, Math.min(this.absoluteScale, i.zoomFarLimit)), this.currentScale = 0.8 * this.currentScale + 0.2 * this.absoluteScale, this.object.left = - i.orthoBase * this.currentScale, this.object.right = i.orthoBase * this.currentScale, this.object.top = i.orthoBase * this.currentScale / i.aspect, this.object.bottom = - i.orthoBase * this.currentScale / i.aspect, this.object.updateProjectionMatrix())  : r *= this.scale,
                            r = Math.max(this.minDistance, Math.min(this.maxDistance, r)),
                            this.target.add(this.panVector),
                            this.model.boundingBoxWithPadding.clampPoint(this.target, this.target),
                            this.offset.x = r * Math.sin(n) * Math.sin(o),
                            this.offset.y = r * Math.cos(n),
                            this.offset.z = r * Math.sin(n) * Math.cos(o),
                            e.copy(this.target).add(this.offset),
                            this.object.lookAt(this.target),
                            this.thetaDelta = 0,
                            this.phiDelta = 0,
                            this.scale = 1,
                            this.panVector.set(0, 0, 0),
                        this.lastPosition.distanceTo(this.object.position) > 0 && this.lastPosition.copy(this.object.position)
                    },
                    n.prototype.zoomToContain = function (t) {
                        this.absoluteScale = t / 2 / i.orthoBase * 1.2,
                            this.currentScale = this.absoluteScale
                    },
                    n.prototype.getAutoRotationAngle = function () {
                        return 2 * Math.PI / 60 / 60 * this.autoRotateSpeed
                    },
                    n.prototype.getZoomScale = function () {
                        return Math.pow(0.95, this.zoomSpeed)
                    },
                    n.prototype.onMouseDown = function (t) {
                        if (this.enabled !== !1) if (t.preventDefault(), this.mouseDown = !0, 2 === t.button) {
                            if (this.noRotate === !0) return;
                            this.emit('move'),
                                this.state = l.ROTATE,
                                this.rotateStart.set(t.clientX, this.noRotateUpDown ? 0 : t.clientY),
                                this.rotationSpeed.set(0, 0)
                        } else if (1 === t.button) {
                            if (this.noZoom === !0) return;
                            this.emit('move'),
                                this.state = l.DOLLY,
                                this.dollyStart.set(t.clientX, t.clientY)
                        } else if (0 === t.button) {
                            if (this.noPan === !0) return;
                            this.emit('move'),
                                this.state = l.PAN,
                                this.panStart.set(t.clientX, t.clientY)
                        }
                    },
                    n.prototype.onMouseMove = function (t) {
                        if (this.enabled !== !1 && this.mouseDown && 0 !== t.buttons) {
                            t.preventDefault();
                            var e = this.domElement === document ? this.domElement.body : this.domElement;
                            if (this.state === l.ROTATE) {
                                if (this.noRotate === !0) return;
                                this.rotateEnd.set(t.clientX, this.noRotateUpDown ? 0 : t.clientY),
                                    this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart),
                                    this.rotateLeft(2 * Math.PI * this.rotateDelta.x / e.clientWidth * this.rotateSpeed),
                                    this.rotateUp(2 * Math.PI * this.rotateDelta.y / e.clientHeight * this.rotateSpeed),
                                    this.rotateStart.copy(this.rotateEnd)
                            } else if (this.state === l.DOLLY) {
                                if (this.noZoom === !0) return;
                                this.dollyEnd.set(t.clientX, t.clientY),
                                    this.dollyDelta.subVectors(this.dollyEnd, this.dollyStart),
                                    this.dollyDelta.y > 0 ? this.dollyIn()  : this.dollyOut(),
                                    this.dollyStart.copy(this.dollyEnd)
                            } else if (this.state === l.PAN) {
                                if (this.noPan === !0) return;
                                this.panEnd.set(t.clientX, t.clientY),
                                    this.panDelta.subVectors(this.panEnd, this.panStart),
                                    this.pan(this.panDelta.x, this.panDelta.y),
                                    this.panStart.copy(this.panEnd)
                            }
                            this.lastMoveTime = t.timeStamp,
                                this.update()
                        }
                    },
                    n.prototype.onMouseUp = function (t) {
                        this.enabled !== !1 && (this.mouseDown = !1, this.state = l.NONE, t.timeStamp > this.lastMoveTime + 100 ? (this.rotationSpeed.set(0, 0), this.rotationAcceleration.set(0, 0))  : this.rotationAcceleration.set( - this.rotateDelta.x, this.rotateDelta.y), this.update(), this.rotationAcceleration.set(0, 0), this.rotateDelta.set(0, 0))
                    },
                    n.prototype.onMouseWheel = function (t) {
                        if (this.enabled !== !1 && this.noZoom !== !0) {
                            this.emit('move'),
                            $('#debug-console').is(':visible') || t.preventDefault();
                            var e = 0;
                            void 0 !== t.wheelDelta ? e = t.wheelDelta : void 0 !== t.detail && (e = - t.detail),
                                e > 0 ? this.dollyOut()  : this.dollyIn(),
                                this.update(),
                                this.player.path.haltWarp()
                        }
                    },
                    n.prototype.onKeyDown = function (t) {
                        this.enabled !== !1 && this.noKeys !== !0 && this.noPan !== !0 && (t.metaKey || t.ctrlKey || (t.preventDefault(), this.handleKeyDown(t.which)))
                    },
                    n.prototype.handleKeyDown = function (t) {
                        switch (t) {
                            case 73:
                            case this.keys.UP:
                                this.player.path.haltWarp(),
                                    this.noRotateUpDown ? this.keyboardZoomSpeed = 1 : this.rotationAcceleration.y = 1,
                                    this.emit('move');
                                break;
                            case 75:
                            case this.keys.BOTTOM:
                                this.player.path.haltWarp(),
                                    this.noRotateUpDown ? this.keyboardZoomSpeed = - 1 : this.rotationAcceleration.y = - 1,
                                    this.emit('move');
                                break;
                            case 74:
                            case this.keys.LEFT:
                                this.player.path.haltWarp(),
                                    this.rotationAcceleration.x = - 1,
                                    this.emit('move');
                                break;
                            case 76:
                            case this.keys.RIGHT:
                                this.player.path.haltWarp(),
                                    this.rotationAcceleration.x = 1,
                                    this.emit('move');
                                break;
                            case 87:
                                this.player.path.haltWarp(),
                                    this.emit('move'),
                                    this.panAcceleration.y = 1;
                                break;
                            case 83:
                                this.player.path.haltWarp(),
                                    this.emit('move'),
                                    this.panAcceleration.y = - 1;
                                break;
                            case 65:
                                this.player.path.haltWarp(),
                                    this.emit('move'),
                                    this.panAcceleration.x = - 1;
                                break;
                            case 68:
                                this.player.path.haltWarp(),
                                    this.emit('move'),
                                    this.panAcceleration.x = 1
                        }
                    },
                    n.prototype.onKeyUp = function (t) {
                        this.enabled !== !1 && this.noKeys !== !0 && this.noPan !== !0 && (t.preventDefault(), t.stopPropagation(), this.handleKeyUp(t.which))
                    },
                    n.prototype.handleKeyUp = function (t) {
                        switch (t) {
                            case 73:
                            case 75:
                            case this.keys.UP:
                            case this.keys.BOTTOM:
                                this.keyboardZoomSpeed = 0,
                                    this.rotationAcceleration.y = 0;
                                break;
                            case 74:
                            case 76:
                            case this.keys.LEFT:
                            case this.keys.RIGHT:
                                this.rotationAcceleration.x = 0;
                                break;
                            case 83:
                            case 87:
                                this.panAcceleration.y = 0;
                                break;
                            case 65:
                            case 68:
                                this.panAcceleration.x = 0
                        }
                    },
                    n.prototype.touchstart = function (t) {
                        if (this.enabled !== !1) {
                            switch (t.preventDefault(), t.stopPropagation(), this.player.path.haltWarp(), t.touches.length) {
                                case 1:
                                    this.emit('touch-one-finger-start', t);
                                    break;
                                case 2:
                                    this.emit('touch-two-finger-start', t);
                                    break;
                                default:
                                    this.state = l.NONE
                            }
                            this.rotationSpeed.set(0, 0)
                        }
                    },
                    n.prototype.touchmove = function (t) {
                        if (this.enabled !== !1) {
                            switch (t.preventDefault(), t.stopPropagation(), t.touches.length) {
                                case 1:
                                    this.emit('touch-one-finger-move', t),
                                        this.update();
                                    break;
                                case 2:
                                    this.emit('touch-two-finger-move', t),
                                        this.update();
                                    break;
                                default:
                                    this.state = l.NONE
                            }
                            this.lastMoveTime = t.timeStamp
                        }
                    },
                    n.prototype.touchend = function (t) {
                        this.enabled !== !1 && (this.emit('touch-one-finger-end', t), this.emit('touch-two-finger-end', t), this.state = l.NONE, t.timeStamp > this.lastMoveTime + 100 ? (this.rotationSpeed.set(0, 0), this.rotationAcceleration.set(0, 0))  : this.rotationAcceleration.set( - this.rotateDelta.x, this.rotateDelta.y), this.update(), this.rotationAcceleration.set(0, 0), this.rotateDelta.set(0, 0))
                    },
                    n.prototype.pointerdown = function (t) {
                        this.enabled !== !1 && 'touch' === t.pointerType && (this.pointers.length < this.pointersLimit && this.pointers.push({
                            id: t.pointerId,
                            pageX: t.pageX,
                            pageY: t.pageY
                        }), t.touches = this.pointers, this.touchstart(t))
                    },
                    n.prototype.pointermove = function (t) {
                        this.enabled !== !1 && 'touch' === t.pointerType && (this.pointers.forEach(function (e) {
                            t.pointerId === e.id && (e.pageX = t.pageX, e.pageY = t.pageY)
                        }), t.touches = this.pointers, this.touchmove(t))
                    },
                    n.prototype.pointerup = function (t) {
                        this.enabled !== !1 && 'touch' === t.pointerType && (this.pointers.forEach(function (e, o) {
                            t.pointerId === e.id && this.pointers.splice(o, 1)
                        }.bind(this)), t.touches = this.pointers, this.touchend(t))
                    },
                    n.prototype.reset = function () {
                        this.state = l.NONE,
                            this.target.copy(this.target0),
                            this.object.position.copy(this.position0),
                            this.pointers = [
                            ],
                            this.update()
                    },
                    n.prototype.stop = function () {
                        this.rotationSpeed.set(0, 0),
                            this.rotationAcceleration.set(0, 0),
                            this.panSpeed.set(0, 0),
                            this.panAcceleration.set(0, 0)
                    },
                    n.touch = {
                        rotate: {
                            start: function (t) {
                                this.emit('move'),
                                    this.state = l.TOUCH_ROTATE,
                                    this.rotateStart.set(t.touches[0].pageX, t.touches[0].pageY)
                            },
                            move: function (t) {
                                if (this.state === l.TOUCH_ROTATE) {
                                    this.emit('move');
                                    var e = this.domElement === document ? this.domElement.body : this.domElement;
                                    this.rotateEnd.set(t.touches[0].pageX, t.touches[0].pageY),
                                        this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart),
                                        this.rotateLeft(2 * Math.PI * this.rotateDelta.x / e.clientWidth * this.rotateSpeed),
                                        this.rotateUp(2 * Math.PI * this.rotateDelta.y / e.clientHeight * this.rotateSpeed),
                                        this.rotateStart.copy(this.rotateEnd)
                                }
                            }
                        },
                        zoom: {
                            start: function (t) {
                                this.emit('move'),
                                    this.state = l.TOUCH_DOLLY_PAN;
                                var e = t.touches[0].pageX - t.touches[1].pageX,
                                    o = t.touches[0].pageY - t.touches[1].pageY,
                                    n = Math.sqrt(e * e + o * o);
                                this.dollyStart.set(0, n)
                            },
                            move: function (t) {
                                if (this.state === l.TOUCH_DOLLY_PAN) {
                                    var e = t.touches[0].pageX - t.touches[1].pageX,
                                        o = t.touches[0].pageY - t.touches[1].pageY,
                                        n = Math.sqrt(e * e + o * o);
                                    this.dollyEnd.set(0, n),
                                        this.dollyDelta.subVectors(this.dollyEnd, this.dollyStart),
                                        this.dollyDelta.y > 0 ? this.dollyOut(1 - this.dollyDelta.y / 500)  : this.dollyIn(1 + this.dollyDelta.y / 500),
                                        this.dollyStart.copy(this.dollyEnd)
                                }
                            }
                        },
                        pan: {
                            start: function (t) {
                                this.emit('move'),
                                    this.state = l.TOUCH_DOLLY_PAN,
                                    this.panStart.set(r.average(t.touches, 'pageX'), r.average(t.touches, 'pageY'))
                            },
                            move: function (t) {
                                this.state === l.TOUCH_DOLLY_PAN && (this.panEnd.set(r.average(t.touches, 'pageX'), r.average(t.touches, 'pageY')), this.panDelta.subVectors(this.panEnd, this.panStart), this.pan(this.panDelta.x, this.panDelta.y), this.panStart.copy(this.panEnd), this.rotateDelta.set(0, 0))
                            }
                        }
                    },
                    e.exports = n
            },
            {
                '../settings': 38,
                '../util/common': 45,
                events: 56
            }
        ],
        8: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t, e, o, n) {
                        this.player = t,
                            this.scene = n,
                            this.object = e,
                            this.object.controls = this,
                            this.target = new THREE.Vector3(0, 0, 0),
                            this.aimFrom = this.object.position,
                            this.lookVector = new THREE.Vector3,
                            this.domElement = void 0 !== o ? o : document.documentElement,
                            this.lookSpeed = 0.05,
                            this.rotationAcc = new THREE.Vector2,
                            this.rotationSpeed = new THREE.Vector2,
                            this.lat = 0,
                            this.lon = 0,
                            this.phi = 0,
                            this.theta = 0,
                            this.enabled = !0,
                            this.pointer = new THREE.Vector3(0, 0, - 1),
                            this.rotationHistory = [
                            ],
                            this.rotationDifference = new THREE.Vector2,
                            this.pointerDragOn = !1,
                            this.pointerDragStart = new THREE.Vector3(0, 0, - 1),
                            this.pinchDistance = 0,
                            this.pointersLimit = 2,
                            this.pointers = [
                            ],
                        this.domElement !== document && this.domElement.setAttribute('tabindex', - 1)
                    }
                    {
                        var i = t('../util/logger'),
                            r = t('../settings'),
                            a = t('../util/common'),
                            s = t('events').EventEmitter;
                        new i(o)
                    }
                    n.prototype = Object.create(s.prototype),
                        n.prototype.bindEvents = function () {
                            this.domElement.addEventListener('mousemove', this.onMouseMove.bind(this)),
                                this.domElement.addEventListener('mousedown', this.onMouseDown.bind(this)),
                                this.domElement.addEventListener('mouseup', this.onMouseUp.bind(this)),
                                this.domElement.addEventListener('mouseover', function (t) {
                                    !this.pointerDragOn || 0 !== t.which && 0 !== t.buttons || this.onMouseUp(t)
                                }.bind(this)),
                                this.domElement.addEventListener('touchstart', this.onTouchStart.bind(this)),
                                this.domElement.addEventListener('touchmove', this.onTouchMove.bind(this)),
                                this.domElement.addEventListener('touchend', this.onTouchEnd.bind(this)),
                                this.domElement.addEventListener('mousewheel', this.onMouseWheel.bind(this)),
                                this.domElement.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this)),
                                this.domElement.addEventListener('contextmenu', function (t) {
                                    t.preventDefault()
                                }),
                                this.domElement.addEventListener('pointerdown', this.onPointerDown.bind(this)),
                                this.domElement.addEventListener('pointerup', this.onPointerUp.bind(this)),
                                this.domElement.addEventListener('pointerout', this.onPointerUp.bind(this)),
                                this.domElement.addEventListener('pointercancel', this.onPointerUp.bind(this)),
                                this.domElement.addEventListener('pointermove', this.onPointerMove.bind(this)),
                                document.addEventListener('keydown', this.onKeyDown.bind(this)),
                                document.addEventListener('keyup', this.onKeyUp.bind(this))
                        },
                        n.prototype.lookAt = function (t) {
                            var e = this.object.position.clone().sub(t),
                                o = Math.atan(e.z / e.x);
                            o += e.x < 0 ? Math.PI : 0,
                                o += e.x > 0 && e.z < 0 ? 2 * Math.PI : 0,
                                this.lon = THREE.Math.radToDeg(o) + 180;
                            var n = Math.sqrt(e.x * e.x + e.z * e.z),
                                i = Math.atan(e.y / n);
                            this.lat = - THREE.Math.radToDeg(i)
                        },
                        n.prototype.startRotationFrom = function (t, e) {
                            this.domElement !== document && this.domElement.focus(),
                                this.updatePointer(t, e),
                                this.pointerDragOn = !0,
                                this.pointerDragStart.copy(this.pointer),
                                this.pointerDragStartIntersect = this.player.getMouseIntersect(this.pointer.clone(), [
                                    this.scene.skybox
                                ]).point,
                                this.rotationHistory = [
                                ],
                                this.rotationSpeed.set(0, 0)
                        },
                        n.prototype.onTouchStart = function (t) {
                            if (this.enabled) switch (t.preventDefault(), t.stopPropagation(), this.emit('move'), this.player.path.haltWarp(), t.touches.length) {
                                case 1:
                                    this.startRotationFrom(t.touches[0].clientX, t.touches[0].clientY);
                                    break;
                                case 2:
                                    var e = (t.touches[0].clientX - t.touches[1].clientX) / window.innerWidth,
                                        o = (t.touches[0].clientY - t.touches[1].clientY) / window.innerHeight;
                                    this.pinchDistance = Math.sqrt(e * e + o * o)
                            }
                        },
                        n.prototype.onPointerDown = function (t) {
                            this.enabled && 'touch' === t.pointerType && (this.pointers.length < this.pointersLimit && this.pointers.push({
                                id: t.pointerId,
                                clientX: t.clientX,
                                clientY: t.clientY
                            }), t.touches = this.pointers, this.onTouchStart(t))
                        },
                        n.prototype.onMouseDown = function (t) {
                            if (this.enabled) switch (t.preventDefault(), t.stopPropagation(), this.emit('move'), t.button) {
                                case 0:
                                    this.startRotationFrom(t.clientX, t.clientY);
                                    break;
                                case 2:
                            }
                        },
                        n.prototype.updateRotation = function () {
                            if (this.enabled && this.pointerDragOn) {
                                var t = this.player.getMouseIntersect(this.pointerDragStart.clone(), [
                                        this.scene.skybox
                                    ]).point.sub(this.player.position),
                                    e = this.player.getMouseIntersect(this.pointer.clone(), [
                                        this.scene.skybox
                                    ]).point.sub(this.player.position),
                                    o = Math.sqrt(t.x * t.x + t.z * t.z),
                                    n = Math.sqrt(e.x * e.x + e.z * e.z),
                                    i = Math.atan2(t.y, o),
                                    r = Math.atan2(e.y, n);
                                this.rotationDifference.y = THREE.Math.radToDeg(i - r),
                                    t.y = 0,
                                    e.y = 0;
                                var a = Math.acos(t.dot(e) / t.length() / e.length());
                                isNaN(a) || (this.rotationDifference.x = THREE.Math.radToDeg(a), this.pointerDragStart.x < this.pointer.x && (this.rotationDifference.x *= - 1)),
                                    this.pointerDragStart.copy(this.pointer)
                            }
                        },
                        n.prototype.onMouseMove = function (t) {
                            this.updatePointer(t.clientX, t.clientY)
                        },
                        n.prototype.onTouchMove = function (t) {
                            if (this.enabled) switch (this.emit('move'), t.touches.length) {
                                case 1:
                                    this.updatePointer(t.touches[0].clientX, t.touches[0].clientY);
                                    break;
                                case 2:
                                    var e = (t.touches[0].clientX - t.touches[1].clientX) / window.innerWidth,
                                        o = (t.touches[0].clientY - t.touches[1].clientY) / window.innerHeight,
                                        n = this.pinchDistance - Math.sqrt(e * e + o * o);
                                    Math.abs(n) > 0.1 && (this.emit('interaction.direct'), this.flyDirection(new THREE.Vector3(0, 0, n).normalize()), this.pinchDistance -= n)
                            }
                        },
                        n.prototype.onPointerMove = function (t) {
                            this.enabled && 'touch' === t.pointerType && (this.pointers.forEach(function (e) {
                                t.pointerId === e.id && (e.clientX = t.clientX, e.clientY = t.clientY)
                            }), t.touches = this.pointers, this.onTouchMove(t))
                        },
                        n.prototype.updatePointer = function (t, e) {
                            this.pointer.x = t / window.innerWidth * 2 - 1,
                                this.pointer.y = 2 * - (e / window.innerHeight) + 1
                        },
                        n.prototype.endRotation = function () {
                            if (this.pointerDragOn = !1, !this.player.flying) {
                                var t = a.averageVectors(this.rotationHistory);
                                this.rotationSpeed.set(t.x * r.rotationAfterMoveMultiplier, t.y * r.rotationAfterMoveMultiplier)
                            }
                        },
                        n.prototype.onTouchEnd = function (t) {
                            this.enabled && (t.preventDefault(), t.stopPropagation(), this.endRotation())
                        },
                        n.prototype.onMouseUp = function (t) {
                            this.enabled && (t.preventDefault(), t.stopPropagation(), this.endRotation())
                        },
                        n.prototype.onPointerUp = function (t) {
                            this.enabled && 'touch' === t.pointerType && (this.pointers.forEach(function (e, o) {
                                t.pointerId === e.id && this.pointers.splice(o, 1)
                            }.bind(this)), t.touches = this.pointers, this.onTouchEnd(t))
                        },
                        n.prototype.update = function (t, e) {
                            if (this.enabled || e) {
                                {
                                    this.lon,
                                        this.lat
                                }
                                for (this.updateRotation(), this.rotationHistory.push(this.rotationDifference.clone()); this.rotationHistory.length > r.rotationAfterMoveHistoryCount; ) this.rotationHistory.shift();
                                this.lon += this.rotationDifference.x,
                                    this.lat += this.rotationDifference.y,
                                    this.rotationDifference.set(0, 0),
                                    this.rotationSpeed.x = this.rotationSpeed.x * (1 - r.rotationFriction) + this.rotationAcc.x * r.rotationAccelerationInside,
                                    this.rotationSpeed.y = this.rotationSpeed.y * (1 - r.rotationFriction) + this.rotationAcc.y * r.rotationAccelerationInside,
                                    this.lon += this.rotationSpeed.x * t,
                                    this.lat += this.rotationSpeed.y * t,
                                    this.lat = Math.max(r.insideLookLimitDown, Math.min(r.insideLookLimitUp, this.lat)),
                                    this.phi = THREE.Math.degToRad(90 - this.lat),
                                    this.theta = THREE.Math.degToRad(this.lon),
                                    this.lookVector.x = Math.sin(this.phi) * Math.cos(this.theta),
                                    this.lookVector.y = Math.cos(this.phi),
                                    this.lookVector.z = Math.sin(this.phi) * Math.sin(this.theta),
                                    this.target.copy(this.lookVector).add(this.aimFrom),
                                    this.object.lookAt(this.target)
                            }
                        },
                        n.prototype.onMouseWheel = function (t) {
                            if (this.enabled) {
                                this.emit('move'),
                                $('#debug-console').is(':visible') || t.preventDefault();
                                var e = 0;
                                void 0 !== t.wheelDelta ? e = t.wheelDelta : void 0 !== t.detail && (e = - t.detail),
                                    this.emit('interaction.direct'),
                                    this.flyDirection(new THREE.Vector3(0, 0, - e).normalize())
                            }
                        },
                        n.prototype.onKeyDown = function (t) {
                            this.enabled && (t.metaKey || t.ctrlKey || (t.preventDefault(), this.handleKeyDown(t.which)))
                        },
                        n.prototype.handleKeyDown = function (t) {
                            switch (this.emit('interaction.key'), t) {
                                case 38:
                                case 87:
                                    this.player.path.haltWarp(),
                                        this.flyDirection(new THREE.Vector3(0, 0, - 1)),
                                        this.emit('move');
                                    break;
                                case 40:
                                case 83:
                                    this.player.path.haltWarp(),
                                        this.flyDirection(new THREE.Vector3(0, 0, 1)),
                                        this.emit('move');
                                    break;
                                case 65:
                                    this.player.path.haltWarp(),
                                        this.flyDirection(new THREE.Vector3( - 1, 0, 0)),
                                        this.emit('move');
                                    break;
                                case 68:
                                    this.player.path.haltWarp(),
                                        this.flyDirection(new THREE.Vector3(1, 0, 0)),
                                        this.emit('move');
                                    break;
                                case 37:
                                case 74:
                                    this.player.path.haltWarp(),
                                        this.rotationAcc.x = - 1,
                                        this.emit('move');
                                    break;
                                case 39:
                                case 76:
                                    this.player.path.haltWarp(),
                                        this.rotationAcc.x = 1,
                                        this.emit('move');
                                    break;
                                case 73:
                                    this.player.path.haltWarp(),
                                        this.rotationAcc.y = 1,
                                        this.emit('move');
                                    break;
                                case 75:
                                    this.player.path.haltWarp(),
                                        this.rotationAcc.y = - 1,
                                        this.emit('move')
                            }
                        },
                        n.prototype.onKeyUp = function (t) {
                            this.enabled && (t.preventDefault(), t.stopPropagation(), this.handleKeyUp(t.which))
                        },
                        n.prototype.handleKeyUp = function (t) {
                            switch (t) {
                                case 37:
                                case 74:
                                    this.rotationAcc.x = 0;
                                    break;
                                case 39:
                                case 76:
                                    this.rotationAcc.x = 0;
                                    break;
                                case 73:
                                    this.rotationAcc.y = 0;
                                    break;
                                case 75:
                                    this.rotationAcc.y = 0
                            }
                        },
                        n.prototype.reset = function () {
                            this.stop()
                        },
                        n.prototype.stop = function () {
                            this.pointerDragOn = !1,
                                this.rotationAcc.set(0, 0),
                                this.rotationSpeed.set(0, 0),
                                this.pointers = [
                                ]
                        },
                        n.prototype.flyDirection = function (t) {
                            if (!this.player.flying) {
                                var e = this.player.getDirection(t),
                                    o = 1 === t.z ? 0.4 : 0.75,
                                    n = 1 === Math.abs(t.x);
                                this.player.path.haltWarp(),
                                    this.player.flyDirection(e, o, n)
                            }
                        },
                        e.exports = n
                }).call(this, '/js/controls/PanoramaControls.js')
            },
            {
                '../settings': 38,
                '../util/common': 45,
                '../util/logger': 48,
                events: 56
            }
        ],
        9: [
            function (t, e, o) {
                'use strict';
                var n = t('./enum/Viewmode'),
                    i = (t('./settings'), t('./util/transitions')),
                    r = new THREE.ShaderPass(THREE.HorizontalBlurShader),
                    a = new THREE.ShaderPass(THREE.VerticalBlurShader);
                a.renderToScreen = !0;
                var s = window.innerWidth / window.innerHeight;
                isNaN(s) && (s = 1);
                var l = {
                    currentBlur: 0,
                    aspect: s,
                    blurStrength: 1,
                    init: function (t, e) {
                        t.addPass(r),
                            t.addPass(a),
                            e.on('mode.changed', function (t, e) {
                                t === n.PANORAMA && (i.cancel(l.blur), i.cancel(l.addBlur), i.start(l.removeBlur, 500))
                            })
                    },
                    blur: function (t) {
                        l.currentBlur = t;
                        var e = t * l.blurStrength;
                        a.uniforms.v.value = e / 512 * l.aspect,
                            r.uniforms.h.value = e / 512
                    },
                    addBlur: function (t) {
                        t = Math.max(t, l.currentBlur),
                            l.blur(t)
                    },
                    removeBlur: function (t) {
                        t = Math.min(1 - t, l.currentBlur),
                            l.blur(t)
                    }
                };
                l.blur(0),
                    e.exports = l
            },
            {
                './enum/Viewmode': 11,
                './settings': 38,
                './util/transitions': 51
            }
        ],
        10: [
            function (t, e, o) {
                'use strict';
                e.exports = {
                    newBlue: new THREE.Color(4967932),
                    altBlue: new THREE.Color(47355),
                    classicBlue: new THREE.Color(53759),
                    mpYellow: new THREE.Color(16502016),
                    mpOrange: new THREE.Color(16428055),
                    mpBlue: new THREE.Color(12096),
                    mpLtGrey: new THREE.Color(13751252),
                    mpDkGrey: new THREE.Color(10000019),
                    mpRed: new THREE.Color(12525854),
                    mpOrangeDesat: new THREE.Color(16764529),
                    mpBlueDesat: new THREE.Color(4034734),
                    mpRedDesat: new THREE.Color(14705505),
                    white: new THREE.Color(16777215),
                    black: new THREE.Color(0),
                    _desat: function (t, e) {
                        var o = e || 0.3,
                            n = (new THREE.Color).copy(t).getHSL();
                        return (new THREE.Color).setHSL(n.h, n.s * (1 - o), n.l)
                    },
                    _darken: function (t, e) {
                        var o = e || 0.2,
                            n = (new THREE.Color).copy(t).getHSL();
                        return (new THREE.Color).setHSL(n.h, n.s, n.l * (1 - o))
                    }
                }
            },
            {
            }
        ],
        11: [
            function (t, e, o) {
                'use strict';
                e.exports = {
                    PANORAMA: 'panorama',
                    DOLLHOUSE: 'dollhouse',
                    FLOORPLAN: 'floorplan',
                    TRANSITIONING: 'transitioning',
                    toInt: function (t) {
                        switch (t) {
                            case this.PANORAMA:
                                return 1;
                            case this.DOLLHOUSE:
                                return 2;
                            case this.FLOORPLAN:
                                return 3;
                            case this.TRANSITIONING:
                                return - 1
                        }
                        throw new Error('Unknown mode: ' + t)
                    },
                    fromInt: function (t) {
                        switch (t) {
                            case '1':
                            case 1:
                                return this.PANORAMA;
                            case '2':
                            case 2:
                                return this.DOLLHOUSE;
                            case '3':
                            case 3:
                                return this.FLOORPLAN
                        }
                        throw new Error('Unknown mode: ' + t)
                    },
                    convertWorkshopModeInt: function (t) {
                        switch (t) {
                            case '0':
                            case 0:
                                return this.PANORAMA;
                            case '1':
                            case 1:
                                return this.FLOORPLAN;
                            case '2':
                            case 2:
                                return this.DOLLHOUSE
                        }
                    }
                }
            },
            {
            }
        ],
        12: [
            function (t, e, o) {
                'use strict';
                e.exports = {
                    BLACK: 'black',
                    STD: 'std'
                }
            },
            {
            }
        ],
        13: [
            function (t, e, o) {
                'use strict';
                var n = {
                    settings: {
                        minimum: 1,
                        initLoadAmt: 10,
                        trickle: !0,
                        trickleRate: 8,
                        trickleSpeed: 200
                    },
                    status: 0,
                    configure: function (t) {
                        return $.extend(Settings, t),
                            this
                    },
                    set: function (t) {
                        var e = t,
                            o = $('#bar');
                        if (isNaN(e)) return !1;
                        var n = o.attr('r'),
                            i = 2 * Math.PI * n;
                        0 > e && (e = 0),
                        e > 100 && (e = 100);
                        var r = (100 - e) / 100 * i;
                        r > 295.3 && (r = 295.3),
                        0 > r && (r = 0),
                            o.css({
                                strokeDashoffset: r
                            }),
                            $('#cont').attr('data-pct', e),
                            this.status = t
                    },
                    isStarted: function () {
                        return 'number' == typeof this.status
                    },
                    start: function () {
                        this.status || this.set(this.settings.initLoadAmt);
                        var t = this;
                        this.settings.trickle && (this.work = setInterval(function () {
                            if (null !== t.status) {
                                var e = Math.max(Math.random() * t.settings.trickleRate, t.settings.minimum);
                                t.inc(e)
                            }
                        }, 800))
                    },
                    inc: function (t) {
                        var e = this.status;
                        this.set(Math.floor(e + t))
                    },
                    trickle: function () {
                        return this.inc(Math.random() * this.settings.trickleRate)
                    },
                    done: function (t) {
                        return t || this.status ? (this.settings.trickle = !1, this.status = null, clearInterval(this.work), this.set(100))  : this
                    }
                };
                e.exports.circleLoader = n
            },
            {
            }
        ],
        14: [
            function (t, e, o) {
                'use strict';
                function n(t, e) {
                    function o() {
                        v.linkToLocation = window.location.protocol + '//' + window.location.host + window.location.pathname + '?m=' + t.sid + '&start=' + e.serialize()
                    }
                    var n = new dat.GUI,
                        h = n.addFolder('Flydown from Dollhouse');
                    h.add(l.flydown, 'movementEasing', Object.keys(i)),
                        h.add(l.flydown, 'movementDelay', 0, 1).step(0.01),
                        h.add(l.flydown, 'rotationEasing', Object.keys(i)),
                        h.add(l.flydown, 'rotationDelay', 0, 1).step(0.01),
                        h.add(l.flydown, 'modelTextureDelay', 0, 1).step(0.01),
                        h.add(l.flydown, 'skyboxDelay', 0, 1).step(0.01);
                    var c = n.addFolder('Transition between panos');
                    c.add(l.transition, 'blur', 0, 10).onFinishChange(function () {
                    }),
                        c.add(l.transition, 'flySpeed', 0, 10).step(0.01).onFinishChange(function () {
                            l.transition.flyTime = 0,
                                c.__controllers.forEach(function (t) {
                                    t.updateDisplay()
                                })
                        }),
                        c.add(l.transition, 'flyTime', 0, 5000).onFinishChange(function () {
                            l.transition.flySpeed = 0,
                                c.__controllers.forEach(function (t) {
                                    t.updateDisplay()
                                })
                        }),
                        c.add(l.transition, 'movementEasing', Object.keys(i));
                    var u = n.addFolder('Path Display');
                    u.add(l.path, 'opacity', 0, 1).step(0.01).onFinishChange(function () {
                    }),
                        u.add(l.path, 'height', 0, 0.2).step(0.01).onFinishChange(function () {
                        }),
                        u.add(l.path, 'outsideHeight', 0, 2).step(0.01).onFinishChange(function () {
                        }),
                        u.add(l.path, 'ribbonWidth', 0.01, 0.35).step(0.01).onFinishChange(function () {
                        }),
                        u.add(l.path, 'waypointRadius', 0.01, 1.2).step(0.01).onFinishChange(function () {
                        }),
                        u.add(l.path, 'waypointPulse', 0, 3600).step(20).onFinishChange(function () {
                        }),
                        u.add(l.path, 'waypointIndoorRadius', 0.01, 1.2).step(0.01).onFinishChange(function () {
                        }),
                        u.add(l.path, 'fadeInTime', 0, 1200).step(10).onFinishChange(function () {
                        }),
                        u.add(l.path, 'fadeOutTime', 0, 1200).step(10).onFinishChange(function () {
                        }),
                        u.add(l.path, 'color', Object.keys(a)).onFinishChange(function () {
                            l.path.color = a[l.path.color],
                                l.path.colorUp = a.desat(l.path.color),
                                l.path.colorDown = a.darken(l.path.color)
                        }),
                        u.add(l, 'reticuleColor', Object.keys(a)).onFinishChange(function () {
                            l.reticuleColor = a[l.reticuleColor],
                                e.reticule.material.uniforms.color.value.set(l.reticuleColor)
                        });
                    var p = n.addFolder('Warp/Teleport');
                    p.add(l.warp, 'softPushDist', 0, 2).onFinishChange(function () {
                    }),
                        p.add(l.warp, 'softPushEnd', 0, 1).step(0.01).onFinishChange(function () {
                        }),
                        p.add(l.warp, 'softBendAngle', 0, 45).onFinishChange(function () {
                        }),
                        p.add(l.warp, 'softBendTilt', 0, 45).onFinishChange(function () {
                        }),
                        p.add(l.warp, 'softBendEnd', 0, 1).step(0.01).onFinishChange(function () {
                        }),
                        p.add(l.warp, 'burnsAngle', 0, 30).onFinishChange(function () {
                        }),
                        p.add(l.path, 'mapGuides').onFinishChange(function () {
                        }),
                        p.add(l.warp, 'teleportTime', 0, 5000).step(10).onFinishChange(function () {
                        }),
                        p.add(l.warp, 'outsideTime', 0, 5000).step(10).onFinishChange(function () {
                        }),
                        p.add(l.path, 'typ', Object.keys(s)).onFinishChange(function () {
                            l.path.typ = s[l.path.typ]
                        }),
                        p.add(l.warp, 'tourStepDelay', 0, 10000).step(100).onFinishChange(function () {
                        });
                    var d = n.addFolder('Long Warp Only');
                    d.add(l.warp, 'minWarpTime', 0, 5000).step(10).onFinishChange(function () {
                        l.warp.flySpeed = 0,
                            d.__controllers.forEach(function (t) {
                                t.updateDisplay()
                            })
                    }),
                        d.add(l.warp, 'moveDelay', 0, 5000).step(10).onFinishChange(function () {
                        }),
                        d.add(l.warp, 'timePerMeter', 0, 5000).step(10).onFinishChange(function () {
                        }),
                        d.add(l.warp, 'lookAheadDist', 0.01, 4).step(0.01).onFinishChange(function () {
                        }),
                        d.add(l.warp, 'maxTurnPerSec', 0, 180).step(1).onFinishChange(function () {
                        }),
                        d.add(l.warp, 'turnFriction', 0, 1).step(0.01).onFinishChange(function () {
                        });
                    var m = n.addFolder('Warp Esoterica');
                    m.add(l.warp, 'nearPanoDist', 0.01, 12).step(0).onFinishChange(function () {
                    }),
                        m.add(l.warp, 'blur', 0.01, 1).onFinishChange(function () {
                        }),
                        m.add(l.warp, 'flySpeed', 0, 10).step(0.01).onFinishChange(function () {
                            l.warp.minWarpTime = 0,
                                m.__controllers.forEach(function (t) {
                                    t.updateDisplay()
                                })
                        }),
                        m.add(l.warp, 'showBunny').onFinishChange(function () {
                        }),
                        m.add(l.warp, 'fastTime', 0, 2500).step(10).onFinishChange(function () {
                        }),
                        m.add(l.warp, 'movementEasing', Object.keys(i));
                    var f = n.addFolder('Misc');
                    f.add(l, 'dollhouseFOV', 10, 180).onChange(function () {
                        e.controls[r.DOLLHOUSE].object.fov = l.dollhouseFOV
                    }),
                        f.add(l, 'insideFOV', 10, 180).onChange(function () {
                            e.controls[r.PANORAMA].object.fov = l.insideFOV
                        }),
                        f.add(l, 'insideLookSpeed', 0.01, 0.3).step(0.01).onChange(function () {
                        }),
                        f.add(l, 'rotationAccelerationInside', 0.1, 10).step(0.1).onChange(function () {
                        }),
                        f.add(l, 'rotationAccelerationOutside', 0.1, 10).step(0.1).onChange(function () {
                        });
                    var g = n.addFolder('Navigation');
                    g.add(l.navigation, 'panoScores').onFinishChange(function () {
                        l.navigation.panoScores || t.panos.forEach(function (t) {
                            t.floor.remove(t.text3d),
                                t.text3d = null
                        })
                    }),
                        g.add(l.navigation, 'mouseDirection'),
                        g.add(l.navigation, 'filterStrictness', 0, 1),
                        g.add(l.navigation, 'angleFactor', - 60, 0),
                        g.add(l.navigation, 'directionFactor', 1, 20),
                        g.add(l.navigation, 'distanceFactor', - 5, 5);
                    var y = n.addFolder('Debug');
                    y.add(l, 'wireframe').onFinishChange(function () {
                        t.chunks.forEach(function (e) {
                            e.material && (e.wireframeTwin || (e.wireframeTwin = new THREE.WireframeHelper(e), e.wireframeTwin.material.depthWrite = !1, e.wireframeTwin.material.depthTest = !1, e.wireframeTwin.material.opacity = 0.5, e.wireframeTwin.material.transparent = !0), l.wireframe ? t.add(e.wireframeTwin)  : t.remove(e.wireframeTwin))
                        })
                    }),
                        y.add(l, 'skyboxWireframe').onFinishChange(function () {
                            l.skyboxWireframe ? (t.skybox.wireframe = new THREE.WireframeHelper(t.skybox), t.skybox.add(t.skybox.wireframe))  : (t.skybox.remove(t.skybox.wireframe), t.skybox.wireframe = null)
                        }),
                        y.add(l, 'showSweeps').onFinishChange(function () {
                            t.panos.forEach(function (t) {
                                t.marker.visible = l.showSweeps
                            })
                        }),
                        y.add(l, 'showMesh').onFinishChange(function () {
                            t.chunks.forEach(function (t) {
                                t.visible = l.showMesh
                            })
                        }),
                        y.add(l, 'showFloors').onFinishChange(function () {
                            t.floorList.forEach(function (t) {
                                t.collider.children.forEach(function (t) {
                                    t.visible = l.showFloors
                                })
                            })
                        }),
                        y.add(l, 'showSkyboxes').onFinishChange(function () {
                            t.panos.forEach(function (t) {
                                t.mesh.visible = l.showSkyboxes
                            })
                        }),
                        y.add(l, 'showNeighbors').onChange(function () {
                        }),
                        y.add(l, 'modelAlpha', 0, 1).listen().onChange(function () {
                            t.changeModelAlpha(l.modelAlpha)
                        }),
                        setInterval(o, 500);
                    var v = {
                    };
                    o(),
                        n.add(v, 'linkToLocation').listen()
                }
                var i = t('../util/easing'),
                    r = t('../enum/Viewmode'),
                    a = t('../enum/Colors'),
                    s = t('../enum/WarpStyle'),
                    l = t('../settings');
                e.exports.toggle = n
            },
            {
                '../enum/Colors': 10,
                '../enum/Viewmode': 11,
                '../enum/WarpStyle': 12,
                '../settings': 38,
                '../util/easing': 46
            }
        ],
        15: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t, e, o, n) {
                        $('.gui-error .error-problem-text').text(t),
                            $('.gui-error .error-solution-text').text(e),
                            $('.gui-error .error-explanation').text(o),
                            $('.gui-error .error-actions').html(n),
                            $(window).resize(),
                            $('.gui-error').fadeIn(),
                            $('#bottom-logo').fadeIn()
                    }
                    function i(t) {
                        var e = [
                            '<div class="browser-tiles">',
                            '<div class="tile">',
                            '<a href="https://www.google.com/chrome/browser/" target="_blank">',
                            '<img class="icon" src="images/icon_Google_Chrome_2011.png" ',
                            'rel="tiletip" title="Chrome"></a>',
                            '</div>',
                            '<div class="tile">',
                            '<a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">',
                            '<img class="icon" src="images/icon_Mozilla_Firefox.png" ',
                            'rel="tiletip" title="Firefox"></a>',
                            '</div>',
                            '<div class="tile">',
                            '<a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie" target="_blank">',
                            '<img class="icon" src="images/icon_Internet_Explorer_10.png" ',
                            'rel="tiletip" title="Internet Explorer"></a>',
                            '</div>',
                            '<div class="tile">',
                            '<a href="https://support.apple.com/en-us/HT204416" target="_blank">',
                            '<img class="icon" src="images/icon_MacOSX_Safari.png" ',
                            'rel="tiletip" title="Safari"></a>',
                            '</div>',
                            '</div>'
                        ].join('');
                        n(t, 'Install a new browser to explore in 3D.', 'WebGL requires a modern browser.', e),
                        s.isMobile() || $('[rel=tiletip]').tooltip({
                            placement: 'bottom',
                            delay: {
                                show: 50,
                                hide: 0
                            },
                            trigger: 'hover',
                            viewport: {
                                selector: 'body',
                                padding: 10
                            }
                        })
                    }
                    function r() {
                        var t = s.isMobile() ? '' : '<span class="link install-browser">install a supported browser</span> or ',
                            e = [
                                'If the problem persists, ',
                                t,
                                '<a class="link" target="_blank" href=',
                                p,
                                '>see our troubleshooting guide</a>.'
                            ].join('');
                        n('Oops, something went wrong.', 'Restart your browser.', '', e),
                        s.isMobile() || $('.install-browser').on('click touchstart', function (t) {
                            t.preventDefault(),
                                t.stopPropagation(),
                                i(' ')
                        })
                    }
                    function a(t) {
                        if ($('head title').text(h.pageTitle), $('#gui-message, #gui-loading, #nprogress, #gui-thumb, #bottom-logo').hide(), $('#gui-loading').fadeOut(250), l.track('USER', {
                                event_type: 'showcase_error',
                                error_key: t
                            }), 'webgl-unsupported' === t) s.isMobile() ? r()  : i('Browser not supported.');
                        else if ('webgl-ios' === t) n('iOS version not supported.', 'Upgrade to iOS 8 or higher to explore in 3D.', '', 'Tap <strong>Settings > General > Software Update</strong>.');
                        else if ('webgl-safari' === t) n('Enable WebGL to explore in 3D.', '', '', 'Click <strong>Preferences > Advanced > Show Develop menu</strong>. Then click <strong>Develop > Enable WebGL</strong>.');
                        else if ('webgl-generic' === t) r();
                        else if ('missing-urls' === t) n('Oops, there are no panoramas for this model.', '', 'This is an older model. The website owner may have a new model on the way.');
                        else if ('loading-failed' === t) n('Oops, model not available.', '', '', 'If the problem persists, <a class="link" target="_blank" href=' + p + '>see our troubleshooting guide</a>.');
                        else {
                            if ('loading-failed-maintenance' !== t) return void u.error('Unhandled error: ' + t);
                            n('Maintenance in progress.', 'Please come back in a few minutes.')
                        }
                    }
                    var s = t('./../util/browser'),
                        l = t('./../analytics'),
                        h = t('./../settings'),
                        c = t('./../util/logger'),
                        u = new c(o),
                        p = '"https://matterportsupport.zendesk.com/hc/en-us/articles/208220058-Showcase-System-Requirements"';
                    e.exports.error = a
                }).call(this, '/js/gui/error.js')
            },
            {
                './../analytics': 1,
                './../settings': 38,
                './../util/browser': 44,
                './../util/logger': 48
            }
        ],
        16: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n() {
                        lt = [
                        ],
                        ht.upMode.visible && lt.push('#gui-modes-map'),
                        ht.floors.visible && lt.push('.gui-floor', '.gui-floor-title'),
                            lt.push('.hideTarget', '.pinTop.right')
                    }
                    function i() {
                        for (var t in ht) if (ht.hasOwnProperty(t)) {
                            var e = ht[t];
                            if (!e.visible) for (var o = 0; o < e.elements.length; o++) $(e.elements[o]).hide()
                        }
                        ht.highlight.visible && (K.addHighlightReelHelp(), $('.pinBottom').addClass('highlightExists')),
                            ht.tourControls.visible === !1 ? $('#drawer').addClass('fullWidth')  : K.addPlayHelp(),
                        ht.upMode.visible === !0 && K.addDollhouseHelp(),
                        ht.coBrand.visible || $('#gui-name').addClass('noCoBrand'),
                        ht.titleContainer.visible || $('.pinTop.right').addClass('reposition'),
                            n()
                    }
                    function r(t) {
                        c(),
                            $('.pinBottom').toggleClass('open'),
                            $('#drawer').toggleClass('open'),
                            $('#pullTab').find('span').toggle(),
                        t || l('highlights')
                    }
                    function a() {
                        $(window).height() < 400 && $('#drawer').hasClass('open') && r(!0)
                    }
                    function s() {
                        $(window).height() < 400 && $('#meta-info').is(':visible') && g(!0)
                    }
                    function l(t) {
                        function e() {
                            c.is(':visible') && (c.slideUp(250), $('#more-hint').toggle(), $('#less-hint').toggle())
                        }
                        function o() {
                            u.is(':visible') && u.fadeOut()
                        }
                        function n() {
                            p.is(':visible') && K.closeHelp()
                        }
                        function i() {
                            d.hasClass('open') && r(!0)
                        }
                        function l() {
                            m.is(':visible') && m.fadeOut()
                        }
                        function h() {
                            f.hasClass('open') && f.removeClass('open')
                        }
                        {
                            var c = $('#meta-info'),
                                u = $('#terms-modal'),
                                p = $('.nav-help-dialog'),
                                d = $('#drawer'),
                                m = $('#share-modal'),
                                f = $('.gui-floor');
                            $('#gui-modes-map')
                        }
                        switch (t) {
                            case 'info':
                                o(),
                                    n(),
                                    a(),
                                    l(),
                                    h();
                                break;
                            case 'terms':
                                e(),
                                    n(),
                                    i(),
                                    l(),
                                    h();
                                break;
                            case 'help':
                                e(),
                                    o(),
                                    i(),
                                    l(),
                                    h();
                                break;
                            case 'highlights':
                                s(),
                                    o(),
                                    l(),
                                    h();
                                break;
                            case 'share':
                                o(),
                                    h();
                                break;
                            case 'floor':
                                o(),
                                    l();
                                break;
                            case 'view':
                                h(),
                                    l(),
                                    o();
                                break;
                            case 'tour':
                                o(),
                                    l(),
                                    h();
                                break;
                            case 'move':
                                o(),
                                    l(),
                                    h(),
                                W.path.tourPlaying && w();
                                break;
                            case 'resize':
                                e(),
                                    a(),
                                    l(),
                                    h()
                        }
                    }
                    function h(t) {
                        'touchstart' === t.type && t.preventDefault(),
                            t.stopPropagation()
                    }
                    function c() {
                        V && (V.reload(), V.init())
                    }
                    function u(t) {
                        $('#gui-loading').fadeIn(500, function () {
                            t(),
                                $(this).css('display', 'table')
                        }),
                            i(),
                            $('body').addClass('player-active'),
                            J.start()
                    }
                    function p(t, o) {
                        if (F = t, W = o, e.exports.player = W, J.done(), $('#gui-loading, #gui-thumb').fadeOut(2500), F.panos.length || $('#gui-modes-inside').remove(), F.floorList.length <= 1 || !ht.floors.visible ? ht.floors.visible = !1 : (A(F), F.on('floor.changed', P)), i(), $('#gui').fadeIn(1500), ht.highlight.visible && setTimeout(function () {
                                r(),
                                    setTimeout(r, 2000)
                            }, 2000), 'PANORAMA' !== W.mode && D(t, W.mode), !G.isMobile()) for (var n = [
                            'a',
                            '#title-toggle',
                            '.next-button',
                            '.prev-button',
                            '.gui-floor',
                            '.meta-toggle',
                            '.thumbImg'
                        ], a = 0; a < n.length; a++) $(n[a]).addClass('hasHover')
                    }
                    function d() {
                        $('#gui-spinner').stop(!0, !0).show()
                    }
                    function m() {
                        $('#gui-spinner').fadeOut(1000)
                    }
                    function f(t) {
                        h(t),
                            G.requestFullscreen($('body') [0]),
                            z.track('USER', {
                                event_type: 'showcase_gui',
                                gui_action: 'click_enter_fullscreen',
                                interaction_source: 'gui'
                            }),
                            V.reload()
                    }
                    function g(t) {
                        var e = $('#meta-info');
                        'block' == e.css('display') ? z.trackAlways('USER', {
                            event_type: 'about_collapse'
                        })  : 'none' == $('#meta-info').css('display') && (z.trackAlways('USER', {
                            event_type: 'about_expand'
                        }), l('info')),
                            $('.pinTop.right').toggleClass('hideUnderMeta'),
                            e.slideToggle(nt),
                            $('#more-hint').toggle(),
                            $('#less-hint').toggle(),
                        t || a()
                    }
                    function y() {
                        tt.debug('play the tour!'),
                            R(),
                            $('#play').hide(),
                            $('#pause').show(),
                            $('.pinBottom').addClass('playing'),
                            $('#drawer').addClass('playing'),
                            $('#playHead').addClass('playing'),
                            W.path.pendingHalt = !1,
                            W.path.tourPlaying = !0,
                            at + 1 == rt ? V.activate(0)  : b(),
                            W.emit('tour_auto', ot),
                            z.trackAlways('USER', {
                                event_type: 'play_highlights'
                            })
                    }
                    function v(t) {
                        tt.debug('--> waiting on ' + t + ' of ' + rt),
                            W.path.waitNextStep(b)
                    }
                    function b() {
                        W.path.tourPlaying && (W.flying || W.mode === Y.TRANSITIONING ? it || (it = !0, tt.debug('rechecking tourStep...'), setTimeout(b, 1500))  : (it = !1, V.next()))
                    }
                    function w() {
                        tt.debug('end the Tour!'),
                            T(),
                            $('#pause').hide(),
                            $('#play').show(),
                            $('.pinBottom').removeClass('playing'),
                            $('#drawer').removeClass('playing'),
                            $('#playHead').removeClass('playing'),
                        W.path.playing && z.trackAlways('USER', {
                            event_type: 'pause_highlights'
                        }),
                            W.path.haltWarp(!0),
                            W.path.tourPlaying = !1
                    }
                    function E() {
                        tt.debug('animation Complete!'),
                            tt.debug(at + ' of ' + rt),
                            at + 1 == rt ? (tt.debug('Tour Complete'), w())  : v(at),
                            z.trackAlways('USER', {
                                event_type: 'reach_highlight',
                                reach_source: 'play'
                            })
                    }
                    function R() {
                        for (var t = $(lt[0]), e = 1; e < lt.length; e++) t = t.add(lt[e]);
                        t.addClass('hidden'),
                            $('#more-menu').removeClass('open'),
                        $('#terms-modal').is(':visible') && $('#terms-modal').fadeOut(),
                        $('.nav-help-dialog').is(':visible') && $('.nav-help-dialog').fadeOut(),
                        $('#share-modal').is(':visible') && $('#share-modal').fadeOut()
                    }
                    function T() {
                        for (var t = $(lt[0]), e = 1; e < lt.length; e++) t = t.add(lt[e]);
                        t.removeClass('hidden')
                    }
                    function x() {
                        return W.flying || W.mode === Y.TRANSITIONING || W.path.tourPlaying ? !0 : !1
                    }
                    function M(t) {
                        if (ht.share.visible) {
                            var e = 580,
                                o = 420,
                                n = 'http://www.facebook.com/sharer.php?u=' + window.location + '&t=' + encodeURIComponent(t.data.name.toString()),
                                i = 'http://twitter.com/share?text=' + encodeURIComponent(t.data.name.toString()) + '&url=' + window.location + '&related=matterport';
                            $('.faceBookLink').on('mousedown touchstart', function (t) {
                                h(t);
                                var i = window.screenY + (window.innerHeight - o) / 2,
                                    r = window.screenX + (window.innerWidth - e) / 2,
                                    a = 'top=' + i + ',left=' + r + ',width=' + e + ',height=' + o;
                                window.open(n, 'fbshare', a)
                            }),
                                $('.twitterLink').on('mousedown touchstart', function (t) {
                                    h(t);
                                    var n = window.screenY + (window.innerHeight - o) / 2,
                                        r = window.screenX + (window.innerWidth - e) / 2,
                                        a = 'top=' + n + ',left=' + r + ',width=' + e + ',height=' + o;
                                    window.open(i, 'twitshare', a)
                                }),
                                $('#shareUrl').val(window.location),
                                $('.shareTextLink').on('mousedown touchstart', function (t) {
                                    h(t),
                                        $('#share-modal').fadeIn(400)
                                }),
                                $('#share-close').on('mousedown touchstart', function (t) {
                                    h(t),
                                        $('#share-modal').fadeOut()
                                }),
                                $('.socialButton').find('a').on('mousedown touchstart', function (t) {
                                    h(t),
                                        $('.socialButton').toggleClass('active'),
                                        $('.bottomShare').toggle()
                                })
                        }
                    }
                    function A(t) {
                        st = t.floorNames();
                        for (var e = $('.gui-floor'), o = 0; o < st.length; o++) {
                            var n = $('<div class="floorChoice" data-index="' + o + '"></div>').text(st[o]);
                            $('.gui-floor').find('.container').prepend(n)
                        }
                        e.find('.container').prepend('<div class="floorChoice darkGlass allFloorBtn" data-index="all" style="display:none">All</div>'),
                            e.on('mousedown touchstart', function (t) {
                                h(t),
                                    l('floor'),
                                    e.toggleClass('open')
                            }),
                            $('.floorChoice').on('mousedown touchstart', function (o) {
                                h(o);
                                var n = $(this).data('index');
                                'all' !== n ? (W.controls[Y.PANORAMA].emit('interaction.gui'), W.gotoFloor(n), z.track('USER', {
                                    event_type: 'showcase_gui',
                                    gui_action: 'click_floor_select_button',
                                    interaction_source: 'gui'
                                }))  : (W.controls[Y.PANORAMA].emit('interaction.gui'), t.toggleAllFloors(), P(t.currentFloor), z.track('USER', {
                                    event_type: 'showcase_gui',
                                    gui_action: 'click_toggle_all_floors_button',
                                    interaction_source: 'gui'
                                })),
                                    e.toggleClass('open')
                            })
                    }
                    function P(t, e) {
                        t && void 0 !== t && (e = e || W.mode, e === Y.DOLLHOUSE || e === Y.FLOORPLAN ? $('.allFloorBtn').show()  : $('.allFloorBtn').hide(), t.model.allFloorsVisible ? ($('.gui-floor-title').text('All'), $('.floorChoice').removeClass('active'), $('.floorChoice[data-index="all"]').addClass('active'))  : ($('.gui-floor-title').text(st[t.floorIndex]), $('.floorChoice').removeClass('active'), $('.floorChoice[data-index=' + t.floorIndex + ']').addClass('active')))
                    }
                    function C(t) {
                        $('<img/>').attr('src', t).on('load', function () {
                            F || ($('#gui-thumb').css('backgroundImage', 'url(' + t + ')').fadeIn(500), $('#gui-loading').addClass('use-background')),
                                $(this).remove()
                        })
                    }
                    function I(t) {
                        rt = t.heroLocations.length;
                        var e = '<li class="thumbImg" data-index=""><img src=""></li>',
                            o = 100 / rt + '%';
                        $('#status').find('.totalSteps').text(rt);
                        for (var n = 0; rt > n; n++) {
                            var i = $(e);
                            if (i.attr('data-index', n), i.find('img').attr('src', t.heroLocations[n].thumb), t.heroLocations[n].name) {
                                var r = $('<div class="overlay"></div>').text(t.heroLocations[n].name);
                                i.prepend(r)
                            }
                            $('#thumb-container').append(i),
                                $('#progressBar').append('<div class="step" data-idx="' + n + '" style="width:' + o + '"></div>')
                        }
                        _ = 144 * rt,
                            N = 111 * rt,
                            $('.thumbImg').on('mouseover', function () {
                                x() || (W.path.selectWarpLocation($(this).data('index')), W.path.brushToWarpPano())
                            }),
                            $('.thumbImg').on('mouseout', function () {
                                x() || W.path.discardPath()
                            });
                        var a;
                        $('.thumbImg').on('click', function (t) {
                            if (h(t), !x()) {
                                a = 'thumb',
                                    W.emit('tour_manual', 'thumb'),
                                W.path.tourPlaying && w();
                                var e = $(this);
                                e.hasClass('active') ? s(e.data('index'))  : (U.path.thumbTrans && (W.path.transType = U.path.thumbTrans), V.activate(e))
                            }
                        }),
                            $('.previous').find('a').on('mousedown touchstart', function (t) {
                                h(t),
                                W.path.tourPlaying && w(),
                                x() || (a = 'prev', W.emit('tour_manual', 'prev'), 1 > at ? (W.path.transType = Q.BLACK, V.activate(rt - 1))  : V.prev())
                            }),
                            $('.next').find('a').on('mousedown touchstart', function (t) {
                                h(t),
                                W.path.tourPlaying && w(),
                                x() || (a = 'next', W.emit('tour_manual', 'next'), at + 1 == rt ? V.activate(0)  : V.next())
                            }),
                            $('#drawer').on('mouseleave', function (t) {
                                h(t);
                                var e = new MouseEvent('mouseup', {
                                    clientX: t.clientX,
                                    clientY: t.clientY,
                                    screenX: t.screenX,
                                    screenY: t.screenY
                                });
                                document.dispatchEvent(e)
                            });
                        var s = function (t) {
                            var e = null;
                            W.path.tourPlaying && (e = E),
                                W.path.transType = 0 === t ? Q.BLACK : null;
                            var o = W.path.selectWarpLocation(t);
                            o ? (W.path.brushToWarpPano(), W.path.warpToPano(function () {
                                e ? e()  : z.trackAlways('USER', {
                                    event_type: 'reach_highlight',
                                    reach_source: a
                                })
                            }))  : console.warn('you made a selection but didn\'t move!')
                        };
                        V = new Sly($('#scrollFrame'), {
                            horizontal: !0,
                            itemNav: 'centered',
                            smart: !0,
                            scrollTrap: !0,
                            scrollBy: 1,
                            mouseDragging: !0,
                            touchDragging: !0,
                            speed: 300,
                            dragHandle: !0,
                            dynamicHandle: !0,
                            clickBar: !0,
                            scrollBar: $('#scroller'),
                            activateOn: null
                        }).init(),
                            V.on('active', function (t, e) {
                                at = e,
                                    l('tour'),
                                    s(e),
                                    $('.step').removeClass('active'),
                                    $('#status').find('.curIdx').text(e + 1);
                                for (var o = 0; e >= o; o++) $('#progressBar').find('[data-idx=\'' + o + '\']').addClass('active')
                            }),
                            H()
                    }
                    function H() {
                        var t;
                        t = 'undefined' != typeof window.innerWidth ? window.innerWidth : 'undefined' != typeof document.documentElement && 'undefined' != typeof document.documentElement.clientWidth && 0 != document.documentElement.clientWidth ? document.documentElement.clientWidth : document.getElementsByTagName('body') [0].clientWidth;
                        var e = t - 20,
                            o = $('#scroller'),
                            n = $('#scrollFrame');
                        488 > t ? e >= N ? (o.addClass('hidden'), n.addClass('noScroll'))  : (o.removeClass('hidden'), n.removeClass('noScroll'))  : e >= _ ? (o.addClass('hidden'), n.addClass('noScroll'))  : (o.removeClass('hidden'), n.removeClass('noScroll'))
                    }
                    function k(t) {
                        if (t.hasOwnProperty('player_options') && t.player_options) {
                            var e = t.player_options,
                                o = function (t) {
                                    ht[t].visible = !1
                                };
                            e.address || o('address'),
                            e.contact_email || o('email'),
                            e.contact_name || o('contactName'),
                            e.contact_phone || o('phone'),
                            e.model_name || o('titleContainer'),
                            e.model_summary || o('description'),
                            e.presented_by || o('coBrand'),
                            e.dollhouse && e.floor_plan || o('upMode'),
                            e.highlight_reel || o('highlight'),
                            e.external_url || o('url'),
                            e.tour_buttons || o('tourControls')
                        }
                        U.brand || (ht.coBrand.visible = !1, ht.contact.visible = !1)
                    }
                    function S(t) {
                        $('.model-title').text(t.name);
                        var e = $('.titleText');
                        if (e.text(t.name), t.name.length > 19 && e.attr('title', t.name), $('head title').text(t.name + ' - ' + U.pageTitle), G.isMobile() ? $('#gui-fullscreen').css('display', 'none')  : $('[rel=tooltip]').tooltip({
                                delay: {
                                    show: 50,
                                    hide: 0
                                },
                                trigger: 'hover',
                                html: !1,
                                viewport: {
                                    selector: 'body',
                                    padding: 10
                                }
                            }), ht.coBrand.visible && t.hasOwnProperty('presented_by') && t.presented_by ? ($('#cobrandTitle').text(t.presented_by), $('#loaderCoBrandName').text(t.presented_by))  : ht.coBrand.visible = !1, ht.description.visible && t.hasOwnProperty('summary') && t.summary ? $('#meta-description').text(t.summary)  : ht.description.visible = !1, ht.contact.visible) {
                            var o = [
                                ],
                                n = !0,
                                i = function (t, e) {
                                    var e = e || '<br>';
                                    n && (e = '', n = !1),
                                        o.push(e, t)
                                };
                            if (ht.contactName.visible && t.hasOwnProperty('contact_name') && t.contact_name && ($('#contact-data').append('<span id="contactName"></span>').text(t.contact_name), n = !1), ht.phone.visible && t.hasOwnProperty('contact_phone') && t.contact_phone) {
                                var r = t.contact_phone;
                                t.formatted_contact_phone && (r = t.formatted_contact_phone),
                                    i(G.isMobile() ? '<a id="phone" href="callto:' + t.contact_phone + '">' + r + '</a>' : '<span>' + r + '</span>')
                            }
                            ht.email.visible && t.hasOwnProperty('contact_email') && t.contact_email && i('<a id="email" href="mailTo:' + t.contact_email + '">' + t.contact_email + '</a>'),
                            ht.url.visible && t.hasOwnProperty('external_url') && t.external_url && i('<a id="url" target="blank" href="' + t.external_url + '">' + t.external_url + '</a>'),
                                n ? ht.contact.visible = !1 : $('#contact-data').append(o.join(''))
                        }
                        if (ht.address.visible && t.hasOwnProperty('address') && t.address) {
                            var a = [
                                ],
                                s = JSON.parse(t.address),
                                l = !1,
                                c = !0,
                                u = function (t, e) {
                                    var e = e || ' ';
                                    c && (e = '', c = !1),
                                        a.push(e, t)
                                };
                            if (s.address_1 && u(s.address_1), s.address_2 && u(s.address_2), s.city && u(s.city, ', '), s.state && (l = !0, u(s.state, ', ')), s.zip) {
                                var p = ', ';
                                l && (p = ' '),
                                    u(s.zip, p)
                            }
                            c ? ht.address.visible = !1 : $('#addressTxt').text(a.join(''))
                        } else ht.address.visible = !1;
                        ht.address.visible || ht.contact.visible || ht.description.visible ? ($('.meta-toggle').on('mousedown touchstart', function (t) {
                            h(t),
                                g()
                        }), $('#meta-description').find('a').on('mousedown touchstart', function (t) {
                            z.trackAlways('USER', {
                                event_type: 'about_link'
                            })
                        }), $('.contact-info a').on('mousedown touchstart', function (t) {
                            var e = {
                                event_type: 'about_link'
                            };
                            switch ($(this).attr('id')) {
                                case 'phone':
                                    e.contact_type = 'phone';
                                    break;
                                case 'email':
                                    e.contact_type = 'email'
                            }
                            z.trackAlways('USER', e)
                        }), $('.address a').on('mousedown touchstart', function (t) {
                            z.trackAlways('USER', {
                                event_type: 'map_link'
                            })
                        })) : ($('.title-container').removeClass('meta-toggle'), ht.metaInfo.visible = !1)
                    }
                    function O(t, e) {
                        k(t.data),
                            S(t.data),
                        t.data.image && C(t.data.image),
                            U.autoplay ? (z.impression(!0), u(e), L())  : ($('#gui-message').fadeIn(250, function () {
                                $(this).css('display', 'table');
                                var t = $('#gui-message').fracs().visible >= 0.5;
                                z.impression(t)
                            }), $('#button-play').on('mousedown touchstart', function (t) {
                                return h(t),
                                    G.inIframe() && G.isMobile() ? void (top.location.href = self.location.href)  : ($('#gui-message').fadeOut(500, function () {
                                        u(e)
                                    }), void L())
                            }))
                    }
                    function B(t, e) {
                        t.data.hasOwnProperty('player_options') && t.data.player_options && t.data.player_options.fast_transitions === !1 && (ot = Q.STD),
                            q.init(t),
                            M(t),
                            t.heroLocations.length > 1 ? I(t)  : (ht.highlight.visible = !1, ht.tourControls.visible = !1),
                            t.on('floor.changed', P),
                            t.on('waiting', d),
                            t.on('waiting-done', m),
                            e.on('mode.changed', function (e, o) {
                                D(t, o)
                            }),
                            e.on('mode.changing', function (t, e) {
                                $('.nav-help-dialog').is(':visible') && K.navHelpModeChange(t, e)
                            }),
                            e.controls[Y.PANORAMA].on('move', function () {
                                l('move')
                            }),
                            e.controls[Y.DOLLHOUSE].on('move', function () {
                                l('move')
                            }),
                            e.controls[Y.FLOORPLAN].on('move', function () {
                                l('move')
                            }),
                            document.addEventListener('keydown', function (o) {
                                switch (o.which) {
                                    case 48:
                                        U.debug && (U.modelAlpha = U.modelAlpha < 1 ? 1 : 0, t.changeModelAlpha(U.modelAlpha));
                                        break;
                                    case 49:
                                        e.isInMode(Y.PANORAMA, Y.TRANSITIONING) || (e.controls[Y.PANORAMA].emit('interaction.key'), e.insideMode());
                                        break;
                                    case 50:
                                        e.activeMapModes() && !e.isInMode(Y.DOLLHOUSE, Y.TRANSITIONING) && (e.controls[Y.PANORAMA].emit('interaction.key'), e.flyToNewMode(Y.DOLLHOUSE), P(t.currentFloor));
                                        break;
                                    case 51:
                                        e.activeMapModes() && !e.isInMode(Y.FLOORPLAN, Y.TRANSITIONING) && (e.controls[Y.PANORAMA].emit('interaction.key'), e.flyToNewMode(Y.FLOORPLAN));
                                        break;
                                    case 32:
                                        U.debug && t.toggleExplode();
                                        break;
                                    case 13:
                                        U.debug && t.toggleExplodeUp()
                                }
                                return e && e.reticule.hide(),
                                    !0
                            }.bind(this))
                    }
                    function D(t, e) {
                        P(t.currentFloor, e);
                        var o = function () {
                            $('#view-controllers').is(':visible') || $('#view-controllers').slideDown(nt)
                        };
                        e === Y.DOLLHOUSE ? (m(), $('#gui-modes-dollhouse').toggleClass('active', e === Y.DOLLHOUSE), $('#gui-modes-floorplan').toggleClass('active', e === Y.FLOORPLAN), et = 'DOLLHOUSE', o(), $('#gui-modes-map').addClass('active'))  : e === Y.FLOORPLAN ? (m(), $('#gui-modes-dollhouse').toggleClass('active', e === Y.DOLLHOUSE), $('#gui-modes-floorplan').toggleClass('active', e === Y.FLOORPLAN), et = 'FLOORPLAN', o(), $('#gui-modes-map').addClass('active'))  : 'transitioning' !== e && ($('#view-controllers').slideUp(500), $('#gui-modes-map').removeClass('active', e === Y.PANORAMA))
                    }
                    function L() {
                        $('body').css('touch-action', 'none'),
                            $('#gui-parent').find('*').on('touchmove', function (t) {
                                t.preventDefault()
                            }),
                            $('#terms-text').off('touchmove').on('touchmove', function (t) {
                                t.stopPropagation()
                            })
                    }
                    var F,
                        W,
                        V,
                        _,
                        N,
                        Z,
                        j,
                        G = (t('./../util/common'), t('./../util/browser')),
                        U = t('./../settings'),
                        z = t('./../analytics'),
                        Y = (t('./../objects/Model'), t('./../enum/Viewmode')),
                        X = t('./../util/logger'),
                        Q = (t('./../util/lerp'), t('./../enum/WarpStyle')),
                        K = (t('./../util/easing'), t('./../util/transitions'), t('./help')),
                        J = t('./circleLoader').circleLoader,
                        q = t('./konami'),
                        tt = new X(o),
                        et = 'DOLLHOUSE',
                        ot = Q.BLACK,
                        nt = 250,
                        it = !1,
                        rt = 0,
                        at = 0,
                        st = [
                        ],
                        lt = [
                            '.hideTarget'
                        ],
                        ht = {
                            titleContainer: {
                                visible: !0,
                                elements: [
                                    '#model-title'
                                ]
                            },
                            coBrand: {
                                visible: !0,
                                elements: [
                                    '.co-brand',
                                    '#loaderCoBrand'
                                ]
                            },
                            metaInfo: {
                                visible: !0,
                                elements: [
                                    '#meta-info',
                                    '#more-hint',
                                    '#less-hint'
                                ]
                            },
                            description: {
                                visible: !0,
                                elements: [
                                    '#meta-description'
                                ]
                            },
                            contact: {
                                visible: !0,
                                elements: [
                                    '.contact-info'
                                ]
                            },
                            email: {
                                visible: !0,
                                elements: [
                                    '#email'
                                ]
                            },
                            address: {
                                visible: !0,
                                elements: [
                                    '.address'
                                ]
                            },
                            phone: {
                                visible: !0,
                                elements: [
                                    '#phone'
                                ]
                            },
                            contactName: {
                                visible: !0,
                                elements: [
                                    '#contactName'
                                ]
                            },
                            url: {
                                visible: !0,
                                elements: [
                                    '#url'
                                ]
                            },
                            help: {
                                visible: !0,
                                elements: [
                                    '.nav-help',
                                    '#nav-help'
                                ]
                            },
                            tourControls: {
                                visible: !0,
                                elements: [
                                    '.next',
                                    '.previous',
                                    '#play'
                                ]
                            },
                            upMode: {
                                visible: !0,
                                elements: [
                                    '#gui-modes-map'
                                ]
                            },
                            highlight: {
                                visible: !0,
                                elements: [
                                    '#drawer',
                                    '#pullTab'
                                ]
                            },
                            share: {
                                visible: !0,
                                elements: [
                                    '.socialButton',
                                    '#share'
                                ]
                            },
                            fullScreen: {
                                visible: !0,
                                elements: [
                                    '#gui-fullscreen'
                                ]
                            },
                            floors: {
                                visible: !0,
                                elements: [
                                    '.gui-floor'
                                ]
                            }
                        };
                    $(document).on('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange', function (t) {
                        $('#gui-fullscreen').toggle(!G.isFullscreen()),
                            $('#gui-fullscreen-exit').toggle(!!G.isFullscreen()),
                            setTimeout(function () {
                                $('.icon:visible').hide().show(0)
                            }, 100)
                    }),
                        G.detectIE() ? $('#gui-fullscreen').find('a').on('mouseup', f)  : $('#gui-fullscreen').find('a').on('mousedown touchstart', f),
                        $('#gui-fullscreen-exit').find('a').on('mousedown touchstart', function (t) {
                            h(t),
                                G.exitFullscreen(),
                                z.track('USER', {
                                    event_type: 'showcase_gui',
                                    gui_action: 'click_exit_fullscreen',
                                    interaction_source: 'gui'
                                })
                        }),
                        $(window).on('resize', function (t) {
                            var e = t.target.innerHeight,
                                o = t.target.innerWidth;
                            (e !== Z || o !== j) && (ht.highlight.visible && H(), l('resize'), $('.pinTop.right').removeClass('hideUnderMeta'), c(), Z = e, j = o)
                        }).resize(),
                    G.supportsFullscreen() || $('#gui-fullscreen').hide(),
                        $('#title-toggle').on('mousedown touchstart', function (t) {
                            function e() {
                                o && i.toggleClass('closed')
                            }
                            h(t);
                            var o,
                                n = $('.title-container'),
                                i = $('#model-title');
                            $('#title-toggle').find('i').toggleClass('icon-dpad-left icon-dpad-right'),
                                $('.pinTop.right').toggleClass('reposition'),
                                'none' === n.css('display') ? (z.trackAlways('USER', {
                                    event_type: 'about_show'
                                }), o = !1)  : (z.trackAlways('USER', {
                                    event_type: 'about_hide'
                                }), o = !0),
                            o || i.toggleClass('closed'),
                                $('#meta-info').is(':visible') ? (g(), $('.title-container').animate({
                                    opacity: 1
                                }, nt).animate({
                                    width: 'toggle'
                                }, {
                                    duration: nt,
                                    complete: e
                                }))  : $('.title-container').animate({
                                    width: 'toggle'
                                }, {
                                    duration: nt,
                                    complete: e
                                })
                        }),
                        $('#gui-modes-map').find('a').on('mousedown touchstart', function (t) {
                            if (h(t), !x()) {
                                var e = W.mode.toLowerCase();
                                'dollhouse' === e || 'floorplan' === e ? W.insideMode()  : (W.controls[Y.PANORAMA].emit('interaction.gui'), W.flyToNewMode(Y[et]), P(F.currentFloor))
                            }
                        }),
                        $('#gui-modes-floorplan').on('mousedown touchstart', function (t) {
                            h(t),
                            W.path.tourPlaying && w(),
                            x() || W.mode === Y.FLOORPLAN || (W.controls[Y.PANORAMA].emit('interaction.gui'), W.flyToNewMode(Y.FLOORPLAN))
                        }),
                        $('#gui-modes-dollhouse').on('mousedown touchstart', function (t) {
                            h(t),
                            W.path.tourPlaying && w(),
                            x() || W.mode === Y.DOLLHOUSE || (W.controls[Y.PANORAMA].emit('interaction.gui'), W.flyToNewMode(Y.DOLLHOUSE))
                        }),
                        $('#pullTab').on('mousedown touchstart', function (t) {
                            h(t),
                                $('#drawer').hasClass('open') ? z.trackAlways('USER', {
                                    event_type: 'hide_highlight_reel'
                                })  : z.trackAlways('USER', {
                                    event_type: 'show_highlight_reel'
                                }),
                                r()
                        }),
                        $('#more-menu-button').on('mousedown touchstart', function (t) {
                            h(t);
                            var e = $('#more-menu');
                            e.toggleClass('open')
                        }),
                        $('#play').find('a').on('mousedown touchstart', function (t) {
                            h(t),
                                l('tour'),
                            W.path.tourPlaying || y()
                        }),
                        $('#pause').find('a').on('mousedown touchstart', function (t) {
                            h(t),
                            W.path.tourPlaying && w()
                        }),
                        $('.shareContainer > div.icoContainer > a').on('mousedown touchstart', function (t) {
                            h(t),
                                l('share');
                            var e = {
                                event_type: 'share'
                            };
                            switch ($(this).attr('class')) {
                                case 'faceBookLink':
                                    e.value = 'facebook';
                                    break;
                                case 'twitterLink':
                                    e.value = 'twitter';
                                    break;
                                case 'shareTextLink':
                                    e.value = 'link';
                                    break;
                                default:
                                    return
                            }
                            z.trackAlways('USER', e)
                        }), $('.terms').on('mousedown touchstart', function (t) {
                        h(t),
                            l('terms'),
                            $.ajax('static/terms.html').done(function (t) {
                                $('#terms-text').html(t),
                                    z.track('USER', {
                                        event_type: 'showcase_gui',
                                        gui_action: 'click_terms_button',
                                        interaction_source: 'gui'
                                    })
                            }).fail(function () {
                                $('#terms-text').html('<h1>Terms of Use</h1><p>Could not fetch terms. Please make sure you have an internet connection to view the terms of use.')
                            }),
                            $('#terms-modal').fadeIn(nt)
                    }), $('#terms-modal .btn').on('mousedown touchstart', function (t) {
                        h(t),
                            $('#terms-modal').fadeOut(nt)
                    }), $('.icon').on('mouseover', function () {
                        W && W.reticule.hide()
                    }), e.exports.init = B, e.exports.startLoading = u, e.exports.coverScreen = O, e.exports.endLoading = p, e.exports.endTour = w, e.exports.paneControl = l
                }).call(this, '/js/gui/gui.js')
            },
            {
                './../analytics': 1,
                './../enum/Viewmode': 11,
                './../enum/WarpStyle': 12,
                './../objects/Model': 30,
                './../settings': 38,
                './../util/browser': 44,
                './../util/common': 45,
                './../util/easing': 46,
                './../util/lerp': 47,
                './../util/logger': 48,
                './../util/transitions': 51,
                './circleLoader': 13,
                './help': 17,
                './konami': 18
            }
        ],
        17: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t, e) {
                        var o = m.isMobile() ? E[t] : w[t];
                        if (o) {
                            var r = $('.nav-help-elements'),
                                a = r.find('.prev-button'),
                                s = r.find('.next-button'),
                                l = o.length / 2;
                            if (!(1 > e || e > l)) {
                                var h = o[2 * e - 1],
                                    c = '<img class="icon" src="images/' + h + '" title="navigation icon">';
                                r.find('.nav-icon').html(c);
                                var u = o[2 * e - 2];
                                r.find('.nav-text').text(u),
                                    r.find('.page-count').text(e + ' / ' + l),
                                    R = e,
                                    $('.nav-help-dialog .close').off().on('mouseup touchend', function (t) {
                                        t.preventDefault(),
                                            t.stopImmediatePropagation(),
                                            p.track('USER', {
                                                event_type: 'help_close'
                                            }),
                                            i()
                                    }),
                                    a.off(),
                                    1 === e ? a.hide()  : a.show().on('mouseup touchend', function (t) {
                                        t.preventDefault(),
                                            t.stopImmediatePropagation(),
                                            p.track('USER', {
                                                event_type: 'help_prev'
                                            }),
                                            n(f.player.mode, --e)
                                    }),
                                    s.off(),
                                    e === l ? $('.nav-help-elements .next-button').text('GOT IT').on('mouseup touchend', function (t) {
                                        t.preventDefault(),
                                            t.stopImmediatePropagation(),
                                            p.track('USER', {
                                                event_type: 'help_done'
                                            }),
                                            i()
                                    })  : s.text('NEXT').on('mouseup touchend', function (t) {
                                        t.preventDefault(),
                                            t.stopImmediatePropagation(),
                                            p.track('USER', {
                                                event_type: 'help_next'
                                            }),
                                            n(f.player.mode, ++e)
                                    }),
                                    $(window).resize(),
                                    $('.nav-help-dialog').fadeIn()
                            }
                        }
                    }
                    function i() {
                        var t = $('.nav-help-dialog');
                        t.fadeOut(1000),
                            R = 0
                    }
                    function r() {
                        var t;
                        try {
                            t = window.localStorage.getItem('visitCount') || '0',
                                t = (parseFloat(t) + 1).toString(),
                                window.localStorage.setItem('visitCount', t),
                                g.debug('visitCount = ' + t)
                        } catch (e) {
                            t = '1'
                        }(null === d.autohelp && '1' === t || '1' === d.autohelp) && setTimeout(function () {
                            p.track('USER', {
                                event_type: 'help_open',
                                event_source: 'auto'
                            }),
                                n(f.player.mode, 1)
                        }, 5000)
                    }
                    function a() {
                        v || (v = !0, w[u.PANORAMA].splice(4, 0, 'Click the play button to get a guided tour', 'Nav_Help_Play.png'), E[u.PANORAMA].splice(4, 0, 'Click the play button to get a guided tour', 'Nav_Help_Touch_Play.png'))
                    }
                    function s() {
                        y || (y = !0, w[u.PANORAMA].splice(4, 0, 'Click the highlights button to see  highlights of the space', 'Nav_Help_Highlights.png'), E[u.PANORAMA].splice(4, 0, 'Click the highlights button to see  highlights of the space', 'Nav_Help_Touch_Highlights.png'))
                    }
                    function l() {
                        b || (b = !0, w[u.PANORAMA].push('Click the dollhouse icon to see the whole space', 'Nav_Help_New_dollhouse.png'), E[u.PANORAMA].push('Tap the dollhouse icon to see the whole space', 'Nav_Help_Touch_Dollhouse.png'))
                    }
                    function h(t, e) {
                        if (t === u.PANORAMA && e === u.DOLLHOUSE) {
                            var o = m.isMobile() ? E[t] : w[t],
                                r = o ? o.length / 2 : 0;
                            if (R === r) return $('.nav-help-dialog .close').off().on('mousedown touchstart', function (t) {
                                t.preventDefault(),
                                    t.stopPropagation(),
                                    p.track('USER', {
                                        event_type: 'help_close'
                                    }),
                                    i(),
                                    setTimeout(function () {
                                        f.player.insideMode()
                                    }, 1000)
                            }),
                                $('.nav-help-elements .next-button').off().on('mousedown touchstart', function (t) {
                                    t.preventDefault(),
                                        t.stopPropagation(),
                                        p.track('USER', {
                                            event_type: 'help_done'
                                        }),
                                        i(),
                                        setTimeout(function () {
                                            f.player.insideMode()
                                        }, 1000)
                                }),
                                void $('.nav-help-elements .prev-button').off().on('mousedown touchstart', function (t) {
                                    t.preventDefault(),
                                        t.stopPropagation(),
                                        p.track('USER', {
                                            event_type: 'help_prev'
                                        }),
                                        T = !0,
                                        f.player.insideMode()
                                })
                        }
                        return t === u.DOLLHOUSE && e === u.PANORAMA && T ? (T = !1, void n(u.PANORAMA, R - 1))  : void (t !== e && (T = !1, i()))
                    }
                    var c = t('./../util/logger'),
                        u = t('./../enum/Viewmode'),
                        p = t('./../analytics'),
                        d = t('./../settings'),
                        m = t('./../util/browser'),
                        f = t('./gui'),
                        g = new c(o),
                        y = !1,
                        v = !1,
                        b = !1,
                        w = {
                        };
                    w[u.PANORAMA] = [
                        'Use the arrow keys to move',
                        'Nav_Help_Arrow_keys.png',
                        'Click & drag the mouse to move',
                        'Nav_Help_Left_Mouse.png'
                    ],
                        w[u.DOLLHOUSE] = [
                            'Use the arrow keys to explore the space',
                            'Nav_Help_Arrow_keys.png',
                            'Go to a room by clicking on it. Click and drag to pan.',
                            'Nav_Help_Left_Mouse.png'
                        ],
                        w[u.FLOORPLAN] = [
                            'Use the Left or Right key to rotate',
                            'Nav_Help_LeftRight_Keys.png',
                            'Use the Up or Down key to zoom',
                            'Nav_Help_UpDown_Keys.png',
                            'Click to explore',
                            'Nav_Help_Left_Mouse.png'
                        ];
                    var E = {
                    };
                    E[u.PANORAMA] = [
                        'Tap where you want to go',
                        'Nav_Help_Tap.png',
                        'Drag to move',
                        'Nav_Help_Drag_Turn.png'
                    ],
                        E[u.DOLLHOUSE] = [
                            'Click "View floor plan" below to see the whole space',
                            'Nav_Help_Tap.png',
                            'Drag to rotate',
                            'Nav_Help_Drag_Rotate.png'
                        ],
                        E[u.FLOORPLAN] = [
                            'Click "View dollhouse" below to see the whole space',
                            'Nav_Help_Tap.png',
                            'Drag to rotate',
                            'Nav_Help_Drag_Pan.png'
                        ];
                    var R = 0,
                        T = !1;
                    $('.nav-help').on('mouseup touchend', function (t) {
                        t.preventDefault(),
                            t.stopPropagation(),
                            $('#more-menu').removeClass('open'),
                            f.paneControl('help'),
                            p.track('USER', {
                                event_type: 'help_open',
                                event_source: 'user'
                            }),
                        $('.nav-help-dialog').is(':hidden') && n(f.player.mode, 1)
                    }),
                        e.exports.navHelpSessionStart = r,
                        e.exports.navHelpModeChange = h,
                        e.exports.addPlayHelp = a,
                        e.exports.addHighlightReelHelp = s,
                        e.exports.addDollhouseHelp = l,
                        e.exports.closeHelp = i
                }).call(this, '/js/gui/help.js')
            },
            {
                './../analytics': 1,
                './../enum/Viewmode': 11,
                './../settings': 38,
                './../util/browser': 44,
                './../util/logger': 48,
                './gui': 16
            }
        ],
        18: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t) {
                        i = t,
                            c.debug('konami has the modelInstance')
                    }
                    var i,
                        r = t('./../util/logger'),
                        a = t('./../settings'),
                        s = t('./debug'),
                        l = t('./../util/common'),
                        h = t('./gui'),
                        c = new r(o),
                        u = [
                        ];
                    $(window).on('keydown', function (t) {
                        u.push(t.which),
                        u.length > a.secretPanelWord.length && u.shift(),
                        l.equalLists(u, a.secretPanelWord) && (c.debug('Developer mode active.'), a.debug = !0)
                    }),
                        $(window).on('keydown', function p(t) {
                            a.debug && 72 == t.which && (i && h.player ? (s.toggle(i, h.player), $(window).off('keydown', p))  : console.warn('sorry we\'re not ready yet'))
                        }),
                    a.debug && a.console && $('body').append('<div id="debug-console"></div>'),
                        e.exports.init = n
                }).call(this, '/js/gui/konami.js')
            },
            {
                './../settings': 38,
                './../util/common': 45,
                './../util/logger': 48,
                './debug': 14,
                './gui': 16
            }
        ],
        19: [
            function (t, e, o) {
                (function (o, n) {
                    'use strict';
                    function i(t) {
                        this.urls = t;
                        var e = o('bWVzc2FnZSBiaW5hcnlfbWVzaCB7CglyZXBlYXRlZCBjaHVua19zaW1wbGUgY2h1bmsgPSAxOwoJcmVwZWF0ZWQgY2h1bmtfcXVhbnRpemVkIHF1YW50aXplZF9jaHVuayA9IDI7Cn0KCi8vIERlZmluaXRpb24gb2YgdmVydGljZXM6IDNEIGNvb3JkaW5hdGVzLCBhbmQgMkQgdGV4dHVyZSBjb29yZGluYXRlcy4KbWVzc2FnZSB2ZXJ0aWNlc19zaW1wbGUgewoJcmVwZWF0ZWQgZmxvYXQgeHl6ID0gMSBbcGFja2VkPXRydWVdOyAgLy8geF8wLHlfMCx6XzAsIHhfMSx5XzEsel8xLCAuLi4KCXJlcGVhdGVkIGZsb2F0IHV2ID0gMiBbcGFja2VkPXRydWVdOyAgLy8gdV8wLHZfMCwgdV8xLHZfMSwgLi4uCn0KCi8vIEluZGV4ZXMgb2YgdmVydGljZXMgb2YgZmFjZXMKbWVzc2FnZSBmYWNlc19zaW1wbGUgewoJcmVwZWF0ZWQgdWludDMyIGZhY2VzID0gMSBbcGFja2VkPXRydWVdOyAvLyBpMDAsaTAxLGkwMiwgaTEwLGkxMSxpMTIsIC4uLgp9CgovLyBBIHNpbXBseSBlbmNvZGVkIGNodW5rLgovLyBUT0RPOiBhZGQgY2h1bmsgcHJvcGVyaXRlcyAoc3VjaCBhcyAicmVmbGVjdGl2ZSIpCm1lc3NhZ2UgY2h1bmtfc2ltcGxlIHsKCW9wdGlvbmFsIHZlcnRpY2VzX3NpbXBsZSB2ZXJ0aWNlcyA9IDE7CglvcHRpb25hbCBmYWNlc19zaW1wbGUgZmFjZXMgPSAyOwoJb3B0aW9uYWwgc3RyaW5nIGNodW5rX25hbWUgPSAzOwoJb3B0aW9uYWwgc3RyaW5nIG1hdGVyaWFsX25hbWUgPSA0Owp9CgovLyBRdWFudGl6ZWQgdmVyc2lvbnMgZm9sbG93OgptZXNzYWdlIHZlcnRpY2VzX3F1YW50aXplZCB7CglvcHRpb25hbCBmbG9hdCBxdWFudGl6YXRpb24gPSAxOwoJcmVwZWF0ZWQgZmxvYXQgdHJhbnNsYXRpb24gPSAyOwoJcmVwZWF0ZWQgc2ludDMyIHggPSAzIFtwYWNrZWQ9dHJ1ZV07CglyZXBlYXRlZCBzaW50MzIgeSA9IDQgW3BhY2tlZD10cnVlXTsKCXJlcGVhdGVkIHNpbnQzMiB6ID0gNSBbcGFja2VkPXRydWVdOwp9CgptZXNzYWdlIHV2X3F1YW50aXplZCB7CglvcHRpb25hbCBzdHJpbmcgbmFtZSA9IDE7CglvcHRpb25hbCBmbG9hdCBxdWFudGl6YXRpb24gPSAyOwoJcmVwZWF0ZWQgc2ludDMyIHUgPSAzIFtwYWNrZWQ9dHJ1ZV07CglyZXBlYXRlZCBzaW50MzIgdiA9IDQgW3BhY2tlZD10cnVlXTsKfQoKLy8gSW5kZXhlcyBvZiB2ZXJ0aWNlcyBvZiBmYWNlcwptZXNzYWdlIGZhY2VzX2NvbXByZXNzZWQgewoJcmVwZWF0ZWQgc2ludDMyIGZhY2VzID0gMSBbcGFja2VkPXRydWVdOyAvLyBpMDAsaTAxLGkwMiwgaTEwLGkxMSxpMTIsIC4uLgp9CgptZXNzYWdlIGNodW5rX3F1YW50aXplZCB7CglvcHRpb25hbCBzdHJpbmcgY2h1bmtfbmFtZSA9IDE7CglvcHRpb25hbCBzdHJpbmcgbWF0ZXJpYWxfbmFtZSA9IDI7CglvcHRpb25hbCB2ZXJ0aWNlc19xdWFudGl6ZWQgdmVydGljZXMgPSAzOwoJcmVwZWF0ZWQgdXZfcXVhbnRpemVkIHV2cyA9IDQ7CglvcHRpb25hbCBmYWNlc19zaW1wbGUgZmFjZXMgPSA1Owp9Cg==', 'base64');
                        this.builder = dcodeIO.ProtoBuf.loadProto(e),
                            this.decoder = this.builder.build('binary_mesh')
                    }
                    var r = t('../util/logger'),
                        a = t('../util/common'),
                        s = new r(n);
                    i.prototype = {
                        constructor: i,
                        load: function (t, e, o, n, i, r) {
                            s.time('download'),
                                a.getFileAsArrayBuffer(t, function (t) {
                                    s.timeEnd('download'),
                                        this.parse(t, e, i, r)
                                }.bind(this), r)
                        },
                        parse: function (t, e, o, n) {
                            var i = this.readProtobuf(t);
                            if (!i) return n();
                            try {
                                s.time('convert to webgl'),
                                    this.convertProtobufToSceneObject(i, e, o, n),
                                    s.timeEnd('convert to webgl')
                            } catch (r) {
                                return s.error('failed parsing .dam'),
                                    s.error(r.message),
                                    n()
                            }
                        },
                        readProtobuf: function (t) {
                            var e;
                            try {
                                s.time('parse proto'),
                                    e = this.decoder.decode(t),
                                    s.timeEnd('parse proto')
                            } catch (o) {
                                return s.error('failed parsing proto for .dam'),
                                    s.error(o.message),
                                    null
                            }
                            return e
                        },
                        convertProtobufToSceneObject: function (t, e, o, n) {
                            function i(t) {
                                return t in c || (c[t] = new THREE.MeshBasicMaterial({
                                    map: THREE.ImageUtils.loadTexture(h.urls.get(t), void 0, a)
                                })),
                                    c[t]
                            }
                            function r(t) {
                                var o = new THREE.BufferGeometry;
                                o.addAttribute('position', new THREE.BufferAttribute(new Float32Array(t.vertices.xyz, 0, 3), 3)),
                                t.vertices.uv.length > 0 && o.addAttribute('uv', new THREE.BufferAttribute(new Float32Array(t.vertices.uv, 0, 2), 2)),
                                    o.addAttribute('index', new THREE.BufferAttribute(new Uint32Array(t.faces.faces, 0, 1), 1)),
                                    o.applyMatrix(l),
                                    o.computeOffsets(),
                                    o.computeBoundingBox();
                                var n = new THREE.Mesh(o, i(e + t.material_name));
                                return n.name = t.chunk_name,
                                    n
                            }
                            function a() {
                                return u++,
                                    u === Object.keys(c).length ? o(p)  : void 0
                            }
                            if (0 === t.chunk.length) return null;
                            var l = new THREE.Matrix4;
                            l.set(1, 0, 0, 0, 0, 0, 1, 0, 0, - 1, 0, 0, 0, 0, 0, 1);
                            var h = this,
                                c = {
                                },
                                u = 0,
                                p = t.chunk.map(r);
                            return p ? void 0 : (s.error('.dam protobuf came out with no chunks...'), n())
                        }
                    },
                        e.exports = i
                }).call(this, t('buffer').Buffer, '/js/loaders/DamLoader.js')
            },
            {
                '../util/common': 45,
                '../util/logger': 48,
                buffer: 52
            }
        ],
        20: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t) {
                        i.call(this, t)
                    }
                    var i = t('./DamLoader'),
                        r = t('../util/logger'),
                        a = new r(o);
                    n.prototype = Object.create(i.prototype),
                        n.prototype.constructor = n,
                        n.prototype.parse = function (t, e, o, n) {
                            var r;
                            try {
                                a.time('lzma'),
                                    r = LZMA.decompressFile(new Uint8Array(t)),
                                    a.timeEnd('lzma')
                            } catch (s) {
                                a.timeEnd('lzma'),
                                    console.error('LZMA failed parsing...'),
                                    console.error(s.message),
                                    n()
                            }
                            return i.prototype.parse.call(this, r, e, o, n)
                        },
                        e.exports = n
                }).call(this, '/js/loaders/LZMADamLoader.js')
            },
            {
                '../util/logger': 48,
                './DamLoader': 19
            }
        ],
        21: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    var n = t('../settings'),
                        i = t('../util/browser'),
                        r = t('./LZMADamLoader'),
                        a = t('./DamLoader'),
                        s = t('./ZipBundleLoader'),
                        l = t('../util/logger'),
                        h = new l(o),
                        c = [
                            ['_50k',
                                '.dam.lzma',
                                'high',
                                r],
                            [
                                '_50k',
                                '.dam',
                                'high',
                                a
                            ],
                            [
                                '',
                                '.dam.lzma',
                                'low',
                                r
                            ],
                            [
                                '',
                                '.dam',
                                'low',
                                a
                            ],
                            [
                                '',
                                '_obj.zip',
                                'low',
                                s
                            ]
                        ];
                    e.exports = {
                        load: function (t, e, o, r, a) {
                            a = a || 0;
                            var s = c[a];
                            if (!s) return void (r && r('no suitable model file found...'));
                            var l = s[0],
                                u = s[1],
                                p = s[2],
                                d = new s[3](e),
                                m = e.get(t + l + u);
                            if (m) {
                                var f = t + l + '_texture_jpg_' + p + '/';
                                i.isMobile() && 'high' == p && (i.detectSamsungS6() ? (h.warn('Galaxy S6 cannot handle large textures, turning down quality.'), p = 'low', f = t + l + '_texture_jpg_' + p + '/')  : e.count(f) > n.maxMobileTextures && (h.warn('Model probably too large for mobile, turning down quality.'), p = 'low', f = t + l + '_texture_jpg_' + p + '/')),
                                    h.debug('trying ' + l + u),
                                    d.load(m, f, t + l, u, o, function () {
                                        this.load(t, e, o, r, ++a)
                                    }.bind(this))
                            } else h.debug('skipping ' + u + ', not available'),
                                this.load(t, e, o, r, ++a)
                        }
                    }
                }).call(this, '/js/loaders/ModelLoader.js')
            },
            {
                '../settings': 38,
                '../util/browser': 44,
                '../util/logger': 48,
                './DamLoader': 19,
                './LZMADamLoader': 20,
                './ZipBundleLoader': 23
            }
        ],
        22: [
            function (t, e, o) {
                (function (o, n) {
                    'use strict';
                    function i(t) {
                        this.model = t,
                            this.modelDataPath = this.model.urls.get('vision.modeldata'),
                            this.sweepLocationsPath = this.model.urls.get('sweep_locations.csv');
                        var e = o('Ly8KLy8gUHJvdG9jb2wgQnVmZmVyIGZvciBwdWNrIHZpc2liaWxpdHkgYW5kIHJlbGF0ZWQgZGF0YQovLwovL3BhY2thZ2UgZW9zLnN0b3JhZ2U7CgovLyBpbXBvcnQgImVvcy9pbmZyYS9jb21tb24ucHJvdG8iOwovLyBUaGUgZm9sbG93aW5nIHdlcmUgbWFudWFsbHkgZXh0cmFjdGVkIGhlcmUsIEpTIGRvZXMgbm90IGxpa2UgcHJvdG9idWYgaW1wb3J0cwoKbWVzc2FnZSBBZmZpbmUzZiB7CglvcHRpb25hbCBRdWF0ZXJuaW9uZiByb3RhdGlvbiA9IDE7CglvcHRpb25hbCBWZWN0b3IzZiB0cmFuc2xhdGlvbiA9IDI7Cn0KCm1lc3NhZ2UgUXVhdGVybmlvbmYgewoJb3B0aW9uYWwgZmxvYXQgdyA9IDE7CglvcHRpb25hbCBmbG9hdCB4ID0gMjsKCW9wdGlvbmFsIGZsb2F0IHkgPSAzOwoJb3B0aW9uYWwgZmxvYXQgeiA9IDQ7Cn0KCm1lc3NhZ2UgVmVjdG9yM2YgewoJb3B0aW9uYWwgZmxvYXQgeCA9IDE7CglvcHRpb25hbCBmbG9hdCB5ID0gMjsKCW9wdGlvbmFsIGZsb2F0IHogPSAzOwp9CgovLwovLyBPbmUgc3dlZXAgLyBwYW5vCi8vCm1lc3NhZ2UgU3dlZXBMb2NhdGlvbiB7CglvcHRpb25hbCBieXRlcyB1dWlkID0gMTsgIC8qIHV1aWQgKi8KCW9wdGlvbmFsIEFmZmluZTNmIHBvc2UgPSAyOyAgLyogY2FtZXJhIHBvc2UgKHgsIHkseikgaW4gbWV0ZXIgYW5kIGEgcXVhdGVybmlvbiovCglvcHRpb25hbCBWZWN0b3IzZiBwdWNrID0gMzsgIC8qIHB1Y2sgbG9jYXRpb24gLSB4IGFueSBpcyBnZW5lcmFsbHkgdGhlIHNhbWUgYXMgcG9zZSwgeiBpcyB0aGUgaGVpZ2h0IG9mIHRoZSBjbG9zZXN0IGZsb29yIHVuZGVyIHRoZSBjYW1lcmEgKi8KCW9wdGlvbmFsIGludDMyIGdyb3VwID0gNDsgIC8qIGZsb29yIGluZGV4ICovCglvcHRpb25hbCBpbnQzMiBzdWJncm91cCA9IDU7ICAvKiByb29tIGluZGV4ICovCglyZXBlYXRlZCBpbnQzMiB2aXNpYmxlcyA9IDY7ICAvKiBsaXN0IG9mIGluZGljZXMgdG8gYWxsIHB1Y2tzIHZpc2libGUgZnJvbSB0aGlzIHB1Y2sgKi8KCXJlcGVhdGVkIGZsb2F0IHNjb3JlcyA9IDc7IC8qIHVzZWQgYXMgcGFydCBvZiBzY29yaW5nIGZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyB3aGljaCBwdWNrIHRvIGdvIHRvIG5leHQgKi8KfQoKLy8KLy8gQWxsIHB1Y2tzIGluIGEgbW9kZWwuIFB1Y2tzIGFyZSBzdG9yZWQgaW4gc2Nhbm5pbmcgb3JkZXIuCi8vCm1lc3NhZ2UgTmF2aWdhdGlvbkluZm8gewoJcmVwZWF0ZWQgU3dlZXBMb2NhdGlvbiBzd2VlcExvY2F0aW9ucyA9IDE7Cn0K', 'base64'),
                            n = dcodeIO.ProtoBuf.loadProto(e);
                        this.decoder = n.build('NavigationInfo')
                    }
                    var r = t('../util/common'),
                        a = t('../util/math'),
                        s = t('../util/logger'),
                        l = new s(n);
                    i.prototype.load = function () {
                        var t = $.Deferred();
                        return this.modelDataPath && this.model.options.useVisionModelData !== !1 ? (l.info('Using vision.modeldata'), this.loadVisionModelData(t))  : this.sweepLocationsPath ? (l.warn('Using sweep_locations.csv'), this.loadSweepLocationsCSV(t))  : (l.warn('No sweep file found'), t.resolve([])),
                            t
                    },
                        i.prototype.loadVisionModelData = function (t) {
                            r.getFileAsArrayBuffer(this.modelDataPath, function (e) {
                                try {
                                    var o = this.decoder.decode(e)
                                } catch (n) {
                                    return l.warn('Could not decode vision.modeldata, trying sweep_locations.csv'),
                                        this.loadSweepLocationsCSV(t)
                                }
                                var i = o.sweepLocations.map(function (t) {
                                    return {
                                        uuid: t.uuid.toUTF8().replace(/-/g, ''),
                                        position: {
                                            x: t.pose.translation.x,
                                            y: t.pose.translation.y,
                                            z: t.pose.translation.z
                                        },
                                        quaternion: {
                                            x: t.pose.rotation.x,
                                            y: t.pose.rotation.y,
                                            z: t.pose.rotation.z,
                                            w: t.pose.rotation.w
                                        },
                                        puck: {
                                            x: t.puck.x,
                                            y: t.puck.y,
                                            z: t.puck.z
                                        },
                                        floor: t.group,
                                        neighbours: t.visibles
                                    }
                                }).map(function (t) {
                                    return t.position = a.convertVisionVector(t.position),
                                        t.quaternion = a.convertVisionQuaternion(t.quaternion),
                                        t.puck = a.convertVisionVector(t.puck),
                                        t
                                });
                                i.forEach(function (t) {
                                    t.neighbours = t.neighbours.map(function (t) {
                                        return i[t].uuid
                                    })
                                }),
                                    t.resolve(i)
                            }.bind(this), function () {
                                l.warn('Could not load vision.modeldata, trying sweep_locations.csv'),
                                    this.loadSweepLocationsCSV(t)
                            }.bind(this))
                        },
                        i.prototype.loadSweepLocationsCSV = function (t) {
                            $.ajax(this.sweepLocationsPath).done(function (e) {
                                var o = e.split('\n').map(function (t) {
                                    return t.split(', ')
                                }).filter(function (t) {
                                    return t.length > 1
                                }).map(function (t) {
                                    return {
                                        uuid: t[0],
                                        position: {
                                            x: parseFloat(t[1]),
                                            y: parseFloat(t[2]),
                                            z: parseFloat(t[3])
                                        },
                                        quaternion: {
                                            x: parseFloat(t[4]),
                                            y: parseFloat(t[5]),
                                            z: parseFloat(t[6]),
                                            w: parseFloat(t[7])
                                        }
                                    }
                                }).map(function (t) {
                                    return t.position = a.convertVisionVector(t.position),
                                        t.quaternion = a.convertVisionQuaternion(t.quaternion),
                                        t
                                });
                                t.resolve(o)
                            }).fail(function () {
                                l.warn('Could not load sweep_locations.csv, no sweeps loaded.'),
                                    t.resolve([])
                            })
                        },
                        e.exports = i
                }).call(this, t('buffer').Buffer, '/js/loaders/SweepDataLoader.js')
            },
            {
                '../util/common': 45,
                '../util/logger': 48,
                '../util/math': 49,
                buffer: 52
            }
        ],
        23: [
            function (t, e, o) {
                'use strict';
                function n(t) {
                    this.urls = t,
                        this.objloader = new THREE.OBJLoader,
                        this.mtlloader = new THREE.MTLLoader
                }
                var i = t('../util/common');
                n.prototype = {
                    constructor: n,
                    load: function (t, e, o, n, r, a) {
                        var s = this;
                        console.time('Downloading OBJ'),
                            i.getFileAsArrayBuffer(t, function (t) {
                                console.timeEnd('Downloading OBJ');
                                var n = new JSZip(t),
                                    i = s.parseMTL(o, n, e),
                                    a = s.parseOBJ(o, n, i),
                                    l = s.parsePanos(o, n);
                                r(a, l)
                            }, a)
                    },
                    parseMTL: function (t, e, o) {
                        var n = this,
                            i = this.mtlloader.parse(e.file(t + '.mtl').asText());
                        return i.baseUrl = o,
                            i.loadTexture = function (t) {
                                var e = new Image,
                                    o = new THREE.Texture(e);
                                return e.onload = function () {
                                    o.needsUpdate = !0
                                },
                                    e.crossOrigin = THREE.ImageUtils.crossOrigin,
                                    e.src = n.urls.get(t),
                                    o
                            },
                            i
                    },
                    parseOBJ: function (t, e, o) {
                        console.time('Unzipping OBJ');
                        var n = e.file(t + '.obj').asText();
                        console.timeEnd('Unzipping OBJ'),
                            console.time('Parsing OBJ');
                        var i = this.objloader.parse(n);
                        console.timeEnd('Parsing OBJ');
                        var r = [
                        ];
                        return i.traverse(function (t) {
                            if (t instanceof THREE.Mesh) {
                                for (var e = t.geometry, n = 0; n < e.vertices.length; n += 3) {
                                    var i = e.vertices[n],
                                        a = e.vertices[n + 1],
                                        s = e.vertices[n + 2];
                                    e.vertices[n] = a,
                                        e.vertices[n + 1] = s,
                                        e.vertices[n + 2] = i
                                }
                                if (t.material.name) {
                                    var l = o.create(t.material.name);
                                    l && (t.material = l)
                                }
                                r.push(t)
                            }
                        }),
                            r
                    },
                    parsePanos: function (t, e) {
                        return e.file(t + '_locations.csv').asText()
                    }
                },
                    e.exports = n
            },
            {
                '../util/common': 45
            }
        ],
        24: [
            function (t, e, o) {
                (function (e) {
                    'use strict';
                    function o(t, e) {
                        W.info('Model data loaded'),
                            W.debug('UUID: ' + t.data.job.uuid),
                            T.initMixpanel({
                                model: V,
                                version: '2.0.35',
                                startSource: _,
                                token: e
                            }),
                            T.initMixpanelModel(t),
                            w.coverScreen(t, function () {
                                T.sessionStart({
                                    model: t,
                                    startSource: _
                                }),
                                    t.load(r, s)
                            })
                    }
                    function n(t) {
                        try {
                            k = new THREE.WebGLRenderer
                        } catch (e) {
                            return l()
                        }
                        B = new THREE.PerspectiveCamera,
                            O = new THREE.Scene;
                        var o = new THREE.AmbientLight(16777215);
                        O.add(o),
                            k.autoClear = !1,
                            k.setPixelRatio(window.devicePixelRatio ? window.devicePixelRatio : 1),
                            k.setSize(window.innerWidth, window.innerHeight),
                            O.skybox = new A,
                            O.add(O.skybox),
                            H = new m(t, B, L, O, k),
                            O.add(H.reticule),
                            S = new THREE.EffectComposer(k),
                            S.addPass(new THREE.RenderPass(O, B)),
                            M.init(S, H),
                            L.appendChild(k.domElement),
                            t.constrained = v.isMobile()
                    }
                    function i(t) {
                        var e = {
                            },
                            o = v.valueFromHash('start', '');
                        if ('' !== o) W.debug('Start override found in parameters, trying to parse...'),
                            e = H.optionsFromString(o) || {
                                };
                        else if (t.heroImage && t.heroImage.metadata.camera_position) {
                            var n = t.heroImage.metadata;
                            W.debug('Using start position from thumbnail image'),
                                e.position = P.convertWorkshopVector(n.camera_position),
                                e.quaternion = P.convertWorkshopQuaternion(n.camera_quaternion),
                                0 === n.camera_mode ? (e.mode = f.PANORAMA, e.pano = t.panos.get(n.scan_id))  : 1 === n.camera_mode ? e.mode = f.FLOORPLAN : 2 === n.camera_mode ? e.mode = f.DOLLHOUSE : (W.debug('Unknown camera mode: ' + n.camera_mode), e.mode = null)
                        }
                        return e.mode = e.mode || f.PANORAMA,
                        e.pano || (W.debug('No pano selected, choosing the closest one to player location'), e.pano = t.panos.findClosest(e.position || H.position)),
                            e
                    }
                    function r(t) {
                        W.info('Model geometry loaded'),
                            n(t),
                            w.init(t, H);
                        var e = i(t);
                        e.pano ? (W.info('Preloading panorama ' + e.pano.id + ' before starting...'), e.pano.loadCube('high', function () {
                            new C(t, H).start(),
                                a(t, e)
                        }))  : (W.info('No start panorama found.'), a(t, e))
                    }
                    function a(t, e) {
                        e.pano;
                        T.report(t.sid, 'started-playing'),
                            W.info('Initial loading done, starting in ' + e.mode),
                            D = t,
                            T.modelLoaded(t, H),
                            O.add(t),
                            O.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(100000, 100000), new THREE.MeshBasicMaterial({
                                side: THREE.DoubleSide
                            })),
                            O.plane.position.y = 0,
                            O.plane.rotateX( - Math.PI / 2),
                            O.plane.visible = !1,
                            O.add(O.plane),
                            O.updateMatrixWorld(),
                            w.endLoading(t, H),
                            $(L).fadeIn(2000),
                            u(),
                            H.controls.dollhouse.setModel(t),
                            H.controls.floorplan.setModel(t),
                            H.start(e),
                            R.navHelpSessionStart(),
                        b.showScreenshotLocations && t.data.images.forEach(function (t) {
                            if (t.metadata && t.metadata.camera_position) {
                                var e = P.convertWorkshopVector(t.metadata.camera_position),
                                    o = new THREE.Mesh(new THREE.BoxGeometry(0.3, 0.3, 0.3));
                                o.position = e.clone(),
                                    O.add(o);
                                var n = P.convertWorkshopQuaternion(t.metadata.camera_quaternion),
                                    i = new THREE.Vector3(0, 0, - 1).applyQuaternion(n);
                                O.add(new THREE.ArrowHelper(i, e.clone(), 1, 16711680))
                            }
                        }),
                        b.showAxis && (O.add(new THREE.ArrowHelper(new THREE.Vector3(0, 1, 0), new THREE.Vector3(0, 0, 0), 1, 255)), O.add(new THREE.ArrowHelper(new THREE.Vector3(0, 0, 1), new THREE.Vector3(0, 0, 0), 1, 16711680)), O.add(new THREE.ArrowHelper(new THREE.Vector3(1, 0, 0), new THREE.Vector3(0, 0, 0), 1, 65280))),
                            h()
                    }
                    function s(t) {
                        W.error(t),
                            E.error(t),
                            T.report(V, 'error-' + t)
                    }
                    function l() {
                        var t = v.details();
                        t && 'Safari' === t.name && t.version > 500 && t.version < 600 ? (E.error('webgl-safari'), T.report(V, 'error-webgl-safari'))  : (E.error('webgl-generic'), T.report(V, 'error-webgl-generic'))
                    }
                    function h() {
                        window.requestAnimationFrame(h),
                            c()
                    }
                    function c() {
                        if (!H.paused) {
                            u();
                            var t = Math.min(1, F.getDelta());
                            D.update(t),
                                x.update(t),
                                H.update(t),
                                M.currentBlur > 0 ? S.render()  : k.render(O, B)
                        }
                    }
                    function u() {
                        (window.innerWidth != G || window.innerHeight != U) && (G = window.innerWidth, U = window.innerHeight, b.aspect = window.innerWidth / window.innerHeight, M.aspect = window.innerWidth / window.innerHeight, H.setSize(window.innerWidth, window.innerHeight), k.setSize(window.innerWidth, window.innerHeight), S.setSize(window.innerWidth, window.innerHeight))
                    }
                    function p(t) {
                        t.stopPropagation(),
                            t.preventDefault()
                    }
                    var d = t('./util/sentry'),
                        m = t('./player'),
                        f = t('./enum/Viewmode'),
                        g = t('./util/logger'),
                        y = t('./showcase'),
                        v = t('./util/browser'),
                        b = t('./settings'),
                        w = t('./gui/gui'),
                        E = t('./gui/error'),
                        R = t('./gui/help'),
                        T = (t('./gui/konami'), t('./analytics')),
                        x = t('./util/transitions'),
                        M = t('./effects'),
                        A = t('./objects/Skybox'),
                        P = (t('./util/common'), t('./util/math')),
                        C = (t('./objects/Panorama'), t('./preloaders')),
                        I = t('events').EventEmitter,
                        H = (t('./util/lerp'), null),
                        k = null,
                        S = null,
                        O = null,
                        B = null,
                        D = null,
                        L = document.getElementById('player'),
                        F = new THREE.Clock,
                        W = new g(e);
                    g.level = b.logLevel;
                    var V = v.valueFromHash('model') || v.valueFromHash('m');
                    console.log(V)
                    V = $("#siteUrl").html()
                 //   console.log(V)
                    console.log(v)
                    I.defaultMaxListeners = 1000,
                    b.captureErrors && d.captureErrors('https://6e533a56ed0147d999052427fe4d507f@app.getsentry.com/44952', {
                        maxMessageLength: 2000
                    }, {
                        model: V,
                        version: '2.0.35'
                    }),
                        L.addEventListener('dragenter', p, !1),
                        L.addEventListener('dragover', p, !1),
                        W.info('Version', '2.0.35');
                    var _ = v.valueFromHash('play', !1) ? 'autoplay' : v.inIframe() ? 'click' : 'fullpage',
                        N = window.MP_PREFETCHED_MODELDATA || {
                            },
                        Z = T.getMixpanelToken({
                            data: N.keys || null
                        }),
                        j = y.getModel({
                            url: V,
                            floors: v.valueFromHash('f', !0),
                            useVisionModelData: v.valueFromHash('modeldata', !0),
                            autoload: !1,
                            data: N.model || null
                        });
                    $.when(j, Z).done(o).fail(function (t) {
                        'loading-failed-mixpanel' === t ? j.done(o).fail(s)  : s(t)
                    }),
                        window.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame;
                    var G = 0,
                        U = 0
                }).call(this, '/js/main.js')
            },
            {
                './analytics': 1,
                './effects': 9,
                './enum/Viewmode': 11,
                './gui/error': 15,
                './gui/gui': 16,
                './gui/help': 17,
                './gui/konami': 18,
                './objects/Panorama': 32,
                './objects/Skybox': 35,
                './player': 36,
                './preloaders': 37,
                './settings': 38,
                './showcase': 40,
                './util/browser': 44,
                './util/common': 45,
                './util/lerp': 47,
                './util/logger': 48,
                './util/math': 49,
                './util/sentry': 50,
                './util/transitions': 51,
                events: 56
            }
        ],
        25: [
            function (t, e, o) {
                'use strict';
                function n(t, e, o) {
                    var n = (new THREE.Box3).setFromObjects(t),
                        i = n.size(),
                        r = new THREE.BoxGeometry(i.x, i.y, i.z);
                    r.boundingBox = n,
                        THREE.Mesh.call(this, r, e),
                        this.position.copy(n.center()),
                        this.frustumCulled = !1,
                    o && this.add(new THREE.WireframeHelper(this))
                }
                n.prototype = Object.create(THREE.Mesh.prototype),
                    n.prototype.constructor = n,
                    e.exports = n
            },
            {
            }
        ],
        26: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t) {
                        l.time('Computing a nice bounding cubemap');
                        var e = new THREE.ShaderMaterial({
                            fragmentShader: i.model.fragmentShader,
                            vertexShader: i.model.vertexShader,
                            uniforms: THREE.UniformsUtils.clone(i.model.uniforms),
                            side: THREE.BackSide,
                            transparent: !0
                        });
                        e.uniforms.modelAlpha.value = 0,
                            e.uniforms.opacity.value = 1 - a.modelAlpha,
                            r.call(this, t.chunks, e),
                            l.timeEnd('Computing a nice bounding cubemap')
                    }
                    var i = (t('../enum/Viewmode'), t('../shaders')),
                        r = t('./BoundingMesh'),
                        a = t('../settings'),
                        s = t('../util/logger'),
                        l = new s(o);
                    n.prototype = Object.create(r.prototype),
                        n.prototype.constructor = n,
                        e.exports = n
                }).call(this, '/js/objects/BoundingTextureSkybox.js')
            },
            {
                '../enum/Viewmode': 11,
                '../settings': 38,
                '../shaders': 39,
                '../util/logger': 48,
                './BoundingMesh': 25
            }
        ],
        27: [
            function (t, e, o) {
                'use strict';
                function n(t) {
                    THREE.Mesh.call(this, t.geometry, t.material),
                        t.clone(this);
                    var e = THREE.UniformsUtils.clone(i.model.uniforms);
                    e.map.value = this.material.map,
                        this.materialInside = new THREE.ShaderMaterial({
                            fragmentShader: i.model.fragmentShader,
                            vertexShader: i.model.vertexShader,
                            uniforms: e
                        }),
                        e = THREE.UniformsUtils.clone(i.modelDollhouse.uniforms),
                        e.map.value = this.material.map,
                        this.materialDollhouse = new THREE.ShaderMaterial({
                            fragmentShader: i.modelDollhouse.fragmentShader,
                            vertexShader: i.modelDollhouse.vertexShader,
                            uniforms: e
                        }),
                        this.material = this.materialInside
                }
                var i = t('../shaders'),
                    r = t('../enum/Viewmode');
                n.prototype = Object.create(THREE.Mesh.prototype),
                    n.prototype.setMode = function (t) {
                        t === r.DOLLHOUSE ? (this.materialDollhouse.transparent = this.material.transparent, this.materialDollhouse.uniforms.opacity.value = this.material.uniforms.opacity.value, this.material = this.materialDollhouse)  : (this.materialInside.transparent = this.material.transparent, this.materialInside.uniforms.opacity.value = this.material.uniforms.opacity.value, this.material = this.materialInside)
                    },
                    e.exports = n
            },
            {
                '../enum/Viewmode': 11,
                '../shaders': 39
            }
        ],
        28: [
            function (t, e, o) {
                'use strict';
                function n(t) {
                    this.chunksize = t || 10,
                        this.chunks = {
                        },
                        this.boundingBoxes = {
                        },
                        this.children = [
                        ],
                        this.offset = new THREE.Vector3(0, 0.5, 0),
                        this.material = new THREE.MeshBasicMaterial({
                            color: 16777215 * Math.random(),
                            side: THREE.DoubleSide
                        })
                }
                t('../enum/Viewmode');
                n.prototype.add = function (t) {
                    var e,
                        o,
                        n,
                        i,
                        r,
                        a,
                        s,
                        l,
                        h,
                        c,
                        u,
                        p,
                        d = t.attributes;
                    d ? (e = d.position.array, o = void 0 !== d.index ? d.index.array : void 0)  : (e = t.vertices, n = t.faces);
                    var m = (this.boundingBox, new THREE.Vector3);
                    if (o) for (i = 0, r = o.length; r > i; i += 3) {
                        var f = 3 * o[i],
                            g = 3 * o[i + 1],
                            y = 3 * o[i + 2];
                        a = (e[f] + e[g] + e[y]) / 3,
                            s = (e[f + 1] + e[g + 1] + e[y + 1]) / 3,
                            l = (e[f + 2] + e[g + 2] + e[y + 2]) / 3,
                            h = Math.floor(a / this.chunksize),
                            c = Math.floor(s / this.chunksize),
                            u = Math.floor(l / this.chunksize),
                            p = [
                                h,
                                c,
                                u
                            ].join('.'),
                        p in this.chunks || (this.chunks[p] = [
                        ], this.boundingBoxes[p] = new THREE.Box3),
                            this.chunks[p].push(e[f], e[f + 1], e[f + 2], e[g], e[g + 1], e[g + 2], e[y], e[y + 1], e[y + 2]),
                            this.boundingBoxes[p].expandByPoint(m.set(e[f], e[f + 1], e[f + 2])),
                            this.boundingBoxes[p].expandByPoint(m.set(e[g], e[g + 1], e[g + 2])),
                            this.boundingBoxes[p].expandByPoint(m.set(e[y], e[y + 1], e[y + 2]))
                    } else for (i = 0, r = e.length; r > i; i += 9) a = (e[i] + e[i + 3] + e[i + 6]) / 3,
                        s = (e[i + 1] + e[i + 4] + e[i + 7]) / 3,
                        l = (e[i + 2] + e[i + 5] + e[i + 8]) / 3,
                        h = Math.floor(a / this.chunksize),
                        c = Math.floor(s / this.chunksize),
                        u = Math.floor(l / this.chunksize),
                        p = [
                            h,
                            c,
                            u
                        ].join('.'),
                    p in this.chunks || (this.chunks[p] = [
                    ], this.boundingBoxes[p] = new THREE.Box3),
                        this.chunks[p].push(e[i], e[i + 1], e[i + 2], e[i + 3], e[i + 4], e[i + 5], e[i + 6], e[i + 7], e[i + 8]),
                        this.boundingBoxes[p].expandByPoint(m.set(e[i], e[i + 1], e[i + 2])),
                        this.boundingBoxes[p].expandByPoint(m.set(e[i + 3], e[i + 4], e[i + 5])),
                        this.boundingBoxes[p].expandByPoint(m.set(e[i + 6], e[i + 7], e[i + 8]))
                },
                    n.prototype.build = function () {
                        var t = new THREE.Object3D;
                        t.material = this.material;
                        for (var e in this.chunks) {
                            var o = this.chunks[e],
                                n = new THREE.BufferGeometry;
                            n.addAttribute('position', new THREE.BufferAttribute(new Float32Array(o), 3)),
                                n.boundingBox = this.boundingBoxes[e];
                            var i = new THREE.Mesh(n, this.material);
                            i.visible = !1,
                                t.add(i),
                                this.chunks[e] = [
                                ]
                        }
                        return t
                    },
                    e.exports = n
            },
            {
                '../enum/Viewmode': 11
            }
        ],
        29: [
            function (t, e, o) {
                'use strict';
                function n(t, e, o) {
                    THREE.Object3D.call(this),
                        this.model = t,
                        this.floorIndex = e,
                        this.name = o || 'Floor ' + (e + 1),
                        this.panos = [
                        ],
                        this.chunks = [
                        ],
                        this.colliderBuilder = new a(10),
                        this.collider = null,
                        this.boundingBox = new THREE.Box3,
                        this.size = null,
                        this.hidden = !1,
                        this.conservativeBoundingBox = new THREE.Box3,
                        this.debugColor = 16777215 * Math.random(),
                        this.transition = null
                }
                {
                    var i = (t('../settings'), t('../util/common')),
                        r = t('../util/lerp'),
                        a = t('./ChunkedCollider'),
                        s = t('../util/transitions'),
                        l = t('../util/easing');
                    t('../objects/Panorama')
                }
                n.prototype = Object.create(THREE.Object3D.prototype),
                    n.prototype.enter = function (t) {
                        this.model.selectFloor(this, t)
                    },
                    n.prototype.hide = function () {
                        this.hidden || (this.hidden = !0, this.chunks.forEach(function (t) {
                            t.material.transparent = !0
                        }), s.cancel(this.transition), this.transition = s.start(r.allUniforms(this.chunks, 'opacity', 0.08), 300, null, 0, l.easeInOutQuad))
                    },
                    n.prototype.show = function (t) {
                        this.hidden && (this.hidden = !1, s.cancel(this.transition), this.transition = s.start(r.allUniforms(this.chunks, 'opacity', 1), 600, function () {
                            this.hidden || this.chunks.forEach(function (t) {
                                t.material.transparent = !1
                            })
                        }.bind(this), t ? 0 : 0.5, l.easeInOutQuad))
                    },
                    n.prototype.toggle = function (t, e) {
                        t = void 0 === t ? this.hidden : t,
                            t ? this.show(e)  : this.hide()
                    },
                    n.prototype.containsPoint = function (t) {
                        return this.collider.children.some(function (e) {
                            return e.geometry.boundingBox || e.geometry.computeBoundingBox(),
                                e.geometry.boundingBox.containsPoint(t)
                        })
                    },
                    n.prototype.distanceToPoint = function (t) {
                        var e = null,
                            o = 1 / 0;
                        return this.collider.children.forEach(function (n) {
                            n.geometry.boundingBox || n.geometry.computeBoundingBox();
                            var i = n.geometry.boundingBox.distanceToPoint(t);
                            (!e || o > i) && (o = i, e = n)
                        }),
                            o
                    },
                    n.prototype.addChunk = function (t) {
                        t.renderOrder = 2,
                            this.add(t),
                            this.chunks.push(t),
                            this.boundingBox.union(t.geometry.boundingBox),
                            this.size = this.boundingBox.size(),
                            this.colliderBuilder.add(t.geometry)
                    },
                    n.prototype.build = function () {
                        this.collider = this.colliderBuilder.build(!0),
                            this.add(this.collider),
                            this.conservativeBoundingBox.copy(this.boundingBox),
                            this.conservativeBoundingBox.min.y = i.lowerMedian(this.collider.children.map(function (t) {
                                return t.geometry.boundingBox.min.y
                            }), 5),
                            this.conservativeBoundingBox.max.y = i.lowerMedian(this.collider.children.map(function (t) {
                                return t.geometry.boundingBox.max.y
                            }), 5),
                            this.colliderBuilder = null
                    },
                    n.prototype.toShortString = function () {
                        return i.nth(this.floorIndex + 1)
                    },
                    n.prototype.toString = function () {
                        return this.name
                    },
                    e.exports = n
            },
            {
                '../objects/Panorama': 32,
                '../settings': 38,
                '../util/common': 45,
                '../util/easing': 46,
                '../util/lerp': 47,
                '../util/transitions': 51,
                './ChunkedCollider': 28
            }
        ],
        30: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t, e) {
                        THREE.Object3D.call(this),
                            this.sid = e.sid,
                            this.data = e,
                            this.options = t,
                            this.urls = new i(this, t.urlFiles),
                            this.images = [
                            ],
                            this.heroImage = n.getHeroImage(e.images, this.data.player_options),
                            this.heroLocations = [
                            ],
                            this.floors = {
                            },
                            this.floorList = [
                            ],
                            this.floorsEnabled = void 0 !== t.floors ? t.floors : !0,
                            this.changingFloor = !1,
                            this.chunks = [
                            ],
                            this.panos = new d,
                            this.colliders = [
                            ],
                            this.mode = a.DOLLHOUSE,
                            this.size = null,
                            this.center = null,
                            this.boundingBox = new THREE.Box3,
                            this.boundingBoxWithPadding = new THREE.Box3,
                            this.exploded = !1,
                            this.currentFloor = null,
                            this.allFloorsVisible = !0,
                            this.stayPut = !1,
                            this.projectedPano0 = null,
                            this.projectedPano1 = null,
                        this.floorsEnabled && e.floors && - 1 !== e.floors.indexOf(',') && e.floors.split(',').forEach(function (t, e) {
                            this.addFloor(new s(this, e, t.trim()))
                        }.bind(this)),
                            this.waitQueue = [
                            ],
                            this.on('load', function (t) {
                                0 !== this.waitQueue.length && (this.waitQueue = this.waitQueue.filter(function (e) {
                                    return !(t === e.pano && t.isLoaded(e.quality))
                                }), 0 === this.waitQueue.length && this.emit('waiting-done'))
                            }.bind(this))
                    }
                    var i = t('../util/ModelUrls'),
                        r = t('./BoundingTextureSkybox'),
                        a = t('../enum/Viewmode'),
                        s = t('./Floor'),
                        l = t('./Chunk'),
                        h = (t('./BoundingMesh'), t('../shaders'), t('../util/math')),
                        c = t('../settings'),
                        u = t('../util/logger'),
                        p = t('../objects/Panorama'),
                        d = t('../util/PanoramaCollection'),
                        m = t('../loaders/ModelLoader'),
                        f = t('../loaders/SweepDataLoader'),
                        g = t('../util/transitions'),
                        y = t('../util/easing'),
                        v = t('../util/lerp'),
                        b = t('../util/common'),
                        w = (t('./../util/browser'), t('events').EventEmitter),
                        E = new u(o);
                    n.prototype = Object.create(THREE.Mesh.prototype),
                        b.extend(n, w),
                        n.prototype.load = function (t, e) {
                            var o = function () {
                                    return $.when(this.loadPanos(), this.loadMesh())
                                },
                                n = this.urls.init().then(o.bind(this)),
                                i = this.loadHighlightReel();
                            $.when(n, i).then(this.build.bind(this)).done(t).fail(e)
                        },
                        n.prototype.loadMesh = function () {
                            function t(t) {
                                E.error(t),
                                    n.reject('loading-failed')
                            }
                            function e(t) {
                                var e = t.match(/group([0-9]*)/);
                                if (!e) return 0;
                                try {
                                    return parseInt(e[1], 10)
                                } catch (o) {
                                    return E.warn('Non-int value "' + e[1] + '" for mesh group, defaulting to floor 0'),
                                        0
                                }
                            }
                            function o(t, o) {
                                t.forEach(function (t) {
                                    var o = i.floorsEnabled ? e(t.name)  : 0;
                                    i.addChunk(o, t)
                                }),
                                    n.resolve(i)
                            }
                            var n = $.Deferred(),
                                i = this;
                            return m.load(this.data.job.uuid, i.urls, o, t),
                                n.promise()
                        },
                        n.prototype.loadPanos = function () {
                            var t = new f(this);
                            return t.load().then(function (t) {
                                return this.data.sweeps && Object.keys(this.data.sweeps).length > 0 && (t = t.filter(function (t) {
                                    return this.data.sweeps[t.uuid].enabled
                                }.bind(this))),
                                    this.panos.extend(t.map(function (t) {
                                        return new p(this, t.uuid, t)
                                    }.bind(this))),
                                    this.panos.forEach(function (t) {
                                        t.neighbourUUIDs && (t.neighbourUUIDs.forEach(function (e) {
                                            var o = this.panos.get(e);
                                            o && this.panos.setNeighbour(t, o, !0)
                                        }.bind(this)), t.neighbourPanos = this.panos.getNeighbours(t) || this.panos.setNeighbour(t, t, !0))
                                    }.bind(this)),
                                    $.when(this)
                            }.bind(this))
                        },
                        n.prototype.loadHighlightReel = function () {
                            var t = $.Deferred(),
                                e = '/api/v1/jsonstore/model/highlights/' + this.sid + '/active_reel';
                            return $.ajax(e, {
                                crossDomain: !0,
                                dataType: 'json',
                                beforeSend: function (t) {
                                    c.token ? (E.debug('Token present, using authorization header'), t.setRequestHeader('Authorization', 'Token ' + c.token))  : E.debug('Token not present, hoping my cookie has auth info...')
                                }
                            }).done(function (e) {
                                e.reel ? (E.info('Got highlight reel with ' + e.reel.length + ' items'), this.images = n.validateHighlights(this.data.images, e.reel, this.data.player_options))  : E.info('No highlight reel found'),
                                    t.resolve()
                            }.bind(this)).fail(function () {
                                E.warn('Getting highlight reel failed, no highlights available'),
                                    t.resolve()
                            }),
                                t
                        },
                        n.prototype.waitForPanoLoad = function (t, e) {
                            t.isLoaded(e) || (this.waitQueue.push({
                                pano: t,
                                quality: e
                            }), 1 === this.waitQueue.length && this.emit('waiting'))
                        },
                        n.prototype.update = function (t) {
                            this.panos.forEach(function (e) {
                                e.update(t)
                            })
                        },
                        n.prototype.hide = function () {
                            this.floorList.forEach(function (t) {
                                t.hide()
                            })
                        },
                        n.prototype.show = function () {
                            this.floorList.forEach(function (t) {
                                t.show()
                            })
                        },
                        n.prototype.floorNames = function () {
                            return this.floorList.reduce(function (t, e) {
                                return t.concat(e.name)
                            }, [
                            ])
                        },
                        n.prototype.warpDestFloors = function (t) {
                            if (this.stayPut = !0, !t) return this.toggleAllFloors(!0),
                                void (this.stayPut = !1);
                            var e = t.floor_visibility;
                            if (void 0 === e || e.length < 2) this.toggleAllFloors(!0);
                            else {
                                this.toggleAllFloors(!1);
                                for (var o = null, n = 0, i = 0; i < e.length; i += 1) e[i] && (i < this.floorList.length ? (o = this.floorList[i], n += 1)  : E.warn('Invalid floor selection in warpDestination'));
                                n > 1 ? this.toggleAllFloors(!0)  : o ? this._changeFloor(o)  : E.info('hmm what floor did we want?')
                            }
                            this.stayPut = !1
                        },
                        n.prototype.toggleStartFloors = function () {
                            var t = 0,
                                e = null;
                            if (this.heroImage && this.heroImage.metadata && this.heroImage.metadata.floor_visibility) {
                                var o = this.heroImage.metadata.floor_visibility;
                                if (o.length > 1) {
                                    this.toggleAllFloors(!1);
                                    for (var n = 0; n < o.length; n += 1) o[n] && (n < this.floorList.length ? (e = this.floorList[n], t += 1)  : E.warn('Invalid floor selection: ' + n))
                                }
                            }
                            t > 1 || 1 > t ? this.toggleAllFloors(!0)  : this._changeFloor(e)
                        },
                        n.prototype.selectFloor = function (t, e) {
                            this.allFloorsVisible = !1,
                                this._changeFloor(t, e)
                        },
                        n.prototype.toggleAllFloors = function (t) {
                            this.allFloorsVisible = void 0 !== t ? t : !this.allFloorsVisible,
                                this._changeFloor(this.currentFloor)
                        },
                        n.prototype._changeFloor = function (t, e) {
                            if (e = e || this.mode, this.currentFloor = t, this.emit('floor.changed', this.currentFloor, e), e === a.PANORAMA) this.show();
                            else if ((e === a.FLOORPLAN || e === a.DOLLHOUSE) && (this.floorList.forEach(function (t, e) {
                                    t.toggle(t === this.currentFloor || this.allFloorsVisible, this.allFloorsVisible)
                                }.bind(this)), !this.stayPut)) {
                                var o = new THREE.Vector3(0, - t.conservativeBoundingBox.min.y, 0);
                                E.debug('Moving the house ' + o.distanceTo(this.position).toPrecision(4)),
                                    g.start(v.vector(this.position, o), 600, null, 0, y.easeInOutQuad)
                            }
                            var n = this,
                                i = t;
                            g.start(function () {
                            }, 300, function () {
                                n.floorList.forEach(function (t) {
                                    t.chunks.forEach(function (e) {
                                        e.renderOrder = t === i ? 1 : 2
                                    })
                                })
                            }.bind(this))
                        },
                        n.prototype.toggleExplode = function () {
                            function t(t, e) {
                                t.position.x = o[t.floorIndex] * e,
                                    t.position.y = 1 * t.floorIndex * e
                            }
                            var e,
                                o = [
                                ],
                                n = 0;
                            this.floorList.forEach(function (t, i, r) {
                                e = i > 0 ? Math.max(r[i - 1].boundingBox.max.x - t.boundingBox.min.x, t.boundingBox.size().x / 2)  : 0,
                                    n += e,
                                    o[i] = n
                            }),
                                o = o.map(function (t) {
                                    return t - n / 2
                                }),
                                this.floorList.forEach(this.exploded ? function (e) {
                                    g.start(function (o) {
                                        t(e, 1 - o)
                                    }.bind(this), 1500, null, 0, y.easeOutExpo)
                                }.bind(this)  : function (e) {
                                    g.start(function (o) {
                                        t(e, o)
                                    }.bind(this), 1500, null, 0, y.easeOutExpo)
                                }.bind(this)),
                                this.exploded = !this.exploded
                        },
                        n.prototype.toggleExplodeUp = function () {
                            function t(t, o) {
                                t.position.y = (5 * t.floorIndex - e.y / 2) * o,
                                    t.panos.forEach(function (e) {
                                        e.position.y = e.origin.y + t.position.y,
                                            e.mesh.position.y = e.origin.y + t.position.y
                                    })
                            }
                            var e = this.size;
                            this.floorList.forEach(this.exploded ? function (e) {
                                g.start(function (o) {
                                    t(e, 1 - o)
                                }, 1500, null, 0, y.easeOutExpo)
                            }
                                : function (e) {
                                g.start(function (o) {
                                    t(e, o)
                                }, 1500, null, 0, y.easeOutExpo)
                            }),
                                this.exploded = !this.exploded
                        },
                        n.prototype.nextFloor = function (t) {
                            return this.floors[this.currentFloor.floorIndex + t] || null
                        },
                        n.prototype.addFloor = function (t) {
                            this.add(t),
                                this.floors[t.floorIndex] = this.floorList[t.floorIndex] = t
                        },
                        n.prototype.getOrMakeFloor = function (t) {
                            var e = this.floors[t];
                            return e || (e = new s(this, t), this.addFloor(e)),
                                e
                        },
                        n.prototype.getFloorAtPoint = function (t) {
                            for (var e = null, o = 1 / 0, n = 0; n < this.floorList.length; n++) {
                                var i = this.floorList[n],
                                    r = i.distanceToPoint(t);
                                (!e || o > r) && (o = r, e = i)
                            }
                            return e
                        },
                        n.prototype.addChunk = function (t, e) {
                            e = new l(e),
                                this.getOrMakeFloor(t).addChunk(e),
                                this.chunks.push(e)
                        },
                        n.prototype.setMode = function (t) {
                            this.mode = t,
                                this.chunks.forEach(function (e) {
                                    e.setMode(t)
                                })
                        },
                        n.prototype.build = function () {
                            return this.heroLocations = n.getHeroLocations(this.images),
                            null === this.heroImage && E.warn('No hero image defined.'),
                                this.currentFloor = this.floors[this.floorList.length - 1],
                                this.floorList.forEach(function (t) {
                                    t.build(),
                                        this.boundingBox.union(t.boundingBox)
                                }.bind(this)),
                                this.size = this.boundingBox.size(),
                                this.center = this.boundingBox.center(),
                                this.boundingBoxWithPadding.copy(this.boundingBox).expandByScalar(5),
                                this.colliders = this.floorList.reduce(function (t, e) {
                                    return t.concat(e.collider.children)
                                }, [
                                ]),
                                this.panos.forEach(function (t) {
                                    t.build1(),
                                        t.on('enter', function () {
                                            t.floor !== this.currentFloor && this.selectFloor(t.floor)
                                        }.bind(this))
                                }.bind(this)),
                                this.panos.forEach(function (t) {
                                    t.build2()
                                }),
                                this.floorList.forEach(function (t) {
                                    E.info('Floor ' + t + ': ' + t.children.length + ' chunks, ' + t.panos.length + ' panos.')
                                }.bind(this)),
                                this.panos.populate_path_graph(),
                                this.skybox = new r(this),
                                this.add(this.skybox),
                                E.debug('Done building model'),
                            p.raycastsDone > 0 && (E.warn('raycasts: ' + p.raycastsDone), E.warn('raycasts skipped: ' + p.raycastsSkipped)),
                                $.when(this)
                        },
                        n.prototype.setProjectedPanos = function (t, e) {
                            function o(o) {
                                o.material.uniforms.progress.value = 0,
                                t.skybox.loaded || (t.skybox.needsUpdate = !0),
                                    t.skybox.loaded = !0,
                                    o.material.uniforms.pano0Map.value = t.skybox,
                                    o.material.uniforms.pano0Position.value.copy(t.position),
                                    o.material.uniforms.pano0Matrix.value.makeRotationFromQuaternion(n.clone().multiply(t.quaternion)),
                                e.skybox.loaded || (e.skybox.needsUpdate = !0),
                                    e.skybox.loaded = !0,
                                    o.material.uniforms.pano1Map.value = e.skybox,
                                    o.material.uniforms.pano1Position.value.copy(e.position),
                                    o.material.uniforms.pano1Matrix.value.makeRotationFromQuaternion(n.clone().multiply(e.quaternion))
                            }
                            var n = this.parent.quaternion.clone();
                            this.projectedPano0 = t,
                                this.projectedPano1 = e,
                                o(this.skybox),
                                this.chunks.forEach(o)
                        },
                        n.prototype.changeModelAlpha = function (t) {
                            this.chunks.forEach(function (e) {
                                e.material && e.material.uniforms.modelAlpha && (e.material.uniforms.modelAlpha.value = t)
                            })
                        },
                        n.prototype.setSide = function (t) {
                            this.floorList.forEach(function (e) {
                                e.collider.material.side = t
                            })
                        },
                        n.validateHighlights = function (t, e, o) {
                            for (var n = {
                            }, i = 0; i < t.length; i++) {
                                var r = t[i];
                                n[r.sid] = r
                            }
                            for (var s = [
                            ], i = 0; i < e.length; i += 1) {
                                var l = e[i],
                                    r = n[l.sid];
                                r && s.push(r)
                            }
                            if (o) {
                                var h = o.dollhouse,
                                    c = o.floor_plan;
                                s = s.filter(function (t) {
                                    if (!t.metadata) return !0;
                                    if (void 0 === t.metadata.camera_mode) return !0;
                                    var e = a.convertWorkshopModeInt(t.metadata.camera_mode);
                                    return e === a.PANORAMA || e === a.FLOORPLAN && c || e === a.DOLLHOUSE && h
                                })
                            }
                            return s.length !== t.length && E.info('Disallowed ' + (t.length - s.length) + ' highlight images'),
                                s
                        },
                        n.getHeroImage = function (t) {
                            for (var e = 0; e < t.length; e++) if (t[e].is_hero) return t[e];
                            return null
                        },
                        n.getHeroLocations = function (t) {
                            if (t.length > 0) {
                                for (var e = [
                                ], o = !1, i = 0; i < t.length; i += 1) {
                                    var r = t[i],
                                        s = r.thumbnail_signed_src,
                                        l = r.name;
                                    if (r.metadata && void 0 !== r.metadata.camera_quaternion) {
                                        var c = (r.metadata.camera_quaternion, {
                                            position: h.convertWorkshopVector(r.metadata.camera_position),
                                            quaternion: h.convertWorkshopQuaternion(r.metadata.camera_quaternion),
                                            scan_id: r.metadata.scan_id,
                                            camera_mode: a.convertWorkshopModeInt(r.metadata.camera_mode),
                                            ortho_zoom: r.metadata.ortho_zoom,
                                            floor_visibility: void 0 !== r.metadata.floor_visibility ? r.metadata.floor_visibility.slice(0)  : [
                                            ],
                                            thumb: s,
                                            name: n.filterImageName(l),
                                            is_hero: r.is_hero
                                        });
                                        e.push(c),
                                            o = o || r.is_hero
                                    }
                                }
                                return e.length > 0 && !o && (e[0].is_hero = !0),
                                    e
                            }
                            return []
                        },
                        n.filterImageName = function (t) {
                            return '' === t || t.match(/^[0-9.]+_[0-9.]+$/) ? null : t
                        },
                        e.exports = n
                }).call(this, '/js/objects/Model.js')
            },
            {
                '../enum/Viewmode': 11,
                '../loaders/ModelLoader': 21,
                '../loaders/SweepDataLoader': 22,
                '../objects/Panorama': 32,
                '../settings': 38,
                '../shaders': 39,
                '../util/ModelUrls': 41,
                '../util/PanoramaCollection': 42,
                '../util/common': 45,
                '../util/easing': 46,
                '../util/lerp': 47,
                '../util/logger': 48,
                '../util/math': 49,
                '../util/transitions': 51,
                './../util/browser': 44,
                './BoundingMesh': 25,
                './BoundingTextureSkybox': 26,
                './Chunk': 27,
                './Floor': 29,
                events: 56
            }
        ],
        31: [
            function (t, e, o) {
                'use strict';
                function n(t) {
                    this.player = t,
                        this.obj3d = null,
                        this.UP = new THREE.Vector3(0, 1, 0)
                }
                var i = t('../settings');
                n.prototype.prefs = {
                    linewidth: 3,
                    height: 0.07,
                    opacity: 0.45,
                    endScale: 0.05
                },
                    n.prototype.discard = function () {
                        if (this.obj3d) {
                            var t = this.obj3d.parent;
                            t && t.remove(this.obj3d)
                        }
                        this.obj3d = null
                    },
                    n.prototype.draw = function () {
                        if (this.discard(), i.showNeighbors) {
                            var t = this.player.currentPano.floor;
                            this.obj3d = new THREE.Object3D;
                            var e = this.player.model.panos.getNeighbours(this.player.currentPano),
                                o = this.player.currentPano.floorPosition.clone().sub(this.player.model.position);
                            o.y += this.prefs.height;
                            var n = 0.1525,
                                r = 0.127,
                                a = 0.0127,
                                s = 0.1,
                                l = 0.19,
                                h = 0.2032,
                                c = 0.2286,
                                u = 0.255,
                                p = new THREE.Matrix4;
                            for (var d in e) if (e[d]) {
                                var m = this.player.model.panos.dict[d],
                                    f = (m.position.clone().sub(this.player.model.position), m.position.clone().sub(m.floorPosition)),
                                    g = m.floorPosition.clone().sub(this.player.model.position);
                                g.y += this.prefs.height;
                                var y = new THREE.Geometry;
                                y.vertices.push(new THREE.Vector3(0, - a, 0), new THREE.Vector3( - a, 0, 0), new THREE.Vector3(0, a, 0), new THREE.Vector3(a, 0, 0), new THREE.Vector3(0, - a, 0)),
                                    y.vertices.push(new THREE.Vector3(0, - u, 0), new THREE.Vector3(u, - u, 0), new THREE.Vector3(u, n, 0), new THREE.Vector3( - n, n, 0), new THREE.Vector3( - n, r, 0), new THREE.Vector3( - l, s, 0), new THREE.Vector3( - l, - h, 0), new THREE.Vector3( - n, - c, 0), new THREE.Vector3( - n, - u, 0), new THREE.Vector3(0, - u, 0)),
                                    p.identity().setPosition(f),
                                    y.applyMatrix(p),
                                    y.vertices.push(new THREE.Vector3(0, - this.prefs.endScale, 0)),
                                    y.vertices.push(new THREE.Vector3( - this.prefs.endScale, - this.prefs.endScale, 0), new THREE.Vector3( - this.prefs.endScale, this.prefs.endScale, 0), new THREE.Vector3(this.prefs.endScale, this.prefs.endScale, 0), new THREE.Vector3(this.prefs.endScale, - this.prefs.endScale, 0)),
                                    p.lookAt(g, o, this.UP).setPosition(g),
                                    y.applyMatrix(p),
                                    y.vertices.push(g, o);
                                var v = new THREE.Line(y, new THREE.LineBasicMaterial({
                                    color: m.debugColor.getHex(),
                                    transparent: !0,
                                    opacity: this.prefs.opacity,
                                    depthWrite: !1,
                                    name: 'sLine' + d,
                                    linewidth: this.prefs.linewidth
                                }));
                                this.obj3d.add(v)
                            }
                            t.add(this.obj3d)
                        }
                    },
                    n.prototype.update = function () {
                        i.showNeighbors && this.obj3d && this.obj3d.updateMatrixWorld()
                    },
                    e.exports = n
            },
            {
                '../settings': 38
            }
        ],
        32: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t, e, o) {
                        this.model = t,
                            this.id = e,
                            this.neighbourUUIDs = o.neighbours || null,
                            this.neighbourPanos = null,
                            this.floor = null,
                            this.failedLoadingAt = 0,
                            this.maxLoadRetries = 4,
                            this.origin = o.position.clone(),
                            this.position = o.position.clone(),
                            this.quaternion = o.quaternion.clone(),
                            this.mesh = new THREE.Mesh(u),
                            this.mesh.position.copy(this.position),
                            this.mesh.quaternion.copy(this.quaternion),
                            this.mesh.name = 'skybox',
                            this.mesh.visible = !1,
                            this.mesh.updateMatrix(),
                            this.marker = new THREE.Mesh(p, new THREE.MeshBasicMaterial({
                                map: a.loadTextureFromCache('/resources/matterport/images/marker-256x256.png'),
                                side: THREE.DoubleSide,
                                opacity: 0,
                                transparent: !0,
                                depthWrite: !1
                            })),
                            this.marker.name = 'marker',
                            this.marker.pano = this,
                            this.debugColor = (new THREE.Color).setHSL(0.06 + 0.53 * Math.random(), 0.8 + 0.2 * Math.random(), 0.5 + 0.2 * Math.random()),
                            this.floorPosition = o.puck ? o.puck.clone()  : null,
                            this.skybox = new THREE.Texture([null,
                                null,
                                null,
                                null,
                                null,
                                null]),
                            this.skybox.flipY = !1,
                        r.colorMarkerOnLoad && this.on('load', function () {
                            this.marker.material.color.set(65280)
                        })
                    }
                    var i = t('../util/logger'),
                        r = t('../settings'),
                        a = (t('../enum/Viewmode'), t('../util/common')),
                        s = t('../util/transitions'),
                        l = t('../util/lerp'),
                        h = t('events').EventEmitter,
                        c = new i(o),
                        u = (new THREE.BufferGeometry).fromGeometry(new THREE.SphereGeometry(0.1)),
                        p = new THREE.PlaneBufferGeometry(0.4, 0.4, 1, 1);
                    n.prototype = Object.create(h.prototype),
                        n.prototype.enter = function () {
                            this.emit('enter')
                        },
                        n.prototype.exit = function () {
                            this.skybox.dispose(),
                                this.skybox.image.__webglTextureCube = null,
                                this.skybox.loaded = !1,
                                this.emit('exit')
                        },
                        n.prototype.hoverOn = function (t) {
                            s.start(l.property(this.marker.material, 'opacity', r[t].markerOpacityOnHover), 250),
                            r.navigation.panoScores & r.navigation.mouseDirection && this.addTextSprite('HIT', 12525854)
                        },
                        n.prototype.hoverOff = function (t) {
                            s.start(l.property(this.marker.material, 'opacity', r[t].markerOpacity), 250)
                        },
                        n.prototype.build1 = function () {
                            this.floor = this.floor || this.raycastToFindFloor() || this.model.getFloorAtPoint(this.position),
                                this.floor.panos.push(this),
                                this.floor.add(this.mesh),
                                this.floor.add(this.marker),
                                this.floorPosition = this.floorPosition || this.raycastFloorPosition(),
                                this.neighbourPanos = this.neighbourPanos || this.findNeighourPanos(),
                            r.colorMarkerByFloor && this.marker.material.color.set(this.floor.debugColor)
                        },
                        n.prototype.build2 = function () {
                            this.floorPosition = this.floorPosition || this.interpolateFloorPosition(),
                                this.height = this.position.distanceTo(this.floorPosition),
                                this.placeMarker()
                        },
                        n.prototype.update = function (t) {
                            this.mesh.updateMatrixWorld(),
                                this.marker.updateMatrixWorld(),
                                this.position.setFromMatrixPosition(this.mesh.matrixWorld),
                                this.floorPosition.setFromMatrixPosition(this.marker.matrixWorld)
                        },
                        n.prototype.interpolateFloorPosition = function () {
                            var t = this.getNeighbourList().filter(function (t) {
                                    return !!t.floorPosition
                                }).sort(function (t, e) {
                                    return t.position.distanceTo(this.position) - e.position.distanceTo(this.position)
                                }.bind(this)),
                                e = this.position.clone();
                            return t.length >= 2 ? e.y = (t[0].floorPosition.y + t[1].floorPosition.y) / 2 : e.add(r.noMeshFloorPositionOffset),
                                e
                        },
                        n.prototype.getNeighbourList = function () {
                            return this.model.panos.filter(function (t) {
                                return t !== this && this.model.panos.isNeighbour(this, t)
                            }.bind(this))
                        },
                        n.prototype.raycastFloorPosition = function () {
                            var t = new THREE.Raycaster(this.position, new THREE.Vector3(0, - 1, 0)),
                                e = t.intersectObjects(this.model.colliders);
                            return e.length ? e[0].point : null
                        },
                        n.prototype.raycastToFindFloor = function () {
                            var t = [
                                new THREE.Vector3(0, - 1, 0),
                                new THREE.Vector3(1, - 1, 0),
                                new THREE.Vector3(0, - 1, 1),
                                new THREE.Vector3( - 1, - 1, 0),
                                new THREE.Vector3(0, - 1, - 1),
                                new THREE.Vector3(1, 0, 0),
                                new THREE.Vector3(0, 0, 1),
                                new THREE.Vector3( - 1, 0, 0),
                                new THREE.Vector3(0, 0, - 1)
                            ];
                            return function () {
                                for (var e = 0; e < t.length; e++) {
                                    var o = new THREE.Raycaster(this.position.clone(), t[e].clone()),
                                        n = o.intersectObjects(this.model.colliders);
                                    if (n.length) return n[0].object.parent.parent
                                }
                                return null
                            }
                        }(),
                        n.prototype.placeMarker = function () {
                            this.marker.position.copy(this.floorPosition),
                                this.marker.position.y += 0.05,
                                this.marker.lookAt(new THREE.Vector3(0, 1, 0).add(this.marker.position))
                        },
                        n.prototype.findClosestMidtpointPanoTo = function (t) {
                            (new THREE.Vector3).addVectors(this.position, t.position).divideScalar(2);
                            return this.model.panos.find([n.filters.notIn([this,
                                t])], [
                                n.sortFunctions.distanceToPoint(point)
                            ])
                        },
                        n.prototype.loadCube = function (t, e, o, n) {
                            n || (this.emit('loading', t), this.model.emit('loading', this), n = 0);
                            var i = this.getCubemapUrls(t);
                            $.when(this.loadCubeImage(i[0]), this.loadCubeImage(i[1]), this.loadCubeImage(i[2]), this.loadCubeImage(i[3]), this.loadCubeImage(i[4]), this.loadCubeImage(i[5])).done(function (o, n, i, r, a, s) {
                                this.skybox[t] = [
                                    o,
                                    n,
                                    i,
                                    r,
                                    a,
                                    s
                                ],
                                'high' !== t && this.skybox.high || (this.skybox.image = this.skybox[t], this.skybox.low = null),
                                    this.skybox.needsUpdate = !0,
                                    this.emit('load', t),
                                    this.model.emit('load', this),
                                e && e()
                            }.bind(this)).fail(function () {
                                n < this.maxLoadRetries ? (c.warn('Downloading cubemap for pano', this.id, 'failed, retrying after 1s wait (retry', (n + 1).toString() + ')'), setTimeout(function () {
                                    this.loadCube(t, e, o, n + 1)
                                }.bind(this), 1000))  : (c.error('Downloading cubemap for pano', this.id, 'failed, giving up after', n.toString(), 'retries'), this.failedLoadingAt = Date.now(), o && o())
                            }.bind(this))
                        },
                        n.prototype.loadCubeImage = function (t) {
                            var e = $.Deferred(),
                                o = new Image;
                            return o.onerror = function () {
                                e.reject()
                            },
                                o.onload = function () {
                                    e.resolve(o)
                                },
                                o.crossOrigin = THREE.ImageUtils.crossOrigin,
                                o.src = t,
                                e
                        },
                        n.prototype.getCubemapUrls = function (t, e) {
                            return [2,
                                4,
                                0,
                                5,
                                1,
                                3].map(function (e, o) {
                                    return this.model.urls.get('pan/' + t + '/' + this.id + '_skybox' + e + '.jpg')
                                }.bind(this))
                        },
                        n.prototype.isLoaded = function (t) {
                            return this.skybox.high ? !0 : t in this.skybox
                        },
                        n.raycastsSkipped = 0,
                        n.raycastsDone = 0,
                        n.prototype.findNeighourPanos = function () {
                            return this.model.panos.setNeighbour(this.id, this.id, !1),
                                this.model.panos.forEach(function (t) {
                                    if (t !== this && (!this.model.panos.neighbourMap[this.id] || void 0 === this.model.panos.neighbourMap[this.id][t.id])) {
                                        var e = this.position.distanceTo(t.position);
                                        if (e > r.panoramaNeighbourMaxDistance) return this.model.panos.setNeighbour(this, t, !1),
                                            void n.raycastsSkipped++;
                                        var o = t.position.clone().sub(this.position).normalize(),
                                            i = new THREE.Raycaster(this.position, o.clone(), 0, e),
                                            a = i.intersectObjects(this.model.colliders);
                                        n.raycastsDone++,
                                            this.model.panos.setNeighbour(this, t, 0 === a.length),
                                        r.showNeighbourRaycasts && this.floor.model.add(a.length ? new THREE.ArrowHelper(o, this.position, a[0].distance, 16711680)  : new THREE.ArrowHelper(o, this.position, e, 16777215, 0, 0))
                                    }
                                }.bind(this)),
                                this.model.panos.neighbourMap[this.id]
                        },
                        n.prototype.worldPosition = function () {
                            return this.position
                        },
                        n.prototype.addTextSprite = function (t, e) {
                            this.removeTextSprite();
                            var o = document.createElement('canvas'),
                                n = o.getContext('2d');
                            o.width = 256,
                                o.height = 256;
                            var i = 'Arial',
                                r = 60;
                            n.font = 'bold ' + r + 'px ' + i,
                                n.fillStyle = 'white';
                            var a = n.measureText(t).width;
                            n.fillText(t, (o.width - a) / 2, (o.height + r) / 2);
                            var s = new THREE.Texture(o);
                            s.needsUpdate = !0;
                            var l = new THREE.SpriteMaterial({
                                map: s,
                                color: e || 16428055
                            });
                            this.text3d = new THREE.Sprite(l),
                                this.text3d.position.copy(this.mesh.position),
                                this.floor.add(this.text3d)
                        },
                        n.prototype.removeTextSprite = function () {
                            this.text3d && (this.floor.remove(this.text3d), this.text3d = null)
                        },
                        n.filters = {
                            inDirection: function (t, e, o) {
                                return function (n) {
                                    var i = n.position.clone().sub(t).normalize();
                                    return i.dot(e) > o
                                }
                            },
                            inFloorDirection: function (t, e, o) {
                                return function (n) {
                                    var i = n.floorPosition.clone().sub(t).normalize();
                                    return i.dot(e) > o
                                }
                            },
                            inPanoDirection: function (t, e, o) {
                                return o = r.navigation.panoScores ? r.navigation.filterStrictness : o,
                                    function (n) {
                                        var i = n.floorPosition.clone().sub(t).normalize(),
                                            r = n.position.clone().sub(t).normalize();
                                        return i.dot(e) > o || r.dot(e) > o
                                    }
                            },
                            atFloor: function (t) {
                                return function (e) {
                                    return t ? e.floor === t : !0
                                }
                            },
                            not: function (t) {
                                return function (e) {
                                    return e != t
                                }
                            },
                            notIn: function (t) {
                                return function (e) {
                                    return - 1 === t.indexOf(e)
                                }
                            },
                            isLoaded: function () {
                                return function (t) {
                                    return t.isLoaded()
                                }
                            },
                            isNotLoaded: function () {
                                return function (t) {
                                    return !t.isLoaded()
                                }
                            },
                            isCloseEnoughTo: function (t, e) {
                                return function (o) {
                                    return t.distanceTo(o.floorPosition) < e
                                }
                            },
                            hasMinimumHeightDifferenceTo: function (t, e) {
                                return function (o) {
                                    return Math.abs(o.position.y - t.y) > e
                                }
                            },
                            isNotBehindNormal: function (t, e) {
                                var o = new THREE.Vector3;
                                return e = e.clone(),
                                    function (n) {
                                        var i = o.copy(n.position).sub(t).normalize();
                                        return i.dot(e) > 0
                                    }
                            },
                            isNeighbourPanoTo: function (t) {
                                return function (e) {
                                    return t && t.neighbourPanos ? !!t.neighbourPanos[e.id] : !0
                                }
                            },
                            isNeighbourOfNeighbourTo: function (t) {
                                return function (e) {
                                    return t.neighbourPanos[e.id] ? !0 : t.getNeighbourList().some(function (t) {
                                        return t.neighbourPanos[e.id]
                                    })
                                }
                            },
                            isNotRecentlyFailed: function (t) {
                                return function (e) {
                                    return Date.now() - e.failedLoadingAt > t
                                }
                            },
                            isOnVisibleFloor: function () {
                                return function (t) {
                                    return !t.floor.hidden
                                }
                            }
                        },
                        n.sortFunctions = {
                            distanceToPoint: function (t) {
                                return function (e, o) {
                                    return e.position.distanceTo(t) - o.position.distanceTo(t)
                                }
                            },
                            floorDistanceToPoint: function (t) {
                                return function (e, o) {
                                    return e.floorPosition.distanceTo(t) - o.floorPosition.distanceTo(t)
                                }
                            },
                            choose: function (t) {
                                return function (e, o) {
                                    return t.id === e.id ? - 1 : t.id === o.id ? 1 : 0
                                }
                            }
                        },
                        n.scoreFunctions = {
                            distance: function (t) {
                                return function (e) {
                                    return t ? t.position.distanceTo(e.position) * r.navigation.distanceFactor : 0
                                }
                            },
                            distanceSquared: function (t) {
                                return function (e) {
                                    return t ? t.position.distanceToSquared(e.position) * r.navigation.distanceFactor : 0
                                }
                            },
                            direction: function (t, e) {
                                return function (o) {
                                    var n = o.position.clone().sub(t).normalize();
                                    return n.dot(e) * r.navigation.directionFactor
                                }
                            },
                            angle: function (t, e) {
                                return function (o) {
                                    var n = o.position.clone().sub(t).normalize();
                                    return n.angleTo(e) * r.navigation.angleFactor
                                }
                            },
                            inFieldOfView: function (t, e) {
                                return function (o) {
                                    var n = o.position.clone().sub(t).normalize();
                                    return n.dot(e) > 0.75 ? 10 : - 1
                                }
                            },
                            penalizeHeightDifferenceUnder: function (t, e) {
                                return function (o) {
                                    return t.y - o.position.y < e ? - 20 : 0
                                }
                            }
                        },
                        e.exports = n
                }).call(this, '/js/objects/Panorama.js')
            },
            {
                '../enum/Viewmode': 11,
                '../settings': 38,
                '../util/common': 45,
                '../util/lerp': 47,
                '../util/logger': 48,
                '../util/transitions': 51,
                events: 56
            }
        ],
        33: [
            function (t, e, o) {
                'use strict';
                function n(t) {
                    var e = THREE.UniformsUtils.clone(s.waypoint.uniforms);
                    e.map.value = THREE.ImageUtils.loadTexture('/resources/matterport/images/reticule-256x256.png'),
                        e.opacity.value = 0,
                        e.color.value.set(i.reticuleColor),
                        THREE.Mesh.call(this, new THREE.PlaneBufferGeometry(0.4, 0.4, 1, 1), new THREE.ShaderMaterial({
                            side: THREE.DoubleSide,
                            depthWrite: !1,
                            depthTest: !1,
                            transparent: !0,
                            vertexShader: s.waypoint.vertexShader,
                            fragmentShader: s.waypoint.fragmentShader,
                            uniforms: e,
                            name: 'waypoint',
                            opacity: 0
                        })),
                        this.player = t,
                        this.direction = new THREE.Vector3,
                        this.hidden = !0,
                        this.mouseLastMoveTime = Date.now()
                }
                var i = t('../settings'),
                    r = t('../util/transitions'),
                    a = t('../util/lerp'),
                    s = t('../shaders');
                n.prototype = Object.create(THREE.Mesh.prototype),
                    n.prototype.move = function (t, e, o) {
                        this.hidden = o,
                            this.mouseLastMoveTime = Date.now()
                    },
                    n.prototype.hide = function () {
                        this.hidden || (this.hidden = !0, r.start(a.property(this.material.uniforms.opacity, 'value', 0), i.reticuleOpacityTransitionTime))
                    },
                    n.prototype.show = function () {
                        this.hidden = !1,
                        this.material.opacity <= 0 && r.start(a.property(this.material.uniforms.opacity, 'value', i[this.player.mode].reticuleOpacity), i.reticuleOpacityTransitionTime)
                    },
                    n.prototype.update = function () {
                        Date.now() - this.mouseLastMoveTime > i.hideReticuleTimeout && !this.hidden && this.hide()
                    },
                    n.prototype.updatePosition = function (t, e) {
                        if (!this.hidden) {
                            if (!e) return this.hide();
                            var o = e.point,
                                n = t.distanceTo(o),
                                i = 1 + 0.01 * n;
                            1 > n && (i -= 1 - n),
                                this.show(),
                                this.scale.set(i, i, i),
                                this.direction = this.direction.multiplyScalar(0.8),
                                this.direction.add(e.face.normal.clone().multiplyScalar(0.2)),
                                this.position.copy(o).add(e.face.normal.clone().multiplyScalar(0.01)),
                                this.lookAt(this.position.clone().add(this.direction))
                        }
                    },
                    e.exports = n
            },
            {
                '../settings': 38,
                '../shaders': 39,
                '../util/lerp': 47,
                '../util/transitions': 51
            }
        ],
        34: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t) {
                        this.obj3d = null;
                        var e = 'ribbon.png';
                        'chevron' === s.path.style && (e = 'pathTile.png'),
                            this.texture = this.loadTileTexture('/resources/images/' + e),
                            this.endTex = this.loadTileTexture('/resources/images/End.png'),
                            this.startTex = this.loadTileTexture('/resources/images/Start.png'),
                            this.nodes = [
                            ],
                            this.nodeColors = [
                            ],
                            this.floorPathPoints = null,
                            this.camPathPoints = null,
                            this.floorPathDistance = 0,
                            this.floorCurvePoints = null,
                            this.floorCurveColors = null,
                            this.camCurvePoints = null,
                            this.warpDestination = null,
                            this.wPano = null,
                            this.warpPathPoints = null,
                            this.warpPathLengths = [
                                0
                            ],
                            this.warpLength = 0,
                            this.closeWarpDistance = 4,
                            this.player = t,
                            this.createCpm(this.player.scene),
                            this.bunnyObj = new THREE.AxisHelper(0.1),
                            this.bunnyObj.visible = s.warp.showBunny,
                            this.player.scene.add(this.bunnyObj),
                            this.UP = new THREE.Vector3(0, 1, 0),
                            this.trans = [
                            ],
                            this.pauseFunc = null,
                            this.longestStep = 0,
                            this.transType = null,
                            this.canSeePath = !1,
                            this.burnsDir = 1,
                            this.tourPlaying = !1,
                            this.pendingHalt = !1,
                            this.hasBeenIndoors = !1,
                            this.updateDefaultsFromModelData(),
                            this.unseenHero = !0
                    }
                    var i = t('../util/logger'),
                        r = t('../enum/Viewmode'),
                        a = t('../enum/WarpStyle'),
                        s = t('../settings'),
                        l = t('../util/math'),
                        h = t('../util/lerp'),
                        c = t('../util/easing'),
                        u = t('../util/transitions'),
                        p = t('../effects'),
                        d = t('../shaders'),
                        m = t('../gui/gui'),
                        f = new i(o);
                    n.prototype.updateDefaultsFromModelData = function () {
                        var t = this.player.model.data;
                        this.defaultWarpType = t.hasOwnProperty('player_options') && t.player_options && t.player_options.fast_transitions === !1 ? a.STD : s.path.typ
                    },
                        n.prototype.pointPathDistance = function (t) {
                            for (var e = 0, o = 1; o < t.length; o += 1) e += t[o - 1].distanceTo(t[o]);
                            return e
                        },
                        n.prototype.pointPathLengths = function (t) {
                            for (var e = [
                                0
                            ], o = 1; o < t.length; o += 1) e.push(e[o - 1] + t[o - 1].distanceTo(t[o]));
                            return e
                        },
                        n.prototype.interpAlongPath = function (t, e, o) {
                            var n,
                                i = new THREE.Vector3,
                                r = e[e.length - 1];
                            if (1 > o) {
                                n = o * r;
                                for (var a = 1; a < e.length; a += 1) if (e[a] > n) {
                                    var s = (n - e[a - 1]) / (e[a] - e[a - 1]);
                                    return i.copy(t[a]),
                                        i.sub(t[a - 1]),
                                        i.multiplyScalar(s),
                                        i.add(t[a - 1]),
                                        i
                                }
                            } else i.copy(t[t.length - 1]);
                            return i
                        },
                        n.prototype.pathHeight = function () {
                            return this.player.mode !== r.FLOORPLAN ? s.path.height : s.path.outsideHeight
                        },
                        n.prototype.createCpm = function (t) {
                            this.currentPanoMarker = this.makeWaypointObj(this.endTex, 'Current'),
                                this.currentPanoMarker.material.uniforms.opacity.value = 0,
                                this.placeCpm(),
                                t.add(this.currentPanoMarker)
                        },
                        n.prototype.placeCpm = function () {
                            this.hasBeenIndoors && this.player.currentPano ? (this.currentPanoMarker.parent != this.player.currentPano.floor && (this.currentPanoMarker.parent && this.currentPanoMarker.parent.remove(this.currentPanoMarker), this.player.currentPano.floor.add(this.currentPanoMarker)), this.currentPanoMarker.position.copy(this.player.currentPano.floorPosition).sub(this.player.model.position), this.currentPanoMarker.position.y += this.pathHeight())  : this.popOutCpm()
                        },
                        n.prototype.fadeInCpm = function (t) {
                            this.hasBeenIndoors && u.start(h.property(this.currentPanoMarker.material.uniforms.opacity, 'value', 1), t)
                        },
                        n.prototype.fadeOutCpm = function (t) {
                            u.start(h.property(this.currentPanoMarker.material.uniforms.opacity, 'value', 0), t)
                        },
                        n.prototype.popInCpm = function () {
                            this.hasBeenIndoors && this.fadeInCpm(2)
                        },
                        n.prototype.popOutCpm = function () {
                            this.fadeOutCpm(2)
                        },
                        n.prototype.brushPrefs = {
                            linewidth: 7,
                            strokeWidth: 15,
                            cvSegments: 48,
                            paveStep: 0.1,
                            paveWidth: 0.2,
                            lookBlendDist: 3,
                            maxTurn: THREE.Math.degToRad(2)
                        },
                        n.prototype.panoPathDistance = function (t) {
                            var e = this.player.model.panos;
                            if (!t || t.length < 2) return 0;
                            for (var o = [
                            ], n = 0; n < t.length; n += 1) o.push(e.dict[t[n]].floorPosition);
                            return this.pointPathDistance(o)
                        },
                        n.prototype.loadTileTexture = function (t) {
                            return THREE.ImageUtils.loadTexture(t, THREE.UVMapping, function (e) {
                                e.wrapS = THREE.RepeatWrapping,
                                    e.wrapT = THREE.RepeatWrapping,
                                    e.needsUpdate = !0,
                                    f.debug('path texture "' + t + '" is ready')
                            }, function () {
                                f.error('path texture "' + t + '" failed')
                            })
                        },
                        n.prototype.selectWarpLocation = function (t) {
                            var e = this.player.model.heroLocations.length;
                            if (1 > e) return f.warn('no hero locations in this model'),
                                !1;
                            if (null !== this.warpDestination && 2 > e) return f.info('only one hero location is available'),
                                this.warpDestination = this.player.model.heroLocations[0],
                                !0;
                            var o = this.player.model.heroLocations[t];
                            return void 0 === o ? (f.warn('index ' + t + ' is not a valid warp destination from a list of ' + e), !1)  : (f.debug('' === o.scan_id ? 'New brush/warp destination: "' + o.camera_mode + '" out of ' + e + ' choices.' : 'New brush/warp destination: "' + o.scan_id + '" out of ' + e + ' choices.'), this.warpDestination = o, !0)
                        },
                        n.prototype.lookupWarpPano = function () {
                            if (null === this.warpDestination) return f.warn('lookupWarpPano() fail, no destination'),
                                !1;
                            var t = this.warpDestination.scan_id || this.warpDestination.id;
                            return this.wPano = this.player.model.panos.dict[t],
                                void 0 === this.wPano ? (this.wPano = null, '' !== t && f.debug('unable to find pano "' + t + '"'), !1)  : !0
                        },
                        n.prototype.determinePathVisibility = function () {
                            return this.canSeePath = !1,
                                this.canSeePath = this.canSeePath || this.defaultWarpType === a.STD,
                                this.canSeePath = this.canSeePath || s.path.alwaysShow,
                                this.canSeePath
                        },
                        n.prototype.brushToWarpPano = function () {
                            return this.discardPath(),
                                this.lookupWarpPano() ? (this.warpDestination.camera_mode !== r.PANORAMA && f.warn('Can only brush from pano to pano'), this.wPano ? this.player.currentPano ? this.wPano ? void (this.player.currentPano.id === this.wPano.id ? f.debug('Already at destination pano')  : (this.findShortestPath(), f.debug('Brushing from "' + this.player.currentPano.id + '" to "' + this.wPano.id + '" (' + (this.nodes ? this.nodes.length : 0) + ')'), void 0 === this.nodes || null === this.nodes || this.nodes.length < 1 ? (f.info('No "walkable" route, using slide-style transition'), this.drawPathNothing(), this.transType = a.BLACK)  : this.determinePathVisibility() ? 'none' === s.path.style ? this.drawPathNothing()  : 'chevron' === s.path.style ? this.drawPathPavement()  : this.drawPathRibbon()  : this.drawPathNothing(), this.addHint()))  : void f.info('No wPano, visibility undefined')  : void f.debug('No current pano, visibility undefined')  : void f.info('No brush'))  : void 0
                        },
                        n.prototype.findShortestPath = function () {
                            this.nodes = this.player.model.panos.path_graph.findShortestPath(this.player.currentPano.id, this.wPano.id)
                        },
                        n.prototype.makeFloorPathPoints = function () {
                            var t,
                                e,
                                o,
                                n,
                                i,
                                r = 0;
                            this.floorPathPoints = [
                            ],
                                this.camPathPoints = [
                                ],
                                this.nodeColors = [
                                ];
                            var a = this.player.model.panos;
                            t = a.dict[this.nodes[0]],
                                n = t.floor.floorIndex;
                            for (var l = 0; l < this.nodes.length; l += 1) t = a.dict[this.nodes[l]],
                                e = t.floorPosition.clone().sub(this.player.model.position),
                                e.y += this.pathHeight(),
                                this.floorPathPoints.push(e),
                                this.camPathPoints.push(t.position.clone()),
                                o = t.floor.floorIndex,
                                this.nodeColors.push(o > n ? s.path.colorUp : n > o ? s.path.colorDown : s.path.color),
                            l > 0 && (i = this.camPathPoints[l].distanceTo(this.camPathPoints[l - 1]), i > r && (r = i));
                            return r > this.longestStep && (this.longestStep = r, f.debug('path contains ' + r + ' meter segment')),
                                this.floorPathPoints
                        },
                        n.prototype.makeFloorCurvePoints = function () {
                            var t = this.player.mode === r.PANORAMA ? s.path.waypointIndoorRadius : s.path.waypointRadius;
                            this.floorPathDistance = this.pointPathDistance(this.floorPathPoints) - 2 * t;
                            var e = this.floorPathPoints.slice(0),
                                o = e[1].clone().sub(e[0]);
                            o.y = 0,
                                o.normalize().multiplyScalar(t),
                                e[0] = (new THREE.Vector3).copy(e[0]).add(o),
                                o = e[e.length - 2].clone().sub(e[e.length - 1]),
                                o.y = 0,
                                o.normalize().multiplyScalar(t),
                                e[e.length - 1] = (new THREE.Vector3).copy(e[e.length - 1]).add(o);
                            var n = new THREE.SplineCurve3(e),
                                i = Math.floor(this.floorPathDistance / this.brushPrefs.paveStep);
                            i = 4 * Math.floor(i / 4),
                                i = Math.max(4, i),
                                this.floorCurvePoints = n.getSpacedPoints(i),
                                this.floorCurveColors = [
                                ];
                            for (var a, l, h, c = new THREE.Vector3, u = 0; u < this.floorCurvePoints.length; u += 1) {
                                h = 0,
                                    a = this.floorCurvePoints[u].distanceTo(this.floorPathPoints[0]);
                                for (var p = 1; p < this.floorPathPoints.length; p += 1) c.copy(this.floorCurvePoints[u]).sub(this.floorPathPoints[p]),
                                    c.y *= 4,
                                    l = c.length(),
                                a > l && (h = p);
                                this.floorCurveColors.push(this.nodeColors[h])
                            }
                            return this.floorCurvePoints
                        },
                        n.prototype.makeCameraCurvePoints = function () {
                            var t = this.pointPathDistance(this.camPathPoints),
                                e = new THREE.SplineCurve3(this.camPathPoints);
                            return this.camCurvePoints = e.getSpacedPoints(Math.max(2, Math.floor(t / this.brushPrefs.paveStep))),
                                this.camCurvePoints
                        },
                        n.prototype.chooseWarpPath = function (t) {
                            var e,
                                o,
                                n,
                                i = this.player.cameras[r.PANORAMA];
                            if (this.player.currentPano === this.wPano || !t) return this.warpPathPoints = null,
                                this.warpLength = 0,
                                !1;
                            this.findShortestPath(),
                                void 0 === this.nodes || null === this.nodes || this.nodes.length < 1 ? (f.debug('warp path to unreachable node'), e = this.wPano.position.clone().sub(i.position), o = e.clone().negate(), e.multiplyScalar(0.15).add(i.position), o.multiplyScalar(0.15).add(this.wPano.position), e.y = i.position.y, o.y = this.wPano.position.y, n = new THREE.CubicBezierCurve3(i.position.clone(), e, o, this.wPano.position.clone()), this.warpPathPoints = n.getSpacedPoints(this.brushPrefs.cvSegments))  : (f.debug('follow warp path (path distance was ' + this.nodes.length + ' nodes, ' + this.floorPathDistance + ')'), this.makeCameraCurvePoints(), this.warpPathPoints = this.camCurvePoints.slice(0)),
                                this.warpLength = 0,
                                this.warpPathLengths = [
                                    0
                                ];
                            for (var a = new THREE.Vector3, s = new THREE.Vector3, l = 1; l < this.warpPathPoints.length; l += 1) a.copy(this.warpPathPoints[l - 1]),
                                a.y *= 4,
                                s.copy(this.warpPathPoints[l]),
                                s.y *= 4,
                                this.warpLength += a.distanceTo(s),
                                this.warpPathLengths[l] = this.warpLength;
                            return !0
                        },
                        n.prototype.drawPathNothing = function () {
                            this.discardPath(),
                                this.obj3d = new THREE.Object3D,
                                this.player.currentPano.floor.add(this.obj3d),
                            void 0 !== this.nodes && null !== this.nodes && this.nodes.length > 0 && (this.makeFloorPathPoints(), this.makeFloorCurvePoints())
                        },
                        n.prototype.drawPathRibbon = function () {
                            this.discardPath(),
                                this.obj3d = new THREE.Object3D,
                                this.bunnyObj.visible = s.warp.showBunny;
                            var t = 0.6 * s.path.ribbonWidth * 0.5;
                            this.makeFloorPathPoints(),
                                this.makeFloorCurvePoints();
                            for (var e = new THREE.Vector3, o = new THREE.Vector3(0, this.pathHeight(), 0), n = new THREE.Geometry, i = 0; i < this.floorCurvePoints.length; i += 1) {
                                var a = (new THREE.Vector3).copy(this.floorCurvePoints[i]);
                                0 === i ? a.sub(this.floorCurvePoints[i + 1])  : a.sub(this.floorCurvePoints[i - 1]).negate(),
                                    a.normalize(),
                                    e.crossVectors(a, this.UP),
                                    e.multiplyScalar(t);
                                var l = (new THREE.Vector3).copy(this.floorCurvePoints[i]).add(o);
                                l.sub(e),
                                    n.vertices.push(l),
                                    l = (new THREE.Vector3).copy(this.floorCurvePoints[i]).add(o),
                                    l.add(e),
                                    n.vertices.push(l)
                            }
                            var h,
                                c = 0;
                            for (i = 0; i < this.floorCurvePoints.length - 1; i += 1) {
                                var u = 2 * i,
                                    p = c;
                                c += this.floorCurvePoints[i + 1].distanceTo(this.floorCurvePoints[i]);
                                var m = c,
                                    f = this.floorCurveColors[i],
                                    g = this.floorCurveColors[i + 1];
                                h = new THREE.Face3(u, u + 1, u + 2),
                                    h.vertexColors = [
                                        new THREE.Color(f),
                                        new THREE.Color(f),
                                        new THREE.Color(g)
                                    ],
                                    n.faces.push(h),
                                    n.faceVertexUvs[0].push([new THREE.Vector2(0, p),
                                        new THREE.Vector2(1, p),
                                        new THREE.Vector2(0, m)]),
                                    h = new THREE.Face3(u + 2, u + 1, u + 3),
                                    h.vertexColors = [
                                        new THREE.Color(g),
                                        new THREE.Color(f),
                                        new THREE.Color(g)
                                    ],
                                    n.faces.push(h),
                                    n.faceVertexUvs[0].push([new THREE.Vector2(0, m),
                                        new THREE.Vector2(1, p),
                                        new THREE.Vector2(1, m)])
                            }
                            var y,
                                v;
                            this.player.mode === r.PANORAMA ? (v = THREE.UniformsUtils.clone(d.ribbon.uniforms), v.map.value = this.texture, v.opacity.value = 0, v.color.value.set(s.path.color), y = new THREE.ShaderMaterial({
                                side: THREE.DoubleSide,
                                depthWrite: !1,
                                transparent: !0,
                                vertexShader: d.ribbon.vertexShader,
                                fragmentShader: d.ribbon.fragmentShader,
                                uniforms: v,
                                name: 'ribbonT',
                                opacity: 0
                            }))  : y = new THREE.MeshBasicMaterial({
                                color: 16777215,
                                side: THREE.DoubleSide,
                                name: 'ribbonOut',
                                vertexColors: THREE.VertexColors
                            });
                            var b = new THREE.Mesh(n, y);
                            b.name = 'ribbon',
                                this.obj3d.add(b),
                                this.player.currentPano.floor.add(this.obj3d),
                            this.player.mode === r.PANORAMA && (b.renderOrder = 100)
                        },
                        n.prototype.drawPathPavement = function () {
                            this.discardPath(),
                                this.obj3d = new THREE.Object3D;
                            var t = 0.25;
                            this.makeFloorPathPoints(),
                                this.makeFloorCurvePoints();
                            for (var e, o = new THREE.Vector3, n = new THREE.Geometry, i = new THREE.Vector3, a = 0; a < this.floorCurvePoints.length; a += 1) i.copy(this.floorCurvePoints[a]),
                                0 === a ? i.sub(this.floorCurvePoints[a + 1]).negate()  : i.sub(this.floorCurvePoints[a - 1]),
                                i.normalize(),
                                o.crossVectors(i, this.UP),
                                o.multiplyScalar(this.brushPrefs.paveWidth),
                                e = (new THREE.Vector3).copy(this.floorCurvePoints[a]),
                                e.sub(o),
                                n.vertices.push(e),
                                n.vertices.push((new THREE.Vector3).copy(this.floorCurvePoints[a])),
                                e = (new THREE.Vector3).copy(this.floorCurvePoints[a]),
                                e.add(o),
                                n.vertices.push(e);
                            var l,
                                h,
                                c;
                            for (a = 0; a < this.floorCurvePoints.length - 1; a += 1) l = 3 * a + 1,
                                h = a * t,
                                c = h + t,
                                n.faces.push(new THREE.Face3(l - 1, l, l + 3)),
                                n.faceVertexUvs[0].push([new THREE.Vector2(0, h),
                                    new THREE.Vector2(0.5, h),
                                    new THREE.Vector2(0.5, c)]),
                                n.faces.push(new THREE.Face3(l + 3, l + 2, l - 1)),
                                n.faceVertexUvs[0].push([new THREE.Vector2(0.5, c),
                                    new THREE.Vector2(0, c),
                                    new THREE.Vector2(0, h)]),
                                n.faces.push(new THREE.Face3(l + 3, l, l + 1)),
                                n.faceVertexUvs[0].push([new THREE.Vector2(0.5, c),
                                    new THREE.Vector2(0.5, h),
                                    new THREE.Vector2(1, h)]),
                                n.faces.push(new THREE.Face3(l + 3, l + 1, l + 4)),
                                n.faceVertexUvs[0].push([new THREE.Vector2(0.5, c),
                                    new THREE.Vector2(1, h),
                                    new THREE.Vector2(1, c)]);
                            var u = new THREE.MeshBasicMaterial(this.player.mode === r.PANORAMA ? {
                                color: s.path.color,
                                side: THREE.DoubleSide,
                                transparent: !0,
                                depthWrite: !1,
                                opacity: 0,
                                name: 'paveT',
                                map: this.texture
                            }
                                : {
                                color: s.path.color,
                                side: THREE.DoubleSide,
                                transparent: !0,
                                depthWrite: !1,
                                opacity: 1,
                                name: 'paveO',
                                map: this.texture
                            });
                            this.obj3d.add(new THREE.Mesh(n, u)),
                                this.player.currentPano.floor.add(this.obj3d)
                        },
                        n.prototype.hintPrefs = {
                            rad: 0.18,
                            width: 0.0125,
                            depth: 0.0625,
                            setBack: - 0.04,
                            markRad: 0.25,
                            markInnerRad: 0.16
                        },
                        n.prototype.makeWaypointObj = function (t, e) {
                            var o = new THREE.Geometry,
                                n = this.player.mode === r.PANORAMA ? s.path.waypointIndoorRadius : s.path.waypointRadius,
                                i = this.pathHeight();
                            o.vertices.push(new THREE.Vector3( - n, i, n), new THREE.Vector3( - n, i, - n), new THREE.Vector3(n, i, - n), new THREE.Vector3(n, i, n)),
                                o.faces.push(new THREE.Face3(0, 1, 2), new THREE.Face3(2, 3, 0)),
                                o.faceVertexUvs[0].push([new THREE.Vector2(0, 0),
                                    new THREE.Vector2(1, 0),
                                    new THREE.Vector2(1, 1)]),
                                o.faceVertexUvs[0].push([new THREE.Vector2(1, 1),
                                    new THREE.Vector2(0, 1),
                                    new THREE.Vector2(0, 0)]);
                            var a = THREE.UniformsUtils.clone(d.waypoint.uniforms);
                            a.map.value = t,
                                a.opacity.value = 0,
                                a.color.value.set(s.path.color);
                            var l = {
                                side: THREE.DoubleSide,
                                depthWrite: !1,
                                transparent: !0,
                                vertexShader: d.waypoint.vertexShader,
                                fragmentShader: d.waypoint.fragmentShader,
                                uniforms: a,
                                name: 'waypoint',
                                opacity: 0
                            };
                            this.player.mode !== r.PANORAMA && (l.depthTest = !1, l.name = 'wayPtOut');
                            var h = new THREE.ShaderMaterial(l),
                                c = new THREE.Mesh(o, h);
                            return c.name = e,
                                c
                        },
                        n.prototype.waypoints = function () {
                            var t = this.player.mode === r.DOLLHOUSE || this.player.mode === r.FLOORPLAN,
                                e = s.path.mapGuides && !this.tourPlaying && t;
                            if (e = e || this.transType === a.STD, this.canSeePath || e) {
                                var o = this.floorPathPoints[this.floorPathPoints.length - 1];
                                if (t) {
                                    var n = this.floorPathPoints[0],
                                        i = this.floorCurvePoints[0],
                                        l = this.floorCurvePoints[1],
                                        h = (new THREE.Vector3).copy(l).sub(i);
                                    h.y = 0,
                                        h.normalize();
                                    var c = Math.acos(h.x),
                                        p = this.makeWaypointObj(this.startTex, 'Start');
                                    p.rotateOnAxis(new THREE.Vector3(0, 1, 0), c),
                                        p.position.copy(n),
                                        this.obj3d.add(p)
                                }
                                if (void 0 === this.nodes || null === this.nodes || this.nodes.length < 1) return void f.debug('no tour route');
                                var d = this.makeWaypointObj(this.endTex, 'End'),
                                    m = this.player.model.panos.dict[this.nodes[0]].floor.floorIndex,
                                    g = this.player.model.panos.dict[this.nodes[this.nodes.length - 1]].floor.floorIndex;
                                e && s.path.pulseMarkers && u.start(function (t, e) {
                                    if (!this.obj3d) return !0;
                                    var o = Math.pow(Math.abs(0.5 - t), 2);
                                    d.material.uniforms.pulse.value = 1 - 0.7 * o;
                                    var n = 1.5 - 0.5 * o;
                                    d.scale.set(n, 1, n)
                                }.bind(this), - s.path.waypointPulse),
                                    g > m ? d.material.uniforms.color.value.set(s.path.colorUp)  : m > g && d.material.uniforms.color.value.set(s.path.colorDown),
                                    d.position.copy(o),
                                    this.obj3d.add(d)
                            }
                        },
                        n.prototype.addHint = function () {
                            return this.obj3d ? (this.waypoints(), this.player.mode !== r.PANORAMA ? void this.appearSlow()  : void this.appearSlow())  : void f.info('no path/hint object')
                        },
                        n.prototype.discardPath = function () {
                            if (this.obj3d) {
                                var t = this.obj3d.parent;
                                t && t.remove(this.obj3d)
                            }
                            this.obj3d = null,
                                this.popInCpm()
                        },
                        n.prototype.discardSlow = function () {
                            if (this.obj3d) {
                                if (this.player.mode !== r.PANORAMA) return void this.discardPath();
                                for (var t, e = this, o = 0, n = function () {
                                    this.discardPath()
                                }.bind(this), i = 0; i < e.obj3d.children.length; i += 1) t = e.obj3d.children[i],
                                void 0 !== t.material && t.material.transparent === !0 && (void 0 !== t.material.uniforms ? u.start(h.property(t.material.uniforms.opacity, 'value', 0), s.path.fadeOutTime, n, 0, c[s.warp.blendEasing])  : u.start(h.property(t.material, 'opacity', 0), s.path.fadeOutTime, n, 0, c[s.warp.blendEasing]), o += 1, n = null);
                                0 === o && this.discardPath(),
                                this.player.mode !== r.PANORAMA && this.fadeInCpm(s.path.fadeInTime - 3)
                            }
                        },
                        n.prototype.appearSlow = function () {
                            var t,
                                e = this;
                            this.fadeOutCpm(s.path.fadeInTime);
                            for (var o = this.player.mode === r.PANORAMA ? s.path.opacity : 1, n = 0; n < e.obj3d.children.length; n += 1) t = e.obj3d.children[n],
                            void 0 !== t.material && t.material.transparent === !0 && (void 0 !== t.material.uniforms ? u.start(h.property(t.material.uniforms.opacity, 'value', o), s.path.fadeInTime, null, 0, c[s.warp.blendEasing])  : u.start(h.property(t.material, 'opacity', o), s.path.fadeInTime, null, 0, c[s.warp.blendEasing]))
                        },
                        n.prototype.update = function () {
                            this.obj3d && this.obj3d.updateMatrixWorld()
                        },
                        n.prototype.waitNextStep = function (t) {
                            var e = new THREE.Euler,
                                o = new THREE.Vector3;
                            if (this.pendingHalt) return f.info('no need to wait'),
                                void (this.pendingHalt = !1);
                            f.debug('Starting wait: ' + (void 0 !== t));
                            var n = function () {
                                    this.player.mode === r.DOLLHOUSE && (this.player.cameras[r.DOLLHOUSE].controls.rotationAcceleration.x = 0),
                                    t && t(),
                                        this.pauseFunc = null
                                }.bind(this),
                                i = function (t, n) {
                                    var i = n || 1000 / 60;
                                    if (s.warp.doBurns) if (this.player.mode === r.PANORAMA) {
                                        var a = this.player.cameras[r.PANORAMA];
                                        e.setFromQuaternion(a.quaternion, s.warp.eOrder);
                                        var l = i * this.burnsDir * THREE.Math.degToRad(s.warp.burnsAngle) / s.warp.tourStepDelay;
                                        e.y += l,
                                            o.set(0, 0, - 1),
                                            o.applyEuler(e),
                                            o.add(a.position),
                                            a.controls.lookAt(o),
                                            a.controls.lookVector.copy(o),
                                            a.lookAt(o)
                                    } else if (this.player.mode === r.DOLLHOUSE) {
                                        var h = this.player.cameras[r.DOLLHOUSE];
                                        h.controls.rotationAcceleration.x = this.burnsDir * Math.min(h.controls.rotationAcceleration.x + 0.05, 0.02)
                                    } else this.player.controls[r.FLOORPLAN].absoluteScale *= 0.9996
                                }.bind(this);
                            this.pauseFunc = u.start(i, s.warp.tourStepDelay, n, 0, c.easeInOutQuad, 'wait')
                        },
                        n.prototype.warpToNonPano = function (t) {
                            return this.pendingHalt ? (f.warn('next mode avoided'), void (this.pendingHalt = !1))  : (this.discardPath(), void (this.warpDestination.camera_mode === r.DOLLHOUSE || this.warpDestination.camera_mode === r.FLOORPLAN ? this.trans = this.player.flyToNewMode(this.warpDestination.camera_mode, {
                                duration: s.warp.outsideTime,
                                warpDest: this.warpDestination,
                                callback: t,
                                force: !0
                            })  : (f.warn('no warp destination!!!'), t && t())))
                        },
                        n.prototype._resetWarpShaderParams = function (t) {
                            this.player.mode === r.PANORAMA && (void 0 !== t.material.uniforms.blackout && (t.material.uniforms.blackout.value = 0), void 0 !== t.material.uniforms.stasis && (t.material.uniforms.stasis.value = 0), void 0 !== t.material.uniforms.modelAlpha && (t.material.uniforms.modelAlpha.value = 0))
                        },
                        n.prototype._clearWarpShading = function () {
                            for (var t = this.player.model.chunks, e = 0; e < t.length; e += 1) this._resetWarpShaderParams(t[e]),
                                t[e].visible = !0;
                            this._resetWarpShaderParams(this.player.model.skybox)
                        },
                        n.prototype._warpStopFlying = function () {
                            this.player.flying = !1,
                                this.placeCpm()
                        },
                        n.prototype._wrapupTravelOnlyBits = function () {
                            this._warpStopFlying(),
                                this.player.currentPano.exit(),
                                this.wPano.enter(),
                                this.player.currentPano = this.wPano,
                                this.player.spider.draw(),
                                this.placeCpm(),
                                this.trans = [
                                ]
                        },
                        n.prototype._wrapupTravel = function (t) {
                            this._wrapupTravelOnlyBits(),
                                this.warpCameraAim(t)
                        },
                        n.prototype._wrapupWarpShading = function (t) {
                            this._clearWarpShading(),
                                this._wrapupTravel(t)
                        },
                        n.prototype.wrapupWarpShadingOnly = function (t) {
                            this._clearWarpShading(),
                                this.player.flying = !1,
                                this._wrapupTravelOnlyBits(),
                                this.transType = null;
                            for (var e = this.player.model.panos, o = 0; o < e.length; o += 1) e.list[o].marker.material.opacity = s.panorama.markerOpacity;
                            t && t()
                        },
                        n.prototype._warpCameraAim = function (t, e, o) {
                            var n = this.warpDestination.quaternion;
                            this.unseenHero && (this.player.model.heroImage ? n = l.convertWorkshopQuaternion(this.player.model.heroImage.metadata.camera_quaternion)  : f.info('Estimating view direction'), this.unseenHero = !1);
                            var i = this.player.cameras[r.PANORAMA],
                                a = new THREE.Euler(0, 0, 0, s.warp.eOrder).setFromQuaternion(n, s.warp.eOrder),
                                h = (new THREE.Euler).setFromQuaternion(i.quaternion, s.warp.eOrder),
                                p = new THREE.Euler(a.x - h.x, a.y - h.y, a.z - h.z, s.warp.eOrder);
                            p.y = p.y > Math.PI ? p.y -= 2 * Math.PI : p.y < - Math.PI ? p.y += 2 * Math.PI : p.y,
                                this.burnsDir = Math.sign(p.y);
                            var d = new THREE.Euler(0, 0, 0, s.warp.eOrder),
                                m = new THREE.Vector3,
                                g = function (t) {
                                    d.x = h.x + t * p.x,
                                        d.y = h.y + t * p.y,
                                        d.z = h.z + t * p.z,
                                        m.set(0, 0, - 1),
                                        m.applyEuler(d),
                                        m.add(i.position),
                                        i.controls.lookAt(m),
                                        i.controls.lookVector.copy(m),
                                        i.lookAt(m)
                                }.bind(this);
                            return u.start(g, e, o, 0, c[s.warp.movementEasing])
                        },
                        n.prototype._warpBendAim = function (t, e, o) {
                            var n = this.player.cameras[r.PANORAMA],
                                i = new THREE.Euler(0, 0, 0, s.warp.eOrder).setFromQuaternion(this.warpDestination.quaternion, s.warp.eOrder),
                                a = (new THREE.Euler).setFromQuaternion(n.quaternion, s.warp.eOrder),
                                l = new THREE.Euler(i.x - a.x, i.y - a.y, i.z - a.z, s.warp.eOrder);
                            l.y = l.y > Math.PI ? l.y -= 2 * Math.PI : l.y < - Math.PI ? l.y += 2 * Math.PI : l.y;
                            var h = Math.min(THREE.Math.degToRad(s.warp.softBendTilt), Math.abs(l.x));
                            l.x = h * Math.sign(l.x),
                                h = Math.min(THREE.Math.degToRad(Math.max(0, s.warp.softBendAngle)), h),
                                this.burnsDir = Math.sign(l.y),
                                h *= Math.sign(l.y),
                                l.y = h;
                            var p = new THREE.Euler(0, 0, 0, s.warp.eOrder),
                                d = new THREE.Vector3,
                                m = function (t) {
                                    if (0.5 > t) p.x = a.x + t * l.x,
                                        p.y = a.y + t * l.y,
                                        p.z = a.z + t * l.z;
                                    else {
                                        var e = (1 - t) * s.warp.softBendEnd;
                                        p.x = i.x - e * l.x,
                                            p.y = i.y - e * l.y,
                                            p.z = i.z - e * l.z
                                    }
                                    d.set(0, 0, - 1),
                                        d.applyEuler(p),
                                        d.add(n.position),
                                        n.controls.lookAt(d),
                                        n.controls.lookVector.copy(d),
                                        n.lookAt(d)
                                }.bind(this);
                            return u.start(m, e, o, 0, c[s.warp.movementEasing])
                        },
                        n.prototype._warpStepCameraAim = function (t, e, o) {
                            var n = this.player.cameras[r.PANORAMA],
                                i = new THREE.Euler(0, 0, 0, s.warp.eOrder).setFromQuaternion(this.warpDestination.quaternion, s.warp.eOrder),
                                a = (new THREE.Euler).setFromQuaternion(n.quaternion, s.warp.eOrder),
                                l = new THREE.Euler(i.x - a.x, i.y - a.y, i.z - a.z, s.warp.eOrder);
                            l.y = l.y > Math.PI ? l.y -= 2 * Math.PI : l.y < - Math.PI ? l.y += 2 * Math.PI : l.y,
                                this.burnsDir = Math.sign(l.y);
                            var h = new THREE.Euler(0, 0, 0, s.warp.eOrder),
                                p = new THREE.Vector3,
                                d = function (t) {
                                    h.copy(0.5 > t ? a : i),
                                        p.set(0, 0, - 1),
                                        p.applyEuler(h),
                                        p.add(n.position),
                                        n.controls.lookAt(p),
                                        n.controls.lookVector.copy(p),
                                        n.lookAt(p)
                                }.bind(this);
                            return u.start(d, e, o, 0, c[s.warp.movementEasing])
                        },
                        n.prototype.setBurnsDir = function () {
                            var t = this.player.cameras[r.PANORAMA],
                                e = new THREE.Euler(0, 0, 0, s.warp.eOrder).setFromQuaternion(this.warpDestination.quaternion, s.warp.eOrder),
                                o = (new THREE.Euler).setFromQuaternion(t.quaternion, s.warp.eOrder),
                                n = new THREE.Euler(e.x - o.x, e.y - o.y, e.z - o.z, s.warp.eOrder);
                            n.y = n.y > Math.PI ? n.y -= 2 * Math.PI : n.y < - Math.PI ? n.y += 2 * Math.PI : n.y,
                                this.burnsDir = Math.sign(n.y)
                        },
                        n.prototype.stepWarpPath = function (t) {
                            var e = this.player.cameras[r.PANORAMA],
                                o = this.warpPathPoints[0],
                                n = this.wPano.position;
                            if (!this.warpPathPoints) return f.warn('No warpPathPoints? Ouchs'),
                                void e.position.copy(this.wPano.position);
                            if (null !== this.nodes && this.camPathPoints.length > 1) {
                                var i = new THREE.Vector3;
                                0.5 > t ? i.copy(this.camPathPoints[1]).sub(o).normalize().multiplyScalar(s.warp.softPushDist * t).add(o)  : i.copy(this.camPathPoints[this.camPathPoints.length - 2]).sub(n).normalize().multiplyScalar(s.warp.softPushDist * s.warp.softPushEnd * (1 - t)).add(n),
                                    e.position.copy(i)
                            } else e.position.copy(0.5 > t ? o : n)
                        },
                        n.prototype.haltWarp = function (t) {
                            var e,
                                o,
                                n,
                                i = 500000,
                                s = this.player.model.panos,
                                l = this.player.cameras[r.PANORAMA].position,
                                h = new THREE.Vector3,
                                c = this.player,
                                p = this.player.flying,
                                d = this.tourPlaying;
                            if (f.debug('haltWarp() in player mode ' + this.player.mode + ' tourPlay is ' + d + ' flying is ' + p), d) {
                                if (t !== !0 && m.endTour(), p && this.transType !== a.STD || c.mode !== r.PANORAMA) return this.pendingHalt && f.warn('multiple pendingHalt events?'),
                                    void (this.pendingHalt = !0);
                                for (this.tourPlaying = !1, this.player.flying = !1, e = 0; e < this.trans.length; e += 1) u.cancel(this.trans[e]);
                                if (this.trans = [
                                    ], this.pauseFunc) {
                                    var g = this.pauseFunc;
                                    this.pauseFunc = null,
                                        u.cancel(g)
                                }
                                if (this.player.cameras[r.DOLLHOUSE].controls.rotationAcceleration.x = 0, this.pendingHalt) this.pendingHalt = !1;
                                else if (p && d) if (this.transType === a.STD) for (e = 0; e < s.length; e += 1) s.list[e] !== this.player.currentPano && (n = h.copy(s.list[e].position).sub(l).lengthSq(), i > n && (o = s.list[e], i = n));
                                else this.pendingHalt = !0;
                                d && this._clearWarpShading(),
                                    this.discardSlow(),
                                    f.debug('new transitions count: ' + u.countActive()),
                                this.player.mode === r.PANORAMA && p && d && o && this.player.flyToPano(o)
                            }
                        },
                        n.prototype.warpCameraAim = function (t) {
                            var e = s.warp.minWarpTime;
                            if (this.transType === a.BLACK) e = s.warp.teleportTime;
                            else {
                                var o = this.player.cameras[r.PANORAMA],
                                    n = new THREE.Euler(0, 0, 0, s.warp.eOrder).setFromQuaternion(this.warpDestination.quaternion, s.warp.eOrder),
                                    i = (new THREE.Euler).setFromQuaternion(o.quaternion, s.warp.eOrder),
                                    l = new THREE.Euler(n.x - i.x, n.y - i.y, n.z - i.z, s.warp.eOrder);
                                l.y = l.y > Math.PI ? l.y -= 2 * Math.PI : l.y < - Math.PI ? l.y += 2 * Math.PI : l.y;
                                var h = 1000 * Math.abs(l.y) / THREE.Math.degToRad(s.warp.maxTurnPerSec);
                                e = Math.max(e, h)
                            }
                            var c = function () {
                                this._warpStopFlying(),
                                    this.discardSlow(),
                                t && t()
                            }.bind(this);
                            this._warpCameraAim(t, e, c)
                        },
                        n.prototype.warpCommonParameters = function (t, e, o) {
                            this.player.model.skybox.material.uniforms.blackout.value = 0,
                                this.player.model.skybox.material.uniforms.stasis.value = 0;
                            o || c[s.warp.blendEasing];
                            this.trans.push(u.start(h.uniform(this.player.model.skybox, 'progress', 1), t, null, e, c[s.warp.blendEasing], 'skyboxProgress')),
                                this.trans.push(u.start(h.allUniforms(this.player.model.chunks, 'progress', 1), t, null, e, c[s.warp.blendEasing], 'chunkProgress'))
                        },
                        n.prototype.warpTravel_STD = function (t) {
                            var e,
                                o = Math.min(0.1, s.warp.lookAheadDist / this.warpLength),
                                n = this.player.cameras[r.PANORAMA],
                                i = (Math.min(0.25, 3 / this.warpLength), Math.min(0.35, 7 / this.warpLength)),
                                a = new THREE.Euler(0, 0, 0, s.warp.eOrder),
                                l = new THREE.Vector3,
                                d = (new THREE.Euler).setFromQuaternion(n.quaternion, s.warp.eOrder),
                                m = (new THREE.Euler).copy(d),
                                g = n.position.clone(),
                                y = s.warp.minWarpTime;
                            y += this.warpLength * s.warp.timePerMeter,
                            s.warp.flySpeed > 0.01 && (y = 1000 * this.warpLength / s.warp.flySpeed),
                                y += s.warp.moveDelay;
                            var v = s.warp.moveDelay / y,
                                b = function (t) {
                                    var e = i,
                                        o = THREE.Math.smoothstep(t, 0, e) * (1 - THREE.Math.smoothstep(t, 1 - e, 1));
                                    return o
                                };
                            this.warpCommonParameters(y, v, b);
                            var w = function (t) {
                                    return this.warpPathPoints ? void (e = this.interpAlongPath(this.warpPathPoints, this.warpPathLengths, Math.min(t + o, 1)))  : void f.warn('Dumb bunny.')
                                }.bind(this),
                                E = function (t, i) {
                                    if (!this.warpPathPoints) return void f.warn('You make bunny sad.');
                                    var r = this.warpLength * t,
                                        h = THREE.Math.smoothstep(r, 0, this.brushPrefs.lookBlendDist),
                                        c = THREE.Math.smoothstep(r, this.warpLength - this.brushPrefs.lookBlendDist, this.warpLength);
                                    s.warp.matchCam && (h *= 1 - c);
                                    var u = (new THREE.Matrix4).lookAt(g, e, this.UP);
                                    a.setFromRotationMatrix(u, s.warp.eOrder),
                                        d.setFromQuaternion(n.quaternion, s.warp.eOrder);
                                    var p = new THREE.Euler(a.x - d.x, a.y - d.y, a.z - d.z, s.warp.eOrder);
                                    p.y = p.y % (2 * Math.PI),
                                        p.y = p.y > Math.PI ? p.y -= 2 * Math.PI : p.y < - Math.PI ? p.y += 2 * Math.PI : p.y,
                                        a.x = d.x + h * p.x,
                                        a.y = d.y + h * p.y,
                                        a.z = d.z + h * p.z,
                                        p = new THREE.Euler(a.x - m.x, a.y - m.y, a.z - m.z, s.warp.eOrder),
                                        p.y = p.y % (2 * Math.PI),
                                        p.y = p.y > Math.PI ? p.y -= 2 * Math.PI : p.y < - Math.PI ? p.y += 2 * Math.PI : p.y;
                                    var y = THREE.Math.degToRad(s.warp.maxTurnPerSec) * i / 1000;
                                    p.y = Math.sign(p.y) * Math.min(y, Math.abs(p.y)),
                                        m.x = m.x + p.x * s.warp.turnFriction,
                                        m.y = m.y + p.y * s.warp.turnFriction,
                                        m.z = m.z + p.z * s.warp.turnFriction;
                                    var v = e.clone().sub(g).normalize();
                                    this.bunnyObj.position.copy(n.position).add(v),
                                        l.set(0, 0, - 1).applyEuler(m).normalize(),
                                        l.multiplyScalar(8),
                                        l.add(n.position),
                                    t > 1 - o && s.warp.matchCam || (n.controls.lookAt(l), n.controls.lookVector.copy(l), n.lookAt(l))
                                }.bind(this),
                                R = function (t) {
                                    if (!this.warpPathPoints) return f.warn('How did you get in here?'),
                                        void n.position.copy(this.wPano.position);
                                    var e = this.interpAlongPath(this.warpPathPoints, this.warpPathLengths, t);
                                    n.position.copy(e),
                                        g = this.interpAlongPath(this.warpPathPoints, this.warpPathLengths, 0.99 * t)
                                }.bind(this),
                                T = function () {
                                    this._wrapupWarpShading(t)
                                }.bind(this);
                            s.warp.blur > 0 && (p.blurStrength = s.warp.blur, this.trans.push(u.start(p.blur, y, null, v, b, 'blurring'))),
                                this.trans.push(u.start(h.allUniforms(this.player.model.chunks, 'modelAlpha', 1), y, null, v, b, 'modelAlpha')),
                                this.trans.push(u.start(R, y, null, v, c[s.warp.blendEasing], 'followPath')),
                                w(0),
                                this.trans.push(u.start(w, y, null, v, c[s.warp.blendEasing], 'goBunny')),
                                this.trans.push(u.start(E, y, T, 0, c[s.warp.blendEasing], 'lookAtBunny'))
                        },
                        n.prototype.warpTravel_BLACK = function (t) {
                            var e = (this.player.cameras[r.PANORAMA], s.warp.teleportTime);
                            this.warpCommonParameters(e, 0),
                                this.player.model.chunks.forEach(function (t) {
                                    t.material.uniforms.blackout.value = 1
                                }),
                                this.player.model.skybox.material.uniforms.blackout.value = 1,
                                this.trans.push(u.start(function (t) {
                                    for (var e = 2 * Math.abs(0.5 - t) * s.panorama.markerOpacity, o = this.player.model.panos, n = 0; n < o.length; n += 1) o.list[n].marker.material.opacity = e;
                                    this.currentPanoMarker.material.uniforms.opacity.value = 0
                                }.bind(this), e, null, 0, c[s.warp.blendEasing], 'markerOpacities')),
                                this.trans.push(this._warpBendAim(null, e, null));
                            var o = function () {
                                this.wrapupWarpShadingOnly(t)
                            }.bind(this);
                            this.trans.push(u.start(this.stepWarpPath.bind(this), e, o, 0, c[s.warp.blendEasing], 'stepMotion'))
                        },
                        n.prototype.warpCameraTravel = function (t, e) {
                            var o = this.transType;
                            if (this.transType = null, !t) {
                                this.player.flying = !1;
                                var n = function () {
                                    this._wrapupTravel(e),
                                    e && e()
                                }.bind(this);
                                return void this.player.flyToPano(this.wPano, n)
                            }
                            this.trans = [
                            ],
                                o == a.BLACK ? this.warpTravel_BLACK(e)  : this.warpTravel_STD(e)
                        },
                        n.prototype.warpToPano = function (t) {
                            if (this.pendingHalt) return f.info('next step avoided'),
                                void (this.pendingHalt = !1);
                            if (this.player.flying) return void f.warn('Cannot warp when already flying');
                            if (this.transType || (this.transType = this.defaultWarpType), !this.lookupWarpPano()) return this.transType = null,
                                void this.warpToNonPano(t);
                            if (this.player.mode !== r.PANORAMA) return this.transType = null,
                                this.discardSlow(),
                                void this.player.flyToNewMode(r.PANORAMA, {
                                    pano: this.wPano,
                                    duration: s.warp.outsideTime,
                                    warpDest: this.warpDestination,
                                    callback: t,
                                    force: !0
                                });
                            if (this.hasBeenIndoors = !0, !this.wPano) return f.warn('no warp destination'),
                                void (this.transType = null);
                            var e = !(this.player.model.panos.isNeighbour(this.player.currentPano, this.wPano) && this.wPano !== this.player.currentPano && this.wPano.position.distanceTo(this.player.currentPano.position) < s.warp.nearPanoDist),
                                o = this.chooseWarpPath(e);
                            return o && !this.wPano.isLoaded('low') ? (this.player.model.waitForPanoLoad(this.wPano, 'low'), void this.wPano.loadCube('low', function () {
                                this.warpToPano(t)
                            }.bind(this)))  : (this.player.currentPano || (f.warn('Arrived at a very strange spot!'), this.player.currentPano = this.wPano, this.placeCpm(), this.fadeOutCpm(s.path.fadeOutTime), this.player.spider.draw()), this.player.flying = !0, f.debug('Warping to pano ', this.wPano.position), this.player.emit('pano.chosen', this.wPano, this.player.currentPano), this.player.model.setProjectedPanos(this.player.currentPano, this.wPano), void (o ? this.warpCameraTravel(e, t)  : this.warpCameraAim(t)))
                        },
                        e.exports = n
                }).call(this, '/js/objects/ShowPath.js')
            },
            {
                '../effects': 9,
                '../enum/Viewmode': 11,
                '../enum/WarpStyle': 12,
                '../gui/gui': 16,
                '../settings': 38,
                '../shaders': 39,
                '../util/easing': 46,
                '../util/lerp': 47,
                '../util/logger': 48,
                '../util/math': 49,
                '../util/transitions': 51
            }
        ],
        35: [
            function (t, e, o) {
                'use strict';
                function n() {
                    var t = new THREE.SphereGeometry(250, 20, 5),
                        e = t.parameters,
                        o = (new THREE.BufferGeometry).fromGeometry(t),
                        n = new THREE.ShaderMaterial({
                            fragmentShader: i.skysphere.fragmentShader,
                            vertexShader: i.skysphere.vertexShader,
                            uniforms: THREE.UniformsUtils.clone(i.skysphere.uniforms),
                            side: THREE.BackSide
                        });
                    n.uniforms.radius.value = t.parameters.radius,
                        o.parameters = e,
                        THREE.Mesh.call(this, o, n)
                }
                var i = t('../shaders');
                n.prototype = Object.create(THREE.Mesh.prototype),
                    n.prototype.constructor = n,
                    e.exports = n
            },
            {
                '../shaders': 39
            }
        ],
        36: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t, e, o, n, i) {
                        this.model = t,
                            this.currentPano = null,
                            this.scene = n,
                            this.renderer = i,
                            this.domElement = o,
                            this.paused = !1,
                            this.flying = !1,
                            this.camera = e,
                            this.target = new THREE.Vector3,
                            this.mouse = new THREE.Vector3(0, 0, 0.5),
                            this.mouseAtMouseDown = new THREE.Vector2,
                            this.mouseCouldBeClickToMove = !1,
                            this.mouseLastMoveTime = Date.now(),
                            this.mouseDown = !1,
                            this.reticule = new r(this),
                            this.panoMarkers = [
                            ],
                            this.path = new c(this),
                            this.spider = new u(this),
                            this.cameras = {
                                panorama: new w(this),
                                dollhouse: new E(this),
                                floorplan: new R(this)
                            };
                        var h = new a(this, this.cameras.panorama, o, n);
                        h.enabled = !1;
                        var d = new s(this, this.cameras.dollhouse, o, n);
                        d.enabled = !1;
                        var m = new l(this, this.cameras.floorplan, o, n);
                        m.enabled = !1,
                            this.control = d,
                            this.controls = {
                            },
                            this.controls[p.PANORAMA] = h,
                            this.controls[p.DOLLHOUSE] = d,
                            this.controls[p.FLOORPLAN] = m,
                            this.quaternion = new THREE.Quaternion,
                            this.position = new THREE.Vector3(15, 10, 15),
                            this.raycaster = new THREE.Raycaster,
                            this.intersect = null,
                            this.bindEvents(),
                            h.bindEvents(),
                            d.bindEvents(),
                            m.bindEvents();
                        var f = p.DOLLHOUSE;
                        Object.defineProperty(this, 'mode', {
                            get: function () {
                                return f
                            },
                            set: function (t) {
                                this.controls[f] && (this.controls[f].reset(), this.controls[f].enabled = !1),
                                this.controls[t] && (this.controls[t].enabled = !0),
                                    this.control = this.controls[t],
                                    this.emit('mode.changed', f, t),
                                    f = t
                            }.bind(this)
                        })
                    }
                    var i = t('./util/logger'),
                        r = t('./objects/Reticule'),
                        a = t('./controls/PanoramaControls'),
                        s = t('./controls/DollhouseControls'),
                        l = t('./controls/FloorplanControls'),
                        h = t('./objects/Panorama'),
                        c = t('./objects/ShowPath'),
                        u = t('./objects/NSpider'),
                        p = t('./enum/Viewmode'),
                        d = t('./settings'),
                        m = t('./util/common'),
                        f = t('./util/math'),
                        g = t('./util/lerp'),
                        y = t('./util/easing'),
                        v = t('./util/transitions'),
                        b = t('events').EventEmitter,
                        w = t('./cameras/PanoramaCamera'),
                        E = t('./cameras/DollhouseCamera'),
                        R = t('./cameras/FloorplanCamera'),
                        T = (t('./shaders'), new i(o));
                    n.prototype = Object.create(b.prototype),
                        n.prototype.bindEvents = function () {
                            function t(t, e) {
                                this.mouse.x = t / window.innerWidth * 2 - 1,
                                    this.mouse.y = 2 * - (e / window.innerHeight) + 1,
                                    this.mouseAtMouseDown.x = t / window.innerWidth * 2 - 1,
                                    this.mouseAtMouseDown.y = 2 * - (e / window.innerHeight) + 1,
                                    this.mouseCouldBeClickToMove = !0,
                                    this.mouseDown = !0
                            }
                            function e(t, e, o) {
                                this.mouse.x = t / window.innerWidth * 2 - 1,
                                    this.mouse.y = 2 * - (e / window.innerHeight) + 1,
                                this.mouseAtMouseDown.distanceTo(this.mouse) > 0.02 && (this.mouseCouldBeClickToMove = !1),
                                    this.mouseLastMoveTime = Date.now(),
                                    this.reticule.move(t, e, o)
                            }
                            function o(t, e, o) {
                                if (this.mouseDown = !1, this.controls[p.PANORAMA].emit('interaction.direct'), this.mouseCouldBeClickToMove) {
                                    if (this.path.haltWarp(), this.intersect) return this.flyToPanoClosestToMouse();
                                    if (this.mode === p.PANORAMA) {
                                        var n = this.closestPanoInDirection(this.getMouseDirection());
                                        return n ? this.flyToPano(n)  : this.bump(this.getMouseDirection())
                                    }
                                }
                            }
                            this.domElement.addEventListener('mousedown', function (e) {
                                0 === e.button && t.call(this, e.clientX, e.clientY)
                            }.bind(this)),
                                this.domElement.addEventListener('touchstart', function (e) {
                                    if (!this.mouseDown) {
                                        var o = m.average(e.changedTouches, 'clientX'),
                                            n = m.average(e.changedTouches, 'clientY');
                                        t.call(this, o, n)
                                    }
                                }.bind(this)),
                                this.domElement.addEventListener('pointerdown', function (e) {
                                    this.mouseDown || t.call(this, e.clientX, e.clientY)
                                }.bind(this)),
                                this.domElement.addEventListener('mousemove', function (t) {
                                    e.call(this, t.clientX, t.clientY, !1)
                                }.bind(this), !1),
                                this.domElement.addEventListener('touchmove', function (t) {
                                    var o = m.average(t.changedTouches, 'clientX'),
                                        n = m.average(t.changedTouches, 'clientY');
                                    e.call(this, o, n, !0)
                                }.bind(this), !1),
                                this.domElement.addEventListener('pointermove', function (t) {
                                    e.call(this, t.clientX, t.clientY, !0)
                                }.bind(this)),
                                this.domElement.addEventListener('mouseover', function (t) {
                                    !this.mouseDown || 0 !== t.which && 0 !== t.buttons || (this.mouseDown = !1)
                                }.bind(this)),
                                this.domElement.addEventListener('mouseup', function (t) {
                                    o.call(this, t.clientX, t.clientY, !1)
                                }.bind(this)),
                                this.domElement.addEventListener('touchend', function (t) {
                                    this.updateIntersect();
                                    var e = m.average(t.changedTouches, 'clientX'),
                                        n = m.average(t.changedTouches, 'clientY');
                                    o.call(this, e, n, !0)
                                }.bind(this)),
                                this.domElement.addEventListener('pointerup', function (t) {
                                    this.updateIntersect(),
                                        o.call(this, t.clientX, t.clientY, !0)
                                }.bind(this)),
                                this.domElement.addEventListener('pointerout', function (t) {
                                    this.mouseDown = !1
                                }.bind(this)),
                                this.domElement.addEventListener('pointercancel', function (t) {
                                    this.mouseDown = !1
                                }.bind(this)),
                                this.on('mode.changed', function (t, e) {
                                    var o = e === p.PANORAMA ? THREE.DoubleSide : THREE.FrontSide;
                                    this.model.setSide(o),
                                        this.model.setMode(e)
                                }.bind(this)),
                                this.on('mode.changing', function (t, e) {
                                    var o = d[e].markerOpacity;
                                    this.model.panos.forEach(function (t) {
                                        v.start(g.property(t.marker.material, 'opacity', o), d.markerOpacityTransitionTime)
                                    }),
                                        this.model.setMode(e)
                                }.bind(this))
                        },
                        n.prototype.start = function (t) {
                            var e = t.mode,
                                o = t.pano,
                                n = t.position,
                                i = t.quaternion;
                            if (this.activeMapModes()) {
                                var r = this.controls[p.DOLLHOUSE];
                                r.maxDistance = r.calculateMaxDistance(this.model),
                                    e === p.PANORAMA ? this.insideModeWithFlyIn(o, n, i)  : e === p.FLOORPLAN ? (this.floorplanMode(), this.path.unseenHero = !1)  : e === p.DOLLHOUSE ? (this.dollhouseMode(n, i), this.path.unseenHero = !1)  : (o = this.model.panos.findClosest(n), this.insideModeWithFlyIn(o, n, i))
                            } else {
                                T.info('map modes are deactivated, starting inside');
                                var a = this.findPanoramicHero();
                                a ? (T.info('starting at 1st highlight'), o = this.model.panos.dict[a.scan_id], n = a.position, i = a.quaternion)  : (o = o || this.model.panos.list[0], T.info('starting at nearest pano ' + o.id)),
                                    this.startInside(o, n, i),
                                    this.path.unseenHero = !1
                            }
                            this.panoMarkers = this.model.panos.list.reduce(function (t, e) {
                                return t.concat(e.marker)
                            }, [
                            ])
                        },
                        n.prototype.activeMapModes = function () {
                            var t = this.model.data.player_options;
                            return !t || t.dollhouse
                        },
                        n.prototype.findPanoramicHero = function () {
                            var t = this.model.heroLocations;
                            if (!t) return null;
                            for (var e = 0; e < t.length; e += 1) if (t[e].camera_mode === p.PANORAMA) return t[e];
                            return null
                        },
                        n.prototype.startInside = function (t, e, o) {
                            e = e || t.position,
                                o = o || t.quaternion;
                            var n = d[p.PANORAMA],
                                i = d.panorama.transitionTime,
                                r = new THREE.Vector3(0, 0, - 1).applyQuaternion(o),
                                a = r.clone().add(t.position);
                            return t && !t.isLoaded('low') ? (this.model.waitForPanoLoad(t, 'low'), void t.loadCube('low', function () {
                                this.startInside(t, e, o)
                            }.bind(this)))  : (this.mode = p.PANORAMA, this.control.object.set(t), this.control.object.position.copy(e), this.control.object.quaternion.copy(o), this.control.lookAt(a), this.path.hasBeenIndoors = !0, this.update(0), d.modelAlpha = 0, this.model.changeModelAlpha(0), this.model.skybox.material.uniforms.opacity.value = 0, t.floor.enter(p.PANORAMA), v.start(g.uniform(this.model.skybox, 'opacity', n.skyboxOpacity), i * n.skyboxOpacityLength, null, n.skyboxOpacityDelay), this.model.panos.forEach(function (t) {
                                v.start(g.property(t.marker.material, 'opacity', n.markerOpacity), d.markerOpacityTransitionTime)
                            }), v.start(g.property(this.reticule.material, 'opacity', 0), i), v.start(function () {
                            }, i, function () {
                                this.mode = p.PANORAMA
                            }.bind(this)), void (this.mode = p.TRANSITIONING))
                        },
                        n.prototype.pause = function () {
                            this.paused = !0
                        },
                        n.prototype.play = function () {
                            this.paused = !1
                        },
                        n.prototype.updateAspect = function (t) {
                            var e = this.controls[p.FLOORPLAN].object;
                            e.top = e.right / t,
                                e.bottom = e.left / t;
                            for (var o in this.controls) this.controls[o].object.aspect = t,
                                this.controls[o].object.updateProjectionMatrix();
                            if (this.control) {
                                var n = this.control.object;
                                this.camera.projectionMatrix.copy(n.projectionMatrix)
                            }
                        },
                        n.prototype.update = function (t) {
                            var e = this.control;
                            e && (e.update(t), this.quaternion.copy(e.object.quaternion), this.position.copy(e.object.position), this.target.copy(e.target), e.object.updateProjectionMatrix(), this.camera.projectionMatrix.copy(e.object.projectionMatrix)),
                                this.camera.position.copy(this.position),
                                this.camera.quaternion.copy(this.quaternion),
                            this.mouseDown || this.updateIntersect(),
                                this.reticule.update(),
                                this.path.update(),
                                this.spider.update()
                        },
                        n.prototype.updateIntersect = function () {
                            this.intersect = this.getMouseIntersect(),
                            this.intersect && this.updateClosestPano(this.intersect),
                                this.closestPano || this.closestPanoInDirection(this.getMouseDirection()) ? (this.reticule.updatePosition(this.position, this.intersect), d.navigation.panoScores && !d.navigation.mouseDirection && this.closestPanoInDirection(this.getDirection(new THREE.Vector3(0, 0, - 1))))  : this.reticule.hide()
                        },
                        n.prototype.getMouseDirection = function (t) {
                            t = t || this.mouse;
                            var e = new THREE.Vector3(t.x, t.y, - 1).unproject(this.camera),
                                o = new THREE.Vector3(t.x, t.y, 1).unproject(this.camera);
                            return o.sub(e).normalize()
                        },
                        n.prototype.getMouseIntersect = function (t, e) {
                            t = t || this.mouse.clone(),
                                e = e || this.model.floorList.reduce(function (t, e) {
                                        return e.hidden ? t : t.concat(e.collider.children)
                                    }, this.mode === p.PANORAMA ? this.panoMarkers : [
                                    ]);
                            var o = new THREE.Vector3(t.x, t.y, - 1).unproject(this.camera);
                            this.raycaster.set(o, this.getMouseDirection(t));
                            var n = this.raycaster.intersectObjects(e);
                            if (0 === n.length) return null;
                            var i = n[0];
                            if (i.face) {
                                i.normal = i.face.normal.applyQuaternion(i.object.quaternion);
                                var r = this.position.clone().sub(i.point);
                                r.dot(i.normal) < 0 && i.normal.negate(),
                                    i.onFloor = this.currentPano ? i.point.y < this.position.y - 0.5 * this.currentPano.height : i.point.y < this.position.y - 0.5,
                                    i.horizontal = i.normal.y > 0.8
                            }
                            return i
                        },
                        n.prototype.updateClosestPano = function (t) {
                            var e = [
                            ];
                            this.mode === p.PANORAMA ? (e.push(h.filters.not(this.currentPano)), e.push(h.filters.inFloorDirection(this.currentPano.floorPosition, this.getDirection(), 0.25)), e.push(h.filters.isNeighbourPanoTo(this.currentPano)), e.push(h.filters.isCloseEnoughTo(t.point, d.panoFloorClickRadius)), e.push(h.filters.isNotBehindNormal(t.point, t.normal)))  : (e.push(h.filters.inDirection(this.position, this.getDirection(), 0.25)), e.push(h.filters.isOnVisibleFloor()));
                            var o = this.model.panos.find(e, [
                                h.sortFunctions.floorDistanceToPoint(t.point)
                            ]);
                            o != this.closestPano && (this.mode !== p.TRANSITIONING && (this.closestPano && this.closestPano.hoverOff(this.mode), o && o.hoverOn(this.mode)), this.closestPano = o)
                        },
                        n.prototype.dollhouseMode = function (t, e) {
                            this.emit('mode.changing', this.mode, p.DOLLHOUSE),
                                this.mode = p.DOLLHOUSE,
                                this.controls[p.DOLLHOUSE].reset();
                            var o = new THREE.Vector3(this.model.center.x, 0, this.model.center.z),
                                n = new THREE.Vector3(15, 10, 15);
                            if (t && e) {
                                var i = new THREE.Vector3(0, 0, - 1).applyQuaternion(e);
                                this.raycaster.set(t.clone(), i.clone());
                                var r = this.raycaster.intersectObjects([this.scene.plane]);
                                r.length ? (o.copy(r[0].point), n.copy(t))  : T.warn('Tried to initiate dollhouse mode that did not intersect plane', t, e)
                            }
                            this.controls[p.DOLLHOUSE].target.copy(o),
                                this.cameras[p.DOLLHOUSE].position.copy(n),
                                d.modelAlpha = 1,
                                this.model.skybox.material.uniforms.opacity.value = 0,
                                this.model.changeModelAlpha(1)
                        },
                        n.prototype.insideMode = function (t) {
                            if (this.mode !== p.PANORAMA && this.mode !== p.TRANSITIONING) {
                                var e = this.model.currentFloor ? [
                                    h.filters.atFloor(this.model.currentFloor)
                                ] : [
                                ];
                                t = t || this.currentPano || this.model.panos.find(e, [
                                        h.sortFunctions.distanceToPoint(this.control.target)
                                    ]),
                                    this.flyToNewMode(p.PANORAMA, {
                                        pano: t
                                    })
                            }
                        },
                        n.prototype.insideModeWithFlyIn = function (t, e, o) {
                            if (this.dollhouseMode(), this.update(0), t) {
                                e || (e = t.position),
                                o || (o = this.control.object.quaternion);
                                var n = new THREE.Vector3(1, 0, 0).applyQuaternion(o),
                                    i = this.control.maxDistance;
                                this.fitDollhouse(t, e, o, n),
                                    setTimeout(function () {
                                        this.control.maxDistance = i,
                                            this.flyToNewMode(p.PANORAMA, {
                                                pano: t,
                                                quaternion: o
                                            })
                                    }.bind(this), 3000)
                            }
                        },
                        n.prototype.fitDollhouse = function (t, e, o, n) {
                            var i = new THREE.Vector3(0, 0, - 1).applyQuaternion(o),
                                r = i.clone().add(t.position);
                            this.control.target.copy(r);
                            var a = new THREE.Vector3(0, 1, 0),
                                s = n.clone().applyAxisAngle(a, Math.PI / 2),
                                l = this.model.boundingBox.max.clone(),
                                h = this.model.boundingBox.min.clone(),
                                c = [
                                    new THREE.Vector3(l.x, 0, l.z).sub(t.position),
                                    new THREE.Vector3(l.x, 0, h.z).sub(t.position),
                                    new THREE.Vector3(h.x, 0, l.z).sub(t.position),
                                    new THREE.Vector3(h.x, 0, h.z).sub(t.position)
                                ],
                                u = 0,
                                p = 0,
                                d = 0;
                            c.forEach(function (t, e, o) {
                                var i = Math.abs(t.dot(n)),
                                    r = t.dot(s);
                                i > u && (u = i, p = r),
                                r > d && (d = r)
                            });
                            var m = Math.max(Math.abs(new THREE.Vector3(0, l.y, 0).sub(t.position).dot(a)), Math.abs(new THREE.Vector3(0, h.y, 0).sub(t.position).dot(a))),
                                f = e.clone().add(s.clone().multiplyScalar(p)),
                                g = e.clone().add(s.clone().multiplyScalar(d));
                            p = u / Math.tan(this.control.object.fov / 2 * this.control.object.aspect * (Math.PI / 180)),
                                d = m / Math.tan(this.control.object.fov / 2 * (Math.PI / 180)),
                                p = Math.max(p, 10),
                                d = Math.max(d, 10);
                            var y = e.clone().sub(f.clone().add(i.clone().multiplyScalar( - p))).length(),
                                v = e.clone().sub(f.clone().add(i.clone().multiplyScalar( - d))).length();
                            this.control.maxDistance = this.scene.skybox.geometry.boundingSphere.radius - 1,
                                y >= v ? this.control.object.position.set(0, 6, 0).add(f).add(i.multiplyScalar(1.1 * - p))  : this.control.object.position.set(0, 6, 0).add(g).add(i.multiplyScalar(1.1 * - d))
                        },
                        n.prototype.floorplanMode = function () {
                            this.emit('mode.changing', this.mode, p.FLOORPLAN),
                                this.mode = p.FLOORPLAN;
                            var t = this.cameras[p.FLOORPLAN],
                                e = this.controls[p.FLOORPLAN];
                            if (e.reset(), this.model.heroImage && this.model.heroImage.metadata) {
                                var o = t.position.clone().sub(e.target),
                                    n = f.convertWorkshopQuaternion(this.model.heroImage.metadata.camera_quaternion),
                                    i = f.convertWorkshopVector(this.model.heroImage.metadata.camera_position),
                                    r = this.model.heroImage.metadata.ortho_zoom,
                                    a = new THREE.Vector3( - 1, 0, 0).applyQuaternion(n).normalize(),
                                    s = Math.atan2(a.x, a.z);
                                e.target.copy(i);
                                var l = o.length();
                                e.offset.x = l * Math.sin(s),
                                    e.offset.y = 0,
                                    e.offset.z = l * Math.cos(s),
                                    t.position.copy(e.target).add(e.offset),
                                    t.quaternion.copy(n),
                                    e.currentScale = r / 4 / (window.innerWidth / window.innerHeight),
                                    e.absoluteScale = e.currentScale,
                                    e.update()
                            } else {
                                T.info('no floorplan metadata');
                                var h = new THREE.Vector3(this.model.center.x, 0, this.model.center.z),
                                    c = new THREE.Vector3(this.model.center.x, 10, this.model.center.z);
                                e.target.copy(h),
                                    t.position.copy(c)
                            }
                            d.modelAlpha = 1,
                                this.model.skybox.material.uniforms.opacity.value = 0,
                                this.model.changeModelAlpha(1),
                                this.model.toggleStartFloors()
                        },
                        n.prototype.flyToPano = function (t, e) {
                            if (this.mode !== p.PANORAMA) return void this.flyToNewMode(p.PANORAMA, {
                                pano: t
                            });
                            if (t !== this.currentPano) {
                                if (this.model.waitForPanoLoad(t, 'high'), !t.isLoaded('low')) return void t.loadCube('low', function () {
                                    this.flyToPano(t, e)
                                }.bind(this));
                                if (this.currentPano || (this.currentPano = t, this.path.placeCpm(), this.path.fadeOutCpm(d.path.fadeOutTime), this.spider.draw()), !this.flying) {
                                    this.flying = !0;
                                    var o = Math.min(this.currentPano.position.distanceTo(t.position), d.transition.flytimeMaxDistanceThreshold) * d.transition.flytimeDistanceMultiplier + d.transition.flyTime;
                                    d.transition.flySpeed > 0.01 && (o = 1000 * this.currentPano.position.distanceTo(t.position) / d.transition.flySpeed),
                                        T.debug('Flying to pano ', t.position),
                                        this.emit('pano.chosen', t, this.currentPano),
                                        this.model.setProjectedPanos(this.currentPano, t),
                                        v.start(g.uniform(this.model.skybox, 'progress', 1), o, null, 0, y[d.transition.blendEasing]),
                                        v.start(g.allUniforms(this.model.chunks, 'progress', 1), o, null, 0, y[d.transition.blendEasing]),
                                        v.start(g.vector(this.cameras[p.PANORAMA].position, t.position), o, function () {
                                            this.flying = !1,
                                                this.currentPano.exit(),
                                                t.enter(),
                                                this.currentPano = t,
                                                this.path.hasBeenIndoors = !0,
                                                this.path.placeCpm(),
                                                this.path.fadeOutCpm(d.path.fadeOutTime),
                                                this.spider.draw(),
                                            e && e()
                                        }.bind(this), 0, y[d.transition.movementEasing])
                                }
                            }
                        },
                        n.prototype.flyToPanoClosestToMouse = function () {
                            if (Date.now() - this.mouseLastMoveTime > 50 && (this.intersect = this.getMouseIntersect(), this.intersect && this.updateClosestPano(this.intersect)), this.closestPano) return this.flyToPano(this.closestPano);
                            var t = this.getMouseDirection();
                            this.flyDirection(t) || this.flyToPano(this.currentPano)
                        },
                        n.prototype.flyDirection = function (t, e, o) {
                            var n = this.closestPanoInDirection(t, e, o);
                            return n ? (this.flyToPano(n), !0)  : (this.bump(t), !1)
                        },
                        n.prototype.closestPanoInDirection = function (t, e, o) {
                            e = void 0 !== e ? e : 0.75;
                            var n = o ? 'angle' : 'direction',
                                i = this.model.panos.findByScore([h.filters.inPanoDirection(this.position, t, e),
                                    h.filters.isNeighbourPanoTo(this.currentPano),
                                    h.filters.not(this.currentPano)], [
                                    h.scoreFunctions.distanceSquared(this.currentPano),
                                    h.scoreFunctions[n](this.position, t)
                                ]);
                            return i
                        },
                        n.prototype.bump = function (t) {
                            if (this.mode === p.PANORAMA && !this.flying) {
                                var e,
                                    o,
                                    n,
                                    i = d.transition,
                                    r = (i.flytimeMaxDistanceThreshold * i.flytimeDistanceMultiplier + i.flyTime) / 8,
                                    a = this.camera.getWorldDirection().dot(t),
                                    s = Math.abs(a) > 0.5;
                                if (s) e = function () {
                                    v.start(g.property(this.cameras[p.PANORAMA], 'zoom', a > 0 ? 1.04 : 0.96), r, o, 0, y.easeInOutSine)
                                }.bind(this),
                                    o = function () {
                                        v.start(g.property(this.cameras[p.PANORAMA], 'zoom', 1), 5 * r, n, 0, y.easeInOutSine)
                                    }.bind(this);
                                else {
                                    var l = this.camera.position.clone(),
                                        h = t.clone();
                                    this.raycaster.set(l, h);
                                    var c = this.model.floorList.reduce(function (t, e) {
                                            return t.concat(e.collider.children)
                                        }, [
                                        ]),
                                        u = this.raycaster.intersectObjects(c),
                                        m = u.length > 0 ? u[0].distance / 25 : 0.04,
                                        f = l.clone().add(h.multiplyScalar(m));
                                    e = function () {
                                        v.start(g.vector(this.cameras[p.PANORAMA].position, f), r, o, 0, y.easeInOutSine)
                                    }.bind(this),
                                        o = function () {
                                            v.start(g.vector(this.cameras[p.PANORAMA].position, l), 5 * r, n, 0, y.easeInOutSine)
                                        }.bind(this)
                                }
                                n = function () {
                                    this.flying = !1
                                }.bind(this),
                                    this.flying = !0,
                                    e()
                            }
                        },
                        n.prototype.changeFloor = function (t) {
                            var e = this.model.nextFloor(t);
                            if (e) if (this.mode === p.PANORAMA) {
                                var o = this.model.panos.findByScore([h.filters.atFloor(e)], [
                                    h.scoreFunctions.distance(this.currentPano),
                                    h.scoreFunctions.direction(this.position, new THREE.Vector3(0, t, 0)),
                                    h.scoreFunctions.penalizeHeightDifferenceUnder(this.position, 0.5)
                                ]);
                                o ? this.flyToPano(o)  : T.warn('No pano found on selected floor, not moving there.')
                            } else this.model.selectFloor(e)
                        },
                        n.prototype.gotoFloor = function (t) {
                            var e = t - this.model.currentFloor.floorIndex;
                            e ? this.changeFloor(e)  : this.model.allFloorsVisible && this.model.toggleAllFloors(!1)
                        },
                        n.prototype.getDirection = function (t) {
                            return t = t ? t.clone()  : new THREE.Vector3(0, 0, - 1),
                                t.applyQuaternion(this.camera.quaternion)
                        },
                        n.prototype.flyToSameMode = function (t, e, o, n) {
                            var i = [
                            ];
                            if (this.mode === p.TRANSITIONING) return T.warn('should not be transitioning here'),
                                i;
                            var r = o || !1;
                            if (T.debug('New pose in mode ' + this.mode), t && !t.isLoaded('low')) return this.model.waitForPanoLoad(t, 'high'),
                                t.loadCube('low', function () {
                                    i = this.flyToSameMode(t, e, o, n)
                                }.bind(this)),
                                i;
                            var a = d[this.mode],
                                s = void 0 !== e ? e : a.transitionTime,
                                l = new THREE.Vector3,
                                h = new THREE.Vector3;
                            if (this.mode === p.PANORAMA) T.warn('we should not be here for panorama views'),
                                i.push(v.start(function () {
                                }, s, function () {
                                    this.mode = p.PANORAMA,
                                    n && n()
                                }.bind(this)));
                            else if (this.mode === p.DOLLHOUSE) if (r) {
                                var c = new THREE.Vector3(0, 1, 0);
                                this.controls[p.DOLLHOUSE].resetRanges(1, !0),
                                    this.model.warpDestFloors(o),
                                    h.copy(o.position);
                                var u = new THREE.Vector3(0, 0, - 1).applyQuaternion(o.quaternion),
                                    m = new THREE.Raycaster(h.clone(), u.clone(), 0, 1 / 0),
                                    f = m.intersectObjects(this.model.colliders),
                                    b = 3;
                                f.length ? (l.copy(f[0].point), b = 0.75 * h.distanceTo(l))  : (l.copy(u).multiplyScalar(3).add(h), T.debug('Tried to restore dollhouse mode that did not intersect...', o.position, o.quaternion));
                                var w = (new THREE.Matrix4).lookAt(h, l, c),
                                    E = (new THREE.Euler).setFromRotationMatrix(w, d.warp.eOrder),
                                    R = l.distanceTo(h),
                                    x = (new THREE.Matrix4).lookAt(this.cameras[p.DOLLHOUSE].position, this.controls[p.DOLLHOUSE].target, c),
                                    M = (new THREE.Euler).setFromRotationMatrix(x, d.warp.eOrder),
                                    A = this.cameras[p.DOLLHOUSE].position.distanceTo(this.controls[p.DOLLHOUSE].target);
                                this.controls[p.DOLLHOUSE].resetRanges(Math.min(A, b), !0);
                                var P = new THREE.Euler(E.x - M.x, E.y - M.y, E.z - M.z, d.warp.eOrder);
                                P.y = P.y > Math.PI ? P.y -= 2 * Math.PI : P.y < - Math.PI ? P.y += 2 * Math.PI : P.y,
                                    this.path.burnsDir = Math.sign(P.y);
                                var C = new THREE.Euler(0, 0, 0, d.warp.eOrder),
                                    I = new THREE.Vector3;
                                i.push(v.start(g.vector(this.controls[p.DOLLHOUSE].target, l), s, null, d.flydown.movementDelay, y[d.flydown.movementEasing])),
                                    i.push(v.start(function (t, e) {
                                        C.x = M.x + t * P.x,
                                            C.y = M.y + t * P.y,
                                            C.z = M.z + t * P.z;
                                        var o = A + t * (R - A);
                                        I.set(0, 0, o).applyEuler(C).add(this.controls[p.DOLLHOUSE].target),
                                            this.cameras[p.DOLLHOUSE].position.copy(I).add(this.model.position)
                                    }.bind(this), s, null, d.flydown.movementDelay, y[d.flydown.movementEasing])),
                                    i.push(v.start(function (t, e) {
                                        this.controls[p.DOLLHOUSE].update(),
                                            this.quaternion.copy(this.cameras[p.DOLLHOUSE].quaternion),
                                            this.position.copy(this.cameras[p.DOLLHOUSE].position)
                                    }.bind(this), s, null, d.flydown.movementDelay, y[d.flydown.movementEasing])),
                                    i.push(v.start(function () {
                                    }, s, function () {
                                        this.mode = p.DOLLHOUSE,
                                        n && n()
                                    }.bind(this)))
                            } else T.warn('not warping in flyToSameMode()? ignore it then');
                            else if (this.path.placeCpm(), this.path.fadeInCpm(d.path.fadeInTime), o) {
                                this.model.warpDestFloors(o);
                                var H = this.cameras[p.FLOORPLAN],
                                    k = this.controls[p.FLOORPLAN],
                                    S = k.target.clone(),
                                    O = o.position.clone().sub(S),
                                    B = H.position.clone().sub(k.target),
                                    D = B.length(),
                                    L = new THREE.Vector3( - 1, 0, 0).applyQuaternion(o.quaternion).normalize(),
                                    F = Math.atan2(k.offset.x, k.offset.z),
                                    W = Math.atan2(L.x, L.z),
                                    V = k.absoluteScale,
                                    _ = o.ortho_zoom / 4 / (window.innerWidth / window.innerHeight);
                                i.push(v.start(function (t, e) {
                                    k.target.copy(O).multiplyScalar(t).add(S);
                                    var o = F + (W - F) * t;
                                    k.offset.x = D * Math.sin(o),
                                        k.offset.z = D * Math.cos(o),
                                        H.position.copy(k.target).add(k.offset),
                                        k.absoluteScale = V + t * (_ - V),
                                        k.update(),
                                        this.quaternion.copy(H.quaternion),
                                        this.position.copy(H.position),
                                        this.target.copy(k.target),
                                        this.camera.projectionMatrix.copy(H.projectionMatrix)
                                }.bind(this), s, null, 0, y[d.flydown.movementEasing])),
                                    i.push(v.start(function () {
                                    }, s, function () {
                                        this.mode = p.FLOORPLAN,
                                        n && n()
                                    }.bind(this)))
                            } else T.info('flyToSameMode() funny floorplan view? skipping');
                            return this.mode = p.TRANSITIONING,
                                i
                        },
                        n.prototype.flyToNewMode = function (t, e) {
                            e = e || {
                                };
                            var o = e.pano,
                                n = e.duration,
                                i = e.warpDest,
                                r = e.callback,
                                a = e.force,
                                s = e.quaternion,
                                l = [
                                ];
                            if (t === this.mode) return T.debug('Already in ' + t + ' mode'),
                            a && (l = this.flyToSameMode(o, n, i, r)),
                                l;
                            if (this.mode === p.TRANSITIONING) return l;
                            var h = i || !1;
                            if (T.debug('Switching mode to ' + t), o && this.model.waitForPanoLoad(o, 'high'), o && !o.isLoaded('low')) return o.loadCube('low', function () {
                                l = this.flyToNewMode(t, e)
                            }.bind(this)),
                                l;
                            var c = this.mode,
                                u = this.cameras[t],
                                e = $.extend({
                                }, d[t], d[c + '-' + t]),
                                m = void 0 !== n ? n : e.transitionTime;
                            if (this.emit('mode.changing', c, t), u.set(o, s), t === p.PANORAMA) setTimeout(function () {
                                o.floor.enter(t)
                            }, m / 2),
                                this.path.fadeOutCpm(d.path.fadeOutTime);
                            else if (t === p.DOLLHOUSE) {
                                if (h && (this.model.stayPut = !0), i ? (this.controls[p.DOLLHOUSE].resetRanges(1, !0), this.model.warpDestFloors(i))  : this.model.toggleAllFloors(!0), this.path.placeCpm(), this.path.fadeInCpm(d.path.fadeInTime), h) {
                                    var f = new THREE.Vector3(this.model.center.x, 0, this.model.center.z),
                                        b = new THREE.Vector3(15, 10, 15),
                                        w = new THREE.Vector3(0, 0, - 1).applyQuaternion(i.quaternion),
                                        E = new THREE.Raycaster(i.position.clone(), w.clone(), 0, 1 / 0),
                                        R = E.intersectObjects([this.scene.plane]);
                                    R.length ? (f.copy(R[0].point), b.copy(i.position), this.controls[p.DOLLHOUSE].resetRanges(0.75 * b.distanceTo(f), !0))  : (T.warn('Tried to restore dollhouse mode that did not intersect...', i.position, i.quaternion), this.controls[p.DOLLHOUSE].resetRanges(3, !0)),
                                        this.controls[p.DOLLHOUSE].target.copy(f),
                                        u.position.copy(b).add(this.model.position),
                                        this.controls[p.DOLLHOUSE].update()
                                }
                            } else {
                                if (this.path.placeCpm(), this.path.fadeInCpm(d.path.fadeInTime), i) {
                                    this.model.warpDestFloors(i);
                                    var x = this.cameras[p.FLOORPLAN],
                                        M = this.controls[p.FLOORPLAN],
                                        A = x.position.clone().sub(M.target),
                                        P = new THREE.Vector3( - 1, 0, 0).applyQuaternion(i.quaternion).normalize(),
                                        C = Math.atan2(P.x, P.z);
                                    M.target.copy(i.position);
                                    var I = A.length();
                                    M.offset.x = I * Math.sin(C),
                                        M.offset.y = 0,
                                        M.offset.z = I * Math.cos(C),
                                        x.position.copy(M.target).add(M.offset);
                                    {
                                        M.target.clone().sub(u.position)
                                    }
                                    u.quaternion.copy(i.quaternion),
                                        M.currentScale = i.ortho_zoom / 4 / (window.innerWidth / window.innerHeight),
                                        M.absoluteScale = M.currentScale,
                                        M.update()
                                } else this.model.currentFloor.enter(t);
                                this.model.stayPut = !1
                            }
                            return l.push(v.start(g.vector(this.position, u.position), m, null, d.flydown.movementDelay, y[d.flydown.movementEasing])),
                                l.push(v.start(g.quaternion(this.quaternion, u.quaternion), m * e.rotationDuration, null, e.rotationDelay, y[d.flydown.rotationEasing])),
                                l.push(v.start(g.matrix4(this.camera.projectionMatrix, u.projectionMatrix), m * e.cameraMatrixDuration, null, e.cameraMatrixDelay, e.cameraMatrixEase)),
                                l.push(v.start(g.property(d, 'modelAlpha', e.modelAlpha, this.model.changeModelAlpha.bind(this.model)), m * e.modelAlphaLength, null, e.modelAlphaDelay)),
                                l.push(v.start(g.uniform(this.model.skybox, 'opacity', e.skyboxOpacity), m * e.skyboxOpacityLength, null, e.skyboxOpacityDelay)),
                                l.push(v.start(g.property(this.reticule.material.uniforms.opacity, 'value', 0), m)),
                                l.push(v.start(function () {
                                }, m, function () {
                                    c === p.PANORAMA && t !== p.PANORAMA ? this.currentPano.exit()  : c !== p.PANORAMA && t === p.PANORAMA && (this.currentPano.enter(), this.path.hasBeenIndoors = !0, this.path.placeCpm(), this.path.fadeOutCpm(d.path.fadeOutTime), this.spider.draw()),
                                    c === p.DOLLHOUSE && this.controls[p.DOLLHOUSE].resetRanges(),
                                        this.mode = t,
                                        h && c !== p.PANORAMA && t === p.PANORAMA ? this.path.warpToPano(r)  : r && r()
                                }.bind(this))),
                                this.mode = p.TRANSITIONING,
                                l
                        },
                        n.prototype.isInMode = function () {
                            for (var t = 0; t < arguments.length; t++) if (this.mode === arguments[t]) return !0;
                            return !1
                        },
                        n.prototype.serialize = function () {
                            return [p.toInt(this.mode),
                                this.currentPano ? this.currentPano.id : '',
                                this.position.x.toFixed(4),
                                this.position.y.toFixed(4),
                                this.position.z.toFixed(4),
                                this.quaternion.x.toFixed(4),
                                this.quaternion.y.toFixed(4),
                                this.quaternion.z.toFixed(4),
                                this.quaternion.w.toFixed(4)].join(',')
                        },
                        n.prototype.optionsFromString = function (t) {
                            var e = t.split(',');
                            try {
                                var o = {
                                    mode: p.fromInt(e[0]),
                                    pano: this.model.panos.get(e[1]),
                                    position: new THREE.Vector3(parseFloat(e[2]), parseFloat(e[3]), parseFloat(e[4])),
                                    quaternion: new THREE.Quaternion(parseFloat(e[5]), parseFloat(e[6]), parseFloat(e[7]), parseFloat(e[8]))
                                };
                                return T.debug('Overriding start with params:', o),
                                    o
                            } catch (n) {
                                return T.warn('Invalid start override, ignoring: "' + t + '"', n.message),
                                    null
                            }
                        },
                        n.prototype.setSize = function (t, e) {
                            this.aspect = t / e,
                                this.cameras.dollhouse.aspect = this.aspect,
                                this.cameras.dollhouse.updateProjectionMatrix(),
                                this.cameras.panorama.aspect = this.aspect,
                                this.cameras.panorama.updateProjectionMatrix(),
                                this.cameras.floorplan.top = d.orthoBase / this.aspect,
                                this.cameras.floorplan.bottom = - d.orthoBase / this.aspect,
                                this.cameras.floorplan.updateProjectionMatrix()
                        },
                        e.exports = n
                }).call(this, '/js/player.js')
            },
            {
                './cameras/DollhouseCamera': 2,
                './cameras/FloorplanCamera': 3,
                './cameras/PanoramaCamera': 4,
                './controls/DollhouseControls': 5,
                './controls/FloorplanControls': 6,
                './controls/PanoramaControls': 8,
                './enum/Viewmode': 11,
                './objects/NSpider': 31,
                './objects/Panorama': 32,
                './objects/Reticule': 33,
                './objects/ShowPath': 34,
                './settings': 38,
                './shaders': 39,
                './util/common': 45,
                './util/easing': 46,
                './util/lerp': 47,
                './util/logger': 48,
                './util/math': 49,
                './util/transitions': 51,
                events: 56
            }
        ],
        37: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t, e) {
                        this.model = t,
                            this.panos = t.panos,
                            this.player = e,
                            this.imagePanos = this.listImagePanos(),
                            this.retryMinimumTime = 10000
                    }
                    var i = t('./enum/Viewmode'),
                        r = (t('./settings'), t('./objects/Panorama')),
                        a = t('./util/logger'),
                        s = new a(o);
                    n.prototype.start = function () {
                        this.loadNextPano(function (t) {
                            t ? this.start()  : (s.debug('No suitable pano loaded, waiting a little while before looking again'), setTimeout(function () {
                                this.start()
                            }.bind(this), 1000))
                        }.bind(this))
                    },
                        n.prototype.validLoadTarget = function (t) {
                            return t && !t.isLoaded('high') && Date.now() - t.failedLoadingAt > this.retryMinimumTime
                        },
                        n.prototype.listImagePanos = function () {
                            for (var t = [
                            ], e = 0; e < this.model.images.length; e++) {
                                var o = this.model.images[e];
                                if (o.metadata && o.metadata.scan_id) {
                                    var n = this.model.panos.get(o.metadata.scan_id);
                                    n && !n.isLoaded('high') && t.push(n)
                                }
                            }
                            return t
                        },
                        n.prototype.nextNotLoadedImage = function () {
                            for (; this.imagePanos.length > 0; ) {
                                var t = this.imagePanos[0];
                                if (!t.isLoaded('high')) return t;
                                this.imagePanos.shift()
                            }
                            return null
                        },
                        n.prototype.loadNextPano = function (t) {
                            var e,
                                o;
                            this.model.waitQueue.length > 0 ? (e = this.model.waitQueue[0].pano, s.debug('Overrode pano selection: Flying to an unloaded pano ' + e.id))  : this.validLoadTarget(this.player.currentPano) ? (e = this.player.currentPano, s.debug('Overrode pano selection: Currently at an unloaded pano ' + e.id))  : this.validLoadTarget(this.player.closestPano) ? (e = this.player.closestPano, s.debug('Overrode pano selection: Hovering over an unloaded pano ' + e.id))  : this.validLoadTarget(this.nextNotLoadedImage()) ? (o = 'high', e = this.imagePanos[0], s.debug('Overrode pano selection: Highlight image ' + e.id))  : this.player.mode === i.PANORAMA && (e = this.panos.findByScore([this.validLoadTarget.bind(this),
                                r.filters.isNeighbourPanoTo(this.player.currentPano)], [
                                r.scoreFunctions.distance(this.player.currentPano),
                                r.scoreFunctions.direction(this.player.position, this.player.getDirection()),
                                r.scoreFunctions.inFieldOfView(this.player.position, this.player.getDirection())
                            ]), e ? s.debug('Normal pano selection: neighbor ' + e.id)  : (e = this.panos.findByScore([this.validLoadTarget.bind(this),
                                r.filters.isNeighbourOfNeighbourTo(this.player.currentPano)], [
                                r.scoreFunctions.distance(this.player.currentPano),
                                r.scoreFunctions.direction(this.player.position, this.player.getDirection()),
                                r.scoreFunctions.inFieldOfView(this.player.position, this.player.getDirection())
                            ]), e && (o = 'high', s.debug('Normal pano selection: neighbor of neighbor ' + e.id)))),
                                e ? (o = o || e.isLoaded('low') ? 'high' : 'low', s.debug('Preloading ' + o + '-res pano ' + e.id), e.loadCube(o, function () {
                                    t(e)
                                }, function () {
                                    s.warn('Failed preloading pano', e.id, ', marking it as failed and forgetting it for a while'),
                                        t()
                                }))  : t && t(null)
                        },
                        e.exports = n
                }).call(this, '/js/preloaders.js')
            },
            {
                './enum/Viewmode': 11,
                './objects/Panorama': 32,
                './settings': 38,
                './util/logger': 48
            }
        ],
        38: [
            function (t, e, o) {
                'use strict';
                var n = t('./util/browser'),
                    i = t('./enum/Viewmode'),
                    r = t('./enum/Colors'),
                    a = t('./enum/WarpStyle'),
                    s = t('./util/easing'),
                    l = {
                        brand: n.valueFromHash('brand', !0),
                        debug: !1,
                        version: '2.0.35',
                        pageTitle: 'Matterport 3D Showcase',
                        token: n.valueFromCookie('token'),
                        autoplay: n.valueFromHash('play', !1) || !n.inIframe(),
                        autohelp: n.valueFromHash('help', null),
                        logLevel: n.valueFromHash('log', 2),
                        showNeighbors: !1,
                        crossOrigin: 'use-credentials',
                        fancierTransition: !1,
                        wireframe: !1,
                        skyboxWireframe: !1,
                        modelAlpha: 1,
                        highlightPanoSelection: !1,
                        showSweeps: !0,
                        showSkyboxes: !1,
                        showMesh: !0,
                        showFloors: !1,
                        captureErrors: !1,
                        maxMobileTextures: 12,
                        dollhouseFOV: 70,
                        dollhouseDefault: {
                            minDistance: 15,
                            minPolarAngle: THREE.Math.degToRad(25),
                            maxPolarAngle: THREE.Math.degToRad(65)
                        },
                        insideFOV: 70,
                        insideLookSpeed: 0.12,
                        insideLookLimitUp: 40,
                        insideLookLimitDown: - 40,
                        orthoBase: 10,
                        aspect: window.innerWidth / window.innerHeight,
                        hideReticuleTimeout: 1000,
                        signedUrlRefreshRate: 240,
                        analytics: {
                            inactivityThreshold: 30,
                            sessionTrackingRate: n.valueFromHash('sessionTrackingRate', 0.15),
                            maxTrackedErrors: 20,
                            sessionDurationPingFrequency: 10
                        },
                        flydown: {
                            movementEasing: 'easeInOutQuad',
                            movementDelay: 0.001,
                            rotationEasing: 'easeInOutQuad',
                            rotationDelay: 0.5,
                            modelTextureDelay: 0.75,
                            skyboxDelay: 0.75
                        },
                        transition: {
                            flySpeed: 0.01,
                            flyTime: 750,
                            flytimeMaxDistanceThreshold: 5,
                            flytimeDistanceMultiplier: 150,
                            blur: 0.8,
                            movementEasing: 'easeInOutQuad',
                            blendEasing: 'easeInOutQuad'
                        },
                        path: {
                            color: r.newBlue,
                            colorUp: r._desat(r.newBlue, 0.5),
                            colorDown: r._darken(r.newBlue, 0.35),
                            opacity: 0.5,
                            style: 'ribbon',
                            height: 0.025,
                            ribbonWidth: 0.24,
                            outsideHeight: 0.5,
                            waypointRadius: 0.5,
                            waypointIndoorRadius: 0.24,
                            pulseMarkers: n.valueFromHash('ppm', !0),
                            waypointPulse: 1000,
                            preferShort: n.valueFromHash('shortStep', !1),
                            typ: a.BLACK,
                            mapGuides: n.valueFromHash('guides', !0),
                            alwaysShow: n.valueFromHash('paths', !1),
                            fadeInTime: 400,
                            fadeOutTime: 300
                        },
                        warp: {
                            nearPanoDist: 0.1,
                            matchCam: !1,
                            blur: 0.33,
                            fastTime: 1500,
                            teleportTime: 1500,
                            outsideTime: 2000,
                            lookAheadDist: 1.55,
                            softPushDist: 0.37,
                            softPushEnd: 0.3,
                            softBendAngle: 8,
                            softBendTilt: 4,
                            softBendEnd: 0.3,
                            doBurns: n.valueFromHash('kb', !0),
                            burnsAngle: n.valueFromHash('bdeg', 15),
                            burnsDollAngle: n.valueFromHash('bhdeg', 15),
                            maxTurnPerSec: 500,
                            turnFriction: 0.2,
                            flySpeed: 0.01,
                            minWarpTime: 1200,
                            moveDelay: 1000,
                            tourStepDelay: 6000,
                            timePerMeter: 800,
                            movementEasing: 'easeInOutQuad',
                            blendEasing: 'easeInOutQuad',
                            showBunny: !1,
                            eOrder: 'YXZ'
                        },
                        rotationFriction: 0.09,
                        rotationAccelerationInside: 4.5,
                        rotationAccelerationOutside: 2.5,
                        rotationAfterMoveMultiplier: 30,
                        rotationAfterMoveHistoryCount: 5,
                        panFriction: 0.09,
                        panAccelerationOutside: 1,
                        startMode: n.valueFromHash('startMode', i.DOLLHOUSE),
                        onload: n.valueFromHash('onload', i.PANORAMA),
                        zoomNearLimit: 0.1,
                        zoomFarLimit: 10,
                        navigation: {
                            panoScores: !1,
                            mouseDirection: !0,
                            filterStrictness: 0.75,
                            angleFactor: - 30,
                            directionFactor: 10,
                            distanceFactor: - 1
                        },
                        secretPanelWord: [
                            38,
                            38,
                            40,
                            40,
                            37,
                            39,
                            37,
                            39,
                            66,
                            65
                        ],
                        console: n.valueFromHash('console', !1),
                        noMeshFloorPositionOffset: new THREE.Vector3(0, - 1.2, 0),
                        panoramaNeighbourMaxDistance: 5,
                        panoFloorClickRadius: 0.35,
                        showScreenshotLocations: !1,
                        showAxis: !1,
                        showNeighbourRaycasts: !1,
                        colorMarkerOnLoad: !1,
                        colorMarkerByFloor: !1
                    };
                l = $.extend(l, {
                    reticuleOpacityTransitionTime: 250,
                    reticuleColor: r.newBlue,
                    markerOpacityTransitionTime: 500,
                    panorama: {
                        transitionTime: 1000,
                        modelAlpha: 0,
                        modelAlphaDelay: l.flydown.modelTextureDelay,
                        modelAlphaLength: 1,
                        skyboxOpacity: 1,
                        skyboxOpacityDelay: l.flydown.skyboxDelay,
                        skyboxOpacityLength: 0.9,
                        fovLength: 1,
                        fovDelay: 0,
                        cameraMatrixDuration: 0.8,
                        cameraMatrixDelay: 0,
                        cameraMatrixEase: s.easeInCubic,
                        reticuleOpacity: 1,
                        markerOpacity: 0.3,
                        markerOpacityOnHover: 1
                    },
                    dollhouse: {
                        transitionTime: 1000,
                        modelAlpha: 1,
                        modelAlphaDelay: 0,
                        modelAlphaLength: 1 - l.flydown.modelTextureDelay,
                        skyboxOpacity: 0,
                        skyboxOpacityDelay: 0,
                        skyboxOpacityLength: 1 - l.flydown.skyboxDelay,
                        fovLength: 1,
                        fovDelay: 0,
                        cameraMatrixDuration: 0.8,
                        cameraMatrixDelay: 0.3,
                        cameraMatrixEase: s.easeInCubic,
                        reticuleOpacity: 1,
                        markerOpacity: 0,
                        markerOpacityOnHover: 0
                    },
                    floorplan: {
                        transitionTime: 1000,
                        modelAlpha: 1,
                        modelAlphaDelay: 0,
                        modelAlphaLength: 1 - l.flydown.modelTextureDelay,
                        skyboxOpacity: 0,
                        skyboxOpacityDelay: 0,
                        skyboxOpacityLength: 1 - l.flydown.skyboxDelay,
                        fovLength: 1,
                        fovDelay: 0,
                        cameraMatrixDuration: 0.5,
                        cameraMatrixDelay: 0,
                        cameraMatrixEase: s.easeOutCubic,
                        reticuleOpacity: 1,
                        markerOpacity: 0,
                        markerOpacityOnHover: 0
                    },
                    transitioning: {
                        reticuleOpacity: 0
                    },
                    'floorplan-dollhouse': {
                        rotationDelay: 0,
                        rotationDuration: 1
                    },
                    'floorplan-panorama': {
                        rotationDelay: 0.5,
                        rotationDuration: 1
                    },
                    'dollhouse-panorama': {
                        rotationDelay: 0.5,
                        rotationDuration: 1
                    },
                    'dollhouse-floorplan': {
                        rotationDelay: 0,
                        rotationDuration: 1,
                        cameraMatrixDuration: 1.05,
                        cameraMatrixDelay: 0.5
                    },
                    'panorama-dollhouse': {
                        rotationDelay: 0,
                        rotationDuration: 0.5
                    },
                    'panorama-floorplan': {
                        transitionTime: 1500,
                        rotationDelay: 0,
                        rotationDuration: 0.5
                    }
                }),
                    e.exports = l
            },
            {
                './enum/Colors': 10,
                './enum/Viewmode': 11,
                './enum/WarpStyle': 12,
                './util/browser': 44,
                './util/easing': 46
            }
        ],
        39: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    var n = t('./settings');
                    e.exports = {
                        cube: {
                            uniforms: {
                                tCube: {
                                    type: 't',
                                    value: null
                                },
                                opacity: {
                                    type: 'f',
                                    value: 1
                                }
                            },
                            vertexShader: o('dmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uOwoKdm9pZCBtYWluKCkgewogIHZXb3JsZFBvc2l0aW9uID0gcG9zaXRpb247CiAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApOwp9Cg==', 'base64'),
                            fragmentShader: o('dW5pZm9ybSBzYW1wbGVyQ3ViZSB0Q3ViZTsKdW5pZm9ybSBmbG9hdCBvcGFjaXR5OwoKdmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uOwoKdm9pZCBtYWluKCkgewogIHZlYzQgdENvbG9yID0gdGV4dHVyZUN1YmUoIHRDdWJlLCB2ZWMzKCAtdldvcmxkUG9zaXRpb24ueCwgdldvcmxkUG9zaXRpb24ueXogKSApOwogIGdsX0ZyYWdDb2xvciA9IHZlYzQodENvbG9yLnJnYiwgb3BhY2l0eSk7Cn0K', 'base64')
                        },
                        model: {
                            uniforms: {
                                map: {
                                    type: 't',
                                    value: null
                                },
                                modelAlpha: {
                                    type: 'f',
                                    value: n.modelAlpha
                                },
                                opacity: {
                                    type: 'f',
                                    value: 1
                                },
                                progress: {
                                    type: 'f',
                                    value: 0
                                },
                                stasis: {
                                    type: 'i',
                                    value: 0
                                },
                                blackout: {
                                    type: 'i',
                                    value: 0
                                },
                                pano0Map: {
                                    type: 't',
                                    value: null
                                },
                                pano0Position: {
                                    type: 'v3',
                                    value: new THREE.Vector3
                                },
                                pano0Matrix: {
                                    type: 'm4',
                                    value: new THREE.Matrix4
                                },
                                pano1Map: {
                                    type: 't',
                                    value: null
                                },
                                pano1Position: {
                                    type: 'v3',
                                    value: new THREE.Vector3
                                },
                                pano1Matrix: {
                                    type: 'm4',
                                    value: new THREE.Matrix4
                                }
                            },
                            vertexShader: o('dW5pZm9ybSB2ZWMzIHBhbm8wUG9zaXRpb247CnVuaWZvcm0gbWF0NCBwYW5vME1hdHJpeDsKCnVuaWZvcm0gdmVjMyBwYW5vMVBvc2l0aW9uOwp1bmlmb3JtIG1hdDQgcGFubzFNYXRyaXg7Cgp2YXJ5aW5nIHZlYzIgdlV2Owp2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb24wOwp2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb24xOwoKdm9pZCBtYWluKCkgewoKICB2VXYgPSB1djsKICB2ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7CgogIHZlYzMgcG9zaXRpb25Mb2NhbFRvUGFub0NlbnRlcjAgPSB3b3JsZFBvc2l0aW9uLnh5eiAtIHBhbm8wUG9zaXRpb247CiAgdldvcmxkUG9zaXRpb24wID0gKHZlYzQocG9zaXRpb25Mb2NhbFRvUGFub0NlbnRlcjAsIDEuMCkgKiBwYW5vME1hdHJpeCkueHl6OwogIHZXb3JsZFBvc2l0aW9uMC54ICo9IC0xLjA7CgogIHZlYzMgcG9zaXRpb25Mb2NhbFRvUGFub0NlbnRlcjEgPSB3b3JsZFBvc2l0aW9uLnh5eiAtIHBhbm8xUG9zaXRpb247CiAgdldvcmxkUG9zaXRpb24xID0gKHZlYzQocG9zaXRpb25Mb2NhbFRvUGFub0NlbnRlcjEsIDEuMCkgKiBwYW5vMU1hdHJpeCkueHl6OwogIHZXb3JsZFBvc2l0aW9uMS54ICo9IC0xLjA7CgogIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTsKCn0K', 'base64'),
                            fragmentShader: o('dW5pZm9ybSBzYW1wbGVyMkQgbWFwOwp1bmlmb3JtIGZsb2F0IG1vZGVsQWxwaGE7CnVuaWZvcm0gZmxvYXQgb3BhY2l0eTsKdW5pZm9ybSBmbG9hdCBwcm9ncmVzczsKdW5pZm9ybSBpbnQgc3Rhc2lzOwp1bmlmb3JtIGludCBibGFja291dDsKCnVuaWZvcm0gdmVjMyBwYW5vMFBvc2l0aW9uOwp1bmlmb3JtIHNhbXBsZXJDdWJlIHBhbm8wTWFwOwoKdW5pZm9ybSB2ZWMzIHBhbm8xUG9zaXRpb247CnVuaWZvcm0gc2FtcGxlckN1YmUgcGFubzFNYXA7Cgp2YXJ5aW5nIHZlYzIgdlV2Owp2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb24wOwp2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb24xOwoKdm9pZCBtYWluKCkgewoJdmVjMyBjcDAgPSB2V29ybGRQb3NpdGlvbjAueHl6OwoJdmVjMyBjcDEgPSB2V29ybGRQb3NpdGlvbjEueHl6OwoJaWYgKHN0YXNpcyE9MCkgewoJCWNwMCA9IG1peChjcDAsY3AxLHByb2dyZXNzKTsKCQljcDEgPSBjcDA7Cgl9Cgl2ZWM0IGNvbG9yRnJvbVBhbm8wID0gdGV4dHVyZUN1YmUoIHBhbm8wTWFwLCBjcDApOwoJdmVjNCBjb2xvckZyb21QYW5vMSA9IHRleHR1cmVDdWJlKCBwYW5vMU1hcCwgY3AxKTsKCgljb25zdCB2ZWM0IEJMQUNLID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApOwoJdmVjNCBjb2xvckZyb21QYW5vczsKCWlmIChibGFja291dCE9MCkgewoJCWNvbG9yRnJvbVBhbm9zID0gbWl4KGNvbG9yRnJvbVBhbm8wLCBCTEFDSywgbWluKDEuMCxwcm9ncmVzcyoyLjApKTsKCQljb2xvckZyb21QYW5vcyA9IG1peChjb2xvckZyb21QYW5vcywgY29sb3JGcm9tUGFubzEsIG1heCgwLjAscHJvZ3Jlc3MqMi4wLTEuMCkpOwoJfSBlbHNlIHsKCQljb2xvckZyb21QYW5vcyA9IG1peChjb2xvckZyb21QYW5vMCwgY29sb3JGcm9tUGFubzEsIHByb2dyZXNzKTsKCX0KCgl2ZWM0IGNvbG9yRnJvbVRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlV2ICk7Cgljb2xvckZyb21QYW5vcyA9IG1peChjb2xvckZyb21QYW5vcywgY29sb3JGcm9tVGV4dHVyZSwgbW9kZWxBbHBoYSk7CgoJZmxvYXQgd2hpdGVuZXNzID0gMS4wIC0gc21vb3Roc3RlcCgwLjEsIDAuMiwgb3BhY2l0eSk7Cgljb2xvckZyb21QYW5vcyA9IG1peChjb2xvckZyb21QYW5vcywgdmVjNCgwLjUsIDAuNSwgMC41LCAxLjApLCB3aGl0ZW5lc3MpOwoJZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvckZyb21QYW5vcy5yZ2IsIG9wYWNpdHkpOwp9Cg==', 'base64')
                        },
                        modelDollhouse: {
                            uniforms: {
                                map: {
                                    type: 't',
                                    value: null
                                },
                                opacity: {
                                    type: 'f',
                                    value: 1
                                }
                            },
                            vertexShader: o('dmFyeWluZyB2ZWMyIHZVdjsKCnZvaWQgbWFpbigpIHsKCiAgdlV2ID0gdXY7CiAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApOwoKfQo=', 'base64'),
                            fragmentShader: o('dW5pZm9ybSBzYW1wbGVyMkQgbWFwOwp1bmlmb3JtIGZsb2F0IG9wYWNpdHk7CnZhcnlpbmcgdmVjMiB2VXY7Cgp2ZWM0IHdoaXRlID0gdmVjNCgwLjUsIDAuNSwgMC41LCAxLjApOwoKdm9pZCBtYWluKCkgewoKICB2ZWM0IGNvbG9yRnJvbVRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlV2ICk7CiAgZmxvYXQgd2hpdGVuZXNzID0gMS4wIC0gc21vb3Roc3RlcCgwLjEsIDAuMiwgb3BhY2l0eSk7CiAgY29sb3JGcm9tVGV4dHVyZSA9IG1peChjb2xvckZyb21UZXh0dXJlLCB3aGl0ZSwgd2hpdGVuZXNzKTsKICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yRnJvbVRleHR1cmUucmdiLCBvcGFjaXR5KTsKCn0K', 'base64')
                        },
                        ribbon: {
                            uniforms: {
                                map: {
                                    type: 't',
                                    value: null
                                },
                                opacity: {
                                    type: 'f',
                                    value: 1
                                },
                                color: {
                                    type: 'c',
                                    value: new THREE.Color(16711680)
                                }
                            },
                            vertexShader: o('dmFyeWluZyB2ZWMyIHZVdjsKCnZvaWQgbWFpbigpIHsKCiAgdlV2ID0gdXY7CiAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApOwoKfQo=', 'base64'),
                            fragmentShader: o('dW5pZm9ybSBzYW1wbGVyMkQgbWFwOwp1bmlmb3JtIGZsb2F0IG9wYWNpdHk7CnZhcnlpbmcgdmVjMiB2VXY7CnVuaWZvcm0gdmVjMyBjb2xvcjsKCnZvaWQgbWFpbigpIHsKCS8vIFRPRE8gYWRkIHNjcm9sbC1pbiBhbmQgcHVsc2luZyBiZWhhdmlvcnMKICB2ZWM0IGNvbG9yRnJvbVRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlV2ICk7CiAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgoY29sb3IucmdiKmNvbG9yRnJvbVRleHR1cmUucmdiKSwKICAJCQkJCQkob3BhY2l0eSpjb2xvckZyb21UZXh0dXJlLmEpKTsKfQo=', 'base64')
                        },
                        waypoint: {
                            uniforms: {
                                map: {
                                    type: 't',
                                    value: null
                                },
                                opacity: {
                                    type: 'f',
                                    value: 1
                                },
                                pulse: {
                                    type: 'f',
                                    value: 1
                                },
                                color: {
                                    type: 'c',
                                    value: new THREE.Color(16711680)
                                }
                            },
                            vertexShader: o('dmFyeWluZyB2ZWMyIHZVdjsKCnZvaWQgbWFpbigpIHsKCiAgdlV2ID0gdXY7CiAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApOwoKfQo=', 'base64'),
                            fragmentShader: o('dW5pZm9ybSBzYW1wbGVyMkQgbWFwOwp1bmlmb3JtIGZsb2F0IG9wYWNpdHk7CnVuaWZvcm0gZmxvYXQgcHVsc2U7IC8vIGFub3RoZXIgb3BhY2l0eSwgd2l0aCBhIGRpZmZlcmVudCBjbG9jawp2YXJ5aW5nIHZlYzIgdlV2Owp1bmlmb3JtIHZlYzMgY29sb3I7Cgp2b2lkIG1haW4oKSB7CgkvLyBUT0RPIGFkZCBzY3JvbGwtaW4gYW5kIHB1bHNpbmcgYmVoYXZpb3JzCiAgdmVjNCBjb2xvckZyb21UZXh0dXJlID0gdGV4dHVyZTJEKCBtYXAsIHZVdiApOwkJLy8gd2Ugb25seSB1c2UgdGhlIGFscGhhIQogIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IucmdiLAogIAkJCQkJCShwdWxzZSpvcGFjaXR5KmNvbG9yRnJvbVRleHR1cmUuYSkpOwp9Cg==', 'base64')
                        },
                        modelDebug: {
                            uniforms: {
                                map: {
                                    type: 't',
                                    value: null
                                },
                                modelAlpha: {
                                    type: 'f',
                                    value: n.modelAlpha
                                },
                                depthmapRatio: {
                                    type: 'f',
                                    value: 0
                                },
                                opacity: {
                                    type: 'f',
                                    value: 1
                                },
                                progress: {
                                    type: 'f',
                                    value: 0
                                },
                                considerOcclusion: {
                                    type: 'i',
                                    value: n.fancierTransition
                                },
                                highlightPanoSelection: {
                                    type: 'i',
                                    value: 0
                                },
                                useThirdPano: {
                                    type: 'i',
                                    value: n.useThirdPano
                                },
                                pano0Map: {
                                    type: 't',
                                    value: null
                                },
                                pano0Depth: {
                                    type: 't',
                                    value: null
                                },
                                pano0Position: {
                                    type: 'v3',
                                    value: new THREE.Vector3
                                },
                                pano0Matrix: {
                                    type: 'm4',
                                    value: new THREE.Matrix4
                                },
                                pano0Weight: {
                                    type: 'f',
                                    value: n.transition.pano0Weight
                                },
                                pano1Map: {
                                    type: 't',
                                    value: null
                                },
                                pano1Depth: {
                                    type: 't',
                                    value: null
                                },
                                pano1Position: {
                                    type: 'v3',
                                    value: new THREE.Vector3
                                },
                                pano1Matrix: {
                                    type: 'm4',
                                    value: new THREE.Matrix4
                                },
                                pano1Weight: {
                                    type: 'f',
                                    value: n.transition.pano1Weight
                                },
                                pano2Map: {
                                    type: 't',
                                    value: null
                                },
                                pano2Depth: {
                                    type: 't',
                                    value: null
                                },
                                pano2Position: {
                                    type: 'v3',
                                    value: new THREE.Vector3
                                },
                                pano2Matrix: {
                                    type: 'm4',
                                    value: new THREE.Matrix4
                                },
                                pano2Weight: {
                                    type: 'f',
                                    value: n.transition.pano2Weight
                                }
                            },
                            vertexShader: o('dW5pZm9ybSB2ZWMzIHBhbm8wUG9zaXRpb247CnVuaWZvcm0gbWF0NCBwYW5vME1hdHJpeDsKCnVuaWZvcm0gdmVjMyBwYW5vMVBvc2l0aW9uOwp1bmlmb3JtIG1hdDQgcGFubzFNYXRyaXg7Cgp1bmlmb3JtIHZlYzMgcGFubzJQb3NpdGlvbjsKdW5pZm9ybSBtYXQ0IHBhbm8yTWF0cml4OwoKdmFyeWluZyB2ZWMyIHZVdjsKdmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uMDsKdmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uMTsKdmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uMjsKCnZhcnlpbmcgdmVjNCB3b3JsZFBvc2l0aW9uOwoKdm9pZCBtYWluKCkgewoKICB2VXYgPSB1djsKICB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KHBvc2l0aW9uLCAxLjApOwoKICB2ZWMzIHBvc2l0aW9uTG9jYWxUb1Bhbm9DZW50ZXIwID0gd29ybGRQb3NpdGlvbi54eXogLSBwYW5vMFBvc2l0aW9uOwogIHZXb3JsZFBvc2l0aW9uMCA9ICh2ZWM0KHBvc2l0aW9uTG9jYWxUb1Bhbm9DZW50ZXIwLCAxLjApICogcGFubzBNYXRyaXgpLnh5ejsKICB2V29ybGRQb3NpdGlvbjAueCAqPSAtMS4wOwoKICB2ZWMzIHBvc2l0aW9uTG9jYWxUb1Bhbm9DZW50ZXIxID0gd29ybGRQb3NpdGlvbi54eXogLSBwYW5vMVBvc2l0aW9uOwogIHZXb3JsZFBvc2l0aW9uMSA9ICh2ZWM0KHBvc2l0aW9uTG9jYWxUb1Bhbm9DZW50ZXIxLCAxLjApICogcGFubzFNYXRyaXgpLnh5ejsKICB2V29ybGRQb3NpdGlvbjEueCAqPSAtMS4wOwoKICB2ZWMzIHBvc2l0aW9uTG9jYWxUb1Bhbm9DZW50ZXIyID0gd29ybGRQb3NpdGlvbi54eXogLSBwYW5vMlBvc2l0aW9uOwogIHZXb3JsZFBvc2l0aW9uMiA9ICh2ZWM0KHBvc2l0aW9uTG9jYWxUb1Bhbm9DZW50ZXIyLCAyLjApICogcGFubzJNYXRyaXgpLnh5ejsKICB2V29ybGRQb3NpdGlvbjIueCAqPSAtMS4wOwoKICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7Cgp9Cg==', 'base64'),
                            fragmentShader: o('dW5pZm9ybSBzYW1wbGVyMkQgbWFwOwp1bmlmb3JtIGZsb2F0IGRlcHRobWFwUmF0aW87CnVuaWZvcm0gZmxvYXQgbW9kZWxBbHBoYTsKdW5pZm9ybSBmbG9hdCBvcGFjaXR5Owp1bmlmb3JtIGZsb2F0IHByb2dyZXNzOwp1bmlmb3JtIGludCBjb25zaWRlck9jY2x1c2lvbjsKdW5pZm9ybSBpbnQgaGlnaGxpZ2h0UGFub1NlbGVjdGlvbjsKdW5pZm9ybSBpbnQgdXNlVGhpcmRQYW5vOwoKdW5pZm9ybSB2ZWMzIHBhbm8wUG9zaXRpb247CnVuaWZvcm0gc2FtcGxlckN1YmUgcGFubzBNYXA7CnVuaWZvcm0gc2FtcGxlckN1YmUgcGFubzBEZXB0aDsKdW5pZm9ybSBmbG9hdCBwYW5vMFdlaWdodDsKCnVuaWZvcm0gdmVjMyBwYW5vMVBvc2l0aW9uOwp1bmlmb3JtIHNhbXBsZXJDdWJlIHBhbm8xTWFwOwp1bmlmb3JtIHNhbXBsZXJDdWJlIHBhbm8xRGVwdGg7CnVuaWZvcm0gZmxvYXQgcGFubzFXZWlnaHQ7Cgp1bmlmb3JtIHZlYzMgcGFubzJQb3NpdGlvbjsKdW5pZm9ybSBzYW1wbGVyQ3ViZSBwYW5vMk1hcDsKdW5pZm9ybSBzYW1wbGVyQ3ViZSBwYW5vMkRlcHRoOwp1bmlmb3JtIGZsb2F0IHBhbm8yV2VpZ2h0OwoKdmFyeWluZyB2ZWMyIHZVdjsKdmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uMDsKdmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uMTsKdmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uMjsKCnZhcnlpbmcgdmVjNCB3b3JsZFBvc2l0aW9uOwoKdm9pZCBtYWluKCkgewoKICB2ZWM0IGRlcHRoRnJvbVBhbm8wID0gdGV4dHVyZUN1YmUoIHBhbm8wRGVwdGgsIHZXb3JsZFBvc2l0aW9uMC54eXogKTsKICB2ZWM0IGRlcHRoRnJvbVBhbm8xID0gdGV4dHVyZUN1YmUoIHBhbm8xRGVwdGgsIHZXb3JsZFBvc2l0aW9uMS54eXogKTsKICB2ZWM0IGRlcHRoRnJvbVBhbm8yID0gdGV4dHVyZUN1YmUoIHBhbm8yRGVwdGgsIHZXb3JsZFBvc2l0aW9uMi54eXogKTsKCiAgdmVjNCBjb2xvckZyb21QYW5vMCA9IHRleHR1cmVDdWJlKCBwYW5vME1hcCwgdldvcmxkUG9zaXRpb24wLnh5eiApOwogIHZlYzQgY29sb3JGcm9tUGFubzEgPSB0ZXh0dXJlQ3ViZSggcGFubzFNYXAsIHZXb3JsZFBvc2l0aW9uMS54eXogKTsKICB2ZWM0IGNvbG9yRnJvbVBhbm8yID0gdGV4dHVyZUN1YmUoIHBhbm8yTWFwLCB2V29ybGRQb3NpdGlvbjIueHl6ICk7CgogIGZsb2F0IGRpc3RhbmNlVG9QYW5vMCA9IGRpc3RhbmNlKHdvcmxkUG9zaXRpb24ueHl6LCBwYW5vMFBvc2l0aW9uKTsKICBmbG9hdCBkaXN0YW5jZVRvUGFubzEgPSBkaXN0YW5jZSh3b3JsZFBvc2l0aW9uLnh5eiwgcGFubzFQb3NpdGlvbik7CiAgZmxvYXQgZGlzdGFuY2VUb1Bhbm8yID0gZGlzdGFuY2Uod29ybGRQb3NpdGlvbi54eXosIHBhbm8yUG9zaXRpb24pOwoKICBmbG9hdCBjYW1lcmFUb1Bhbm8wID0gZGlzdGFuY2UoY2FtZXJhUG9zaXRpb24ueHl6LCBwYW5vMFBvc2l0aW9uKTsKICBmbG9hdCBjYW1lcmFUb1Bhbm8xID0gZGlzdGFuY2UoY2FtZXJhUG9zaXRpb24ueHl6LCBwYW5vMVBvc2l0aW9uKTsKICBmbG9hdCBjYW1lcmFUb1Bhbm8yID0gZGlzdGFuY2UoY2FtZXJhUG9zaXRpb24ueHl6LCBwYW5vMlBvc2l0aW9uKTsKCiAgZmxvYXQgY29udHJpYnV0aW9uRnJvbVBhbm8wID0gY2FtZXJhVG9QYW5vMCA9PSAwLjAgPyAxMDAwLjAgOiBwYW5vMFdlaWdodCAvIGNhbWVyYVRvUGFubzA7CiAgZmxvYXQgY29udHJpYnV0aW9uRnJvbVBhbm8xID0gY2FtZXJhVG9QYW5vMSA9PSAwLjAgPyAxMDAwLjAgOiBwYW5vMVdlaWdodCAvIGNhbWVyYVRvUGFubzE7CiAgZmxvYXQgY29udHJpYnV0aW9uRnJvbVBhbm8yID0gY2FtZXJhVG9QYW5vMiA9PSAwLjAgPyAxMDAwLjAgOiBwYW5vMldlaWdodCAvIGNhbWVyYVRvUGFubzI7CgogIGNvbnRyaWJ1dGlvbkZyb21QYW5vMCAqPSAxLjAgLyBkaXN0YW5jZVRvUGFubzA7CiAgY29udHJpYnV0aW9uRnJvbVBhbm8xICo9IDEuMCAvIGRpc3RhbmNlVG9QYW5vMTsKICBjb250cmlidXRpb25Gcm9tUGFubzIgKj0gMS4wIC8gZGlzdGFuY2VUb1Bhbm8yOwoKICBpZihjb25zaWRlck9jY2x1c2lvbiA9PSAxKSB7CiAgICBib29sIG9jY2x1ZGVkRnJvbVBhbm8wID0gZGlzdGFuY2VUb1Bhbm8wIC8gMTAuMCA+IDEuMDEgLSBkZXB0aEZyb21QYW5vMC54OwogICAgYm9vbCBvY2NsdWRlZEZyb21QYW5vMSA9IGRpc3RhbmNlVG9QYW5vMSAvIDEwLjAgPiAxLjAxIC0gZGVwdGhGcm9tUGFubzEueDsKICAgIGJvb2wgb2NjbHVkZWRGcm9tUGFubzIgPSBkaXN0YW5jZVRvUGFubzIgLyAxMC4wID4gMS4wMSAtIGRlcHRoRnJvbVBhbm8yLng7CgogICAgaWYob2NjbHVkZWRGcm9tUGFubzApe2NvbnRyaWJ1dGlvbkZyb21QYW5vMCAqPSAwLjE7fQogICAgaWYob2NjbHVkZWRGcm9tUGFubzEpe2NvbnRyaWJ1dGlvbkZyb21QYW5vMSAqPSAwLjE7fQogICAgaWYob2NjbHVkZWRGcm9tUGFubzIpe2NvbnRyaWJ1dGlvbkZyb21QYW5vMiAqPSAwLjE7fQogICAgLy9pZihvY2NsdWRlZEZyb21QYW5vMCAmJiBvY2NsdWRlZEZyb21QYW5vMSAmJiAhb2NjbHVkZWRGcm9tUGFubzIpIHsgY29udHJpYnV0aW9uRnJvbVBhbm8yICs9IDAuNTsgfQogIH0KCiAgZmxvYXQgY29udHJpYnV0aW9uU3VtID0gY29udHJpYnV0aW9uRnJvbVBhbm8wICsgY29udHJpYnV0aW9uRnJvbVBhbm8xICsgY29udHJpYnV0aW9uRnJvbVBhbm8yOwogIGNvbnRyaWJ1dGlvbkZyb21QYW5vMCAvPSBjb250cmlidXRpb25TdW07CiAgY29udHJpYnV0aW9uRnJvbVBhbm8xIC89IGNvbnRyaWJ1dGlvblN1bTsKICBjb250cmlidXRpb25Gcm9tUGFubzIgLz0gY29udHJpYnV0aW9uU3VtOwoKICB2ZWM0IGNvbG9yRnJvbVBhbm9zID0gY29sb3JGcm9tUGFubzAgKiBjb250cmlidXRpb25Gcm9tUGFubzA7CiAgY29sb3JGcm9tUGFub3MgKz0gY29sb3JGcm9tUGFubzEgKiBjb250cmlidXRpb25Gcm9tUGFubzE7CiAgY29sb3JGcm9tUGFub3MgKz0gY29sb3JGcm9tUGFubzIgKiBjb250cmlidXRpb25Gcm9tUGFubzI7CgogIHZlYzQgZGVwdGhGcm9tUGFub3MgPSBkZXB0aEZyb21QYW5vMCAqIGNvbnRyaWJ1dGlvbkZyb21QYW5vMDsKICBkZXB0aEZyb21QYW5vcyArPSBkZXB0aEZyb21QYW5vMSAqIGNvbnRyaWJ1dGlvbkZyb21QYW5vMTsKICBkZXB0aEZyb21QYW5vcyArPSBkZXB0aEZyb21QYW5vMiAqIGNvbnRyaWJ1dGlvbkZyb21QYW5vMjsKCiAgdmVjNCBjb2xvckZyb21UZXh0dXJlID0gdGV4dHVyZTJEKCBtYXAsIHZVdiApOwogIGNvbG9yRnJvbVBhbm9zID0gbWl4KGNvbG9yRnJvbVBhbm9zLCBjb2xvckZyb21UZXh0dXJlLCBtb2RlbEFscGhhKTsKCiAgaWYoaGlnaGxpZ2h0UGFub1NlbGVjdGlvbiA9PSAxKSB7CiAgICBjb2xvckZyb21QYW5vcy5yID0gY29udHJpYnV0aW9uRnJvbVBhbm8wOwogICAgY29sb3JGcm9tUGFub3MuZyA9IGNvbnRyaWJ1dGlvbkZyb21QYW5vMTsKICAgIGNvbG9yRnJvbVBhbm9zLmIgPSBjb250cmlidXRpb25Gcm9tUGFubzI7CiAgfQoKICBnbF9GcmFnQ29sb3IgPSB2ZWM0KG1peChjb2xvckZyb21QYW5vcywgZGVwdGhGcm9tUGFub3MsIGRlcHRobWFwUmF0aW8pLnJnYiwgb3BhY2l0eSk7Cgp9Cg==', 'base64')
                        },
                        customDepth: {
                            uniforms: {
                                panoPosition: {
                                    type: 'v3',
                                    value: new THREE.Vector3
                                }
                            },
                            vertexShader: o('dmFyeWluZyB2ZWM0IHdvcmxkUG9zaXRpb247Cgp2b2lkIG1haW4oKSB7CgogIHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7CiAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApOwoKfQo=', 'base64'),
                            fragmentShader: o('dW5pZm9ybSB2ZWMzIHBhbm9Qb3NpdGlvbjsKdmFyeWluZyB2ZWM0IHdvcmxkUG9zaXRpb247Cgp2b2lkIG1haW4oKSB7CgogIGZsb2F0IGRlcHRoID0gZGlzdGFuY2Uod29ybGRQb3NpdGlvbi54eXosIHBhbm9Qb3NpdGlvbik7CiAgZmxvYXQgY29sb3IgPSAxLjAgLSBkZXB0aCAvIDEwLjA7CiAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciwgY29sb3IsIGNvbG9yLCAxLjApOwoKfQo=', 'base64')
                        },
                        skysphere: {
                            uniforms: {
                                radius: {
                                    type: 'f',
                                    value: 0
                                }
                            },
                            vertexShader: o('dmFyeWluZyB2ZWM0IHdvcmxkUG9zaXRpb247Cgp2b2lkIG1haW4oKSB7CgogIHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7CiAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApOwoKfQo=', 'base64'),
                            fragmentShader: o('dmFyeWluZyB2ZWM0IHdvcmxkUG9zaXRpb247CnVuaWZvcm0gZmxvYXQgcmFkaXVzOwoKdm9pZCBtYWluKCkgewoKICB2ZWM0IHRvcENvbG9yID0gdmVjNCgwLjA5NCwgMC4xMDIsIDAuMTEsIDEuMCk7CiAgdmVjNCBib3R0b21Db2xvciA9IHZlYzQoMC4yLCAwLjIxNiwgMC4yMzUsIDEuMCk7CiAgZmxvYXQgbm9ybWFsaXplZEhlaWdodCA9ICh3b3JsZFBvc2l0aW9uLnkgKyByYWRpdXMpIC8gKHJhZGl1cyAqIDIuMCk7CiAgZmxvYXQgcmF0aW8gPSBzbW9vdGhzdGVwKDAuMCwgMC41LCBub3JtYWxpemVkSGVpZ2h0KTsKICBnbF9GcmFnQ29sb3IgPSBtaXgoYm90dG9tQ29sb3IsIHRvcENvbG9yLCByYXRpbyk7Cgp9Cg==', 'base64')
                        }
                    }
                }).call(this, t('buffer').Buffer)
            },
            {
                './settings': 38,
                buffer: 52
            }
        ],
        40: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    var n = t('url'),
                        i = t('./settings'),
                        r = t('./util/logger'),
                        a = t('./objects/Panorama'),
                        s = new r(o),
                        l = t('./objects/Model'),
                        h = t('./shaders'),
                        c = t('./util/transitions'),
                        u = t('./objects/Chunk'),
                        p = t('./objects/Reticule'),
                        d = t('./objects/Skybox'),
                        m = t('./objects/Floor'),
                        f = t('./cameras/DollhouseCamera'),
                        g = t('./cameras/FloorplanCamera'),
                        y = t('./cameras/PanoramaCamera'),
                        v = t('./controls/DollhouseControls'),
                        b = t('./controls/FloorplanControls'),
                        w = t('./controls/PanoramaControls');
                    THREE.ImageUtils.crossOrigin = i.crossOrigin,
                        e.exports = {
                            shaders: h,
                            transitions: c,
                            Model: l,
                            Chunk: u,
                            Floor: m,
                            Skybox: d,
                            Reticule: p,
                            Panorama: a,
                            DollhouseCamera: f,
                            FloorplanCamera: g,
                            PanoramaCamera: y,
                            DollhouseControls: v,
                            FloorplanControls: b,
                            PanoramaControls: w,
                            getModel: function (t) {
                                if (!t.url) throw 'getModel(): missing parameter "url"';
                                if (t.autoload = void 0 !== t.autoload ? t.autoload : !0, t.url.match(/^https?/)) {
                                    var e = n.parse(t.url);
                                    this.urlBase = e.protocol + '//' + e.host + '/',
                                        this.urlModel = t.url
                                } else this.urlBase = window.location.protocol + '//' + window.location.host + '/',
                                    this.urlModel = this.urlBase + 'api/player/models/' + t.url;
                                this.urlMaintenance = this.urlBase + 'maintenance.json',
                                    t.urlFiles = this.urlModel + (this.urlModel.match(/\/$/) ? 'files' : '/files');
                                var o = this._getPlatformError();
                                return o ? $.Deferred().reject(o).promise()  : (this.options = t, this._loadModel().then(this._buildModel.bind(this)))
                            },
                            _getPlatformError: function () {
                                return 'IE' === $.ua.browser.name && parseInt($.ua.browser.major) < 11 ? 'webgl-unsupported' : 'iOS' === $.ua.os.name && /^[0-7]/.test($.ua.os.version) ? 'webgl-ios' : Modernizr.webgl ? null : 'webgl-unsupported'
                            },
                            _loadModel: function () {
                                var t = $.Deferred();
                                if (this.options.data) return s.info('Using prefetched model data'),
                                    t.resolve(this.options.data).promise();
                                var e = this;
                                return $.ajax(e.urlModel, {
                                    crossDomain: !0,
                                    dataType: 'json',
                                    beforeSend: function (t) {
                                        i.token ? (s.debug('Token present, using authorization header'), t.setRequestHeader('Authorization', 'Token ' + i.token))  : s.debug('Token not present, hoping my cookie has auth info...')
                                    }
                                }).done(function (e) {
                                    t.resolve(e)
                                }).fail(function () {
                                    s.debug('initial model retrieval failed, checking if in maintenance mode'),
                                        $.ajax(e.urlMaintenance).done(function (e) {
                                            s.debug('maintenance mode:' + e.maintenance_mode),
                                                t.reject(e.maintenance_mode ? 'loading-failed-maintenance' : 'loading-failed')
                                        }).fail(function (e) {
                                            s.debug('No maintenance mode detected, defaulting to missing model'),
                                                t.reject('loading-failed')
                                        })
                                }),
                                    t.promise()
                            },
                            _buildModel: function (t) {
                                var e = $.Deferred();
                                t.images.forEach(function (t) {
                                    'string' == typeof t.metadata && (t.metadata = JSON.parse(t.metadata))
                                });
                                var o = new l(this.options, t);
                                return this.options.autoload ? o.load(function () {
                                    e.resolve(o)
                                }, function (t) {
                                    e.reject(t)
                                })  : e.resolve(o),
                                    e
                            }
                        }
                }).call(this, '/js/showcase.js')
            },
            {
                './cameras/DollhouseCamera': 2,
                './cameras/FloorplanCamera': 3,
                './cameras/PanoramaCamera': 4,
                './controls/DollhouseControls': 5,
                './controls/FloorplanControls': 6,
                './controls/PanoramaControls': 8,
                './objects/Chunk': 27,
                './objects/Floor': 29,
                './objects/Model': 30,
                './objects/Panorama': 32,
                './objects/Reticule': 33,
                './objects/Skybox': 35,
                './settings': 38,
                './shaders': 39,
                './util/logger': 48,
                './util/transitions': 51,
                url: 61
            }
        ],
        41: [
            function (t, e, o) {
                (function (o) {
                    'use strict';
                    function n(t, e) {
                        this.cache = {
                        },
                            this.sid = t.sid,
                            this.baseUrl = null,
                            this.formats = [
                                '*dam',
                                '*dam.lzma',
                                '*_obj.zip',
                                'pan/*.jpg',
                                '*texture_jpg_high/*.jpg',
                                '*texture_jpg_low/*.jpg',
                                '*.csv',
                                '*.modeldata'
                            ],
                            this.endpoint = e + '?type=2&filter=' + this.formats.join(',')
                    }
                    var i = t('./logger'),
                        r = t('../settings'),
                        a = new i(o);
                    n.prototype = {
                        init: function () {
                            return setInterval(function () {
                                a.debug('refreshing urls...'),
                                    this.refresh().done(function () {
                                        a.debug('refreshed')
                                    }).fail(function () {
                                        a.error('failed url refresh, urls might go stale soon')
                                    })
                            }.bind(this), 1000 * r.signedUrlRefreshRate),
                                this.refresh()
                        },
                        refresh: function () {
                            var t = $.Deferred();
                            return $.ajax(this.endpoint, {
                                crossDomain: !0,
                                dataType: 'json',
                                beforeSend: function (t) {
                                    r.token && t.setRequestHeader('Authorization', 'Token ' + r.token)
                                }
                            }).done(function (e) {
                                this.cache = e,
                                'base.url' in e && (this.baseUrl = e['base.url']),
                                    Object.keys(e).length > 0 ? t.resolve()  : t.reject('missing-urls')
                            }.bind(this)).fail(function (e) {
                                t.reject('loading-failed')
                            }),
                                t.promise()
                        },
                        get: function (t) {
                            console.log("get t:"+t)

                            var aaaa = this.cache[t] ? this.baseUrl ? this.baseUrl.replace('{{filename}}', t) + this.cache[t] : this.cache[t] : (a.debug('Did not find signed URL for ' + t), null)
                            console.log(aaaa)
                            return aaaa
                        },
                        count: function (t) {
                            for (var e = Object.keys(this.cache), o = 0, n = 0; n < e.length; n++) - 1 !== e[n].indexOf(t) && o++;
                            return o
                        }
                    },
                        e.exports = n
                }).call(this, '/js/util/ModelUrls.js')
            },
            {
                '../settings': 38,
                './logger': 48
            }
        ],
        42: [
            function (t, e, o) {
                'use strict';
                function n() {
                    this.list = [
                    ],
                        this.dict = {
                        },
                        this.length = 0,
                        this.neighbourMap = {
                        },
                        this.path_graph = null
                }
                var i = t('./common'),
                    r = t('../settings'),
                    a = t('../objects/Panorama'),
                    r = t('../settings'),
                    s = t('./PathGraph');
                n.prototype.forEach = function (t) {
                    for (var e = 0; e < this.list.length; e++) t(this.list[e])
                },
                    n.prototype.add = function (t) {
                        this.list.push(t),
                            this.dict[t.id] = t,
                            this.length++
                    },
                    n.prototype.extend = function (t) {
                        for (var e = 0; e < t.length; e++) this.add(t[e])
                    },
                    n.prototype.get = function (t) {
                        return this.dict[t]
                    },
                    n.prototype.filter = function (t) {
                        return this.list.filter(t)
                    },
                    n.prototype.find = function (t, e) {
                        var o = i.filterAll(this.list, t);
                        return 0 === o.length ? null : (e && e.forEach(function (t) {
                            o = i.stableSort(o, t)
                        }), o[0])
                    },
                    n.prototype.findByScore = function (t, e) {
                        var o = i.filterAll(this.list, t);
                        return 0 === o.length ? null : (o = o.map(function (t) {
                            return {
                                pano: t,
                                score: e.reduce(function (e, o) {
                                    return e + o(t)
                                }, 0)
                            }
                        }).sort(function (t, e) {
                            return e.score - t.score
                        }), r.navigation.panoScores && this.showPanoScores(o), o[0].pano)
                    },
                    n.prototype.showPanoScores = function (t) {
                        this.list.forEach(function (t) {
                            t.removeTextSprite()
                        });
                        var e = 6344768;
                        t.forEach(function (t) {
                            t.pano.addTextSprite(t.score.toFixed(2), e),
                                e = 16428055
                        })
                    },
                    n.prototype.isNeighbour = function (t, e) {
                        return this.neighbourMap[t.id][e.id]
                    },
                    n.prototype.getNeighbours = function (t) {
                        return this.neighbourMap[t.id]
                    },
                    n.prototype.setNeighbour = function (t, e, o) {
                        return this.neighbourMap[t.id] || (this.neighbourMap[t.id] = {
                        }),
                        this.neighbourMap[e.id] || (this.neighbourMap[e.id] = {
                        }),
                            this.neighbourMap[t.id][t.id] = !0,
                            this.neighbourMap[e.id][e.id] = !0,
                            this.neighbourMap[t.id][e.id] = o,
                            this.neighbourMap[e.id][t.id] = o,
                            this.neighbourMap[t.id]
                    },
                    n.prototype.findClosest = function (t, e) {
                        var o = e ? [
                            a.filters.inDirection(t, e, 0.75)
                        ] : [
                        ];
                        return this.find(o, [
                            a.sortFunctions.distanceToPoint(t)
                        ])
                    },
                    n.prototype.populate_path_graph = function () {
                        var t,
                            e,
                            o,
                            n,
                            i,
                            a,
                            l,
                            h,
                            c = Date.now(),
                            u = {
                            },
                            p = 0,
                            d = new THREE.Vector3(0, 0, 0);
                        for (t = 0; t < this.list.length; t += 1) {
                            i = this.list[t],
                                l = {
                                },
                                h = !1,
                                o = i.neighbourPanos || i.findNeighourPanos();
                            for (e in o) o[e] && (a = this.dict[e], r.path.preferShort ? (d.copy(i.floorPosition), d.sub(a.floorPosition), d.y = Math.max(0, Math.abs(d.y) - 0.2), d.y = Math.pow(4 * d.y, 1.5), n = d.lengthSquared())  : n = i.floorPosition.distanceTo(a.floorPosition), l[a.id] = n, h = !0);
                            h ? u[i.id] = l : p += 1
                        }
                        this.path_graph = new s(u),
                            console.log('graph ready in ' + (Date.now() - c) + 'ms, ' + p + ' had no neighbors')
                    },
                    e.exports = n
            },
            {
                '../objects/Panorama': 32,
                '../settings': 38,
                './PathGraph': 43,
                './common': 45
            }
        ],
        43: [
            function (t, e, o) {
                'use strict';
                var n = function (t) {
                    var e = function (t) {
                            var e,
                                o = [
                                ];
                            for (e in t) Object.prototype.hasOwnProperty.call(t, e) && o.push(e);
                            return o
                        },
                        o = function (t, e) {
                            return parseFloat(t) - parseFloat(e)
                        },
                        n = function (n, i, r, a) {
                            a = a || 1 / 0;
                            var s,
                                l = {
                                },
                                h = {
                                    0: [
                                        i
                                    ]
                                },
                                c = {
                                },
                                u = function (t, e) {
                                    var o = '' + t;
                                    h[o] || (h[o] = [
                                    ]),
                                        h[o].push(e)
                                };
                            for (l[i] = 0; h && (s = e(h)).length; ) {
                                s.sort(o);
                                var p = s[0],
                                    d = h[p],
                                    m = d.shift(),
                                    f = parseFloat(p),
                                    g = n[m] || {
                                        };
                                d.length || delete h[p];
                                for (var y in g) if (Object.prototype.hasOwnProperty.call(g, y)) {
                                    var v = g[y],
                                        b = v + f,
                                        w = l[y];
                                    (w === t || w > b) && (l[y] = b, u(b, y), c[y] = m)
                                }
                            }
                            return l[r] === t ? null : c
                        },
                        i = function (t, e) {
                            for (var o, n = [
                            ], i = e; i; ) n.push(i),
                                o = t[i],
                                i = t[i];
                            return n.reverse(),
                                n
                        },
                        r = function (t, e) {
                            for (var o, r, a, s = e.shift(), l = [
                            ]; e.length; ) {
                                if (o = e.shift(), r = n(t, s, o), !r) return null;
                                if (a = i(r, o), !e.length) return l.concat(a);
                                l.push.apply(l, a.slice(0, - 1)),
                                    s = o
                            }
                        },
                        a = function (t, e) {
                            try {
                                return Array.prototype.slice.call(t, e)
                            } catch (o) {
                                for (var n = [
                                ], i = e || 0, r = t.length; r > i; ++i) n.push(t[i]);
                                return n
                            }
                        },
                        s = function (t) {
                            this.map = t
                        };
                    return s.prototype.findShortestPath = function (t, e) {
                        return '[object Array]' === Object.prototype.toString.call(t) ? r(this.map, t)  : 2 === arguments.length ? r(this.map, [
                            t,
                            e
                        ])  : r(this.map, a(arguments))
                    },
                        s.findShortestPath = function (t, e, o) {
                            return '[object Array]' === Object.prototype.toString.call(e) ? r(t, e)  : 3 === arguments.length ? r(t, [
                                e,
                                o
                            ])  : r(t, a(arguments, 1))
                        },
                        s
                }();
                e.exports = n
            },
            {
            }
        ],
        44: [
            function (t, e, o) {
                'use strict';
                e.exports = {
                    isFullscreen: function () {
                        return document.fullscreenElement || document.mozFullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement
                    },
                    supportsFullscreen: function () {
                        return document.fullscreenEnabled || document.mozFullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled
                    },
                    isPointerLocked: function () {
                        return document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement
                    },
                    requestFullscreen: function (t, e) {
                        t.requestFullscreen ? t.requestFullscreen()  : t.mozRequestFullScreen ? t.mozRequestFullScreen()  : t.webkitRequestFullscreen ? t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)  : t.msRequestFullscreen && t.msRequestFullscreen(),
                        e && $(document).on('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange', browser.requestPointerLock)
                    },
                    requestPointerLock: function () {
                        var t;
                        if (document.fullscreenElement) t = document.fullscreenElement();
                        else if (document.mozFullscreenElement) t = document.mozFullscreenElement();
                        else if (document.mozFullScreenElement) t = document.mozFullScreenElement();
                        else {
                            if (!document.webkitFullscreenElement) return;
                            t = document.webkitFullscreenElement()
                        }
                        t.requestPointerLock = t.requestPointerLock || t.mozRequestPointerLock || t.webkitRequestPointerLock,
                            t.requestPointerLock(),
                            $(document).off('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange', this)
                    },
                    exitPointerLock: function () {
                        document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock,
                            document.exitPointerLock()
                    },
                    exitFullscreen: function () {
                        document.exitFullscreen ? document.exitFullscreen()  : document.msExitFullscreen ? document.msExitFullscreen()  : document.mozCancelFullScreen ? document.mozCancelFullScreen()  : document.webkitExitFullscreen && document.webkitExitFullscreen()
                    },
                    details: function () {
                        var t = navigator.userAgent.match('(Firefox|Chrome|Safari)/([\\d]+)');
                        return t ? {
                            name: t[1],
                            version: parseInt(t[2]),
                            platform: navigator.platform
                        }
                            : {
                        }
                    },
                    is: function (t) {
                        return this.details() && this.details().name === t
                    },
                    inIframe: function () {
                        return window.parent !== window
                    },
                    aspectRatio: function () {
                        var t = window.innerWidth / window.innerHeight;
                        return isFinite(t) ? t : 0
                    },
                    userAgent: function () {
                        return window.navigator.userAgent
                    },
                    isMobile: function () {
                        var t = navigator.userAgent || navigator.vendor || window.opera;
                        return /(android|bb\d+|meego).+mobile|android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0, 4))
                    },
                    detectIE: function () {
                        var t = window.navigator.userAgent,
                            e = t.indexOf('MSIE ');
                        return e > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./)
                    },
                    detectSafari: function () {
                        var t = window.navigator.userAgent,
                            e = t.indexOf('Safari'),
                            o = t.indexOf('Chrome');
                        return e > 0 && 0 > o
                    },
                    detectSamsungS6: function () {
                        var t = window.navigator.userAgent,
                            e = t.indexOf('SM-G92');
                        return e > 0
                    },
                    valueFromCookie: function (t, e) {
                        var o = new RegExp(t + '=([0-9a-f]+)(; ?|$)').exec(document.cookie);
                        if (!o) return e;
                        var n = o[1];
                        return 'boolean' == typeof e ? 'true' === n || '1' === n : 'number' == typeof e ? parseFloat(n)  : n
                    },
                    valueFromHash: function (t, e) {
                        var o = new RegExp('[#&?]' + t + '=([^#&?]*)'),
                            n = o.exec(window.location.href);
                        if (!n) return e;
                        var i = n[1];
                        return 'boolean' == typeof e ? 'true' === i || '1' === i : 'number' == typeof e ? parseFloat(i)  : i
                    }
                }
            },
            {
            }
        ],
        45: [
            function (t, e, o) {
                'use strict';
                e.exports = {
                    _xhr: function (t, e, o) {
                        var n = new XMLHttpRequest;
                        if (o && 'withCredentials' in n) n.open('GET', e, o);
                        else if ('undefined' != typeof XDomainRequest) n = new XDomainRequest,
                            n.open(t, e);
                        else {
                            if (o) throw 'Browser does not support CORS!';
                            n.open('GET', e)
                        }
                        return n
                    },
                    getFile: function (t, e, o) {
                        var n = this._xhr('get', t, !1);
                        n.onreadystatechange = function (t) {
                            4 == this.readyState && (200 == this.status ? e(this.response)  : o && o())
                        },
                            n.send()
                    },
                    getFileAsArrayBuffer: function (t, e, o) {
                        var n = this._xhr('get', t, !1);
                        n.responseType = 'arraybuffer',
                            n.onreadystatechange = function (t) {
                                4 == this.readyState && (200 == this.status ? e(this.response)  : o && o())
                            },
                            n.send()
                    },
                    getFilesAsArrayBuffer: function (t, e, o) {
                        var n = [
                            ],
                            i = 0;
                        t.forEach(function (o, r) {
                            util.getFileAsArrayBuffer(o, function (o) {
                                n.splice(r, 0, o),
                                ++i === t.length && e.apply(this, n)
                            }, function () {
                                n.splice(r, 0, null),
                                    ++i
                            })
                        })
                    },
                    domainFromUrl: function (t) {
                        var e = /^([^:]*:\/\/)?([^/]+)/.exec(t);
                        return e ? e[2] : t
                    },
                    average: function (t, e) {
                        if (0 === t.length) return null;
                        for (var o = 0, n = 0, i = 0; i < t.length; i++) {
                            var r = e ? t[i][e] : t[i];
                            o += r,
                                n++
                        }
                        return o / n
                    },
                    averageVectors: function (t, e) {
                        var o = new THREE.Vector3;
                        if (0 === t.length) return o;
                        for (var n = 0, i = 0; i < t.length; i++) {
                            var r = e ? t[i][e] : t[i];
                            o.add(r),
                                n++
                        }
                        return o.divideScalar(n)
                    },
                    equalLists: function (t, e) {
                        if (t.length !== e.length) return !1;
                        for (var o = 0; o < t.length; o++) if (t[o] !== e[o]) return !1;
                        return !0
                    },
                    lowerMedian: function (t, e) {
                        if (0 === t.length) return null;
                        e = e || 2,
                            t.sort(function (t, e) {
                                return t - e
                            });
                        var o = Math.floor(t.length / e);
                        return t[o]
                    },
                    stableSort: function (t, e) {
                        return t.map(function (t, e) {
                            return {
                                value: t,
                                index: e
                            }
                        }).sort(function (t, o) {
                            var n = e(t.value, o.value);
                            return 0 !== n ? n : t.index - o.index
                        }).map(function (t) {
                            return t.value
                        })
                    },
                    filterAll: function (t, e) {
                        return t.filter(function (t) {
                            return e.every(function (e) {
                                return e(t)
                            })
                        })
                    },
                    formatDate: function (t) {
                        return [t.getFullYear(),
                            t.getMonth() + 1,
                            t.getDate()].join('-')
                    },
                    formatDatetime: function (t) {
                        return [t.getFullYear(),
                            t.getMonth() + 1,
                            t.getDate(),
                            t.getHours(),
                            t.getMinutes()].join('-')
                    },
                    randomString: function (t) {
                        for (var e = '', o = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', n = 0; t > n; n++) e += o.charAt(Math.floor(Math.random() * o.length));
                        return e
                    },
                    nth: function (t) {
                        return t %= 10,
                            1 == t ? t + 'st' : 2 == t ? t + 'nd' : 3 == t ? t + 'rd' : t + 'th'
                    },
                    _textureCache: {
                    },
                    loadTextureFromCache: function (t) {
                        return this._textureCache[t] || (this._textureCache[t] = THREE.ImageUtils.loadTexture(t)),
                            this._textureCache[t]
                    },
                    extend: function (t, e) {
                        for (var o in e.prototype) t.prototype[o] = e.prototype[o]
                    }
                },
                    Math.sign = function (t) {
                        return 0 > t ? - 1 : 1
                    }
            },
            {
            }
        ],
        46: [
            function (t, e, o) {
                'use strict';
                var n = {
                };
                n.linearTween = function (t, e, o, n) {
                    return o * t / n + e
                },
                    n.easeInQuad = function (t, e, o, n) {
                        return t /= n,
                        o * t * t + e
                    },
                    n.easeOutQuad = function (t, e, o, n) {
                        return t /= n,
                        - o * t * (t - 2) + e
                    },
                    n.easeInOutQuad = function (t, e, o, n) {
                        return t /= n / 2,
                            1 > t ? o / 2 * t * t + e : (t--, - o / 2 * (t * (t - 2) - 1) + e)
                    },
                    n.easeInCubic = function (t, e, o, n) {
                        return t /= n,
                        o * t * t * t + e
                    },
                    n.easeOutCubic = function (t, e, o, n) {
                        return t /= n,
                            t--,
                        o * (t * t * t + 1) + e
                    },
                    n.easeInOutCubic = function (t, e, o, n) {
                        return t /= n / 2,
                            1 > t ? o / 2 * t * t * t + e : (t -= 2, o / 2 * (t * t * t + 2) + e)
                    },
                    n.easeInQuart = function (t, e, o, n) {
                        return t /= n,
                        o * t * t * t * t + e
                    },
                    n.easeOutQuart = function (t, e, o, n) {
                        return t /= n,
                            t--,
                        - o * (t * t * t * t - 1) + e
                    },
                    n.easeInOutQuart = function (t, e, o, n) {
                        return t /= n / 2,
                            1 > t ? o / 2 * t * t * t * t + e : (t -= 2, - o / 2 * (t * t * t * t - 2) + e)
                    },
                    n.easeInQuint = function (t, e, o, n) {
                        return t /= n,
                        o * t * t * t * t * t + e
                    },
                    n.easeOutQuint = function (t, e, o, n) {
                        return t /= n,
                            t--,
                        o * (t * t * t * t * t + 1) + e
                    },
                    n.easeInOutQuint = function (t, e, o, n) {
                        return t /= n / 2,
                            1 > t ? o / 2 * t * t * t * t * t + e : (t -= 2, o / 2 * (t * t * t * t * t + 2) + e)
                    },
                    n.easeInSine = function (t, e, o, n) {
                        return - o * Math.cos(t / n * (Math.PI / 2)) + o + e
                    },
                    n.easeOutSine = function (t, e, o, n) {
                        return o * Math.sin(t / n * (Math.PI / 2)) + e
                    },
                    n.easeInOutSine = function (t, e, o, n) {
                        return - o / 2 * (Math.cos(Math.PI * t / n) - 1) + e
                    },
                    n.easeInExpo = function (t, e, o, n) {
                        return o * Math.pow(2, 10 * (t / n - 1)) + e
                    },
                    n.easeOutExpo = function (t, e, o, n) {
                        return o * ( - Math.pow(2, - 10 * t / n) + 1) + e
                    },
                    n.easeInOutExpo = function (t, e, o, n) {
                        return t /= n / 2,
                            1 > t ? o / 2 * Math.pow(2, 10 * (t - 1)) + e : (t--, o / 2 * ( - Math.pow(2, - 10 * t) + 2) + e)
                    },
                    n.easeInCirc = function (t, e, o, n) {
                        return t /= n,
                        - o * (Math.sqrt(1 - t * t) - 1) + e
                    },
                    n.easeOutCirc = function (t, e, o, n) {
                        return t /= n,
                            t--,
                        o * Math.sqrt(1 - t * t) + e
                    },
                    n.easeInOutCirc = function (t, e, o, n) {
                        return t /= n / 2,
                            1 > t ? - o / 2 * (Math.sqrt(1 - t * t) - 1) + e : (t -= 2, o / 2 * (Math.sqrt(1 - t * t) + 1) + e)
                    },
                    n.easeInElastic = function (t, e, o, n) {
                        var i = 1.70158,
                            r = 0,
                            a = o;
                        return 0 === t ? e : 1 === (t /= n) ? e + o : (r || (r = 0.3 * n), a < Math.abs(o) ? (a = o, i = r / 4)  : i = r / (2 * Math.PI) * Math.asin(o / a), - (a * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (t * n - i) * Math.PI / r)) + e)
                    },
                    n.easeOutElastic = function (t, e, o, n) {
                        var i = 1.70158,
                            r = 0,
                            a = o;
                        return 0 === t ? e : 1 === (t /= n) ? e + o : (r || (r = 0.3 * n), a < Math.abs(o) ? (a = o, i = r / 4)  : i = r / (2 * Math.PI) * Math.asin(o / a), a * Math.pow(2, - 10 * t) * Math.sin(2 * (t * n - i) * Math.PI / r) + o + e)
                    },
                    n.easeInOutElastic = function (t, e, o, n) {
                        var i = 1.70158,
                            r = 0,
                            a = o;
                        return 0 === t ? e : 2 === (t /= n / 2) ? e + o : (r || (r = 0.3 * n * 1.5), a < Math.abs(o) ? (a = o, i = r / 4)  : i = r / (2 * Math.PI) * Math.asin(o / a), 1 > t ? - 0.5 * a * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (t * n - i) * Math.PI / r) + e : a * Math.pow(2, - 10 * (t -= 1)) * Math.sin(2 * (t * n - i) * Math.PI / r) * 0.5 + o + e)
                    },
                    n.easeInBack = function (t, e, o, n, i) {
                        return void 0 === i && (i = 1.70158),
                        o * (t /= n) * t * ((i + 1) * t - i) + e
                    },
                    n.easeOutBack = function (t, e, o, n, i) {
                        return void 0 === i && (i = 1.70158),
                        o * ((t = t / n - 1) * t * ((i + 1) * t + i) + 1) + e
                    },
                    n.easeInOutBack = function (t, e, o, n, i) {
                        return void 0 === i && (i = 1.70158),
                            (t /= n / 2) < 1 ? o / 2 * t * t * (((i *= 1.525) + 1) * t - i) + e : o / 2 * ((t -= 2) * t * (((i *= 1.525) + 1) * t + i) + 2) + e
                    },
                    n.easeOutBounce = function (t, e, o, n) {
                        return (t /= n) < 1 / 2.75 ? 7.5625 * o * t * t + e : 2 / 2.75 > t ? o * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + e : 2.5 / 2.75 > t ? o * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + e : o * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + e
                    },
                    n.easeInBounce = function (t, e, o, i) {
                        return o - n.easeOutBounce(i - t, 0, o, i) + e
                    },
                    n.easeInOutBounce = function (t, e, o, i) {
                        return i / 2 > t ? 0.5 * n.easeInBounce(2 * t, 0, o, i) + e : 0.5 * n.easeOutBounce(x, 2 * t - i, 0, o, i) + 0.5 * o + e
                    },
                    e.exports = n
            },
            {
            }
        ],
        47: [
            function (t, e, o) {
                'use strict';
                e.exports = {
                    vector: function (t, e) {
                        var o = t.clone();
                        return e = e.clone(),
                            function (n) {
                                t.set(o.x * (1 - n) + e.x * n, o.y * (1 - n) + e.y * n, o.z * (1 - n) + e.z * n)
                            }
                    },
                    quaternion: function (t, e) {
                        var o = t.clone();
                        return function (n) {
                            t.copy(o).slerp(e, n)
                        }
                    },
                    property: function (t, e, o, n) {
                        var i = t[e];
                        return function (r) {
                            t[e] = i * (1 - r) + o * r,
                            n && n(t[e])
                        }
                    },
                    uniform: function (t, e, o) {
                        var n = t.material.uniforms[e].value;
                        return function (i) {
                            t.material.uniforms[e] && (t.material.uniforms[e].value = n * (1 - i) + o * i)
                        }
                    },
                    matrix4: function (t, e) {
                        var o = t.clone();
                        return function (n) {
                            for (var i = t.elements, r = o.elements, a = e.elements, s = 0; 16 > s; s++) i[s] = r[s] * (1 - n) + a[s] * n
                        }
                    },
                    allUniforms: function (t, e, o) {
                        var n = t.map(function (t) {
                            return this.uniform(t, e, o)
                        }.bind(this));
                        return function (t) {
                            n.forEach(function (e) {
                                e(t)
                            })
                        }
                    }
                }
            },
            {
            }
        ],
        48: [
            function (t, e, o) {
                'use strict';
                function n(t) {
                    var e = t.split('/'),
                        o = '[' + e[e.length - 1].replace('.js', '') + ']',
                        a = {
                        };
                    n.startTime || (n.startTime = Date.now());
                    var s,
                        l,
                        h,
                        c;
                    if (i.debug && i.console) {
                        var u = function (t) {
                            $('#debug-console').append('<p>' + t + '</p>'),
                                $('#debug-console') [0].scrollTop = $('#debug-console') [0].scrollHeight
                        };
                        s = function (t) {
                            u(Array.prototype.slice.call(arguments).join(' '))
                        },
                            l = function (t) {
                                u(Array.prototype.slice.call(arguments).join(' '))
                            },
                            h = function (t) {
                                u('WARN: ' + Array.prototype.slice.call(arguments).join(' '))
                            },
                            c = function (t) {
                                u('ERROR: ' + Array.prototype.slice.call(arguments).join(' '))
                            }
                    } else console.log ? (s = console.log, l = console.info ? console.info : console.log, h = console.warn ? console.warn : console.log, c = console.error ? console.error : console.log)  : s = l = h = c = function () {
                    };
                    var p = function (t) {
                            return [o,
                                n.timestamp()].concat(Array.prototype.slice.call(t))
                        },
                        d = function (e, o) {
                            if (r) {
                                var i = Array.prototype.slice.call(e).join(' ');
                                r.captureMessage(i, {
                                    level: o,
                                    path: t,
                                    timestamp: n.timestamp()
                                })
                            }
                        },
                        m = function (e, o) {
                            if (r) {
                                var i = Array.prototype.slice.call(e).join(' ');
                                r.captureException(new Error(i), {
                                    level: o,
                                    path: t,
                                    timestamp: n.timestamp()
                                })
                            }
                        };
                    return {
                        debug: function () {
                            n.level >= n.levels.debug && s.apply(console, p(arguments))
                        },
                        info: function () {
                            n.level >= n.levels.info && l.apply(console, p(arguments))
                        },
                        warn: function () {
                            d(arguments, 'warn'),
                            n.level >= n.levels.warn && h.apply(console, p(arguments))
                        },
                        error: function () {
                            m(arguments, 'error'),
                            n.level >= n.levels.error && c.apply(console, p(arguments));
                        },
                        v3str: function (t) {
                            return '(' + t.x.toPrecision(2) + ', ' + t.y.toPrecision(2) + ', ' + t.z.toPrecision(2) + ')'
                        },
                        time: function (t) {
                            n.level >= n.levels.debug && (a[t] = Date.now())
                        },
                        timeEnd: function (t) {
                            if (n.level >= n.levels.debug) {
                                var e = a[t];
                                if (!e) return;
                                var o = (Date.now() - e) / 1000;
                                this.debug(t, o + 's')
                            }
                        }
                    }
                }
                var i = t('../settings'),
                    r = window.Raven;
                n.timestamp = function () {
                    return n.startTime ? (Date.now() - n.startTime) / 1000 + 's' : ''
                },
                    n.levels = {
                        debug: 3,
                        info: 2,
                        warn: 1,
                        error: 0
                    },
                    n.level = n.levels.info,
                    e.exports = n
            },
            {
                '../settings': 38
            }
        ],
        49: [
            function (t, e, o) {
                'use strict';
                e.exports = {
                    convertVisionVector: function (t) {
                        return new THREE.Vector3(t.x, t.z, - t.y)
                    },
                    convertVisionQuaternion: function (t) {
                        return new THREE.Quaternion(t.x, t.z, - t.y, t.w).multiply((new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0, 1, 0), THREE.Math.degToRad(90)))
                    },
                    convertWorkshopVector: function (t) {
                        return new THREE.Vector3( - t.x, t.y, t.z)
                    },
                    convertWorkshopQuaternion: function (t) {
                        return new THREE.Quaternion( - t.x, t.y, t.z, - t.w).multiply(new THREE.Quaternion(Math.sqrt(2) / 2, Math.sqrt(2) / 2, 0, 0))
                    }
                }
            },
            {
            }
        ],
        50: [
            function (t, e, o) {
                'use strict';
                e.exports = {
                    captureErrors: function (t, e, o) {
                        if ('Raven' in window) {
                            Raven.config(t, e).install(),
                            o && Raven.setTagsContext(o);
                            var n = console.warn,
                                i = console.error;
                            console.warn = function () {
                                var t = Array.prototype.slice.call(arguments);
                                Raven.captureMessage(t.join(' '), {
                                    level: 'warning'
                                }),
                                    n.apply(console, t)
                            },
                                console.error = function () {
                                    var t = Array.prototype.slice.call(arguments);
                                    Raven.captureException(new Error(t.join(' ')), {
                                        level: 'error'
                                    }),
                                        i.apply(console, t)
                                }
                        } else console.error('Raven not found, not capturing errors.')
                    }
                }
            },
            {
            }
        ],
        51: [
            function (t, e, o) {
                'use strict';
                var n = t('./easing');
                e.exports = {
                    globalDone: null,
                    funcs: [
                    ],
                    counter: 0,
                    start: function (t, e, o, i, r, a) {
                        return i = i || 0,
                            this.funcs.push({
                                func: t,
                                current: - i * Math.abs(e),
                                duration: (1 - i) * Math.abs(e),
                                done: o,
                                easing: r || n.linearTween,
                                cycling: 1 > e,
                                running: !0,
                                name: a || 'T' + this.counter
                            }),
                            t(0, 16),
                            this.counter += 1,
                            t
                    },
                    update: function (t) {
                        this.funcs.forEach(function (e) {
                            if (e.current += 1000 * t, !(e.current < 0)) if (e.current >= e.duration && !e.cycling) {
                                var o = e.easing(1, 0, 1, 1);
                                e.func(o, 1000 * t),
                                e.done && e.done(),
                                    e.running = !1
                            } else {
                                var n = e.easing(e.current % e.duration / e.duration, 0, 1, 1),
                                    i = e.func(n, 1000 * t) || !1;
                                i && (e.done && e.done(), e.running = !1)
                            }
                        });
                        var e = this.funcs.length;
                        this.funcs = this.funcs.filter(function (t) {
                            return t.running
                        });
                        var o = this.funcs.length;
                        if (e > 0 && 0 === o && this.globalDone) {
                            var n = this.globalDone;
                            this.globalDone = null,
                                n()
                        }
                    },
                    get: function (t) {
                        for (var e = 0; e < this.funcs.length; e += 1) if (this.funcs[e].func == t) return this.funcs[e];
                        return null
                    },
                    isRunning: function (t) {
                        var e = this.get(t);
                        return null !== e && e.running
                    },
                    countActive: function () {
                        for (var t = 0, e = 0; e < this.funcs.length; e += 1) t += this.funcs[e].running;
                        return t
                    },
                    listActive: function () {
                        for (var t = [
                        ], e = 0; e < this.funcs.length; e += 1) this.funcs[e].running && t.push(this.funcs[e].name);
                        return t
                    },
                    done: function (t) {
                        this.globalDone = t
                    },
                    cancel: function (t) {
                        this.funcs = this.funcs.filter(function (e) {
                            return e.func !== t
                        })
                    }
                }
            },
            {
                './easing': 46
            }
        ],
        52: [
            function (t, e, o) {
                function n(t) {
                    return this instanceof n ? (this.length = 0, this.parent = void 0, 'number' == typeof t ? i(this, t)  : 'string' == typeof t ? r(this, t, arguments.length > 1 ? arguments[1] : 'utf8')  : a(this, t))  : arguments.length > 1 ? new n(t, arguments[1])  : new n(t)
                }
                function i(t, e) {
                    if (t = p(t, 0 > e ? 0 : 0 | d(e)), !n.TYPED_ARRAY_SUPPORT) for (var o = 0; e > o; o++) t[o] = 0;
                    return t
                }
                function r(t, e, o) {
                    ('string' != typeof o || '' === o) && (o = 'utf8');
                    var n = 0 | f(e, o);
                    return t = p(t, n),
                    0 | t.write(e, o),
                        t
                }
                function a(t, e) {
                    if (n.isBuffer(e)) return s(t, e);
                    if (z(e)) return l(t, e);
                    if (null == e) throw new TypeError('must start with number, buffer, array or string');
                    return 'undefined' != typeof ArrayBuffer && e.buffer instanceof ArrayBuffer ? h(t, e)  : e.length ? c(t, e)  : u(t, e)
                }
                function s(t, e) {
                    var o = 0 | d(e.length);
                    return t = p(t, o),
                        e.copy(t, 0, 0, o),
                        t
                }
                function l(t, e) {
                    var o = 0 | d(e.length);
                    t = p(t, o);
                    for (var n = 0; o > n; n += 1) t[n] = 255 & e[n];
                    return t
                }
                function h(t, e) {
                    var o = 0 | d(e.length);
                    t = p(t, o);
                    for (var n = 0; o > n; n += 1) t[n] = 255 & e[n];
                    return t
                }
                function c(t, e) {
                    var o = 0 | d(e.length);
                    t = p(t, o);
                    for (var n = 0; o > n; n += 1) t[n] = 255 & e[n];
                    return t
                }
                function u(t, e) {
                    var o,
                        n = 0;
                    'Buffer' === e.type && z(e.data) && (o = e.data, n = 0 | d(o.length)),
                        t = p(t, n);
                    for (var i = 0; n > i; i += 1) t[i] = 255 & o[i];
                    return t
                }
                function p(t, e) {
                    n.TYPED_ARRAY_SUPPORT ? t = n._augment(new Uint8Array(e))  : (t.length = e, t._isBuffer = !0);
                    var o = 0 !== e && e <= n.poolSize >>> 1;
                    return o && (t.parent = X),
                        t
                }
                function d(t) {
                    if (t >= Y) throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x' + Y.toString(16) + ' bytes');
                    return t >>> 0
                }
                function m(t, e) {
                    if (!(this instanceof m)) return new m(t, e);
                    var o = new n(t, e);
                    return delete o.parent,
                        o
                }
                function f(t, e) {
                    if ('string' != typeof t && (t = String(t)), 0 === t.length) return 0;
                    switch (e || 'utf8') {
                        case 'ascii':
                        case 'binary':
                        case 'raw':
                            return t.length;
                        case 'ucs2':
                        case 'ucs-2':
                        case 'utf16le':
                        case 'utf-16le':
                            return 2 * t.length;
                        case 'hex':
                            return t.length >>> 1;
                        case 'utf8':
                        case 'utf-8':
                            return W(t).length;
                        case 'base64':
                            return N(t).length;
                        default:
                            return t.length
                    }
                }
                function g(t, e, o, n) {
                    o = Number(o) || 0;
                    var i = t.length - o;
                    n ? (n = Number(n), n > i && (n = i))  : n = i;
                    var r = e.length;
                    if (r % 2 !== 0) throw new Error('Invalid hex string');
                    n > r / 2 && (n = r / 2);
                    for (var a = 0; n > a; a++) {
                        var s = parseInt(e.substr(2 * a, 2), 16);
                        if (isNaN(s)) throw new Error('Invalid hex string');
                        t[o + a] = s
                    }
                    return a
                }
                function y(t, e, o, n) {
                    return Z(W(e, t.length - o), t, o, n)
                }
                function v(t, e, o, n) {
                    return Z(V(e), t, o, n)
                }
                function b(t, e, o, n) {
                    return v(t, e, o, n)
                }
                function w(t, e, o, n) {
                    return Z(N(e), t, o, n)
                }
                function E(t, e, o, n) {
                    return Z(_(e, t.length - o), t, o, n)
                }
                function R(t, e, o) {
                    return G.fromByteArray(0 === e && o === t.length ? t : t.slice(e, o))
                }
                function T(t, e, o) {
                    var n = '',
                        i = '';
                    o = Math.min(t.length, o);
                    for (var r = e; o > r; r++) t[r] <= 127 ? (n += j(i) + String.fromCharCode(t[r]), i = '')  : i += '%' + t[r].toString(16);
                    return n + j(i)
                }
                function x(t, e, o) {
                    var n = '';
                    o = Math.min(t.length, o);
                    for (var i = e; o > i; i++) n += String.fromCharCode(127 & t[i]);
                    return n
                }
                function M(t, e, o) {
                    var n = '';
                    o = Math.min(t.length, o);
                    for (var i = e; o > i; i++) n += String.fromCharCode(t[i]);
                    return n
                }
                function A(t, e, o) {
                    var n = t.length;
                    (!e || 0 > e) && (e = 0),
                    (!o || 0 > o || o > n) && (o = n);
                    for (var i = '', r = e; o > r; r++) i += F(t[r]);
                    return i
                }
                function P(t, e, o) {
                    for (var n = t.slice(e, o), i = '', r = 0; r < n.length; r += 2) i += String.fromCharCode(n[r] + 256 * n[r + 1]);
                    return i
                }
                function C(t, e, o) {
                    if (t % 1 !== 0 || 0 > t) throw new RangeError('offset is not uint');
                    if (t + e > o) throw new RangeError('Trying to access beyond buffer length')
                }
                function I(t, e, o, i, r, a) {
                    if (!n.isBuffer(t)) throw new TypeError('buffer must be a Buffer instance');
                    if (e > r || a > e) throw new RangeError('value is out of bounds');
                    if (o + i > t.length) throw new RangeError('index out of range')
                }
                function H(t, e, o, n) {
                    0 > e && (e = 65535 + e + 1);
                    for (var i = 0, r = Math.min(t.length - o, 2); r > i; i++) t[o + i] = (e & 255 << 8 * (n ? i : 1 - i)) >>> 8 * (n ? i : 1 - i)
                }
                function k(t, e, o, n) {
                    0 > e && (e = 4294967295 + e + 1);
                    for (var i = 0, r = Math.min(t.length - o, 4); r > i; i++) t[o + i] = e >>> 8 * (n ? i : 3 - i) & 255
                }
                function S(t, e, o, n, i, r) {
                    if (e > i || r > e) throw new RangeError('value is out of bounds');
                    if (o + n > t.length) throw new RangeError('index out of range');
                    if (0 > o) throw new RangeError('index out of range')
                }
                function O(t, e, o, n, i) {
                    return i || S(t, e, o, 4, 3.4028234663852886e+38, - 3.4028234663852886e+38),
                        U.write(t, e, o, n, 23, 4),
                    o + 4
                }
                function B(t, e, o, n, i) {
                    return i || S(t, e, o, 8, 1.7976931348623157e+308, - 1.7976931348623157e+308),
                        U.write(t, e, o, n, 52, 8),
                    o + 8
                }
                function D(t) {
                    if (t = L(t).replace(Q, ''), t.length < 2) return '';
                    for (; t.length % 4 !== 0; ) t += '=';
                    return t
                }
                function L(t) {
                    return t.trim ? t.trim()  : t.replace(/^\s+|\s+$/g, '')
                }
                function F(t) {
                    return 16 > t ? '0' + t.toString(16)  : t.toString(16)
                }
                function W(t, e) {
                    e = e || 1 / 0;
                    for (var o, n = t.length, i = null, r = [
                    ], a = 0; n > a; a++) {
                        if (o = t.charCodeAt(a), o > 55295 && 57344 > o) {
                            if (!i) {
                                if (o > 56319) {
                                    (e -= 3) > - 1 && r.push(239, 191, 189);
                                    continue
                                }
                                if (a + 1 === n) {
                                    (e -= 3) > - 1 && r.push(239, 191, 189);
                                    continue
                                }
                                i = o;
                                continue
                            }
                            if (56320 > o) {
                                (e -= 3) > - 1 && r.push(239, 191, 189),
                                    i = o;
                                continue
                            }
                            o = i - 55296 << 10 | o - 56320 | 65536,
                                i = null
                        } else i && ((e -= 3) > - 1 && r.push(239, 191, 189), i = null);
                        if (128 > o) {
                            if ((e -= 1) < 0) break;
                            r.push(o)
                        } else if (2048 > o) {
                            if ((e -= 2) < 0) break;
                            r.push(o >> 6 | 192, 63 & o | 128)
                        } else if (65536 > o) {
                            if ((e -= 3) < 0) break;
                            r.push(o >> 12 | 224, o >> 6 & 63 | 128, 63 & o | 128)
                        } else {
                            if (!(2097152 > o)) throw new Error('Invalid code point');
                            if ((e -= 4) < 0) break;
                            r.push(o >> 18 | 240, o >> 12 & 63 | 128, o >> 6 & 63 | 128, 63 & o | 128)
                        }
                    }
                    return r
                }
                function V(t) {
                    for (var e = [
                    ], o = 0; o < t.length; o++) e.push(255 & t.charCodeAt(o));
                    return e
                }
                function _(t, e) {
                    for (var o, n, i, r = [
                    ], a = 0; a < t.length && !((e -= 2) < 0); a++) o = t.charCodeAt(a),
                        n = o >> 8,
                        i = o % 256,
                        r.push(i),
                        r.push(n);
                    return r
                }
                function N(t) {
                    return G.toByteArray(D(t))
                }
                function Z(t, e, o, n) {
                    for (var i = 0; n > i && !(i + o >= e.length || i >= t.length); i++) e[i + o] = t[i];
                    return i
                }
                function j(t) {
                    try {
                        return decodeURIComponent(t)
                    } catch (e) {
                        return String.fromCharCode(65533)
                    }
                }
                var G = t('base64-js'),
                    U = t('ieee754'),
                    z = t('is-array');
                o.Buffer = n,
                    o.SlowBuffer = m,
                    o.INSPECT_MAX_BYTES = 50,
                    n.poolSize = 8192;
                var Y = 1073741823,
                    X = {
                    };
                n.TYPED_ARRAY_SUPPORT = function () {
                    try {
                        var t = new ArrayBuffer(0),
                            e = new Uint8Array(t);
                        return e.foo = function () {
                            return 42
                        },
                        42 === e.foo() && 'function' == typeof e.subarray && 0 === new Uint8Array(1).subarray(1, 1).byteLength
                    } catch (o) {
                        return !1
                    }
                }(),
                    n.isBuffer = function (t) {
                        return !(null == t || !t._isBuffer)
                    },
                    n.compare = function (t, e) {
                        if (!n.isBuffer(t) || !n.isBuffer(e)) throw new TypeError('Arguments must be Buffers');
                        if (t === e) return 0;
                        for (var o = t.length, i = e.length, r = 0, a = Math.min(o, i); a > r && t[r] === e[r]; r++);
                        return r !== a && (o = t[r], i = e[r]),
                            i > o ? - 1 : o > i ? 1 : 0
                    },
                    n.isEncoding = function (t) {
                        switch (String(t).toLowerCase()) {
                            case 'hex':
                            case 'utf8':
                            case 'utf-8':
                            case 'ascii':
                            case 'binary':
                            case 'base64':
                            case 'raw':
                            case 'ucs2':
                            case 'ucs-2':
                            case 'utf16le':
                            case 'utf-16le':
                                return !0;
                            default:
                                return !1
                        }
                    },
                    n.concat = function (t, e) {
                        if (!z(t)) throw new TypeError('list argument must be an Array of Buffers.');
                        if (0 === t.length) return new n(0);
                        if (1 === t.length) return t[0];
                        var o;
                        if (void 0 === e) for (e = 0, o = 0; o < t.length; o++) e += t[o].length;
                        var i = new n(e),
                            r = 0;
                        for (o = 0; o < t.length; o++) {
                            var a = t[o];
                            a.copy(i, r),
                                r += a.length
                        }
                        return i
                    },
                    n.byteLength = f,
                    n.prototype.length = void 0,
                    n.prototype.parent = void 0,
                    n.prototype.toString = function (t, e, o) {
                        var n = !1;
                        if (e >>>= 0, o = void 0 === o || o === 1 / 0 ? this.length : o >>> 0, t || (t = 'utf8'), 0 > e && (e = 0), o > this.length && (o = this.length), e >= o) return '';
                        for (; ; ) switch (t) {
                            case 'hex':
                                return A(this, e, o);
                            case 'utf8':
                            case 'utf-8':
                                return T(this, e, o);
                            case 'ascii':
                                return x(this, e, o);
                            case 'binary':
                                return M(this, e, o);
                            case 'base64':
                                return R(this, e, o);
                            case 'ucs2':
                            case 'ucs-2':
                            case 'utf16le':
                            case 'utf-16le':
                                return P(this, e, o);
                            default:
                                if (n) throw new TypeError('Unknown encoding: ' + t);
                                t = (t + '').toLowerCase(),
                                    n = !0
                        }
                    },
                    n.prototype.equals = function (t) {
                        if (!n.isBuffer(t)) throw new TypeError('Argument must be a Buffer');
                        return this === t ? !0 : 0 === n.compare(this, t)
                    },
                    n.prototype.inspect = function () {
                        var t = '',
                            e = o.INSPECT_MAX_BYTES;
                        return this.length > 0 && (t = this.toString('hex', 0, e).match(/.{2}/g).join(' '), this.length > e && (t += ' ... ')),
                        '<Buffer ' + t + '>'
                    },
                    n.prototype.compare = function (t) {
                        if (!n.isBuffer(t)) throw new TypeError('Argument must be a Buffer');
                        return this === t ? 0 : n.compare(this, t)
                    },
                    n.prototype.indexOf = function (t, e) {
                        function o(t, e, o) {
                            for (var n = - 1, i = 0; o + i < t.length; i++) if (t[o + i] === e[ - 1 === n ? 0 : i - n]) {
                                if ( - 1 === n && (n = i), i - n + 1 === e.length) return o + n
                            } else n = - 1;
                            return - 1
                        }
                        if (e > 2147483647 ? e = 2147483647 : - 2147483648 > e && (e = - 2147483648), e >>= 0, 0 === this.length) return - 1;
                        if (e >= this.length) return - 1;
                        if (0 > e && (e = Math.max(this.length + e, 0)), 'string' == typeof t) return 0 === t.length ? - 1 : String.prototype.indexOf.call(this, t, e);
                        if (n.isBuffer(t)) return o(this, t, e);
                        if ('number' == typeof t) return n.TYPED_ARRAY_SUPPORT && 'function' === Uint8Array.prototype.indexOf ? Uint8Array.prototype.indexOf.call(this, t, e)  : o(this, [
                            t
                        ], e);
                        throw new TypeError('val must be string, number or Buffer')
                    },
                    n.prototype.get = function (t) {
                        return console.log('.get() is deprecated. Access using array indexes instead.'),
                            this.readUInt8(t)
                    },
                    n.prototype.set = function (t, e) {
                        return console.log('.set() is deprecated. Access using array indexes instead.'),
                            this.writeUInt8(t, e)
                    },
                    n.prototype.write = function (t, e, o, n) {
                        if (void 0 === e) n = 'utf8',
                            o = this.length,
                            e = 0;
                        else if (void 0 === o && 'string' == typeof e) n = e,
                            o = this.length,
                            e = 0;
                        else if (isFinite(e)) e >>>= 0,
                            isFinite(o) ? (o >>>= 0, void 0 === n && (n = 'utf8'))  : (n = o, o = void 0);
                        else {
                            var i = n;
                            n = e,
                                e = o >>> 0,
                                o = i
                        }
                        var r = this.length - e;
                        if ((void 0 === o || o > r) && (o = r), t.length > 0 && (0 > o || 0 > e) || e > this.length) throw new RangeError('attempt to write outside buffer bounds');
                        n || (n = 'utf8');
                        for (var a = !1; ; ) switch (n) {
                            case 'hex':
                                return g(this, t, e, o);
                            case 'utf8':
                            case 'utf-8':
                                return y(this, t, e, o);
                            case 'ascii':
                                return v(this, t, e, o);
                            case 'binary':
                                return b(this, t, e, o);
                            case 'base64':
                                return w(this, t, e, o);
                            case 'ucs2':
                            case 'ucs-2':
                            case 'utf16le':
                            case 'utf-16le':
                                return E(this, t, e, o);
                            default:
                                if (a) throw new TypeError('Unknown encoding: ' + n);
                                n = ('' + n).toLowerCase(),
                                    a = !0
                        }
                    },
                    n.prototype.toJSON = function () {
                        return {
                            type: 'Buffer',
                            data: Array.prototype.slice.call(this._arr || this, 0)
                        }
                    },
                    n.prototype.slice = function (t, e) {
                        var o = this.length;
                        t = ~~t,
                            e = void 0 === e ? o : ~~e,
                            0 > t ? (t += o, 0 > t && (t = 0))  : t > o && (t = o),
                            0 > e ? (e += o, 0 > e && (e = 0))  : e > o && (e = o),
                        t > e && (e = t);
                        var i;
                        if (n.TYPED_ARRAY_SUPPORT) i = n._augment(this.subarray(t, e));
                        else {
                            var r = e - t;
                            i = new n(r, void 0);
                            for (var a = 0; r > a; a++) i[a] = this[a + t]
                        }
                        return i.length && (i.parent = this.parent || this),
                            i
                    },
                    n.prototype.readUIntLE = function (t, e, o) {
                        t >>>= 0,
                            e >>>= 0,
                        o || C(t, e, this.length);
                        for (var n = this[t], i = 1, r = 0; ++r < e && (i *= 256); ) n += this[t + r] * i;
                        return n
                    },
                    n.prototype.readUIntBE = function (t, e, o) {
                        t >>>= 0,
                            e >>>= 0,
                        o || C(t, e, this.length);
                        for (var n = this[t + --e], i = 1; e > 0 && (i *= 256); ) n += this[t + --e] * i;
                        return n
                    },
                    n.prototype.readUInt8 = function (t, e) {
                        return e || C(t, 1, this.length),
                            this[t]
                    },
                    n.prototype.readUInt16LE = function (t, e) {
                        return e || C(t, 2, this.length),
                        this[t] | this[t + 1] << 8
                    },
                    n.prototype.readUInt16BE = function (t, e) {
                        return e || C(t, 2, this.length),
                        this[t] << 8 | this[t + 1]
                    },
                    n.prototype.readUInt32LE = function (t, e) {
                        return e || C(t, 4, this.length),
                        (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + 16777216 * this[t + 3]
                    },
                    n.prototype.readUInt32BE = function (t, e) {
                        return e || C(t, 4, this.length),
                        16777216 * this[t] + (this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3])
                    },
                    n.prototype.readIntLE = function (t, e, o) {
                        t >>>= 0,
                            e >>>= 0,
                        o || C(t, e, this.length);
                        for (var n = this[t], i = 1, r = 0; ++r < e && (i *= 256); ) n += this[t + r] * i;
                        return i *= 128,
                        n >= i && (n -= Math.pow(2, 8 * e)),
                            n
                    },
                    n.prototype.readIntBE = function (t, e, o) {
                        t >>>= 0,
                            e >>>= 0,
                        o || C(t, e, this.length);
                        for (var n = e, i = 1, r = this[t + --n]; n > 0 && (i *= 256); ) r += this[t + --n] * i;
                        return i *= 128,
                        r >= i && (r -= Math.pow(2, 8 * e)),
                            r
                    },
                    n.prototype.readInt8 = function (t, e) {
                        return e || C(t, 1, this.length),
                            128 & this[t] ? - 1 * (255 - this[t] + 1)  : this[t]
                    },
                    n.prototype.readInt16LE = function (t, e) {
                        e || C(t, 2, this.length);
                        var o = this[t] | this[t + 1] << 8;
                        return 32768 & o ? 4294901760 | o : o
                    },
                    n.prototype.readInt16BE = function (t, e) {
                        e || C(t, 2, this.length);
                        var o = this[t + 1] | this[t] << 8;
                        return 32768 & o ? 4294901760 | o : o
                    },
                    n.prototype.readInt32LE = function (t, e) {
                        return e || C(t, 4, this.length),
                        this[t] | this[t + 1] << 8 | this[t + 2] << 16 | this[t + 3] << 24
                    },
                    n.prototype.readInt32BE = function (t, e) {
                        return e || C(t, 4, this.length),
                        this[t] << 24 | this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3]
                    },
                    n.prototype.readFloatLE = function (t, e) {
                        return e || C(t, 4, this.length),
                            U.read(this, t, !0, 23, 4)
                    },
                    n.prototype.readFloatBE = function (t, e) {
                        return e || C(t, 4, this.length),
                            U.read(this, t, !1, 23, 4)
                    },
                    n.prototype.readDoubleLE = function (t, e) {
                        return e || C(t, 8, this.length),
                            U.read(this, t, !0, 52, 8)
                    },
                    n.prototype.readDoubleBE = function (t, e) {
                        return e || C(t, 8, this.length),
                            U.read(this, t, !1, 52, 8)
                    },
                    n.prototype.writeUIntLE = function (t, e, o, n) {
                        t = + t,
                            e >>>= 0,
                            o >>>= 0,
                        n || I(this, t, e, o, Math.pow(2, 8 * o), 0);
                        var i = 1,
                            r = 0;
                        for (this[e] = 255 & t; ++r < o && (i *= 256); ) this[e + r] = t / i >>> 0 & 255;
                        return e + o
                    },
                    n.prototype.writeUIntBE = function (t, e, o, n) {
                        t = + t,
                            e >>>= 0,
                            o >>>= 0,
                        n || I(this, t, e, o, Math.pow(2, 8 * o), 0);
                        var i = o - 1,
                            r = 1;
                        for (this[e + i] = 255 & t; --i >= 0 && (r *= 256); ) this[e + i] = t / r >>> 0 & 255;
                        return e + o
                    },
                    n.prototype.writeUInt8 = function (t, e, o) {
                        return t = + t,
                            e >>>= 0,
                        o || I(this, t, e, 1, 255, 0),
                        n.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)),
                            this[e] = t,
                        e + 1
                    },
                    n.prototype.writeUInt16LE = function (t, e, o) {
                        return t = + t,
                            e >>>= 0,
                        o || I(this, t, e, 2, 65535, 0),
                            n.TYPED_ARRAY_SUPPORT ? (this[e] = t, this[e + 1] = t >>> 8)  : H(this, t, e, !0),
                        e + 2
                    },
                    n.prototype.writeUInt16BE = function (t, e, o) {
                        return t = + t,
                            e >>>= 0,
                        o || I(this, t, e, 2, 65535, 0),
                            n.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 8, this[e + 1] = t)  : H(this, t, e, !1),
                        e + 2
                    },
                    n.prototype.writeUInt32LE = function (t, e, o) {
                        return t = + t,
                            e >>>= 0,
                        o || I(this, t, e, 4, 4294967295, 0),
                            n.TYPED_ARRAY_SUPPORT ? (this[e + 3] = t >>> 24, this[e + 2] = t >>> 16, this[e + 1] = t >>> 8, this[e] = t)  : k(this, t, e, !0),
                        e + 4
                    },
                    n.prototype.writeUInt32BE = function (t, e, o) {
                        return t = + t,
                            e >>>= 0,
                        o || I(this, t, e, 4, 4294967295, 0),
                            n.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = t)  : k(this, t, e, !1),
                        e + 4
                    },
                    n.prototype.writeIntLE = function (t, e, o, n) {
                        t = + t,
                            e >>>= 0,
                        n || I(this, t, e, o, Math.pow(2, 8 * o - 1) - 1, - Math.pow(2, 8 * o - 1));
                        var i = 0,
                            r = 1,
                            a = 0 > t ? 1 : 0;
                        for (this[e] = 255 & t; ++i < o && (r *= 256); ) this[e + i] = (t / r >> 0) - a & 255;
                        return e + o
                    },
                    n.prototype.writeIntBE = function (t, e, o, n) {
                        t = + t,
                            e >>>= 0,
                        n || I(this, t, e, o, Math.pow(2, 8 * o - 1) - 1, - Math.pow(2, 8 * o - 1));
                        var i = o - 1,
                            r = 1,
                            a = 0 > t ? 1 : 0;
                        for (this[e + i] = 255 & t; --i >= 0 && (r *= 256); ) this[e + i] = (t / r >> 0) - a & 255;
                        return e + o
                    },
                    n.prototype.writeInt8 = function (t, e, o) {
                        return t = + t,
                            e >>>= 0,
                        o || I(this, t, e, 1, 127, - 128),
                        n.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)),
                        0 > t && (t = 255 + t + 1),
                            this[e] = t,
                        e + 1
                    },
                    n.prototype.writeInt16LE = function (t, e, o) {
                        return t = + t,
                            e >>>= 0,
                        o || I(this, t, e, 2, 32767, - 32768),
                            n.TYPED_ARRAY_SUPPORT ? (this[e] = t, this[e + 1] = t >>> 8)  : H(this, t, e, !0),
                        e + 2
                    },
                    n.prototype.writeInt16BE = function (t, e, o) {
                        return t = + t,
                            e >>>= 0,
                        o || I(this, t, e, 2, 32767, - 32768),
                            n.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 8, this[e + 1] = t)  : H(this, t, e, !1),
                        e + 2
                    },
                    n.prototype.writeInt32LE = function (t, e, o) {
                        return t = + t,
                            e >>>= 0,
                        o || I(this, t, e, 4, 2147483647, - 2147483648),
                            n.TYPED_ARRAY_SUPPORT ? (this[e] = t, this[e + 1] = t >>> 8, this[e + 2] = t >>> 16, this[e + 3] = t >>> 24)  : k(this, t, e, !0),
                        e + 4
                    },
                    n.prototype.writeInt32BE = function (t, e, o) {
                        return t = + t,
                            e >>>= 0,
                        o || I(this, t, e, 4, 2147483647, - 2147483648),
                        0 > t && (t = 4294967295 + t + 1),
                            n.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = t)  : k(this, t, e, !1),
                        e + 4
                    },
                    n.prototype.writeFloatLE = function (t, e, o) {
                        return O(this, t, e, !0, o)
                    },
                    n.prototype.writeFloatBE = function (t, e, o) {
                        return O(this, t, e, !1, o)
                    },
                    n.prototype.writeDoubleLE = function (t, e, o) {
                        return B(this, t, e, !0, o)
                    },
                    n.prototype.writeDoubleBE = function (t, e, o) {
                        return B(this, t, e, !1, o)
                    },
                    n.prototype.copy = function (t, e, o, i) {
                        if (o || (o = 0), i || 0 === i || (i = this.length), e >= t.length && (e = t.length), e || (e = 0), i > 0 && o > i && (i = o), i === o) return 0;
                        if (0 === t.length || 0 === this.length) return 0;
                        if (0 > e) throw new RangeError('targetStart out of bounds');
                        if (0 > o || o >= this.length) throw new RangeError('sourceStart out of bounds');
                        if (0 > i) throw new RangeError('sourceEnd out of bounds');
                        i > this.length && (i = this.length),
                        t.length - e < i - o && (i = t.length - e + o);
                        var r = i - o;
                        if (1000 > r || !n.TYPED_ARRAY_SUPPORT) for (var a = 0; r > a; a++) t[a + e] = this[a + o];
                        else t._set(this.subarray(o, o + r), e);
                        return r
                    },
                    n.prototype.fill = function (t, e, o) {
                        if (t || (t = 0), e || (e = 0), o || (o = this.length), e > o) throw new RangeError('end < start');
                        if (o !== e && 0 !== this.length) {
                            if (0 > e || e >= this.length) throw new RangeError('start out of bounds');
                            if (0 > o || o > this.length) throw new RangeError('end out of bounds');
                            var n;
                            if ('number' == typeof t) for (n = e; o > n; n++) this[n] = t;
                            else {
                                var i = W(t.toString()),
                                    r = i.length;
                                for (n = e; o > n; n++) this[n] = i[n % r]
                            }
                            return this
                        }
                    },
                    n.prototype.toArrayBuffer = function () {
                        if ('undefined' != typeof Uint8Array) {
                            if (n.TYPED_ARRAY_SUPPORT) return new n(this).buffer;
                            for (var t = new Uint8Array(this.length), e = 0, o = t.length; o > e; e += 1) t[e] = this[e];
                            return t.buffer
                        }
                        throw new TypeError('Buffer.toArrayBuffer not supported in this browser')
                    };
                var $ = n.prototype;
                n._augment = function (t) {
                    return t.constructor = n,
                        t._isBuffer = !0,
                        t._set = t.set,
                        t.get = $.get,
                        t.set = $.set,
                        t.write = $.write,
                        t.toString = $.toString,
                        t.toLocaleString = $.toString,
                        t.toJSON = $.toJSON,
                        t.equals = $.equals,
                        t.compare = $.compare,
                        t.indexOf = $.indexOf,
                        t.copy = $.copy,
                        t.slice = $.slice,
                        t.readUIntLE = $.readUIntLE,
                        t.readUIntBE = $.readUIntBE,
                        t.readUInt8 = $.readUInt8,
                        t.readUInt16LE = $.readUInt16LE,
                        t.readUInt16BE = $.readUInt16BE,
                        t.readUInt32LE = $.readUInt32LE,
                        t.readUInt32BE = $.readUInt32BE,
                        t.readIntLE = $.readIntLE,
                        t.readIntBE = $.readIntBE,
                        t.readInt8 = $.readInt8,
                        t.readInt16LE = $.readInt16LE,
                        t.readInt16BE = $.readInt16BE,
                        t.readInt32LE = $.readInt32LE,
                        t.readInt32BE = $.readInt32BE,
                        t.readFloatLE = $.readFloatLE,
                        t.readFloatBE = $.readFloatBE,
                        t.readDoubleLE = $.readDoubleLE,
                        t.readDoubleBE = $.readDoubleBE,
                        t.writeUInt8 = $.writeUInt8,
                        t.writeUIntLE = $.writeUIntLE,
                        t.writeUIntBE = $.writeUIntBE,
                        t.writeUInt16LE = $.writeUInt16LE,
                        t.writeUInt16BE = $.writeUInt16BE,
                        t.writeUInt32LE = $.writeUInt32LE,
                        t.writeUInt32BE = $.writeUInt32BE,
                        t.writeIntLE = $.writeIntLE,
                        t.writeIntBE = $.writeIntBE,
                        t.writeInt8 = $.writeInt8,
                        t.writeInt16LE = $.writeInt16LE,
                        t.writeInt16BE = $.writeInt16BE,
                        t.writeInt32LE = $.writeInt32LE,
                        t.writeInt32BE = $.writeInt32BE,
                        t.writeFloatLE = $.writeFloatLE,
                        t.writeFloatBE = $.writeFloatBE,
                        t.writeDoubleLE = $.writeDoubleLE,
                        t.writeDoubleBE = $.writeDoubleBE,
                        t.fill = $.fill,
                        t.inspect = $.inspect,
                        t.toArrayBuffer = $.toArrayBuffer,
                        t
                };
                var Q = /[^+\/0-9A-z\-]/g
            },
            {
                'base64-js': 53,
                ieee754: 54,
                'is-array': 55
            }
        ],
        53: [
            function (t, e, o) {
                var n = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
                !function (t) {
                    'use strict';
                    function e(t) {
                        var e = t.charCodeAt(0);
                        return e === a || e === u ? 62 : e === s || e === p ? 63 : l > e ? - 1 : l + 10 > e ? e - l + 26 + 26 : c + 26 > e ? e - c : h + 26 > e ? e - h + 26 : void 0
                    }
                    function o(t) {
                        function o(t) {
                            h[u++] = t
                        }
                        var n,
                            i,
                            a,
                            s,
                            l,
                            h;
                        if (t.length % 4 > 0) throw new Error('Invalid string. Length must be a multiple of 4');
                        var c = t.length;
                        l = '=' === t.charAt(c - 2) ? 2 : '=' === t.charAt(c - 1) ? 1 : 0,
                            h = new r(3 * t.length / 4 - l),
                            a = l > 0 ? t.length - 4 : t.length;
                        var u = 0;
                        for (n = 0, i = 0; a > n; n += 4, i += 3) s = e(t.charAt(n)) << 18 | e(t.charAt(n + 1)) << 12 | e(t.charAt(n + 2)) << 6 | e(t.charAt(n + 3)),
                            o((16711680 & s) >> 16),
                            o((65280 & s) >> 8),
                            o(255 & s);
                        return 2 === l ? (s = e(t.charAt(n)) << 2 | e(t.charAt(n + 1)) >> 4, o(255 & s))  : 1 === l && (s = e(t.charAt(n)) << 10 | e(t.charAt(n + 1)) << 4 | e(t.charAt(n + 2)) >> 2, o(s >> 8 & 255), o(255 & s)),
                            h
                    }
                    function i(t) {
                        function e(t) {
                            return n.charAt(t)
                        }
                        function o(t) {
                            return e(t >> 18 & 63) + e(t >> 12 & 63) + e(t >> 6 & 63) + e(63 & t)
                        }
                        var i,
                            r,
                            a,
                            s = t.length % 3,
                            l = '';
                        for (i = 0, a = t.length - s; a > i; i += 3) r = (t[i] << 16) + (t[i + 1] << 8) + t[i + 2],
                            l += o(r);
                        switch (s) {
                            case 1:
                                r = t[t.length - 1],
                                    l += e(r >> 2),
                                    l += e(r << 4 & 63),
                                    l += '==';
                                break;
                            case 2:
                                r = (t[t.length - 2] << 8) + t[t.length - 1],
                                    l += e(r >> 10),
                                    l += e(r >> 4 & 63),
                                    l += e(r << 2 & 63),
                                    l += '='
                        }
                        return l
                    }
                    var r = 'undefined' != typeof Uint8Array ? Uint8Array : Array,
                        a = '+'.charCodeAt(0),
                        s = '/'.charCodeAt(0),
                        l = '0'.charCodeAt(0),
                        h = 'a'.charCodeAt(0),
                        c = 'A'.charCodeAt(0),
                        u = '-'.charCodeAt(0),
                        p = '_'.charCodeAt(0);
                    t.toByteArray = o,
                        t.fromByteArray = i
                }('undefined' == typeof o ? this.base64js = {
                }
                    : o)
            },
            {
            }
        ],
        54: [
            function (t, e, o) {
                o.read = function (t, e, o, n, i) {
                    var r,
                        a,
                        s = 8 * i - n - 1,
                        l = (1 << s) - 1,
                        h = l >> 1,
                        c = - 7,
                        u = o ? i - 1 : 0,
                        p = o ? - 1 : 1,
                        d = t[e + u];
                    for (u += p, r = d & (1 << - c) - 1, d >>= - c, c += s; c > 0; r = 256 * r + t[e + u], u += p, c -= 8);
                    for (a = r & (1 << - c) - 1, r >>= - c, c += n; c > 0; a = 256 * a + t[e + u], u += p, c -= 8);
                    if (0 === r) r = 1 - h;
                    else {
                        if (r === l) return a ? 0 / 0 : (d ? - 1 : 1) * (1 / 0);
                        a += Math.pow(2, n),
                            r -= h
                    }
                    return (d ? - 1 : 1) * a * Math.pow(2, r - n)
                },
                    o.write = function (t, e, o, n, i, r) {
                        var a,
                            s,
                            l,
                            h = 8 * r - i - 1,
                            c = (1 << h) - 1,
                            u = c >> 1,
                            p = 23 === i ? Math.pow(2, - 24) - Math.pow(2, - 77)  : 0,
                            d = n ? 0 : r - 1,
                            m = n ? 1 : - 1,
                            f = 0 > e || 0 === e && 0 > 1 / e ? 1 : 0;
                        for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (s = isNaN(e) ? 1 : 0, a = c)  : (a = Math.floor(Math.log(e) / Math.LN2), e * (l = Math.pow(2, - a)) < 1 && (a--, l *= 2), e += a + u >= 1 ? p / l : p * Math.pow(2, 1 - u), e * l >= 2 && (a++, l /= 2), a + u >= c ? (s = 0, a = c)  : a + u >= 1 ? (s = (e * l - 1) * Math.pow(2, i), a += u)  : (s = e * Math.pow(2, u - 1) * Math.pow(2, i), a = 0)); i >= 8; t[o + d] = 255 & s, d += m, s /= 256, i -= 8);
                        for (a = a << i | s, h += i; h > 0; t[o + d] = 255 & a, d += m, a /= 256, h -= 8);
                        t[o + d - m] |= 128 * f
                    }
            },
            {
            }
        ],
        55: [
            function (t, e, o) {
                var n = Array.isArray,
                    i = Object.prototype.toString;
                e.exports = n || function (t) {
                        return !!t && '[object Array]' == i.call(t)
                    }
            },
            {
            }
        ],
        56: [
            function (t, e, o) {
                function n() {
                    this._events = this._events || {
                        },
                        this._maxListeners = this._maxListeners || void 0
                }
                function i(t) {
                    return 'function' == typeof t
                }
                function r(t) {
                    return 'number' == typeof t
                }
                function a(t) {
                    return 'object' == typeof t && null !== t
                }
                function s(t) {
                    return void 0 === t
                }
                e.exports = n,
                    n.EventEmitter = n,
                    n.prototype._events = void 0,
                    n.prototype._maxListeners = void 0,
                    n.defaultMaxListeners = 10,
                    n.prototype.setMaxListeners = function (t) {
                        if (!r(t) || 0 > t || isNaN(t)) throw TypeError('n must be a positive number');
                        return this._maxListeners = t,
                            this
                    },
                    n.prototype.emit = function (t) {
                        var e,
                            o,
                            n,
                            r,
                            l,
                            h;
                        if (this._events || (this._events = {
                            }), 'error' === t && (!this._events.error || a(this._events.error) && !this._events.error.length)) {
                            if (e = arguments[1], e instanceof Error) throw e;
                            throw TypeError('Uncaught, unspecified "error" event.')
                        }
                        if (o = this._events[t], s(o)) return !1;
                        if (i(o)) switch (arguments.length) {
                            case 1:
                                o.call(this);
                                break;
                            case 2:
                                o.call(this, arguments[1]);
                                break;
                            case 3:
                                o.call(this, arguments[1], arguments[2]);
                                break;
                            default:
                                for (n = arguments.length, r = new Array(n - 1), l = 1; n > l; l++) r[l - 1] = arguments[l];
                                o.apply(this, r)
                        } else if (a(o)) {
                            for (n = arguments.length, r = new Array(n - 1), l = 1; n > l; l++) r[l - 1] = arguments[l];
                            for (h = o.slice(), n = h.length, l = 0; n > l; l++) h[l].apply(this, r)
                        }
                        return !0
                    },
                    n.prototype.addListener = function (t, e) {
                        var o;
                        if (!i(e)) throw TypeError('listener must be a function');
                        if (this._events || (this._events = {
                            }), this._events.newListener && this.emit('newListener', t, i(e.listener) ? e.listener : e), this._events[t] ? a(this._events[t]) ? this._events[t].push(e)  : this._events[t] = [
                                this._events[t],
                                e
                            ] : this._events[t] = e, a(this._events[t]) && !this._events[t].warned) {
                            var o;
                            o = s(this._maxListeners) ? n.defaultMaxListeners : this._maxListeners,
                            o && o > 0 && this._events[t].length > o && (this._events[t].warned = !0, console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.', this._events[t].length), 'function' == typeof console.trace && console.trace())
                        }
                        return this
                    },
                    n.prototype.on = n.prototype.addListener,
                    n.prototype.once = function (t, e) {
                        function o() {
                            this.removeListener(t, o),
                            n || (n = !0, e.apply(this, arguments))
                        }
                        if (!i(e)) throw TypeError('listener must be a function');
                        var n = !1;
                        return o.listener = e,
                            this.on(t, o),
                            this
                    },
                    n.prototype.removeListener = function (t, e) {
                        var o,
                            n,
                            r,
                            s;
                        if (!i(e)) throw TypeError('listener must be a function');
                        if (!this._events || !this._events[t]) return this;
                        if (o = this._events[t], r = o.length, n = - 1, o === e || i(o.listener) && o.listener === e) delete this._events[t],
                        this._events.removeListener && this.emit('removeListener', t, e);
                        else if (a(o)) {
                            for (s = r; s-- > 0; ) if (o[s] === e || o[s].listener && o[s].listener === e) {
                                n = s;
                                break
                            }
                            if (0 > n) return this;
                            1 === o.length ? (o.length = 0, delete this._events[t])  : o.splice(n, 1),
                            this._events.removeListener && this.emit('removeListener', t, e)
                        }
                        return this
                    },
                    n.prototype.removeAllListeners = function (t) {
                        var e,
                            o;
                        if (!this._events) return this;
                        if (!this._events.removeListener) return 0 === arguments.length ? this._events = {
                        }
                            : this._events[t] && delete this._events[t],
                            this;
                        if (0 === arguments.length) {
                            for (e in this._events) 'removeListener' !== e && this.removeAllListeners(e);
                            return this.removeAllListeners('removeListener'),
                                this._events = {
                                },
                                this
                        }
                        if (o = this._events[t], i(o)) this.removeListener(t, o);
                        else for (; o.length; ) this.removeListener(t, o[o.length - 1]);
                        return delete this._events[t],
                            this
                    },
                    n.prototype.listeners = function (t) {
                        var e;
                        return e = this._events && this._events[t] ? i(this._events[t]) ? [
                            this._events[t]
                        ] : this._events[t].slice()  : [
                        ]
                    },
                    n.listenerCount = function (t, e) {
                        var o;
                        return o = t._events && t._events[e] ? i(t._events[e]) ? 1 : t._events[e].length : 0
                    }
            },
            {
            }
        ],
        57: [
            function (t, e, o) {
                (function (t) {
                    !function (n) {
                        function i(t) {
                            throw RangeError(O[t])
                        }
                        function r(t, e) {
                            for (var o = t.length; o--; ) t[o] = e(t[o]);
                            return t
                        }
                        function a(t, e) {
                            return r(t.split(S), e).join('.')
                        }
                        function s(t) {
                            for (var e, o, n = [
                            ], i = 0, r = t.length; r > i; ) e = t.charCodeAt(i++),
                                e >= 55296 && 56319 >= e && r > i ? (o = t.charCodeAt(i++), 56320 == (64512 & o) ? n.push(((1023 & e) << 10) + (1023 & o) + 65536)  : (n.push(e), i--))  : n.push(e);
                            return n
                        }
                        function l(t) {
                            return r(t, function (t) {
                                var e = '';
                                return t > 65535 && (t -= 65536, e += L(t >>> 10 & 1023 | 55296), t = 56320 | 1023 & t),
                                    e += L(t)
                            }).join('')
                        }
                        function h(t) {
                            return 10 > t - 48 ? t - 22 : 26 > t - 65 ? t - 65 : 26 > t - 97 ? t - 97 : R
                        }
                        function c(t, e) {
                            return t + 22 + 75 * (26 > t) - ((0 != e) << 5)
                        }
                        function u(t, e, o) {
                            var n = 0;
                            for (t = o ? D(t / A)  : t >> 1, t += D(t / e); t > B * x >> 1; n += R) t = D(t / B);
                            return D(n + (B + 1) * t / (t + M))
                        }
                        function p(t) {
                            var e,
                                o,
                                n,
                                r,
                                a,
                                s,
                                c,
                                p,
                                d,
                                m,
                                f = [
                                ],
                                g = t.length,
                                y = 0,
                                v = C,
                                b = P;
                            for (o = t.lastIndexOf(I), 0 > o && (o = 0), n = 0; o > n; ++n) t.charCodeAt(n) >= 128 && i('not-basic'),
                                f.push(t.charCodeAt(n));
                            for (r = o > 0 ? o + 1 : 0; g > r; ) {
                                for (a = y, s = 1, c = R; r >= g && i('invalid-input'), p = h(t.charCodeAt(r++)), (p >= R || p > D((E - y) / s)) && i('overflow'), y += p * s, d = b >= c ? T : c >= b + x ? x : c - b, !(d > p); c += R) m = R - d,
                                s > D(E / m) && i('overflow'),
                                    s *= m;
                                e = f.length + 1,
                                    b = u(y - a, e, 0 == a),
                                D(y / e) > E - v && i('overflow'),
                                    v += D(y / e),
                                    y %= e,
                                    f.splice(y++, 0, v)
                            }
                            return l(f)
                        }
                        function d(t) {
                            var e,
                                o,
                                n,
                                r,
                                a,
                                l,
                                h,
                                p,
                                d,
                                m,
                                f,
                                g,
                                y,
                                v,
                                b,
                                w = [
                                ];
                            for (t = s(t), g = t.length, e = C, o = 0, a = P, l = 0; g > l; ++l) f = t[l],
                            128 > f && w.push(L(f));
                            for (n = r = w.length, r && w.push(I); g > n; ) {
                                for (h = E, l = 0; g > l; ++l) f = t[l],
                                f >= e && h > f && (h = f);
                                for (y = n + 1, h - e > D((E - o) / y) && i('overflow'), o += (h - e) * y, e = h, l = 0; g > l; ++l) if (f = t[l], e > f && ++o > E && i('overflow'), f == e) {
                                    for (p = o, d = R; m = a >= d ? T : d >= a + x ? x : d - a, !(m > p); d += R) b = p - m,
                                        v = R - m,
                                        w.push(L(c(m + b % v, 0))),
                                        p = D(b / v);
                                    w.push(L(c(p, 0))),
                                        a = u(o, y, n == r),
                                        o = 0,
                                        ++n
                                }
                                ++o,
                                    ++e
                            }
                            return w.join('')
                        }
                        function m(t) {
                            return a(t, function (t) {
                                return H.test(t) ? p(t.slice(4).toLowerCase())  : t
                            })
                        }
                        function f(t) {
                            return a(t, function (t) {
                                return k.test(t) ? 'xn--' + d(t)  : t
                            })
                        }
                        var g = 'object' == typeof o && o,
                            y = 'object' == typeof e && e && e.exports == g && e,
                            v = 'object' == typeof t && t;
                        (v.global === v || v.window === v) && (n = v);
                        var b,
                            w,
                            E = 2147483647,
                            R = 36,
                            T = 1,
                            x = 26,
                            M = 38,
                            A = 700,
                            P = 72,
                            C = 128,
                            I = '-',
                            H = /^xn--/,
                            k = /[^ -~]/,
                            S = /\x2E|\u3002|\uFF0E|\uFF61/g,
                            O = {
                                overflow: 'Overflow: input needs wider integers to process',
                                'not-basic': 'Illegal input >= 0x80 (not a basic code point)',
                                'invalid-input': 'Invalid input'
                            },
                            B = R - T,
                            D = Math.floor,
                            L = String.fromCharCode;
                        if (b = {
                                version: '1.2.4',
                                ucs2: {
                                    decode: s,
                                    encode: l
                                },
                                decode: p,
                                encode: d,
                                toASCII: f,
                                toUnicode: m
                            }, 'function' == typeof define && 'object' == typeof define.amd && define.amd) define('punycode', function () {
                            return b
                        });
                        else if (g && !g.nodeType) if (y) y.exports = b;
                        else for (w in b) b.hasOwnProperty(w) && (g[w] = b[w]);
                        else n.punycode = b
                    }(this)
                }).call(this, 'undefined' != typeof global ? global : 'undefined' != typeof self ? self : 'undefined' != typeof window ? window : {
                    })
            },
            {
            }
        ],
        58: [
            function (t, e, o) {
                'use strict';
                function n(t, e) {
                    return Object.prototype.hasOwnProperty.call(t, e)
                }
                e.exports = function (t, e, o, r) {
                    e = e || '&',
                        o = o || '=';
                    var a = {
                    };
                    if ('string' != typeof t || 0 === t.length) return a;
                    var s = /\+/g;
                    t = t.split(e);
                    var l = 1000;
                    r && 'number' == typeof r.maxKeys && (l = r.maxKeys);
                    var h = t.length;
                    l > 0 && h > l && (h = l);
                    for (var c = 0; h > c; ++c) {
                        var u,
                            p,
                            d,
                            m,
                            f = t[c].replace(s, '%20'),
                            g = f.indexOf(o);
                        g >= 0 ? (u = f.substr(0, g), p = f.substr(g + 1))  : (u = f, p = ''),
                            d = decodeURIComponent(u),
                            m = decodeURIComponent(p),
                            n(a, d) ? i(a[d]) ? a[d].push(m)  : a[d] = [
                                a[d],
                                m
                            ] : a[d] = m
                    }
                    return a
                };
                var i = Array.isArray || function (t) {
                        return '[object Array]' === Object.prototype.toString.call(t)
                    }
            },
            {
            }
        ],
        59: [
            function (t, e, o) {
                'use strict';
                function n(t, e) {
                    if (t.map) return t.map(e);
                    for (var o = [
                    ], n = 0; n < t.length; n++) o.push(e(t[n], n));
                    return o
                }
                var i = function (t) {
                    switch (typeof t) {
                        case 'string':
                            return t;
                        case 'boolean':
                            return t ? 'true' : 'false';
                        case 'number':
                            return isFinite(t) ? t : '';
                        default:
                            return ''
                    }
                };
                e.exports = function (t, e, o, s) {
                    return e = e || '&',
                        o = o || '=',
                    null === t && (t = void 0),
                        'object' == typeof t ? n(a(t), function (a) {
                            var s = encodeURIComponent(i(a)) + o;
                            return r(t[a]) ? n(t[a], function (t) {
                                return s + encodeURIComponent(i(t))
                            }).join(e)  : s + encodeURIComponent(i(t[a]))
                        }).join(e)  : s ? encodeURIComponent(i(s)) + o + encodeURIComponent(i(t))  : ''
                };
                var r = Array.isArray || function (t) {
                            return '[object Array]' === Object.prototype.toString.call(t)
                        },
                    a = Object.keys || function (t) {
                            var e = [
                            ];
                            for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && e.push(o);
                            return e
                        }
            },
            {
            }
        ],
        60: [
            function (t, e, o) {
                'use strict';
                o.decode = o.parse = t('./decode'),
                    o.encode = o.stringify = t('./encode')
            },
            {
                './decode': 58,
                './encode': 59
            }
        ],
        61: [
            function (t, e, o) {
                function n() {
                    this.protocol = null,
                        this.slashes = null,
                        this.auth = null,
                        this.host = null,
                        this.port = null,
                        this.hostname = null,
                        this.hash = null,
                        this.search = null,
                        this.query = null,
                        this.pathname = null,
                        this.path = null,
                        this.href = null
                }
                function i(t, e, o) {
                    if (t && h(t) && t instanceof n) return t;
                    var i = new n;
                    return i.parse(t, e, o),
                        i
                }
                function r(t) {
                    return l(t) && (t = i(t)),
                        t instanceof n ? t.format()  : n.prototype.format.call(t)
                }
                function a(t, e) {
                    return i(t, !1, !0).resolve(e)
                }
                function s(t, e) {
                    return t ? i(t, !1, !0).resolveObject(e)  : e
                }
                function l(t) {
                    return 'string' == typeof t
                }
                function h(t) {
                    return 'object' == typeof t && null !== t
                }
                function c(t) {
                    return null === t
                }
                function u(t) {
                    return null == t
                }
                var p = t('punycode');
                o.parse = i,
                    o.resolve = a,
                    o.resolveObject = s,
                    o.format = r,
                    o.Url = n;
                var d = /^([a-z0-9.+-]+:)/i,
                    m = /:[0-9]*$/,
                    f = [
                        '<',
                        '>',
                        '"',
                        '`',
                        ' ',
                        '\r',
                        '\n',
                        '\t'
                    ],
                    g = [
                        '{',
                        '}',
                        '|',
                        '\\',
                        '^',
                        '`'
                    ].concat(f),
                    y = [
                        '\''
                    ].concat(g),
                    v = [
                        '%',
                        '/',
                        '?',
                        ';',
                        '#'
                    ].concat(y),
                    b = [
                        '/',
                        '?',
                        '#'
                    ],
                    w = 255,
                    E = /^[a-z0-9A-Z_-]{0,63}$/,
                    R = /^([a-z0-9A-Z_-]{0,63})(.*)$/,
                    T = {
                        javascript: !0,
                        'javascript:': !0
                    },
                    x = {
                        javascript: !0,
                        'javascript:': !0
                    },
                    M = {
                        http: !0,
                        https: !0,
                        ftp: !0,
                        gopher: !0,
                        file: !0,
                        'http:': !0,
                        'https:': !0,
                        'ftp:': !0,
                        'gopher:': !0,
                        'file:': !0
                    },
                    A = t('querystring');
                n.prototype.parse = function (t, e, o) {
                    if (!l(t)) throw new TypeError('Parameter \'url\' must be a string, not ' + typeof t);
                    var n = t;
                    n = n.trim();
                    var i = d.exec(n);
                    if (i) {
                        i = i[0];
                        var r = i.toLowerCase();
                        this.protocol = r,
                            n = n.substr(i.length)
                    }
                    if (o || i || n.match(/^\/\/[^@\/]+@[^@\/]+/)) {
                        var a = '//' === n.substr(0, 2);
                        !a || i && x[i] || (n = n.substr(2), this.slashes = !0)
                    }
                    if (!x[i] && (a || i && !M[i])) {
                        for (var s = - 1, h = 0; h < b.length; h++) {
                            var c = n.indexOf(b[h]);
                            - 1 !== c && ( - 1 === s || s > c) && (s = c)
                        }
                        var u,
                            m;
                        m = - 1 === s ? n.lastIndexOf('@')  : n.lastIndexOf('@', s),
                        - 1 !== m && (u = n.slice(0, m), n = n.slice(m + 1), this.auth = decodeURIComponent(u)),
                            s = - 1;
                        for (var h = 0; h < v.length; h++) {
                            var c = n.indexOf(v[h]);
                            - 1 !== c && ( - 1 === s || s > c) && (s = c)
                        }
                        - 1 === s && (s = n.length),
                            this.host = n.slice(0, s),
                            n = n.slice(s),
                            this.parseHost(),
                            this.hostname = this.hostname || '';
                        var f = '[' === this.hostname[0] && ']' === this.hostname[this.hostname.length - 1];
                        if (!f) for (var g = this.hostname.split(/\./), h = 0, P = g.length; P > h; h++) {
                            var C = g[h];
                            if (C && !C.match(E)) {
                                for (var I = '', H = 0, k = C.length; k > H; H++) I += C.charCodeAt(H) > 127 ? 'x' : C[H];
                                if (!I.match(E)) {
                                    var S = g.slice(0, h),
                                        O = g.slice(h + 1),
                                        B = C.match(R);
                                    B && (S.push(B[1]), O.unshift(B[2])),
                                    O.length && (n = '/' + O.join('.') + n),
                                        this.hostname = S.join('.');
                                    break
                                }
                            }
                        }
                        if (this.hostname = this.hostname.length > w ? '' : this.hostname.toLowerCase(), !f) {
                            for (var D = this.hostname.split('.'), L = [
                            ], h = 0; h < D.length; ++h) {
                                var F = D[h];
                                L.push(F.match(/[^A-Za-z0-9_-]/) ? 'xn--' + p.encode(F)  : F)
                            }
                            this.hostname = L.join('.')
                        }
                        var W = this.port ? ':' + this.port : '',
                            V = this.hostname || '';
                        this.host = V + W,
                            this.href += this.host,
                        f && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), '/' !== n[0] && (n = '/' + n))
                    }
                    if (!T[r]) for (var h = 0, P = y.length; P > h; h++) {
                        var _ = y[h],
                            N = encodeURIComponent(_);
                        N === _ && (N = escape(_)),
                            n = n.split(_).join(N)
                    }
                    var Z = n.indexOf('#');
                    - 1 !== Z && (this.hash = n.substr(Z), n = n.slice(0, Z));
                    var j = n.indexOf('?');
                    if ( - 1 !== j ? (this.search = n.substr(j), this.query = n.substr(j + 1), e && (this.query = A.parse(this.query)), n = n.slice(0, j))  : e && (this.search = '', this.query = {
                        }), n && (this.pathname = n), M[r] && this.hostname && !this.pathname && (this.pathname = '/'), this.pathname || this.search) {
                        var W = this.pathname || '',
                            F = this.search || '';
                        this.path = W + F
                    }
                    return this.href = this.format(),
                        this
                },
                    n.prototype.format = function () {
                        var t = this.auth || '';
                        t && (t = encodeURIComponent(t), t = t.replace(/%3A/i, ':'), t += '@');
                        var e = this.protocol || '',
                            o = this.pathname || '',
                            n = this.hash || '',
                            i = !1,
                            r = '';
                        this.host ? i = t + this.host : this.hostname && (i = t + ( - 1 === this.hostname.indexOf(':') ? this.hostname : '[' + this.hostname + ']'), this.port && (i += ':' + this.port)),
                        this.query && h(this.query) && Object.keys(this.query).length && (r = A.stringify(this.query));
                        var a = this.search || r && '?' + r || '';
                        return e && ':' !== e.substr( - 1) && (e += ':'),
                            this.slashes || (!e || M[e]) && i !== !1 ? (i = '//' + (i || ''), o && '/' !== o.charAt(0) && (o = '/' + o))  : i || (i = ''),
                        n && '#' !== n.charAt(0) && (n = '#' + n),
                        a && '?' !== a.charAt(0) && (a = '?' + a),
                            o = o.replace(/[?#]/g, function (t) {
                                return encodeURIComponent(t)
                            }),
                            a = a.replace('#', '%23'),
                        e + i + o + a + n
                    },
                    n.prototype.resolve = function (t) {
                        return this.resolveObject(i(t, !1, !0)).format()
                    },
                    n.prototype.resolveObject = function (t) {
                        if (l(t)) {
                            var e = new n;
                            e.parse(t, !1, !0),
                                t = e
                        }
                        var o = new n;
                        if (Object.keys(this).forEach(function (t) {
                                o[t] = this[t]
                            }, this), o.hash = t.hash, '' === t.href) return o.href = o.format(),
                            o;
                        if (t.slashes && !t.protocol) return Object.keys(t).forEach(function (e) {
                            'protocol' !== e && (o[e] = t[e])
                        }),
                        M[o.protocol] && o.hostname && !o.pathname && (o.path = o.pathname = '/'),
                            o.href = o.format(),
                            o;
                        if (t.protocol && t.protocol !== o.protocol) {
                            if (!M[t.protocol]) return Object.keys(t).forEach(function (e) {
                                o[e] = t[e]
                            }),
                                o.href = o.format(),
                                o;
                            if (o.protocol = t.protocol, t.host || x[t.protocol]) o.pathname = t.pathname;
                            else {
                                for (var i = (t.pathname || '').split('/'); i.length && !(t.host = i.shift()); );
                                t.host || (t.host = ''),
                                t.hostname || (t.hostname = ''),
                                '' !== i[0] && i.unshift(''),
                                i.length < 2 && i.unshift(''),
                                    o.pathname = i.join('/')
                            }
                            if (o.search = t.search, o.query = t.query, o.host = t.host || '', o.auth = t.auth, o.hostname = t.hostname || t.host, o.port = t.port, o.pathname || o.search) {
                                var r = o.pathname || '',
                                    a = o.search || '';
                                o.path = r + a
                            }
                            return o.slashes = o.slashes || t.slashes,
                                o.href = o.format(),
                                o
                        }
                        var s = o.pathname && '/' === o.pathname.charAt(0),
                            h = t.host || t.pathname && '/' === t.pathname.charAt(0),
                            p = h || s || o.host && t.pathname,
                            d = p,
                            m = o.pathname && o.pathname.split('/') || [],
                            i = t.pathname && t.pathname.split('/') || [],
                            f = o.protocol && !M[o.protocol];
                        if (f && (o.hostname = '', o.port = null, o.host && ('' === m[0] ? m[0] = o.host : m.unshift(o.host)), o.host = '', t.protocol && (t.hostname = null, t.port = null, t.host && ('' === i[0] ? i[0] = t.host : i.unshift(t.host)), t.host = null), p = p && ('' === i[0] || '' === m[0])), h) o.host = t.host || '' === t.host ? t.host : o.host,
                            o.hostname = t.hostname || '' === t.hostname ? t.hostname : o.hostname,
                            o.search = t.search,
                            o.query = t.query,
                            m = i;
                        else if (i.length) m || (m = [
                        ]),
                            m.pop(),
                            m = m.concat(i),
                            o.search = t.search,
                            o.query = t.query;
                        else if (!u(t.search)) {
                            if (f) {
                                o.hostname = o.host = m.shift();
                                var g = o.host && o.host.indexOf('@') > 0 ? o.host.split('@')  : !1;
                                g && (o.auth = g.shift(), o.host = o.hostname = g.shift())
                            }
                            return o.search = t.search,
                                o.query = t.query,
                            c(o.pathname) && c(o.search) || (o.path = (o.pathname ? o.pathname : '') + (o.search ? o.search : '')),
                                o.href = o.format(),
                                o
                        }
                        if (!m.length) return o.pathname = null,
                            o.path = o.search ? '/' + o.search : null,
                            o.href = o.format(),
                            o;
                        for (var y = m.slice( - 1) [0], v = (o.host || t.host) && ('.' === y || '..' === y) || '' === y, b = 0, w = m.length; w >= 0; w--) y = m[w],
                            '.' == y ? m.splice(w, 1)  : '..' === y ? (m.splice(w, 1), b++)  : b && (m.splice(w, 1), b--);
                        if (!p && !d) for (; b--; b) m.unshift('..');
                        !p || '' === m[0] || m[0] && '/' === m[0].charAt(0) || m.unshift(''),
                        v && '/' !== m.join('/').substr( - 1) && m.push('');
                        var E = '' === m[0] || m[0] && '/' === m[0].charAt(0);
                        if (f) {
                            o.hostname = o.host = E ? '' : m.length ? m.shift()  : '';
                            var g = o.host && o.host.indexOf('@') > 0 ? o.host.split('@')  : !1;
                            g && (o.auth = g.shift(), o.host = o.hostname = g.shift())
                        }
                        return p = p || o.host && m.length,
                        p && !E && m.unshift(''),
                            m.length ? o.pathname = m.join('/')  : (o.pathname = null, o.path = null),
                        c(o.pathname) && c(o.search) || (o.path = (o.pathname ? o.pathname : '') + (o.search ? o.search : '')),
                            o.auth = t.auth || o.auth,
                            o.slashes = o.slashes || t.slashes,
                            o.href = o.format(),
                            o
                    },
                    n.prototype.parseHost = function () {
                        var t = this.host,
                            e = m.exec(t);
                        e && (e = e[0], ':' !== e && (this.port = e.substr(1)), t = t.substr(0, t.length - e.length)),
                        t && (this.hostname = t)
                    }
            },
            {
                punycode: 57,
                querystring: 60
            }
        ]
    },
    {
    },
    [
        24
    ]);
