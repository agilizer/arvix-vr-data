!function () {
    "use strict";
    function t(t, n) {
        return typeof t === n
    }

    function n(t, n) {
        return t instanceof n
    }

    function i(t) {
        return t && t.nodeType
    }

    function e(t) {
        return i(t) ? t : n(t, g) ? t[0] : void 0
    }

    function o(t, n, i) {
        return g.each(t, function (t, e) {
            i = n.call(e, i, t, e)
        }), i
    }

    function r(t, n, i) {
        var e, o, r;
        if (t === n)return !0;
        if (!t || !n || t.constructor !== n.constructor)return !1;
        for (e = 0, o = i.length; o > e; e += 1) {
            if (r = i[e], t[r] && y(t[r].equals) && !t[r].equals(n[r]))return !1;
            if (t[r] !== n[r])return !1
        }
        return !0
    }

    function s(t, n, i, e) {
        this.left = E(t), this.top = E(n), this.width = E(i), this.height = E(e), this.right = this.left + this.width, this.bottom = this.top + this.height
    }

    function h(t, n, i, e) {
        this.visible = t || 0, this.viewport = n || 0, this.possible = i || 0, this.rects = e && T({}, e) || null
    }

    function l(t, n) {
        this.els = t, this.viewport = n
    }

    function c(t, n, i) {
        var e;
        return g.inArray(i, q) >= 0 ? e = s.ofElement(t) : g.inArray(i, S) >= 0 && (e = h.of(t, n)), e ? e[i] : 0
    }

    function u(t, n) {
        return t.val - n.val
    }

    function a(t, n) {
        return n.val - t.val
    }

    function f(t) {
        var n = s.ofContent(t, !0), i = s.ofViewport(t, !0), e = n.width - i.width, o = n.height - i.height;
        this.content = n, this.viewport = i, this.width = 0 >= e ? null : i.left / e, this.height = 0 >= o ? null : i.top / o, this.left = i.left, this.top = i.top, this.right = n.right - i.right, this.bottom = n.bottom - i.bottom
    }

    function p(t) {
        this.el = t || window
    }

    function d(t, n) {
        this.context = t, this.viewport = n, this.init()
    }

    function v(t, n, i, e) {
        this.context = new l(t, n), this.property = i, this.descending = e, this.init()
    }

    function w(t) {
        t && t !== window && t !== document ? (this.context = t, this.$autoTarget = g(t)) : this.context = window, this.init()
    }

    var g = jQuery, m = g(window), b = g(document), T = g.extend, y = g.isFunction, k = Math.max, V = Math.min, E = Math.round, x = function () {
        var t = {}, n = 1;
        return function (i) {
            return i ? (t[i] || (t[i] = n, n += 1), t[i]) : 0
        }
    }();
    T(s.prototype, {
        equals: function (t) {
            return r(this, t, ["left", "top", "width", "height"])
        }, area: function () {
            return this.width * this.height
        }, relativeTo: function (t) {
            return new s(this.left - t.left, this.top - t.top, this.width, this.height)
        }, intersection: function (t) {
            if (!n(t, s))return null;
            var i = k(this.left, t.left), e = V(this.right, t.right), o = k(this.top, t.top), r = V(this.bottom, t.bottom), h = e - i, l = r - o;
            return h >= 0 && l >= 0 ? new s(i, o, h, l) : null
        }, envelope: function (t) {
            if (!n(t, s))return this;
            var i = V(this.left, t.left), e = k(this.right, t.right), o = V(this.top, t.top), r = k(this.bottom, t.bottom), h = e - i, l = r - o;
            return new s(i, o, h, l)
        }
    }), T(s, {
        ofContent: function (t, n) {
            return t && t !== document && t !== window ? n ? new s(0, 0, t.scrollWidth, t.scrollHeight) : new s(t.offsetLeft - t.scrollLeft, t.offsetTop - t.scrollTop, t.scrollWidth, t.scrollHeight) : new s(0, 0, b.width(), b.height())
        }, ofViewport: function (t, n) {
            return t && t !== document && t !== window ? n ? new s(t.scrollLeft, t.scrollTop, t.clientWidth, t.clientHeight) : new s(t.offsetLeft, t.offsetTop, t.clientWidth, t.clientHeight) : new s(m.scrollLeft(), m.scrollTop(), m.width(), m.height())
        }, ofElement: function (t) {
            var n = g(t);
            if (!n.is(":visible"))return null;
            var i = n.offset();
            return new s(i.left, i.top, n.outerWidth(), n.outerHeight())
        }
    }), T(h.prototype, {
        equals: function (t) {
            return this.fracsEqual(t) && this.rectsEqual(t)
        }, fracsEqual: function (t) {
            return r(this, t, ["visible", "viewport", "possible"])
        }, rectsEqual: function (t) {
            return r(this.rects, t.rects, ["document", "element", "viewport"])
        }
    }), T(h, {
        of: function (t, n) {
            var e, o, r;
            return t = i(t) && s.ofElement(t) || t, n = i(n) && s.ofViewport(n) || n || s.ofViewport(), t instanceof s && (e = t.intersection(n)) ? (o = e.area(), r = V(t.width, n.width) * V(t.height, n.height), new h(o / t.area(), o / n.area(), o / r, {
                document: e,
                element: e.relativeTo(t),
                viewport: e.relativeTo(n)
            })) : new h
        }
    });
    var q = ["width", "height", "left", "right", "top", "bottom"], S = ["possible", "visible", "viewport"];
    T(l.prototype, {
        sorted: function (t, n) {
            var i = this.viewport;
            return g.map(this.els, function (n) {
                return {el: n, val: c(n, i, t)}
            }).sort(n ? a : u)
        }, best: function (t, n) {
            return this.els.length ? this.sorted(t, n)[0] : null
        }
    }), T(f.prototype, {
        equals: function (t) {
            return r(this, t, ["width", "height", "left", "top", "right", "bottom", "content", "viewport"])
        }
    }), T(p.prototype, {
        equals: function (t) {
            return r(this, t, ["el"])
        }, scrollState: function () {
            return new f(this.el)
        }, scrollTo: function (t, n, i) {
            var e = g(this.el === window ? "html,body" : this.el);
            t = t || 0, n = n || 0, i = isNaN(i) ? 1e3 : i, e.stop(!0).animate({scrollLeft: t, scrollTop: n}, i)
        }, scroll: function (t, n, i) {
            var e = this.el === window ? m : g(this.el);
            t = t || 0, n = n || 0, this.scrollTo(e.scrollLeft() + t, e.scrollTop() + n, i)
        }, scrollToRect: function (t, n, i, e) {
            n = n || 0, i = i || 0, this.scrollTo(t.left - n, t.top - i, e)
        }, scrollToElement: function (t, n, i, e) {
            var o = s.ofElement(t).relativeTo(s.ofContent(this.el));
            this.scrollToRect(o, n, i, e)
        }
    });
    var C = {
        init: function () {
            this.callbacks = g.Callbacks("memory unique"), this.currVal = null, this.prevVal = null, this.checkProxy = g.proxy(this.check, this), this.autoCheck()
        }, bind: function (t) {
            this.callbacks.add(t)
        }, unbind: function (t) {
            t ? this.callbacks.remove(t) : this.callbacks.empty()
        }, trigger: function () {
            this.callbacks.fireWith(this.context, [this.currVal, this.prevVal])
        }, check: function (t) {
            var n = this.updatedValue(t);
            return void 0 === n ? !1 : (this.prevVal = this.currVal, this.currVal = n, this.trigger(), !0)
        }, $autoTarget: m, autoEvents: "load resize scroll", autoCheck: function (t) {
            this.$autoTarget[t === !1 ? "off" : "on"](this.autoEvents, this.checkProxy)
        }
    };
    T(d.prototype, C, {
        updatedValue: function () {
            var t = h.of(this.context, this.viewport);
            return this.currVal && this.currVal.equals(t) ? void 0 : t
        }
    }), T(v.prototype, C, {
        updatedValue: function () {
            var t = this.context.best(this.property, this.descending);
            return t && (t = t.val > 0 ? t.el : null, this.currVal !== t) ? t : void 0
        }
    }), T(w.prototype, C, {
        updatedValue: function () {
            var t = new f(this.context);
            return this.currVal && this.currVal.equals(t) ? void 0 : t
        }
    });
    var L = function (t, n) {
        var i = [].slice, e = jQuery, o = e.extend, r = e.isFunction, s = o({}, n), h = function (n, i, o, s) {
            return o = r(o) ? o.apply(n, i) : o, r(s[o]) ? s[o].apply(n, i) : void e.error('Method "' + o + '" does not exist on jQuery.' + t)
        }, l = function () {
            return h(this, i.call(arguments), s.defaultStatic, l)
        }, c = function (t) {
            return r(c[t]) ? c[t].apply(this, i.call(arguments, 1)) : h(this, i.call(arguments), s.defaultMethod, c)
        }, u = function (t) {
            t && (o(l, t.statics), o(c, t.methods)), l.modplug = u
        };
        u.prev = {statics: e[t], methods: e.fn[t]}, u(n), e[t] = l, e.fn[t] = c
    }, M = "fracs";
    L(M, {
        statics: {
            version: "0.15.0",
            Rect: s,
            Fractions: h,
            Group: l,
            ScrollState: f,
            Viewport: p,
            FracsCallbacks: d,
            GroupCallbacks: v,
            ScrollStateCallbacks: w,
            fracs: function (t, n) {
                return h.of(t, n)
            }
        }, methods: {
            content: function (t) {
                return this.length ? s.ofContent(this[0], t) : null
            }, envelope: function () {
                return o(this, function (t) {
                    var n = s.ofElement(this);
                    return t ? t.envelope(n) : n
                })
            }, fracs: function (n, i, o) {
                t(n, "string") || (o = i, i = n, n = null), y(i) || (o = i, i = null), o = e(o);
                var r = M + ".fracs." + x(o);
                return "unbind" === n ? this.each(function () {
                    var t = g(this).data(r);
                    t && t.unbind(i)
                }) : "check" === n ? this.each(function () {
                    var t = g(this).data(r);
                    t && t.check()
                }) : y(i) ? this.each(function () {
                    var t = g(this), n = t.data(r);
                    n || (n = new d(this, o), t.data(r, n)), n.bind(i)
                }) : this.length ? h.of(this[0], o) : null
            }, intersection: function () {
                return o(this, function (t) {
                    var n = s.ofElement(this);
                    return t ? t.intersection(n) : n
                })
            }, max: function (t, n, i) {
                return y(n) || (i = n, n = null), i = e(i), n ? (new v(this, i, t, !0).bind(n), this) : this.pushStack(new l(this, i).best(t, !0).el)
            }, min: function (t, n, i) {
                return y(n) || (i = n, n = null), i = e(i), n ? (new v(this, i, t).bind(n), this) : this.pushStack(new l(this, i).best(t).el)
            }, rect: function () {
                return this.length ? s.ofElement(this[0]) : null
            }, scrollState: function (n, i) {
                var e = M + ".scrollState";
                return t(n, "string") || (i = n, n = null), "unbind" === n ? this.each(function () {
                    var t = g(this).data(e);
                    t && t.unbind(i)
                }) : "check" === n ? this.each(function () {
                    var t = g(this).data(e);
                    t && t.check()
                }) : y(i) ? this.each(function () {
                    var t = g(this), n = t.data(e);
                    n || (n = new w(this), t.data(e, n)), n.bind(i)
                }) : this.length ? new f(this[0]) : null
            }, scroll: function (t, n, i) {
                return this.each(function () {
                    new p(this).scroll(t, n, i)
                })
            }, scrollTo: function (t, n, i, o) {
                return g.isNumeric(t) && (o = i, i = n, n = t, t = null), t = e(t), this.each(function () {
                    t ? new p(this).scrollToElement(t, n, i, o) : new p(this).scrollTo(n, i, o)
                })
            }, scrollToThis: function (t, n, i, o) {
                return o = new p(e(o)), o.scrollToElement(this[0], t, n, i), this
            }, softLink: function (t, n, i, o) {
                return o = new p(e(o)), this.filter("a[href^=#]").each(function () {
                    var e = g(this);
                    e.on("click", function () {
                        o.scrollToElement(g(e.attr("href"))[0], t, n, i)
                    })
                })
            }, sort: function (n, i, o) {
                return t(i, "boolean") || (o = i, i = null), o = e(o), this.pushStack(g.map(new l(this, o).sorted(n, !i), function (t) {
                    return t.el
                }))
            }, viewport: function (t) {
                return this.length ? s.ofViewport(this[0], t) : null
            }
        }, defaultStatic: "fracs", defaultMethod: "fracs"
    })
}();
if ("undefined" == typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");
+function (t) {
    "use strict";
    function e(e) {
        return this.each(function () {
            var i = t(this), s = i.data("bs.tooltip"), n = "object" == typeof e && e;
            (s || "destroy" != e) && (s || i.data("bs.tooltip", s = new o(this, n)), "string" == typeof e && s[e]())
        })
    }

    var o = function (t, e) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null, this.init("tooltip", t, e)
    };
    o.VERSION = "3.2.0", o.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1,
        viewport: {selector: "body", padding: 0}
    }, o.prototype.init = function (e, o, i) {
        this.enabled = !0, this.type = e, this.$element = t(o), this.options = this.getOptions(i), this.$viewport = this.options.viewport && t(this.options.viewport.selector || this.options.viewport);
        for (var s = this.options.trigger.split(" "), n = s.length; n--;) {
            var r = s[n];
            if ("click" == r)this.$element.on("click." + this.type, this.options.selector, t.proxy(this.toggle, this)); else if ("manual" != r) {
                var a = "hover" == r ? "mouseenter" : "focusin", l = "hover" == r ? "mouseleave" : "focusout";
                this.$element.on(a + "." + this.type, this.options.selector, t.proxy(this.enter, this)), this.$element.on(l + "." + this.type, this.options.selector, t.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = t.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    }, o.prototype.getDefaults = function () {
        return o.DEFAULTS
    }, o.prototype.getOptions = function (e) {
        return e = t.extend({}, this.getDefaults(), this.$element.data(), e), e.delay && "number" == typeof e.delay && (e.delay = {
            show: e.delay,
            hide: e.delay
        }), e
    }, o.prototype.getDelegateOptions = function () {
        var e = {}, o = this.getDefaults();
        return this._options && t.each(this._options, function (t, i) {
            o[t] != i && (e[t] = i)
        }), e
    }, o.prototype.enter = function (e) {
        var o = e instanceof this.constructor ? e : t(e.currentTarget).data("bs." + this.type);
        return o || (o = new this.constructor(e.currentTarget, this.getDelegateOptions()), t(e.currentTarget).data("bs." + this.type, o)), clearTimeout(o.timeout), o.hoverState = "in", o.options.delay && o.options.delay.show ? void(o.timeout = setTimeout(function () {
            "in" == o.hoverState && o.show()
        }, o.options.delay.show)) : o.show()
    }, o.prototype.leave = function (e) {
        var o = e instanceof this.constructor ? e : t(e.currentTarget).data("bs." + this.type);
        return o || (o = new this.constructor(e.currentTarget, this.getDelegateOptions()), t(e.currentTarget).data("bs." + this.type, o)), clearTimeout(o.timeout), o.hoverState = "out", o.options.delay && o.options.delay.hide ? void(o.timeout = setTimeout(function () {
            "out" == o.hoverState && o.hide()
        }, o.options.delay.hide)) : o.hide()
    }, o.prototype.show = function () {
        var e = t.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            this.$element.trigger(e);
            var o = t.contains(document.documentElement, this.$element[0]);
            if (e.isDefaultPrevented() || !o)return;
            var i = this, s = this.tip(), n = this.getUID(this.type);
            this.setContent(), s.attr("id", n), this.$element.attr("aria-describedby", n), this.options.animation && s.addClass("fade");
            var r = "function" == typeof this.options.placement ? this.options.placement.call(this, s[0], this.$element[0]) : this.options.placement, a = /\s?auto?\s?/i, l = a.test(r);
            l && (r = r.replace(a, "") || "top"), s.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(r).data("bs." + this.type, this), this.options.container ? s.appendTo(this.options.container) : s.insertAfter(this.$element);
            var p = this.getPosition(), h = s[0].offsetWidth, f = s[0].offsetHeight;
            if (l) {
                var u = r, d = this.$element.parent(), c = this.getPosition(d);
                r = "bottom" == r && p.top + p.height + f - c.scroll > c.height ? "top" : "top" == r && p.top - c.scroll - f < 0 ? "bottom" : "right" == r && p.right + h > c.width ? "left" : "left" == r && p.left - h < c.left ? "right" : r, s.removeClass(u).addClass(r)
            }
            var g = this.getCalculatedOffset(r, p, h, f);
            this.applyPlacement(g, r);
            var y = function () {
                i.$element.trigger("shown.bs." + i.type), i.hoverState = null
            };
            t.support.transition && this.$tip.hasClass("fade") ? s.one("bsTransitionEnd", y).emulateTransitionEnd(150) : y()
        }
    }, o.prototype.applyPlacement = function (e, o) {
        var i = this.tip(), s = i[0].offsetWidth, n = i[0].offsetHeight, r = parseInt(i.css("margin-top"), 10), a = parseInt(i.css("margin-left"), 10);
        isNaN(r) && (r = 0), isNaN(a) && (a = 0), e.top = e.top + r, e.left = e.left + a, t.offset.setOffset(i[0], t.extend({
            using: function (t) {
                i.css({top: Math.round(t.top), left: Math.round(t.left)})
            }
        }, e), 0), i.addClass("in");
        var l = i[0].offsetWidth, p = i[0].offsetHeight;
        "top" == o && p != n && (e.top = e.top + n - p);
        var h = this.getViewportAdjustedDelta(o, e, l, p);
        h.left ? e.left += h.left : e.top += h.top;
        var f = h.left ? 2 * h.left - s + l : 2 * h.top - n + p, u = h.left ? "left" : "top", d = h.left ? "offsetWidth" : "offsetHeight";
        i.offset(e), this.replaceArrow(f, i[0][d], u)
    }, o.prototype.replaceArrow = function (t, e, o) {
        this.arrow().css(o, t ? 50 * (1 - t / e) + "%" : "")
    }, o.prototype.setContent = function () {
        var t = this.tip(), e = this.getTitle();
        t.find(".tooltip-inner")[this.options.html ? "html" : "text"](e), t.removeClass("fade in top bottom left right")
    }, o.prototype.hide = function () {
        function e() {
            "in" != o.hoverState && i.detach(), o.$element.trigger("hidden.bs." + o.type)
        }

        var o = this, i = this.tip(), s = t.Event("hide.bs." + this.type);
        return this.$element.removeAttr("aria-describedby"), this.$element.trigger(s), s.isDefaultPrevented() ? void 0 : (i.removeClass("in"), t.support.transition && this.$tip.hasClass("fade") ? i.one("bsTransitionEnd", e).emulateTransitionEnd(150) : e(), this.hoverState = null, this)
    }, o.prototype.fixTitle = function () {
        var t = this.$element;
        (t.attr("title") || "string" != typeof t.attr("data-original-title")) && t.attr("data-original-title", t.attr("title") || "").attr("title", "")
    }, o.prototype.hasContent = function () {
        return this.getTitle()
    }, o.prototype.getPosition = function (e) {
        e = e || this.$element;
        var o = e[0], i = "BODY" == o.tagName;
        return t.extend({}, "function" == typeof o.getBoundingClientRect ? o.getBoundingClientRect() : null, {
            scroll: i ? document.documentElement.scrollTop || document.body.scrollTop : e.scrollTop(),
            width: i ? t(window).width() : e.outerWidth(),
            height: i ? t(window).height() : e.outerHeight()
        }, i ? {top: 0, left: 0} : e.offset())
    }, o.prototype.getCalculatedOffset = function (t, e, o, i) {
        return "bottom" == t ? {
            top: e.top + e.height,
            left: e.left + e.width / 2 - o / 2
        } : "top" == t ? {
            top: e.top - i,
            left: e.left + e.width / 2 - o / 2
        } : "left" == t ? {top: e.top + e.height / 2 - i / 2, left: e.left - o} : {
            top: e.top + e.height / 2 - i / 2,
            left: e.left + e.width
        }
    }, o.prototype.getViewportAdjustedDelta = function (t, e, o, i) {
        var s = {top: 0, left: 0};
        if (!this.$viewport)return s;
        var n = this.options.viewport && this.options.viewport.padding || 0, r = this.getPosition(this.$viewport);
        if (/right|left/.test(t)) {
            var a = e.top - n - r.scroll, l = e.top + n - r.scroll + i;
            a < r.top ? s.top = r.top - a : l > r.top + r.height && (s.top = r.top + r.height - l)
        } else {
            var p = e.left - n, h = e.left + n + o;
            p < r.left ? s.left = r.left - p : h > r.width && (s.left = r.left + r.width - h)
        }
        return s
    }, o.prototype.getTitle = function () {
        var t, e = this.$element, o = this.options;
        return t = e.attr("data-original-title") || ("function" == typeof o.title ? o.title.call(e[0]) : o.title)
    }, o.prototype.getUID = function (t) {
        do t += ~~(1e6 * Math.random()); while (document.getElementById(t));
        return t
    }, o.prototype.tip = function () {
        return this.$tip = this.$tip || t(this.options.template)
    }, o.prototype.arrow = function () {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    }, o.prototype.validate = function () {
        this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null)
    }, o.prototype.enable = function () {
        this.enabled = !0
    }, o.prototype.disable = function () {
        this.enabled = !1
    }, o.prototype.toggleEnabled = function () {
        this.enabled = !this.enabled
    }, o.prototype.toggle = function (e) {
        var o = this;
        e && (o = t(e.currentTarget).data("bs." + this.type), o || (o = new this.constructor(e.currentTarget, this.getDelegateOptions()), t(e.currentTarget).data("bs." + this.type, o))), o.tip().hasClass("in") ? o.leave(o) : o.enter(o)
    }, o.prototype.destroy = function () {
        clearTimeout(this.timeout), this.hide().$element.off("." + this.type).removeData("bs." + this.type)
    };
    var i = t.fn.tooltip;
    t.fn.tooltip = e, t.fn.tooltip.Constructor = o, t.fn.tooltip.noConflict = function () {
        return t.fn.tooltip = i, this
    }
}(jQuery);
!function (e, t, n) {
    "undefined" != typeof module && module.exports ? module.exports = n() : "function" == typeof define && define.amd ? define(n) : t[e] = n()
}("Keen", this, function () {
    "use strict";
    function Keen() {
        return _init.apply(this, arguments)
    }

    function _init(e) {
        if (_isUndefined(e))throw new Error("Check out our JavaScript SDK Usage Guide: https://keen.io/docs/clients/javascript/usage-guide/");
        if (_isUndefined(e.projectId) || "String" !== _type(e.projectId) || e.projectId.length < 1)throw new Error("Please provide a projectId");
        this.configure(e)
    }

    function _extend(e) {
        for (var t = 1; t < arguments.length; t++)for (var n in arguments[t])e[n] = arguments[t][n];
        return e
    }

    function _isUndefined(e) {
        return void 0 === e
    }

    function _type(e) {
        var t = e && e.constructor ? e.constructor.toString() : void 0;
        return t ? t.match(/function (.*)\(/)[1] : "Null"
    }

    function _each(e, t, n) {
        var r;
        if (!e)return 0;
        if (n = n ? n : e, "array" === _type(e)) {
            for (r = 0; r < e.length; r++)if (t.call(n, e[r], r, e) === !1)return 0
        } else for (r in e)if (e.hasOwnProperty(r) && t.call(n, e[r], r, e) === !1)return 0;
        return 1
    }

    function _parse_params(e) {
        for (var t, n = {}, r = /\+/g, i = /([^&=]+)=?([^&]*)/g, o = function (e) {
            return decodeURIComponent(e.replace(r, " "))
        }, a = e.split("?")[1]; t = i.exec(a);)n[o(t[1])] = o(t[2]);
        return n
    }

    function _set_protocol(e) {
        switch (e) {
            case"http":
                return "http";
            case"auto":
                return location.protocol.replace(/:/g, "");
            case"https":
            case void 0:
            default:
                return "https"
        }
    }

    function _set_request_type(e) {
        var t = e || "jsonp", n = !1;
        return ("Object" === _type(XMLHttpRequest) || "Function" === _type(XMLHttpRequest)) && "withCredentials" in new XMLHttpRequest && (n = !0), null == t || "xhr" == t ? n ? "xhr" : "jsonp" : t
    }

    function _build_url(e) {
        return this.client.endpoint + "/projects/" + this.client.projectId + e
    }

    function _uploadEvent(e, t, n, r, i) {
        var o = _build_url.apply(this, ["/events/" + e]), a = {};
        n = n === !1 ? !1 : !0, this.client.globalProperties && (a = this.client.globalProperties(e));
        for (var c in t)t.hasOwnProperty(c) && (a[c] = t[c]);
        switch (this.client.requestType) {
            case"xhr":
                _request.xhr.apply(this, ["POST", o, null, a, this.client.writeKey, n, r, i]);
                break;
            case"jsonp":
                var s = JSON.stringify(a), l = Keen.Base64.encode(s);
                o = o + "?api_key=" + this.client.writeKey, o = o + "&data=" + l, o = o + "&modified=" + (new Date).getTime(), _request.jsonp.apply(this, [o, this.client.writeKey, r, i]);
                break;
            case"beacon":
                var s = JSON.stringify(a), l = Keen.Base64.encode(s);
                o = o + "?api_key=" + encodeURIComponent(this.client.writeKey), o = o + "&data=" + encodeURIComponent(l), o = o + "&modified=" + encodeURIComponent((new Date).getTime()), o += "&c=clv1", _request.beacon.apply(this, [o, null, r, i])
        }
    }

    Keen.prototype.configure = function (e) {
        return e.host = _isUndefined(e.host) ? "vr.arvix.cn/session" : e.host.replace(/.*?:\/\//g, ""), e.protocol = _set_protocol(e.protocol), e.requestType = _set_request_type(e.requestType), this.client = {
            projectId: e.projectId,
            writeKey: e.writeKey,
            readKey: e.readKey,
            globalProperties: null,
            endpoint:  "http://" + e.host,
            requestType: e.requestType
        }, Keen.trigger("client", this, e), this.trigger("ready"), this
    };
    var _request = {
        xhr: function (e, t, n, r, i, o, a, c) {
            if (!i)return Keen.log("Please provide a writeKey for https://keen.io/project/" + this.client.projectId);
            var s = new XMLHttpRequest;
            if (s.onreadystatechange = function () {
                    if (4 == s.readyState)if (s.status >= 200 && s.status < 300) {
                        var e;
                        try {
                            e = JSON.parse(s.responseText)
                        } catch (t) {
                            Keen.log("Could not JSON parse HTTP response: " + s.responseText), c && c(s, t)
                        }
                        a && e && a(e)
                    } else Keen.log("HTTP request failed."), c && c(s, null)
                }, s.open(e, t, o), i && s.setRequestHeader("Authorization", i), r && s.setRequestHeader("Content-Type", "application/json"), n)for (var l in n)n.hasOwnProperty(l) && s.setRequestHeader(l, n[l]);
            var u = r ? JSON.stringify(r) : null;
            s.send(u)
        }, jsonp: function (e, t, n, r) {
            if (!t)return Keen.log("Please provide a writeKey for https://keen.io/project/" + this.client.projectId);
            if (t && e.indexOf("api_key") < 0) {
                var i = e.indexOf("?") > 0 ? "&" : "?";
                e = e + i + "api_key=" + t
            }
            for (var o = "keenJSONPCallback" + (new Date).getTime(); o in window;)o += "a";
            var a = !1;
            window[o] = function (e) {
                a = !0, n && e && n(e), window[o] = void 0
            }, e = e + "&jsonp=" + o;
            var c = document.createElement("script");
            c.id = "keen-jsonp", c.src = e, document.getElementsByTagName("head")[0].appendChild(c), c.onreadystatechange = function () {
                a === !1 && "loaded" === this.readyState && (a = !0, r && r())
            }, c.onerror = function () {
                a === !1 && (a = !0, r && r())
            }
        }, beacon: function (e, t, n, r) {
            if (t && e.indexOf("api_key") < 0) {
                var i = e.indexOf("?") > 0 ? "&" : "?";
                e = e + i + "api_key=" + t
            }
            var o = !1, a = document.createElement("img");
            a.onload = function () {
                if (o = !0, "naturalHeight" in this) {
                    if (this.naturalHeight + this.naturalWidth === 0)return void this.onerror()
                } else if (this.width + this.height === 0)return void this.onerror();
                n && n({created: !0})
            }, a.onerror = function () {
                o = !0, r && r()
            }, a.src = e
        }
    }, Events = Keen.Events = {
        on: function (e, t) {
            this.listeners || (this.listeners = {});
            var n = this.listeners[e] || (this.listeners[e] = []);
            return n.push({callback: t}), this
        }, off: function (e, t) {
            if (!e && !t)return this.listeners = void 0, delete this.listeners, this;
            for (var n = this.listeners[e] || [], r = n.length; r--;)t && t == n[r].callback && this.listeners[e].splice(r, 1), t && 0 != n.length || (this.listeners[e] = void 0, delete this.listeners[e]);
            return this
        }, trigger: function (e) {
            if (!this.listeners)return this;
            for (var t = Array.prototype.slice.call(arguments, 1), n = this.listeners[e] || [], r = 0; r < n.length; r++)n[r].callback.apply(this, t);
            return this
        }
    };
    _extend(Keen.prototype, Events), _extend(Keen, Events), Keen.loaded = !0, Keen.utils = {
        each: _each,
        extend: _extend,
        parseParams: _parse_params
    }, Keen.ready = function (e) {
        Keen.loaded ? e() : Keen.on("ready", e)
    }, Keen.log = function (e) {
        "object" == typeof console && console.log("[Keen IO]", e)
    };
    var Plugins = Keen.Plugins = {};
    Keen.prototype.addEvent = function () {
        _uploadEvent.apply(this, arguments)
    }, Keen.prototype.addEventSync = function (e, t, n, r) {
        _uploadEvent.apply(this, [e, t, !1, n, r])
    }, Keen.prototype.trackExternalLink = function (e, t, n, r, i) {
        var o = e, a = o.metaKey, c = o.target, s = !1, l = function () {
        };
        return void 0 === r && (r = 500), "A" === c.nodeName ? l = function () {
            a || s || (s = !0, window.location = c.href)
        } : "FORM" === c.nodeName && (l = function () {
            s || (s = !0, c.submit())
        }), i && (l = function () {
            s || (s = !0, i())
        }), _uploadEvent.call(this, t, n, l, l), setTimeout(function () {
            l()
        }, r), a ? void 0 : !1
    }, Keen.prototype.setGlobalProperties = function (e) {
        if (!this.client)return Keen.log("Check out our JavaScript SDK Usage Guide: https://keen.io/docs/clients/javascript/usage-guide/");
        if (!e || "function" != typeof e)throw new Error("Invalid value for global properties: " + e);
        this.client.globalProperties = e
    }, Keen.Base64 = {
        map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", encode: function (e) {
            var t, n, r, i, o, a, c, s = "", l = 0, u = this.map;
            for (e = this.utf8.encode(e); l < e.length;)t = e.charCodeAt(l++), n = e.charCodeAt(l++), r = e.charCodeAt(l++), i = t >> 2, o = (3 & t) << 4 | n >> 4, a = isNaN(n) ? 64 : (15 & n) << 2 | r >> 6, c = isNaN(n) || isNaN(r) ? 64 : 63 & r, s = s + u.charAt(i) + u.charAt(o) + u.charAt(a) + u.charAt(c);
            return s
        }, decode: function (e) {
            var t, n, r, i, o, a, c, s = "", l = 0, u = this.map, f = String.fromCharCode;
            for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); l < e.length;)t = u.indexOf(e.charAt(l++)), n = u.indexOf(e.charAt(l++)), r = u.indexOf(e.charAt(l++)), i = u.indexOf(e.charAt(l++)), o = t << 2 | n >> 4, a = (15 & n) << 4 | r >> 2, c = (3 & r) << 6 | i, s = s + (f(o) + (64 != r ? f(a) : "")) + (64 != i ? f(c) : "");
            return this.utf8.decode(s)
        }, utf8: {
            encode: function (e) {
                for (var t, n = "", r = 0, i = String.fromCharCode; r < e.length;)t = e.charCodeAt(r++), n += 128 > t ? i(t) : t > 127 && 2048 > t ? i(t >> 6 | 192) + i(63 & t | 128) : i(t >> 12 | 224) + i(t >> 6 & 63 | 128) + i(63 & t | 128);
                return n
            }, decode: function (e) {
                for (var t, n, r = "", i = 0, o = String.fromCharCode; i < e.length;)n = e.charCodeAt(i), r += 128 > n ? [o(n), i++][0] : n > 191 && 224 > n ? [o((31 & n) << 6 | 63 & (t = e.charCodeAt(i + 1))), i += 2][0] : [o((15 & n) << 12 | (63 & (t = e.charCodeAt(i + 1))) << 6 | 63 & (c3 = e.charCodeAt(i + 2))), i += 3][0];
                return r
            }
        }
    }, "object" != typeof JSON && (JSON = {}), function () {
        function f(e) {
            return 10 > e ? "0" + e : e
        }

        function quote(e) {
            return escapable.lastIndex = 0, escapable.test(e) ? '"' + e.replace(escapable, function (e) {
                var t = meta[e];
                return "string" == typeof t ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
            }) + '"' : '"' + e + '"'
        }

        function str(e, t) {
            var n, r, i, o, a, c = gap, s = t[e];
            switch (s && "object" == typeof s && "function" == typeof s.toJSON && (s = s.toJSON(e)), "function" == typeof rep && (s = rep.call(t, e, s)), typeof s) {
                case"string":
                    return quote(s);
                case"number":
                    return isFinite(s) ? String(s) : "null";
                case"boolean":
                case"null":
                    return String(s);
                case"object":
                    if (!s)return "null";
                    if (gap += indent, a = [], "[object Array]" === Object.prototype.toString.apply(s)) {
                        for (o = s.length, n = 0; o > n; n += 1)a[n] = str(n, s) || "null";
                        return i = 0 === a.length ? "[]" : gap ? "[\n" + gap + a.join(",\n" + gap) + "\n" + c + "]" : "[" + a.join(",") + "]", gap = c, i
                    }
                    if (rep && "object" == typeof rep)for (o = rep.length, n = 0; o > n; n += 1)"string" == typeof rep[n] && (r = rep[n], i = str(r, s), i && a.push(quote(r) + (gap ? ": " : ":") + i)); else for (r in s)Object.prototype.hasOwnProperty.call(s, r) && (i = str(r, s), i && a.push(quote(r) + (gap ? ": " : ":") + i));
                    return i = 0 === a.length ? "{}" : gap ? "{\n" + gap + a.join(",\n" + gap) + "\n" + c + "}" : "{" + a.join(",") + "}", gap = c, i
            }
        }

        "function" != typeof Date.prototype.toJSON && (Date.prototype.toJSON = function () {
            return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null
        }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function () {
            return this.valueOf()
        });
        var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, gap, indent, meta = {
            "\b": "\\b",
            "	": "\\t",
            "\n": "\\n",
            "\f": "\\f",
            "\r": "\\r",
            '"': '\\"',
            "\\": "\\\\"
        }, rep;
        "function" != typeof JSON.stringify && (JSON.stringify = function (e, t, n) {
            var r;
            if (gap = "", indent = "", "number" == typeof n)for (r = 0; n > r; r += 1)indent += " "; else"string" == typeof n && (indent = n);
            if (rep = t, t && "function" != typeof t && ("object" != typeof t || "number" != typeof t.length))throw new Error("JSON.stringify");
            return str("", {"": e})
        }), "function" != typeof JSON.parse && (JSON.parse = function (text, reviver) {
            function walk(e, t) {
                var n, r, i = e[t];
                if (i && "object" == typeof i)for (n in i)Object.prototype.hasOwnProperty.call(i, n) && (r = walk(i, n), void 0 !== r ? i[n] = r : delete i[n]);
                return reviver.call(e, t, i)
            }

            var j;
            if (text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function (e) {
                    return "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
                })), /^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, "")))return j = eval("(" + text + ")"), "function" == typeof reviver ? walk({"": j}, "") : j;
            throw new SyntaxError("JSON.parse")
        })
    }(), !function (e, t, n) {
        "undefined" != typeof module && module.exports ? module.exports = n() : "function" == typeof define && define.amd ? define(n) : t[e] = n()
    }("domready", Keen.utils, function (e) {
        function t(e) {
            for (d = 1; e = r.shift();)e()
        }

        var n, r = [], i = !1, o = document, a = o.documentElement, c = a.doScroll, s = "DOMContentLoaded", l = "addEventListener", u = "onreadystatechange", f = "readyState", p = c ? /^loaded|^c/ : /^loaded|c/, d = p.test(o[f]);
        return o[l] && o[l](s, n = function () {
            o.removeEventListener(s, n, i), t()
        }, i), c && o.attachEvent(u, n = function () {
            /^c/.test(o[f]) && (o.detachEvent(u, n), t())
        }), e = c ? function (t) {
            self != top ? d ? t() : r.push(t) : function () {
                try {
                    a.doScroll("left")
                } catch (n) {
                    return setTimeout(function () {
                        e(t)
                    }, 50)
                }
                t()
            }()
        } : function (e) {
            d ? e() : r.push(e)
        }
    });
    var loaded = window.Keen, cached = window._Keen || {}, clients, ready;
    if (loaded && cached) {
        clients = cached.clients || {}, ready = cached.ready || [];
        for (var instance in clients)if (clients.hasOwnProperty(instance)) {
            var client = clients[instance];
            for (var method in Keen.prototype)Keen.prototype.hasOwnProperty(method) && (loaded.prototype[method] = Keen.prototype[method]);
            if (loaded.Query = Keen.Query ? Keen.Query : function () {
                }, loaded.Visualization = Keen.Visualization ? Keen.Visualization : function () {
                }, client._config && (client.configure.call(client, client._config), delete client._config), client._setGlobalProperties) {
                for (var globals = client._setGlobalProperties, i = 0; i < globals.length; i++)client.setGlobalProperties.apply(client, globals[i]);
                delete client._setGlobalProperties
            }
            if (client._addEvent) {
                for (var queue = client._addEvent || [], i = 0; i < queue.length; i++)client.addEvent.apply(client, queue[i]);
                delete client._addEvent
            }
            var callback = client._on || [];
            if (client._on) {
                for (var i = 0; i < callback.length; i++)client.on.apply(client, callback[i]);
                client.trigger("ready"), delete client._on
            }
        }
        for (var i = 0; i < ready.length; i++) {
            var callback = ready[i];
            Keen.on("ready", function () {
                callback()
            })
        }
    }
    return Keen.loaded && setTimeout(function () {
        Keen.utils.domready(function () {
            Keen.trigger("ready")
        })
    }, 0), Keen
});

!function (i, e) {
    "use strict";
    var s = "", r = "?", o = "function", a = "undefined", n = "object", t = "major", d = "model", w = "name", l = "type", p = "vendor", m = "version", c = "architecture", u = "console", g = "mobile", f = "tablet", h = "smarttv", b = {
        has: function (i, e) {
            return -1 !== e.toLowerCase().indexOf(i.toLowerCase())
        }, lowerize: function (i) {
            return i.toLowerCase()
        }
    }, y = {
        rgx: function () {
            for (var i, s, r, t, d, w, l, p = 0, m = arguments; p < m.length; p += 2) {
                var c = m[p], u = m[p + 1];
                if (typeof i === a) {
                    i = {};
                    for (t in u)d = u[t], typeof d === n ? i[d[0]] = e : i[d] = e
                }
                for (s = r = 0; s < c.length; s++)if (w = c[s].exec(this.getUA())) {
                    for (t = 0; t < u.length; t++)l = w[++r], d = u[t], typeof d === n && d.length > 0 ? 2 == d.length ? typeof d[1] == o ? i[d[0]] = d[1].call(this, l) : i[d[0]] = d[1] : 3 == d.length ? typeof d[1] !== o || d[1].exec && d[1].test ? i[d[0]] = l ? l.replace(d[1], d[2]) : e : i[d[0]] = l ? d[1].call(this, l, d[2]) : e : 4 == d.length && (i[d[0]] = l ? d[3].call(this, l.replace(d[1], d[2])) : e) : i[d] = l ? l : e;
                    break
                }
                if (w)break
            }
            return i
        }, str: function (i, s) {
            for (var o in s)if (typeof s[o] === n && s[o].length > 0) {
                for (var a = 0; a < s[o].length; a++)if (b.has(s[o][a], i))return o === r ? e : o
            } else if (b.has(s[o], i))return o === r ? e : o;
            return i
        }
    }, v = {
        browser: {
            oldsafari: {
                major: {1: ["/8", "/1", "/3"], 2: "/4", "?": "/"},
                version: {
                    "1.0": "/8",
                    1.2: "/1",
                    1.3: "/3",
                    "2.0": "/412",
                    "2.0.2": "/416",
                    "2.0.3": "/417",
                    "2.0.4": "/419",
                    "?": "/"
                }
            }
        },
        device: {sprint: {model: {"Evo Shift 4G": "7373KT"}, vendor: {HTC: "APA", Sprint: "Sprint"}}},
        os: {
            windows: {
                version: {
                    ME: "4.90",
                    "NT 3.11": "NT3.51",
                    "NT 4.0": "NT4.0",
                    2e3: "NT 5.0",
                    XP: ["NT 5.1", "NT 5.2"],
                    Vista: "NT 6.0",
                    7: "NT 6.1",
                    8: "NT 6.2",
                    8.1: "NT 6.3",
                    RT: "ARM"
                }
            }
        }
    }, k = {
        browser: [[/(opera\smini)\/((\d+)?[\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i, /(opera).+version\/((\d+)?[\w\.]+)/i, /(opera)[\/\s]+((\d+)?[\w\.]+)/i], [w, m, t], [/\s(opr)\/((\d+)?[\w\.]+)/i], [[w, "Opera"], m, t], [/(kindle)\/((\d+)?[\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i, /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i, /(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i, /(rekonq)((?:\/)[\w\.]+)*/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i], [w, m, t], [/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i], [[w, "IE"], m, t], [/(yabrowser)\/((\d+)?[\w\.]+)/i], [[w, "Yandex"], m, t], [/(comodo_dragon)\/((\d+)?[\w\.]+)/i], [[w, /_/g, " "], m, t], [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i], [w, m, t], [/(dolfin)\/((\d+)?[\w\.]+)/i], [[w, "Dolphin"], m, t], [/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i], [[w, "Chrome"], m, t], [/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i], [m, t, [w, "Mobile Safari"]], [/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i], [m, t, w], [/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i], [w, [t, y.str, v.browser.oldsafari.major], [m, y.str, v.browser.oldsafari.version]], [/(konqueror)\/((\d+)?[\w\.]+)/i, /(webkit|khtml)\/((\d+)?[\w\.]+)/i], [w, m, t], [/(navigator|netscape)\/((\d+)?[\w\.-]+)/i], [[w, "Netscape"], m, t], [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i, /(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i, /(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i, /(links)\s\(((\d+)?[\w\.]+)/i, /(gobrowser)\/?((\d+)?[\w\.]+)*/i, /(ice\s?browser)\/v?((\d+)?[\w\._]+)/i, /(mosaic)[\/\s]((\d+)?[\w\.]+)/i], [w, m, t], [/(apple(?:coremedia|))\/((\d+)[\w\._]+)/i, /(coremedia) v((\d+)[\w\._]+)/i], [w, m, t], [/(aqualung|lyssna|bsplayer)\/([\w\.-]+)/i], [w, m], [/(ares|ossproxy)\s((\d+)[\w\.-]+)/i], [w, m, t], [/(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\/((\d+)[\w\.-]+)/i, /(clementine|music player daemon)\s((\d+)[\w\.-]+)/i, /(lg player|nexplayer)\s((\d+)[\d\.]+)/i, /player\/(nexplayer|lg player)\s((\d+)[\w\.-]+)/i], [w, m, t], [/(nexplayer)\s((\d+)[\w\.-]+)/i], [w, m, t], [/(flrp)\/((\d+)[\w\.-]+)/i], [[w, "Flip Player"], m, t], [/(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i], [w], [/(gstreamer) souphttpsrc (?:\([^\)]+\)){0,1} libsoup\/((\d+)[\w\.-]+)/i], [w, m, t], [/(htc streaming player)\s[\w_]+\s\/\s((\d+)[\d\.]+)/i, /(java|python-urllib|python-requests|wget|libcurl)\/((\d+)[\w\.-_]+)/i, /(lavf)((\d+)[\d\.]+)/i], [w, m, t], [/(htc_one_s)\/((\d+)[\d\.]+)/i], [[w, /_/g, " "], m, t], [/(mplayer)(?:\s|\/)(?:(?:sherpya-){0,1}svn)(?:-|\s)(r\d+(?:-\d+[\w\.-]+){0,1})/i], [w, m], [/(mplayer)(?:\s|\/)((\d+)[\w\.-]+)/i, /(mplayer) unknown-((\d+)[\w\.\-]+)/i], [w, m, t], [/(mplayer)/i, /(yourmuze)/i, /(media player classic|nero showtime)/i], [w], [/(nero (?:home|scout))\/((\d+)[\w\.-]+)/i], [w, m, t], [/(nokia\d+)\/((\d+)[\w\.-]+)/i], [w, m, t], [/\s(songbird)\/((\d+)[\w\.-]+)/i], [w, m, t], [/(winamp)3 version ((\d+)[\w\.-]+)/i, /(winamp)\s((\d+)[\w\.-]+)/i, /(winamp)mpeg\/((\d+)[\w\.-]+)/i], [w, m, t], [/(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i], [w], [/(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\/((\d+)[\w\.-]+)/i], [w, m, t], [/(smp)((\d+)[\d\.]+)/i], [w, m, t], [/(vlc) media player - version ((\d+)[\w\.]+)/i, /(vlc)\/((\d+)[\w\.-]+)/i, /(xbmc|gvfs|xine|xmms|irapp)\/((\d+)[\w\.-]+)/i, /(foobar2000)\/((\d+)[\d\.]+)/i, /(itunes)\/((\d+)[\d\.]+)/i], [w, m, t], [/(wmplayer)\/((\d+)[\w\.-]+)/i, /(windows-media-player)\/((\d+)[\w\.-]+)/i], [[w, /-/g, " "], m, t], [/windows\/((\d+)[\w\.-]+) upnp\/[\d\.]+ dlnadoc\/[\d\.]+ (home media server)/i], [m, t, [w, "Windows"]], [/(com\.riseupradioalarm)\/((\d+)[\d\.]*)/i], [w, m, t], [/(rad.io)\s((\d+)[\d\.]+)/i, /(radio.(?:de|at|fr))\s((\d+)[\d\.]+)/i], [[w, "rad.io"], m, t]],
        cpu: [[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i], [[c, "amd64"]], [/(ia32(?=;))/i], [[c, b.lowerize]], [/((?:i[346]|x)86)[;\)]/i], [[c, "ia32"]], [/windows\s(ce|mobile);\sppc;/i], [[c, "arm"]], [/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i], [[c, /ower/, "", b.lowerize]], [/(sun4\w)[;\)]/i], [[c, "sparc"]], [/(ia64(?=;)|68k(?=\))|arm(?=v\d+;)|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i], [c, b.lowerize]],
        device: [[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i], [d, p, [l, f]], [/applecoremedia\/[\w\.]+ \((ipad)/], [d, [p, "Apple"], [l, f]], [/(apple\s{0,1}tv)/i], [[d, "Apple TV"], [p, "Apple"]], [/(hp).+(touchpad)/i, /(kindle)\/([\w\.]+)/i, /\s(nook)[\w\s]+build\/(\w+)/i, /(dell)\s(strea[kpr\s\d]*[\dko])/i], [p, d, [l, f]], [/\((ip[honed|\s\w*]+);.+(apple)/i], [d, p, [l, g]], [/\((ip[honed|\s\w*]+);/i], [d, [p, "Apple"], [l, g]], [/(blackberry)[\s-]?(\w+)/i, /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i, /(hp)\s([\w\s]+\w)/i, /(asus)-?(\w+)/i], [p, d, [l, g]], [/\((bb10);\s(\w+)/i], [[p, "BlackBerry"], d, [l, g]], [/android.+((transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+))/i], [[p, "Asus"], d, [l, f]], [/(sony)\s(tablet\s[ps])/i], [p, d, [l, f]], [/(nintendo)\s([wids3u]+)/i], [p, d, [l, u]], [/((playstation)\s[3portablevi]+)/i], [[p, "Sony"], d, [l, u]], [/(sprint\s(\w+))/i], [[p, y.str, v.device.sprint.vendor], [d, y.str, v.device.sprint.model], [l, g]], [/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i, /(zte)-(\w+)*/i, /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i], [p, [d, /_/g, " "], [l, g]], [/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i, /(mot)[\s-]?(\w+)*/i], [[p, "Motorola"], d, [l, g]], [/android.+\s((mz60\d|xoom[\s2]{0,2}))\sbuild\//i], [[p, "Motorola"], d, [l, f]], [/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9))/i], [[p, "Samsung"], d, [l, f]], [/((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i, /(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i, /sec-((sgh\w+))/i], [[p, "Samsung"], d, [l, g]], [/(sie)-(\w+)*/i], [[p, "Siemens"], d, [l, g]], [/(maemo|nokia).*(n900|lumia\s\d+)/i, /(nokia)[\s_-]?([\w-]+)*/i], [[p, "Nokia"], d, [l, g]], [/android\s3\.[\s\w-;]{10}((a\d{3}))/i], [[p, "Acer"], d, [l, f]], [/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i], [[p, "LG"], d, [l, f]], [/((nexus\s[45]))/i, /(lg)[e;\s-\/]+(\w+)*/i], [[p, "LG"], d, [l, g]], [/android.+((ideatab[a-z0-9\-\s]+))/i], [[p, "Lenovo"], d, [l, f]], [/(lg) netcast\.tv/i], [p, [l, h]], [/(mobile|tablet);.+rv\:.+gecko\//i], [l, p, d]],
        engine: [[/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i], [w, m], [/rv\:([\w\.]+).*(gecko)/i], [m, w]],
        os: [[/microsoft\s(windows)\s(vista|xp)/i], [w, m], [/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i], [w, [m, y.str, v.os.windows.version]], [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i], [[w, "Windows"], [m, y.str, v.os.windows.version]], [/\((bb)(10);/i], [[w, "BlackBerry"], m], [/(blackberry)\w*\/?([\w\.]+)*/i, /(tizen)\/([\w\.]+)/i, /(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i], [w, m], [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i], [[w, "Symbian"], m], [/mozilla.+\(mobile;.+gecko.+firefox/i], [[w, "Firefox OS"], m], [/(nintendo|playstation)\s([wids3portablevu]+)/i, /(mint)[\/\s\(]?(\w+)*/i, /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i, /(hurd|linux)\s?([\w\.]+)*/i, /(gnu)\s?([\w\.]+)*/i], [w, m], [/(cros)\s[\w]+\s([\w\.]+\w)/i], [[w, "Chromium OS"], m], [/(sunos)\s?([\w\.]+\d)*/i], [[w, "Solaris"], m], [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i], [w, m], [/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i], [[w, "iOS"], [m, /_/g, "."]], [/(mac\sos\sx)\s?([\w\s\.]+\w)*/i], [w, [m, /_/g, "."]], [/(haiku)\s(\w+)/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i, /(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i, /(unix)\s?([\w\.]+)*/i], [w, m]]
    }, x = function (e) {
        var r = e || (i && i.navigator && i.navigator.userAgent ? i.navigator.userAgent : s);
        return this instanceof x ? (this.getBrowser = function () {
            return y.rgx.apply(this, k.browser)
        }, this.getCPU = function () {
            return y.rgx.apply(this, k.cpu)
        }, this.getDevice = function () {
            return y.rgx.apply(this, k.device)
        }, this.getEngine = function () {
            return y.rgx.apply(this, k.engine)
        }, this.getOS = function () {
            return y.rgx.apply(this, k.os)
        }, this.getResult = function () {
            return {
                ua: this.getUA(),
                browser: this.getBrowser(),
                engine: this.getEngine(),
                os: this.getOS(),
                device: this.getDevice(),
                cpu: this.getCPU()
            }
        }, this.getUA = function () {
            return r
        }, this.setUA = function (i) {
            return r = i, this
        }, void this.setUA(r)) : new x(e).getResult()
    };
    if (typeof exports !== a)typeof module !== a && module.exports && (exports = module.exports = x), exports.UAParser = x; else if (i.UAParser = x, typeof define === o && define.amd && define(function () {
            return x
        }), typeof i.jQuery !== a) {
        var A = i.jQuery, _ = new x;
        A.ua = _.getResult(), A.ua.get = function () {
            return _.getUA()
        }, A.ua.set = function (i) {
            _.setUA(i);
            var e = _.getResult();
            for (var s in e)A.ua[s] = e[s]
        }
    }
}(this);
window.Modernizr = function (n, e, t) {
    function r(n) {
        d.cssText = n
    }

    function o(n, e) {
        return typeof n === e
    }

    var i, u, c, a = "2.8.2", s = {}, f = e.documentElement, l = "modernizr", p = e.createElement(l), d = p.style, y = ({}.toString, {}), m = [], w = m.slice, b = {}.hasOwnProperty;
    c = o(b, "undefined") || o(b.call, "undefined") ? function (n, e) {
        return e in n && o(n.constructor.prototype[e], "undefined")
    } : function (n, e) {
        return b.call(n, e)
    }, Function.prototype.bind || (Function.prototype.bind = function (n) {
        var e = this;
        if ("function" != typeof e)throw new TypeError;
        var t = w.call(arguments, 1), r = function () {
            if (this instanceof r) {
                var o = function () {
                };
                o.prototype = e.prototype;
                var i = new o, u = e.apply(i, t.concat(w.call(arguments)));
                return Object(u) === u ? u : i
            }
            return e.apply(n, t.concat(w.call(arguments)))
        };
        return r
    }), y.webgl = function () {
        return !!n.WebGLRenderingContext
    };
    for (var v in y)c(y, v) && (u = v.toLowerCase(), s[u] = y[v](), m.push((s[u] ? "" : "no-") + u));
    return s.addTest = function (n, e) {
        if ("object" == typeof n)for (var r in n)c(n, r) && s.addTest(r, n[r]); else {
            if (n = n.toLowerCase(), s[n] !== t)return s;
            e = "function" == typeof e ? e() : e, "undefined" != typeof enableClasses && enableClasses && (f.className += " " + (e ? "" : "no-") + n), s[n] = e
        }
        return s
    }, r(""), p = i = null, s._version = a, s
}(this, this.document);
!function (e, t, a) {
    "use strict";
    function n(t, h, m) {
        function H(a) {
            var n = 0, i = Ee.length;
            if (Ce.old = e.extend({}, Ce), Ie = we ? 0 : be[ge.horizontal ? "width" : "height"](), ke = Be[ge.horizontal ? "width" : "height"](), ze = we ? t : Pe[ge.horizontal ? "outerWidth" : "outerHeight"](), Ee.length = 0, Ce.start = 0, Ce.end = q(ze - Ie, 0), Re) {
                n = Ne.length, qe = Pe.children(ge.itemSelector), Ne.length = 0;
                var r, s = c(Pe, ge.horizontal ? "paddingLeft" : "paddingTop"), o = c(Pe, ge.horizontal ? "paddingRight" : "paddingBottom"), l = "border-box" === e(qe).css("boxSizing"), u = "none" !== qe.css("float"), f = 0, v = qe.length - 1;
                ze = 0, qe.each(function (t, a) {
                    var n = e(a), i = a.getBoundingClientRect(), l = E(ge.horizontal ? i.width || i.right - i.left : i.height || i.bottom - i.top), d = c(n, ge.horizontal ? "marginLeft" : "marginTop"), p = c(n, ge.horizontal ? "marginRight" : "marginBottom"), h = l + d + p, m = !d || !p, g = {};
                    g.el = a, g.size = m ? l : h, g.half = g.size / 2, g.start = ze + (m ? d : 0), g.center = g.start - E(Ie / 2 - g.size / 2), g.end = g.start - Ie + g.size, t || (ze += s), ze += h, ge.horizontal || u || p && d && t > 0 && (ze -= N(d, p)), t === v && (g.end += o, ze += o, f = m ? p : 0), Ne.push(g), r = g
                }), Pe[0].style[ge.horizontal ? "width" : "height"] = (l ? ze : ze - s - o) + "px", ze -= f, Ne.length ? (Ce.start = Ne[0][Me ? "center" : "start"], Ce.end = Me ? r.center : ze > Ie ? r.end : Ce.start) : Ce.start = Ce.end = 0
            }
            if (Ce.center = E(Ce.end / 2 + Ce.start / 2), Q(), Se.length && ke > 0 && (ge.dynamicHandle ? (Te = Ce.start === Ce.end ? ke : E(ke * Ie / ze), Te = d(Te, ge.minHandleSize, ke), Se[0].style[ge.horizontal ? "width" : "height"] = Te + "px") : Te = Se[ge.horizontal ? "outerWidth" : "outerHeight"](), xe.end = ke - Te, it || j()), !we && Ie > 0) {
                var p = Ce.start, h = "";
                if (Re)e.each(Ne, function (e, t) {
                    Me ? Ee.push(t.center) : t.start + t.size > p && p <= Ce.end && (p = t.start, Ee.push(p), p += Ie, p > Ce.end && p < Ce.end + Ie && Ee.push(Ce.end))
                }); else for (; p - Ie < Ce.end;)Ee.push(p), p += Ie;
                if (De[0] && i !== Ee.length) {
                    for (var m = 0; m < Ee.length; m++)h += ge.pageBuilder.call(ye, m);
                    Ae = De.html(h).children(), Ae.eq(Oe.activePage).addClass(ge.activeClass)
                }
            }
            if (Oe.slideeSize = ze, Oe.frameSize = Ie, Oe.sbSize = ke, Oe.handleSize = Te, Re) {
                a && null != ge.startAt && (W(ge.startAt), ye[Le ? "toCenter" : "toStart"](ge.startAt));
                var g = Ne[Oe.activeItem];
                X(Le && g ? g.center : d(Ce.dest, Ce.start, Ce.end))
            } else a ? null != ge.startAt && X(ge.startAt, 1) : X(d(Ce.dest, Ce.start, Ce.end));
            pe("load")
        }

        function X(e, t, a) {
            if (Re && at.released && !a) {
                var n = $(e), i = e > Ce.start && e < Ce.end;
                Le ? (i && (e = Ne[n.centerItem].center), Me && ge.activateMiddle && W(n.centerItem)) : i && (e = Ne[n.firstItem].start)
            }
            at.init && at.slidee && ge.elasticBounds ? e > Ce.end ? e = Ce.end + (e - Ce.end) / 6 : e < Ce.start && (e = Ce.start + (e - Ce.start) / 6) : e = d(e, Ce.start, Ce.end), et.start = +new Date, et.time = 0, et.from = Ce.cur, et.to = e, et.delta = e - Ce.cur, et.tweesing = at.tweese || at.init && !at.slidee, et.immediate = !et.tweesing && (t || at.init && at.slidee || !ge.speed), at.tweese = 0, e !== Ce.dest && (Ce.dest = e, pe("change"), it || Y()), K(), Q(), Z(), F()
        }

        function Y() {
            if (ye.initialized) {
                if (!it)return it = w(Y), void(at.released && pe("moveStart"));
                et.immediate ? Ce.cur = et.to : et.tweesing ? (et.tweeseDelta = et.to - Ce.cur, x(et.tweeseDelta) < .1 ? Ce.cur = et.to : Ce.cur += et.tweeseDelta * (at.released ? ge.swingSpeed : ge.syncSpeed)) : (et.time = N(+new Date - et.start, ge.speed), Ce.cur = et.from + et.delta * e.easing[ge.easing](et.time / ge.speed, et.time, 0, 1, ge.speed)), et.to === Ce.cur ? (Ce.cur = et.to, at.tweese = it = 0) : it = w(Y), pe("move"), we || (f ? Pe[0].style[f] = v + (ge.horizontal ? "translateX" : "translateY") + "(" + -Ce.cur + "px)" : Pe[0].style[ge.horizontal ? "left" : "top"] = -E(Ce.cur) + "px"), !it && at.released && pe("moveEnd"), j()
            }
        }

        function j() {
            Se.length && (xe.cur = Ce.start === Ce.end ? 0 : ((at.init && !at.slidee ? Ce.dest : Ce.cur) - Ce.start) / (Ce.end - Ce.start) * xe.end, xe.cur = d(E(xe.cur), xe.start, xe.end), _e.hPos !== xe.cur && (_e.hPos = xe.cur, f ? Se[0].style[f] = v + (ge.horizontal ? "translateX" : "translateY") + "(" + xe.cur + "px)" : Se[0].style[ge.horizontal ? "left" : "top"] = xe.cur + "px"))
        }

        function F() {
            Ae[0] && _e.page !== Oe.activePage && (_e.page = Oe.activePage, Ae.removeClass(ge.activeClass).eq(Oe.activePage).addClass(ge.activeClass), pe("activePage", _e.page))
        }

        function M() {
            tt.speed && Ce.cur !== (tt.speed > 0 ? Ce.end : Ce.start) || ye.stop(), ot = at.init ? w(M) : 0, tt.now = +new Date, tt.pos = Ce.cur + (tt.now - tt.lastTime) / 1e3 * tt.speed, X(at.init ? tt.pos : E(tt.pos)), at.init || Ce.cur !== Ce.dest || pe("moveEnd"), tt.lastTime = tt.now
        }

        function L(e, t, n) {
            if ("boolean" === i(t) && (n = t, t = a), t === a)X(Ce[e], n); else {
                if (Le && "center" !== e)return;
                var r = ye.getPos(t);
                r && X(r[e], n, !Le)
            }
        }

        function R(e) {
            return null != e ? l(e) ? e >= 0 && e < Ne.length ? e : -1 : qe.index(e) : -1
        }

        function U(e) {
            return R(l(e) && 0 > e ? e + Ne.length : e)
        }

        function W(e, t) {
            var a = R(e);
            return !Re || 0 > a ? !1 : ((_e.active !== a || t) && (qe.eq(Oe.activeItem).removeClass(ge.activeClass), qe.eq(a).addClass(ge.activeClass), _e.active = Oe.activeItem = a, Z(), pe("active", a)), a)
        }

        function $(e) {
            e = d(l(e) ? e : Ce.dest, Ce.start, Ce.end);
            var t = {}, a = Me ? 0 : Ie / 2;
            if (!we)for (var n = 0, i = Ee.length; i > n; n++) {
                if (e >= Ce.end || n === Ee.length - 1) {
                    t.activePage = Ee.length - 1;
                    break
                }
                if (e <= Ee[n] + a) {
                    t.activePage = n;
                    break
                }
            }
            if (Re) {
                for (var r = !1, s = !1, o = !1, c = 0, u = Ne.length; u > c; c++)if (r === !1 && e <= Ne[c].start + Ne[c].half && (r = c), o === !1 && e <= Ne[c].center + Ne[c].half && (o = c), c === u - 1 || e <= Ne[c].end + Ne[c].half) {
                    s = c;
                    break
                }
                t.firstItem = l(r) ? r : 0, t.centerItem = l(o) ? o : t.firstItem, t.lastItem = l(s) ? s : t.centerItem
            }
            return t
        }

        function Q(t) {
            e.extend(Oe, $(t))
        }

        function Z() {
            var e = Ce.dest <= Ce.start, t = Ce.dest >= Ce.end, a = (e ? 1 : 0) | (t ? 2 : 0);
            if (_e.slideePosState !== a && (_e.slideePosState = a, Je.is("button,input") && Je.prop("disabled", e), Ke.is("button,input") && Ke.prop("disabled", t), Je.add(Qe)[e ? "addClass" : "removeClass"](ge.disabledClass), Ke.add($e)[t ? "addClass" : "removeClass"](ge.disabledClass)), _e.fwdbwdState !== a && at.released && (_e.fwdbwdState = a, Qe.is("button,input") && Qe.prop("disabled", e), $e.is("button,input") && $e.prop("disabled", t)), Re && null != Oe.activeItem) {
                var n = 0 === Oe.activeItem, i = Oe.activeItem >= Ne.length - 1, r = (n ? 1 : 0) | (i ? 2 : 0);
                _e.itemsButtonState !== r && (_e.itemsButtonState = r, Ze.is("button,input") && Ze.prop("disabled", n), Ge.is("button,input") && Ge.prop("disabled", i), Ze[n ? "addClass" : "removeClass"](ge.disabledClass), Ge[i ? "addClass" : "removeClass"](ge.disabledClass))
            }
        }

        function G(e, t, a) {
            if (e = U(e), t = U(t), e > -1 && t > -1 && e !== t && (!a || t !== e - 1) && (a || t !== e + 1)) {
                qe.eq(e)[a ? "insertAfter" : "insertBefore"](Ne[t].el);
                var n = t > e ? e : a ? t : t - 1, i = e > t ? e : a ? t + 1 : t, r = e > t;
                null != Oe.activeItem && (e === Oe.activeItem ? _e.active = Oe.activeItem = a ? r ? t + 1 : t : r ? t : t - 1 : Oe.activeItem > n && Oe.activeItem < i && (_e.active = Oe.activeItem += r ? 1 : -1)), H()
            }
        }

        function J(e, t) {
            for (var a = 0, n = Ve[e].length; n > a; a++)if (Ve[e][a] === t)return a;
            return -1
        }

        function K() {
            at.released && !ye.isPaused && ye.resume()
        }

        function V(e) {
            return E(d(e, xe.start, xe.end) / xe.end * (Ce.end - Ce.start)) + Ce.start
        }

        function _() {
            at.history[0] = at.history[1], at.history[1] = at.history[2], at.history[2] = at.history[3], at.history[3] = at.delta
        }

        function ee(e) {
            at.released = 0, at.source = e, at.slidee = "slidee" === e
        }

        function te(t) {
            var a = "touchstart" === t.type, n = t.data.source, i = "slidee" === n;
            at.init || !a && ie(t.target) || ("handle" !== n || ge.dragHandle && xe.start !== xe.end) && (!i || (a ? ge.touchDragging : ge.mouseDragging && t.which < 2)) && (a || r(t), ee(n), at.init = 0, at.$source = e(t.target), at.touch = a, at.pointer = a ? t.originalEvent.touches[0] : t, at.initX = at.pointer.pageX, at.initY = at.pointer.pageY, at.initPos = i ? Ce.cur : xe.cur, at.start = +new Date, at.time = 0, at.path = 0, at.delta = 0, at.locked = 0, at.history = [0, 0, 0, 0], at.pathToLock = i ? a ? 30 : 10 : 0, b.on(a ? z : I, ae), ye.pause(1), (i ? Pe : Se).addClass(ge.draggedClass), pe("moveStart"), i && (rt = setInterval(_, 10)))
        }

        function ae(e) {
            if (at.released = "mouseup" === e.type || "touchend" === e.type, at.pointer = at.touch ? e.originalEvent[at.released ? "changedTouches" : "touches"][0] : e, at.pathX = at.pointer.pageX - at.initX, at.pathY = at.pointer.pageY - at.initY, at.path = D(A(at.pathX, 2) + A(at.pathY, 2)), at.delta = ge.horizontal ? at.pathX : at.pathY, at.released || !(at.path < 1)) {
                if (!at.init) {
                    if (!(ge.horizontal ? x(at.pathX) > x(at.pathY) : x(at.pathX) < x(at.pathY)))return ne();
                    at.init = 1
                }
                r(e), !at.locked && at.path > at.pathToLock && at.slidee && (at.locked = 1, at.$source.on(B, s)), at.released && (ne(), ge.releaseSwing && at.slidee && (at.swing = (at.delta - at.history[0]) / 40 * 300, at.delta += at.swing, at.tweese = x(at.swing) > 10)), X(at.slidee ? E(at.initPos - at.delta) : V(at.initPos + at.delta))
            }
        }

        function ne() {
            clearInterval(rt), at.released = !0, b.off(at.touch ? z : I, ae), (at.slidee ? Pe : Se).removeClass(ge.draggedClass), setTimeout(function () {
                at.$source.off(B, s)
            }), Ce.cur === Ce.dest && at.init && pe("moveEnd"), ye.resume(1), at.init = 0
        }

        function ie(t) {
            return ~e.inArray(t.nodeName, k) || e(t).is(ge.interactive)
        }

        function re() {
            ye.stop(), b.off("mouseup", re)
        }

        function se(e) {
            switch (r(e), this) {
                case $e[0]:
                case Qe[0]:
                    ye.moveBy($e.is(this) ? ge.moveBy : -ge.moveBy), b.on("mouseup", re);
                    break;
                case Ze[0]:
                    ye.prev();
                    break;
                case Ge[0]:
                    ye.next();
                    break;
                case Je[0]:
                    ye.prevPage();
                    break;
                case Ke[0]:
                    ye.nextPage()
            }
        }

        function oe(e) {
            return nt.curDelta = (ge.horizontal ? e.deltaY || e.deltaX : e.deltaY) || -e.wheelDelta, nt.curDelta /= 1 === e.deltaMode ? 3 : 100, Re ? (p = +new Date, nt.last < p - nt.resetTime && (nt.delta = 0), nt.last = p, nt.delta += nt.curDelta, x(nt.delta) < 1 ? nt.finalDelta = 0 : (nt.finalDelta = E(nt.delta / 1), nt.delta %= 1), nt.finalDelta) : nt.curDelta
        }

        function le(e) {
            e.originalEvent[g] = ye;
            var t = +new Date;
            if (O + ge.scrollHijack > t && Ue[0] !== document && Ue[0] !== window)return void(O = t);
            if (ge.scrollBy && Ce.start !== Ce.end) {
                var a = oe(e.originalEvent);
                (ge.scrollTrap || a > 0 && Ce.dest < Ce.end || 0 > a && Ce.dest > Ce.start) && r(e, 1), ye.slideBy(ge.scrollBy * a)
            }
        }

        function ce(e) {
            ge.clickBar && e.target === Be[0] && (r(e), X(V((ge.horizontal ? e.pageX - Be.offset().left : e.pageY - Be.offset().top) - Te / 2)))
        }

        function de(e) {
            if (ge.keyboardNavBy)switch (e.which) {
                case ge.horizontal ? 37 : 38:
                    r(e), ye["pages" === ge.keyboardNavBy ? "prevPage" : "prev"]();
                    break;
                case ge.horizontal ? 39 : 40:
                    r(e), ye["pages" === ge.keyboardNavBy ? "nextPage" : "next"]()
            }
        }

        function ue(e) {
            return ie(this) ? void(e.originalEvent[g + "ignore"] = !0) : void(this.parentNode !== Pe[0] || e.originalEvent[g + "ignore"] || ye.activate(this))
        }

        function fe() {
            this.parentNode === De[0] && ye.activatePage(Ae.index(this))
        }

        function ve(e) {
            ge.pauseOnHover && ye["mouseenter" === e.type ? "pause" : "resume"](2)
        }

        function pe(e, t) {
            if (Ve[e]) {
                for (me = Ve[e].length, T.length = 0, he = 0; me > he; he++)T.push(Ve[e][he]);
                for (he = 0; me > he; he++)T[he].call(ye, e, t)
            }
        }

        var he, me, ge = e.extend({}, n.defaults, h), ye = this, we = l(t), be = e(t), Pe = ge.slidee ? e(ge.slidee).eq(0) : be.children().eq(0), Ie = 0, ze = 0, Ce = {
            start: 0,
            center: 0,
            end: 0,
            cur: 0,
            dest: 0
        }, Be = e(ge.scrollBar).eq(0), Se = Be.children().eq(0), ke = 0, Te = 0, xe = {
            start: 0,
            end: 0,
            cur: 0
        }, De = e(ge.pagesBar), Ae = 0, Ee = [], qe = 0, Ne = [], Oe = {
            firstItem: 0,
            lastItem: 0,
            centerItem: 0,
            activeItem: null,
            activePage: 0
        }, He = new u(be[0]), Xe = new u(Pe[0]), Ye = new u(Be[0]), je = new u(Se[0]), Fe = "basic" === ge.itemNav, Me = "forceCentered" === ge.itemNav, Le = "centered" === ge.itemNav || Me, Re = !we && (Fe || Le || Me), Ue = ge.scrollSource ? e(ge.scrollSource) : be, We = ge.dragSource ? e(ge.dragSource) : be, $e = e(ge.forward), Qe = e(ge.backward), Ze = e(ge.prev), Ge = e(ge.next), Je = e(ge.prevPage), Ke = e(ge.nextPage), Ve = {}, _e = {}, et = {}, tt = {}, at = {released: 1}, nt = {
            last: 0,
            delta: 0,
            resetTime: 200
        }, it = 0, rt = 0, st = 0, ot = 0;
        we || (t = be[0]), ye.initialized = 0, ye.frame = t, ye.slidee = Pe[0], ye.pos = Ce, ye.rel = Oe, ye.items = Ne, ye.pages = Ee, ye.isPaused = 0, ye.options = ge, ye.dragging = at, ye.reload = function () {
            H()
        }, ye.getPos = function (e) {
            if (Re) {
                var t = R(e);
                return -1 !== t ? Ne[t] : !1
            }
            var a = Pe.find(e).eq(0);
            if (a[0]) {
                var n = ge.horizontal ? a.offset().left - Pe.offset().left : a.offset().top - Pe.offset().top, i = a[ge.horizontal ? "outerWidth" : "outerHeight"]();
                return {start: n, center: n - Ie / 2 + i / 2, end: n - Ie + i, size: i}
            }
            return !1
        }, ye.moveBy = function (e) {
            tt.speed = e, !at.init && tt.speed && Ce.cur !== (tt.speed > 0 ? Ce.end : Ce.start) && (tt.lastTime = +new Date, tt.startPos = Ce.cur, ee("button"), at.init = 1, pe("moveStart"), y(ot), M())
        }, ye.stop = function () {
            "button" === at.source && (at.init = 0, at.released = 1)
        }, ye.prev = function () {
            ye.activate(null == Oe.activeItem ? 0 : Oe.activeItem - 1)
        }, ye.next = function () {
            ye.activate(null == Oe.activeItem ? 0 : Oe.activeItem + 1)
        }, ye.prevPage = function () {
            ye.activatePage(Oe.activePage - 1)
        }, ye.nextPage = function () {
            ye.activatePage(Oe.activePage + 1)
        }, ye.slideBy = function (e, t) {
            e && (Re ? ye[Le ? "toCenter" : "toStart"](d((Le ? Oe.centerItem : Oe.firstItem) + ge.scrollBy * e, 0, Ne.length)) : X(Ce.dest + e, t))
        }, ye.slideTo = function (e, t) {
            X(e, t)
        }, ye.toStart = function (e, t) {
            L("start", e, t)
        }, ye.toEnd = function (e, t) {
            L("end", e, t)
        }, ye.toCenter = function (e, t) {
            L("center", e, t)
        }, ye.getIndex = R, ye.activate = function (e, t) {
            var a = W(e);
            ge.smart && a !== !1 && (Le ? ye.toCenter(a, t) : a >= Oe.lastItem ? ye.toStart(a, t) : a <= Oe.firstItem ? ye.toEnd(a, t) : K())
        }, ye.activatePage = function (e, t) {
            l(e) && X(Ee[d(e, 0, Ee.length - 1)], t)
        }, ye.resume = function (e) {
            ge.cycleBy && ge.cycleInterval && ("items" !== ge.cycleBy || Ne[0] && null != Oe.activeItem) && !(e < ye.isPaused) && (ye.isPaused = 0, st ? st = clearTimeout(st) : pe("resume"), st = setTimeout(function () {
                switch (pe("cycle"), ge.cycleBy) {
                    case"items":
                        ye.activate(Oe.activeItem >= Ne.length - 1 ? 0 : Oe.activeItem + 1);
                        break;
                    case"pages":
                        ye.activatePage(Oe.activePage >= Ee.length - 1 ? 0 : Oe.activePage + 1)
                }
            }, ge.cycleInterval))
        }, ye.pause = function (e) {
            e < ye.isPaused || (ye.isPaused = e || 100, st && (st = clearTimeout(st), pe("pause")))
        }, ye.toggle = function () {
            ye[st ? "pause" : "resume"]()
        }, ye.set = function (t, a) {
            e.isPlainObject(t) ? e.extend(ge, t) : ge.hasOwnProperty(t) && (ge[t] = a)
        }, ye.add = function (t, a) {
            var n = e(t);
            Re ? (null == a || !Ne[0] || a >= Ne.length ? n.appendTo(Pe) : Ne.length && n.insertBefore(Ne[a].el), null != Oe.activeItem && a <= Oe.activeItem && (_e.active = Oe.activeItem += n.length)) : Pe.append(n), H()
        }, ye.remove = function (t) {
            if (Re) {
                var a = U(t);
                if (a > -1) {
                    qe.eq(a).remove();
                    var n = a === Oe.activeItem;
                    null != Oe.activeItem && a < Oe.activeItem && (_e.active = --Oe.activeItem), H(), n && (_e.active = null, ye.activate(Oe.activeItem))
                }
            } else e(t).remove(), H()
        }, ye.moveAfter = function (e, t) {
            G(e, t, 1)
        }, ye.moveBefore = function (e, t) {
            G(e, t)
        }, ye.on = function (e, t) {
            if ("object" === i(e))for (var a in e)e.hasOwnProperty(a) && ye.on(a, e[a]); else if ("function" === i(t))for (var n = e.split(" "), r = 0, s = n.length; s > r; r++)Ve[n[r]] = Ve[n[r]] || [], -1 === J(n[r], t) && Ve[n[r]].push(t); else if ("array" === i(t))for (var o = 0, l = t.length; l > o; o++)ye.on(e, t[o])
        }, ye.one = function (e, t) {
            function a() {
                t.apply(ye, arguments), ye.off(e, a)
            }

            ye.on(e, a)
        }, ye.off = function (e, t) {
            if (t instanceof Array)for (var a = 0, n = t.length; n > a; a++)ye.off(e, t[a]); else for (var i = e.split(" "), r = 0, s = i.length; s > r; r++)if (Ve[i[r]] = Ve[i[r]] || [], null == t)Ve[i[r]].length = 0; else {
                var o = J(i[r], t);
                -1 !== o && Ve[i[r]].splice(o, 1)
            }
        }, ye.destroy = function () {
            return Ue.add(Se).add(Be).add(De).add($e).add(Qe).add(Ze).add(Ge).add(Je).add(Ke).off("." + g), b.off("keydown", de), Ze.add(Ge).add(Je).add(Ke).removeClass(ge.disabledClass), qe && null != Oe.activeItem && qe.eq(Oe.activeItem).removeClass(ge.activeClass), De.empty(), we || (be.off("." + g), He.restore(), Xe.restore(), Ye.restore(), je.restore(), e.removeData(t, g)), Ne.length = Ee.length = 0, _e = {}, ye.initialized = 0, ye
        }, ye.init = function () {
            if (!ye.initialized) {
                ye.on(m);
                var e = ["overflow", "position"], t = ["position", "webkitTransform", "msTransform", "transform", "left", "top", "width", "height"];
                He.save.apply(He, e), Ye.save.apply(Ye, e), Xe.save.apply(Xe, t), je.save.apply(je, t);
                var a = Se;
                return we || (a = a.add(Pe), be.css("overflow", "hidden"), f || "static" !== be.css("position") || be.css("position", "relative")), f ? v && a.css(f, v) : ("static" === Be.css("position") && Be.css("position", "relative"), a.css({position: "absolute"})), ge.forward && $e.on(S, se), ge.backward && Qe.on(S, se), ge.prev && Ze.on(B, se), ge.next && Ge.on(B, se), ge.prevPage && Je.on(B, se), ge.nextPage && Ke.on(B, se), Ue.on(C, le), Be[0] && Be.on(B, ce), Re && ge.activateOn && be.on(ge.activateOn + "." + g, "*", ue), De[0] && ge.activatePageOn && De.on(ge.activatePageOn + "." + g, "*", fe), We.on(P, {source: "slidee"}, te), Se && Se.on(P, {source: "handle"}, te), b.on("keydown", de), we || (be.on("mouseenter." + g + " mouseleave." + g, ve), be.on("scroll." + g, o)), ye.initialized = 1, H(!0), ge.cycleBy && !we && ye[ge.startPaused ? "pause" : "resume"](), ye
            }
        }
    }

    function i(e) {
        return null == e ? String(e) : "object" == typeof e || "function" == typeof e ? Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase() || "object" : typeof e
    }

    function r(e, t) {
        e.preventDefault(), t && e.stopPropagation()
    }

    function s(t) {
        r(t, 1), e(this).off(t.type, s)
    }

    function o() {
        this.scrollLeft = 0, this.scrollTop = 0
    }

    function l(e) {
        return !isNaN(parseFloat(e)) && isFinite(e)
    }

    function c(e, t) {
        return 0 | E(String(e.css(t)).replace(/[^\-0-9.]/g, ""))
    }

    function d(e, t, a) {
        return t > e ? t : e > a ? a : e
    }

    function u(e) {
        var t = {};
        return t.style = {}, t.save = function () {
            if (e && e.nodeType) {
                for (var a = 0; a < arguments.length; a++)t.style[arguments[a]] = e.style[arguments[a]];
                return t
            }
        }, t.restore = function () {
            if (e && e.nodeType) {
                for (var a in t.style)t.style.hasOwnProperty(a) && (e.style[a] = t.style[a]);
                return t
            }
        }, t
    }

    var f, v, p, h = "sly", m = "Sly", g = h, y = t.cancelAnimationFrame || t.cancelRequestAnimationFrame, w = t.requestAnimationFrame, b = e(document), P = "touchstart." + g + " mousedown." + g, I = "mousemove." + g + " mouseup." + g, z = "touchmove." + g + " touchend." + g, C = (document.implementation.hasFeature("Event.wheel", "3.0") ? "wheel." : "mousewheel.") + g, B = "click." + g, S = "mousedown." + g, k = ["INPUT", "SELECT", "BUTTON", "TEXTAREA"], T = [], x = Math.abs, D = Math.sqrt, A = Math.pow, E = Math.round, q = Math.max, N = Math.min, O = 0;
    b.on(C, function (e) {
        var t = e.originalEvent[g], a = +new Date;
        (!t || t.options.scrollHijack < a - O) && (O = a)
    }), function (e) {
        function t(e) {
            var t = (new Date).getTime(), n = Math.max(0, 16 - (t - a)), i = setTimeout(e, n);
            return a = t, i
        }

        w = e.requestAnimationFrame || e.webkitRequestAnimationFrame || t;
        var a = (new Date).getTime(), n = e.cancelAnimationFrame || e.webkitCancelAnimationFrame || e.clearTimeout;
        y = function (t) {
            n.call(e, t)
        }
    }(window), function () {
        function e(e) {
            for (var n = 0, i = t.length; i > n; n++) {
                var r = t[n] ? t[n] + e.charAt(0).toUpperCase() + e.slice(1) : e;
                if (null != a.style[r])return r
            }
        }

        var t = ["", "webkit", "moz", "ms", "o"], a = document.createElement("div");
        f = e("transform"), v = e("perspective") ? "translateZ(0) " : ""
    }(), t[m] = n, e.fn[h] = function (t, a) {
        var r, s;
        return e.isPlainObject(t) || (("string" === i(t) || t === !1) && (r = t === !1 ? "destroy" : t, s = Array.prototype.slice.call(arguments, 1)), t = {}), this.each(function (i, o) {
            var l = e.data(o, g);
            l || r ? l && r && l[r] && l[r].apply(l, s) : l = e.data(o, g, new n(o, t, a).init())
        })
    }, n.defaults = {
        slidee: null,
        horizontal: !1,
        itemNav: null,
        itemSelector: null,
        smart: !1,
        activateOn: null,
        activateMiddle: !1,
        scrollSource: null,
        scrollBy: 0,
        scrollHijack: 300,
        scrollTrap: !1,
        dragSource: null,
        mouseDragging: !1,
        touchDragging: !1,
        releaseSwing: !1,
        swingSpeed: .2,
        elasticBounds: !1,
        interactive: null,
        scrollBar: null,
        dragHandle: !1,
        dynamicHandle: !1,
        minHandleSize: 50,
        clickBar: !1,
        syncSpeed: .5,
        pagesBar: null,
        activatePageOn: null,
        pageBuilder: function (e) {
            return "<li>" + (e + 1) + "</li>"
        },
        forward: null,
        backward: null,
        prev: null,
        next: null,
        prevPage: null,
        nextPage: null,
        cycleBy: null,
        cycleInterval: 5e3,
        pauseOnHover: !1,
        startPaused: !1,
        moveBy: 300,
        speed: 0,
        easing: "swing",
        startAt: null,
        keyboardNavBy: null,
        draggedClass: "dragged",
        activeClass: "active",
        disabledClass: "disabled"
    }
}(jQuery, window);
!function e(t, i, n) {
    function r(a, s) {
        if (!i[a]) {
            if (!t[a]) {
                var l = "function" == typeof require && require;
                if (!s && l)return l(a, !0);
                if (o)return o(a, !0);
                var h = new Error("Cannot find module '" + a + "'");
                throw h.code = "MODULE_NOT_FOUND", h
            }
            var c = i[a] = {exports: {}};
            t[a][0].call(c.exports, function (e) {
                var i = t[a][1][e];
                return r(i ? i : e)
            }, c, c.exports, e, t, i, n)
        }
        return i[a].exports
    }

    for (var o = "function" == typeof require && require, a = 0; a < n.length; a++)r(n[a]);
    return r
}({
    1: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                this.player = null, this.director = null, this.modelManager = null, this.container = null, this.mattertagManager = null, this.fadeInSpeed = e, (null === this.fadeInSpeed || void 0 === this.fadeInSpeed) && (this.fadeInSpeed = 0)
            }

            var r = e("three"), o = e("./util/logger"), a = (e("./util/common"), e("./enum/PlayerEvents")), s = e("./enum/DirectorEvents"), l = e("./settings"), h = e("./enum/Viewmode"), c = (e("./enum/WarpStyle"), e("./enum/BlackoutStyle"), e("./enum/ModelManagerEvents")), u = e("./enum/MattertagEvents"), d = e("./util/transitions"), p = e("./util/lerp"), f = new o(i);
            n.prototype.init = function (e, t, i, n, r) {
                this.player = t, this.director = e, this.modelManager = i, this.mattertagManager = n, this.container = r, this.updateModel(), this.bindEvents()
            }, n.prototype.bindEvents = function () {
                this.modelManager.on(c.ActiveModelChanged, this.updateModel.bind(this)), this.player.on(a.ModeChanging, this.handlePlayerModeChanging.bind(this)), this.player.on(a.ModeChanged, this.handlePlayerModeChanged.bind(this)), this.player.on(a.ClosestPanoChanging, this.handleClosestPanoChanging.bind(this)), this.player.on(a.StartInside, this.handleStartInside.bind(this)), this.player.on(a.StartOutside, this.handleStartOutside.bind(this)), this.player.on(a.WarpStarted, this.handleWarpStarted.bind(this)), this.director.on(s.ActionInterrupted, this.handleActionInterruption.bind(this)), this.mattertagManager.on(u.TagActivated, this.onMattertagActivated.bind(this)), this.mattertagManager.on(u.TagNavigation, this.onNavigationToMattertag.bind(this))
            }, n.prototype.updateModel = function () {
                this.model = this.modelManager.getActiveModel()
            }, n.prototype.handleWarpStarted = function () {
                this.hidePlayerReticule()
            }, n.prototype.onMattertagActivated = function () {
                this.hidePlayerReticule()
            }, n.prototype.onNavigationToMattertag = function () {
                this.hidePlayerReticule()
            }, n.prototype.handlePlayerModeChanging = function (e, t) {
                var i = this.modelManager.getActiveModel(), n = this.director.tourIsPlaying ? 0 : l[t].markerOpacity;
                i.fadePanoMarkers(n), i.setMode(t)
            }, n.prototype.handlePlayerModeChanged = function (e, t) {
                var i = this.modelManager.getActiveModel(), n = t === h.PANORAMA ? r.DoubleSide : r.FrontSide;
                i.setSide(n), i.setMode(t)
            }, n.prototype.handleClosestPanoChanging = function (e, t, i) {
                i !== h.TRANSITIONING && (e && !this.director.tourIsPlaying && e.hoverOff(i), t && !this.director.tourIsPlaying && t.hoverOn(i))
            }, n.prototype.handleActionInterruption = function () {
            }, n.prototype.handleStartInside = function (e) {
                var t = l[this.player.mode];
                e *= t.skyboxOpacityLength, this.fadeIn(this.fadeInSpeed), this.model.alpha = 0, this.model.skybox.material.uniforms.opacity.value = 1, this.model.fadePanoMarkers(t.markerOpacity);
                var i = this.player.reticule;
                d.start(p.property(i.material, "opacity", 0), e, null, 0, null, "retReOpac")
            }, n.prototype.handleStartOutside = function (e) {
                this.fadeIn(e)
            }, n.prototype.fadeIn = function (e) {
                (null === e || void 0 === e) && (e = 2e3, f.warn("DisplayController.fadeIn -> no transition time specified, defaulting to 2000 ms.")), $(this.container).fadeIn(e)
            }, n.prototype.hidePlayerReticule = function () {
                this.player.reticule.hide()
            }, t.exports = n
        }).call(this, "/js/DisplayController.js")
    }, {
        "./enum/BlackoutStyle": 16,
        "./enum/DirectorEvents": 19,
        "./enum/MattertagEvents": 25,
        "./enum/ModelManagerEvents": 26,
        "./enum/PlayerEvents": 32,
        "./enum/Viewmode": 42,
        "./enum/WarpStyle": 43,
        "./settings": 123,
        "./util/common": 142,
        "./util/lerp": 145,
        "./util/logger": 146,
        "./util/transitions": 152,
        three: 175
    }],
    2: [function (e, t, i) {
        (function (i) {
            "use strict";
            var n = e("./util/logger"), r = e("./util/browser"), o = new n(i), a = {
                init: function (e, t) {
                    t = t || {};
                    var i = 100 * Math.random();
                    r.valueFromHash("gzip") && (t.gzip = 1 === r.valueFromHash("gzip", 0)), r.valueFromHash("preheat") && (t.preheat = 1 === r.valueFromHash("preheat", 0)), r.valueFromHash("preheatmesh") && (t.preheatMesh = 1 === r.valueFromHash("preheatmesh", 0));
                    for (var n in e) {
                        var s = n.match("^showcase_gzip_([0-9]+)$");
                        s && (a.gzip = i < parseInt(s[1]));
                        var l = n.match("^showcase_preheat_([0-9]+)$");
                        l && (a.preheat = i < parseInt(l[1]));
                        var h = n.match("^showcase_preheat_mesh_([0-9]+)$");
                        h && (a.preheatMesh = i < parseInt(h[1]))
                    }
                    for (var c in t)a[c] = t[c], o.debug("A/B override:", c, a[c])
                }, gzip: !1, preheat: !1, preheatMesh: !1
            };
            t.exports = a
        }).call(this, "/js/ab.js")
    }, {"./util/browser": 139, "./util/logger": 146}],
    3: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                return {
                    addons: [{
                        name: "keen:ua_parser",
                        input: {ua_string: "user_agent"},
                        output: "parsed_user_agent"
                    }]
                }
            }

            function r() {
                var e;
                try {
                    e = window.localStorage.getItem("distinctID"), null === e && (e = "anon_" + p.randomString(11), window.localStorage.setItem("distinctID", e))
                } catch (t) {
                    e = "anon_" + p.randomString(11)
                }
                return A.debug("analytics distinctID = " + e), e
            }

            function o() {
                var e = 0, t = window.onerror;
                window.onerror = function (i, n, r) {
                    return e++ <= f.analytics.maxTrackedErrors && mixpanel.track("USER", {
                        event_type: "error",
                        error_type: "window",
                        error_severity: "error"
                    }), t ? t(i, n, r) : !1
                };
                var i = console.warn;
                console.warn = function () {
                    var t = Array.prototype.slice.call(arguments);
                    e++ <= f.analytics.maxTrackedErrors && mixpanel.track("USER", {
                        event_type: "error",
                        error_type: "console",
                        error_severity: "warning"
                    }), i.apply(console, t)
                };
                var n = console.error;
                console.error = function () {
                    var t = Array.prototype.slice.call(arguments);
                    e++ <= f.analytics.maxTrackedErrors && mixpanel.track("USER", {
                        event_type: "error",
                        error_type: "console",
                        error_severity: "error"
                    }), n.apply(console, t)
                }
            }

            function a(e, t, i) {
                function n(t) {
                    r[t.sid] = !0, mixpanel.track("USER", {
                        event_type: "tag_opened",
                        tag_id: t.sid,
                        tags_visited: Object.keys(r).length,
                        tag_count: Object.keys(e.mattertags).length
                    })
                }

                var r = {}, o = Date.now() - x, a = null;
                i && (a = Date.now() - window.navigationStart), clearTimeout(E), mixpanel.register({has_360_views: e.has360Views}), mixpanel.track("USER", {
                    event_type: "model_loaded",
                    duration: o,
                    duration_from_navigation_start: a
                }), e.panos.forEach(function (e) {
                    e.on("enter", function () {
                        mixpanel.track("USER", {
                            event_type: "view_pano",
                            pano_id: e.id,
                            alignment_type: e.alignmentType,
                            interaction_source: I,
                            navigation_source: l
                        })
                    })
                });
                for (var s in e.mattertags)e.mattertags[s].on("tag.opened", n.bind(this, e.mattertags[s]));
                t.on("tour_auto", function (e) {
                    l = "tour_" + e
                }), t.on("tour_manual", function (e) {
                    I = "gui-" + e, l = "tour_manual"
                }), t.controls[g.PANORAMA].on(m.InteractionKey, function () {
                    t.mode === g.TRANSITIONING || t.flying || (I = "keyboard", l = "self_guided")
                }), t.controls[g.PANORAMA].on(m.InteractionDirect, function () {
                    t.mode === g.TRANSITIONING || t.flying || (I = "direct", l = "self_guided")
                }), t.controls[g.PANORAMA].on(m.InteractionGui, function (e) {
                    t.mode === g.TRANSITIONING || t.flying || (I = "gui-" + e, l = "self_guided")
                }), $(window).resize(function () {
                    mixpanel.register({aspect_ratio: d.aspectRatio()})
                })
            }

            function s(e, t, i) {
                if (w) {
                    var n = {}, r = {};
                    A.debug("Adding sampled events"), e.panos.forEach(function (e) {
                        e.on("loading", function (t) {
                            r[e.id] || (r[e.id] = M.getElapsedTime())
                        }), e.on("load", function (t) {
                            if ("high" === t) {
                                var i = M.getElapsedTime() - r[e.id];
                                if (mixpanel.track("USER", {
                                        event_type: "pano_loaded",
                                        pano_id: e.id,
                                        download_time: i.toFixed(1)
                                    }), n[e.id]) {
                                    var o = M.getElapsedTime() - n[e.id];
                                    mixpanel.track("USER", {
                                        event_type: "pano_wait",
                                        pano_id: e.id,
                                        wait_duration: o.toFixed(1),
                                        navigation_source: l
                                    })
                                }
                            }
                        }), e.on("enter", function () {
                            void 0 === n[e.id] && (n[e.id] = M.getElapsedTime(), e.tiled || e.isLoaded("high") && mixpanel.track("USER", {
                                event_type: "pano_wait",
                                pano_id: e.id,
                                wait_duration: 0,
                                navigation_source: l
                            }))
                        })
                    }), e.on("floor.changed", function (e, t) {
                        mixpanel.track("USER", {event_type: "floor_change", floor_id: e.name, interaction_source: I})
                    }), t.on(y.ModeChanged, function (e, t) {
                        t !== g.TRANSITIONING && mixpanel.track("USER", {
                            event_type: "mode_change",
                            view_mode: t,
                            interaction_source: I
                        })
                    }), mixpanel.track("USER", {event_type: "session_duration_start"}), setInterval(function () {
                        var e = (Date.now() - T) / 1e3, i = (Date.now() - t.lastChangeTime) / 1e3;
                        !document.hidden && i < f.analytics.sessionDurationTimeout && e >= f.analytics.sessionDurationPingFrequency && (T = Date.now(), A.debug("Sending session duration ping"), mixpanel.track("USER", {event_type: "session_duration_ping"}))
                    }, 1e3)
                }
            }

            var l, h = e("three"), c = e("./util/ajax"), u = e("./ab"), d = e("./util/browser"), p = e("./util/common"), f = e("./settings"), g = e("./enum/Viewmode"), m = e("./enum/ControlEvents"), v = e("./util/logger"), A = new v(i), y = e("./enum/PlayerEvents"), C = new Keen({
                projectId: "53a9baf536bca4213d000000",
                writeKey: "dcfae0ec6709a6d21f2f5e50a091a0cc6ab8abc88f1c66e961f9e33db58544ca90a37d6698df874334c6dddbde8eaaeb45d8e80d963978d87ada717c1b66e8e3a46d7686538c29db04227fd2ce04a0f7e35c3c5ef07b24b2c77400f29ed15258efbe9312722711abb9fbc2d7bf245803",
                readKey: "",
                requestType: "xhr"
            }), I = "direct", b = null, w = !1, x = null, E = null, M = new h.Clock(!0), T = 0;
            M.start(), t.exports = {
                report: function (e, t, i) {
                    try {
                        C.addEvent("Session starts", {
                            host: window.location.host,
                            model: e,
                            keen: n(),
                            user_agent: "${keen.user_agent}",
                            status: t,
                            referrer: {
                                url: p.normalizeUrl(document.referrer),
                                domain: p.domainFromUrl(document.referrer),
                                url_original: document.referrer
                            },
                            embedded: d.inIframe(),
                            loadtime: Date.now() - (x || Date.now()),
                            loadtime_from_navigation_start: i ? Date.now() - window.navigationStart : null,
                            autoplay: f.autoplay,
                            version: "2.8.7-0-gece9a22",
                            ab_gzip: u.gzip,
                            ab_preheat: u.preheat,
                            ab_preheat_mesh: u.preheatMesh
                        })
                    } catch (r) {
                        A.warn("analytics.report -> client.addEvent() error (is there blocking software installed?). Error message: " + r)
                    }
                }, getMixpanelToken: function (e) {
                    return f.debug ? $.when("") : c.get(e.urlBase + "/api/v1/metrics/keys/", {
                        responseType: "json",
                        prefetchFrom: "keys"
                    }).then(function (e) {
                        return "mixpanel" in e ? e.mixpanel : (A.error("No mixpanel token available"), $.Deferred().reject("loading-failed-mixpanel"))
                    }, function (e) {
                        return A.error("No mixpanel token available"), "loading-failed-mixpanel"
                    })
                }, impression: function (e) {
                    if (b) {
                        var t = window.location.search.substr(1).split("&");
                        mixpanel.track("USER", {event_type: "impression", visible: e, url_params: t}), w && o()
                    }
                }, initMixpanel: function (e) {

                }, initMixpanelModel: function (e) {

                }, sessionStart: function (e) {
                    if (b && (A.debug("analytics user_session_start"), mixpanel.track("USER", {event_type: "user_session_start"}), x = Date.now(), w)) {
                        var t = function () {
                            mixpanel.track("USER", {event_type: "long_load"})
                        };
                        E = setTimeout(t, 15e3)
                    }
                }, modelLoaded: function (e, t, i) {
                    b && (a(e, t, i), s(e, t, i))
                }, track: function (e, t) {
                    b && w && (A.debug('analytics.track("USER", ' + JSON.stringify(t) + " )"), mixpanel.track(e, t))
                }, trackAlways: function (e, t) {
                    b && (A.debug('analytics.trackAlways("USER", ' + JSON.stringify(t) + " )"), mixpanel.track(e, t))
                }
            }
        }).call(this, "/js/analytics.js")
    }, {
        "./ab": 2,
        "./enum/ControlEvents": 18,
        "./enum/PlayerEvents": 32,
        "./enum/Viewmode": 42,
        "./settings": 123,
        "./util/ajax": 138,
        "./util/browser": 139,
        "./util/common": 142,
        "./util/logger": 146,
        three: 175
    }],
    4: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t, i) {
                e && (e = e.toLowerCase().trim());
                var n = new c.Vector3(0, 1, 0), r = Math.PI / 3, o = Math.PI / 2;
                switch (e) {
                    case"left":
                        i.copy(t), i.applyAxisAngle(n, o);
                        break;
                    case"right":
                        i.copy(t), i.applyAxisAngle(n, -o);
                        break;
                    case"forwardleft":
                        i.copy(t), i.applyAxisAngle(n, r);
                        break;
                    case"forwardright":
                        i.copy(t), i.applyAxisAngle(n, -r);
                        break;
                    case"forward":
                    default:
                        i.copy(t)
                }
                return i
            }

            function r(e, t) {
                if (e) {
                    var i = {
                        pano: e,
                        lookAtPoint: null,
                        duration: null,
                        maxDistanceOverride: null,
                        skipWarpingCheck: !1
                    };
                    this.player.flyToPano(i, function () {
                        t && t({success: !0, message: "Transition complete."})
                    })
                } else A.warn("Automation -> clickPanoObject: Unable to find pano."), t && t({
                    success: !1,
                    error: "Unable to find pano."
                })
            }

            function o(e, t) {
                var i = this.findRankedPano(e, t);
                return i >= 0 ? this.handleToObject[i] : (A.warn("Automation -> findRankedPanoObject: Unable to find nearby pano."), null)
            }

            function a(e, t) {
                var i = this.findRankedMattertag(e, t);
                return i >= 0 ? this.handleToObject[i] : (A.warn("Automation -> findRankedMattertagObject: Unable to find nearby Mattertag."), null)
            }

            function s(e, t) {
                t.copy(g.FORWARD), e.getDirection(t)
            }

            function l(e, t, i) {
                if (t) {
                    var n = t.targetFunction, r = t.params;
                    if (n) {
                        var o = y[n];
                        if (o) {
                            r = r || {}, r.onDone = function (e) {
                                m.respondToMessage(i, e)
                            };
                            var a = [];
                            for (var s in r)r.hasOwnProperty(s) && a.push(r[s]);
                            o.apply(y, a)
                        }
                    }
                }
            }

            function h(e) {
                e({success: !0, message: "Init complete."})
            }

            var c = e("three"), u = e("./util/logger"), d = e("./enum/Viewmode"), p = e("./enum/Keys"), f = e("./settings"), g = e("./enum/Vectors"), m = e("./postmessage.js"), v = e("./util/math.js"), A = new u(i), y = null, C = function () {
                var e = new c.Vector3;
                return function (t) {
                    t ? (e.copy(t.position), e.add(t.discPosition), v.projectPositionToCanvas(e, this.player.camera, e), this.click(e.x, e.y)) : A.warn("Automation -> clickMattertagObject: Unable to find Mattertag.")
                }
            }(), I = function (e) {
                var t = new c.Vector3;
                return function (e) {
                    var i = this.player.getDirection(), n = 0, r = 0;
                    if (this.player.mode === d.PANORAMA)n = f.insideLookLimitUp, r = f.insideLookLimitDown; else {
                        if (this.player.mode !== d.DOLLHOUSE)return e;
                        n = f.dollhouseDefault.maxPolarAngle, r = f.dollhouseDefault.minPolarAngle
                    }
                    t.copy(i), t.y = 0, t.normalize();
                    var o = -c.Math.radToDeg(t.angleTo(i));
                    return r -= o, n -= o, e > n && (e = n), r > e && (e = r), e
                }
            }();
            m.setReceiver(l);
            var b = {};
            y = {
                handleToObject: {},
                objectToHandle: {},
                handleCount: 0,
                director: null,
                player: null,
                waitForInit: function (e) {
                    var t = b.onInitComplete;
                    t && t.completed ? h(e) : b.onInitComplete = e
                },
                init: function (e, t) {
                    this.director = e, this.player = t;
                    var i = b.onInitComplete;
                    i ? h(i) : b.onInitComplete = {completed: !0}
                },
                findRankedPano: function (e, t) {
                    var i = new c.Vector3, r = new c.Vector3;
                    return function (e, t) {
                        s(this.player, r), n(t, r, i);
                        var o = this.player.rankedPanoInDirection(e, i);
                        if (o) {
                            var a = this.objectToHandle[o.id];
                            return a || (this.objectToHandle[o.id] = a = this.handleCount++, this.handleToObject[a] = o), a
                        }
                        return A.warn("Automation -> findRankedPano: Unable to find nearby pano."), -1
                    }
                }(),
                findRankedMattertag: function (e, t) {
                    var i = new c.Vector3, r = new c.Vector3;
                    return function (e, t) {
                        s(this.player, r), n(t, r, i);
                        var o = this.player.rankedMattertagInDirection(e, i);
                        if (o) {
                            var a = this.objectToHandle[o.sid];
                            return a || (this.objectToHandle[o.sid] = a = this.handleCount++, this.handleToObject[a] = o), a
                        }
                        return A.warn("Automation -> findRankedMattertag: Unable to find nearby Mattertag."), -1
                    }
                }(),
                clickNearestMattertag: function (e) {
                    this.clickRankedMattertag(0, e)
                },
                clickRankedMattertag: function (e, t) {
                    var i = a.call(this, e, t);
                    i && C.call(this, i)
                },
                clickNearestPano: function (e, t) {
                    this.clickRankedPano(0, e, t)
                },
                clickRankedPano: function (e, t, i) {
                    var n = o.call(this, e, t);
                    n ? r.call(this, n, i) : i(null)
                },
                clickPano: function (e, t) {
                    var i = this.handleTable[e];
                    i ? r.call(this, i, t) : t(null)
                },
                rotate: function () {
                    function e(e) {
                        return "right" === e ? p.RIGHTARROW : "left" === e ? p.LEFTARROW : "up" === e ? p.I : "down" === e ? p.K : void 0
                    }

                    var t = (new c.Vector3, new c.Vector3), i = new c.Vector3(0, 0, 0), n = !1, r = new c.Vector3;
                    return function (o, a, s) {
                        if (!n) {
                            if (!a || isNaN(a))return A.warn("Automation -> rotate: Invalid rotation angle."), void(s && s({
                                success: !1,
                                error: "Invalid rotation angle."
                            }));
                            "right" === o || "left" === o ? (i.set(0, 1, 0), "right" === o && (a = -a)) : "up" === o || "down" === o ? (i.set(1, 0, 0), "down" === o && (a = -a), a = I.call(this, a)) : (A.warn("Automation -> rotate: Invalid direction for rotation: " + o), s && s({
                                success: !1,
                                error: "Invalid direction for rotation."
                            })), a = c.Math.degToRad(a), t = this.player.getDirection(), n = !0;
                            var l = this.player.controls[this.player.mode];
                            l.handleKeyDown(e(o));
                            var h = 0;
                            (function u() {
                                r.copy(g.FORWARD), this.player.getDirection(r);
                                var i = r.angleTo(t);
                                h += Math.abs(i), h >= Math.abs(a) ? (n = !1, l.handleKeyUp(e(o)), s && s({
                                    success: !0,
                                    message: "Rotation complete."
                                })) : (t.copy(r), window.setTimeout(u.bind(this), 4))
                            }).bind(this)()
                        }
                    }
                }(),
                click: function (e, t, i) {
                    i === !0 && (e = e / 100 * window.innerWidth, t = t / 100 * window.innerHeight), this.player.handleInputStart(e, t), this.player.updateIntersect(), this.player.handleInputEnd(e, t)
                },
                mouseOver: function (e, t, i) {
                    i === !0 && (e = e / 100 * window.innerWidth, t = t / 100 * window.innerHeight), this.player.handleInputMove(e, t), this.player.updateIntersect()
                }
            }, function () {
                t.exports = y, window.__showcaseAutomationApi = y
            }()
        }).call(this, "/js/automation.js")
    }, {
        "./enum/Keys": 23,
        "./enum/Vectors": 41,
        "./enum/Viewmode": 42,
        "./postmessage.js": 119,
        "./settings": 123,
        "./util/logger": 146,
        "./util/math.js": 147,
        three: 175
    }],
    5: [function (e, t, i) {
        "use strict";
        function n() {
            r.PerspectiveCamera.call(this, o.dollhouseFOV, window.innerWidth / window.innerHeight, o.dollhouseNear, o.dollhouseFar), this.controls = null
        }

        var r = e("three"), o = e("../settings");
        n.prototype = Object.create(r.PerspectiveCamera.prototype), n.prototype.updateAspect = function (e) {
            this.aspect = e, this.updateProjectionMatrix()
        }, t.exports = n
    }, {"../settings": 123, three: 175}],
    6: [function (e, t, i) {
        "use strict";
        function n() {
            var e = window.innerWidth / window.innerHeight;
            r.OrthographicCamera.call(this, -o.orthoBase, o.orthoBase, o.orthoBase / e, -o.orthoBase / e, o.orthoNear, o.orthoFar), this.controls = null, this.updateAspect(e)
        }

        var r = e("three"), o = e("../settings");
        n.prototype = Object.create(r.OrthographicCamera.prototype), n.prototype.updateAspect = function (e) {
            this.aspect = e, this.top = o.orthoBase / e, this.bottom = -o.orthoBase / e, this.updateProjectionMatrix()
        }, t.exports = n
    }, {"../settings": 123, three: 175}],
    7: [function (e, t, i) {
        "use strict";
        function n() {
            r.PerspectiveCamera.call(this, o.insideFOV, window.innerWidth / window.innerHeight, o.insideNear, o.insideFar), this.controls = null
        }

        var r = e("three"), o = e("../settings");
        n.prototype = Object.create(r.PerspectiveCamera.prototype), n.prototype.updateAspect = function (e) {
            this.aspect = e, this.updateProjectionMatrix()
        }, t.exports = n
    }, {"../settings": 123, three: 175}],
    8: [function (e, t, i) {
        "use strict";
        t.exports = {
            signedUrlRefreshRate: 240,
            dollhouseFOV: 60,
            dollhouseNear: 1,
            dollhouseFar: 500,
            insideFOV: 60,
            insideNear: .1,
            insideFar: 500,
            insideLookSpeed: .12,
            insideLookLimitUp: 40,
            insideLookLimitDown: -40,
            orthoNear: 1,
            orthoFar: 500,
            orthoBase: 10
        }
    }, {}],
    9: [function (e, t, i) {
        "use strict";
        function n(e) {
            a.call(this, e), this.minPolarAngle = o.dollhouseDefault.minPolarAngle, this.maxPolarAngle = o.dollhouseDefault.maxPolarAngle, this.minDistance = o.dollhouseDefault.minDistance, this.maxDistance = o.dollhouseDefault.maxDistance, this.adjustedMinDistance = this.minDistance, this.adjustedMaxDistance = this.maxDistance
        }

        var r = e("three"), o = e("../settings"), a = e("./OutsideControls");
        n.prototype = Object.create(a.prototype), n.prototype.pan = function (e, t) {
            this.camera.updateMatrix();
            var i = this.camera.position.clone().sub(this.target).length();
            i *= Math.tan(this.camera.fov / 2 * Math.PI / 180), this.panLeft(2 * e * i / window.innerHeight), this.panUp(-2 * t * i / window.innerHeight)
        }, n.prototype.updateZoom = function () {
            var e = this.offset.length();
            return e * this.scale
        }, n.prototype.setZoomBounds = function (e) {
            var t = e.min.distanceTo(e.max);
            this.adjustedMinDistance = Math.max(Math.min(t / 2, o.dollhouseDefault.minDistance), 0), this.adjustedMaxDistance = Math.min(Math.max(t, o.dollhouseDefault.maxDistance), o.skyboxRadius), this.minDistance = this.adjustedMinDistance, this.maxDistance = this.adjustedMaxDistance
        }, n.prototype.resetRanges = function (e, t) {
            e ? (this.minDistance = Math.min(e, this.minDistance), this.maxDistance = Math.max(e, this.maxDistance)) : (this.minDistance = this.adjustedMinDistance, this.maxDistance = this.adjustedMaxDistance), t ? (this.minPolarAngle = r.Math.degToRad(-15), this.maxPolarAngle = r.Math.degToRad(89.9)) : (this.minPolarAngle = o.dollhouseDefault.minPolarAngle, this.maxPolarAngle = o.dollhouseDefault.maxPolarAngle)
        }, t.exports = n
    }, {"../settings": 123, "./OutsideControls": 11, three: 175}],
    10: [function (e, t, i) {
        "use strict";
        function n(e) {
            o.call(this, e), this.minDistance = 15, this.maxDistance = 50, this.noRotateUpDown = !0, this.minPolarAngle = 0, this.maxPolarAngle = 0, this.absoluteScale = 1, this.currentScale = 1
        }

        var r = (e("three"), e("../settings")), o = e("./OutsideControls"), a = e("../util/browser");
        n.prototype = Object.create(o.prototype), n.prototype.zoomToContain = function (e) {
            var t = Math.max(e.x, e.z), i = Math.min(e.x, e.z), n = Math.max(t, i * this.camera.aspect), o = Math.max(i, t * this.camera.aspect);
            this.absoluteScale = (a.aspectRatio() < 1 ? o : n) / 2 / r.orthoBase * 1.2, this.currentScale = this.absoluteScale
        }, n.prototype.rotateToView = function (e, t) {
            var i = 0, n = a.aspectRatio() < 1, r = e.x < e.z;
            n === r ? t.z > 0 && (i = Math.PI) : i = t.x > 0 ? Math.PI / 2 : -Math.PI / 2, this.rotateLeft(i), this.update(0)
        }, n.prototype.pan = function (e, t) {
            this.camera.updateMatrix(), this.panLeft(e * (this.camera.right - this.camera.left) / window.innerWidth), this.panUp(-t * (this.camera.top - this.camera.bottom) / window.innerHeight)
        }, n.prototype.updateZoom = function () {
            return this.absoluteScale *= this.scale - .03 * this.keyboardZoomSpeed, this.absoluteScale = Math.max(r.zoomNearLimit, Math.min(this.absoluteScale, r.zoomFarLimit)), this.currentScale = .8 * this.currentScale + .2 * this.absoluteScale, this.camera.left = -r.orthoBase * this.currentScale, this.camera.right = r.orthoBase * this.currentScale, this.camera.top = r.orthoBase * this.currentScale / this.camera.aspect, this.camera.bottom = -r.orthoBase * this.currentScale / this.camera.aspect, this.camera.updateProjectionMatrix(), this.offset.length()
        }, t.exports = n
    }, {"../settings": 123, "../util/browser": 139, "./OutsideControls": 11, three: 175}],
    11: [function (e, t, i) {
        "use strict";
        function n(e) {
            this.camera = e, this.camera.controls = this, this.enabled = !1, this.target = new r.Vector3, this.targetBounds = new r.Box3, this.noZoom = !1, this.zoomSpeed = 1, this.minDistance = 0, this.maxDistance = 1 / 0, this.noRotate = !1, this.noRotateUpDown = !1, this.rotateSpeed = 1, this.keyboardZoomSpeed = 0, this.noPan = !1, this.keyPanSpeed = 7, this.autoRotate = !1, this.autoRotateSpeed = 2, this.minPolarAngle = r.Math.degToRad(25), this.maxPolarAngle = r.Math.degToRad(65), this.noKeys = !1, this.rotationAcceleration = new r.Vector2, this.rotationSpeed = new r.Vector2, this.panAcceleration = new r.Vector2, this.panSpeed = new r.Vector2, this.rotateStart = new r.Vector2, this.rotateEnd = new r.Vector2, this.rotateDelta = new r.Vector2, this.panStart = new r.Vector2, this.panEnd = new r.Vector2, this.panDelta = new r.Vector2, this.panOffset = new r.Vector3, this.offset = new r.Vector3, this.dollyStart = new r.Vector2, this.dollyEnd = new r.Vector2, this.dollyDelta = new r.Vector2, this.phiDelta = 0, this.thetaDelta = 0, this.scale = 1, this.panVector = new r.Vector3, this.lastPosition = new r.Vector3, this.state = u.NONE, this.lastMoveTime = 0, this.pointersLimit = 2, this.pointers = [], this.on("touch-one-finger-start", n.touch.rotate.start), this.on("touch-one-finger-move", n.touch.rotate.move), this.on("touch-two-finger-start", n.touch.pan.start), this.on("touch-two-finger-move", n.touch.pan.move), this.on("touch-two-finger-start", n.touch.zoom.start), this.on("touch-two-finger-move", n.touch.zoom.move)
        }

        var r = e("three"), o = e("../settings"), a = e("../util/common"), s = (e("../enum/Vectors"), e("../enum/Keys")), l = e("../enum/ControlEvents"), h = e("events").EventEmitter, c = 1e-6, u = {
            NONE: -1,
            ROTATE: 0,
            DOLLY: 1,
            PAN: 2,
            TOUCH_ROTATE: 3,
            TOUCH_DOLLY_PAN: 4
        };
        n.prototype = Object.create(h.prototype), n.prototype.setBounds = function (e) {
            this.targetBounds = e
        }, n.prototype.bindEvents = function (e) {
            e = e || document, e.addEventListener("contextmenu", function (e) {
                e.preventDefault()
            }), e.addEventListener("mousedown", this.onMouseDown.bind(this)), e.addEventListener("mousemove", this.onMouseMove.bind(this)), e.addEventListener("mouseup", this.onMouseUp.bind(this)), e.addEventListener("mouseover", function (e) {
                (0 === e.which || 0 === e.buttons) && this.onMouseUp(e)
            }.bind(this)), o.useWheel && (e.addEventListener("mousewheel", this.onMouseWheel.bind(this)), e.addEventListener("DOMMouseScroll", this.onMouseWheel.bind(this))), e.addEventListener("touchstart", this.onTouchStart.bind(this)), e.addEventListener("touchend", this.onTouchEnd.bind(this)), e.addEventListener("touchmove", this.onTouchMove.bind(this)), e.addEventListener("pointerdown", this.onPointerDown.bind(this)), e.addEventListener("pointerup", this.onPointerUp.bind(this)), e.addEventListener("pointerout", this.onPointerUp.bind(this)), e.addEventListener("pointercancel", this.onPointerUp.bind(this)), e.addEventListener("pointermove", this.onPointerMove.bind(this)), document.addEventListener("keydown", this.onKeyDown.bind(this)), document.addEventListener("keyup", this.onKeyUp.bind(this))
        }, n.prototype.isEngaged = function () {
            return this.state !== u.NONE
        }, n.prototype.rotateLeft = function (e) {
            void 0 === e && (e = this.getAutoRotationAngle()), this.thetaDelta -= e
        }, n.prototype.rotateUp = function (e) {
            this.noRotateUpDown || (void 0 === e && (e = this.getAutoRotationAngle()), this.phiDelta -= e)
        }, n.prototype.panLeft = function (e) {
            var t = this.camera.matrix.elements;
            this.panOffset.set(t[0], 0, t[2]).normalize(), this.panOffset.multiplyScalar(-e), this.panVector.add(this.panOffset)
        }, n.prototype.panUp = function (e) {
            var t = this.camera.matrix.elements;
            this.panOffset.set(t[4], 0, t[6]).normalize(), this.panOffset.multiplyScalar(-e), this.panVector.add(this.panOffset)
        }, n.prototype.dollyIn = function (e) {
            void 0 === e && (e = this.getZoomScale()), this.scale /= e
        }, n.prototype.dollyOut = function (e) {
            void 0 === e && (e = this.getZoomScale()), this.scale *= e
        }, n.prototype.update = function (e) {
            e || (e = 1 / 60), this.rotationSpeed.multiplyScalar(1 - o.rotationFriction).addScaledVector(this.rotationAcceleration, o.rotationAccelerationOutside * e), this.rotateLeft(-this.rotationSpeed.x), this.noRotateUpDown || this.rotateUp(this.rotationSpeed.y), this.panSpeed.multiplyScalar(1 - o.panFriction).addScaledVector(this.panAcceleration, o.panAccelerationOutside * e), this.pan(-this.panSpeed.x, this.panSpeed.y);
            var t = this.camera.position;
            this.offset.copy(t).sub(this.target);
            var i = Math.atan2(this.offset.x, this.offset.z), n = Math.atan2(Math.sqrt(this.offset.x * this.offset.x + this.offset.z * this.offset.z), this.offset.y);
            this.autoRotate && this.rotateLeft(this.getAutoRotationAngle()), i += this.thetaDelta, n += this.phiDelta, n = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, n)), n = Math.max(c, Math.min(Math.PI - c, n));
            var r = this.updateZoom();
            r = Math.max(this.minDistance, Math.min(this.maxDistance, r)), this.target.add(this.panVector), this.targetBounds.clampPoint(this.target, this.target), this.offset.x = r * Math.sin(n) * Math.sin(i), this.offset.y = r * Math.cos(n), this.offset.z = r * Math.sin(n) * Math.cos(i), t.copy(this.target).add(this.offset), this.camera.lookAt(this.target), this.thetaDelta = 0, this.phiDelta = 0, this.scale = 1, this.panVector.set(0, 0, 0), this.lastPosition.distanceTo(this.camera.position) > 0 && this.lastPosition.copy(this.camera.position)
        }, n.prototype.getAutoRotationAngle = function () {
            return 2 * Math.PI / 60 / 60 * this.autoRotateSpeed
        }, n.prototype.getZoomScale = function () {
            return Math.pow(.95, this.zoomSpeed)
        }, n.prototype.onMouseDown = function (e) {
            if (this.enabled) {
                switch (e.preventDefault(), this.mouseDown = !0, e.button) {
                    case 2:
                        if (this.noRotate)return;
                        this.state = u.ROTATE, this.rotateStart.set(e.clientX, this.noRotateUpDown ? 0 : e.clientY), this.rotationSpeed.set(0, 0);
                        break;
                    case 1:
                        if (this.noZoom)return;
                        this.state = u.DOLLY, this.dollyStart.set(e.clientX, e.clientY);
                        break;
                    case 0:
                        if (this.noPan)return;
                        this.state = u.PAN, this.panStart.set(e.clientX, e.clientY)
                }
                this.emit(l.InputStart, "mouse")
            }
        }, n.prototype.onMouseMove = function (e) {
            if (this.enabled && this.mouseDown && 0 !== e.buttons) {
                e.preventDefault();
                var t = e.currentTarget;
                switch (this.state) {
                    case u.ROTATE:
                        if (this.noRotate)return;
                        this.rotateEnd.set(e.clientX, this.noRotateUpDown ? 0 : e.clientY), this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart), this.rotateLeft(2 * Math.PI * this.rotateDelta.x / t.clientWidth * this.rotateSpeed), this.rotateUp(2 * Math.PI * this.rotateDelta.y / t.clientHeight * this.rotateSpeed), this.rotateStart.copy(this.rotateEnd);
                        break;
                    case u.DOLLY:
                        if (this.noZoom)return;
                        this.dollyEnd.set(e.clientX, e.clientY), this.dollyDelta.subVectors(this.dollyEnd, this.dollyStart);
                        var i = this.dollyDelta.y > 0 ? this.dollyIn : this.dollyOut;
                        i.call(this), this.dollyStart.copy(this.dollyEnd);
                        break;
                    case u.PAN:
                        if (this.noPan)return;
                        this.panEnd.set(e.clientX, e.clientY), this.panDelta.subVectors(this.panEnd, this.panStart), this.pan(this.panDelta.x, this.panDelta.y), this.panStart.copy(this.panEnd)
                }
                this.emit(l.Move, "mouse"), this.lastMoveTime = e.timeStamp, this.update()
            }
        }, n.prototype.onMouseUp = function (e) {
            this.enabled && (this.mouseDown = !1, this.state = u.NONE, "mouseover" !== e.type && (e.timeStamp > this.lastMoveTime + 100 ? (this.rotationSpeed.set(0, 0), this.rotationAcceleration.set(0, 0)) : this.rotationAcceleration.set(-this.rotateDelta.x, this.rotateDelta.y), this.update(), this.rotationAcceleration.set(0, 0), this.rotateDelta.set(0, 0)))
        }, n.prototype.onMouseWheel = function (e) {
            if (this.enabled && !this.noZoom && o.useWheel) {
                this.emit(l.Move, "wheel");
                var t = e.wheelDelta || -e.detail, i = t > 0 ? this.dollyOut : this.dollyIn;
                i.call(this), this.update()
            }
        }, n.prototype.onKeyDown = function (e) {
            !this.enabled || this.noKeys || this.noPan || e.metaKey || e.ctrlKey || (e.preventDefault(), this.handleKeyDown(e.which))
        }, n.prototype.handleKeyDown = function (e) {
            var t = function (e, t) {
                "y" === e ? this.noRotateUpDown ? this.keyboardZoomSpeed = t : this.rotationAcceleration.y = t : this.rotationAcceleration.x = t
            }.bind(this), i = function (e, t) {
                this.panAcceleration[e] = t
            }.bind(this), n = !0;
            switch (e) {
                case s.UPARROW:
                case s.I:
                    t("y", 1);
                    break;
                case s.DOWNARROW:
                case s.K:
                    t("y", -1);
                    break;
                case s.LEFTARROW:
                case s.J:
                    t("x", -1);
                    break;
                case s.RIGHTARROW:
                case s.L:
                    t("x", 1);
                    break;
                case s.W:
                    i("y", 1);
                    break;
                case s.S:
                    i("y", -1);
                    break;
                case s.A:
                    i("x", -1);
                    break;
                case s.D:
                    i("x", 1);
                    break;
                default:
                    n = !1
            }
            n && this.emit(l.Move, "key")
        }, n.prototype.onKeyUp = function (e) {
            !this.enabled || this.noKeys || this.noPan || (e.preventDefault(), e.stopPropagation(), this.handleKeyUp(e.which))
        }, n.prototype.handleKeyUp = function (e) {
            switch (e) {
                case s.I:
                case s.K:
                case s.UPARROW:
                case s.DOWNARROW:
                    this.keyboardZoomSpeed = 0, this.rotationAcceleration.y = 0;
                    break;
                case s.J:
                case s.L:
                case s.LEFTARROW:
                case s.RIGHTARROW:
                    this.rotationAcceleration.x = 0;
                    break;
                case s.S:
                case s.W:
                    this.panAcceleration.y = 0;
                    break;
                case s.A:
                case s.D:
                    this.panAcceleration.x = 0
            }
        }, n.prototype.onTouchStart = function (e) {
            if (this.enabled) {
                switch (e.preventDefault(), e.stopPropagation(), e.touches.length) {
                    case 1:
                        this.emit("touch-one-finger-start", e);
                        break;
                    case 2:
                        this.emit("touch-two-finger-start", e);
                        break;
                    default:
                        this.state = u.NONE
                }
                this.rotationSpeed.set(0, 0), this.emit(l.InputStart, "touch")
            }
        }, n.prototype.onTouchMove = function (e) {
            if (this.enabled) {
                switch (e.preventDefault(), e.stopPropagation(), e.touches.length) {
                    case 1:
                        this.emit("touch-one-finger-move", e), this.update();
                        break;
                    case 2:
                        this.emit("touch-two-finger-move", e), this.update();
                        break;
                    default:
                        this.state = u.NONE
                }
                this.lastMoveTime = e.timeStamp
            }
        }, n.prototype.onTouchEnd = function (e) {
            this.enabled && (this.emit("touch-one-finger-end", e), this.emit("touch-two-finger-end", e), this.state = u.NONE, e.timeStamp > this.lastMoveTime + 100 ? (this.rotationSpeed.set(0, 0), this.rotationAcceleration.set(0, 0)) : this.rotationAcceleration.set(-this.rotateDelta.x, this.rotateDelta.y), this.update(), this.rotationAcceleration.set(0, 0), this.rotateDelta.set(0, 0))
        }, n.prototype.onPointerDown = function (e) {
            this.enabled && ("touch" === e.pointerType && (this.pointers.length < this.pointersLimit && this.pointers.push({
                id: e.pointerId,
                pageX: e.pageX,
                pageY: e.pageY
            }), e.touches = this.pointers, this.onTouchStart(e)), this.emit(l.InputStart, "pointer"))
        }, n.prototype.onPointerMove = function (e) {
            this.enabled && "touch" === e.pointerType && (this.pointers.forEach(function (t) {
                e.pointerId === t.id && (t.pageX = e.pageX, t.pageY = e.pageY)
            }), e.touches = this.pointers, this.onTouchMove(e))
        }, n.prototype.onPointerUp = function (e) {
            this.enabled && "touch" === e.pointerType && (this.pointers.forEach(function (t, i) {
                e.pointerId === t.id && this.pointers.splice(i, 1)
            }.bind(this)), e.touches = this.pointers, this.onTouchEnd(e))
        }, n.prototype.reset = function () {
            this.state = u.NONE, this.rotationSpeed.set(0, 0), this.rotationAcceleration.set(0, 0), this.panSpeed.set(0, 0), this.panAcceleration.set(0, 0)
        }, n.touch = {
            rotate: {
                start: function (e) {
                    this.state = u.TOUCH_ROTATE, this.rotateStart.set(e.touches[0].pageX, e.touches[0].pageY)
                }, move: function (e) {
                    if (this.state === u.TOUCH_ROTATE) {
                        this.emit(l.Move, "touch");
                        var t = e.currentTarget;
                        this.rotateEnd.set(e.touches[0].pageX, e.touches[0].pageY), this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart), this.rotateLeft(2 * Math.PI * this.rotateDelta.x / t.clientWidth * this.rotateSpeed), this.rotateUp(2 * Math.PI * this.rotateDelta.y / t.clientHeight * this.rotateSpeed), this.rotateStart.copy(this.rotateEnd)
                    }
                }
            }, zoom: {
                start: function (e) {
                    this.state = u.TOUCH_DOLLY_PAN;
                    var t = e.touches[0].pageX - e.touches[1].pageX, i = e.touches[0].pageY - e.touches[1].pageY, n = Math.sqrt(t * t + i * i);
                    this.dollyStart.set(0, n)
                }, move: function (e) {
                    if (this.state === u.TOUCH_DOLLY_PAN) {
                        this.emit(l.Move, "touch");
                        var t = e.touches[0].pageX - e.touches[1].pageX, i = e.touches[0].pageY - e.touches[1].pageY, n = Math.sqrt(t * t + i * i);
                        this.dollyEnd.set(0, n), this.dollyDelta.subVectors(this.dollyEnd, this.dollyStart), this.dollyDelta.y > 0 ? this.dollyOut(1 - this.dollyDelta.y / 500) : this.dollyIn(1 + this.dollyDelta.y / 500), this.dollyStart.copy(this.dollyEnd)
                    }
                }
            }, pan: {
                start: function (e) {
                    this.state = u.TOUCH_DOLLY_PAN, this.panStart.set(a.average(e.touches, "pageX"), a.average(e.touches, "pageY"))
                }, move: function (e) {
                    this.state === u.TOUCH_DOLLY_PAN && (this.emit(l.Move, "touch"), this.panEnd.set(a.average(e.touches, "pageX"), a.average(e.touches, "pageY")), this.panDelta.subVectors(this.panEnd, this.panStart), this.pan(this.panDelta.x, this.panDelta.y), this.panStart.copy(this.panEnd), this.rotateDelta.set(0, 0))
                }
            }
        }, t.exports = n
    }, {
        "../enum/ControlEvents": 18,
        "../enum/Keys": 23,
        "../enum/Vectors": 41,
        "../settings": 123,
        "../util/common": 142,
        events: 160,
        three: 175
    }],
    12: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                this.camera = e, this.camera.controls = this, this.target = new r.Vector3(0, 0, 0), this.lookVector = new r.Vector3, this.lookSpeed = .05, this.rotationAcc = new r.Vector2, this.rotationSpeed = new r.Vector2, this.lat = 0, this.lon = 0, this.phi = 0, this.theta = 0, this.enabled = !1, this.locked = !1, this.pointer = new r.Vector2(0, 0), this.rotationHistory = [], this.rotationDifference = new r.Vector2, this.pointerDragOn = !1, this.pointerDragStart = new r.Vector2(0, 0), this.pinchDistance = 0, this.moveStart = new r.Vector2, this.moveTolerance = .01, this.pointersLimit = 2, this.pointers = []
            }

            var r = e("three"), o = e("../util/logger"), a = e("../settings"), s = e("../util/common"), l = e("../util/math"), h = e("../enum/Vectors"), c = e("../enum/Keys"), u = e("../enum/ControlEvents"), d = e("events").EventEmitter;
            new o(i);
            n.prototype = Object.create(d.prototype), n.prototype.bindEvents = function (e) {
                e.addEventListener("mousemove", this.onMouseMove.bind(this)), e.addEventListener("mousedown", this.onMouseDown.bind(this)), e.addEventListener("mouseup", this.onMouseUp.bind(this)), e.addEventListener("mouseover", function (e) {
                    !this.pointerDragOn || 0 !== e.which && 0 !== e.buttons || this.onMouseUp(e)
                }.bind(this)), e.addEventListener("touchstart", this.onTouchStart.bind(this)), e.addEventListener("touchmove", this.onTouchMove.bind(this)), e.addEventListener("touchend", this.onTouchEnd.bind(this)), a.useWheel && (e.addEventListener("mousewheel", this.onMouseWheel.bind(this)), e.addEventListener("DOMMouseScroll", this.onMouseWheel.bind(this))), e.addEventListener("contextmenu", function (e) {
                    e.preventDefault()
                }), e.addEventListener("pointerdown", this.onPointerDown.bind(this)), e.addEventListener("pointerup", this.onPointerUp.bind(this)), e.addEventListener("pointerout", this.onPointerUp.bind(this)), e.addEventListener("pointercancel", this.onPointerUp.bind(this)), e.addEventListener("pointermove", this.onPointerMove.bind(this)), document.addEventListener("keydown", this.onKeyDown.bind(this)), document.addEventListener("keyup", this.onKeyUp.bind(this))
            }, n.prototype.usable = function () {
                return this.enabled && !this.locked
            }, n.prototype.lookAt = function (e) {
                var t = this.camera.position.clone().sub(e), i = Math.atan(t.z / t.x);
                i += t.x < 0 ? Math.PI : 0, i += t.x > 0 && t.z < 0 ? 2 * Math.PI : 0, this.lon = r.Math.radToDeg(i) + 180;
                var n = Math.sqrt(t.x * t.x + t.z * t.z), o = Math.atan(t.y / n);
                this.lat = -r.Math.radToDeg(o)
            }, n.prototype.startRotationFrom = function (e, t) {
                l.convertScreenPositionToNDC(e, t, this.pointer), this.pointerDragOn = !0, this.pointerDragStart.copy(this.pointer), this.moveStart.copy(this.pointer), this.rotationHistory = [], this.rotationSpeed.set(0, 0)
            }, n.prototype.onTouchStart = function (e) {
                if (this.usable()) {
                    switch (e.preventDefault(), e.stopPropagation(), e.touches.length) {
                        case 1:
                            this.startRotationFrom(e.touches[0].clientX, e.touches[0].clientY);
                            break;
                        case 2:
                            var t = (e.touches[0].clientX - e.touches[1].clientX) / window.innerWidth, i = (e.touches[0].clientY - e.touches[1].clientY) / window.innerHeight;
                            this.pinchDistance = Math.sqrt(t * t + i * i)
                    }
                    this.emit(u.InputStart, "touch")
                }
            }, n.prototype.onPointerDown = function (e) {
                this.usable() && "touch" === e.pointerType && (this.pointers.length < this.pointersLimit && this.pointers.push({
                    id: e.pointerId,
                    clientX: e.clientX,
                    clientY: e.clientY
                }), e.touches = this.pointers, this.onTouchStart(e), this.emit(u.InputStart, "pointer"))
            }, n.prototype.onMouseDown = function (e) {
                if (this.usable()) {
                    switch (e.preventDefault(), e.stopPropagation(), e.button) {
                        case 0:
                            this.startRotationFrom(e.clientX, e.clientY);
                            break;
                        case 2:
                    }
                    this.emit(u.InputStart, "mouse")
                }
            }, n.prototype.updateRotation = function () {
                if (this.usable() && this.pointerDragOn) {
                    var e = new r.Vector3(this.pointerDragStart.x, this.pointerDragStart.y, -1).unproject(this.camera), t = new r.Vector3(this.pointer.x, this.pointer.y, -1).unproject(this.camera), i = Math.sqrt(e.x * e.x + e.z * e.z), n = Math.sqrt(t.x * t.x + t.z * t.z), o = Math.atan2(e.y, i), a = Math.atan2(t.y, n);
                    this.rotationDifference.y = r.Math.radToDeg(o - a), e.y = 0, t.y = 0;
                    var s = Math.acos(e.dot(t) / e.length() / t.length());
                    isNaN(s) || (this.rotationDifference.x = r.Math.radToDeg(s), this.pointerDragStart.x < this.pointer.x && (this.rotationDifference.x *= -1)), this.pointerDragStart.copy(this.pointer)
                }
            }, n.prototype.onMouseMove = function (e) {
                this.usable() && (l.convertScreenPositionToNDC(e.clientX, e.clientY, this.pointer), this.pointerDragOn && (Math.abs(this.pointer.x - this.moveStart.x) > this.moveTolerance || Math.abs(this.pointer.y - this.moveStart.y) > this.moveTolerance) && this.emit(u.Move, "mouse"))
            }, n.prototype.onTouchMove = function (e) {
                if (this.usable())switch (this.emit(u.Move, "touch"), e.touches.length) {
                    case 1:
                        l.convertScreenPositionToNDC(e.touches[0].clientX, e.touches[0].clientY, this.pointer);
                        break;
                    case 2:
                        var t = (e.touches[0].clientX - e.touches[1].clientX) / window.innerWidth, i = (e.touches[0].clientY - e.touches[1].clientY) / window.innerHeight, n = this.pinchDistance - Math.sqrt(t * t + i * i);
                        Math.abs(n) > .1 && (this.emit(u.InteractionDirect), this.flyDirection(new r.Vector3(0, 0, n).normalize()), this.pinchDistance -= n)
                }
            }, n.prototype.onPointerMove = function (e) {
                this.usable() && "touch" === e.pointerType && (this.pointers.forEach(function (t) {
                    e.pointerId === t.id && (t.clientX = e.clientX, t.clientY = e.clientY)
                }), e.touches = this.pointers, this.onTouchMove(e))
            }, n.prototype.endRotation = function () {
                this.pointerDragOn = !1;
                var e = s.averageVectors(this.rotationHistory);
                this.rotationSpeed.set(e.x * a.rotationAfterMoveMultiplier, e.y * a.rotationAfterMoveMultiplier)
            }, n.prototype.onTouchEnd = function (e) {
                this.usable() && (e.preventDefault(), e.stopPropagation(), this.endRotation())
            }, n.prototype.onMouseUp = function (e) {
                this.usable() && (e.preventDefault(), e.stopPropagation(), this.endRotation())
            }, n.prototype.onPointerUp = function (e) {
                this.usable() && "touch" === e.pointerType && (this.pointers.forEach(function (t, i) {
                    e.pointerId === t.id && this.pointers.splice(i, 1)
                }.bind(this)), e.touches = this.pointers, this.onTouchEnd(e))
            }, n.prototype.update = function (e) {
                this.lon, this.lat;
                for (this.updateRotation(), this.rotationHistory.push(this.rotationDifference.clone()); this.rotationHistory.length > a.rotationAfterMoveHistoryCount;)this.rotationHistory.shift();
                this.lon += this.rotationDifference.x, this.lat += this.rotationDifference.y, this.rotationDifference.set(0, 0), this.rotationSpeed.x = this.rotationSpeed.x * (1 - a.rotationFriction) + this.rotationAcc.x * a.rotationAccelerationInside, this.rotationSpeed.y = this.rotationSpeed.y * (1 - a.rotationFriction) + this.rotationAcc.y * a.rotationAccelerationInside, this.lon += this.rotationSpeed.x * e, this.lat += this.rotationSpeed.y * e, this.lat = Math.max(a.insideLookLimitDown, Math.min(a.insideLookLimitUp, this.lat)), this.phi = r.Math.degToRad(90 - this.lat), this.theta = r.Math.degToRad(this.lon), this.lookVector.x = Math.sin(this.phi) * Math.cos(this.theta), this.lookVector.y = Math.cos(this.phi), this.lookVector.z = Math.sin(this.phi) * Math.sin(this.theta), this.target.copy(this.lookVector).add(this.camera.position), this.camera.lookAt(this.target)
            }, n.prototype.onMouseWheel = function (e) {
                if (this.usable()) {
                    this.emit(u.Move, "wheel");
                    var t = e.wheelDelta || -e.detail;
                    this.emit(u.InteractionDirect), this.flyDirection(new r.Vector3(0, 0, -t).normalize())
                }
            }, n.prototype.onKeyDown = function (e) {
                this.usable() && (e.metaKey || e.ctrlKey || (e.preventDefault(), this.handleKeyDown(e.which)))
            }, n.prototype.handleKeyDown = function (e) {
                var t = function (e) {
                    this.flyDirection(e)
                }.bind(this), i = function (e, t) {
                    this.rotationAcc[e] = t
                }.bind(this);
                this.emit(u.InteractionKey);
                var n = !0;
                switch (e) {
                    case c.UPARROW:
                    case c.W:
                        t(h.FORWARD);
                        break;
                    case c.DOWNARROW:
                    case c.S:
                        t(h.BACK);
                        break;
                    case c.A:
                        t(h.LEFT);
                        break;
                    case c.D:
                        t(h.RIGHT);
                        break;
                    case c.LEFTARROW:
                    case c.J:
                        i("x", -1);
                        break;
                    case c.RIGHTARROW:
                    case c.L:
                        i("x", 1);
                        break;
                    case c.I:
                        i("y", 1);
                        break;
                    case c.K:
                        i("y", -1);
                        break;
                    default:
                        n = !1
                }
                n && this.emit(u.Move, "key")
            }, n.prototype.onKeyUp = function (e) {
                this.usable() && (e.preventDefault(), e.stopPropagation(), this.handleKeyUp(e.which))
            }, n.prototype.handleKeyUp = function (e) {
                switch (e) {
                    case c.LEFTARROW:
                    case c.J:
                    case c.RIGHTARROW:
                    case c.L:
                        this.rotationAcc.x = 0;
                        break;
                    case c.I:
                    case c.K:
                        this.rotationAcc.y = 0
                }
            }, n.prototype.reset = function () {
                this.pointerDragOn = !1, this.rotationAcc.set(0, 0), this.rotationSpeed.set(0, 0), this.pointers = []
            }, n.prototype.flyDirection = function (e) {
                this.emit(u.FlyInDirection, e.clone())
            }, n.prototype.copy = function (e) {
                this.target.copy(e.target), this.lookVector.copy(e.lookVector), this.lookSpeed = e.lookSpeed, this.rotationAcc.copy(e.rotationAcc), this.rotationSpeed.copy(e.rotationSpeed), this.lat = e.lat, this.lon = e.lon, this.phi = e.phi, this.theta = e.theta, this.enabled = e.enabled, this.locked = e.locked, this.pointer.copy(e.pointer), this.rotationHistory = e.rotationHistory.slice(), this.rotationDifference.copy(e.rotationDifference), this.pointerDragOn = e.pointerDragOn, this.pointerDragStart.copy(e.pointerDragStart), this.pinchDistance = e.pinchDistance, this.moveStart.copy(e.moveStart), this.moveTolerance = e.moveTolerance, this.pointersLimit = e.pointersLimit, this.pointers = e.pointers.slice()
            }, t.exports = n
        }).call(this, "/js/controls/PanoramaControls.js")
    }, {
        "../enum/ControlEvents": 18,
        "../enum/Keys": 23,
        "../enum/Vectors": 41,
        "../settings": 123,
        "../util/common": 142,
        "../util/logger": 146,
        "../util/math": 147,
        events: 160,
        three: 175
    }],
    13: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                this.endlessLoop = a.warp.loop, this.clock = new r.Clock(!0), this.model = null, this.player = null, this.currentItem = null, this.destinationItem = null, this.tourIsPlaying = !1, this.transitionStage = C.None, this.nextFunc = null, this.onTheBus = !1, this.reachSource = null, this.interrupted = !1, this.nItems = 0, this.walkingSectionPaused = !1
            }

            var r = e("three"), o = e("./util/logger"), a = e("./settings"), s = e("./util/transitions"), l = e("events").EventEmitter, h = e("./enum/Viewmode"), c = e("./analytics"), u = e("./enum/WarpStyle"), s = e("./util/transitions"), d = (e("./model/ModelManager"), e("./enum/ModelManagerEvents")), p = e("./enum/DirectorEvents"), f = e("./enum/PlayerEvents"), g = e("./enum/ControlEvents"), m = e("./enum/BlackoutStyle"), v = e("./enum/PathDiscardMode"), A = e("./enum/PathDisplayMode"), y = (e("./player"), new o(i)), C = Object.freeze({
                None: 0,
                Moving: 1,
                Aiming: 2,
                Interlude: 3
            }), I = Object.freeze({Forward: 1, NoChange: 0, Backwards: -1});
            n.prototype = Object.create(l.prototype), n.prototype.init = function (e, t) {
                this.player = e, this.modelManager = t, this.updateModel(), this.resetAll(), this.bindEvents()
            }, n.prototype.resetAll = function () {
                if (this.currentItem = null, this.destinationItem = null, this.tourIsPlaying = !1, this.transitionStage = C.None, this.nextFunc = null, this.onTheBus = !1, this.reachSource = null, this.interrupted = !1, this.model) {
                    var e = a.path.typ === u.WALK ? u.WALK : u.STD;
                    this.defaultWarpStyle = this.model.data.hasOwnProperty("player_options") && this.model.data.player_options && this.model.data.player_options.fast_transitions === !1 ? e : u.BLACK
                } else this.defaultWarpStyle = u.BLACK, y.warn('No model yet, choosing "' + this.defaultWarpStyle + '" transitions');
                this.resetSpecialTransition()
            }, n.prototype.updateModel = function () {
                this.model = this.modelManager.getActiveModel(), this.nItems = this.model.heroLocations.length
            }, n.prototype.bindEvents = function () {
                this.modelManager.on(d.ActiveModelChanged, this.updateModel.bind(this)), this.player.on(f.WarpInterruptedWithFlyTo, this.handleFlyToWarpInterruption.bind(this)), this.player.on(f.Move, this.handlePlayerMove.bind(this)), this.player.on(f.PanoChosen, this.handlePlayerPanoChosen.bind(this)), this.player.on(f.ModeChanged, this.handlePlayerModeChanged.bind(this)), this.player.on(f.InputStart, this.handlePlayerInputStart.bind(this)), this.player.on(f.FlyingStarted, this.handlePlayerFlyingStarted.bind(this))
            }, n.prototype.handleFlyToWarpInterruption = function (e, t) {
                e === u.WALK ? (this.interrupt(m.NONE), this.pauseWalkingSection(), this.player.fastForwardActivePanoFlight()) : this.transitionStage === C.Interlude && (this.interrupt(m.NONE), t && t())
            }, n.prototype.handlePlayerMove = function (e) {
                this.transitionStage === C.Interlude && this.interrupt(m.NONE)
            }, n.prototype.handlePlayerPanoChosen = function (e, t) {
                this.intermediateState() || t.id === e.id || (this.onTheBus = !1, this.emit("update.controls"))
            }, n.prototype.handlePlayerModeChanged = function (e, t) {
                this.intermediateState() || e === t || (this.onTheBus = !1, this.emit("update.controls"))
            }, n.prototype.handlePlayerInputStart = function (e) {
                this.transitionStage === C.Interlude && this.interrupt(m.NONE)
            }, n.prototype.handlePlayerFlyingStarted = function () {
                this.clearWalkingSectionPaused()
            }, n.prototype.describe = function () {
                return {
                    nItems: this.nItems,
                    currentItem: this.currentItem,
                    destinationItem: this.destinationItem,
                    tourIsPlaying: this.tourIsPlaying,
                    onTheBus: this.onTheBus,
                    endlessLoop: this.endlessLoop,
                    viewMode: this.player.mode,
                    inTransition: this._inTransition(),
                    transitionStage: this.transitionStage
                }
            }, n.prototype._inTransition = function () {
                return this.player.flying || this.player.isWarping() || this.player.mode === h.TRANSITIONING || this.tourIsPlaying
            }, n.prototype.bounceable = function () {
                var e = this.clock.getDelta();
                return this.isInterrupted() || .9 > e && e > .01 || this.player.flying && !this.player.isWarping()
            }, n.prototype.currentMoveDirection = function () {
                return null === this.currentItem || void 0 === this.currentItem ? I.Forward : this.destinationItem === this.currentItem ? I.NoChange : this.destinationItem > this.currentItem ? I.Forward : I.Backwards
            }, n.prototype.clearPath = function () {
                this._inTransition() || this.player.path.discardPathObject()
            }, n.prototype.allFloors = function () {
                var e = this.player.controls[this.player.mode];
                e && e.emit("move", "gui"), this.player.controls[h.PANORAMA].emit(g.InteractionGui, "floor-control"), this.model.toggleAllFloors()
            }, n.prototype.actionComplete = function (e) {
                if (this.interrupted = !1, this.transitionStage = C.None, this.resetSpecialTransition(), null !== this.destinationItem && this.setCurrentItem(this.destinationItem), this.tourIsPlaying || (this.player.disablePreRendering(), this.player.mode === h.PANORAMA && this.player.currentPano.isAligned() && this.model.fadePanoMarkers()), this.emit("update.controls"), this.nextFunc) {
                    var t = this.nextFunc;
                    this.nextFunc = null, t()
                }
            }, n.prototype.awaitCompletion = function (e, t) {
                this.nextFunc = t, e()
            }, n.prototype.updateSuccessFunction = function (e) {
                this.nextFunc = e
            }, n.prototype.interrupt = function (e, t) {
                return this.wouldInterrupt() ? (this.interrupted = !0, this.nextFunc = null, this.tourIsPlaying = !1, this.emit(p.ActionInterruped), (null === e || void 0 === e) && (e = m.BEGINNING), this.player.interruptAndFastForward(e, t), !0) : !1
            }, n.prototype.wouldInterrupt = function () {
                return this.transitionStage !== C.None
            }, n.prototype.intermediateState = function () {
                return this.transitionStage !== C.None
            }, n.prototype.isInterrupted = function () {
                return this.interrupted
            }, n.prototype.canInterrupt = function () {
                return this.transitionStage !== C.Aiming && (this.transitionStage === C.Moving && this.player.mode === h.PANORAMA || this.transitionStage !== C.Moving)
            }, n.prototype.pauseWalkingSection = function () {
                this.walkingSectionPaused = !0
            }, n.prototype.clearWalkingSectionPaused = function () {
                this.walkingSectionPaused = !1
            }, n.prototype.autoTour = function () {
                a.warp.auto >= 0 && s.trigger({
                    duration: 1e3 * Math.min(300, a.warp.auto), done: function () {
                        this.playTour()
                    }.bind(this), name: "_atr"
                })
            }, n.prototype.atDestinationPano = function () {
                if (!this.player.currentPano || null === this.destinationItem)return !1;
                var e = this.player.currentPano.id;
                if (void 0 === e)return !1;
                var t = this.model.heroLocations;
                return null !== this.destinationItem && void 0 !== t[this.destinationItem] && e == t[this.destinationItem].panoId ? !0 : !1
            }, n.prototype.redirectToItem = function (e, t) {
                if (null === e || void 0 === e)return void y.warn("Director.redirectToItem() -> Redirecting to null item.");
                if (!this.wouldInterrupt())return void y.warn("Director.redirectToItem() -> Director cannot redirect if there is nothing to interrupt.");
                if (this.player.mode === h.TRANSITIONING)return void y.debug("Director.redirectToItem() -> Cannot redirect while transitioning.");
                y.debug("Director.redirectToItem() -> Redirecting to " + e + " via " + t);
                var i = function () {
                    s.setTimeout(function () {
                        this.setDestinationItem(e), this.goToDestination(!0, m.BEGINNING, a.warp.warpInterruptionRedirectTime, !1)
                    }.bind(this), 0)
                }.bind(this);
                this.interrupt(m.END, 0), this.updateSuccessFunction(i)
            }, n.prototype.useSpecialTransition = function (e) {
                void 0 !== e && this.defaultWarpStyle !== u.BLACK && y.debug("useSpecialTransition(): " + e), this.nextWarpStyle = u.BLACK
            }, n.prototype.resetSpecialTransition = function () {
                this.nextWarpStyle = this.defaultWarpStyle
            }, n.prototype.arrivedAtDestination = function (e) {
                if (this.player.flying || this.player.isWarping())y.warn("Cannot advance to interlude or aiming while player is flying or warping."); else {
                    this.transitionStage = C.Aiming;
                    var t = this.tourIsPlaying ? this.tourInterlude.bind(this, this.nextItem(this.currentItem)) : null;
                    this.player.model.fadePanoMarkers(0), this.awaitCompletion(function () {
                        this.resetSpecialTransition(), e ? this.player.aimTourCamera(this.destinationItem, A.Retain, A.Slow, this.actionComplete.bind(this)) : this.actionComplete()
                    }.bind(this), t)
                }
            }, n.prototype.goToDestination = function (e, t, i, n) {
                if (this.onTheBus = !0, this.emit("update.controls"), this.player.updateLastView(), !n && this.atDestinationPano())return void this.arrivedAtDestination(!0);
                if (this.player.flying || this.player.isWarping())y.warn("Cannot go to new destination while player is flying or warping."); else {
                    var r = this.model.getHeroDescriptorByIndex(this.destinationItem), o = null, a = null;
                    if (r.isPano()) {
                        var s = 0 === this.destinationItem || e ? u.BLACK : this.nextWarpStyle;
                        a = this.player.warpToPanoByHeroIndex.bind(this.player, this.destinationItem, A.Show, v.Slow, s, t, i, this.actionComplete.bind(this)), o = this.arrivedAtDestination.bind(this, !0)
                    } else a = this.player.warpToNonPanoByHeroIndex.bind(this.player, this.destinationItem, this.actionComplete.bind(this)), o = this.arrivedAtDestination.bind(this, !1);
                    this.transitionStage = C.Moving, this.model.fadePanoMarkers(0), this.awaitCompletion(function () {
                        a()
                    }.bind(this), o), this.emit("update.controls")
                }
            }, n.prototype.tourInterlude = function () {
                return c.trackAlways("USER", {
                    event_type: "reach_highlight",
                    reach_source: this.reachSource
                }), this.model.fadePanoMarkers(0), this.emit("update.controls"), this.tourIsPlaying ? this.atEndOfTour() && !this.endlessLoop ? void this.stopTour() : void this.awaitCompletion(function () {
                    this.transitionStage = C.Interlude, this.player.tourInterlude(this.nextItem(this.currentItem), this.actionComplete.bind(this))
                }.bind(this), this.goNext.bind(this)) : void 0
            }, n.prototype.playTour = function () {
                return this.bounceable() ? void 0 : this.tourIsPlaying ? void y.info("tour is already playing") : void(this.wouldInterrupt() || (this.player.emit("tour_auto", this.defaultWarpStyle), this.reachSource = "play", this.tourIsPlaying = !0, this.resetSpecialTransition(), this.emit("update.controls"), this.player.enablePreRendering(), this.walkingSectionPaused ? (this.clearWalkingSectionPaused(), this.goToDestination()) : this.goNext()))
            }, n.prototype.stopTour = function () {
                this.isInterrupted() || (this.interrupt(), this.tourIsPlaying = !1, this.clearWalkingSectionPaused(), this.resetSpecialTransition(), this.emit("update.controls"))
            }, n.prototype.goToHighlight = function (e) {
                if (this.canInterrupt() || !this.wouldInterrupt()) {
                    if (y.debug("<tour.goto " + e + ">"), this.wouldInterrupt() && (e === this.destinationItem ? this.interrupt() : this.redirectToItem(e, "goToHighlight")), this.isInterrupted())return;
                    this.clearWalkingSectionPaused(), this.setDestinationItem(e), this.useSpecialTransition("Hilight"), this.goToDestination(), c.trackAlways("USER", {
                        event_type: "reach_highlight",
                        reach_source: "thumb"
                    })
                }
            }, n.prototype.prevHighlight = function () {
                this.bounceable() || (this.player.emit("tour_manual", "prev"), this.interrupt(m.BEGINNING) || this.isInterrupted() || (this.clearWalkingSectionPaused(), this.reachSource = "prev", this.goPrev()))
            }, n.prototype.nextHighlight = function () {
                this.bounceable() || (this.player.emit("tour_manual", "next"), this.interrupt(m.BEGINNING) || this.isInterrupted() || (this.clearWalkingSectionPaused(), this.reachSource = "next", this.goNext()))
            }, n.prototype.changeMode = function (e, t) {
                var i = t || "gui";
                switch (this.wouldInterrupt() && this.interrupt(), this.player.controls[e].emit("interaction." + i), this.clearWalkingSectionPaused(), e) {
                    case h.PANORAMA:
                        this.player.insideMode();
                        break;
                    case h.DOLLHOUSE:
                    case h.FLOORPLAN:
                        this.player.flyToNewMode({mode: e})
                }
            }, n.prototype.atEndOfTour = function () {
                var e = this.currentItem >= this.nItems - 1;
                return e
            }, n.prototype.firstDestination = function () {
                return this.nItems > 0 ? 0 : null
            }, n.prototype.finalDestination = function () {
                return this.nItems > 0 ? this.nItems - 1 : null
            }, n.prototype.goPrev = function () {
                this.tourAdvance(-1)
            }, n.prototype.goNext = function () {
                this.tourAdvance(1)
            }, n.prototype.setDestinationItem = function (e) {
                this.destinationItem = e, this.emit("update.controls")
            }, n.prototype.setCurrentItem = function (e) {
                this.currentItem = e, this.emit("update.controls")
            }, n.prototype.nextItem = function (e) {
                return null === e ? this.firstDestination() : e >= this.nItems - 1 ? this.endlessLoop ? this.firstDestination() : null : e + 1
            }, n.prototype.prevItem = function (e) {
                return null === e ? this.firstDestination() : 0 > e ? this.endlessLoop ? this.lastDestination() : null : e - 1
            }, n.prototype.tourAdvance = function (e) {
                y.debug("tourAdvance(" + e + ")"), null === this.currentItem || void 0 === this.currentItem ? this.setDestinationItem(this.firstDestination()) : this.setDestinationItem(this.currentItem + e), this.destinationItem < 0 ? (this.setDestinationItem(this.finalDestination()), this.useSpecialTransition("reverse-looping to end")) : this.destinationItem >= this.nItems && (this.setDestinationItem(this.firstDestination()), this.useSpecialTransition("looping back to start")), this.goToDestination()
            }, t.exports = n
        }).call(this, "/js/director.js")
    }, {
        "./analytics": 3,
        "./enum/BlackoutStyle": 16,
        "./enum/ControlEvents": 18,
        "./enum/DirectorEvents": 19,
        "./enum/ModelManagerEvents": 26,
        "./enum/PathDiscardMode": 30,
        "./enum/PathDisplayMode": 31,
        "./enum/PlayerEvents": 32,
        "./enum/Viewmode": 42,
        "./enum/WarpStyle": 43,
        "./model/ModelManager": 103,
        "./player": 118,
        "./settings": 123,
        "./util/logger": 146,
        "./util/transitions": 152,
        events: 160,
        three: 175
    }],
    14: [function (e, t, i) {
        "use strict";
        var n = e("three"), r = e("./enum/Viewmode"), o = (e("./settings"), e("./util/transitions")), a = e("./enum/PlayerEvents"), s = new n.ShaderPass(n.HorizontalBlurShader), l = new n.ShaderPass(n.VerticalBlurShader);
        l.renderToScreen = !0;
        var h = window.innerWidth / window.innerHeight;
        isNaN(h) && (h = 1);
        var c = {
            currentBlur: 0, aspect: h, blurStrength: 1, init: function (e, t) {
                e.addPass(s), e.addPass(l), t.on(a.ModeChanged, function (e, t) {
                    e === r.PANORAMA && (o.cancel(c.blur), o.cancel(c.addBlur), o.start(c.removeBlur, 500, null, 0, null, "deblur"))
                })
            }, blur: function (e) {
                c.currentBlur = e;
                var t = e * c.blurStrength;
                l.uniforms.v.value = t / 512 * c.aspect, s.uniforms.h.value = t / 512
            }, addBlur: function (e) {
                e = Math.max(e, c.currentBlur), c.blur(e)
            }, removeBlur: function (e) {
                e = Math.min(1 - e, c.currentBlur), c.blur(e)
            }
        };
        c.blur(0), t.exports = c
    }, {"./enum/PlayerEvents": 32, "./enum/Viewmode": 42, "./settings": 123, "./util/transitions": 152, three: 175}],
    15: [function (e, t, i) {
        "use strict";
        t.exports = {UNKNOWN: 0, ALIGNED: 1, UNALIGNED: 2, PLACED: 3}
    }, {}],
    16: [function (e, t, i) {
        "use strict";
        t.exports = {NONE: 0, MIDDLE: 1, END: 2, BEGINNING: 3, MIDDLE_CUSTOM: 4}
    }, {}],
    17: [function (e, t, i) {
        "use strict";
        var n = e("three");
        t.exports = {
            newBlue: new n.Color(4967932),
            altBlue: new n.Color(47355),
            classicBlue: new n.Color(53759),
            mpYellow: new n.Color(16502016),
            mpOrange: new n.Color(16428055),
            mpBlue: new n.Color(12096),
            mpLtGrey: new n.Color(13751252),
            mpDkGrey: new n.Color(10000019),
            mpRed: new n.Color(12525854),
            mpOrangeDesat: new n.Color(16764529),
            mpBlueDesat: new n.Color(4034734),
            mpRedDesat: new n.Color(14705505),
            white: new n.Color(16777215),
            black: new n.Color(0),
            _desat: function (e, t) {
                var i = t || .3, r = (new n.Color).copy(e).getHSL();
                return (new n.Color).setHSL(r.h, r.s * (1 - i), r.l)
            },
            _darken: function (e, t) {
                var i = t || .2, r = (new n.Color).copy(e).getHSL();
                return (new n.Color).setHSL(r.h, r.s, r.l * (1 - i))
            }
        }
    }, {three: 175}],
    18: [function (e, t, i) {
        "use strict";
        t.exports = {
            Move: "move",
            InteractionDirect: "interaction.direct",
            InteractionKey: "interaction.key",
            InteractionGui: "interaction.gui",
            FlyInDirection: "fly.direction",
            InputStart: "input.start"
        }
    }, {}],
    19: [function (e, t, i) {
        "use strict";
        t.exports = {ActionInterrupted: "action.interrupted"}
    }, {}],
    20: [function (e, t, i) {
        "use strict";
        t.exports = Object.freeze({
            None: 0,
            Queued: 1,
            ForceQueued: 2,
            Downloading: 3,
            Downloaded: 4,
            DownloadFailed: 5
        })
    }, {}],
    21: [function (e, t, i) {
        "use strict";
        t.exports = {
            GL_TEXTURE_CUBE_MAP_POSITIVE_X: 0,
            GL_TEXTURE_CUBE_MAP_NEGATIVE_X: 1,
            GL_TEXTURE_CUBE_MAP_POSITIVE_Y: 2,
            GL_TEXTURE_CUBE_MAP_NEGATIVE_Y: 3,
            GL_TEXTURE_CUBE_MAP_POSITIVE_Z: 4,
            GL_TEXTURE_CUBE_MAP_NEGATIVE_Z: 5
        }
    }, {}],
    22: [function (e, t, i) {
        "use strict";
        var n = {
            UP: 1, DOWN: -1, LEFT: "L", RIGHT: "R", FORWARD: "F", BACK: "B", reverse: {}, opposite: function (e) {
                return this.reverse[e.toString()]
            }
        };
        !function () {
            n.reverse[n.UP] = n.DOWN, n.reverse[n.DOWN] = n.UP, n.reverse[n.LEFT] = n.RIGHT, n.reverse[n.RIGHT] = n.LEFT, n.reverse[n.FORWARD] = n.BACK, n.reverse[n.BACK] = n.FORWARD
        }(), t.exports = n
    }, {}],
    23: [function (e, t, i) {
        "use strict";
        e("three");
        t.exports = {
            ZERO: 48,
            ONE: 49,
            TWO: 50,
            THREE: 51,
            FOUR: 52,
            FIVE: 53,
            SIX: 54,
            SEVEN: 55,
            EIGHT: 56,
            NINE: 57,
            LEFTARROW: 37,
            UPARROW: 38,
            RIGHTARROW: 39,
            DOWNARROW: 40,
            A: 65,
            B: 66,
            C: 67,
            D: 68,
            E: 69,
            F: 70,
            G: 71,
            H: 72,
            I: 73,
            J: 74,
            K: 75,
            L: 76,
            M: 77,
            N: 78,
            O: 79,
            P: 80,
            Q: 81,
            R: 82,
            S: 83,
            T: 84,
            U: 85,
            V: 86,
            W: 87,
            X: 88,
            Y: 89,
            Z: 90,
            SPACE: 32,
            RETURN: 13
        }
    }, {three: 175}],
    24: [function (e, t, i) {
        "use strict";
        t.exports = {iframe: "iframe", tab: "tab", window: "window"}
    }, {}],
    25: [function (e, t, i) {
        "use strict";
        t.exports = {TagActivated: "tag.activated", TagDismissed: "tag.dismissed", TagNavigation: "tag.navigation"}
    }, {}],
    26: [function (e, t, i) {
        "use strict";
        t.exports = {ModelAdded: "model-added", ActiveModelChanged: "active-model-changed"}
    }, {}],
    27: [function (e, t, i) {
        "use strict";
        t.exports = {
            PanoRenderComplete: "panorama.render.complete",
            TileRenderFailure: "panorama.tile.render.failed",
            TileRenderSuccess: "panorama.tile.render.success",
            TileUploadAttempted: "panorama.tile.upload.attempted",
            UploadAttemptedForAllTiles: "panorama.upload.attempted.all.tiles"
        }
    }, {}],
    28: [function (e, t, i) {
        "use strict";
        t.exports = {BASE: 1, STANDARD: 2, HIGH: 3, ULTRAHIGH: 4}
    }, {}],
    29: [function (e, t, i) {
        "use strict";
        t.exports = {
            LoadComplete: "panorama.load.complete",
            LoadFailed: "panorama.load.failed",
            TileLoaded: "panorama.tile.loaded"
        }
    }, {}],
    30: [function (e, t, i) {
        "use strict";
        t.exports = Object.freeze({Standard: 0, Slow: 1, Retain: 2})
    }, {}],
    31: [function (e, t, i) {
        "use strict";
        t.exports = Object.freeze({Show: 0, Hide: 1, Retain: 2})
    }, {}],
    32: [function (e, t, i) {
        "use strict";
        t.exports = {
            Move: "move",
            MoveComplete: "move.complete",
            ModeChanged: "mode.changed",
            ModeChanging: "mode.changing",
            PanoChosen: "pano.chosen",
            ClosestPanoChanging: "closest.pano.changing",
            WarpStarted: "warp.started",
            WarpInterrupted: "warp.interrupted",
            WarpEnded: "warp.ended",
            FlyingStarted: "flying.started",
            FlyingInterrupted: "flying.interrupted",
            FlyingEnded: "flying.ended",
            Ready: "ready",
            StartInside: "start.inside",
            StartOutside: "start.outside",
            ViewChanged: "view.changed",
            WarpInterruptedWithFlyTo: "warp.interrupted.flyto",
            InputStart: "input.start"
        }
    }, {}],
    33: [function (e, t, i) {
        "use strict";
        t.exports = {
            visibleFloor: 1,
            ghostFloor: 3,
            boundingSkybox: 1,
            panoMarker: 2,
            reticule: 3,
            mattertagDisc: 1,
            mattertagCutout: 2,
            mattertagStem: 3,
            ribbon: 100
        }
    }, {}],
    34: [function (e, t, i) {
        "use strict";
        t.exports = {AfterRender: "after-render"}
    }, {}],
    35: [function (e, t, i) {
        "use strict";
        t.exports = {IDLE: "idle", BROWSE: "browse", EXAMINE: "examine"}
    }, {}],
    36: [function (e, t, i) {
        "use strict";
        t.exports = {
            TileDownloadSuccess: "tiledownloader.download.success",
            TileDownloadFailure: "tiledownloader.download.failure",
            PanoDownloadComplete: "tiledownloader.pano.download.complete"
        }
    }, {}],
    37: [function (e, t, i) {
        "use strict";
        t.exports = {Cardboard: "vr.cardboard", Oculus: "vr.oculus", GearVR: "vr.gear"}
    }, {}],
    38: [function (e, t, i) {
        "use strict";
        t.exports = {NONE: 0, CONTEXTUAL: 1, ANDROID: 2}
    }, {}],
    39: [function (e, t, i) {
        "use strict";
        var n = {Title: 1, Cardboard: 2, Gear: 3};
        n.LastPage = Object.keys(n).length, n.AfterLastPage = n.LastPage + 1, t.exports = n
    }, {}],
    40: [function (e, t, i) {
        "use strict";
        t.exports = {Android: "android", IOS: "ios", Desktop: "desktop", UnsupportedAndroid: "android-unsupported"}
    }, {}],
    41: [function (e, t, i) {
        "use strict";
        var n = e("three");
        t.exports = {
            UP: new n.Vector3(0, 1, 0),
            DOWN: new n.Vector3(0, -1, 0),
            LEFT: new n.Vector3(-1, 0, 0),
            RIGHT: new n.Vector3(1, 0, 0),
            FORWARD: new n.Vector3(0, 0, -1),
            BACK: new n.Vector3(0, 0, 1)
        }
    }, {three: 175}],
    42: [function (e, t, i) {
        "use strict";
        t.exports = {
            PANORAMA: "panorama",
            DOLLHOUSE: "dollhouse",
            FLOORPLAN: "floorplan",
            OUTDOOR: "outdoor",
            TRANSITIONING: "transitioning",
            toInt: function (e) {
                switch (e) {
                    case this.PANORAMA:
                        return 1;
                    case this.DOLLHOUSE:
                        return 2;
                    case this.FLOORPLAN:
                        return 3;
                    case this.OUTDOOR:
                        return 4;
                    case this.TRANSITIONING:
                        return -1
                }
                throw new Error("Unknown mode: " + e)
            },
            fromInt: function (e) {
                switch (e) {
                    case"1":
                    case 1:
                        return this.PANORAMA;
                    case"2":
                    case 2:
                        return this.DOLLHOUSE;
                    case"3":
                    case 3:
                        return this.FLOORPLAN;
                    case"4":
                    case 4:
                        return this.OUTDOOR
                }
                throw new Error("Unknown mode: " + e)
            },
            convertWorkshopModeInt: function (e) {
                switch (e) {
                    case"0":
                    case 0:
                        return this.PANORAMA;
                    case"1":
                    case 1:
                        return this.FLOORPLAN;
                    case"2":
                    case 2:
                        return this.DOLLHOUSE
                }
            }
        }
    }, {}],
    43: [function (e, t, i) {
        "use strict";
        t.exports = {BLACK: "black", STD: "std", WALK: "walk"}
    }, {}],
    44: [function (e, t, i) {
        "use strict";
        function n(e) {
            this.message = e
        }

        t.exports = n
    }, {}],
    45: [function (e, t, i) {
        "use strict";
        function n(e) {
            this.message = e
        }

        t.exports = n
    }, {}],
    46: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                var t = {};
                if (e) {
                    var i = e.flags;
                    if (i)for (var n in i)i.hasOwnProperty(n) && (t[i[n]] = !0);
                    return t
                }
                return l.debug("Feature flags -> parseFeatureFlags: rawData is null."), null
            }

            var r = e("./util/ajax"), o = e("./util/showcase"), a = e("./util/logger"), s = "/api/v1/user/", l = new a(i), h = {};
            t.exports = {
                loadFeatureFlags: function (e) {
                    var t = $.Deferred();
                    return r.get(e.urlBase + s, {
                        responseType: "json",
                        prefetchFrom: "user",
                        auth: o.getAuthorizationHeader()
                    }).done(function (e) {
                        h = n(e), h ? t.resolve(h) : t.reject("loading-failed")
                    }).fail(function () {
                        l.debug("Retrieval of feature flags failed."), t.reject("loading-failed")
                    }), t.promise()
                }, getFlags: function () {
                    return h
                }, updateDependentSettings: function (e, t) {
                    e = e || h, e.showcase_vr && (t.vr.enabled = !0)
                }
            }
        }).call(this, "/js/featureflags.js")
    }, {"./util/ajax": 138, "./util/logger": 146, "./util/showcase": 150}],
    47: [function (e, t, i) {
        "use strict";
        var n = (e("../util/common"), {
            status: 0, set: function (e) {
                var t = e, i = $("#bar");
                if (isNaN(t))return !1;
                var n = i.attr("r"), r = Math.PI * (2 * n);
                t = Math.max(Math.min(t, 100), 0);
                var o = (100 - t) / 100 * r;
                o = Math.max(Math.min(o, 295.3), 0), i.css({strokeDashoffset: o}), $("#cont").attr("data-pct", t), this.status = e
            }, done: function (e) {
                return e || this.status ? (this.status = null, this.set(100)) : this
            }
        });
        t.exports.circleLoader = n
    }, {"../util/common": 142}],
    48: [function (e, t, i) {
        "use strict";
        function n(e, t, i) {
            var n = new r.GUI({width: 400}), d = n.addFolder("Flydown from Dollhouse");
            d.add(c.flydown, "movementEasing", Object.keys(a)), d.add(c.flydown, "movementDelay", 0, 1).step(.01), d.add(c.flydown, "rotationEasing", Object.keys(a)), d.add(c.flydown, "rotationDelay", 0, 1).step(.01), d.add(c.flydown, "modelTextureDelay", 0, 1).step(.01), d.add(c.flydown, "skyboxDelay", 0, 1).step(.01), d.add(c.dollhouseDefault, "minPolarAngle", 0, o.Math.degToRad(50)),
                d.add(c.dollhouseDefault, "maxPolarAngle", o.Math.degToRad(50), o.Math.degToRad(170));
            var p = n.addFolder("Transition between panos");
            p.add(c.transition, "blur", 0, 10).onFinishChange(function () {
            }), p.add(c.transition, "flySpeed", 0, 10).step(.01).onFinishChange(function () {
                c.transition.flyTime = 0, p.__controllers.forEach(function (e) {
                    e.updateDisplay()
                })
            }), p.add(c.transition, "flyTime", 0, 5e3).onFinishChange(function () {
                c.transition.flySpeed = 0, p.__controllers.forEach(function (e) {
                    e.updateDisplay()
                })
            }), p.add(c.transition, "aimTime", 500, 2500).step(50), p.add(c.transition, "aimSlowFactor", 1, 3).step(.1), p.add(c.transition, "movementEasing", Object.keys(a));
            var f = n.addFolder("Path Display");
            f.add(c.path, "opacity", 0, 1).step(.01).onFinishChange(function () {
            }), f.add(c.path, "height", 0, .2).step(.01).onFinishChange(function () {
            }), f.add(c.path, "outsideHeight", 0, 2).step(.01).onFinishChange(function () {
            }), f.add(c.path, "ribbonWidth", .01, .35).step(.01).onFinishChange(function () {
            }), f.add(c.path, "waypointRadius", .01, 1.2).step(.01).onFinishChange(function () {
            }), f.add(c.path, "waypointPulse", 0, 3600).step(20).onFinishChange(function () {
            }), f.add(c.path, "waypointIndoorRadius", .01, 1.2).step(.01).onFinishChange(function () {
            }), f.add(c.path, "fadeInTime", 0, 1200).step(10).onFinishChange(function () {
            }), f.add(c.path, "fadeOutTime", 0, 1200).step(10).onFinishChange(function () {
            }), f.add(c.path, "color", Object.keys(l)).onFinishChange(function () {
                c.path.color = l[c.path.color], c.path.colorUp = l.desat(c.path.color), c.path.colorDown = l.darken(c.path.color)
            }), f.add(c, "reticuleColor", Object.keys(l)).onFinishChange(function () {
                c.reticuleColor = l[c.reticuleColor], i.reticule.material.uniforms.color.value.set(c.reticuleColor)
            });
            var g = n.addFolder("Warping"), m = g.addFolder("Warp/Teleport");
            m.add(c.warp, "softPushDist", 0, 2).onFinishChange(function () {
            }), m.add(c.warp, "softPushEnd", 0, 1).step(.01).onFinishChange(function () {
            }), m.add(c.warp, "softBendAngle", 0, 45).onFinishChange(function () {
            }), m.add(c.warp, "softBendTilt", 0, 45).onFinishChange(function () {
            }), m.add(c.warp, "softBendEnd", 0, 1).step(.01).onFinishChange(function () {
            }), m.add(c.warp, "burnsAngle", 0, 30).onFinishChange(function () {
            }), m.add(c.warp, "minBurnsAngle", 0, 10).onFinishChange(function () {
            }), m.add(c.warp, "brakeStrength", 1, 8).onFinishChange(function () {
            }), m.add(c.warp, "minBrakeAngle", 0, 5).step(.01).onFinishChange(function () {
            }), m.add(c.warp, "maxBrakeAngle", 0, 5).step(.01).onFinishChange(function () {
            }), m.add(c.path, "mapGuides").onFinishChange(function () {
            }), m.add(c.warp, "teleportTime", 0, 5e3).step(10).onFinishChange(function () {
            }), m.add(c.warp, "outsideTime", 0, 5e3).step(10).onFinishChange(function () {
            }), m.add(c.path, "typ", Object.keys(h)).onFinishChange(function () {
                c.path.typ = h[c.path.typ]
            }), m.add(c.warp, "tourStepDelay", 0, 1e4).step(100).onFinishChange(function () {
            }), m.add(c.warp, "loop").onChange(function () {
            }).onFinishChange(function () {
                t.endlessLoop = c.warp.loop
            }), m.add(c.warp, "walkSlideShowThreshhold", 1, 1e4).step(1).onFinishChange(function () {
            }), m.add(c.warp, "walkExtraPanosDistance", 0, 3).step(.1).onFinishChange(function () {
            }), m.add(c.transition, "fastForwardFactor", 1, 10).step(1).onFinishChange(function () {
            });
            var v = g.addFolder("Long Warp Only");
            v.add(c.warp, "minWarpTime", 0, 5e3).step(10).onFinishChange(function () {
                c.warp.flySpeed = 0, v.__controllers.forEach(function (e) {
                    e.updateDisplay()
                })
            }), v.add(c.warp, "timePerMeter", 0, 5e3).step(10).onFinishChange(function () {
            }), v.add(c.warp, "lookAheadMax", .01, 1).step(.01).onFinishChange(function () {
            }), v.add(c.warp, "lookAheadDist", .01, 4).step(.01).onFinishChange(function () {
            }), v.add(c.warp, "maxTurnPerSec", 0, 720).step(1).onFinishChange(function () {
            }), v.add(c.warp, "maxAimPerSec", 0, 720).step(1).onFinishChange(function () {
            }), v.add(c.warp, "turnFriction", 0, 1).step(.01).onFinishChange(function () {
            }), v.add(c.warp, "walkDelay", 0, 2e3).step(10).onFinishChange(function () {
            }), v.add(c.transition, "flytimeMaxDistanceThreshold", 0, 25).step(10).onFinishChange(function () {
            }), v.add(c.warp, "walkMaxDist", 0, 100).step(1).onFinishChange(function () {
            });
            var A = n.addFolder("Warp Esoterica");
            A.add(c.warp, "nearPanoDist", .01, 12).step(0).onFinishChange(function () {
            }), A.add(c.warp, "blur", .01, 1).onFinishChange(function () {
            }), A.add(c.warp, "flySpeed", 0, 10).step(.01).onFinishChange(function () {
                c.warp.minWarpTime = 0, A.__controllers.forEach(function (e) {
                    e.updateDisplay()
                })
            }), A.add(c.warp, "showBunny").onFinishChange(function () {
            }), A.add(c.warp, "fastTime", 0, 2500).step(10).onFinishChange(function () {
            }), A.add(c.warp, "movementEasing", Object.keys(a));
            var y = n.addFolder("Misc");
            y.add(c, "dollhouseFOV", 10, 180).onChange(function () {
                i.controls[s.DOLLHOUSE].camera.fov = c.dollhouseFOV
            }), y.add(c, "insideFOV", 10, 180).onChange(function () {
                i.controls[s.PANORAMA].camera.fov = c.insideFOV
            }), y.add(c, "insideLookSpeed", .01, .3).step(.01).onChange(function () {
            }), y.add(c, "rotationAccelerationInside", .1, 10).step(.1).onChange(function () {
            }), y.add(c, "rotationAccelerationOutside", .1, 10).step(.1).onChange(function () {
            });
            var C = n.addFolder("Navigation");
            C.add(c.navigation, "panoScores").onFinishChange(function () {
                c.navigation.panoScores || e.panos.forEach(function (e) {
                    e.floor.remove(e.text3d), e.text3d = null
                })
            }), C.add(c.navigation, "mouseDirection"), C.add(c.navigation, "filterStrictness", 0, 1), C.add(c.navigation, "angleFactor", -60, 0), C.add(c.navigation, "directionFactor", 1, 20), C.add(c.navigation, "distanceFactor", -5, 5), C.add(c.navigation, "optionalityFactor", .1, 10);
            var I = n.addFolder("Mattertags");
            c.mattertags.enableLinking && I.add(c.mattertags, "linkDestination", Object.keys(u));
            var b = I.addFolder("Tag Creation");
            b.add(c.mattertags.pole, "enabled").name("poleEnabled"), b.add(c.mattertags.pole, "height", 0, 2.5).step(.01).name("poleHeight"), b.add(c.mattertags.pole, "width", 1, 10).step(1).name("poleWidth"), b.add(c.mattertags.pole, "opacity", .1, 1).step(.1).name("poleOpacity");
            var w = I.addFolder("Visibility");
            w.add(c.mattertags.visibility, "anyDistance"), w.add(c.mattertags.visibility, "visibleDistance", .1, 30).step(.1), w.add(c.mattertags.visibility, "cameraClearance", 0, 1).step(.01), w.add(c.mattertags.visibility, "hideViaFloor"), w.add(c.mattertags.visibility, "hideOffScreenDisc").name("hideEdgeDisc"), w.add(c.mattertags.visibility, "hideOffScreenObject").name("hideEdgeObject");
            var x = I.addFolder("Disc Parameters");
            x.add(c.mattertags.disc.scale, "nearBound", .1, 10).step(.1), x.add(c.mattertags.disc.scale, "farBound", .1, 20).step(.1).listen(), x.add(c.mattertags.disc.scale, "linkFarBound").onChange(function (e) {
                e && (c.mattertags.disc.scale.farBound = c.mattertags.visibility.visibleDistance * (1 - c.mattertags.disc.scale.linkPercent / 100))
            }), x.add(c.mattertags.disc.scale, "linkPercent", 0, 100).step(1).onChange(function (e) {
                c.mattertags.disc.scale.linkFarBound && (c.mattertags.disc.scale.farBound = c.mattertags.visibility.visibleDistance * (1 - e / 100))
            }), x.add(c.mattertags.disc.scale, "maxSize", 40, 200).step(1), x.add(c.mattertags.disc.scale, "minSize", 20, 100).step(1), x.add(c.mattertags.disc.scale, "responsiveness", 0, 100).step(1);
            var E = I.addFolder("Animation Timers");
            E.add(c.mattertags.animation, "hoverOnClosing"), E.add(c.mattertags.animation, "animInDelay", 0, 500).step(10).name("Opening Delay"), E.add(c.mattertags.animation, "animOutDelay", 0, 500).step(10).name("Closing Delay"), E.add(c.mattertags.animation, "animInTime", 0, 1e3).step(25).name("Opening Duration"), E.add(c.mattertags.animation, "animOutTime", 0, 1e3).step(25).name("Closing Duration");
            var M = I.addFolder("Billboard Scaling");
            M.add(c.mattertags.boardScale, "billboardScale", .5, 5).step(.1), M.add(c.mattertags.boardScale, "scaleToDisc"), M.add(c.mattertags.boardScale, "boardToDiscRatio", .5, 5).step(.1);
            var T = I.addFolder("Navigate");
            T.add(c.mattertags.navigate, "nearestPano").name("nearestPano"), T.add(c.mattertags.navigate, "lineOfSight").name("lineOfSight"), T.add(c.mattertags.navigate, "reactivate").name("reactivate"), T.add(c.mattertags.navigate, "aimAt", ["disc", "object", "pole", "nothing"]).name("aim at"), T.add(c.mattertags.navigate, "tiltTolerance", 0, 50).step(1), T.add(c.mattertags.navigate, "rotateSpeedFactor", 0, 5).step(.1);
            var S = n.addFolder("Debug");
            S.add(c, "wireframe").onFinishChange(function () {
                e.chunks.forEach(function (t) {
                    t.material && (t.wireframeTwin || (t.wireframeTwin = new o.WireframeHelper(t), t.wireframeTwin.material.depthWrite = !1, t.wireframeTwin.material.depthTest = !1, t.wireframeTwin.material.opacity = .5, t.wireframeTwin.material.transparent = !0), c.wireframe ? e.add(t.wireframeTwin) : e.remove(t.wireframeTwin))
                })
            }), S.add(c, "skyboxWireframe").onFinishChange(function () {
                c.skyboxWireframe ? (e.skybox.wireframe = new o.WireframeHelper(e.skybox), e.add(e.skybox.wireframe)) : (e.remove(e.skybox.wireframe), e.skybox.wireframe = null)
            }), S.add(c, "showSweeps").onFinishChange(function () {
                e.setSweepVisibility(c.showSweeps)
            }), S.add(c, "showMesh").onFinishChange(function () {
                e.chunks.forEach(function (e) {
                    e.visible = c.showMesh
                })
            }), S.add(c, "showFloors").onFinishChange(function () {
                e.floors.forEach(function (e) {
                    e.collider.children.forEach(function (e) {
                        e.material.visible = c.showFloors
                    })
                })
            }), S.add(c, "showSkyboxes").onFinishChange(function () {
                e.panos.forEach(function (e) {
                    e.skyboxMesh.visible = c.showSkyboxes
                })
            }), S.add(c, "showNeighbors").onChange(function () {
            }), S.add(e, "alpha", 0, 1)
        }

        var r = e("../lib/dat.gui"), o = e("three"), a = e("../util/easing"), s = e("../enum/Viewmode"), l = e("../enum/Colors"), h = e("../enum/WarpStyle"), c = e("../settings"), u = (e("../mattertag/Mattertag"), e("../enum/LinkDestination"));
        r.GUI.prototype.removeFolder = function (e) {
            var t = this.__folders[e];
            t && (t.close(), this.__ul.removeChild(t.domElement.parentNode), delete this.__folders[e], this.onResize())
        }, t.exports.toggle = n
    }, {
        "../enum/Colors": 17,
        "../enum/LinkDestination": 24,
        "../enum/Viewmode": 42,
        "../enum/WarpStyle": 43,
        "../lib/dat.gui": 61,
        "../mattertag/Mattertag": 96,
        "../settings": 123,
        "../util/easing": 143,
        three: 175
    }],
    49: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t, i, n) {
                $(".gui-error .error-problem-text").text(e), $(".gui-error .error-solution-text").text(t), $(".gui-error .error-explanation").text(i), $(".gui-error .error-actions").html(n), $(window).resize(), $(".gui-error").fadeIn(), $("#bottom-logo").fadeIn()
            }

            function r(e) {
                var t = ['<div class="browser-tiles">', '<div class="tile">', '<a href="https://www.google.com/chrome/browser/" target="_blank">', '<img class="icon" src="images/icon_Google_Chrome_2011.png" ', 'rel="tiletip" title="Chrome"></a>', "</div>", '<div class="tile">', '<a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">', '<img class="icon" src="images/icon_Mozilla_Firefox.png" ', 'rel="tiletip" title="Firefox"></a>', "</div>", '<div class="tile">', '<a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie" target="_blank">', '<img class="icon" src="images/icon_Internet_Explorer_10.png" ', 'rel="tiletip" title="Internet Explorer"></a>', "</div>", '<div class="tile">', '<a href="https://support.apple.com/en-us/HT204416" target="_blank">', '<img class="icon" src="images/icon_MacOSX_Safari.png" ', 'rel="tiletip" title="Safari"></a>', "</div>", "</div>"].join("");
                n(e, "Install a new browser to explore in 3D.", "WebGL requires a modern browser.", t), s.isMobile() || $("[rel=tiletip]").tooltip({
                    placement: "bottom",
                    delay: {show: 50, hide: 0},
                    trigger: "hover",
                    viewport: {selector: "body", padding: 10}
                })
            }

            function o() {
                var e = s.isMobile() ? "" : '<span class="link install-browser">install a supported browser</span> or ', t = ["If the problem persists, ", e, '<a class="link" target="_blank" href=', d, ">see our troubleshooting guide</a>."].join("");
                n("Oops, something went wrong.", "Restart your browser.", "", t), s.isMobile() || $(".install-browser").on("click touchstart", function (e) {
                    e.preventDefault(), e.stopPropagation(), r(" ")
                })
            }

            function a(e) {
                if ($("head title").text(h.pageTitle), $("#gui-message, #gui-loading, #nprogress, #gui-thumb, #bottom-logo").hide(), $("#gui-loading").fadeOut(250), l.track("USER", {
                        event_type: "showcase_error",
                        error_key: e
                    }), "webgl-unsupported" === e)s.isMobile() ? o() : r("Browser not supported."); else if ("webgl-ios" === e)n("iOS version not supported.", "Upgrade to iOS 8 or higher to explore in 3D.", "", "Tap <strong>Settings > General > Software Update</strong>."); else if ("webgl-safari" === e)n("Enable WebGL to explore in 3D.", "", "", "Click <strong>Preferences > Advanced > Show Develop menu</strong>. Then click <strong>Develop > Enable WebGL</strong>."); else if ("webgl-generic" === e)o(); else if ("missing-urls" === e)n("Oops, there are no panoramas for this model.", "", "This is an older model. The website owner may have a new model on the way."); else if ("loading-failed" === e)n("Oops, model not available.", "", "", 'If the problem persists, <a class="link" target="_blank" href=' + d + ">see our troubleshooting guide</a>."); else {
                    if ("loading-failed-maintenance" !== e)return void u.error("Unhandled error: " + e);
                    n("Maintenance in progress.", "Please come back in a few minutes.")
                }
            }

            var s = e("./../util/browser"), l = e("./../analytics"), h = e("./../settings"), c = e("./../util/logger"), u = new c(i), d = '"https://matterportsupport.zendesk.com/hc/en-us/articles/208220058-Showcase-System-Requirements"';
            t.exports.error = a
        }).call(this, "/js/gui/error.js")
    }, {"./../analytics": 3, "./../settings": 123, "./../util/browser": 139, "./../util/logger": 146}],
    50: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                Ee = [], De.floors.visible && Ee.push(".gui-floor", ".gui-floor-title"), Ee.push(".hideTarget", ".pinTop.right")
            }

            function r() {
                for (var e in De)if (De.hasOwnProperty(e)) {
                    var t = De[e];
                    if (!t.visible)for (var i = 0; i < t.elements.length; i++)$(t.elements[i]).hide()
                }
                De.highlight.visible && $(".pinBottom").addClass("highlightExists"), De.tourControls.visible === !1 && $("#drawer").addClass("fullWidth"), De.coBrand.visible || $("#gui-name").addClass("noCoBrand"), De.titleContainer.visible || $(".pinTop.right").addClass("reposition"), n()
            }

            function o(e, t, i) {
                $("#mattertag-toggles").show(), document.getElementById("radio-tag-show").checked = !0, $("#mattertag-inputs input").on("change", function (t) {
                    e.showingMattertags = "show" === this.value, e.showingMattertags ? i.showAllMattertags(ae.mattertags.startup.fadeInDuration) : i.hideAllMattertags(ae.mattertags.startup.fadeInDuration)
                })
            }

            function a(e) {
                f(), $(".pinBottom").toggleClass("open"), $("#drawer").toggleClass("open"), $("#drawer").hasClass("open") ? $("#pullTab .icon").attr("data-original-title", "Close") : $("#pullTab .icon").attr("data-original-title", "Open Highlights"), setTimeout(function () {
                    $("#pullTab").toggleClass("opened")
                }, $("#drawer").hasClass("open") ? 0 : ae.highlightAnimationDuration), e || d("highlights"), $(".pinBottom").hasClass("open") && s($(".nav-help-dialog")) && "none" !== $(".nav-help-dialog").css("display") ? c() : u(), $(".pinBottom").hasClass("open") && s($(".vr-popup")) && $(".vr-popup").is(":visible") && pe.dismiss()
            }

            function s(e) {
                var t;
                "none" !== e.css("display") ? t = e.position().top + e.outerHeight() : (e.attr("style", "visibility: hidden"), t = e.position().top + e.outerHeight(), e.attr("style", "display: none"));
                var i = $("#player").outerHeight(), n = i - 130;
                return t + 25 > n
            }

            function l() {
                $(window).height() < 400 && $("#drawer").hasClass("open") && a(!0)
            }

            function h() {
                $(window).height() < 400 && $("#meta-info").is(":visible") && C(!0)
            }

            function c() {
                $("#drawer").hasClass("open") && ($(".nav-help-dialog").addClass("elevated"), "none" !== $(".title-container").css("display") && (I(), Le = !0))
            }

            function u() {
                $(".nav-help-dialog").removeClass("elevated"), Le && (I(), Le = !1)
            }

            function d(e) {
                function t() {
                    f.is(":visible") && (f.slideUp(250), $("#more-hint").toggle(), $("#less-hint").toggle())
                }

                function i() {
                    g.is(":visible") && g.fadeOut()
                }

                function n() {
                    m.is(":visible") && (u(), he.closeHelp())
                }

                function r() {
                    C.is(":visible") && pe.dismiss()
                }

                function o() {
                    v.hasClass("open") && a(!0)
                }

                function d() {
                    A.is(":visible") && A.fadeOut()
                }

                function p() {
                    y.hasClass("open") && y.removeClass("open")
                }

                var f = $("#meta-info"), g = $("#terms-modal"), m = $(".nav-help-dialog"), v = $("#drawer"), A = $("#share-modal"), y = $(".gui-floor"), C = $(".vr-popup");
                switch (e) {
                    case"info":
                        i(), n(), l(), d(), p(), r();
                        break;
                    case"terms":
                        t(), n(), o(), d(), p(), r();
                        break;
                    case"help":
                        s(m) && c(), t(), i(), d(), p(), r();
                        break;
                    case"help-dismissed":
                        u();
                        break;
                    case"vr":
                        t(), i(), d(), p(), n(), s(C) && o();
                        break;
                    case"highlights":
                        h(), i(), d(), p();
                        break;
                    case"share":
                        i(), p();
                        break;
                    case"floor":
                        i(), d(), r();
                        break;
                    case"view":
                        p(), d(), i(), r();
                        break;
                    case"tour":
                        i(), d(), p(), r();
                        break;
                    case"move":
                        i(), d(), p(), r();
                        break;
                    case"resize":
                        t(), l(), d(), p()
                }
            }

            function p(e) {
                "touchstart" === e.type && e.preventDefault(), e.stopPropagation()
            }

            function f() {
                J && (J.reload(), J.init())
            }

            function g(e) {
                ce.show(e), r()
            }

            function m(e) {
                ce.progress(e)
            }

            function v(e, t, i) {
                var n = t.player;
                if ($("#gui-thumb").fadeOut(2500), ce.hide(function () {
                        Se = !1
                    }), ae.mattertags.enabled && Object.keys(e.mattertags).length > 0 && (o(e, n, i), ae.mattertags.enableLinking && de.attachMattertagLinks(n)), ae.labels.enabled && Object.keys(e.labels).length, De.address.visible || De.contact.visible || De.description.visible ? $("#mattertag-toggles").prepend("<br>") : Object.keys(e.mattertags).length || 0 !== e.labels.list.length || ($(".meta-toggle").off("click"), $(".title-container").removeClass("meta-toggle"), De.metaInfo.visible = !1), e.floors.length <= 1 || !De.floors.visible ? De.floors.visible = !1 : (T(e, t), S(e.currentFloor, n.mode)), r(), $("#gui").fadeIn(1500), De.highlight.visible && setTimeout(function () {
                        a(), ae.startHighlights || e.has360Views || setTimeout(a, 2e3)
                    }, 2e3), !oe.isMobile())for (var s = ["a", "#title-toggle", ".next-button", ".prev-button", ".gui-floor", ".meta-toggle", ".thumbImg", "logo-button"], l = 0; l < s.length; l++)$(s[l]).addClass("hasHover");
                V(e)
            }

            function A(e) {
                e || (e = 0), _e = !1, window.setTimeout(function () {
                    _e || (Pe = !0, $("#gui-spinner").stop(!0, !0).show())
                }.bind(this), e)
            }

            function y() {
                $("#gui-spinner").stop(!0, !0), $("#gui-spinner").fadeOut(1e3), _e = !0, Pe = !1
            }

            function C(e) {
                var t = $("#meta-info");
                "block" === t.css("display") ? se.trackAlways("USER", {
                    event_type: "showcase_gui",
                    gui_action: "about_collapse"
                }) : "none" === $("#meta-info").css("display") && (se.trackAlways("USER", {
                    event_type: "showcase_gui",
                    gui_action: "about_expand"
                }), d("info")), $(".pinTop.right").toggleClass("hideUnderMeta"), t.slideToggle(ae.guiAnimationSpeed), $("#more-hint").toggle(), $("#less-hint").toggle(), e || l()
            }

            function I(e) {
                function t() {
                    i && r.toggleClass("closed")
                }

                e && p(e);
                var i, n = $(".title-container"), r = $("#model-title");
                $("#title-toggle").find("i").toggleClass("icon-dpad-left icon-dpad-right"), $(".pinTop.right").toggleClass("reposition"), "none" === n.css("display") ? (se.trackAlways("USER", {
                    event_type: "showcase_gui",
                    gui_action: "about_show"
                }), i = !1) : (se.trackAlways("USER", {
                    event_type: "showcase_gui",
                    gui_action: "about_hide"
                }), i = !0), i || r.toggleClass("closed"), $("#meta-info").is(":visible") ? (C(), $(".title-container").animate({opacity: 1}, ae.guiAnimationSpeed).animate({width: "toggle"}, {
                    duration: ae.guiAnimationSpeed,
                    complete: t
                })) : $(".title-container").animate({width: "toggle"}, {duration: ae.guiAnimationSpeed, complete: t})
            }

            function b(e, t) {
                var i = e.mode, n = t || e.currentPano;
                $("#gui-modes-dollhouse").toggleClass("active", i === ge.DOLLHOUSE), $("#gui-modes-floorplan").toggleClass("active", i === ge.FLOORPLAN), i === ge.PANORAMA ? ($("#view-controllers").slideUp(500), ae.show360Views.enabled && !n.isAligned() ? ($("#gui-modes-inside").removeClass("hidden"), $(".gui-floor").addClass("hidden"), $("#gui-modes-outside").addClass("desktop-only")) : ($("#gui-modes-inside").addClass("hidden"), $(".gui-floor").removeClass("hidden"), $("#gui-modes-outside").removeClass("desktop-only")), $("#gui-modes-outside").removeClass("hidden")) : i !== ge.TRANSITIONING && (y(), be = i, $("#gui-modes-outside").addClass("hidden"), $("#gui-modes-inside").removeClass("hidden"), e.model.has360Views && $(".gui-floor").removeClass("hidden"), $("#view-controllers").is(":visible") || $("#view-controllers").slideDown(ae.guiAnimationSpeed))
            }

            function w(e, t) {
                var i = t.player;
                $("#gui-modes-inside").find("a").on("click", function (e) {
                    p(e), se.track("USER", {
                        event_type: "showcase_gui",
                        gui_action: "click_inside_mode_button"
                    }), i.model.has360Views ? (t.stopTour(), i.controls[ge.PANORAMA].emit(ve.InteractionGui, "inside-button"), i.goToLastView(!0)) : t.changeMode(ge.PANORAMA, "gui")
                }), $("#gui-modes-outside").find("a").on("click", function (e) {
                    p(e), se.track("USER", {
                        event_type: "showcase_gui",
                        gui_action: "click_outside_mode_button"
                    }), t.changeMode(be, "gui")
                }), $("#gui-modes-floorplan").on("click", function (e) {
                    p(e), i.mode !== ge.FLOORPLAN && (se.track("USER", {
                        event_type: "showcase_gui",
                        gui_action: "click_floorplan_mode_button"
                    }), t.changeMode(ge.FLOORPLAN))
                }), $("#gui-modes-dollhouse").on("click", function (e) {
                    p(e), i.mode !== ge.DOLLHOUSE && (se.track("USER", {
                        event_type: "showcase_gui",
                        gui_action: "click_dollhouse_mode_button"
                    }), t.changeMode(ge.DOLLHOUSE))
                })
            }

            function x(e) {
                function t() {
                    document.getElementById("vr").classList.remove("hidden"), pe.init(e.data, d)
                }

                if (ae.vr.enabled && e.supportsVR)switch (ae.vr.option) {
                    case Ae.CONTEXTUAL:
                        t();
                        break;
                    case Ae.ANDROID:
                        oe.detectAndroid() && t();
                        break;
                    case Ae.NONE:
                }
            }

            function E(e, t) {
                $("#play").find("a").on("mousedown touchstart", function (e) {
                    p(e), d("tour"), t.playTour(), se.trackAlways("USER", {
                        event_type: "showcase_gui",
                        gui_action: "play_highlights"
                    })
                }), $("#pause").find("a").on("mousedown touchstart", function (e) {
                    p(e), t.stopTour(), se.trackAlways("USER", {
                        event_type: "showcase_gui",
                        gui_action: "pause_highlights"
                    })
                })
            }

            function M(e) {
                if (De.share.visible) {
                    var t = 580, i = 420, n = "http://www.facebook.com/sharer.php?u=" + window.location + "&t=" + encodeURIComponent(e.data.name.toString()), r = "http://twitter.com/share?text=" + encodeURIComponent(e.data.name.toString()) + "&url=" + window.location + "&related=matterport";
                    $(".faceBookLink").on("click", function (e) {
                        p(e);
                        var r = window.screenY + (window.innerHeight - i) / 2, o = window.screenX + (window.innerWidth - t) / 2, a = "top=" + r + ",left=" + o + ",width=" + t + ",height=" + i;
                        window.open(n, "fbshare", a)
                    }), $(".twitterLink").on("click", function (e) {
                        p(e);
                        var n = window.screenY + (window.innerHeight - i) / 2, o = window.screenX + (window.innerWidth - t) / 2, a = "top=" + n + ",left=" + o + ",width=" + t + ",height=" + i;
                        window.open(r, "twitshare", a)
                    }), $("#shareUrl").val(window.location), $(".shareTextLink").on("click", function (e) {
                        p(e), $("#share-modal").fadeIn(400)
                    }), $("#share-close").on("click", function (e) {
                        p(e), $("#share-modal").fadeOut()
                    }), $(".socialButton").find("a").on("click", function (e) {
                        p(e), $(".socialButton").toggleClass("active"), $(".bottomShare").toggle()
                    })
                }
            }

            function T(e, t) {
                for (var i = $(".gui-floor"), n = 0; n < e.floors.length; n++) {
                    var r = $('<div class="floorChoice" data-index="' + n + '"></div>').text(e.floors.get(n).name);
                    $(".gui-floor").find(".container").prepend(r)
                }
                i.find(".container").prepend('<div class="floorChoice darkGlass allFloorBtn" data-index="all" style="display:none">All</div>'), i.on("click", function (e) {
                    p(e), d("floor"), i.toggleClass("open")
                }), $(".floorChoice").on("click", function (e) {
                    p(e);
                    var n = $(this).data("index");
                    "all" !== n ? (t.player.gotoFloor(n, "gui"), se.track("USER", {
                        event_type: "showcase_gui",
                        gui_action: "click_floor_select_button",
                        interaction_source: "gui"
                    })) : (t.allFloors(), se.track("USER", {
                        event_type: "showcase_gui",
                        gui_action: "click_toggle_all_floors_button",
                        interaction_source: "gui"
                    })), i.removeClass("open")
                })
            }

            function S(e, t) {
                e && (t === ge.DOLLHOUSE || t === ge.FLOORPLAN ? $(".allFloorBtn").show() : $(".allFloorBtn").hide(), e.model.allFloorsVisible ? ($(".gui-floor-title").text("All"), $(".gui-floor-number").text("All"), $(".floorChoice").removeClass("active"), $('.floorChoice[data-index="all"]').addClass("active")) : ($(".gui-floor-title").text(e.name), $(".gui-floor-number").text(" " + (e.floorIndex + 1)), $(".floorChoice").removeClass("active"), $(".floorChoice[data-index=" + e.floorIndex + "]").addClass("active")))
            }

            function P(e) {
                return e.describe().inTransition
            }

            function _(e) {
                $("<img/>").attr("src", e).on("load", function () {
                    $("#gui-thumb").css("backgroundImage", "url(" + e + ")").fadeIn(500), $(this).remove()
                })
            }

            function L(e, t, i) {
                we = e.heroLocations.length;
                var n = '<li class="thumbImg" data-index=""><img src=""></li>', r = 100 / we + "%", o = $("#thumb-container"), a = $("#progressBar");
                $("#status").find(".totalSteps").text(we);
                for (var s = 0; we > s; s++) {
                    var l = e.heroLocations[s], h = $(n);
                    if (h.attr("data-index", s), De.highlight.visible && h.find("img").attr("src", l.thumbUrl), l.name) {
                        var c = $('<div class="overlay"></div>').text(l.name);
                        h.prepend(c)
                    }
                    if (e.has360Views && l.cameraMode === ge.PANORAMA) {
                        var u = e.panos.get(l.panoId), f = u && !u.isAligned(), g = f ? '<div><img class="mark360View" src="images/mark-360-white-v2.png"></div>' : '<div><img class="markInsideView" src="images/mark-inside-white.png"></div>';
                        h.prepend(g)
                    }
                    o.append(h), a.append('<div class="step" data-idx="' + s + '" style="width:' + r + '"></div>')
                }
                ee = 144 * we, te = 111 * we, $(".thumbImg").on("mouseover", function () {
                    P(t) || i.showPathToHeroLocation($(this).data("index"))
                }), $(".thumbImg").on("mouseout", function () {
                    t.clearPath()
                }), $(".thumbImg").on("click", function (e) {
                    p(e);
                    var n = $(this);
                    se.trackAlways("USER", {
                        event_type: "showcase_gui",
                        gui_action: "click_highlight"
                    }), i.controls[ge.PANORAMA].emit(ve.InteractionGui, "thumbnail"), t.goToHighlight(n.data("index"))
                }), $(".previous").find("a").on("click", function (e) {
                    p(e), se.trackAlways("USER", {
                        event_type: "showcase_gui",
                        gui_action: "prev_highlight"
                    }), t.prevHighlight()
                }), $(".next").find("a").on("click", function (e) {
                    p(e), se.trackAlways("USER", {
                        event_type: "showcase_gui",
                        gui_action: "next_highlight"
                    }), t.nextHighlight()
                }), $("#drawer").on("mouseleave", function (e) {
                    p(e);
                    var t;
                    try {
                        t = new MouseEvent("mouseup", {
                            clientX: e.clientX,
                            clientY: e.clientY,
                            screenX: e.screenX,
                            screenY: e.screenY
                        })
                    } catch (i) {
                        t = document.createEvent("MouseEvents"), t.initMouseEvent("mouseup", e.bubbles, e.cancelable, e.view, e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget)
                    }
                    document.dispatchEvent(t)
                }), J = new Sly($("#scrollFrame"), {
                    horizontal: !0,
                    itemNav: "centered",
                    smart: !0,
                    scrollTrap: !0,
                    scrollBy: 1,
                    mouseDragging: !0,
                    touchDragging: !0,
                    speed: 300,
                    dragHandle: !0,
                    dynamicHandle: !0,
                    clickBar: !0,
                    scrollBar: $("#scroller"),
                    activateOn: null
                }).init(), J.on("active", function (e, t) {
                    xe = t, d("tour"), $(".step").removeClass("active"), $("#status").find(".curIdx").text(t + 1);
                    for (var i = 0; t >= i; i++)$("#progressBar").find("[data-idx='" + i + "']").addClass("active")
                }), D()
            }

            function D() {
                var e;
                e = "undefined" != typeof window.innerWidth ? window.innerWidth : "undefined" != typeof document.documentElement && "undefined" != typeof document.documentElement.clientWidth && 0 !== document.documentElement.clientWidth ? document.documentElement.clientWidth : document.getElementsByTagName("body")[0].clientWidth;
                var t = e - 20, i = $("#scroller"), n = $("#scrollFrame");
                488 > e ? t >= te ? (i.addClass("hidden"), n.addClass("noScroll")) : (i.removeClass("hidden"), n.removeClass("noScroll")) : t >= ee ? (i.addClass("hidden"), n.addClass("noScroll")) : (i.removeClass("hidden"), n.removeClass("noScroll"))
            }

            function R(e) {
                var t = function (e, t) {
                    De[e].visible = t
                };
                t("address", e.address), t("email", e.contact_email), t("contactName", e.contact_name), t("phone", e.contact_phone), t("titleContainer", e.model_name), t("description", e.model_summary), t("coBrand", e.presented_by), t("highlight", e.highlight_reel), t("url", e.external_url), t("tourControls", e.tour_buttons), 1 === ae.specialEdition && (De.coBrand.visible = !1, De.highlight.visible = !1), ae.hideHighlights && (De.highlight.visible = !1)
            }

            function B(e) {
                $(".model-title").text(e.name);
                var t = $(".titleText");
                if (t.text(e.name), e.name.length > 19 && t.attr("title", e.name), $("head title").text(e.name + " - " + ae.pageTitle), oe.isMobile() ? $("#gui-fullscreen").css("display", "none") : $("[rel=tooltip]").tooltip({
                        delay: {
                            show: 50,
                            hide: 0
                        }, trigger: "hover", html: !1, viewport: {selector: "body", padding: 10}
                    }), De.coBrand.visible && e.hasOwnProperty("presented_by") && e.presented_by ? ($("#cobrandTitle").text(e.presented_by), $("#loaderCoBrandName").text(e.presented_by)) : De.coBrand.visible = !1, De.description.visible && e.hasOwnProperty("summary") && e.summary ? $("#meta-description").text(e.summary) : De.description.visible = !1, De.contact.visible) {
                    var i = [], n = !0, r = function (e, t) {
                        var r = t || "<br>";
                        n && (r = "", n = !1), i.push(r, e)
                    };
                    if (De.contactName.visible && e.hasOwnProperty("contact_name") && e.contact_name && ($("#contact-data").append('<span id="contactName"></span>').text(e.contact_name), n = !1), De.phone.visible && e.hasOwnProperty("contact_phone") && e.contact_phone) {
                        var o = e.contact_phone;
                        e.formatted_contact_phone && (o = e.formatted_contact_phone), r(oe.isMobile() ? '<a id="phone" href="callto:' + e.contact_phone + '">' + o + "</a>" : "<span>" + o + "</span>")
                    }
                    De.email.visible && e.hasOwnProperty("contact_email") && e.contact_email && r('<a id="email" href="mailTo:' + e.contact_email + '">' + e.contact_email + "</a>"), De.url.visible && e.hasOwnProperty("external_url") && e.external_url && r('<a id="url" target="blank" href="' + e.external_url + '">' + e.external_url + "</a>"), n ? De.contact.visible = !1 : $("#contact-data").append(i.join(""))
                }
                if (De.address.visible && e.hasOwnProperty("address") && e.address) {
                    var a = [], s = !1, l = !0, h = {};
                    if ("string" == typeof e.address)try {
                        h = JSON.parse(e.address)
                    } catch (c) {
                        Ie.warn("Unable to parse address data")
                    } else"object" == typeof e.address && (h = e.address);
                    var u = function (e, t) {
                        var i = t || " ";
                        l && (i = "", l = !1), a.push(i, e)
                    };
                    if (h.address_1 && u(h.address_1), h.address_2 && u(h.address_2), h.city && u(h.city, ", "), h.state && (s = !0, u(h.state, ", ")), h.zip) {
                        var d = ", ";
                        s && (d = " "), u(h.zip, d)
                    }
                    l ? De.address.visible = !1 : $("#addressTxt").text(a.join(""))
                } else De.address.visible = !1;
                $(".meta-toggle").on("click", function (e) {
                    p(e), C()
                }), $("#meta-description").find("a").on("click", function (e) {
                    se.trackAlways("USER", {event_type: "about_link"})
                }), $(".contact-info a").on("click", function (e) {
                    var t = {event_type: "about_link"};
                    switch ($(this).attr("id")) {
                        case"phone":
                            t.contact_type = "phone";
                            break;
                        case"email":
                            t.contact_type = "email"
                    }
                    se.trackAlways("USER", t)
                }), $(".address a").on("click", function (e) {
                    se.trackAlways("USER", {event_type: "map_link"})
                })
            }

            function O() {
                if (ae.mattertags.enableLinking) {
                    var e = (document.getElementById("gui"), document.createElement("div"));
                    e.id = "lightbox", e.classList.add("hidden"), e.classList.add("transparent"), e.innerHTML = '<a><div id="lightbox-close">&#10005;</div></a>\n<iframe id="lightbox-contents"></iframe>', gui.parentNode.insertBefore(e, gui);
                    var t = document.getElementById("lightbox-contents"), i = document.getElementById("lightbox-close"), n = function (i) {
                        e.classList.add("transparent"), t.src = "about:blank"
                    }, r = function (e) {
                        "lightbox" === e.target.id && e.target.classList.contains("transparent") && e.target.classList.add("hidden")
                    };
                    i.addEventListener("mousedown", n), i.addEventListener("touchstart", n), e.addEventListener("webkitTransitionEnd", r, !0), e.addEventListener("transitionend", r, !0)
                }
            }

            function F(e, t, i) {
                var n = $.Deferred(), r = n.resolve.bind(n);
                return Se = !0, V(e), e.data.player_options && R(e.data.player_options), ae.brand || (De.coBrand.visible = !1, De.contact.visible = !1), 1 === ae.specialEdition && ($("body").addClass("specialEdition"), De.coBrand.visible = !1), B(e.data), e.data.image && !i && _(e.data.image), t ? (se.impression(!0), Z(), i ? r() : g(r)) : ue.show(function () {
                    g(r), Z()
                }), n
            }

            function k(e, t, i, n) {
                e.outsideAllowed() || $("#gui-modes-outside").addClass("invisible"), he.navHelpSessionStart(i, n, d), ye.init(e, t, i), $(".icon").on("mouseover", function () {
                    t.player && t.player.reticule.hide()
                }), w(e, t), E(e, t), O(), M(e), e.heroLocations.length > 1 ? L(e, t, i) : (De.highlight.visible = !1, De.tourControls.visible = !1), K(), b(i), x(e), e.on("floor.changed", S), e.on("waiting", N.bind(this, e)), e.on("waiting-done", U.bind(this, e)), i.on(me.ModeChanged, function (e, t) {
                    b(i), e !== t && $(".vr-popup").is(":visible") && pe.dismiss()
                }), i.on(me.PanoChosen, function (e, t) {
                    b(i, t)
                }), i.controls[ge.PANORAMA].on("move", function () {
                    d("move")
                }), i.controls[ge.DOLLHOUSE].on("move", function () {
                    d("move")
                }), i.controls[ge.FLOORPLAN].on("move", function () {
                    d("move")
                }), t.on("update.controls", function () {
                    var n = t.describe();
                    De.tourControls.visible && (n.tourIsPlaying || i.isWarping() ? ($("#play").hide(), $("#pause").show(), n.tourIsPlaying && ($(".pinBottom").addClass("playing"), $("#drawer").addClass("playing"), $("#playHead").addClass("playing"))) : ($("#play").show(), $("#pause").hide(), $(".pinBottom").removeClass("playing"), $("#drawer").removeClass("playing"), $("#playHead").removeClass("playing")));
                    var r, o, a, s = $("#progressBar"), l = $("#thumb-container");
                    if (null !== n.currentItem) {
                        var h, c;
                        $("#status").find(".curIdx").text(n.currentItem + 1), n.onTheBus ? (h = "active", c = "recent") : (c = "active", h = "recent");
                        var u = null === n.destinationItem || n.currentItem === n.destinationItem;
                        for (r = 0; r < e.heroLocations.length; r += 1)a = l.find("[data-index='" + r + "']"), o = s.find("[data-idx='" + r + "']"), a.removeClass(c), o.removeClass(c), n.onTheBus && r === n.destinationItem ? (a.addClass(h), o.addClass(h), J.activate(r)) : n.onTheBus && u && r === n.currentItem ? (a.addClass(h), o.addClass(h)) : (a.removeClass(h), o.removeClass(h));
                    } else for (r = 0; r < e.heroLocations.length; r += 1)a = l.find("[data-index='" + r + "']"), o = s.find("[data-idx='" + r + "']"), a.removeClass("active"), a.removeClass("recent"), o.removeClass("active"), o.removeClass("recent")
                }), document.addEventListener("keydown", function (n) {
                    switch (n.which) {
                        case fe.ZERO:
                            ae.debug && e.toggleAlpha();
                            break;
                        case fe.ONE:
                            i.model.has360Views && !i.isInMode(ge.TRANSITIONING) ? i.isInMode(ge.PANORAMA) && i.currentPano.isAligned() || (i.controls[ge.PANORAMA].emit(ve.InteractionKey), t.tourIsPlaying ? t.stopTour() : i.goToLastView(!0)) : i.isInMode(ge.PANORAMA, ge.TRANSITIONING) || t.changeMode(ge.PANORAMA, "key");
                            break;
                        case fe.TWO:
                            e.outsideAllowed() && !i.isInMode(ge.DOLLHOUSE, ge.TRANSITIONING) && t.changeMode(ge.DOLLHOUSE, "key");
                            break;
                        case fe.THREE:
                            e.outsideAllowed() && !i.isInMode(ge.FLOORPLAN, ge.TRANSITIONING) && t.changeMode(ge.FLOORPLAN, "key");
                            break;
                        case fe.FOUR:
                            i.model.has360Views && !i.isInMode(ge.TRANSITIONING) && (!i.isInMode(ge.PANORAMA) || i.currentPano.isAligned()) && (i.controls[ge.PANORAMA].emit(ve.InteractionKey), t.tourIsPlaying ? t.stopTour() : i.goToLastView(!1));
                            break;
                        case fe.SPACE:
                            ae.debug && e.toggleExplode();
                            break;
                        case fe.RETURN:
                            ae.debug && e.toggleExplodeUp();
                            break;
                        case fe.P:
                            Q();
                            break;
                        case fe.U:
                            j()
                    }
                    return i && i.reticule.hide(), !0
                }.bind(this)), W(e), z(e, t.player)
            }

            function N(e) {
                V(e)
            }

            function U(e) {
                V(e)
            }

            function V(e) {
                var t = e.waitQueue.length;
                0 >= t ? y() : Se || A(ae.modelComponentLoadSpinnerDelay)
            }

            function z(e, t) {
                Te = {gui: null, visible: !1, model: e, player: t}
            }

            function G(e, t) {
                function i() {
                    n.linkToLocation = window.location.protocol + "//" + window.location.host + window.location.pathname + "?m=" + e.sid + "&start=" + t.serialize(), (ae.mattertags.enableLinking || ae.navTagsEnabled) && (n.tagNav = "#tn=" + t.serialize()), t.mattertagManager.activeTag && (n.linkToLocation += "&tag=" + t.mattertagManager.activeTag.sid)
                }

                var n = {}, r = new Ce.GUI({autoPlace: !0, width: "60%"});
                setInterval(i, 500), i(), r.add(n, "linkToLocation").name("Link to location").listen(), ae.mattertags.enableLinking && r.add(n, "tagNav").name("Tag Navigation Link").listen(), r.domElement.id = "datLinks";
                var o = [].slice.call(r.domElement.querySelectorAll(".property-name"));
                return o.forEach(function (e) {
                    if (!oe.detectSafari()) {
                        var t = document.createElement("button");
                        t.classList.add("btn-deep-link"), t.innerText = "Copy", e.nextSibling.appendChild(t);
                        var i = function () {
                            alert("Please use CTRL/CMD + C to copy."), t.hide()
                        };
                        t.addEventListener("click", function (e) {
                            try {
                                var t = e.target.parentNode.childNodes[0];
                                t.select();
                                var n = document.execCommand("copy");
                                t.blur(), n || i()
                            } catch (r) {
                                i()
                            }
                        })
                    }
                }), $(r.__closeButton).hide(), r
            }

            function H(e) {
                Te.gui || (Te.gui = G(Te.model, Te.player)), Te.visible = e, e ? $(Te.gui.domElement).show() : $(Te.gui.domElement).hide()
            }

            function j() {
                H(!Te.visible)
            }

            function W(e) {
                Me = {gui: null, visible: !1, model: e}
            }

            function Y(e) {
                var t = new Ce.GUI;
                return t.add(ae, "showSweeps").name("Show sweeps").onFinishChange(function () {
                    e.setSweepVisibility(ae.showSweeps)
                }), t.add(ae, "rotationAccelerationInside", .1, 10).name("Rotation speed").step(.1), t.add(ae.transition, "flyTime", 0, 5e3).name("Transition time").onFinishChange(function () {
                    ae.transition.flySpeed = 0, t.__controllers.forEach(function (e) {
                        e.updateDisplay()
                    })
                }), t.add(ae.path, "opacity", 0, 1).name("Path opacity"), $(t.__closeButton).hide(), t
            }

            function X(e) {
                Me.gui || (Me.gui = Y(Me.model)), Me.visible = e, e ? $(Me.gui.domElement).show() : $(Me.gui.domElement).hide()
            }

            function Q() {
                X(!Me.visible)
            }

            function Z() {
                function e(e) {
                    e.target === t || $.contains(t, e.target) || e.preventDefault()
                }

                $("body").css("touch-action", "none"), $("#gui-parent").find("*").on("touchmove", function (e) {
                    e.preventDefault()
                });
                var t = document.getElementById("terms-text");
                ae.useWheel && (document.body.addEventListener("mousewheel", e), document.body.addEventListener("DOMMouseScroll", e)), $(t).off("touchmove").on("touchmove", function (e) {
                    e.stopPropagation()
                })
            }

            function q(e, t) {
                for (var i = []; e;)i.push(e), e = e.parentNode;
                for (; t && -1 === i.indexOf(t);)t = t.parentNode;
                return t
            }

            function K() {
                var e, t = function (t) {
                    e = 0 === t.button || 1 === t.which ? t.target : null
                }, i = function (t) {
                    e !== t.target && (e = q(e, t.target));
                    var i = document.getElementById("gui-parent");
                    if (q(i, e) !== i && (e = null), e) {
                        var n;
                        try {
                            n = new MouseEvent("click", t)
                        } catch (r) {
                            n = document.createEvent("MouseEvents"), n.initMouseEvent("click", t.bubbles, t.cancelable, t.view, t.detail, t.screenX, t.screenY, t.clientX, t.clientY, t.ctrlKey, t.altKey, t.shiftKey, t.metaKey, t.button, t.relatedTarget)
                        }
                        n.syntheticClick = !0, e.dispatchEvent(n), e = null
                    }
                };
                document.body.addEventListener("mousedown", t, !0), document.body.addEventListener("mouseup", i, !0), document.getElementById("gui-parent").addEventListener("click", function (e) {
                    e.syntheticClick || e.stopPropagation()
                }, !0)
            }

            var J, ee, te, ie, ne, re = (e("three"), e("../util/ajax")), oe = e("../util/browser"), ae = e("../settings"), se = e("../analytics"), le = (e("../util/transitions"), e("../util/camera"), e("../util/logger")), he = (e("../objects/Snapshot"), e("./help")), ce = e("./loadingScreen"), ue = e("./playButton"), de = e("./tagLinks"), pe = e("./vrModal"), fe = e("../enum/Keys"), ge = e("../enum/Viewmode"), me = (e("../enum/LinkDestination"), e("../enum/BlackoutStyle"), e("../enum/PathDiscardMode"), e("../enum/PathDisplayMode"), e("../enum/PlayerEvents")), ve = e("../enum/ControlEvents"), Ae = (e("../enum/Vectors"), e("../enum/WarpStyle"), e("../enum/AlignmentType"), e("../enum/VROption")), ye = e("./konami"), Ce = e("../lib/dat.gui"), Ie = new le(i), be = (e("../util/showcase"), ge.DOLLHOUSE), we = 0, xe = 0, Ee = [".hideTarget"], Me = null, Te = null, Se = !1, Pe = !1, _e = !1, Le = !1, De = {
                titleContainer: {
                    visible: !0,
                    elements: ["#model-title"]
                },
                coBrand: {visible: !0, elements: [".co-brand", "#loaderCoBrand"]},
                metaInfo: {visible: !0, elements: ["#meta-info", "#more-hint", "#less-hint"]},
                description: {visible: !0, elements: ["#meta-description"]},
                contact: {visible: !0, elements: [".contact-info"]},
                email: {visible: !0, elements: ["#email"]},
                address: {visible: !0, elements: [".address"]},
                phone: {visible: !0, elements: ["#phone"]},
                contactName: {visible: !0, elements: ["#contactName"]},
                url: {visible: !0, elements: ["#url"]},
                help: {visible: !0, elements: [".nav-help", "#nav-help"]},
                tourControls: {visible: !0, elements: [".next", ".previous", "#play"]},
                highlight: {visible: !0, elements: ["#drawer", "#pullTab"]},
                share: {visible: !0, elements: [".socialButton", "#share"]},
                fullScreen: {visible: !0, elements: ["#gui-fullscreen"]},
                floors: {visible: !0, elements: [".gui-floor"]}
            };
            $(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange", function (e) {
                $("#gui-fullscreen").toggle(!oe.isFullscreen()), $("#gui-fullscreen-exit").toggle(!!oe.isFullscreen()), setTimeout(function () {
                    $(".icon:visible").hide().show(0)
                }, 100)
            }), $("#gui-fullscreen").find("a").on("click", function (e) {
                p(e), oe.requestFullscreen($("body")[0]), se.track("USER", {
                    event_type: "showcase_gui",
                    gui_action: "click_enter_fullscreen",
                    interaction_source: "gui"
                }), J.reload()
            }), $("#gui-fullscreen-exit").find("a").on("click", function (e) {
                p(e), oe.exitFullscreen(), se.track("USER", {
                    event_type: "showcase_gui",
                    gui_action: "click_exit_fullscreen",
                    interaction_source: "gui"
                })
            }), $(window).on("resize", function (e) {
                var t = e.target.innerHeight, i = e.target.innerWidth;
                (t !== ie || i !== ne) && (De.highlight.visible && D(), d("resize"), $(".pinTop.right").removeClass("hideUnderMeta"), f(), ie = t, ne = i)
            }).resize(), oe.supportsFullscreen() || $("#gui-fullscreen").hide(), $("#title-toggle").on("click", I), $("#pullTab").on("click", function (e) {
                p(e), $("#drawer").hasClass("open") ? (se.trackAlways("USER", {
                    event_type: "showcase_gui",
                    gui_action: "hide_highlight_reel"
                }), $(this).addClass("open")) : (se.trackAlways("USER", {
                    event_type: "showcase_gui",
                    gui_action: "show_highlight_reel"
                }), $(this).removeClass("open")), a()
            }), $("#more-menu-button").on("click", function (e) {
                p(e);
                var t = $("#more-menu");
                t.toggleClass("open")
            }), $(".shareContainer > div.icoContainer > a").on("click", function (e) {
                p(e), d("share");
                var t = {event_type: "showcase_gui", gui_action: "share"};
                switch ($(this).attr("class")) {
                    case"faceBookLink":
                        t.site = "facebook";
                        break;
                    case"twitterLink":
                        t.site = "twitter";
                        break;
                    case"shareTextLink":
                        t.site = "link";
                        break;
                    default:
                        return
                }
                se.trackAlways("USER", t)
            }), $(".terms").on("click", function (e) {
                p(e), d("terms"), $('#terms-text').html($("#termsContent").html()), $("#terms-modal").fadeIn(ae.guiAnimationSpeed)
            }), $("#terms-modal .btn").on("click", function (e) {
                p(e), $("#terms-modal").fadeOut(ae.guiAnimationSpeed)
            }), t.exports.init = k, t.exports.startLoading = F, t.exports.endLoading = v, t.exports.onProgress = m
        }).call(this, "/js/gui/gui.js")
    }, {
        "../analytics": 3,
        "../enum/AlignmentType": 15,
        "../enum/BlackoutStyle": 16,
        "../enum/ControlEvents": 18,
        "../enum/Keys": 23,
        "../enum/LinkDestination": 24,
        "../enum/PathDiscardMode": 30,
        "../enum/PathDisplayMode": 31,
        "../enum/PlayerEvents": 32,
        "../enum/VROption": 38,
        "../enum/Vectors": 41,
        "../enum/Viewmode": 42,
        "../enum/WarpStyle": 43,
        "../lib/dat.gui": 61,
        "../objects/Snapshot": 116,
        "../settings": 123,
        "../util/ajax": 138,
        "../util/browser": 139,
        "../util/camera": 140,
        "../util/logger": 146,
        "../util/showcase": 150,
        "../util/transitions": 152,
        "./help": 51,
        "./konami": 52,
        "./loadingScreen": 53,
        "./playButton": 54,
        "./tagLinks": 55,
        "./vrModal": 57,
        three: 175
    }],
    51: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                return $(".nav-help-dialog").is(":hidden")
            }

            function r(e, t) {
                w[e] && delete w[e];
                var i = C.isMobile() ? M[e] : E[e];
                if (i) {
                    var n = $(".nav-help-elements"), a = n.find(".prev-button"), s = n.find(".next-button"), l = i.length / 2;
                    if (!(1 > t || t > l)) {
                        var h = i[2 * t - 1], c = '<img class="icon" src="/resources/images/' + h + '" title="navigation icon">';
                        n.find(".nav-icon").html(c);
                        var u = i[2 * t - 2];
                        n.find(".nav-text").html(u), n.find(".page-count").text(t + " / " + l), b = t, $(".nav-help-dialog .close").off().on("click", function (e) {
                            e.preventDefault(), e.stopImmediatePropagation(), A.track("USER", {
                                event_type: "showcase_gui",
                                gui_action: "help_close"
                            }), o()
                        }), a.off(), 1 === t ? a.hide() : a.show().on("click", function (i) {
                            i.preventDefault(), i.stopImmediatePropagation(), A.track("USER", {
                                event_type: "showcase_gui",
                                gui_action: "help_prev"
                            }), r(e, --t)
                        }), s.off(), t === l ? $(".nav-help-elements .next-button").text("GOT IT").on("click", function (e) {
                            e.preventDefault(), e.stopImmediatePropagation(), A.track("USER", {
                                event_type: "showcase_gui",
                                gui_action: "help_done"
                            }), o()
                        }) : s.text("NEXT").on("click", function (i) {
                            i.preventDefault(), i.stopImmediatePropagation(), A.track("USER", {
                                event_type: "showcase_gui",
                                gui_action: "help_next"
                            }), r(e, ++t)
                        }), $(window).resize(), $(".nav-help-dialog").fadeIn()
                    }
                }
            }

            function o() {
                var e = $(".nav-help-dialog");
                e.fadeOut(1e3, function () {
                    x("help-dismissed")
                }), b = 0
            }

            function a(e, t, i) {
                x = i;
                var o = t.pano, a = t.mode;
                e.model.has360Views && a === m.PANORAMA && !o.isAligned() && (a = m.OUTDOOR);
                var g;
                try {
                    g = window.localStorage.getItem("visitCount") || "0", g = (parseFloat(g) + 1).toString(), window.localStorage.setItem("visitCount", g), I.debug("visitCount = " + g)
                } catch (C) {
                    g = "1"
                }
                (null === y.autohelp && "1" === g || "1" === y.autohelp) && (w[a] = !0, w[m.PANORAMA] = !0, e.model.has360Views && (w[m.OUTDOOR] = !0), a === m.PANORAMA && e.model.outsideAllowed() || setTimeout(function () {
                    x("help"), r(a, 1)
                }, 3e3)), e.model.data.player_options && (e.model.heroLocations.length > 0 && (e.model.data.player_options.tour_buttons && s(a), e.model.data.player_options.highlight_reel && (e.model.has360Views ? h(a) : l(a))), (a === m.DOLLHOUSE || a === m.FLOORPLAN || a === m.OUTDOOR) && c(a), d(e, a) && u(a)), $(".nav-help").on("mouseup touchend", function (t) {
                    if (t.preventDefault(), t.stopPropagation(), $("#more-menu").removeClass("open"), x("help"), A.track("USER", {
                            event_type: "showcase_gui",
                            gui_action: "help_open"
                        }), n()) {
                        var i = e.model.has360Views && e.mode === m.PANORAMA ? e.currentPano.isAligned() ? m.PANORAMA : m.OUTDOOR : e.mode;
                        r(i, 1)
                    }
                }), e.on(v.ModeChanging, f), e.on(v.PanoChosen, p)
            }

            function s(e) {
                E[e].push("Click the play button to get a guided tour", "Nav_Help_Play.png"), M[e].push("Click the play button to get a guided tour", "Nav_Help_Touch_Play.png")
            }

            function l(e) {
                E[e].push("Click the highlights button to view highlights of the space", "Nav_Help_Highlights.png"), M[e].push("Tap the highlights button to view highlights of the space", "Nav_Help_Touch_Highlights.png")
            }

            function h(e) {
                E[e].push("Click the thumbnails to view highlights of the space", "Nav_Help_HLR.png"), M[e].push("Tap the thumbnails to view highlights of the space", "Nav_Help_Touch_HLR.png")
            }

            function c(e) {
                E[e].push("Click the walking button to explore the 3D space", "Nav_Help_Inside.png"), M[e].push("Tap the walking button to explore the 3D space", "Nav_Help_Touch_Inside.png")
            }

            function u(e) {
                E[e].push("Click the dollhouse button to see the whole space", "Nav_Help_New_dollhouse.png"), M[e].push("Tap the dollhouse button to see the whole space", "Nav_Help_Touch_Dollhouse.png")
            }

            function d(e, t) {
                var i = $(window).width() < 488;
                return (t === m.PANORAMA || t === m.OUTDOOR) && e.model.outsideAllowed() && !(i && e.model.has360Views && t === m.OUTDOOR)
            }

            function p(e, t) {
                var i = t.isAligned() ? m.PANORAMA : m.OUTDOOR;
                (w[i] || !n()) && setTimeout(function () {
                    x("help"), r(i, 1)
                }, 1.1 * y.panorama.transitionTime)
            }

            function f(e, t) {
                if (!n()) {
                    var i = this;
                    if (e === m.PANORAMA && t === m.DOLLHOUSE) {
                        var a = C.isMobile() ? M[e] : E[e], s = a ? a.length / 2 : 0;
                        if (b === s)return $(".nav-help-dialog .close").off().on("click", function (e) {
                            e.preventDefault(), e.stopPropagation(), A.track("USER", {
                                event_type: "showcase_gui",
                                gui_action: "help_close"
                            }), o(), setTimeout(function () {
                                i.insideMode()
                            }, 1e3)
                        }), $(".nav-help-elements .next-button").off().on("click", function (e) {
                            e.preventDefault(), e.stopPropagation(), A.track("USER", {
                                event_type: "showcase_gui",
                                gui_action: "help_done"
                            }), o(), setTimeout(function () {
                                i.insideMode()
                            }, 1e3)
                        }), void $(".nav-help-elements .prev-button").off().on("click", function (e) {
                            e.preventDefault(), e.stopPropagation(), A.track("USER", {
                                event_type: "showcase_gui",
                                gui_action: "help_prev"
                            }), T = !0, i.insideMode()
                        })
                    }
                    return e === m.DOLLHOUSE && t === m.PANORAMA && T ? (T = !1, void r(m.PANORAMA, b - 1)) : void(e !== t && (T = !1, o()))
                }
            }

            var g = e("./../util/logger"), m = e("./../enum/Viewmode"), v = e("./../enum/PlayerEvents"), A = (e("../enum/AlignmentType"), e("./../analytics")), y = e("./../settings"), C = e("./../util/browser"), I = new g(i), b = 0, w = {}, x = null, E = {};
            E[m.PANORAMA] = ["Use the arrow keys to move", "Nav_Help_Arrow_keys.png", "Click & drag the mouse to explore the 3D space", "Nav_Help_Left_Mouse.png"], E[m.DOLLHOUSE] = ["Use the arrow keys to explore the space", "Nav_Help_Arrow_keys.png", "Go to a room by clicking on it. Click and drag to pan.", "Nav_Help_Left_Mouse.png"], E[m.FLOORPLAN] = ["Use the Left or Right key to rotate", "Nav_Help_LeftRight_Keys.png", "Use the Up or Down key to zoom", "Nav_Help_UpDown_Keys.png", "Click to explore", "Nav_Help_Left_Mouse.png"], E[m.OUTDOOR] = ["Drag the mouse to look around the 360º view", "Nav_Help_Left_Mouse.png"];
            var M = {};
            M[m.PANORAMA] = ["Tap where you want to go", "Nav_Help_Tap.png", "Drag to move", "Nav_Help_Drag_Turn.png"], M[m.DOLLHOUSE] = ['Tap "View floor plan" below to see the whole space', "Nav_Help_Tap.png", "Drag to rotate", "Nav_Help_Drag_Rotate.png"], M[m.FLOORPLAN] = ['Tap "View dollhouse" below to see the whole space', "Nav_Help_Tap.png", "Drag to rotate", "Nav_Help_Drag_Pan.png"], M[m.OUTDOOR] = ["Drag to look around the 360º view", "Nav_Help_Drag_Turn.png"];
            var T = !1;
            t.exports.navHelpSessionStart = a, t.exports.closeHelp = o
        }).call(this, "/js/gui/help.js")
    }, {
        "../enum/AlignmentType": 15,
        "./../analytics": 3,
        "./../enum/PlayerEvents": 32,
        "./../enum/Viewmode": 42,
        "./../settings": 123,
        "./../util/browser": 139,
        "./../util/logger": 146
    }],
    52: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t, i) {
                l.debug("konami has the modelInstance");
                var n = [];
                $(window).on("keydown", function (e) {
                    n.push(e.which), n.length > o.secretPanelWord.length && n.shift(), s.equalLists(n, o.secretPanelWord) && (l.debug("Developer mode active."), o.debug = !0)
                }), $(window).on("keydown", function r(n) {
                    o.debug && 72 == n.which && (e && i ? (a.toggle(e, t, i), $(window).off("keydown", r)) : console.warn("sorry we're not ready yet"))
                })
            }

            var r = e("./../util/logger"), o = e("./../settings"), a = e("./debug"), s = e("./../util/common"), l = (e("./gui"), new r(i));
            o.console && $("body").append('<div id="debug-console"></div>'), t.exports.init = n
        }).call(this, "/js/gui/konami.js")
    }, {"./../settings": 123, "./../util/common": 142, "./../util/logger": 146, "./debug": 48, "./gui": 50}],
    53: [function (e, t, i) {
        "use strict";
        var n = e("./circleLoader").circleLoader;
        t.exports = {
            element: $("#gui-loading"), hide: function (e) {
                n.done(), this.element.fadeOut(2500, e)
            }, show: function (e) {
                this.element.fadeIn(500, function () {
                    this.element.css("display", "table"), e && e()
                }.bind(this))
            }, progress: function (e) {
                n.set(e)
            }
        }
    }, {"./circleLoader": 47}],
    54: [function (e, t, i) {
        "use strict";
        var n = e("../util/browser"), r = e("../analytics");
        t.exports = {
            show: function (e) {
                $("#gui-message").fadeIn(250, function () {
                    $(this).css("display", "table");
                    var e = $("#gui-message").fracs().visible >= .5;
                    r.impression(e)
                }), $("#button-play").on("click", function (t) {
                    return n.inIframe() && n.isMobile() ? void(top.location.href = self.location.href) : void $("#gui-message").fadeOut(500, function () {
                        e()
                    })
                })
            }
        }
    }, {"../analytics": 3, "../util/browser": 139}],
    55: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                var t = [].slice.call(document.getElementById("tag-billboards").querySelectorAll("a"));
                g = t.length, t.forEach(function (t) {
                    t.addEventListener("click", r.bind(t, e))
                })
            }

            function r(e, t) {
                var i = d.mattertags.linkDestination;
                this.target = "ShowcasePopup";
                var n = this.getAttribute("href"), r = this.getAttribute("data-linktype"), h = this.getAttribute("data-tagid");
                m[h] = !0;
                var u = {
                    event_type: "click_mattertag_link",
                    link_type: "",
                    link_count: g,
                    links_clicked: Object.keys(m).length
                };
                if (d.mattertags.linkDestination !== c.tab && t.preventDefault(), "pano" === r)return u.link_type = "navigation", l.trackAlways("USER", u), o(e, n);
                switch (d.mattertags.linkDestination) {
                    case c.iframe:
                        a(n);
                        break;
                    case c.tab:
                        this.target = "_blank";
                        break;
                    case c.window:
                        s(n);
                        break;
                    default:
                        "model" === r ? (i = "in_place", window.location.replace(n)) : (i = c.window, s(n))
                }
                u.link_type = r, u.link_destination = i, l.trackAlways("USER", u)
            }

            function o(e, t) {
                var i = h.optionsFromString(t);
                if (i)if (i.mode === u.PANORAMA) {
                    try {
                        e.model.panos.get(i.panoId)
                    } catch (n) {
                        return void f.warn("Unable to find panorama location", i.panoId)
                    }
                    e.warpToPanoById(i.panoId, i.quaternion)
                } else {
                    var r = {
                        cameraMode: i.mode,
                        position: i.position,
                        quaternion: i.quaternion,
                        scanId: "",
                        orthoZoom: -1,
                        floorVisibility: [],
                        thumbUrl: null,
                        name: null,
                        isHero: !1
                    };
                    e.flyToNewMode({mode: i.mode, duration: d.warp.outsideTime, warpDest: new Snapshot(r), force: !0})
                }
            }

            function a(e) {
                var t = document.getElementById("lightbox");
                t.classList.remove("hidden"), setTimeout(function () {
                    t.classList.remove("transparent")
                }, 10), document.getElementById("lightbox-contents").src = e
            }

            function s(e) {
                window.open(e, "_blank", "resizable,scrollbars")
            }

            var l = e("../analytics"), h = (e("../util/browser"), e("../util/camera")), c = e("../enum/LinkDestination"), u = e("../enum/Viewmode"), d = e("../settings"), p = e("../util/logger"), f = new p(i), g = 0, m = {};
            t.exports.attachMattertagLinks = n
        }).call(this, "/js/gui/tagLinks.js")
    }, {
        "../analytics": 3,
        "../enum/LinkDestination": 24,
        "../enum/Viewmode": 42,
        "../settings": 123,
        "../util/browser": 139,
        "../util/camera": 140,
        "../util/logger": 146
    }],
    56: [function (e, t, i) {
        "use strict";
        function n(e, t, i) {
            f("USER", {event_type: "showcase_gui", gui_action: "launch_vr", vr_platform: e, vr_app: t});
            var n = m + "&m=" + i.sid;
            switch (t) {
                case u.Cardboard:
                    n += "&display=cardboard";
                    break;
                case u.GearVR:
                    n += "&display=gearvr"
            }
            switch (e) {
                case d.Android:
                    r(t, i, n);
                    break;
                case d.IOS:
                    o(t, i, n);
                    break;
                default:
                    a(n)
            }
        }

        function r(e, t, i) {
            function n() {
                var e = "scheme=mpvr;", t = "S.browser_fallback_url=" + i + ";", n = "intent://" + f + "/#Intent;" + e + t + "end";
                window.location.href = n
            }

            function r() {
                window.location.href = "mpvr://" + f, s = setTimeout(function () {
                    document.hidden || document.webkitHidden || (window.location.href = i)
                }, 1500)
            }

            function o() {
                h || (h = document.createElement("iframe"), h.style.height = "1px", h.style.width = "1px", h.style.visibility = "hidden"), l = setTimeout(function () {
                    document.hidden || document.webkitHidden || (window.location.href = i)
                }, 1500), document.body.appendChild(h), h.src = "mpvr://" + f
            }

            var a, d, p = "?ret=" + g;
            switch (e) {
                case u.Cardboard:
                    a = "com.matterport.mpvrcardboard/", p += "&display=cardboard";
                    break;
                case u.GearVR:
                    a = "com.matterport.vrshowcase/", p += "&display=gearvr"
            }
            c.valueFromHash("vrcoll", !1) === !0 ? (d = "vr/dlist/", p += "&sids=" + t.sid + "&lsid=" + t.sid + "&ln=" + t.name + "&ld=" + t.summary) : (d = "vr/show/", p += "&m=" + t.sid);
            var f = a + d + p;
            c.detectChrome() ? n() : c.detectFirefox() ? r() : o()
        }

        function o(e, t) {
            var i = "" + t.sid, n = "", r = Date.now();
            s = setTimeout(function () {
                Date.now() - r > 1600 || window.open(n)
            }, 1500), window.location.href = i
        }

        function a(e) {
            window.open(e)
        }

        var s, l, h, c = e("../util/browser"), u = e("../enum/VRApps"), d = e("../enum/VRPlatforms"), p = e("../analytics"), f = p.trackAlways, g = encodeURI(document.referrer) || encodeURI(window.location.href), m = "https://my.matterport.com/vr/show/?ret=" + g;
        window.addEventListener("blur", function (e) {
            clearTimeout(s), clearTimeout(l), h && h.parentNode && h.parentNode.removeChild(h)
        }), t.exports.launch = n
    }, {"../analytics": 3, "../enum/VRApps": 37, "../enum/VRPlatforms": 40, "../util/browser": 139}],
    57: [function (e, t, i) {
        "use strict";
        function n() {
            if (c.detectIOS())return !1;
            var e;
            return c.detectAndroid() ? (e = c.androidVersion(), e.major > 4 || 4 === e.major && e.minor > 4 || 4 === e.major && 4 === e.minor && e.patch >= 4) : !1
        }

        function r(e, t) {
            function i(t) {
                switch (t !== f.AfterLastPage && (a(t), $(".vr-page").text(t + " / " + f.LastPage)), t) {
                    case f.Title:
                        $(".vr-buttons .prev-button").css("display", "none"), $(".vr-buttons .next-button").text(s[t]), o(e.sid, r);
                        break;
                    case f.Cardboard:
                        $(".vr-buttons .prev-button").css("display", "block"), $(".vr-buttons .next-button").text(s[t]), $(".vr-popup .img-container.cardboard").off(), $(".vr-popup .img-container.gearvr").off(), l(w, E, T);
                        break;
                    case f.Gear:
                        $(".vr-buttons .next-button").text(s[t]), l(x, b, M);
                        break;
                    case f.AfterLastPage:
                        $(".vr-popup").fadeOut(g.guiAnimationSpeed)
                }
                $("img").filter("[src='']").hide()
            }

            var r = function () {
                return c.detectAndroid() ? n() ? ($(".vr-popup").addClass("supported"), y = ".show-supported", p.Android) : ($(".vr-popup").addClass("unsupported"), y = ".show-unsupported", p.UnsupportedAndroid) : c.detectIOS() ? ($(".vr-popup").addClass("ios"), y = ".show-ios", p.IOS) : ($(".vr-popup").addClass("desktop"), y = ".show-desktop", p.Desktop)
            }();
            r !== p.Desktop && $(".vr-popup").addClass("mobile"), $(".show-supported, .show-unsupported, .show-ios, .show-desktop").hide(), $(y).show();
            var s = ["", "LEARN MORE", "NEXT", "GOT IT"], m = ["", "vr_modal_learn_more", "vr_modal_next", "vr_modal_done"];
            $("#vr").on("click", function (e) {
                e.preventDefault(), v("USER", {
                    event_type: "showcase_gui",
                    gui_action: "click_vr_button"
                }), $(".vr-popup").is(":hidden") ? (A = 1, i(A), $(".vr-popup").fadeIn(g.guiAnimationSpeed), t("vr")) : h()
            });
            var C = "https://my.matterport.com/vr/show/?m=" + e.sid;
            $(".cardboardLink").on("click", u.launch.bind(this, r, d.Cardboard, e)), $(".gearLink").on("click", u.launch.bind(this, r, d.GearVR, e)), $("span.modelLink").text(C), $(".vr-buttons .prev-button").on("click", function (e) {
                v("USER", {event_type: "showcase_gui", gui_action: "vr_modal_prev"}), A--, i(A)
            }), $(".vr-buttons .next-button").on("click", function (e) {
                $(".vr-buttons .next-button").text();
                v("USER", {event_type: "showcase_gui", gui_action: m[A]}), A++, i(A)
            }), $(".vr-popup .close").on("click", h)
        }

        function o(e, t) {
            switch ($(".vr-popup .img-container.cardboard").off().on("click", u.launch.bind(this, t, d.Cardboard, e)), $(".vr-popup .img-container.gearvr").off().on("click", u.launch.bind(this, t, d.GearVR, e)), t) {
                case p.Android:
                    s(w, x, "logo-button", "same-line");
                    break;
                case p.UnsupportedAndroid:
                    s("", E, "", "");
                    break;
                case p.IOS:
                    s(I, C, "", "same-line");
                    break;
                case p.Desktop:
                    s(w, x, "logo-button", "same-line")
            }
        }

        function a(e) {
            $(".p1, .p2, .p3").hide(), $(".vr-popup .vr-popup-body").insertAfter(".vr-popup .vr-images"), $(".vr-popup").removeClass("front-page"), $(".vr-popup").removeClass("details-page"), $(".vr-popup .img-container").removeClass("logo-button"), $(".vr-popup .img-container").removeClass("same-line"), $(".vr-popup .vr-sm-image").attr("src", ""), $(".vr-popup .vr-sm-image").css("display", "inline-block"), $(".p" + e + y).show()
        }

        function s(e, t, i, n) {
            $(".vr-popup").addClass("front-page"), $(".vr-sm-image.first").attr("src", e), $(".vr-sm-image.second").attr("src", t), $(".vr-popup .img-container.first").addClass(i), $(".vr-popup .img-container.second").addClass(i), $(".vr-popup .img-container").addClass(n), ".show-desktop" === y && $(".vr-popup .vr-images").insertAfter(".vr-popup .vr-popup-body")
        }

        function l(e, t, i) {
            $(".vr-popup .inner").addClass("details-page"), $(".vr-popup").addClass("details-page"), $(".vr-popup .vr-sm-image.first").attr("src", e), $(".vr-popup .vr-sm-image.second").attr("src", t), $(".vr-popup .vr-sm-image.third").attr("src", i)
        }

        function h() {
            v("USER", {
                event_type: "showcase_gui",
                gui_action: "vr_modal_close"
            }), $(".vr-popup").fadeOut(g.guiAnimationSpeed)
        }

        var c = e("../util/browser"), u = e("./vrLink"), d = e("../enum/VRApps"), p = e("../enum/VRPlatforms"), f = e("../enum/VRPages"), g = e("../settings"), m = e("../analytics"), v = m.trackAlways, A = 1, y = null, C = "images/badge-oculus.png", I = "images/badge-cardboard.png", b = "images/logo-samsung.png", w = "images/headset-cardboard.png", x = "images/headset-gearvr.png", E = "images/ico-android-robot.png", M = "images/ico-gearvr.png", T = "images/ico-vr.png";
        $(window).resize(function () {
            c.aspectRatio() > 1 && c.isMobile() ? $(".vr-popup").removeClass("portrait").addClass("landscape") : $(".vr-popup").removeClass("landscape").addClass("portrait")
        }), t.exports.init = r, t.exports.dismiss = h
    }, {
        "../analytics": 3,
        "../enum/VRApps": 37,
        "../enum/VRPages": 39,
        "../enum/VRPlatforms": 40,
        "../settings": 123,
        "../util/browser": 139,
        "./vrLink": 56
    }],
    58: [function (e, t, i) {
        "use strict";
        function n(e, t, i, n, o) {
            n || 0 === n ? this.floorId = n : this.floorId = -1, this.roomId = o || "", this.labelId = e, this.position = (new r.Vector3).copy(t), this.text = i
        }

        var r = e("three"), o = e("../util/browser");
        n.prototype.build = function () {
            var e = window.document.createElement("div");
            o.isMobile() ? e.setAttribute("class", "gui-floorplan-label gui-floorplan-label-mobile") : e.setAttribute("class", "gui-floorplan-label");
            var t = window.document.createElement("div");
            t.setAttribute("class", "gui-floorplan-label-text");
            var i = window.document.createTextNode(this.text);
            t.appendChild(i), e.appendChild(t), window.document.body.appendChild(e), this.labelGui = e, this.textBlock = t, $(this.labelGui).hide();
            var n = window.getComputedStyle(this.labelGui);
            this.initialTransform = n.transform || n.webkitTransform
        }, t.exports = n
    }, {"../util/browser": 139, three: 175}],
    59: [function (e, t, i) {
        "use strict";
        function n() {
            this.player = null, this.modelManager = null, this.container = null
        }

        var r = e("three"), o = (e("../util/common"), e("../enum/PlayerEvents")), a = (e("../enum/DirectorEvents"), e("../enum/ModelManagerEvents")), s = e("../settings"), l = e("../enum/Viewmode"), h = (e("../enum/WarpStyle"), e("../util/transitions"), e("../util/lerp"), e("../util/browser"));
        n.prototype.init = function (e, t, i) {
            this.player = e, this.modelManager = t, this.container = i, this.updateModel(), this.bindEvents()
        }, n.prototype.bindEvents = function () {
            this.modelManager.on(a.ActiveModelChanged, this.updateModel.bind(this)), this.player.on(o.ViewChanged, this.handlePlayerViewChanged.bind(this)), this.player.on(o.ModeChanged, this.handlePlayerViewChanged.bind(this)), this.player.on(o.StartInside, this.handleStartInside.bind(this)), this.player.on(o.StartOutside, this.handleStartOutside.bind(this))
        }, n.prototype.updateModel = function () {
            this.model = this.modelManager.getActiveModel()
        }, n.prototype.handlePlayerViewChanged = function () {
            this.updateLabelVisibility(), this.updateLabelDisplay()
        }, n.prototype.getLabelsForFloor = function (e, t) {
            return t = t || [], t.length = 0, this.model.labels.forEach(function (i) {
                this.labelVisibleForFloor(i, e) && t.push(i)
            }.bind(this)), t
        }, n.prototype.getLabelsForCurrentFloor = function (e) {
            return this.getLabelsForFloor(this.model.currentFloor.floorIndex, e)
        }, n.prototype.labelVisibleForFloor = function (e, t) {
            return (e.roomId && e.floorId === t || this.model.allFloorsVisible) && this.model.showingLabels && e.labelGui && (h.isMobile() && this.player.getZoom() < s.labels.zoomHideThreshhold.mobile || !h.isMobile() && this.player.getZoom() < s.labels.zoomHideThreshhold.desktop)
        }, n.prototype.updateLabelVisibility = function (e) {
            this.model.labels.forEach(function (e) {
                this.supportedMode() && this.labelVisibleForFloor(e, this.model.currentFloor.floorIndex) ? this.showLabel(e, s.labels.fadeInDelay, s.labels.fadeInDuration) : this.hideLabel(e, s.labels.fadeOutDelay, s.labels.fadeOutDuration)
            }.bind(this))
        }, n.prototype.showAllLabels = function (e, t) {
            this.model.labels.forEach(function (i) {
                this.showLabel(i, e, t)
            }.bind(this))
        }, n.prototype.hideAllLabels = function (e, t) {
            this.model.labels.forEach(function (i) {
                this.hideLabel(i, e, t)
            }.bind(this))
        }, n.prototype.showLabel = function (e, t, i) {
            this.model.showingLabels && (e.visible || (e.visible = !0, e.labelGui.style.display = "block", e.labelGui.style.opacity = 0, $(e.labelGui).delay(t).fadeTo(i, 1)))
        }, n.prototype.hideLabel = function (e, t, i) {
            e.visible && (e.visible = !1, h.isMobile() ? $(e.labelGui).hide() : $(e.labelGui).delay(t).fadeOut(i))
        }, n.prototype.supportedMode = function () {
            return this.player.mode === l.FLOORPLAN
        }, n.prototype.updateLabelDisplay = function () {
            var e = (new r.Vector3, new r.Vector3, []);
            return function () {
                var t = this.player.getZoom(), i = .6, n = 1.2, r = (1 - t) * n + i, o = h.isMobile() ? s.labels.zoomTruncateThreshhold.mobile : s.labels.zoomTruncateThreshhold.desktop;
                this.getLabelsForCurrentFloor(e);
                for (var a = 0; a < e.length; a++) {
                    var l = e[a];
                    this.supportedMode() && l.labelGui && (this.updateProjectedGuiElement(l.labelGui, l.textBlock, l.position, r, r), t >= o && l.text.length >= s.labels.minLengthForTruncate ? l.textBlock.innerText = l.text.substring(0, s.labels.truncateLength) + s.labels.truncateSuffix : l.textBlock.innerText = l.text)
                }
            }
        }(), n.prototype.updateProjectedGuiElement = function () {
            var e = new r.Vector3;
            new r.Vector3;
            return function (t, i, n, r, o) {
                i.style.fontSize = 100 * o + "%";
                var a = window.innerWidth, s = window.innerHeight, l = .5 * a, h = .5 * s;
                e.copy(n), e.project(this.player.camera);
                var c = e.x * l + l, u = -(e.y * h) + h;
                c -= t.offsetWidth / 2, u -= t.offsetHeight / 2, t.style.left = c + "px", t.style.top = u + "px"
            }
        }(), n.prototype.handleStartInside = function (e) {
            this.updateLabelVisibility()
        }, n.prototype.handleStartOutside = function () {
            this.updateLabelVisibility()
        }, t.exports = n
    }, {
        "../enum/DirectorEvents": 19,
        "../enum/ModelManagerEvents": 26,
        "../enum/PlayerEvents": 32,
        "../enum/Viewmode": 42,
        "../enum/WarpStyle": 43,
        "../settings": 123,
        "../util/browser": 139,
        "../util/common": 142,
        "../util/lerp": 145,
        "../util/transitions": 152,
        three: 175
    }],
    60: [function (e, t, i) {
        "use strict";
        Array.prototype.findIndex || (Array.prototype.findIndex = function (e) {
            if (null == this)throw new TypeError("Array.prototype.findIndex called on null or undefined");
            if ("function" != typeof e)throw new TypeError("predicate must be a function");
            for (var t, i = Object(this), n = i.length >>> 0, r = arguments[1], o = 0; n > o; o++)if (t = i[o], e.call(r, t, o, i))return o;
            return -1
        })
    }, {}],
    61: [function (e, t, i) {
        "use strict";
        var n = n || {};
        t.exports = n, n.gui = n.gui || {}, n.utils = n.utils || {}, n.controllers = n.controllers || {}, n.dom = n.dom || {}, n.color = n.color || {}, n.utils.css = function () {
            return {
                load: function (e, t) {
                    t = t || document;
                    var i = t.createElement("link");
                    i.type = "text/css", i.rel = "stylesheet", i.href = e, t.getElementsByTagName("head")[0].appendChild(i)
                }, inject: function (e, t) {
                    t = t || document;
                    var i = document.createElement("style");
                    i.type = "text/css", i.innerHTML = e, t.getElementsByTagName("head")[0].appendChild(i)
                }
            }
        }(), n.utils.common = function () {
            var e = Array.prototype.forEach, t = Array.prototype.slice;
            return {
                BREAK: {}, extend: function (e) {
                    return this.each(t.call(arguments, 1), function (t) {
                        for (var i in t)this.isUndefined(t[i]) || (e[i] = t[i])
                    }, this), e
                }, defaults: function (e) {
                    return this.each(t.call(arguments, 1), function (t) {
                        for (var i in t)this.isUndefined(e[i]) && (e[i] = t[i])
                    }, this), e
                }, compose: function () {
                    var e = t.call(arguments);
                    return function () {
                        for (var i = t.call(arguments), n = e.length - 1; n >= 0; n--)i = [e[n].apply(this, i)];
                        return i[0]
                    }
                }, each: function (t, i, n) {
                    if (t)if (e && t.forEach && t.forEach === e)t.forEach(i, n); else if (t.length === t.length + 0) {
                        for (var r = 0, o = t.length; o > r; r++)if (r in t && i.call(n, t[r], r) === this.BREAK)return
                    } else for (var r in t)if (i.call(n, t[r], r) === this.BREAK)return
                }, defer: function (e) {
                    setTimeout(e, 0)
                }, toArray: function (e) {
                    return e.toArray ? e.toArray() : t.call(e)
                }, isUndefined: function (e) {
                    return void 0 === e
                }, isNull: function (e) {
                    return null === e
                }, isNaN: function (e) {
                    return e !== e
                }, isArray: Array.isArray || function (e) {
                    return e.constructor === Array
                }, isObject: function (e) {
                    return e === Object(e)
                }, isNumber: function (e) {
                    return e === e + 0
                }, isString: function (e) {
                    return e === e + ""
                }, isBoolean: function (e) {
                    return e === !1 || e === !0
                }, isFunction: function (e) {
                    return "[object Function]" === Object.prototype.toString.call(e)
                }
            }
        }(), n.controllers.Controller = function (e) {
            var t = function (e, t) {
                this.initialValue = e[t], this.domElement = document.createElement("div"), this.object = e, this.property = t, this.__onChange = void 0, this.__onFinishChange = void 0
            };
            return e.extend(t.prototype, {
                onChange: function (e) {
                    return this.__onChange = e, this
                }, onFinishChange: function (e) {
                    return this.__onFinishChange = e, this
                }, setValue: function (e) {
                    return this.object[this.property] = e, this.__onChange && this.__onChange.call(this, e), this.updateDisplay(), this
                }, getValue: function () {
                    return this.object[this.property]
                }, updateDisplay: function () {
                    return this
                }, isModified: function () {
                    return this.initialValue !== this.getValue()
                }
            }), t
        }(n.utils.common), n.dom.dom = function (e) {
            function t(t) {
                if ("0" === t || e.isUndefined(t))return 0;
                var i = t.match(r);
                return e.isNull(i) ? 0 : parseFloat(i[1])
            }

            var i = {
                HTMLEvents: ["change"],
                MouseEvents: ["click", "mousemove", "mousedown", "mouseup", "mouseover"],
                KeyboardEvents: ["keydown"]
            }, n = {};
            e.each(i, function (t, i) {
                e.each(t, function (e) {
                    n[e] = i
                })
            });
            var r = /(\d+(\.\d+)?)px/, o = {
                makeSelectable: function (e, t) {
                    void 0 !== e && void 0 !== e.style && (e.onselectstart = t ? function () {
                        return !1
                    } : function () {
                    }, e.style.MozUserSelect = t ? "auto" : "none", e.style.KhtmlUserSelect = t ? "auto" : "none", e.unselectable = t ? "on" : "off")
                }, makeFullscreen: function (t, i, n) {
                    e.isUndefined(i) && (i = !0), e.isUndefined(n) && (n = !0), t.style.position = "absolute", i && (t.style.left = 0, t.style.right = 0), n && (t.style.top = 0, t.style.bottom = 0)
                }, fakeEvent: function (t, i, r, o) {
                    r = r || {};
                    var a = n[i];
                    if (!a)throw new Error("Event type " + i + " not supported.");
                    var s = document.createEvent(a);
                    switch (a) {
                        case"MouseEvents":
                            var l = r.x || r.clientX || 0, h = r.y || r.clientY || 0;
                            s.initMouseEvent(i, r.bubbles || !1, r.cancelable || !0, window, r.clickCount || 1, 0, 0, l, h, !1, !1, !1, !1, 0, null);
                            break;
                        case"KeyboardEvents":
                            var c = s.initKeyboardEvent || s.initKeyEvent;
                            e.defaults(r, {
                                cancelable: !0,
                                ctrlKey: !1,
                                altKey: !1,
                                shiftKey: !1,
                                metaKey: !1,
                                keyCode: void 0,
                                charCode: void 0
                            }), c(i, r.bubbles || !1, r.cancelable, window, r.ctrlKey, r.altKey, r.shiftKey, r.metaKey, r.keyCode, r.charCode);
                            break;
                        default:
                            s.initEvent(i, r.bubbles || !1, r.cancelable || !0)
                    }
                    e.defaults(s, o), t.dispatchEvent(s)
                }, bind: function (e, t, i, n) {
                    return n = n || !1, e.addEventListener ? e.addEventListener(t, i, n) : e.attachEvent && e.attachEvent("on" + t, i), o
                }, unbind: function (e, t, i, n) {
                    return n = n || !1, e.removeEventListener ? e.removeEventListener(t, i, n) : e.detachEvent && e.detachEvent("on" + t, i), o
                }, addClass: function (e, t) {
                    if (void 0 === e.className)e.className = t; else if (e.className !== t) {
                        var i = e.className.split(/ +/);
                        -1 == i.indexOf(t) && (i.push(t), e.className = i.join(" ").replace(/^\s+/, "").replace(/\s+$/, ""))
                    }
                    return o
                }, removeClass: function (e, t) {
                    if (t)if (void 0 === e.className); else if (e.className === t)e.removeAttribute("class"); else {
                        var i = e.className.split(/ +/), n = i.indexOf(t);
                        -1 != n && (i.splice(n, 1), e.className = i.join(" "))
                    } else e.className = void 0;
                    return o
                }, hasClass: function (e, t) {
                    return new RegExp("(?:^|\\s+)" + t + "(?:\\s+|$)").test(e.className) || !1
                }, getWidth: function (e) {
                    var i = getComputedStyle(e);
                    return t(i["border-left-width"]) + t(i["border-right-width"]) + t(i["padding-left"]) + t(i["padding-right"]) + t(i.width)
                }, getHeight: function (e) {
                    var i = getComputedStyle(e);
                    return t(i["border-top-width"]) + t(i["border-bottom-width"]) + t(i["padding-top"]) + t(i["padding-bottom"]) + t(i.height)
                }, getOffset: function (e) {
                    var t = {left: 0, top: 0};
                    if (e.offsetParent)do t.left += e.offsetLeft, t.top += e.offsetTop; while (e = e.offsetParent);
                    return t
                }, isActive: function (e) {
                    return e === document.activeElement && (e.type || e.href)
                }
            };
            return o
        }(n.utils.common), n.controllers.OptionController = function (e, t, i) {
            var n = function (e, r, o) {
                n.superclass.call(this, e, r);
                var a = this;
                if (this.__select = document.createElement("select"), i.isArray(o)) {
                    var s = {};
                    i.each(o, function (e) {
                        s[e] = e
                    }), o = s
                }
                i.each(o, function (e, t) {
                    var i = document.createElement("option");
                    i.innerHTML = t, i.setAttribute("value", e), a.__select.appendChild(i)
                }), this.updateDisplay(), t.bind(this.__select, "change", function () {
                    var e = this.options[this.selectedIndex].value;
                    a.setValue(e)
                }), this.domElement.appendChild(this.__select)
            };
            return n.superclass = e, i.extend(n.prototype, e.prototype, {
                setValue: function (e) {
                    var t = n.superclass.prototype.setValue.call(this, e);
                    return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), t
                }, updateDisplay: function () {
                    return this.__select.value = this.getValue(), n.superclass.prototype.updateDisplay.call(this)
                }
            }), n
        }(n.controllers.Controller, n.dom.dom, n.utils.common), n.controllers.NumberController = function (e, t) {
            function i(e) {
                return e = e.toString(), e.indexOf(".") > -1 ? e.length - e.indexOf(".") - 1 : 0
            }

            var n = function (e, r, o) {
                n.superclass.call(this, e, r), o = o || {}, this.__min = o.min, this.__max = o.max, this.__step = o.step, t.isUndefined(this.__step) ? 0 == this.initialValue ? this.__impliedStep = 1 : this.__impliedStep = Math.pow(10, Math.floor(Math.log(this.initialValue) / Math.LN10)) / 10 : this.__impliedStep = this.__step, this.__precision = i(this.__impliedStep)
            };
            return n.superclass = e, t.extend(n.prototype, e.prototype, {
                setValue: function (e) {
                    return void 0 !== this.__min && e < this.__min ? e = this.__min : void 0 !== this.__max && e > this.__max && (e = this.__max), void 0 !== this.__step && e % this.__step != 0 && (e = Math.round(e / this.__step) * this.__step), n.superclass.prototype.setValue.call(this, e)
                }, min: function (e) {
                    return this.__min = e, this
                }, max: function (e) {
                    return this.__max = e, this
                }, step: function (e) {
                    return this.__step = e, this.__impliedStep = e, this.__precision = i(e), this
                }
            }), n
        }(n.controllers.Controller, n.utils.common), n.controllers.NumberControllerBox = function (e, t, i) {
            function n(e, t) {
                var i = Math.pow(10, t);
                return Math.round(e * i) / i
            }

            var r = function (e, n, o) {
                function a() {
                    var e = parseFloat(d.__input.value);
                    i.isNaN(e) || d.setValue(e)
                }

                function s() {
                    a(), d.__onFinishChange && d.__onFinishChange.call(d, d.getValue())
                }

                function l(e) {
                    t.bind(window, "mousemove", h), t.bind(window, "mouseup", c), u = e.clientY
                }

                function h(e) {
                    var t = u - e.clientY;
                    d.setValue(d.getValue() + t * d.__impliedStep), u = e.clientY
                }

                function c() {
                    t.unbind(window, "mousemove", h), t.unbind(window, "mouseup", c)
                }

                this.__truncationSuspended = !1, r.superclass.call(this, e, n, o);
                var u, d = this;
                this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), t.bind(this.__input, "change", a), t.bind(this.__input, "blur", s), t.bind(this.__input, "mousedown", l), t.bind(this.__input, "keydown", function (e) {
                    13 === e.keyCode && (d.__truncationSuspended = !0, this.blur(), d.__truncationSuspended = !1)
                }), this.updateDisplay(), this.domElement.appendChild(this.__input)
            };
            return r.superclass = e, i.extend(r.prototype, e.prototype, {
                updateDisplay: function () {
                    return this.__input.value = this.__truncationSuspended ? this.getValue() : n(this.getValue(), this.__precision), r.superclass.prototype.updateDisplay.call(this)
                }
            }), r
        }(n.controllers.NumberController, n.dom.dom, n.utils.common), n.controllers.NumberControllerSlider = function (e, t, i, n, r) {
            function o(e, t, i, n, r) {
                return n + (r - n) * ((e - t) / (i - t))
            }

            var a = function (e, i, n, r, s) {
                function l(e) {
                    t.bind(window, "mousemove", h), t.bind(window, "mouseup", c), h(e)
                }

                function h(e) {
                    e.preventDefault();
                    var i = t.getOffset(u.__background), n = t.getWidth(u.__background);
                    return u.setValue(o(e.clientX, i.left, i.left + n, u.__min, u.__max)), !1
                }

                function c() {
                    t.unbind(window, "mousemove", h), t.unbind(window, "mouseup", c), u.__onFinishChange && u.__onFinishChange.call(u, u.getValue())
                }

                a.superclass.call(this, e, i, {min: n, max: r, step: s});
                var u = this;
                this.__background = document.createElement("div"), this.__foreground = document.createElement("div"), t.bind(this.__background, "mousedown", l), t.addClass(this.__background, "slider"), t.addClass(this.__foreground, "slider-fg"), this.updateDisplay(), this.__background.appendChild(this.__foreground), this.domElement.appendChild(this.__background)
            };
            return a.superclass = e, a.useDefaultStyles = function () {
                i.inject(r)
            }, n.extend(a.prototype, e.prototype, {
                updateDisplay: function () {
                    var e = (this.getValue() - this.__min) / (this.__max - this.__min);
                    return this.__foreground.style.width = 100 * e + "%", a.superclass.prototype.updateDisplay.call(this)
                }
            }), a
        }(n.controllers.NumberController, n.dom.dom, n.utils.css, n.utils.common, "/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"), n.controllers.FunctionController = function (e, t, i) {
            var n = function (e, i, r) {
                n.superclass.call(this, e, i);
                var o = this;
                this.__button = document.createElement("div"), this.__button.innerHTML = void 0 === r ? "Fire" : r, t.bind(this.__button, "click", function (e) {
                    return e.preventDefault(), o.fire(), !1
                }), t.addClass(this.__button, "button"), this.domElement.appendChild(this.__button)
            };
            return n.superclass = e, i.extend(n.prototype, e.prototype, {
                fire: function () {
                    this.__onChange && this.__onChange.call(this), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.getValue().call(this.object)
                }
            }), n
        }(n.controllers.Controller, n.dom.dom, n.utils.common), n.controllers.BooleanController = function (e, t, i) {
            var n = function (e, i) {
                function r() {
                    o.setValue(!o.__prev)
                }

                n.superclass.call(this, e, i);
                var o = this;
                this.__prev = this.getValue(), this.__checkbox = document.createElement("input"), this.__checkbox.setAttribute("type", "checkbox"), t.bind(this.__checkbox, "change", r, !1), this.domElement.appendChild(this.__checkbox), this.updateDisplay()
            };
            return n.superclass = e, i.extend(n.prototype, e.prototype, {
                setValue: function (e) {
                    var t = n.superclass.prototype.setValue.call(this, e);
                    return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.__prev = this.getValue(), t
                }, updateDisplay: function () {
                    return this.getValue() === !0 ? (this.__checkbox.setAttribute("checked", "checked"), this.__checkbox.checked = !0) : this.__checkbox.checked = !1, n.superclass.prototype.updateDisplay.call(this)
                }
            }), n
        }(n.controllers.Controller, n.dom.dom, n.utils.common), n.color.toString = function (e) {
            return function (t) {
                if (1 == t.a || e.isUndefined(t.a)) {
                    for (var i = t.hex.toString(16); i.length < 6;)i = "0" + i;
                    return "#" + i
                }
                return "rgba(" + Math.round(t.r) + "," + Math.round(t.g) + "," + Math.round(t.b) + "," + t.a + ")"
            }
        }(n.utils.common), n.color.interpret = function (e, t) {
            var i, n, r = function () {
                n = !1;
                var e = arguments.length > 1 ? t.toArray(arguments) : arguments[0];
                return t.each(o, function (r) {
                    return r.litmus(e) ? (t.each(r.conversions, function (r, o) {
                        return i = r.read(e), n === !1 && i !== !1 ? (n = i, i.conversionName = o, i.conversion = r, t.BREAK) : void 0
                    }), t.BREAK) : void 0
                }), n
            }, o = [{
                litmus: t.isString, conversions: {
                    THREE_CHAR_HEX: {
                        read: function (e) {
                            var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                            return null === t ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + t[1].toString() + t[1].toString() + t[2].toString() + t[2].toString() + t[3].toString() + t[3].toString())
                            }
                        }, write: e
                    }, SIX_CHAR_HEX: {
                        read: function (e) {
                            var t = e.match(/^#([A-F0-9]{6})$/i);
                            return null === t ? !1 : {space: "HEX", hex: parseInt("0x" + t[1].toString())}
                        }, write: e
                    }, CSS_RGB: {
                        read: function (e) {
                            var t = e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                            return null === t ? !1 : {
                                space: "RGB",
                                r: parseFloat(t[1]),
                                g: parseFloat(t[2]),
                                b: parseFloat(t[3])
                            }
                        }, write: e
                    }, CSS_RGBA: {
                        read: function (e) {
                            var t = e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);
                            return null === t ? !1 : {
                                space: "RGB",
                                r: parseFloat(t[1]),
                                g: parseFloat(t[2]),
                                b: parseFloat(t[3]),
                                a: parseFloat(t[4])
                            }
                        }, write: e
                    }
                }
            }, {
                litmus: t.isNumber, conversions: {
                    HEX: {
                        read: function (e) {
                            return {space: "HEX", hex: e, conversionName: "HEX"}
                        }, write: function (e) {
                            return e.hex
                        }
                    }
                }
            }, {
                litmus: t.isArray, conversions: {
                    RGB_ARRAY: {
                        read: function (e) {
                            return 3 != e.length ? !1 : {space: "RGB", r: e[0], g: e[1], b: e[2]}
                        }, write: function (e) {
                            return [e.r, e.g, e.b]
                        }
                    }, RGBA_ARRAY: {
                        read: function (e) {
                            return 4 != e.length ? !1 : {space: "RGB", r: e[0], g: e[1], b: e[2], a: e[3]}
                        }, write: function (e) {
                            return [e.r, e.g, e.b, e.a]
                        }
                    }
                }
            }, {
                litmus: t.isObject, conversions: {
                    RGBA_OBJ: {
                        read: function (e) {
                            return t.isNumber(e.r) && t.isNumber(e.g) && t.isNumber(e.b) && t.isNumber(e.a) ? {
                                space: "RGB",
                                r: e.r,
                                g: e.g,
                                b: e.b,
                                a: e.a
                            } : !1
                        }, write: function (e) {
                            return {r: e.r, g: e.g, b: e.b, a: e.a}
                        }
                    }, RGB_OBJ: {
                        read: function (e) {
                            return t.isNumber(e.r) && t.isNumber(e.g) && t.isNumber(e.b) ? {
                                space: "RGB",
                                r: e.r,
                                g: e.g,
                                b: e.b
                            } : !1
                        }, write: function (e) {
                            return {r: e.r, g: e.g, b: e.b}
                        }
                    }, HSVA_OBJ: {
                        read: function (e) {
                            return t.isNumber(e.h) && t.isNumber(e.s) && t.isNumber(e.v) && t.isNumber(e.a) ? {
                                space: "HSV",
                                h: e.h,
                                s: e.s,
                                v: e.v,
                                a: e.a
                            } : !1
                        }, write: function (e) {
                            return {h: e.h, s: e.s, v: e.v, a: e.a}
                        }
                    }, HSV_OBJ: {
                        read: function (e) {
                            return t.isNumber(e.h) && t.isNumber(e.s) && t.isNumber(e.v) ? {
                                space: "HSV",
                                h: e.h,
                                s: e.s,
                                v: e.v
                            } : !1
                        }, write: function (e) {
                            return {h: e.h, s: e.s, v: e.v}
                        }
                    }
                }
            }];
            return r
        }(n.color.toString, n.utils.common), n.GUI = n.gui.GUI = function (e, t, i, n, r, o, a, s, l, h, c, u, d, p, f) {
            function g(e, t, i, o) {
                if (void 0 === t[i])throw new Error("Object " + t + ' has no property "' + i + '"');
                var a;
                if (o.color)a = new c(t, i); else {
                    var s = [t, i].concat(o.factoryArgs);
                    a = n.apply(e, s)
                }
                o.before instanceof r && (o.before = o.before.__li), A(e, a), p.addClass(a.domElement, "c");
                var l = document.createElement("span");
                p.addClass(l, "property-name"), l.innerHTML = a.property;
                var h = document.createElement("div");
                h.appendChild(l), h.appendChild(a.domElement);
                var u = m(e, h, o.before);
                return p.addClass(u, N.CLASS_CONTROLLER_ROW), p.addClass(u, typeof a.getValue()), v(e, u, a), e.__controllers.push(a), a
            }

            function m(e, t, i) {
                var n = document.createElement("li");
                return t && n.appendChild(t), i ? e.__ul.insertBefore(n, params.before) : e.__ul.appendChild(n), e.onResize(), n
            }

            function v(e, t, i) {
                if (i.__li = t, i.__gui = e, f.extend(i, {
                        options: function (t) {
                            return arguments.length > 1 ? (i.remove(), g(e, i.object, i.property, {
                                before: i.__li.nextElementSibling,
                                factoryArgs: [f.toArray(arguments)]
                            })) : f.isArray(t) || f.isObject(t) ? (i.remove(), g(e, i.object, i.property, {
                                before: i.__li.nextElementSibling,
                                factoryArgs: [t]
                            })) : void 0
                        }, name: function (e) {
                            return i.__li.firstElementChild.firstElementChild.innerHTML = e, i
                        }, listen: function () {
                            return i.__gui.listen(i), i
                        }, remove: function () {
                            return i.__gui.remove(i), i
                        }
                    }), i instanceof l) {
                    var n = new s(i.object, i.property, {min: i.__min, max: i.__max, step: i.__step});
                    f.each(["updateDisplay", "onChange", "onFinishChange"], function (e) {
                        var t = i[e], r = n[e];
                        i[e] = n[e] = function () {
                            var e = Array.prototype.slice.call(arguments);
                            return t.apply(i, e), r.apply(n, e)
                        }
                    }), p.addClass(t, "has-slider"), i.domElement.insertBefore(n.domElement, i.domElement.firstElementChild)
                } else if (i instanceof s) {
                    var r = function (t) {
                        return f.isNumber(i.__min) && f.isNumber(i.__max) ? (i.remove(), g(e, i.object, i.property, {
                            before: i.__li.nextElementSibling,
                            factoryArgs: [i.__min, i.__max, i.__step]
                        })) : t
                    };
                    i.min = f.compose(r, i.min), i.max = f.compose(r, i.max)
                } else i instanceof o ? (p.bind(t, "click", function () {
                    p.fakeEvent(i.__checkbox, "click")
                }), p.bind(i.__checkbox, "click", function (e) {
                    e.stopPropagation()
                })) : i instanceof a ? (p.bind(t, "click", function () {
                    p.fakeEvent(i.__button, "click")
                }), p.bind(t, "mouseover", function () {
                    p.addClass(i.__button, "hover")
                }), p.bind(t, "mouseout", function () {
                    p.removeClass(i.__button, "hover")
                })) : i instanceof c && (p.addClass(t, "color"), i.updateDisplay = f.compose(function (e) {
                    return t.style.borderLeftColor = i.__color.toString(), e
                }, i.updateDisplay), i.updateDisplay());
                i.setValue = f.compose(function (t) {
                    return e.getRoot().__preset_select && i.isModified() && M(e.getRoot(), !0), t
                }, i.setValue)
            }

            function A(e, t) {
                var i = e.getRoot(), n = i.__rememberedObjects.indexOf(t.object);
                if (-1 != n) {
                    var r = i.__rememberedObjectIndecesToControllers[n];
                    if (void 0 === r && (r = {}, i.__rememberedObjectIndecesToControllers[n] = r), r[t.property] = t, i.load && i.load.remembered) {
                        var o, a = i.load.remembered;
                        if (a[e.preset])o = a[e.preset]; else {
                            if (!a[R])return;
                            o = a[R]
                        }
                        if (o[n] && void 0 !== o[n][t.property]) {
                            var s = o[n][t.property];
                            t.initialValue = s, t.setValue(s)
                        }
                    }
                }
            }

            function y(e, t) {
                return document.location.href + "." + t
            }

            function C(e) {
                var t = e.__save_row = document.createElement("li");
                p.addClass(e.domElement, "has-save"), e.__ul.insertBefore(t, e.__ul.firstChild), p.addClass(t, "save-row");
                var i = document.createElement("span");
                i.innerHTML = "&nbsp;", p.addClass(i, "button gears");
                var n = document.createElement("span");
                n.innerHTML = "Save", p.addClass(n, "button"), p.addClass(n, "save");
                var r = document.createElement("span");
                r.innerHTML = "New", p.addClass(r, "button"), p.addClass(r, "save-as");
                var o = document.createElement("span");
                o.innerHTML = "Revert", p.addClass(o, "button"), p.addClass(o, "revert");
                var a = e.__preset_select = document.createElement("select");
                if (e.load && e.load.remembered ? f.each(e.load.remembered, function (t, i) {
                        x(e, i, i == e.preset)
                    }) : x(e, R, !1), p.bind(a, "change", function () {
                        for (var t = 0; t < e.__preset_select.length; t++)e.__preset_select[t].innerHTML = e.__preset_select[t].value;
                        e.preset = this.value
                    }), t.appendChild(a), t.appendChild(i), t.appendChild(n), t.appendChild(r), t.appendChild(o), B) {
                    var s = document.getElementById("dg-save-locally"), l = document.getElementById("dg-local-explain");
                    s.style.display = "block";
                    var h = document.getElementById("dg-local-storage");
                    "true" === localStorage.getItem(y(e, "isLocal")) && h.setAttribute("checked", "checked");
                    var c = function () {
                        l.style.display = e.useLocalStorage ? "block" : "none"
                    };
                    c(), p.bind(h, "change", function () {
                        e.useLocalStorage = !e.useLocalStorage, c()
                    })
                }
                var u = document.getElementById("dg-new-constructor");
                p.bind(u, "keydown", function (e) {
                    !e.metaKey || 67 !== e.which && 67 != e.keyCode || S.hide()
                }), p.bind(i, "click", function () {
                    u.innerHTML = JSON.stringify(e.getSaveObject(), void 0, 2), S.show(), u.focus(), u.select()
                }), p.bind(n, "click", function () {
                    e.save()
                }), p.bind(r, "click", function () {
                    var t = prompt("Enter a new preset name.");
                    t && e.saveAs(t)
                }), p.bind(o, "click", function () {
                    e.revert()
                })
            }

            function I(e) {
                function t(t) {
                    return t.preventDefault(), r = t.clientX, p.addClass(e.__closeButton, N.CLASS_DRAG), p.bind(window, "mousemove", i), p.bind(window, "mouseup", n), !1
                }

                function i(t) {
                    return t.preventDefault(), e.width += r - t.clientX, e.onResize(), r = t.clientX, !1
                }

                function n() {
                    p.removeClass(e.__closeButton, N.CLASS_DRAG), p.unbind(window, "mousemove", i), p.unbind(window, "mouseup", n)
                }

                e.__resize_handle = document.createElement("div"), f.extend(e.__resize_handle.style, {
                    width: "6px",
                    marginLeft: "-3px",
                    height: "200px",
                    cursor: "ew-resize",
                    position: "absolute"
                });
                var r;
                p.bind(e.__resize_handle, "mousedown", t), p.bind(e.__closeButton, "mousedown", t), e.domElement.insertBefore(e.__resize_handle, e.domElement.firstElementChild)
            }

            function b(e, t) {
                e.domElement.style.width = t + "px", e.__save_row && e.autoPlace && (e.__save_row.style.width = t + "px"), e.__closeButton && (e.__closeButton.style.width = t + "px")
            }

            function w(e, t) {
                var i = {};
                return f.each(e.__rememberedObjects, function (n, r) {
                    var o = {}, a = e.__rememberedObjectIndecesToControllers[r];
                    f.each(a, function (e, i) {
                        o[i] = t ? e.initialValue : e.getValue()
                    }), i[r] = o
                }), i
            }

            function x(e, t, i) {
                var n = document.createElement("option");
                n.innerHTML = t, n.value = t, e.__preset_select.appendChild(n), i && (e.__preset_select.selectedIndex = e.__preset_select.length - 1)
            }

            function E(e) {
                for (var t = 0; t < e.__preset_select.length; t++)e.__preset_select[t].value == e.preset && (e.__preset_select.selectedIndex = t)
            }

            function M(e, t) {
                var i = e.__preset_select[e.__preset_select.selectedIndex];
                t ? i.innerHTML = i.value + "*" : i.innerHTML = i.value
            }

            function T(e) {
                0 != e.length && u(function () {
                    T(e)
                }), f.each(e, function (e) {
                    e.updateDisplay()
                })
            }

            e.inject(i);
            var S, P, _ = "dg", L = 72, D = 20, R = "Default", B = function () {
                try {
                    return "localStorage" in window && null !== window.localStorage
                } catch (e) {
                    return !1
                }
            }(), O = !0, F = !1, k = [], N = function (e) {
                function t() {
                    var e = i.getRoot();
                    e.width += 1, f.defer(function () {
                        e.width -= 1
                    })
                }

                var i = this;
                this.domElement = document.createElement("div"), this.__ul = document.createElement("ul"), this.domElement.appendChild(this.__ul), p.addClass(this.domElement, _), this.__folders = {}, this.__controllers = [], this.__rememberedObjects = [], this.__rememberedObjectIndecesToControllers = [], this.__listening = [], e = e || {}, e = f.defaults(e, {
                    autoPlace: !0,
                    width: N.DEFAULT_WIDTH
                }), e = f.defaults(e, {
                    resizable: e.autoPlace,
                    hideable: e.autoPlace
                }), f.isUndefined(e.load) ? e.load = {preset: R} : e.preset && (e.load.preset = e.preset), f.isUndefined(e.parent) && e.hideable && k.push(this), e.resizable = f.isUndefined(e.parent) && e.resizable, e.autoPlace && f.isUndefined(e.scrollable) && (e.scrollable = !0);
                var n, r = B && "true" === localStorage.getItem(y(this, "isLocal"));
                if (Object.defineProperties(this, {
                        parent: {
                            get: function () {
                                return e.parent
                            }
                        }, scrollable: {
                            get: function () {
                                return e.scrollable
                            }
                        }, autoPlace: {
                            get: function () {
                                return e.autoPlace
                            }
                        }, preset: {
                            get: function () {
                                return i.parent ? i.getRoot().preset : e.load.preset
                            }, set: function (t) {
                                i.parent ? i.getRoot().preset = t : e.load.preset = t, E(this), i.revert()
                            }
                        }, width: {
                            get: function () {
                                return e.width
                            }, set: function (t) {
                                e.width = t, b(i, t)
                            }
                        }, name: {
                            get: function () {
                                return e.name
                            }, set: function (t) {
                                e.name = t, a && (a.innerHTML = e.name)
                            }
                        }, closed: {
                            get: function () {
                                return e.closed
                            }, set: function (t) {
                                e.closed = t, e.closed ? p.addClass(i.__ul, N.CLASS_CLOSED) : p.removeClass(i.__ul, N.CLASS_CLOSED), this.onResize(), i.__closeButton && (i.__closeButton.innerHTML = t ? N.TEXT_OPEN : N.TEXT_CLOSED)
                            }
                        }, load: {
                            get: function () {
                                return e.load
                            }
                        }, useLocalStorage: {
                            get: function () {
                                return r
                            }, set: function (e) {
                                B && (r = e, e ? p.bind(window, "unload", n) : p.unbind(window, "unload", n), localStorage.setItem(y(i, "isLocal"), e))
                            }
                        }
                    }), f.isUndefined(e.parent)) {
                    if (e.closed = !1, p.addClass(this.domElement, N.CLASS_MAIN), p.makeSelectable(this.domElement, !1), B && r) {
                        i.useLocalStorage = !0;
                        var o = localStorage.getItem(y(this, "gui"));
                        o && (e.load = JSON.parse(o))
                    }
                    this.__closeButton = document.createElement("div"), this.__closeButton.innerHTML = N.TEXT_CLOSED, p.addClass(this.__closeButton, N.CLASS_CLOSE_BUTTON), this.domElement.appendChild(this.__closeButton), p.bind(this.__closeButton, "click", function () {
                        i.closed = !i.closed
                    })
                } else {
                    void 0 === e.closed && (e.closed = !0);
                    var a = document.createTextNode(e.name);
                    p.addClass(a, "controller-name");
                    var s = m(i, a), l = function (e) {
                        return e.preventDefault(), i.closed = !i.closed, !1
                    };
                    p.addClass(this.__ul, N.CLASS_CLOSED), p.addClass(s, "title"), p.bind(s, "click", l), e.closed || (this.closed = !1)
                }
                e.autoPlace && (f.isUndefined(e.parent) && (O && (P = document.createElement("div"), p.addClass(P, _), p.addClass(P, N.CLASS_AUTO_PLACE_CONTAINER), document.body.appendChild(P), O = !1), P.appendChild(this.domElement), p.addClass(this.domElement, N.CLASS_AUTO_PLACE)), this.parent || b(i, e.width)), p.bind(window, "resize", function () {
                    i.onResize()
                }), p.bind(this.__ul, "webkitTransitionEnd", function () {
                    i.onResize()
                }), p.bind(this.__ul, "transitionend", function () {
                    i.onResize()
                }), p.bind(this.__ul, "oTransitionEnd", function () {
                    i.onResize()
                }), this.onResize(), e.resizable && I(this), n = function () {
                    B && "true" === localStorage.getItem(y(i, "isLocal")) && localStorage.setItem(y(i, "gui"), JSON.stringify(i.getSaveObject()))
                }, this.saveToLocalStorageIfPossible = n;
                i.getRoot();
                e.parent || t()
            };
            return N.toggleHide = function () {
                F = !F, f.each(k, function (e) {
                    e.domElement.style.zIndex = F ? -999 : 999, e.domElement.style.opacity = F ? 0 : 1
                })
            }, N.CLASS_AUTO_PLACE = "a", N.CLASS_AUTO_PLACE_CONTAINER = "ac", N.CLASS_MAIN = "main", N.CLASS_CONTROLLER_ROW = "cr", N.CLASS_TOO_TALL = "taller-than-window", N.CLASS_CLOSED = "closed", N.CLASS_CLOSE_BUTTON = "close-button", N.CLASS_DRAG = "drag", N.DEFAULT_WIDTH = 245, N.TEXT_CLOSED = "Close Controls", N.TEXT_OPEN = "Open Controls", p.bind(window, "keydown", function (e) {
                "text" === document.activeElement.type || e.which !== L && e.keyCode != L || N.toggleHide()
            }, !1), f.extend(N.prototype, {
                add: function (e, t) {
                    return g(this, e, t, {factoryArgs: Array.prototype.slice.call(arguments, 2)})
                }, addColor: function (e, t) {
                    return g(this, e, t, {color: !0})
                }, remove: function (e) {
                    this.__ul.removeChild(e.__li), this.__controllers.slice(this.__controllers.indexOf(e), 1);
                    var t = this;
                    f.defer(function () {
                        t.onResize()
                    })
                }, destroy: function () {
                    this.autoPlace && P.removeChild(this.domElement)
                }, addFolder: function (e) {
                    if (void 0 !== this.__folders[e])throw new Error('You already have a folder in this GUI by the name "' + e + '"');
                    var t = {name: e, parent: this};
                    t.autoPlace = this.autoPlace, this.load && this.load.folders && this.load.folders[e] && (t.closed = this.load.folders[e].closed, t.load = this.load.folders[e]);
                    var i = new N(t);
                    this.__folders[e] = i;
                    var n = m(this, i.domElement);
                    return p.addClass(n, "folder"), i
                }, open: function () {
                    this.closed = !1
                }, close: function () {
                    this.closed = !0
                }, onResize: function () {
                    var e = this.getRoot();
                    if (e.scrollable) {
                        var t = p.getOffset(e.__ul).top, i = 0;
                        f.each(e.__ul.childNodes, function (t) {
                            e.autoPlace && t === e.__save_row || (i += p.getHeight(t))
                        }), window.innerHeight - t - D < i ? (p.addClass(e.domElement, N.CLASS_TOO_TALL), e.__ul.style.height = window.innerHeight - t - D + "px") : (p.removeClass(e.domElement, N.CLASS_TOO_TALL), e.__ul.style.height = "auto")
                    }
                    e.__resize_handle && f.defer(function () {
                        e.__resize_handle.style.height = e.__ul.offsetHeight + "px"
                    }), e.__closeButton && (e.__closeButton.style.width = e.width + "px")
                }, remember: function () {
                    if (f.isUndefined(S) && (S = new d, S.domElement.innerHTML = t), this.parent)throw new Error("You can only call remember on a top level GUI.");
                    var e = this;
                    f.each(Array.prototype.slice.call(arguments), function (t) {
                        0 == e.__rememberedObjects.length && C(e), -1 == e.__rememberedObjects.indexOf(t) && e.__rememberedObjects.push(t)
                    }), this.autoPlace && b(this, this.width)
                }, getRoot: function () {
                    for (var e = this; e.parent;)e = e.parent;
                    return e
                }, getSaveObject: function () {
                    var e = this.load;
                    return e.closed = this.closed, this.__rememberedObjects.length > 0 && (e.preset = this.preset, e.remembered || (e.remembered = {}), e.remembered[this.preset] = w(this)), e.folders = {}, f.each(this.__folders, function (t, i) {
                        e.folders[i] = t.getSaveObject()
                    }), e
                }, save: function () {
                    this.load.remembered || (this.load.remembered = {}), this.load.remembered[this.preset] = w(this), M(this, !1), this.saveToLocalStorageIfPossible()
                }, saveAs: function (e) {
                    this.load.remembered || (this.load.remembered = {}, this.load.remembered[R] = w(this, !0)), this.load.remembered[e] = w(this), this.preset = e, x(this, e, !0), this.saveToLocalStorageIfPossible()
                }, revert: function (e) {
                    f.each(this.__controllers, function (t) {
                        this.getRoot().load.remembered ? A(e || this.getRoot(), t) : t.setValue(t.initialValue)
                    }, this), f.each(this.__folders, function (e) {
                        e.revert(e)
                    }), e || M(this.getRoot(), !1)
                }, listen: function (e) {
                    var t = 0 == this.__listening.length;
                    this.__listening.push(e), t && T(this.__listening)
                }
            }), N
        }(n.utils.css, '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>', ".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n", n.controllers.factory = function (e, t, i, n, r, o, a) {
            return function (s, l) {
                var h = s[l];
                return a.isArray(arguments[2]) || a.isObject(arguments[2]) ? new e(s, l, arguments[2]) : a.isNumber(h) ? a.isNumber(arguments[2]) && a.isNumber(arguments[3]) ? new i(s, l, arguments[2], arguments[3]) : new t(s, l, {
                    min: arguments[2],
                    max: arguments[3]
                }) : a.isString(h) ? new n(s, l) : a.isFunction(h) ? new r(s, l, "") : a.isBoolean(h) ? new o(s, l) : void 0
            }
        }(n.controllers.OptionController, n.controllers.NumberControllerBox, n.controllers.NumberControllerSlider, n.controllers.StringController = function (e, t, i) {
            var n = function (e, i) {
                function r() {
                    a.setValue(a.__input.value)
                }

                function o() {
                    a.__onFinishChange && a.__onFinishChange.call(a, a.getValue())
                }

                n.superclass.call(this, e, i);
                var a = this;
                this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), t.bind(this.__input, "keyup", r), t.bind(this.__input, "change", r), t.bind(this.__input, "blur", o), t.bind(this.__input, "keydown", function (e) {
                    13 === e.keyCode && this.blur()
                }), this.updateDisplay(), this.domElement.appendChild(this.__input)
            };
            return n.superclass = e, i.extend(n.prototype, e.prototype, {
                updateDisplay: function () {
                    return t.isActive(this.__input) || (this.__input.value = this.getValue()), n.superclass.prototype.updateDisplay.call(this)
                }
            }), n
        }(n.controllers.Controller, n.dom.dom, n.utils.common), n.controllers.FunctionController, n.controllers.BooleanController, n.utils.common), n.controllers.Controller, n.controllers.BooleanController, n.controllers.FunctionController, n.controllers.NumberControllerBox, n.controllers.NumberControllerSlider, n.controllers.OptionController, n.controllers.ColorController = function (e, t, i, n, r) {
            function o(e, t, i, n) {
                e.style.background = "", r.each(l, function (r) {
                    e.style.cssText += "background: " + r + "linear-gradient(" + t + ", " + i + " 0%, " + n + " 100%); "
                })
            }

            function a(e) {
                e.style.background = "", e.style.cssText += "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);", e.style.cssText += "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", e.style.cssText += "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", e.style.cssText += "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", e.style.cssText += "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"
            }

            var s = function (e, l) {
                function h(e) {
                    p(e), t.bind(window, "mousemove", p), t.bind(window, "mouseup", c)
                }

                function c() {
                    t.unbind(window, "mousemove", p), t.unbind(window, "mouseup", c)
                }

                function u() {
                    var e = n(this.value);
                    e !== !1 ? (g.__color.__state = e, g.setValue(g.__color.toOriginal())) : this.value = g.__color.toString()
                }

                function d() {
                    t.unbind(window, "mousemove", f), t.unbind(window, "mouseup", d)
                }

                function p(e) {
                    e.preventDefault();
                    var i = t.getWidth(g.__saturation_field), n = t.getOffset(g.__saturation_field), r = (e.clientX - n.left + document.body.scrollLeft) / i, o = 1 - (e.clientY - n.top + document.body.scrollTop) / i;
                    return o > 1 ? o = 1 : 0 > o && (o = 0), r > 1 ? r = 1 : 0 > r && (r = 0), g.__color.v = o, g.__color.s = r, g.setValue(g.__color.toOriginal()), !1
                }

                function f(e) {
                    e.preventDefault();
                    var i = t.getHeight(g.__hue_field), n = t.getOffset(g.__hue_field), r = 1 - (e.clientY - n.top + document.body.scrollTop) / i;
                    return r > 1 ? r = 1 : 0 > r && (r = 0), g.__color.h = 360 * r, g.setValue(g.__color.toOriginal()), !1
                }

                s.superclass.call(this, e, l), this.__color = new i(this.getValue()), this.__temp = new i(0);
                var g = this;
                this.domElement = document.createElement("div"), t.makeSelectable(this.domElement, !1), this.__selector = document.createElement("div"), this.__selector.className = "selector", this.__saturation_field = document.createElement("div"), this.__saturation_field.className = "saturation-field", this.__field_knob = document.createElement("div"), this.__field_knob.className = "field-knob", this.__field_knob_border = "2px solid ", this.__hue_knob = document.createElement("div"), this.__hue_knob.className = "hue-knob", this.__hue_field = document.createElement("div"), this.__hue_field.className = "hue-field", this.__input = document.createElement("input"), this.__input.type = "text", this.__input_textShadow = "0 1px 1px ", t.bind(this.__input, "keydown", function (e) {
                    13 === e.keyCode && u.call(this)
                }), t.bind(this.__input, "blur", u), t.bind(this.__selector, "mousedown", function (e) {
                    t.addClass(this, "drag").bind(window, "mouseup", function (e) {
                        t.removeClass(g.__selector, "drag")
                    })
                });
                var m = document.createElement("div");
                r.extend(this.__selector.style, {
                    width: "122px",
                    height: "102px",
                    padding: "3px",
                    backgroundColor: "#222",
                    boxShadow: "0px 1px 3px rgba(0,0,0,0.3)"
                }), r.extend(this.__field_knob.style, {
                    position: "absolute",
                    width: "12px",
                    height: "12px",
                    border: this.__field_knob_border + (this.__color.v < .5 ? "#fff" : "#000"),
                    boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
                    borderRadius: "12px",
                    zIndex: 1
                }), r.extend(this.__hue_knob.style, {
                    position: "absolute",
                    width: "15px",
                    height: "2px",
                    borderRight: "4px solid #fff",
                    zIndex: 1
                }), r.extend(this.__saturation_field.style, {
                    width: "100px",
                    height: "100px",
                    border: "1px solid #555",
                    marginRight: "3px",
                    display: "inline-block",
                    cursor: "pointer"
                }), r.extend(m.style, {
                    width: "100%",
                    height: "100%",
                    background: "none"
                }), o(m, "top", "rgba(0,0,0,0)", "#000"), r.extend(this.__hue_field.style, {
                    width: "15px",
                    height: "100px",
                    display: "inline-block",
                    border: "1px solid #555",
                    cursor: "ns-resize"
                }), a(this.__hue_field), r.extend(this.__input.style, {
                    outline: "none",
                    textAlign: "center",
                    color: "#fff",
                    border: 0,
                    fontWeight: "bold",
                    textShadow: this.__input_textShadow + "rgba(0,0,0,0.7)"
                }), t.bind(this.__saturation_field, "mousedown", h), t.bind(this.__field_knob, "mousedown", h), t.bind(this.__hue_field, "mousedown", function (e) {
                    f(e), t.bind(window, "mousemove", f), t.bind(window, "mouseup", d)
                }), this.__saturation_field.appendChild(m), this.__selector.appendChild(this.__field_knob), this.__selector.appendChild(this.__saturation_field), this.__selector.appendChild(this.__hue_field), this.__hue_field.appendChild(this.__hue_knob), this.domElement.appendChild(this.__input), this.domElement.appendChild(this.__selector), this.updateDisplay()
            };
            s.superclass = e, r.extend(s.prototype, e.prototype, {
                updateDisplay: function () {
                    var e = n(this.getValue());
                    if (e !== !1) {
                        var t = !1;
                        r.each(i.COMPONENTS, function (i) {
                            return r.isUndefined(e[i]) || r.isUndefined(this.__color.__state[i]) || e[i] === this.__color.__state[i] ? void 0 : (t = !0, {})
                        }, this), t && r.extend(this.__color.__state, e)
                    }
                    r.extend(this.__temp.__state, this.__color.__state), this.__temp.a = 1;
                    var a = this.__color.v < .5 || this.__color.s > .5 ? 255 : 0, s = 255 - a;
                    r.extend(this.__field_knob.style, {
                        marginLeft: 100 * this.__color.s - 7 + "px",
                        marginTop: 100 * (1 - this.__color.v) - 7 + "px",
                        backgroundColor: this.__temp.toString(),
                        border: this.__field_knob_border + "rgb(" + a + "," + a + "," + a + ")"
                    }), this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + "px", this.__temp.s = 1, this.__temp.v = 1, o(this.__saturation_field, "left", "#fff", this.__temp.toString()), r.extend(this.__input.style, {
                        backgroundColor: this.__input.value = this.__color.toString(),
                        color: "rgb(" + a + "," + a + "," + a + ")",
                        textShadow: this.__input_textShadow + "rgba(" + s + "," + s + "," + s + ",.7)"
                    })
                }
            });
            var l = ["-moz-", "-o-", "-webkit-", "-ms-", ""];
            return s
        }(n.controllers.Controller, n.dom.dom, n.color.Color = function (e, t, i, n) {
            function r(e, t, i) {
                Object.defineProperty(e, t, {
                    get: function () {
                        return "RGB" === this.__state.space ? this.__state[t] : (a(this, t, i), this.__state[t])
                    }, set: function (e) {
                        "RGB" !== this.__state.space && (a(this, t, i), this.__state.space = "RGB"), this.__state[t] = e
                    }
                })
            }

            function o(e, t) {
                Object.defineProperty(e, t, {
                    get: function () {
                        return "HSV" === this.__state.space ? this.__state[t] : (s(this), this.__state[t])
                    }, set: function (e) {
                        "HSV" !== this.__state.space && (s(this), this.__state.space = "HSV"), this.__state[t] = e
                    }
                })
            }

            function a(e, i, r) {
                if ("HEX" === e.__state.space)e.__state[i] = t.component_from_hex(e.__state.hex, r); else {
                    if ("HSV" !== e.__state.space)throw"Corrupted color state";
                    n.extend(e.__state, t.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v))
                }
            }

            function s(e) {
                var i = t.rgb_to_hsv(e.r, e.g, e.b);
                n.extend(e.__state, {
                    s: i.s,
                    v: i.v
                }), n.isNaN(i.h) ? n.isUndefined(e.__state.h) && (e.__state.h = 0) : e.__state.h = i.h
            }

            var l = function () {
                if (this.__state = e.apply(this, arguments), this.__state === !1)throw"Failed to interpret color arguments";
                this.__state.a = this.__state.a || 1
            };
            return l.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"], n.extend(l.prototype, {
                toString: function () {
                    return i(this)
                }, toOriginal: function () {
                    return this.__state.conversion.write(this)
                }
            }), r(l.prototype, "r", 2), r(l.prototype, "g", 1), r(l.prototype, "b", 0), o(l.prototype, "h"), o(l.prototype, "s"), o(l.prototype, "v"), Object.defineProperty(l.prototype, "a", {
                get: function () {
                    return this.__state.a
                }, set: function (e) {
                    this.__state.a = e
                }
            }), Object.defineProperty(l.prototype, "hex", {
                get: function () {
                    return "HEX" !== !this.__state.space && (this.__state.hex = t.rgb_to_hex(this.r, this.g, this.b)), this.__state.hex
                }, set: function (e) {
                    this.__state.space = "HEX", this.__state.hex = e
                }
            }), l
        }(n.color.interpret, n.color.math = function () {
            var e;
            return {
                hsv_to_rgb: function (e, t, i) {
                    var n = Math.floor(e / 60) % 6, r = e / 60 - Math.floor(e / 60), o = i * (1 - t), a = i * (1 - r * t), s = i * (1 - (1 - r) * t), l = [[i, s, o], [a, i, o], [o, i, s], [o, a, i], [s, o, i], [i, o, a]][n];
                    return {r: 255 * l[0], g: 255 * l[1], b: 255 * l[2]}
                }, rgb_to_hsv: function (e, t, i) {
                    var n, r, o = Math.min(e, t, i), a = Math.max(e, t, i), s = a - o;
                    return 0 == a ? {
                        h: NaN,
                        s: 0,
                        v: 0
                    } : (r = s / a, n = e == a ? (t - i) / s : t == a ? 2 + (i - e) / s : 4 + (e - t) / s, n /= 6, 0 > n && (n += 1), {
                        h: 360 * n,
                        s: r,
                        v: a / 255
                    })
                }, rgb_to_hex: function (e, t, i) {
                    var n = this.hex_with_component(0, 2, e);
                    return n = this.hex_with_component(n, 1, t), n = this.hex_with_component(n, 0, i)
                }, component_from_hex: function (e, t) {
                    return e >> 8 * t & 255
                }, hex_with_component: function (t, i, n) {
                    return n << (e = 8 * i) | t & ~(255 << e)
                }
            }
        }(), n.color.toString, n.utils.common), n.color.interpret, n.utils.common), n.utils.requestAnimationFrame = function () {
            return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (e, t) {
                    window.setTimeout(e, 1e3 / 60)
                }
        }(), n.dom.CenteredDiv = function (e, t) {
            var i = function () {
                this.backgroundElement = document.createElement("div"), t.extend(this.backgroundElement.style, {
                    backgroundColor: "rgba(0,0,0,0.8)",
                    top: 0,
                    left: 0,
                    display: "none",
                    zIndex: "1000",
                    opacity: 0,
                    WebkitTransition: "opacity 0.2s linear"
                }), e.makeFullscreen(this.backgroundElement), this.backgroundElement.style.position = "fixed", this.domElement = document.createElement("div"), t.extend(this.domElement.style, {
                    position: "fixed",
                    display: "none",
                    zIndex: "1001",
                    opacity: 0,
                    WebkitTransition: "-webkit-transform 0.2s ease-out, opacity 0.2s linear"
                }), document.body.appendChild(this.backgroundElement), document.body.appendChild(this.domElement);
                var i = this;
                e.bind(this.backgroundElement, "click", function () {
                    i.hide()
                })
            };
            return i.prototype.show = function () {
                var e = this;
                this.backgroundElement.style.display = "block", this.domElement.style.display = "block", this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)", this.layout(), t.defer(function () {
                    e.backgroundElement.style.opacity = 1, e.domElement.style.opacity = 1, e.domElement.style.webkitTransform = "scale(1)"
                })
            }, i.prototype.hide = function () {
                var t = this, i = function () {
                    t.domElement.style.display = "none", t.backgroundElement.style.display = "none", e.unbind(t.domElement, "webkitTransitionEnd", i), e.unbind(t.domElement, "transitionend", i), e.unbind(t.domElement, "oTransitionEnd", i)
                };
                e.bind(this.domElement, "webkitTransitionEnd", i), e.bind(this.domElement, "transitionend", i), e.bind(this.domElement, "oTransitionEnd", i), this.backgroundElement.style.opacity = 0, this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)"
            }, i.prototype.layout = function () {
                this.domElement.style.left = window.innerWidth / 2 - e.getWidth(this.domElement) / 2 + "px", this.domElement.style.top = window.innerHeight / 2 - e.getHeight(this.domElement) / 2 + "px"
            }, i
        }(n.dom.dom, n.utils.common), n.dom.dom, n.utils.common)
    }, {}],
    62: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("./freeze"), n = e("./LZ/BinTree"), r = e("./LZ/InWindow"), o = e("./LZ/OutWindow");
            t.exports = i({BinTree: n, InWindow: r, OutWindow: o})
        }()
    }, {"./LZ/BinTree": 63, "./LZ/InWindow": 64, "./LZ/OutWindow": 65, "./freeze": 77, amdefine: 154}],
    63: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            function i() {
                if (r.call(this), this._cyclicBufferSize = 0, this._son = [], this._hash = [], this._cutValue = 255, this._hashSizeSum = 0, this.HASH_ARRAY = !0, this.kNumHashDirectBytes = 0, this.kMinMatchCheck = 4, this.kFixHashSize = a + s, arguments.length >= 6) {
                    var e = Array.prototype.slice.call(arguments, 0);
                    this.setType(e.shift());
                    var t = e.pop();
                    this.create.apply(this, e), this.setStream(t), this.init()
                }
            }

            var n = e("../freeze"), r = e("./InWindow"), o = function () {
                var e = [];
                "undefined" != typeof Uint32Array && (e = new Uint32Array(256));
                var t, i, n, r = 3988292384;
                for (t = 0; 256 > t; t++) {
                    for (n = t, i = 0; 8 > i; i++)0 !== (1 & n) ? n = n >>> 1 ^ r : n >>>= 1;
                    e[t] = n
                }
                return e
            }();
            console.assert(256 === o.length);
            var a = 1024, s = 65536, l = 65536, h = 1, c = a, u = 0, d = (1 << 30) - 1, p = r.prototype;
            i.prototype = Object.create(p), i.prototype.setType = function (e) {
                this.HASH_ARRAY = e > 2, this.HASH_ARRAY ? (this.kNumHashDirectBytes = 0, this.kMinMatchCheck = 4, this.kFixHashSize = a + s) : (this.kNumHashDirectBytes = 2, this.kMinMatchCheck = 3, this.kFixHashSize = 0)
            }, i.prototype.init = function () {
                var e;
                for (p.init.call(this), e = 0; e < this._hashSizeSum; e++)this._hash[e] = u;
                this._cyclicBufferPos = 0, this.reduceOffsets(-1)
            }, i.prototype.movePos = function () {
                ++this._cyclicBufferPos >= this._cyclicBufferSize && (this._cyclicBufferPos = 0), p.movePos.call(this), this._pos === d && this.normalize()
            }, i.prototype.create = function (e, t, i, n) {
                var r, o, a;
                return e > d - 256 ? (console.assert(!1, "Unsupported historySize"), !1) : (this._cutValue = 16 + (i >>> 1), r = (e + t + i + n) / 2 + 256, p.create.call(this, e + t, i + n, r), this._matchMaxLen = i, o = e + 1, this._cyclicBufferSize !== o && (this._cyclicBufferSize = o, this._son = [], this._son.length = 2 * o), a = l, this.HASH_ARRAY && (a = e - 1, a |= a >>> 1, a |= a >>> 2, a |= a >>> 4, a |= a >>> 8, a >>>= 1, a |= 65535, a > 1 << 24 && (a >>>= 1), this._hashMask = a, a++, a += this.kFixHashSize), a !== this._hashSizeSum && (this._hashSizeSum = a, this._hash = [], this._hash.length = this._hashSizeSum), !0)
            }, i.prototype.getMatches = function (e) {
                var t;
                if (this._pos + this._matchMaxLen <= this._streamPos)t = this._matchMaxLen; else if (t = this._streamPos - this._pos, t < this.kMinMatchCheck)return this.movePos(), 0;
                var i = 0, n = this._pos > this._cyclicBufferSize ? this._pos - this._cyclicBufferSize : 0, r = this._bufferOffset + this._pos, l = h, d = 0, p = 0, f = 0;
                if (this.HASH_ARRAY) {
                    var g = o[this._bufferBase[r]] ^ this._bufferBase[r + 1];
                    p = g & a - 1, g ^= this._bufferBase[r + 2] << 8, f = g & s - 1, d = (g ^ o[this._bufferBase[r + 3]] << 5) & this._hashMask
                } else d = this._bufferBase[r] ^ this._bufferBase[r + 1] << 8;
                var m = this._hash[this.kFixHashSize + d];
                if (this.HASH_ARRAY) {
                    var v = this._hash[p], A = this._hash[c + f];
                    this._hash[p] = this._pos, this._hash[c + f] = this._pos, v > n && this._bufferBase[this._bufferOffset + v] === this._bufferBase[r] && (e[i++] = l = 2, e[i++] = this._pos - v - 1), A > n && this._bufferBase[this._bufferOffset + A] === this._bufferBase[r] && (A === v && (i -= 2), e[i++] = l = 3, e[i++] = this._pos - A - 1, v = A), 0 !== i && v === m && (i -= 2, l = h)
                }
                this._hash[this.kFixHashSize + d] = this._pos;
                var y, C, I = (this._cyclicBufferPos << 1) + 1, b = this._cyclicBufferPos << 1;
                y = C = this.kNumHashDirectBytes, 0 !== this.kNumHashDirectBytes && m > n && this._bufferBase[this._bufferOffset + m + this.kNumHashDirectBytes] !== this._bufferBase[r + this.kNumHashDirectBytes] && (e[i++] = l = this.kNumHashDirectBytes, e[i++] = this._pos - m - 1);
                for (var w = this._cutValue; ;) {
                    if (n >= m || 0 === w--) {
                        this._son[I] = this._son[b] = u;
                        break
                    }
                    var x = this._pos - m, E = (x <= this._cyclicBufferPos ? this._cyclicBufferPos - x : this._cyclicBufferPos - x + this._cyclicBufferSize) << 1, M = this._bufferOffset + m, T = Math.min(y, C);
                    if (this._bufferBase[M + T] === this._bufferBase[r + T]) {
                        for (; ++T !== t && this._bufferBase[M + T] === this._bufferBase[r + T];);
                        if (T > l && (e[i++] = l = T, e[i++] = x - 1, T === t)) {
                            this._son[b] = this._son[E], this._son[I] = this._son[E + 1];
                            break
                        }
                    }
                    this._bufferBase[M + T] < this._bufferBase[r + T] ? (this._son[b] = m, b = E + 1, m = this._son[b], C = T) : (this._son[I] = m, I = E, m = this._son[I], y = T)
                }
                return this.movePos(), i
            }, i.prototype.skip = function (e) {
                var t, i, n, r, l, h, d, p, f, g, m, v, A, y, C, I, b;
                do {
                    if (this._pos + this._matchMaxLen <= this._streamPos)t = this._matchMaxLen; else if (t = this._streamPos - this._pos, t < this.kMinMatchCheck) {
                        this.movePos();
                        continue
                    }
                    for (i = this._pos > this._cyclicBufferSize ? this._pos - this._cyclicBufferSize : 0, n = this._bufferOffset + this._pos, this.HASH_ARRAY ? (p = o[this._bufferBase[n]] ^ this._bufferBase[n + 1], h = p & a - 1, this._hash[h] = this._pos, p ^= this._bufferBase[n + 2] << 8, d = p & s - 1, this._hash[c + d] = this._pos, l = (p ^ o[this._bufferBase[n + 3]] << 5) & this._hashMask) : l = this._bufferBase[n] ^ this._bufferBase[n + 1] << 8, r = this._hash[this.kFixHashSize + l], this._hash[this.kFixHashSize + l] = this._pos, f = (this._cyclicBufferPos << 1) + 1, g = this._cyclicBufferPos << 1, m = v = this.kNumHashDirectBytes, A = this._cutValue; ;) {
                        if (i >= r || 0 === A--) {
                            this._son[f] = this._son[g] = u;
                            break
                        }
                        if (y = this._pos - r, C = (y <= this._cyclicBufferPos ? this._cyclicBufferPos - y : this._cyclicBufferPos - y + this._cyclicBufferSize) << 1, I = this._bufferOffset + r, b = v > m ? m : v, this._bufferBase[I + b] === this._bufferBase[n + b]) {
                            for (; ++b !== t && this._bufferBase[I + b] === this._bufferBase[n + b];);
                            if (b === t) {
                                this._son[g] = this._son[C], this._son[f] = this._son[C + 1];
                                break
                            }
                        }
                        this._bufferBase[I + b] < this._bufferBase[n + b] ? (this._son[g] = r, g = C + 1, r = this._son[g], v = b) : (this._son[f] = r, f = C, r = this._son[f], m = b)
                    }
                    this.movePos()
                } while (0 !== --e)
            }, i.prototype.normalizeLinks = function (e, t, i) {
                var n, r;
                for (n = 0; t > n; n++)r = e[n], i >= r ? r = u : r -= i, e[n] = r
            }, i.prototype.normalize = function () {
                var e = this._pos - this._cyclicBufferSize;
                this.normalizeLinks(this._son, 2 * this._cyclicBufferSize, e), this.normalizeLinks(this._hash, this._hashSizeSum, e), this.reduceOffsets(e)
            }, i.prototype.setCutValue = function (e) {
                this._cutValue = e
            }, n(i.prototype), t.exports = n(i)
        }()
    }, {"../freeze": 77, "./InWindow": 64, amdefine: 154}],
    64: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("../freeze"), n = e("../makeBuffer"), r = function (e, t, i, n) {
                if (arguments.length >= 4) {
                    var r = Array.prototype.slice.call(arguments, 0), o = r.pop();
                    this.create.apply(this, r), this.setStream(o), this.init()
                }
            };
            r.prototype.moveBlock = function () {
                var e, t = this._bufferOffset + this._pos + this._keepSizeBefore;
                t > 0 && t--;
                var i = this._bufferOffset + this._streamPos - t;
                for (e = 0; i > e; e++)this._bufferBase[e] = this._bufferBase[t + e];
                this._bufferOffset -= t
            }, r.prototype.readBlock = function () {
                if (!this._streamEndWasReached)for (; ;) {
                    var e = -this._bufferOffset + this._blockSize - this._streamPos;
                    if (0 === e)return;
                    var t = this._stream.read(this._bufferBase, this._bufferOffset + this._streamPos, e);
                    if (0 >= t) {
                        this._posLimit = this._streamPos;
                        var i = this._bufferOffset + this._posLimit;
                        return i > this._pointerToLastSafePosition && (this._posLimit = this._pointerToLastSafePosition - this._bufferOffset), void(this._streamEndWasReached = !0)
                    }
                    this._streamPos += t, this._streamPos >= this._pos + this._keepSizeAfter && (this._posLimit = this._streamPos - this._keepSizeAfter)
                }
            }, r.prototype.free = function () {
                this._bufferBase = null
            }, r.prototype.create = function (e, t, i) {
                this._keepSizeBefore = e, this._keepSizeAfter = t;
                var r = e + t + i;
                this._bufferBase && this._blockSize === r || (this.free(), this._blockSize = r, this._bufferBase = n(this._blockSize)), this._pointerToLastSafePosition = this._blockSize - t
            }, r.prototype.setStream = function (e) {
                this._stream = e
            }, r.prototype.releaseStream = function () {
                this._stream = null
            }, r.prototype.init = function () {
                this._bufferOffset = 0, this._pos = 0, this._streamPos = 0, this._streamEndWasReached = !1, this.readBlock()
            }, r.prototype.movePos = function () {
                if (this._pos++, this._pos > this._posLimit) {
                    var e = this._bufferOffset + this._pos;
                    e > this._pointerToLastSafePosition && this.moveBlock(), this.readBlock()
                }
            }, r.prototype.getIndexByte = function (e) {
                return this._bufferBase[this._bufferOffset + this._pos + e]
            }, r.prototype.getMatchLen = function (e, t, i) {
                var n, r;
                for (this._streamEndWasReached && this._pos + e + i > this._streamPos && (i = this._streamPos - (this._pos + e)), t++, n = this._bufferOffset + this._pos + e, r = 0; i > r && this._bufferBase[n + r] === this._bufferBase[n + r - t];)r++;
                return r
            }, r.prototype.getNumAvailableBytes = function () {
                return this._streamPos - this._pos
            }, r.prototype.reduceOffsets = function (e) {
                this._bufferOffset += e, this._posLimit -= e, this._pos -= e, this._streamPos -= e
            }, t.exports = i(r)
        }()
    }, {"../freeze": 77, "../makeBuffer": 78, amdefine: 154}],
    65: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("../freeze"), n = e("../makeBuffer"), r = function () {
                this._windowSize = 0
            };
            r.prototype.create = function (e) {
                this._buffer && this._windowSize === e || (this._buffer = n(e)), this._windowSize = e, this._pos = 0, this._streamPos = 0
            }, r.prototype.flush = function () {
                var e = this._pos - this._streamPos;
                if (0 !== e) {
                    for (; e--;)this._stream.writeByte(this._buffer[this._streamPos++]);
                    this._pos >= this._windowSize && (this._pos = 0), this._streamPos = this._pos
                }
            }, r.prototype.releaseStream = function () {
                this.flush(), this._stream = null
            }, r.prototype.setStream = function (e) {
                this.releaseStream(), this._stream = e
            }, r.prototype.init = function (e) {
                e || (this._streamPos = 0, this._pos = 0)
            }, r.prototype.copyBlock = function (e, t) {
                var i = this._pos - e - 1;
                for (0 > i && (i += this._windowSize); t--;)i >= this._windowSize && (i = 0), this._buffer[this._pos++] = this._buffer[i++], this._pos >= this._windowSize && this.flush()
            }, r.prototype.putByte = function (e) {
                this._buffer[this._pos++] = e, this._pos >= this._windowSize && this.flush()
            }, r.prototype.getByte = function (e) {
                var t = this._pos - e - 1;
                return 0 > t && (t += this._windowSize), this._buffer[t]
            }, i(r.prototype), t.exports = i(r)
        }()
    }, {"../freeze": 77, "../makeBuffer": 78, amdefine: 154}],
    66: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("./freeze"), n = e("./LZMA/Decoder"), r = e("./LZMA/Encoder");
            t.exports = i({Decoder: n, Encoder: r})
        }()
    }, {"./LZMA/Decoder": 68, "./LZMA/Encoder": 69, "./freeze": 77, amdefine: 154}],
    67: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("../freeze"), n = Object.create(null);
            n.kNumRepDistances = 4, n.kNumStates = 12, n.stateInit = function () {
                return 0
            }, n.stateUpdateChar = function (e) {
                return 4 > e ? 0 : 10 > e ? e - 3 : e - 6
            }, n.stateUpdateMatch = function (e) {
                return 7 > e ? 7 : 10
            }, n.stateUpdateRep = function (e) {
                return 7 > e ? 8 : 11
            }, n.stateUpdateShortRep = function (e) {
                return 7 > e ? 9 : 11
            }, n.stateIsCharState = function (e) {
                return 7 > e
            }, n.kNumPosSlotBits = 6, n.kDicLogSizeMin = 0, n.kNumLenToPosStatesBits = 2, n.kNumLenToPosStates = 1 << n.kNumLenToPosStatesBits, n.kMatchMinLen = 2, n.getLenToPosState = function (e) {
                return e -= n.kMatchMinLen, e < n.kNumLenToPosStates ? e : n.kNumLenToPosStates - 1
            }, n.kNumAlignBits = 4, n.kAlignTableSize = 1 << n.kNumAlignBits, n.kAlignMask = n.kAlignTableSize - 1, n.kStartPosModelIndex = 4, n.kEndPosModelIndex = 14, n.kNumPosModels = n.kEndPosModelIndex - n.kStartPosModelIndex, n.kNumFullDistances = 1 << n.kEndPosModelIndex / 2, n.kNumLitPosStatesBitsEncodingMax = 4, n.kNumLitContextBitsMax = 8, n.kNumPosStatesBitsMax = 4, n.kNumPosStatesMax = 1 << n.kNumPosStatesBitsMax, n.kNumPosStatesBitsEncodingMax = 4, n.kNumPosStatesEncodingMax = 1 << n.kNumPosStatesBitsEncodingMax, n.kNumLowLenBits = 3, n.kNumMidLenBits = 3, n.kNumHighLenBits = 8, n.kNumLowLenSymbols = 1 << n.kNumLowLenBits, n.kNumMidLenSymbols = 1 << n.kNumMidLenBits, n.kNumLenSymbols = n.kNumLowLenSymbols + n.kNumMidLenSymbols + (1 << n.kNumHighLenBits), n.kMatchMaxLen = n.kMatchMinLen + n.kNumLenSymbols - 1, t.exports = i(n)
        }()
    }, {"../freeze": 77, amdefine: 154}],
    68: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("./Base"), n = e("../LZ"), r = e("../RangeCoder"), o = r.Encoder.initBitModels, a = function () {
                this._choice = o(null, 2), this._lowCoder = [], this._midCoder = [], this._highCoder = new r.BitTreeDecoder(8), this._numPosStates = 0
            };
            a.prototype.create = function (e) {
                for (; this._numPosStates < e; ++this._numPosStates)this._lowCoder[this._numPosStates] = new r.BitTreeDecoder(3), this._midCoder[this._numPosStates] = new r.BitTreeDecoder(3)
            }, a.prototype.init = function () {
                var e = this._numPosStates;
                for (o(this._choice); e--;)this._lowCoder[e].init(), this._midCoder[e].init();
                this._highCoder.init()
            }, a.prototype.decode = function (e, t) {
                return 0 === e.decodeBit(this._choice, 0) ? this._lowCoder[t].decode(e) : 0 === e.decodeBit(this._choice, 1) ? 8 + this._midCoder[t].decode(e) : 16 + this._highCoder.decode(e)
            };
            var s = function () {
            };
            s.Decoder2 = function () {
                this._decoders = o(null, 768)
            }, s.Decoder2.prototype.init = function () {
                o(this._decoders)
            }, s.Decoder2.prototype.decodeNormal = function (e) {
                var t = 1;
                do t = t << 1 | e.decodeBit(this._decoders, t); while (256 > t);
                return 255 & t
            }, s.Decoder2.prototype.decodeWithMatchByte = function (e, t) {
                var i, n, r = 1;
                do if (i = t >> 7 & 1, t <<= 1, n = e.decodeBit(this._decoders, (1 + i << 8) + r), r = r << 1 | n, i !== n) {
                    for (; 256 > r;)r = r << 1 | e.decodeBit(this._decoders, r);
                    break
                } while (256 > r);
                return 255 & r
            }, s.prototype.create = function (e, t) {
                var i;
                if (!this._coders || this._numPrevBits !== t || this._numPosBits !== e)for (this._numPosBits = e, this._posMask = (1 << e) - 1, this._numPrevBits = t, this._coders = [], i = 1 << this._numPrevBits + this._numPosBits; i--;)this._coders[i] = new s.Decoder2
            }, s.prototype.init = function () {
                for (var e = 1 << this._numPrevBits + this._numPosBits; e--;)this._coders[e].init()
            }, s.prototype.getDecoder = function (e, t) {
                return this._coders[((e & this._posMask) << this._numPrevBits) + ((255 & t) >>> 8 - this._numPrevBits)]
            };
            var l = function () {
                var e;
                for (this._outWindow = new n.OutWindow, this._rangeDecoder = new r.Decoder, this._isMatchDecoders = o(null, i.kNumStates << i.kNumPosStatesBitsMax), this._isRepDecoders = o(null, i.kNumStates), this._isRepG0Decoders = o(null, i.kNumStates), this._isRepG1Decoders = o(null, i.kNumStates), this._isRepG2Decoders = o(null, i.kNumStates), this._isRep0LongDecoders = o(null, i.kNumStates << i.kNumPosStatesBitsMax), this._posSlotDecoder = [], this._posDecoders = o(null, i.kNumFullDistances - i.kEndPosModelIndex), this._posAlignDecoder = new r.BitTreeDecoder(i.kNumAlignBits), this._lenDecoder = new a, this._repLenDecoder = new a, this._literalDecoder = new s, this._dictionarySize = -1, this._dictionarySizeCheck = -1, this._posStateMask = 0, e = 0; e < i.kNumLenToPosStates; e++)this._posSlotDecoder[e] = new r.BitTreeDecoder(i.kNumPosSlotBits)
            };
            l.prototype.setDictionarySize = function (e) {
                return 0 > e ? !1 : (this._dictionarySize !== e && (this._dictionarySize = e, this._dictionarySizeCheck = Math.max(this._dictionarySize, 1), this._outWindow.create(Math.max(this._dictionarySizeCheck, 4096))), !0)
            }, l.prototype.setLcLpPb = function (e, t, n) {
                var r = 1 << n;
                return e > i.kNumLitContextBitsMax || t > 4 || n > i.kNumPosStatesBitsMax ? !1 : (this._literalDecoder.create(t, e), this._lenDecoder.create(r), this._repLenDecoder.create(r), this._posStateMask = r - 1, !0)
            }, l.prototype.init = function () {
                var e = i.kNumLenToPosStates;
                for (this._outWindow.init(!1), o(this._isMatchDecoders), o(this._isRepDecoders), o(this._isRepG0Decoders), o(this._isRepG1Decoders), o(this._isRepG2Decoders), o(this._isRep0LongDecoders), o(this._posDecoders), this._literalDecoder.init(); e--;)this._posSlotDecoder[e].init();
                this._lenDecoder.init(), this._repLenDecoder.init(), this._posAlignDecoder.init(), this._rangeDecoder.init()
            }, l.prototype.code = function (e, t, n) {
                var o, a, s, l, h, c, u, d = 0, p = 0, f = 0, g = 0, m = 0, v = 0;
                for (this._rangeDecoder.setStream(e), this._outWindow.setStream(t), this.init(), o = i.stateInit(); 0 > n || n > m;)if (a = m & this._posStateMask, 0 === this._rangeDecoder.decodeBit(this._isMatchDecoders, (o << i.kNumPosStatesBitsMax) + a))s = this._literalDecoder.getDecoder(m, v), v = i.stateIsCharState(o) ? s.decodeNormal(this._rangeDecoder) : s.decodeWithMatchByte(this._rangeDecoder, this._outWindow.getByte(d)), this._outWindow.putByte(v), o = i.stateUpdateChar(o), m++; else {
                    if (1 === this._rangeDecoder.decodeBit(this._isRepDecoders, o))l = 0, 0 === this._rangeDecoder.decodeBit(this._isRepG0Decoders, o) ? 0 === this._rangeDecoder.decodeBit(this._isRep0LongDecoders, (o << i.kNumPosStatesBitsMax) + a) && (o = i.stateUpdateShortRep(o), l = 1) : (0 === this._rangeDecoder.decodeBit(this._isRepG1Decoders, o) ? h = p : (0 === this._rangeDecoder.decodeBit(this._isRepG2Decoders, o) ? h = f : (h = g, g = f), f = p), p = d, d = h), 0 === l && (l = i.kMatchMinLen + this._repLenDecoder.decode(this._rangeDecoder, a), o = i.stateUpdateRep(o)); else if (g = f, f = p, p = d, l = i.kMatchMinLen + this._lenDecoder.decode(this._rangeDecoder, a), o = i.stateUpdateMatch(o), c = this._posSlotDecoder[i.getLenToPosState(l)].decode(this._rangeDecoder), c >= i.kStartPosModelIndex) {
                        if (u = (c >> 1) - 1, d = (2 | 1 & c) << u, c < i.kEndPosModelIndex)d += r.BitTreeDecoder.reverseDecode(this._posDecoders, d - c - 1, this._rangeDecoder, u); else if (d += this._rangeDecoder.decodeDirectBits(u - i.kNumAlignBits) << i.kNumAlignBits, d += this._posAlignDecoder.reverseDecode(this._rangeDecoder), 0 > d) {
                            if (-1 === d)break;
                            return !1
                        }
                    } else d = c;
                    if (d >= m || d >= this._dictionarySizeCheck)return !1;
                    this._outWindow.copyBlock(d, l), m += l, v = this._outWindow.getByte(0)
                }
                return this._outWindow.flush(), this._outWindow.releaseStream(), this._rangeDecoder.releaseStream(), !0
            }, l.prototype.setDecoderProperties = function (e) {
                var t, i, n, r, o, a, s;
                if (e.length < 5)return !1;
                if (t = 255 & e[0], i = t % 9, t = ~~(t / 9), n = t % 5, r = ~~(t / 5), !this.setLcLpPb(i, n, r))return !1;
                for (o = 0, a = 0, s = 1; 4 > a; a++, s *= 256)o += (255 & e[1 + a]) * s;
                return this.setDictionarySize(o)
            }, l.prototype.setDecoderPropertiesFromStream = function (e) {
                var t, i = [];
                for (t = 0; 5 > t; t++)i[t] = e.readByte();
                return this.setDecoderProperties(i)
            }, t.exports = l
        }()
    }, {"../LZ": 62, "../RangeCoder": 70, "./Base": 67, amdefine: 154}],
    69: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("./Base"), n = e("../RangeCoder"), r = e("../LZ"), o = e("../freeze"), a = e("../makeBuffer"), s = n.Encoder.initBitModels, l = 0, h = 1, c = 268435455, u = 22, d = 32, p = 4096, f = 5, g = function () {
                var e, t = a(2048), i = 22, n = 2;
                for (t[0] = 0, t[1] = 1, e = 2; i > e; e++) {
                    var r, o = 1 << (e >> 1) - 1;
                    for (r = 0; o > r; r++, n++)t[n] = e
                }
                return t
            }(), m = function (e) {
                return 2048 > e ? g[e] : 1 << 21 > e ? g[e >>> 10] + 20 : g[e >>> 20] + 40
            }, v = function (e) {
                return 1 << 17 > e ? g[e >>> 6] + 12 : 1 << 27 > e ? g[e >>> 16] + 32 : g[e >>> 26] + 52
            }, A = function () {
                var e;
                for (this._state = i.stateInit(), this._previousByte = 0, this._repDistances = [], this._repDistances.length = i.kNumRepDistances, this._optimum = [], this._matchFinder = null, this._rangeEncoder = new n.Encoder, this._isMatch = s(null, i.kNumStates << i.kNumPosStatesBitsMax), this._isRep = s(null, i.kNumStates), this._isRepG0 = s(null, i.kNumStates), this._isRepG1 = s(null, i.kNumStates), this._isRepG2 = s(null, i.kNumStates), this._isRep0Long = s(null, i.kNumStates << i.kNumPosStatesBitsMax), this._posSlotEncoder = [], this._posEncoders = s(null, i.kNumFullDistances - i.kEndPosModelIndex), this._posAlignEncoder = new n.BitTreeEncoder(i.kNumAlignBits), this._lenEncoder = new A.LenPriceTableEncoder, this._repMatchLenEncoder = new A.LenPriceTableEncoder, this._literalEncoder = new A.LiteralEncoder, this._matchDistances = [], this._matchDistances.length = 2 * i.kMatchMaxLen + 2, e = 0; e < this._matchDistances.length; e++)this._matchDistances[e] = 0;
                for (this._numFastBytes = d, this._longestMatchLength = 0, this._numDistancePairs = 0, this._additionalOffset = 0, this._optimumEndIndex = 0, this._optimumCurrentIndex = 0, this._longestMatchWasFound = !1, this._posSlotPrices = [], this._distancesPrices = [], this._alignPrices = [], this._alignPriceCount = 0, this._distTableSize = 2 * u, this._posStateBits = 2, this._posStateMask = 3, this._numLiteralPosStateBits = 0, this._numLiteralContextBits = 3, this._dictionarySize = 1 << u, this._dictionarySizePrev = 4294967295, this._numFastBytesPrev = 4294967295, this.nowPos64 = 0, this._finished = !1, this._inStream = null, this._matchFinderType = h, this._writeEndMark = !1, this._needReleaseMFStream = !1, this.reps = [], this.repLens = [], this.backRes = 0, e = 0; p > e; e++)this._optimum[e] = new A.Optimal;
                for (e = 0; e < i.kNumLenToPosStates; e++)this._posSlotEncoder[e] = new n.BitTreeEncoder(i.kNumPosSlotBits);
                this._matchPriceCount = 0, this.processedInSize = [0], this.processedOutSize = [0], this.finished = [!1]
            };
            A.prototype.baseInit = function () {
                var e;
                for (this._state = i.stateInit(), this._previousByte = 0, e = 0; e < i.kNumRepDistances; e++)this._repDistances[e] = 0
            };
            var y = A.LiteralEncoder = function () {
                this._coders = null, this._numPrevBits = -1, this._numPosBits = -1, this._posMask = 0
            };
            y.Encoder2 = function () {
                this._encoders = s(null, 768)
            }, y.Encoder2.prototype.init = function () {
                s(this._encoders)
            }, y.Encoder2.prototype.encode = function (e, t) {
                var i, n = 1;
                for (i = 7; i >= 0; i--) {
                    var r = t >>> i & 1;
                    e.encode(this._encoders, n, r), n = n << 1 | r
                }
            }, y.Encoder2.prototype.encodeMatched = function (e, t, i) {
                var n, r = 1, o = !0;
                for (n = 7; n >= 0; n--) {
                    var a = i >> n & 1, s = r;
                    if (o) {
                        var l = t >>> n & 1;
                        s += 1 + l << 8, o = l === a
                    }
                    e.encode(this._encoders, s, a), r = r << 1 | a
                }
            }, y.Encoder2.prototype.getPrice = function (e, t, i) {
                var r, o, a = 0, s = 1, l = 7;
                if (e)for (; l >= 0; l--)if (o = t >>> l & 1, r = i >>> l & 1, a += n.Encoder.getPrice(this._encoders[(1 + o << 8) + s], r), s = s << 1 | r, o !== r) {
                    l--;
                    break
                }
                for (; l >= 0; l--)r = i >>> l & 1, a += n.Encoder.getPrice(this._encoders[s], r), s = s << 1 | r;
                return a
            }, y.prototype.create = function (e, t) {
                var i;
                if (!this._coders || this._numPrevBits !== t || this._numPosBits !== e) {
                    this._numPosBits = e, this._posMask = (1 << e) - 1, this._numPrevBits = t;
                    var n = 1 << this._numPrevBits + this._numPosBits;
                    for (this._coders = [],
                             i = 0; n > i; i++)this._coders[i] = new y.Encoder2
                }
            }, y.prototype.init = function () {
                var e, t = 1 << this._numPrevBits + this._numPosBits;
                for (e = 0; t > e; e++)this._coders[e].init()
            }, y.prototype.getSubCoder = function (e, t) {
                return this._coders[((e & this._posMask) << this._numPrevBits) + (t >> 8 - this._numPrevBits)]
            };
            var C = A.LenEncoder = function () {
                var e;
                for (this._choice = s(null, 2), this._lowCoder = [], this._midCoder = [], this._highCoder = new n.BitTreeEncoder(i.kNumHighLenBits), e = 0; e < i.kNumPosStatesEncodingMax; e++)this._lowCoder[e] = new n.BitTreeEncoder(i.kNumLowLenBits), this._midCoder[e] = new n.BitTreeEncoder(i.kNumMidLenBits)
            };
            C.prototype.init = function (e) {
                var t;
                for (s(this._choice), t = 0; e > t; t++)this._lowCoder[t].init(), this._midCoder[t].init();
                this._highCoder.init()
            }, C.prototype.encode = function (e, t, n) {
                t < i.kNumLowLenSymbols ? (e.encode(this._choice, 0, 0), this._lowCoder[n].encode(e, t)) : (t -= i.kNumLowLenSymbols, e.encode(this._choice, 0, 1), t < i.kNumMidLenSymbols ? (e.encode(this._choice, 1, 0), this._midCoder[n].encode(e, t)) : (e.encode(this._choice, 1, 1), this._highCoder.encode(e, t - i.kNumMidLenSymbols)))
            }, C.prototype.setPrices = function (e, t, r, o) {
                var a, s = n.Encoder.getPrice0(this._choice[0]), l = n.Encoder.getPrice1(this._choice[0]), h = l + n.Encoder.getPrice0(this._choice[1]), c = l + n.Encoder.getPrice1(this._choice[1]);
                for (a = 0; a < i.kNumLowLenSymbols; a++) {
                    if (a >= t)return;
                    r[o + a] = s + this._lowCoder[e].getPrice(a)
                }
                for (; a < i.kNumLowLenSymbols + i.kNumMidLenSymbols; a++) {
                    if (a >= t)return;
                    r[o + a] = h + this._midCoder[e].getPrice(a - i.kNumLowLenSymbols)
                }
                for (; t > a; a++)r[o + a] = c + this._highCoder.getPrice(a - i.kNumLowLenSymbols - i.kNumMidLenSymbols)
            };
            var I = (i.kNumLowLenSymbols + i.kNumMidLenSymbols, A.LenPriceTableEncoder = function () {
                C.call(this), this._prices = [], this._counters = [], this._tableSize = 0
            });
            I.prototype = Object.create(C.prototype), I.prototype.setTableSize = function (e) {
                this._tableSize = e
            }, I.prototype.getPrice = function (e, t) {
                return this._prices[t * i.kNumLenSymbols + e]
            }, I.prototype.updateTable = function (e) {
                this.setPrices(e, this._tableSize, this._prices, e * i.kNumLenSymbols), this._counters[e] = this._tableSize
            }, I.prototype.updateTables = function (e) {
                var t;
                for (t = 0; e > t; t++)this.updateTable(t)
            }, I.prototype.encode = function (e) {
                return function (t, i, n) {
                    e.call(this, t, i, n), 0 === --this._counters[n] && this.updateTable(n)
                }
            }(I.prototype.encode);
            var b = A.Optimal = function () {
                this.state = 0, this.prev1IsChar = !1, this.prev2 = !1, this.posPrev2 = 0, this.backPrev2 = 0, this.price = 0, this.posPrev = 0, this.backPrev = 0, this.backs0 = 0, this.backs1 = 0, this.backs2 = 0, this.backs3 = 0
            };
            b.prototype.makeAsChar = function () {
                this.backPrev = -1, this.prev1IsChar = !1
            }, b.prototype.makeAsShortRep = function () {
                this.backPrev = 0, this.prev1IsChar = !1
            }, b.prototype.isShortRep = function () {
                return 0 === this.backPrev
            }, A.prototype.create = function () {
                var e;
                if (!this._matchFinder) {
                    var t = new r.BinTree;
                    e = 4, this._matchFinderType === l && (e = 2), t.setType(e), this._matchFinder = t
                }
                this._literalEncoder.create(this._numLiteralPosStateBits, this._numLiteralContextBits), (this._dictionarySize !== this._dictionarySizePrev || this._numFastBytesPrev !== this._numFastBytes) && (this._matchFinder.create(this._dictionarySize, p, this._numFastBytes, i.kMatchMaxLen + 1), this._dictionarySizePrev = this._dictionarySize, this._numFastBytesPrev = this._numFastBytes)
            }, A.prototype.setWriteEndMarkerMode = function (e) {
                this._writeEndMark = e
            }, A.prototype.init = function () {
                var e;
                for (this.baseInit(), this._rangeEncoder.init(), s(this._isMatch), s(this._isRep0Long), s(this._isRep), s(this._isRepG0), s(this._isRepG1), s(this._isRepG2), s(this._posEncoders), this._literalEncoder.init(), e = 0; e < i.kNumLenToPosStates; e++)this._posSlotEncoder[e].init();
                this._lenEncoder.init(1 << this._posStateBits), this._repMatchLenEncoder.init(1 << this._posStateBits), this._posAlignEncoder.init(), this._longestMatchWasFound = !1, this._optimumEndIndex = 0, this._optimumCurrentIndex = 0, this._additionalOffset = 0
            }, A.prototype.readMatchDistances = function () {
                var e = 0;
                return this._numDistancePairs = this._matchFinder.getMatches(this._matchDistances), this._numDistancePairs > 0 && (e = this._matchDistances[this._numDistancePairs - 2], e === this._numFastBytes && (e += this._matchFinder.getMatchLen(e - 1, this._matchDistances[this._numDistancePairs - 1], i.kMatchMaxLen - e))), this._additionalOffset++, e
            }, A.prototype.movePos = function (e) {
                e > 0 && (this._matchFinder.skip(e), this._additionalOffset += e)
            }, A.prototype.getRepLen1Price = function (e, t) {
                return n.Encoder.getPrice0(this._isRepG0[e]) + n.Encoder.getPrice0(this._isRep0Long[(e << i.kNumPosStatesBitsMax) + t])
            }, A.prototype.getPureRepPrice = function (e, t, r) {
                var o;
                return 0 === e ? (o = n.Encoder.getPrice0(this._isRepG0[t]), o += n.Encoder.getPrice1(this._isRep0Long[(t << i.kNumPosStatesBitsMax) + r])) : (o = n.Encoder.getPrice1(this._isRepG0[t]), 1 === e ? o += n.Encoder.getPrice0(this._isRepG1[t]) : (o += n.Encoder.getPrice1(this._isRepG1[t]), o += n.Encoder.getPrice(this._isRepG2[t], e - 2))), o
            }, A.prototype.getRepPrice = function (e, t, n, r) {
                var o = this._repMatchLenEncoder.getPrice(t - i.kMatchMinLen, r);
                return o + this.getPureRepPrice(e, n, r)
            }, A.prototype.getPosLenPrice = function (e, t, n) {
                var r, o = i.getLenToPosState(t);
                return r = e < i.kNumFullDistances ? this._distancesPrices[o * i.kNumFullDistances + e] : this._posSlotPrices[(o << i.kNumPosSlotBits) + v(e)] + this._alignPrices[e & i.kAlignMask], r + this._lenEncoder.getPrice(t - i.kMatchMinLen, n)
            }, A.prototype.backward = function (e) {
                this._optimumEndIndex = e;
                var t = this._optimum[e].posPrev, i = this._optimum[e].backPrev;
                do {
                    this._optimum[e].prev1IsChar && (this._optimum[t].makeAsChar(), this._optimum[t].posPrev = t - 1, this._optimum[e].prev2 && (this._optimum[t - 1].prev1IsChar = !1, this._optimum[t - 1].posPrev = this._optimum[e].posPrev2, this._optimum[t - 1].backPrev = this._optimum[e].backPrev2));
                    var n = t, r = i;
                    i = this._optimum[n].backPrev, t = this._optimum[n].posPrev, this._optimum[n].backPrev = r, this._optimum[n].posPrev = e, e = n
                } while (e > 0);
                return this.backRes = this._optimum[0].backPrev, this._optimumCurrentIndex = this._optimum[0].posPrev, this._optimumCurrentIndex
            }, A.prototype.getOptimum = function (e) {
                if (this._optimumEndIndex !== this._optimumCurrentIndex) {
                    var t = this._optimum[this._optimumCurrentIndex].posPrev - this._optimumCurrentIndex;
                    return this.backRes = this._optimum[this._optimumCurrentIndex].backPrev, this._optimumCurrentIndex = this._optimum[this._optimumCurrentIndex].posPrev, t
                }
                this._optimumCurrentIndex = this._optimumEndIndex = 0;
                var r;
                this._longestMatchWasFound ? (r = this._longestMatchLength, this._longestMatchWasFound = !1) : r = this.readMatchDistances();
                var o = this._numDistancePairs, a = this._matchFinder.getNumAvailableBytes() + 1;
                if (2 > a)return this.backRes = -1, 1;
                a > i.kMatchMaxLen && (a = i.kMatchMaxLen);
                var s, l = 0;
                for (s = 0; s < i.kNumRepDistances; s++)this.reps[s] = this._repDistances[s], this.repLens[s] = this._matchFinder.getMatchLen(-1, this.reps[s], i.kMatchMaxLen), this.repLens[s] > this.repLens[l] && (l = s);
                if (this.repLens[l] >= this._numFastBytes) {
                    this.backRes = l;
                    var h = this.repLens[l];
                    return this.movePos(h - 1), h
                }
                if (r >= this._numFastBytes)return this.backRes = this._matchDistances[o - 1] + i.kNumRepDistances, this.movePos(r - 1), r;
                var u = this._matchFinder.getIndexByte(-1), d = this._matchFinder.getIndexByte(-this._repDistances[0] - 2);
                if (2 > r && u !== d && this.repLens[l] < 2)return this.backRes = -1, 1;
                this._optimum[0].state = this._state;
                var f = e & this._posStateMask;
                this._optimum[1].price = n.Encoder.getPrice0(this._isMatch[(this._state << i.kNumPosStatesBitsMax) + f]) + this._literalEncoder.getSubCoder(e, this._previousByte).getPrice(!i.stateIsCharState(this._state), d, u), this._optimum[1].makeAsChar();
                var g = n.Encoder.getPrice1(this._isMatch[(this._state << i.kNumPosStatesBitsMax) + f]), m = g + n.Encoder.getPrice1(this._isRep[this._state]);
                if (d === u) {
                    var v = m + this.getRepLen1Price(this._state, f);
                    v < this._optimum[1].price && (this._optimum[1].price = v, this._optimum[1].makeAsShortRep())
                }
                var A = r >= this.repLens[l] ? r : this.repLens[l];
                if (2 > A)return this.backRes = this._optimum[1].backPrev, 1;
                this._optimum[1].posPrev = 0, this._optimum[0].backs0 = this.reps[0], this._optimum[0].backs1 = this.reps[1], this._optimum[0].backs2 = this.reps[2], this._optimum[0].backs3 = this.reps[3];
                var y = A;
                do this._optimum[y--].price = c; while (y >= 2);
                for (s = 0; s < i.kNumRepDistances; s++) {
                    var C = this.repLens[s];
                    if (!(2 > C)) {
                        var I = m + this.getPureRepPrice(s, this._state, f);
                        do {
                            var b = I + this._repMatchLenEncoder.getPrice(C - 2, f), w = this._optimum[C];
                            b < w.price && (w.price = b, w.posPrev = 0, w.backPrev = s, w.prev1IsChar = !1)
                        } while (--C >= 2)
                    }
                }
                var x = g + n.Encoder.getPrice0(this._isRep[this._state]);
                if (y = this.repLens[0] >= 2 ? this.repLens[0] + 1 : 2, r >= y) {
                    for (var E = 0; y > this._matchDistances[E];)E += 2;
                    for (; ; y++) {
                        var M = this._matchDistances[E + 1], T = x + this.getPosLenPrice(M, y, f), S = this._optimum[y];
                        if (T < S.price && (S.price = T, S.posPrev = 0, S.backPrev = M + i.kNumRepDistances, S.prev1IsChar = !1), y === this._matchDistances[E] && (E += 2, E === o))break
                    }
                }
                for (var P = 0; ;) {
                    if (P++, P === A)return this.backward(P);
                    var _ = this.readMatchDistances();
                    if (o = this._numDistancePairs, _ >= this._numFastBytes)return this._longestMatchLength = _, this._longestMatchWasFound = !0, this.backward(P);
                    e++;
                    var L, D = this._optimum[P].posPrev;
                    if (this._optimum[P].prev1IsChar ? (D--, this._optimum[P].prev2 ? (L = this._optimum[this._optimum[P].posPrev2].state, L = this._optimum[P].backPrev2 < i.kNumRepDistances ? i.stateUpdateRep(L) : i.stateUpdateMatch(L)) : L = this._optimum[D].state, L = i.stateUpdateChar(L)) : L = this._optimum[D].state, D === P - 1)L = this._optimum[P].isShortRep() ? i.stateUpdateShortRep(L) : i.stateUpdateChar(L); else {
                        var R;
                        this._optimum[P].prev1IsChar && this._optimum[P].prev2 ? (D = this._optimum[P].posPrev2, R = this._optimum[P].backPrev2, L = i.stateUpdateRep(L)) : (R = this._optimum[P].backPrev, L = R < i.kNumRepDistances ? i.stateUpdateRep(L) : i.stateUpdateMatch(L));
                        var B = this._optimum[D];
                        R < i.kNumRepDistances ? 0 === R ? (this.reps[0] = B.backs0, this.reps[1] = B.backs1, this.reps[2] = B.backs2, this.reps[3] = B.backs3) : 1 === R ? (this.reps[0] = B.backs1, this.reps[1] = B.backs0, this.reps[2] = B.backs2, this.reps[3] = B.backs3) : 2 === R ? (this.reps[0] = B.backs2, this.reps[1] = B.backs0, this.reps[2] = B.backs1, this.reps[3] = B.backs3) : (this.reps[0] = B.backs3, this.reps[1] = B.backs0, this.reps[2] = B.backs1, this.reps[3] = B.backs2) : (this.reps[0] = R - i.kNumRepDistances, this.reps[1] = B.backs0, this.reps[2] = B.backs1, this.reps[3] = B.backs2)
                    }
                    this._optimum[P].state = L, this._optimum[P].backs0 = this.reps[0], this._optimum[P].backs1 = this.reps[1], this._optimum[P].backs2 = this.reps[2], this._optimum[P].backs3 = this.reps[3];
                    var O = this._optimum[P].price;
                    u = this._matchFinder.getIndexByte(-1), d = this._matchFinder.getIndexByte(-this.reps[0] - 2), f = e & this._posStateMask;
                    var F = O + n.Encoder.getPrice0(this._isMatch[(L << i.kNumPosStatesBitsMax) + f]) + this._literalEncoder.getSubCoder(e, this._matchFinder.getIndexByte(-2)).getPrice(!i.stateIsCharState(L), d, u), k = this._optimum[P + 1], N = !1;
                    if (F < k.price && (k.price = F, k.posPrev = P, k.makeAsChar(), N = !0), g = O + n.Encoder.getPrice1(this._isMatch[(L << i.kNumPosStatesBitsMax) + f]), m = g + n.Encoder.getPrice1(this._isRep[L]), d === u && !(k.posPrev < P && 0 === k.backPrev)) {
                        var U = m + this.getRepLen1Price(L, f);
                        U <= k.price && (k.price = U, k.posPrev = P, k.makeAsShortRep(), N = !0)
                    }
                    var V = this._matchFinder.getNumAvailableBytes() + 1;
                    if (V = Math.min(p - 1 - P, V), a = V, !(2 > a)) {
                        if (a > this._numFastBytes && (a = this._numFastBytes), !N && d !== u) {
                            var z = Math.min(V - 1, this._numFastBytes), G = this._matchFinder.getMatchLen(0, this.reps[0], z);
                            if (G >= 2) {
                                for (var H = i.stateUpdateChar(L), j = e + 1 & this._posStateMask, W = F + n.Encoder.getPrice1(this._isMatch[(H << i.kNumPosStatesBitsMax) + j]) + n.Encoder.getPrice1(this._isRep[H]), Y = P + 1 + G; Y > A;)this._optimum[++A].price = c;
                                var X = W + this.getRepPrice(0, G, H, j), Q = this._optimum[Y];
                                X < Q.price && (Q.price = X, Q.posPrev = P + 1, Q.backPrev = 0, Q.prev1IsChar = !0, Q.prev2 = !1)
                            }
                        }
                        var Z, q = 2;
                        for (Z = 0; Z < i.kNumRepDistances; Z++) {
                            var K = this._matchFinder.getMatchLen(-1, this.reps[Z], a);
                            if (!(2 > K)) {
                                var J = K;
                                do {
                                    for (; P + K > A;)this._optimum[++A].price = c;
                                    var $ = m + this.getRepPrice(Z, K, L, f), ee = this._optimum[P + K];
                                    $ < ee.price && (ee.price = $, ee.posPrev = P, ee.backPrev = Z, ee.prev1IsChar = !1)
                                } while (--K >= 2);
                                if (K = J, 0 === Z && (q = K + 1), V > K) {
                                    var te = Math.min(V - 1 - K, this._numFastBytes), ie = this._matchFinder.getMatchLen(K, this.reps[Z], te);
                                    if (ie >= 2) {
                                        var ne = i.stateUpdateRep(L), re = e + K & this._posStateMask, oe = m + this.getRepPrice(Z, K, L, f) + n.Encoder.getPrice0(this._isMatch[(ne << i.kNumPosStatesBitsMax) + re]) + this._literalEncoder.getSubCoder(e + K, this._matchFinder.getIndexByte(K - 2)).getPrice(!0, this._matchFinder.getIndexByte(K - 1 - (this.reps[Z] + 1)), this._matchFinder.getIndexByte(K - 1));
                                        ne = i.stateUpdateChar(ne), re = e + K + 1 & this._posStateMask;
                                        for (var ae = oe + n.Encoder.getPrice1(this._isMatch[(ne << i.kNumPosStatesBitsMax) + re]), se = ae + n.Encoder.getPrice1(this._isRep[ne]), le = K + 1 + ie; P + le > A;)this._optimum[++A].price = c;
                                        var he = se + this.getRepPrice(0, ie, ne, re), ce = this._optimum[P + le];
                                        he < ce.price && (ce.price = he, ce.posPrev = P + K + 1, ce.backPrev = 0, ce.prev1IsChar = !0, ce.prev2 = !0, ce.posPrev2 = P, ce.backPrev2 = Z)
                                    }
                                }
                            }
                        }
                        if (_ > a) {
                            for (_ = a, o = 0; _ > this._matchDistances[o];)o += 2;
                            this._matchDistances[o] = _, o += 2
                        }
                        if (_ >= q) {
                            for (x = g + n.Encoder.getPrice0(this._isRep[L]); P + _ > A;)this._optimum[++A].price = c;
                            for (var ue = 0; q > this._matchDistances[ue];)ue += 2;
                            var de;
                            for (de = q; ; de++) {
                                var pe = this._matchDistances[ue + 1], fe = x + this.getPosLenPrice(pe, de, f), ge = this._optimum[P + de];
                                if (fe < ge.price && (ge.price = fe, ge.posPrev = P, ge.backPrev = pe + i.kNumRepDistances, ge.prev1IsChar = !1), de === this._matchDistances[ue]) {
                                    if (V > de) {
                                        var me = Math.min(V - 1 - de, this._numFastBytes), ve = this._matchFinder.getMatchLen(de, pe, me);
                                        if (ve >= 2) {
                                            var Ae = i.stateUpdateMatch(L), ye = e + de & this._posStateMask, Ce = fe + n.Encoder.getPrice0(this._isMatch[(Ae << i.kNumPosStatesBitsMax) + ye]) + this._literalEncoder.getSubCoder(e + de, this._matchFinder.getIndexByte(de - 2)).getPrice(!0, this._matchFinder.getIndexByte(de - (pe + 1) - 1), this._matchFinder.getIndexByte(de - 1));
                                            Ae = i.stateUpdateChar(Ae), ye = e + de + 1 & this._posStateMask;
                                            for (var Ie = Ce + n.Encoder.getPrice1(this._isMatch[(Ae << i.kNumPosStatesBitsMax) + ye]), be = Ie + n.Encoder.getPrice1(this._isRep[Ae]), we = de + 1 + ve; P + we > A;)this._optimum[++A].price = c;
                                            var xe = be + this.getRepPrice(0, ve, Ae, ye), Ee = this._optimum[P + we];
                                            xe < Ee.price && (Ee.price = xe, Ee.posPrev = P + de + 1, Ee.backPrev = 0, Ee.prev1IsChar = !0, Ee.prev2 = !0, Ee.posPrev2 = P, Ee.backPrev2 = pe + i.kNumRepDistances)
                                        }
                                    }
                                    if (ue += 2, ue === o)break
                                }
                            }
                        }
                    }
                }
            }, A.prototype.changePair = function (e, t) {
                var i = 7;
                return 1 << 32 - i > e && t >= e << i
            }, A.prototype.writeEndMarker = function (e) {
                if (this._writeEndMark) {
                    this._rangeEncoder.encode(this._isMatch, (this._state << i.kNumPosStatesBitsMax) + e, 1), this._rangeEncoder.encode(this._isRep, this._state, 0), this._state = i.stateUpdateMatch(this._state);
                    var t = i.kMatchMinLen;
                    this._lenEncoder.encode(this._rangeEncoder, t - i.kMatchMinLen, e);
                    var n = (1 << i.kNumPosSlotBits) - 1, r = i.getLenToPosState(t);
                    this._posSlotEncoder[r].encode(this._rangeEncoder, n);
                    var o = 30, a = (1 << o) - 1;
                    this._rangeEncoder.encodeDirectBits(a >> i.kNumAlignBits, o - i.kNumAlignBits), this._posAlignEncoder.reverseEncode(this._rangeEncoder, a & i.kAlignMask)
                }
            }, A.prototype.flush = function (e) {
                this.releaseMFStream(), this.writeEndMarker(e & this._posStateMask), this._rangeEncoder.flushData(), this._rangeEncoder.flushStream()
            }, A.prototype.codeOneBlock = function (e, t, r) {
                if (e[0] = 0, t[0] = 0, r[0] = !0, this._inStream && (this._matchFinder.setStream(this._inStream), this._matchFinder.init(), this._needReleaseMFStream = !0, this._inStream = null), !this._finished) {
                    this._finished = !0;
                    var o, a, s, l = this.nowPos64;
                    if (0 === this.nowPos64) {
                        if (0 === this._matchFinder.getNumAvailableBytes())return void this.flush(this.nowPos64);
                        this.readMatchDistances(), o = this.nowPos64 & this._posStateMask, this._rangeEncoder.encode(this._isMatch, (this._state << i.kNumPosStatesBitsMax) + o, 0), this._state = i.stateUpdateChar(this._state), a = this._matchFinder.getIndexByte(0 - this._additionalOffset), this._literalEncoder.getSubCoder(this.nowPos64, this._previousByte).encode(this._rangeEncoder, a), this._previousByte = a, this._additionalOffset--, this.nowPos64++
                    }
                    if (0 === this._matchFinder.getNumAvailableBytes())return void this.flush(this.nowPos64);
                    for (; ;) {
                        var h = this.getOptimum(this.nowPos64), c = this.backRes;
                        o = this.nowPos64 & this._posStateMask;
                        var u = (this._state << i.kNumPosStatesBitsMax) + o;
                        if (1 === h && -1 === c) {
                            this._rangeEncoder.encode(this._isMatch, u, 0), a = this._matchFinder.getIndexByte(-this._additionalOffset);
                            var d = this._literalEncoder.getSubCoder(this.nowPos64, this._previousByte);
                            if (i.stateIsCharState(this._state))d.encode(this._rangeEncoder, a); else {
                                var p = this._matchFinder.getIndexByte(-this._repDistances[0] - 1 - this._additionalOffset);
                                d.encodeMatched(this._rangeEncoder, p, a)
                            }
                            this._previousByte = a, this._state = i.stateUpdateChar(this._state)
                        } else {
                            if (this._rangeEncoder.encode(this._isMatch, u, 1), c < i.kNumRepDistances) {
                                this._rangeEncoder.encode(this._isRep, this._state, 1), 0 === c ? (this._rangeEncoder.encode(this._isRepG0, this._state, 0), 1 === h ? this._rangeEncoder.encode(this._isRep0Long, u, 0) : this._rangeEncoder.encode(this._isRep0Long, u, 1)) : (this._rangeEncoder.encode(this._isRepG0, this._state, 1), 1 === c ? this._rangeEncoder.encode(this._isRepG1, this._state, 0) : (this._rangeEncoder.encode(this._isRepG1, this._state, 1), this._rangeEncoder.encode(this._isRepG2, this._state, c - 2))), 1 === h ? this._state = i.stateUpdateShortRep(this._state) : (this._repMatchLenEncoder.encode(this._rangeEncoder, h - i.kMatchMinLen, o), this._state = i.stateUpdateRep(this._state));
                                var f = this._repDistances[c];
                                if (0 !== c) {
                                    for (s = c; s >= 1; s--)this._repDistances[s] = this._repDistances[s - 1];
                                    this._repDistances[0] = f
                                }
                            } else {
                                this._rangeEncoder.encode(this._isRep, this._state, 0), this._state = i.stateUpdateMatch(this._state), this._lenEncoder.encode(this._rangeEncoder, h - i.kMatchMinLen, o), c -= i.kNumRepDistances;
                                var g = m(c), v = i.getLenToPosState(h);
                                if (this._posSlotEncoder[v].encode(this._rangeEncoder, g), g >= i.kStartPosModelIndex) {
                                    var A = (g >>> 1) - 1, y = (2 | 1 & g) << A, C = c - y;
                                    g < i.kEndPosModelIndex ? n.BitTreeEncoder.reverseEncode(this._posEncoders, y - g - 1, this._rangeEncoder, A, C) : (this._rangeEncoder.encodeDirectBits(C >> i.kNumAlignBits, A - i.kNumAlignBits), this._posAlignEncoder.reverseEncode(this._rangeEncoder, C & i.kAlignMask), this._alignPriceCount++)
                                }
                                var I = c;
                                for (s = i.kNumRepDistances - 1; s >= 1; s--)this._repDistances[s] = this._repDistances[s - 1];
                                this._repDistances[0] = I, this._matchPriceCount++
                            }
                            this._previousByte = this._matchFinder.getIndexByte(h - 1 - this._additionalOffset)
                        }
                        if (this._additionalOffset -= h, this.nowPos64 += h, 0 === this._additionalOffset) {
                            if (this._matchPriceCount >= 128 && this.fillDistancesPrices(), this._alignPriceCount >= i.kAlignTableSize && this.fillAlignPrices(), e[0] = this.nowPos64, t[0] = this._rangeEncoder.getProcessedSizeAdd(), 0 === this._matchFinder.getNumAvailableBytes())return void this.flush(this.nowPos64);
                            if (this.nowPos64 - l >= 4096)return this._finished = !1, void(r[0] = !1)
                        }
                    }
                }
            }, A.prototype.releaseMFStream = function () {
                this._matchFinder && this._needReleaseMFStream && (this._matchFinder.releaseStream(), this._needReleaseMFStream = !1)
            }, A.prototype.setOutStream = function (e) {
                this._rangeEncoder.setStream(e)
            }, A.prototype.releaseOutStream = function () {
                this._rangeEncoder.releaseStream()
            }, A.prototype.releaseStreams = function () {
                this.releaseMFStream(), this.releaseOutStream()
            }, A.prototype.setStreams = function (e, t, n, r) {
                this._inStream = e, this._finished = !1, this.create(), this.setOutStream(t), this.init(), this.fillDistancesPrices(), this.fillAlignPrices(), this._lenEncoder.setTableSize(this._numFastBytes + 1 - i.kMatchMinLen), this._lenEncoder.updateTables(1 << this._posStateBits), this._repMatchLenEncoder.setTableSize(this._numFastBytes + 1 - i.kMatchMinLen), this._repMatchLenEncoder.updateTables(1 << this._posStateBits), this.nowPos64 = 0
            }, A.prototype.code = function (e, t, i, n, r) {
                this._needReleaseMFStream = !1;
                try {
                    for (this.setStreams(e, t, i, n); ;) {
                        if (this.codeOneBlock(this.processedInSize, this.processedOutSize, this.finished), this.finished[0])return;
                        r && r.setProgress(this.processedInSize[0], this.processedOutSize[0])
                    }
                } finally {
                    this.releaseStreams()
                }
            }, A.prototype.writeCoderProperties = function (e) {
                var t, i = a(f);
                for (i[0] = 9 * (5 * this._posStateBits + this._numLiteralPosStateBits) + this._numLiteralContextBits, t = 0; 4 > t; t++)i[1 + t] = this._dictionarySize >>> 8 * t;
                for (t = 0; f > t; t++)e.writeByte(i[t])
            }, A.prototype.fillDistancesPrices = function () {
                var e = [];
                e.length = i.kNumFullDistances;
                var t, r;
                for (t = i.kStartPosModelIndex; t < i.kNumFullDistances; t++) {
                    r = m(t);
                    var o = (r >>> 1) - 1, a = (2 | 1 & r) << o;
                    e[t] = n.BitTreeEncoder.reverseGetPrice(this._posEncoders, a - r - 1, o, t - a)
                }
                for (var s = 0; s < i.kNumLenToPosStates; s++) {
                    var l = this._posSlotEncoder[s], h = s << i.kNumPosSlotBits;
                    for (r = 0; r < this._distTableSize; r++)this._posSlotPrices[h + r] = l.getPrice(r);
                    for (r = i.kEndPosModelIndex; r < this._distTableSize; r++)this._posSlotPrices[h + r] += (r >>> 1) - 1 - i.kNumAlignBits << n.Encoder.kNumBitPriceShiftBits;
                    var c = s * i.kNumFullDistances;
                    for (t = 0; t < i.kStartPosModelIndex; t++)this._distancesPrices[c + t] = this._posSlotPrices[h + t];
                    for (; t < i.kNumFullDistances; t++)this._distancesPrices[c + t] = this._posSlotPrices[h + m(t)] + e[t]
                }
                this._matchPriceCount = 0
            }, A.prototype.fillAlignPrices = function () {
                var e;
                for (e = 0; e < i.kAlignTableSize; e++)this._alignPrices[e] = this._posAlignEncoder.reverseGetPrice(e);
                this._alignPriceCount = 0
            }, A.prototype.setAlgorithm = function (e) {
                return !0
            }, A.prototype.setDictionarySize = function (e) {
                var t = 29;
                if (e < 1 << i.kDicLogSizeMin || e > 1 << t)return !1;
                this._dictionarySize = e;
                for (var n = 0; e > 1 << n;)n++;
                return this._distTableSize = 2 * n, !0
            }, A.prototype.setNumFastBytes = function (e) {
                return 5 > e || e > i.kMatchMaxLen ? !1 : (this._numFastBytes = e, !0)
            }, A.prototype.setMatchFinder = function (e) {
                if (0 > e || e > 2)return !1;
                var t = this._matchFinderType;
                return this._matchFinderType = e, this._matchFinder && t != this._matchFinderType && (this._dictionarySizePrev = -1, this._matchFinder = null), !0
            }, A.prototype.setLcLpPb = function (e, t, n) {
                return 0 > t || t > i.kNumLitPosStatesBitsEncodingMax || 0 > e || e > i.kNumLitContextBitsMax || 0 > n || n > i.kNumPosStatesBitsEncodingMax ? !1 : (this._numLiteralPosStateBits = t, this._numLiteralContextBits = e, this._posStateBits = n, this._posStateMask = (1 << this._posStateBits) - 1, !0)
            }, A.prototype.setEndMarkerMode = function (e) {
                this._writeEndMark = e
            }, A.EMatchFinderTypeBT2 = l, A.EMatchFinderTypeBT4 = h, o(A.prototype), t.exports = o(A)
        }()
    }, {"../LZ": 62, "../RangeCoder": 70, "../freeze": 77, "../makeBuffer": 78, "./Base": 67, amdefine: 154}],
    70: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("./freeze"), n = e("./RangeCoder/BitTreeDecoder"), r = e("./RangeCoder/BitTreeEncoder"), o = e("./RangeCoder/Decoder"), a = e("./RangeCoder/Encoder");
            t.exports = i({BitTreeDecoder: n, BitTreeEncoder: r, Decoder: o, Encoder: a})
        }()
    }, {
        "./RangeCoder/BitTreeDecoder": 71,
        "./RangeCoder/BitTreeEncoder": 72,
        "./RangeCoder/Decoder": 73,
        "./RangeCoder/Encoder": 74,
        "./freeze": 77,
        amdefine: 154
    }],
    71: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("../freeze"), n = e("./Encoder"), r = function (e) {
                this._numBitLevels = e, this.init()
            };
            r.prototype.init = function () {
                this._models = n.initBitModels(null, 1 << this._numBitLevels)
            }, r.prototype.decode = function (e) {
                for (var t = 1, i = this._numBitLevels; i--;)t = t << 1 | e.decodeBit(this._models, t);
                return t - (1 << this._numBitLevels)
            }, r.prototype.reverseDecode = function (e) {
                for (var t, i = 1, n = 0, r = 0; r < this._numBitLevels; ++r)t = e.decodeBit(this._models, i), i = i << 1 | t, n |= t << r;
                return n
            }, r.reverseDecode = function (e, t, i, n) {
                for (var r, o = 1, a = 0, s = 0; n > s; ++s)r = i.decodeBit(e, t + o), o = o << 1 | r, a |= r << s;
                return a
            }, i(r.prototype), t.exports = i(r)
        }()
    }, {"../freeze": 77, "./Encoder": 74, amdefine: 154}],
    72: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("../freeze"), n = e("./Encoder"), r = function (e) {
                this._numBitLevels = e, this.init()
            };
            r.prototype.init = function () {
                this._models = n.initBitModels(null, 1 << this._numBitLevels)
            }, r.prototype.encode = function (e, t) {
                var i, n = 1;
                for (i = this._numBitLevels; i > 0;) {
                    i--;
                    var r = t >>> i & 1;
                    e.encode(this._models, n, r), n = n << 1 | r
                }
            }, r.prototype.reverseEncode = function (e, t) {
                var i, n = 1;
                for (i = 0; i < this._numBitLevels; i++) {
                    var r = 1 & t;
                    e.encode(this._models, n, r), n = n << 1 | r, t >>>= 1
                }
            }, r.reverseEncode = function (e, t, i, n, r) {
                var o, a = 1;
                for (o = 0; n > o; o++) {
                    var s = 1 & r;
                    i.encode(e, t + a, s), a = a << 1 | s, r >>>= 1
                }
            }, r.prototype.getPrice = function (e) {
                var t, i = 0, r = 1;
                for (t = this._numBitLevels; t > 0;) {
                    t--;
                    var o = e >>> t & 1;
                    i += n.getPrice(this._models[r], o), r = r << 1 | o
                }
                return i
            }, r.prototype.reverseGetPrice = function (e) {
                var t, i = 0, r = 1;
                for (t = this._numBitLevels; t > 0; t--) {
                    var o = 1 & e;
                    e >>>= 1, i += n.getPrice(this._models[r], o), r = r << 1 | o
                }
                return i
            }, r.reverseGetPrice = function (e, t, i, r) {
                var o, a = 0, s = 1;
                for (o = i; o > 0; o--) {
                    var l = 1 & r;
                    r >>>= 1, a += n.getPrice(e[t + s], l), s = s << 1 | l
                }
                return a
            }, i(r.prototype), t.exports = i(r)
        }()
    }, {"../freeze": 77, "./Encoder": 74, amdefine: 154}],
    73: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("../freeze"), n = function (e) {
                e && (this.setStream(e), this.init())
            };
            n.prototype.setStream = function (e) {
                this._stream = e
            }, n.prototype.releaseStream = function () {
                this._stream = null
            }, n.prototype.init = function () {
                var e = 5;
                for (this._code = 0, this._range = -1; e--;)this._code = this._code << 8 | this._stream.readByte()
            }, n.prototype.decodeDirectBits = function (e) {
                for (var t, i = 0, n = e; n--;)this._range >>>= 1, t = this._code - this._range >>> 31, this._code -= this._range & t - 1, i = i << 1 | 1 - t, 0 === (4278190080 & this._range) && (this._code = this._code << 8 | this._stream.readByte(), this._range <<= 8);
                return i
            }, n.prototype.decodeBit = function (e, t) {
                var i = e[t], n = (this._range >>> 11) * i;
                return (2147483648 ^ this._code) < (2147483648 ^ n) ? (this._range = n, e[t] += 2048 - i >>> 5, 0 === (4278190080 & this._range) && (this._code = this._code << 8 | this._stream.readByte(), this._range <<= 8), 0) : (this._range -= n, this._code -= n, e[t] -= i >>> 5, 0 === (4278190080 & this._range) && (this._code = this._code << 8 | this._stream.readByte(), this._range <<= 8), 1)
            }, i(n.prototype), t.exports = i(n)
        }()
    }, {"../freeze": 77, amdefine: 154}],
    74: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("../freeze"), n = 4294967295, r = 16777215, o = 255, a = 4278190080, s = 11, l = 1 << s, h = 5, c = 2, u = 6, d = function (e) {
                this.init(), e && this.setStream(e)
            };
            d.prototype.setStream = function (e) {
                this._stream = e
            }, d.prototype.releaseStream = function () {
                this._stream = null
            }, d.prototype.init = function () {
                this._position = 0, this.low = 0, this.range = n, this._cacheSize = 1, this._cache = 0
            }, d.prototype.flushData = function () {
                var e;
                for (e = 0; 5 > e; e++)this.shiftLow()
            }, d.prototype.flushStream = function () {
                this._stream.flush && this._stream.flush()
            }, d.prototype.shiftLow = function () {
                var e = this.low > n ? 1 : 0;
                if (this.low < a || e) {
                    this._position += this._cacheSize;
                    var t = this._cache;
                    do this._stream.writeByte(t + e & o), t = o; while (0 !== --this._cacheSize);
                    this._cache = this.low >>> 24
                }
                this._cacheSize++, this.low = 256 * (this.low & r)
            }, d.prototype.encodeDirectBits = function (e, t) {
                var i, n;
                for (n = 1 << t - 1, i = t - 1; i >= 0; i--, n >>>= 1)this.range >>>= 1, e & n && (this.low += this.range), this.range <= r && (this.range *= 256, this.shiftLow())
            }, d.prototype.getProcessedSizeAdd = function () {
                return this._cacheSize + this._position + 4
            }, d.initBitModels = function (e, t) {
                var i;
                for (t && !e && ("undefined" != typeof Uint16Array ? e = new Uint16Array(t) : (e = [], e.length = t)), i = 0; i < e.length; i++)e[i] = l >>> 1;
                return e
            }, d.prototype.encode = function (e, t, i) {
                var n = e[t], o = (this.range >>> s) * n;
                0 === i ? (this.range = o, e[t] = n + (l - n >>> h)) : (this.low += o, this.range -= o, e[t] = n - (n >>> h)), this.range <= r && (this.range *= 256, this.shiftLow())
            };
            var p = [];
            "undefined" != typeof Uint32Array && (p = new Uint32Array(l >>> c)), function () {
                var e, t, i = s - c;
                for (e = i - 1; e >= 0; e--) {
                    var n = 1 << i - e - 1, r = 1 << i - e;
                    for (t = n; r > t; t++)p[t] = (e << u) + (r - t << u >>> i - e - 1)
                }
            }(), d.getPrice = function (e, t) {
                return p[((e - t ^ -t) & l - 1) >>> c]
            }, d.getPrice0 = function (e) {
                return p[e >>> c]
            }, d.getPrice1 = function (e) {
                return p[l - e >>> c]
            }, d.kNumBitPriceShiftBits = u, i(d.prototype), t.exports = i(d)
        }()
    }, {"../freeze": 77, amdefine: 154}],
    75: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("./freeze"), n = function () {
            };
            n.prototype.readByte = function () {
                throw new Error("abstract method readByte() not implemented")
            }, n.prototype.read = function (e, t, i) {
                for (var n = 0; i > n;) {
                    var r = this.readByte();
                    if (0 > r)return 0 === n ? -1 : n;
                    e[t++] = r, n++
                }
                return n
            }, n.prototype.seek = function (e) {
                throw new Error("abstract method seek() not implemented")
            }, n.prototype.writeByte = function (e) {
                throw new Error("abstract method readByte() not implemented")
            }, n.prototype.write = function (e, t, i) {
                var n;
                for (n = 0; i > n; n++)this.writeByte(e[t++]);
                return i
            }, n.prototype.flush = function () {
            }, t.exports = i(n)
        }()
    }, {"./freeze": 77, amdefine: 154}],
    76: [function (e, t, i) {
        (function (i) {
            if ("function" != typeof n)var n = e("amdefine")(t);
            !function () {
                "use strict";
                var n = e("./freeze"), r = (e("./makeBuffer"), e("./LZMA")), o = e("./Stream"), a = function (e) {
                    if ("readByte" in e)return e;
                    var t = new o;
                    return t.pos = 0, t.size = e.length, t.readByte = function () {
                        return this.eof() ? -1 : e[this.pos++]
                    }, t.read = function (t, i, n) {
                        for (var r = 0; n > r && this.pos < e.length;)t[i++] = e[this.pos++], r++;
                        return r
                    }, t.seek = function (e) {
                        this.pos = e
                    }, t.eof = function () {
                        return this.pos >= e.length
                    }, t
                }, s = function (e) {
                    var t = new o, n = !0;
                    if (e)if ("number" == typeof e)t.buffer = new i(e), n = !1; else {
                        if ("writeByte" in e)return e;
                        t.buffer = e, n = !1
                    } else t.buffer = new i(16384);
                    return t.pos = 0, t.writeByte = function (e) {
                        if (n && this.pos >= this.buffer.length) {
                            var t = new i(2 * this.buffer.length);
                            this.buffer.copy(t), this.buffer = t
                        }
                        this.buffer[this.pos++] = e
                    }, t.getBuffer = function () {
                        if (this.pos !== this.buffer.length) {
                            if (!n)throw new TypeError("outputsize does not match decoded input");
                            var e = new i(this.pos);
                            this.buffer.copy(e, 0, 0, this.pos), this.buffer = e
                        }
                        return this.buffer
                    }, t._coerced = !0, t
                }, l = Object.create(null);
                l.decompress = function (e, t, i, n) {
                    var o = new r.Decoder;
                    if (!o.setDecoderProperties(e))throw"Incorrect stream properties";
                    if (!o.code(t, i, n))throw"Error in data stream";
                    return !0
                }, l.decompressFile = function (e, t) {
                    var i, n, o = new r.Decoder;
                    if (e = a(e), !o.setDecoderPropertiesFromStream(e))throw"Incorrect stream properties";
                    var l = 0;
                    for (i = 0, n = 1; 4 > i; i++, n *= 256)l += e.readByte() * n;
                    var h = 0;
                    for (i = 0, n = 1; 4 > i; i++, n *= 256)h += e.readByte() * n;
                    var c = l + 4294967296 * h;
                    if (4294967295 === l && 4294967295 === h ? c = -1 : h >= 2097152 && (c = -1), c >= 0 && !t && (t = c), t = s(t), !o.code(e, t, c))throw"Error in data stream";
                    return "getBuffer" in t ? t.getBuffer() : !0
                };
                var h = [{a: 0, d: 0, fb: 0, mf: null, lc: 0, lp: 0, pb: 0}, {
                    a: 0,
                    d: 16,
                    fb: 64,
                    mf: "hc4",
                    lc: 3,
                    lp: 0,
                    pb: 2
                }, {a: 0, d: 20, fb: 64, mf: "hc4", lc: 3, lp: 0, pb: 2}, {
                    a: 1,
                    d: 19,
                    fb: 64,
                    mf: "bt4",
                    lc: 3,
                    lp: 0,
                    pb: 2
                }, {a: 2, d: 20, fb: 64, mf: "bt4", lc: 3, lp: 0, pb: 2}, {
                    a: 2,
                    d: 21,
                    fb: 128,
                    mf: "bt4",
                    lc: 3,
                    lp: 0,
                    pb: 2
                }, {a: 2, d: 22, fb: 128, mf: "bt4", lc: 3, lp: 0, pb: 2}, {
                    a: 2,
                    d: 23,
                    fb: 128,
                    mf: "bt4",
                    lc: 3,
                    lp: 0,
                    pb: 2
                }, {a: 2, d: 24, fb: 255, mf: "bt4", lc: 3, lp: 0, pb: 2}, {
                    a: 2,
                    d: 25,
                    fb: 255,
                    mf: "bt4",
                    lc: 3,
                    lp: 0,
                    pb: 2
                }], c = function (e) {
                    var t = new r.Encoder, i = {a: 1, d: 23, fb: 128, lc: 3, lp: 0, pb: 2, mf: "bt4", eos: !1};
                    if (e) {
                        "number" == typeof e && (e = h[e]);
                        var n;
                        for (n in e)Object.prototype.hasOwnProperty.call(e, n) && (i[n] = e[n])
                    }
                    return t.setAlgorithm(i.a), t.setDictionarySize(1 << +i.d), t.setNumFastBytes(+i.fb), t.setMatchFinder("bt4" === i.mf ? r.Encoder.EMatchFinderTypeBT4 : r.Encoder.EMatchFinderTypeBT2), t.setLcLpPb(+i.lc, +i.lp, +i.pb), t.setEndMarkerMode(!!i.eos), t
                };
                l.compress = function (e, t, i, n) {
                    var r = c(i);
                    return r.writeCoderProperties(t), r.code(e, t, -1, -1, {
                        setProgress: function (e, t) {
                            n && n(e, t)
                        }
                    }), !0
                }, l.compressFile = function (e, t, i, n) {
                    var r = c(i);
                    e = a(e);
                    var o;
                    "size" in e && e.size >= 0 ? o = e.size : (o = -1, r.setEndMarkerMode(!0)), t = s(t), r.writeCoderProperties(t);
                    var l = function (e) {
                        var i;
                        for (i = 0; 8 > i; i++)t.writeByte(255 & e), e = Math.floor(e / 256)
                    };
                    return l(o), r.code(e, t, o, -1, {
                        setProgress: function (e, t) {
                            n && n(e, t)
                        }
                    }), "getBuffer" in t ? t.getBuffer() : !0
                }, t.exports = n(l)
            }()
        }).call(this, e("buffer").Buffer)
    }, {"./LZMA": 66, "./Stream": 75, "./freeze": 77, "./makeBuffer": 78, amdefine: 154, buffer: 156}],
    77: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            Object.freeze ? t.exports = Object.freeze : t.exports = function (e) {
                return e
            }
        }()
    }, {amdefine: 154}],
    78: [function (e, t, i) {
        (function (i) {
            if ("function" != typeof n)var n = e("amdefine")(t);
            !function () {
                "use strict";
                var e = function (e) {
                    var t, i = [];
                    for (t = 0; e > t; t++)i[t] = 0;
                    return i
                };
                "undefined" != typeof Uint8Array ? e = function (e) {
                    return new Uint8Array(e)
                } : "undefined" != typeof i && (e = function (e) {
                    var t = new i(e);
                    return t.fill(0), t
                }), t.exports = e
            }()
        }).call(this, e("buffer").Buffer)
    }, {amdefine: 154, buffer: 156}],
    79: [function (e, t, i) {
        if ("function" != typeof n)var n = e("amdefine")(t);
        !function () {
            "use strict";
            var i = e("./lib/freeze"), n = e("./lib/LZ"), r = e("./lib/LZMA"), o = e("./lib/RangeCoder"), a = e("./lib/Stream"), s = e("./lib/Util");
            t.exports = i({
                version: "0.9.0",
                LZ: n,
                LZMA: r,
                RangeCoder: o,
                Stream: a,
                Util: s,
                compress: s.compress,
                compressFile: s.compressFile,
                decompress: s.decompress,
                decompressFile: s.decompressFile
            })
        }()
    }, {
        "./lib/LZ": 62,
        "./lib/LZMA": 66,
        "./lib/RangeCoder": 70,
        "./lib/Stream": 75,
        "./lib/Util": 76,
        "./lib/freeze": 77,
        amdefine: 154
    }],
    80: [function (e, t, i) {
        "use strict";
        var n = e("three");
        n.EffectComposer = function (e, t) {
            if (this.renderer = e, void 0 === t) {
                var i = {
                    minFilter: n.LinearFilter,
                    magFilter: n.LinearFilter,
                    format: n.RGBAFormat,
                    stencilBuffer: !1
                }, r = e.getSize();
                t = new n.WebGLRenderTarget(r.width, r.height, i);
            }
            this.renderTarget1 = t, this.renderTarget2 = t.clone(), this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2, this.passes = [], void 0 === n.CopyShader && console.error("THREE.EffectComposer relies on THREE.CopyShader"), this.copyPass = new n.ShaderPass(n.CopyShader)
        }, n.EffectComposer.prototype = {
            swapBuffers: function () {
                var e = this.readBuffer;
                this.readBuffer = this.writeBuffer, this.writeBuffer = e
            }, addPass: function (e) {
                this.passes.push(e)
            }, insertPass: function (e, t) {
                this.passes.splice(t, 0, e)
            }, render: function (e) {
                this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2;
                var t, i, r = !1, o = this.passes.length;
                for (i = 0; o > i; i++)if (t = this.passes[i], t.enabled) {
                    if (t.render(this.renderer, this.writeBuffer, this.readBuffer, e, r), t.needsSwap) {
                        if (r) {
                            var a = this.renderer.context;
                            a.stencilFunc(a.NOTEQUAL, 1, 4294967295), this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, e), a.stencilFunc(a.EQUAL, 1, 4294967295)
                        }
                        this.swapBuffers()
                    }
                    t instanceof n.MaskPass ? r = !0 : t instanceof n.ClearMaskPass && (r = !1)
                }
            }, reset: function (e) {
                if (void 0 === e) {
                    var t = this.renderer.getSize();
                    e = this.renderTarget1.clone(), e.setSize(t.width, t.height)
                }
                this.renderTarget1.dispose(), this.renderTarget2.dispose(), this.renderTarget1 = e, this.renderTarget2 = e.clone(), this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2
            }, setSize: function (e, t) {
                this.renderTarget1.setSize(e, t), this.renderTarget2.setSize(e, t)
            }
        }
    }, {three: 175}],
    81: [function (e, t, i) {
        "use strict";
        var n = e("three");
        n.MaskPass = function (e, t) {
            this.scene = e, this.camera = t, this.enabled = !0, this.clear = !0, this.needsSwap = !1, this.inverse = !1
        }, n.MaskPass.prototype = {
            render: function (e, t, i, n) {
                var r = e.context;
                r.colorMask(!1, !1, !1, !1), r.depthMask(!1);
                var o, a;
                this.inverse ? (o = 0, a = 1) : (o = 1, a = 0), r.enable(r.STENCIL_TEST), r.stencilOp(r.REPLACE, r.REPLACE, r.REPLACE), r.stencilFunc(r.ALWAYS, o, 4294967295), r.clearStencil(a), e.render(this.scene, this.camera, i, this.clear), e.render(this.scene, this.camera, t, this.clear), r.colorMask(!0, !0, !0, !0), r.depthMask(!0), r.stencilFunc(r.EQUAL, 1, 4294967295), r.stencilOp(r.KEEP, r.KEEP, r.KEEP)
            }
        }, n.ClearMaskPass = function () {
            this.enabled = !0
        }, n.ClearMaskPass.prototype = {
            render: function (e, t, i, n) {
                var r = e.context;
                r.disable(r.STENCIL_TEST)
            }
        }
    }, {three: 175}],
    82: [function (e, t, i) {
        "use strict";
        var n = e("three");
        n.RenderPass = function (e, t, i, r, o) {
            this.scene = e, this.camera = t, this.overrideMaterial = i, this.clearColor = r, this.clearAlpha = void 0 !== o ? o : 1, this.oldClearColor = new n.Color, this.oldClearAlpha = 1, this.enabled = !0, this.clear = !0, this.needsSwap = !1
        }, n.RenderPass.prototype = {
            render: function (e, t, i, n) {
                this.scene.overrideMaterial = this.overrideMaterial, this.clearColor && (this.oldClearColor.copy(e.getClearColor()), this.oldClearAlpha = e.getClearAlpha(), e.setClearColor(this.clearColor, this.clearAlpha)), e.render(this.scene, this.camera, i, this.clear), this.clearColor && e.setClearColor(this.oldClearColor, this.oldClearAlpha), this.scene.overrideMaterial = null
            }
        }
    }, {three: 175}],
    83: [function (e, t, i) {
        "use strict";
        var n = e("three");
        n.ShaderPass = function (e, t) {
            this.textureID = void 0 !== t ? t : "tDiffuse", e instanceof n.ShaderMaterial ? (this.uniforms = e.uniforms, this.material = e) : e && (this.uniforms = n.UniformsUtils.clone(e.uniforms), this.material = new n.ShaderMaterial({
                defines: e.defines || {},
                uniforms: this.uniforms,
                vertexShader: e.vertexShader,
                fragmentShader: e.fragmentShader
            })), this.renderToScreen = !1, this.enabled = !0, this.needsSwap = !0, this.clear = !1, this.camera = new n.OrthographicCamera(-1, 1, 1, -1, 0, 1), this.scene = new n.Scene, this.quad = new n.Mesh(new n.PlaneBufferGeometry(2, 2), null), this.scene.add(this.quad)
        }, n.ShaderPass.prototype = {
            render: function (e, t, i, n) {
                this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = i), this.quad.material = this.material, this.renderToScreen ? e.render(this.scene, this.camera) : e.render(this.scene, this.camera, t, this.clear)
            }
        }
    }, {three: 175}],
    84: [function (e, t, i) {
        "use strict";
        var n = e("three");
        n.CopyShader = {
            uniforms: {tDiffuse: {type: "t", value: null}, opacity: {type: "f", value: 1}},
            vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform float opacity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 texel = texture2D( tDiffuse, vUv );", "gl_FragColor = opacity * texel;", "}"].join("\n")
        }
    }, {three: 175}],
    85: [function (e, t, i) {
        "use strict";
        var n = e("three");
        n.HorizontalBlurShader = {
            uniforms: {tDiffuse: {type: "t", value: null}, h: {type: "f", value: 1 / 512}},
            vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform sampler2D tDiffuse;", "uniform float h;", "varying vec2 vUv;", "void main() {", "vec4 sum = vec4( 0.0 );", "sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;", "sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;", "sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;", "sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;", "sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;", "sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;", "sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;", "sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;", "sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;", "gl_FragColor = sum;", "}"].join("\n")
        }
    }, {three: 175}],
    86: [function (e, t, i) {
        "use strict";
        var n = e("three");
        n.VerticalBlurShader = {
            uniforms: {tDiffuse: {type: "t", value: null}, v: {type: "f", value: 1 / 512}},
            vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform sampler2D tDiffuse;", "uniform float v;", "varying vec2 vUv;", "void main() {", "vec4 sum = vec4( 0.0 );", "sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;", "sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;", "sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;", "sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;", "sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;", "sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;", "sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;", "sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;", "sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;", "gl_FragColor = sum;", "}"].join("\n")
        }
    }, {three: 175}],
    87: [function (e, t, i) {
        "use strict";
        var n = e("three");
        !function () {
            if ("performance" in window == 0 && (window.performance = {}), "now" in window.performance == 0) {
                var e = Date.now();
                performance.timing && performance.timing.navigationStart && (e = performance.timing.navigationStart), window.performance.now = function () {
                    return Date.now() - e
                }
            }
        }(), n.WebGLRenderer.prototype.paramThreeToGL = function (e) {
            var t, i = this.extensions, r = this.context;
            if (e === n.RepeatWrapping)return r.REPEAT;
            if (e === n.ClampToEdgeWrapping)return r.CLAMP_TO_EDGE;
            if (e === n.MirroredRepeatWrapping)return r.MIRRORED_REPEAT;
            if (e === n.NearestFilter)return r.NEAREST;
            if (e === n.NearestMipMapNearestFilter)return r.NEAREST_MIPMAP_NEAREST;
            if (e === n.NearestMipMapLinearFilter)return r.NEAREST_MIPMAP_LINEAR;
            if (e === n.LinearFilter)return r.LINEAR;
            if (e === n.LinearMipMapNearestFilter)return r.LINEAR_MIPMAP_NEAREST;
            if (e === n.LinearMipMapLinearFilter)return r.LINEAR_MIPMAP_LINEAR;
            if (e === n.UnsignedByteType)return r.UNSIGNED_BYTE;
            if (e === n.UnsignedShort4444Type)return r.UNSIGNED_SHORT_4_4_4_4;
            if (e === n.UnsignedShort5551Type)return r.UNSIGNED_SHORT_5_5_5_1;
            if (e === n.UnsignedShort565Type)return r.UNSIGNED_SHORT_5_6_5;
            if (e === n.ByteType)return r.BYTE;
            if (e === n.ShortType)return r.SHORT;
            if (e === n.UnsignedShortType)return r.UNSIGNED_SHORT;
            if (e === n.IntType)return r.INT;
            if (e === n.UnsignedIntType)return r.UNSIGNED_INT;
            if (e === n.FloatType)return r.FLOAT;
            if (t = i.get("OES_texture_half_float"), null !== t && e === n.HalfFloatType)return t.HALF_FLOAT_OES;
            if (e === n.AlphaFormat)return r.ALPHA;
            if (e === n.RGBFormat)return r.RGB;
            if (e === n.RGBAFormat)return r.RGBA;
            if (e === n.LuminanceFormat)return r.LUMINANCE;
            if (e === n.LuminanceAlphaFormat)return r.LUMINANCE_ALPHA;
            if (e === n.AddEquation)return r.FUNC_ADD;
            if (e === n.SubtractEquation)return r.FUNC_SUBTRACT;
            if (e === n.ReverseSubtractEquation)return r.FUNC_REVERSE_SUBTRACT;
            if (e === n.ZeroFactor)return r.ZERO;
            if (e === n.OneFactor)return r.ONE;
            if (e === n.SrcColorFactor)return r.SRC_COLOR;
            if (e === n.OneMinusSrcColorFactor)return r.ONE_MINUS_SRC_COLOR;
            if (e === n.SrcAlphaFactor)return r.SRC_ALPHA;
            if (e === n.OneMinusSrcAlphaFactor)return r.ONE_MINUS_SRC_ALPHA;
            if (e === n.DstAlphaFactor)return r.DST_ALPHA;
            if (e === n.OneMinusDstAlphaFactor)return r.ONE_MINUS_DST_ALPHA;
            if (e === n.DstColorFactor)return r.DST_COLOR;
            if (e === n.OneMinusDstColorFactor)return r.ONE_MINUS_DST_COLOR;
            if (e === n.SrcAlphaSaturateFactor)return r.SRC_ALPHA_SATURATE;
            if (t = i.get("WEBGL_compressed_texture_s3tc"), null !== t) {
                if (e === n.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (e === n.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (e === n.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (e === n.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT
            }
            if (t = i.get("WEBGL_compressed_texture_pvrtc"), null !== t) {
                if (e === n.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                if (e === n.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                if (e === n.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                if (e === n.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
            }
            if (t = i.get("WEBGL_compressed_texture_etc1"), null !== t && e === n.RGB_ETC1_Format)return t.COMPRESSED_RGB_ETC1_WEBGL;
            if (t = i.get("EXT_blend_minmax"), null !== t) {
                if (e === n.MinEquation)return t.MIN_EXT;
                if (e === n.MaxEquation)return t.MAX_EXT
            }
            return 0
        }, n.WebGLState = function (e, t, i) {
            var r = this, o = new n.Vector4, a = e.getParameter(e.MAX_VERTEX_ATTRIBS), s = new Uint8Array(a), l = new Uint8Array(a), h = new Uint8Array(a), c = {}, u = null, d = null, p = null, f = null, g = null, m = null, v = null, A = null, y = !1, C = null, I = null, b = null, w = null, x = null, E = null, M = null, T = null, S = null, P = null, _ = null, L = null, D = null, R = null, B = null, O = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS), F = void 0, k = {}, N = new n.Vector4, U = null, V = null, z = new n.Vector4, G = new n.Vector4;
            this.init = function () {
                this.clearColor(0, 0, 0, 1), this.clearDepth(1), this.clearStencil(0), this.enable(e.DEPTH_TEST), e.depthFunc(e.LEQUAL), e.frontFace(e.CCW), e.cullFace(e.BACK), this.enable(e.CULL_FACE), this.enable(e.BLEND), e.blendEquation(e.FUNC_ADD), e.blendFunc(e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA)
            }, this.initAttributes = function () {
                for (var e = 0, t = s.length; t > e; e++)s[e] = 0
            }, this.enableAttribute = function (i) {
                if (s[i] = 1, 0 === l[i] && (e.enableVertexAttribArray(i), l[i] = 1), 0 !== h[i]) {
                    var n = t.get("ANGLE_instanced_arrays");
                    n.vertexAttribDivisorANGLE(i, 0), h[i] = 0
                }
            }, this.enableAttributeAndDivisor = function (t, i, n) {
                s[t] = 1, 0 === l[t] && (e.enableVertexAttribArray(t), l[t] = 1), h[t] !== i && (n.vertexAttribDivisorANGLE(t, i), h[t] = i)
            }, this.disableUnusedAttributes = function () {
                for (var t = 0, i = l.length; i > t; t++)l[t] !== s[t] && (e.disableVertexAttribArray(t), l[t] = 0)
            }, this.enable = function (t) {
                c[t] !== !0 && (e.enable(t), c[t] = !0)
            }, this.disable = function (t) {
                c[t] !== !1 && (e.disable(t), c[t] = !1)
            }, this.getCompressedTextureFormats = function () {
                if (null === u && (u = [], t.get("WEBGL_compressed_texture_pvrtc") || t.get("WEBGL_compressed_texture_s3tc") || t.get("WEBGL_compressed_texture_etc1")))for (var i = e.getParameter(e.COMPRESSED_TEXTURE_FORMATS), n = 0; n < i.length; n++)u.push(i[n]);
                return u
            }, this.setBlending = function (t, r, o, a, s, l, h, c) {
                t === n.NoBlending ? this.disable(e.BLEND) : this.enable(e.BLEND), (t !== d || c !== y) && (t === n.AdditiveBlending ? c ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.ONE, e.ONE, e.ONE, e.ONE)) : (e.blendEquation(e.FUNC_ADD), e.blendFunc(e.SRC_ALPHA, e.ONE)) : t === n.SubtractiveBlending ? c ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.ZERO, e.ZERO, e.ONE_MINUS_SRC_COLOR, e.ONE_MINUS_SRC_ALPHA)) : (e.blendEquation(e.FUNC_ADD), e.blendFunc(e.ZERO, e.ONE_MINUS_SRC_COLOR)) : t === n.MultiplyBlending ? c ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.ZERO, e.ZERO, e.SRC_COLOR, e.SRC_ALPHA)) : (e.blendEquation(e.FUNC_ADD), e.blendFunc(e.ZERO, e.SRC_COLOR)) : c ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.ONE, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA)) : (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA)), d = t, y = c), t === n.CustomBlending ? (s = s || r, l = l || o, h = h || a, (r !== p || s !== m) && (e.blendEquationSeparate(i(r), i(s)), p = r, m = s), (o !== f || a !== g || l !== v || h !== A) && (e.blendFuncSeparate(i(o), i(a), i(l), i(h)), f = o, g = a, v = l, A = h)) : (p = null, f = null, g = null, m = null, v = null, A = null)
            }, this.setDepthFunc = function (t) {
                if (C !== t) {
                    if (t)switch (t) {
                        case n.NeverDepth:
                            e.depthFunc(e.NEVER);
                            break;
                        case n.AlwaysDepth:
                            e.depthFunc(e.ALWAYS);
                            break;
                        case n.LessDepth:
                            e.depthFunc(e.LESS);
                            break;
                        case n.LessEqualDepth:
                            e.depthFunc(e.LEQUAL);
                            break;
                        case n.EqualDepth:
                            e.depthFunc(e.EQUAL);
                            break;
                        case n.GreaterEqualDepth:
                            e.depthFunc(e.GEQUAL);
                            break;
                        case n.GreaterDepth:
                            e.depthFunc(e.GREATER);
                            break;
                        case n.NotEqualDepth:
                            e.depthFunc(e.NOTEQUAL);
                            break;
                        default:
                            e.depthFunc(e.LEQUAL)
                    } else e.depthFunc(e.LEQUAL);
                    C = t
                }
            }, this.setDepthTest = function (t) {
                t ? this.enable(e.DEPTH_TEST) : this.disable(e.DEPTH_TEST)
            }, this.setDepthWrite = function (t) {
                I !== t && (e.depthMask(t), I = t)
            }, this.setColorWrite = function (t) {
                b !== t && (e.colorMask(t, t, t, t), b = t)
            }, this.setStencilFunc = function (t, i, n) {
                (x !== t || E !== i || M !== n) && (e.stencilFunc(t, i, n), x = t, E = i, M = n)
            }, this.setStencilOp = function (t, i, n) {
                (T !== t || S !== i || P !== n) && (e.stencilOp(t, i, n), T = t, S = i, P = n)
            }, this.setStencilTest = function (t) {
                t ? this.enable(e.STENCIL_TEST) : this.disable(e.STENCIL_TEST)
            }, this.setStencilWrite = function (t) {
                w !== t && (e.stencilMask(t), w = t)
            }, this.setFlipSided = function (t) {
                _ !== t && (t ? e.frontFace(e.CW) : e.frontFace(e.CCW), _ = t)
            }, this.setLineWidth = function (t) {
                t !== L && (e.lineWidth(t), L = t)
            }, this.setPolygonOffset = function (t, i, n) {
                t ? this.enable(e.POLYGON_OFFSET_FILL) : this.disable(e.POLYGON_OFFSET_FILL), !t || D === i && R === n || (e.polygonOffset(i, n), D = i, R = n)
            }, this.getScissorTest = function () {
                return B
            }, this.setScissorTest = function (t) {
                B = t, t ? this.enable(e.SCISSOR_TEST) : this.disable(e.SCISSOR_TEST)
            }, this.activeTexture = function (t) {
                void 0 === t && (t = e.TEXTURE0 + O - 1), F !== t && (e.activeTexture(t), F = t)
            }, this.bindTexture = function (t, i) {
                void 0 === F && r.activeTexture();
                var n = k[F];
                void 0 === n && (n = {
                    type: void 0,
                    texture: void 0
                }, k[F] = n), (n.type !== t || n.texture !== i) && (e.bindTexture(t, i), n.type = t, n.texture = i)
            }, this.compressedTexImage2D = function () {
                try {
                    e.compressedTexImage2D.apply(e, arguments)
                } catch (t) {
                    console.error(t)
                }
            }, this.texImage2D = function () {
                try {
                    e.texImage2D.apply(e, arguments)
                } catch (t) {
                    console.error(t)
                }
            }, this.clearColor = function (t, i, n, r) {
                o.set(t, i, n, r), N.equals(o) === !1 && (e.clearColor(t, i, n, r), N.copy(o))
            }, this.clearDepth = function (t) {
                U !== t && (e.clearDepth(t), U = t)
            }, this.clearStencil = function (t) {
                V !== t && (e.clearStencil(t), V = t)
            }, this.scissor = function (t) {
                z.equals(t) === !1 && (e.scissor(t.x, t.y, t.z, t.w), z.copy(t))
            }, this.viewport = function (t) {
                G.equals(t) === !1 && (e.viewport(t.x, t.y, t.z, t.w), G.copy(t))
            }, this.reset = function () {
                for (var t = 0; t < l.length; t++)1 === l[t] && (e.disableVertexAttribArray(t), l[t] = 0);
                c = {}, u = null, F = void 0, k = {}, d = null, b = null, I = null, w = null, _ = null
            }
        }
    }, {three: 175}],
    88: [function (e, t, i) {
        (function (i, n) {
            "use strict";
            function r(e) {
                this.urls = e;
                var t = i("bWVzc2FnZSBiaW5hcnlfbWVzaCB7CglyZXBlYXRlZCBjaHVua19zaW1wbGUgY2h1bmsgPSAxOwoJcmVwZWF0ZWQgY2h1bmtfcXVhbnRpemVkIHF1YW50aXplZF9jaHVuayA9IDI7Cn0KCi8vIERlZmluaXRpb24gb2YgdmVydGljZXM6IDNEIGNvb3JkaW5hdGVzLCBhbmQgMkQgdGV4dHVyZSBjb29yZGluYXRlcy4KbWVzc2FnZSB2ZXJ0aWNlc19zaW1wbGUgewoJcmVwZWF0ZWQgZmxvYXQgeHl6ID0gMSBbcGFja2VkPXRydWVdOyAgLy8geF8wLHlfMCx6XzAsIHhfMSx5XzEsel8xLCAuLi4KCXJlcGVhdGVkIGZsb2F0IHV2ID0gMiBbcGFja2VkPXRydWVdOyAgLy8gdV8wLHZfMCwgdV8xLHZfMSwgLi4uCn0KCi8vIEluZGV4ZXMgb2YgdmVydGljZXMgb2YgZmFjZXMKbWVzc2FnZSBmYWNlc19zaW1wbGUgewoJcmVwZWF0ZWQgdWludDMyIGZhY2VzID0gMSBbcGFja2VkPXRydWVdOyAvLyBpMDAsaTAxLGkwMiwgaTEwLGkxMSxpMTIsIC4uLgp9CgovLyBBIHNpbXBseSBlbmNvZGVkIGNodW5rLgovLyBUT0RPOiBhZGQgY2h1bmsgcHJvcGVyaXRlcyAoc3VjaCBhcyAicmVmbGVjdGl2ZSIpCm1lc3NhZ2UgY2h1bmtfc2ltcGxlIHsKCW9wdGlvbmFsIHZlcnRpY2VzX3NpbXBsZSB2ZXJ0aWNlcyA9IDE7CglvcHRpb25hbCBmYWNlc19zaW1wbGUgZmFjZXMgPSAyOwoJb3B0aW9uYWwgc3RyaW5nIGNodW5rX25hbWUgPSAzOwoJb3B0aW9uYWwgc3RyaW5nIG1hdGVyaWFsX25hbWUgPSA0Owp9CgovLyBRdWFudGl6ZWQgdmVyc2lvbnMgZm9sbG93OgptZXNzYWdlIHZlcnRpY2VzX3F1YW50aXplZCB7CglvcHRpb25hbCBmbG9hdCBxdWFudGl6YXRpb24gPSAxOwoJcmVwZWF0ZWQgZmxvYXQgdHJhbnNsYXRpb24gPSAyOwoJcmVwZWF0ZWQgc2ludDMyIHggPSAzIFtwYWNrZWQ9dHJ1ZV07CglyZXBlYXRlZCBzaW50MzIgeSA9IDQgW3BhY2tlZD10cnVlXTsKCXJlcGVhdGVkIHNpbnQzMiB6ID0gNSBbcGFja2VkPXRydWVdOwp9CgptZXNzYWdlIHV2X3F1YW50aXplZCB7CglvcHRpb25hbCBzdHJpbmcgbmFtZSA9IDE7CglvcHRpb25hbCBmbG9hdCBxdWFudGl6YXRpb24gPSAyOwoJcmVwZWF0ZWQgc2ludDMyIHUgPSAzIFtwYWNrZWQ9dHJ1ZV07CglyZXBlYXRlZCBzaW50MzIgdiA9IDQgW3BhY2tlZD10cnVlXTsKfQoKLy8gSW5kZXhlcyBvZiB2ZXJ0aWNlcyBvZiBmYWNlcwptZXNzYWdlIGZhY2VzX2NvbXByZXNzZWQgewoJcmVwZWF0ZWQgc2ludDMyIGZhY2VzID0gMSBbcGFja2VkPXRydWVdOyAvLyBpMDAsaTAxLGkwMiwgaTEwLGkxMSxpMTIsIC4uLgp9CgptZXNzYWdlIGNodW5rX3F1YW50aXplZCB7CglvcHRpb25hbCBzdHJpbmcgY2h1bmtfbmFtZSA9IDE7CglvcHRpb25hbCBzdHJpbmcgbWF0ZXJpYWxfbmFtZSA9IDI7CglvcHRpb25hbCB2ZXJ0aWNlc19xdWFudGl6ZWQgdmVydGljZXMgPSAzOwoJcmVwZWF0ZWQgdXZfcXVhbnRpemVkIHV2cyA9IDQ7CglvcHRpb25hbCBmYWNlc19zaW1wbGUgZmFjZXMgPSA1Owp9Cg==", "base64");
                this.builder = a.loadProto(t), this.decoder = this.builder.build("binary_mesh")
            }

            var o = e("three"), a = e("protobufjs"), s = e("../util/logger"), l = (e("../util/common"), e("../util/ajax")), h = e("../objects/Chunk"), c = new s(n);
            r.prototype = {
                constructor: r, load: function (e, t, i, n) {
                    return c.time("download"), l.get(e, {responseType: "arraybuffer"}).done(function (r) {
                        c.timeEnd("download"), this.parse(r, e, t, i, n)
                    }.bind(this)).fail(n)
                }, parse: function (e, t, i, n, r) {
                    var o = this.readProtobuf(e);
                    if (!o)return r();
                    try {
                        c.time("convert to webgl"), this.convertProtobufToSceneObject(o, t, i, n, r), c.timeEnd("convert to webgl")
                    } catch (a) {
                        return c.error("failed parsing .dam"), c.error(a.message), r()
                    }
                }, readProtobuf: function (e) {
                    var t;
                    try {
                        c.time("parse proto"), t = this.decoder.decode(e), c.timeEnd("parse proto")
                    } catch (i) {
                        return c.error("failed parsing proto for .dam"), c.error(i.message), null
                    }
                    return t
                }, convertProtobufToSceneObject: function (e, t, i, n, r) {
                    function a(e) {
                        var i = new o.BufferGeometry;
                        return i.addAttribute("position", new o.BufferAttribute(new Float32Array(e.vertices.xyz, 0, 3), 3)), e.vertices.uv.length > 0 && i.addAttribute("uv", new o.BufferAttribute(new Float32Array(e.vertices.uv, 0, 2), 2)), i.setIndex(new o.BufferAttribute(new Uint32Array(e.faces.faces, 0, 1), 1)), i.applyMatrix(s), i.computeBoundingBox(), new h({
                            geometry: i,
                            textureName: e.material_name,
                            name: e.chunk_name,
                            meshUrl: t
                        })
                    }

                    if (0 === e.chunk.length)return c.warn("No chunks in damfile..."), i([]);
                    var s = new o.Matrix4;
                    s.set(1, 0, 0, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 0, 0, 1);
                    var l = e.chunk.map(a);
                    return l ? i(l) : (c.error(".dam protobuf came out with no chunks..."), r())
                }
            }, t.exports = r
        }).call(this, e("buffer").Buffer, "/js/loaders/DamLoader.js")
    }, {
        "../objects/Chunk": 107,
        "../util/ajax": 138,
        "../util/common": 142,
        "../util/logger": 146,
        buffer: 156,
        protobufjs: 172,
        three: 175
    }],
    89: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                o.call(this, e)
            }

            var r = (e("three"), e("../lib/lzma-purejs")), o = e("./DamLoader"), a = e("../util/logger"), s = new a(i);
            n.prototype = Object.create(o.prototype), n.prototype.constructor = n, n.prototype.parse = function (e, t, i, n, a) {
                var l;
                try {
                    s.time("lzma"), l = r.decompressFile(new Uint8Array(e)), s.timeEnd("lzma")
                } catch (h) {
                    return s.timeEnd("lzma"), console.error("LZMA failed parsing..."), console.error(h.message), void a()
                }
                return o.prototype.parse.call(this, l, t, i, n, a)
            }, t.exports = n
        }).call(this, "/js/loaders/LZMADamLoader.js")
    }, {"../lib/lzma-purejs": 79, "../util/logger": 146, "./DamLoader": 88, three: 175}],
    90: [function (e, t, i) {
        (function (i) {
            "use strict";
            var n = (e("three"), e("../settings"), e("../util/browser"), e("./LZMADamLoader")), r = e("./DamLoader"), o = e("../util/logger"), a = e("../ab"), s = new o(i);
            t.exports = {
                getLoaders: function () {
                    return a.gzip ? [["_50k", ".dam", r], ["", ".dam", r]] : [["_50k", ".dam.lzma", n], ["_50k", ".dam", r], ["", ".dam.lzma", n], ["", ".dam", r]]
                }, load: function (e, t, i, n, r, o) {
                    var a = this.getLoaders();
                    o = o || 0;
                    var l = a[o];
                    if (!l)return void(r && r("No suitable model file found..."));
                    var h = l[0], c = l[1], u = new l[2](t), d = t.get(e + h + c);
                    d ? (s.debug("Trying " + h + c), u.load(d, i, n, function () {
                        this.load(e, t, i, n, r, ++o)
                    }.bind(this))) : (s.debug("Skipping " + c + ", not available"), this.load(e, t, i, n, r, ++o))
                }
            }
        }).call(this, "/js/loaders/ModelLoader.js")
    }, {
        "../ab": 2,
        "../settings": 123,
        "../util/browser": 139,
        "../util/logger": 146,
        "./DamLoader": 88,
        "./LZMADamLoader": 89,
        three: 175
    }],
    91: [function (e, t, i) {
        (function (i) {
            "use strict";
            var n = e("../util/common"), r = e("../util/texture"), o = e("../util/browser"), a = e("../util/logger"), s = e("../settings"), l = new a(i);
            t.exports = {
                load: function (e) {
                    function t(e) {
                        e || (d++, u.notify(d, i), d === i && u.resolve())
                    }

                    if (!e.chunks[0] || !e.chunks[0].meshUrl)return $.when();
                    var i = n.countUnique(e.chunks.map(function (e) {
                        return e.textureName
                    })), a = -1 !== e.chunks[0].meshUrl.indexOf("_50k") ? "_50k" : "", h = "_50k" === a ? "high" : "low";
                    o.isMobile() && "high" == h && (o.detectSamsungS6() ? (l.warn("Galaxy S6 cannot handle large textures, turning down quality."), h = "low") : i > s.maxMobileTextures && (l.warn("Model probably too large for mobile, turning down quality."), h = "low"));
                    var c = e.data.job.uuid + a + "_texture_jpg_" + h + "/", u = $.Deferred(), d = 0;
                    return e.chunks.forEach(function (i) {
                        if (!i.material.map && i.textureName) {
                            var n = e.urls.get(c + i.textureName);
                            i.setTextureMap(r.load(n, t.bind(this, r.isLoaded(n))))
                        }
                    }), u.promise()
                }
            }
        }).call(this, "/js/loaders/ModelTextureLoader.js")
    }, {
        "../settings": 123,
        "../util/browser": 139,
        "../util/common": 142,
        "../util/logger": 146,
        "../util/texture": 151
    }],
    92: [function (e, t, i) {
        (function (i, n) {
            "use strict";
            function r(e) {
                this.model = e, this.modelDataPath = this.model.urls.get("vision.modeldata"), this.sweepLocationsPath = this.model.urls.get("sweep_locations.csv");
                var t = i("Ly8gUHJvdG9jb2wgQnVmZmVyIGZvciBwdWNrIHZpc2liaWxpdHkgYW5kIHJlbGF0ZWQgZGF0YQovLwovLyBUbyBkdW1wIG91dCBhIGJpbnJheSBtYW5pZmVzdCBpbiB0ZXh0IGZvcm1hdCwgeW91IGNhbiB1c2UgcHJvdG9jIGRpcmVjdGx5OgovLyAgIHByb3RvYyAtLXByb3RvX3BhdGggfi9kZXYvbXBfdmlzaW9uLyAgLS1kZWNvZGU9ZW9zLnN0b3JhZ2UuVmlzaW9uTW9kZWxkYXRhIH4vZGV2L21wX3Zpc2lvbi9lb3Mvc3RvcmFnZS92aXNpb25fbW9kZWxkYXRhLnByb3RvIDwgdmlzaW9uLm1vZGVsZGF0YQoKLy8gcGFja2FnZSBlb3Muc3RvcmFnZTsKCi8vIGltcG9ydCAiZW9zL2luZnJhL2NvbW1vbi5wcm90byI7Ci8vIFRoZSBmb2xsb3dpbmcgd2VyZSBtYW51YWxseSBleHRyYWN0ZWQgaGVyZSwgSlMgZG9lcyBub3QgbGlrZSBwcm90b2J1ZiBpbXBvcnRzCgptZXNzYWdlIEFmZmluZTNmIHsKCW9wdGlvbmFsIFF1YXRlcm5pb25mIHJvdGF0aW9uID0gMTsKCW9wdGlvbmFsIFZlY3RvcjNmIHRyYW5zbGF0aW9uID0gMjsKfQoKbWVzc2FnZSBRdWF0ZXJuaW9uZiB7CglvcHRpb25hbCBmbG9hdCB3ID0gMTsKCW9wdGlvbmFsIGZsb2F0IHggPSAyOwoJb3B0aW9uYWwgZmxvYXQgeSA9IDM7CglvcHRpb25hbCBmbG9hdCB6ID0gNDsKfQoKbWVzc2FnZSBWZWN0b3IzZiB7CglvcHRpb25hbCBmbG9hdCB4ID0gMTsKCW9wdGlvbmFsIGZsb2F0IHkgPSAyOwoJb3B0aW9uYWwgZmxvYXQgeiA9IDM7Cn0KCi8vCi8vIE9uZSBzd2VlcCAvIHBhbm8KLy8KbWVzc2FnZSBTd2VlcExvY2F0aW9uIHsKCW9wdGlvbmFsIGJ5dGVzIHV1aWQgPSAxOyAgLyogdXVpZCAqLwoJb3B0aW9uYWwgQWZmaW5lM2YgcG9zZSA9IDI7ICAvKiBjYW1lcmEgcG9zZSAoeCwgeSx6KSBpbiBtZXRlciBhbmQgYSBxdWF0ZXJuaW9uKi8KCW9wdGlvbmFsIFZlY3RvcjNmIHB1Y2sgPSAzOyAgLyogcHVjayBsb2NhdGlvbiAtIHggYW55IGlzIGdlbmVyYWxseSB0aGUgc2FtZSBhcyBwb3NlLCB6IGlzIHRoZSBoZWlnaHQgb2YgdGhlIGNsb3Nlc3QgZmxvb3IgdW5kZXIgdGhlIGNhbWVyYSAqLwoJb3B0aW9uYWwgaW50MzIgZ3JvdXAgPSA0OyAgLyogZmxvb3IgaW5kZXggKi8KCW9wdGlvbmFsIGludDMyIHN1Ymdyb3VwID0gNTsgIC8qIHJvb20gaW5kZXggKi8KCXJlcGVhdGVkIGludDMyIHZpc2libGVzID0gNjsgIC8qIGxpc3Qgb2YgaW5kaWNlcyB0byBhbGwgcHVja3MgdmlzaWJsZSBmcm9tIHRoaXMgcHVjayAqLwoJcmVwZWF0ZWQgZmxvYXQgc2NvcmVzID0gNzsgLyogdXNlZCBhcyBwYXJ0IG9mIHNjb3JpbmcgZnVuY3Rpb24gZm9yIGRldGVybWluaW5nIHdoaWNoIHB1Y2sgdG8gZ28gdG8gbmV4dCAqLwogIG9wdGlvbmFsIHN0cmluZyBzd2VlcF9uYW1lID0gODsKCiAgLy8gV2l0aCBvdXRkb29yIHBhbm9zLCB3ZSBoYXZlIGEgY291cGxlIG9mIGRpZmZlcmVudCBzaXR1YXRpb25zIGZvciBhbGlnbm1lbnQuIFRoZSBjb21tb24KICAvLyBjYXNlIGlzIHRoYXQgdGhlIHBhbm8gYWxpZ25lZCBub3JtYWxseS4gSXQgY291bGQgYWxzbyBoYXZlIGJlZW4gcGxhY2VkIG1hbnVhbGx5IGluCiAgLy8gQ2FwdHVyZUFwcCBvciBXb3Jrc2hvcCwgb3IgbGVmdCB1bmFsaWduZWQgZm9yIGhpZ2hsaWdodC1yZWVsIHZpZXdpbmcuCiAgZW51bSBBbGlnbm1lbnRUeXBlCiAgewogICAgICBVTktOT1dOID0gMDsKICAgICAgQUxJR05FRCA9IDE7CiAgICAgIFVOQUxJR05FRCA9IDI7CiAgICAgIE1BTlVBTExZX1BMQUNFRCA9IDM7CiAgfQogIG9wdGlvbmFsIEFsaWdubWVudFR5cGUgYWxpZ25tZW50X3R5cGUgPSA5IFtkZWZhdWx0ID0gQUxJR05FRF07Cn0KCm1lc3NhZ2UgU3ViZ3JvdXBJbmZvIHsKCW9wdGlvbmFsIGludDMyIHN1Ymdyb3VwID0gMTsKCW9wdGlvbmFsIGZsb2F0IGFyZWEgPSAyOyAvKiBmbG9vciBhcmVhIGluIG1eMiAoc3F1YXJlIG1ldGVyYWdlKSAqLwp9CgovKiBBbGwgcHVja3MgaW4gYSBtb2RlbC4gUHVja3MgYXJlIHN0b3JlZCBpbiBzY2FubmluZyBvcmRlci4gKi8KbWVzc2FnZSBWaXNpb25Nb2RlbGRhdGEgewoJcmVwZWF0ZWQgU3dlZXBMb2NhdGlvbiBzd2VlcExvY2F0aW9ucyA9IDE7CglyZXBlYXRlZCBTdWJncm91cEluZm8gc3ViZ3JvdXBJbmZvcyA9IDI7Cn0K", "base64"), n = o.loadProto(t);
                this.decoder = n.build("VisionModeldata")
            }

            var o = e("protobufjs"), a = e("../util/ajax"), s = (e("../util/common"), e("../util/math")), l = e("../util/logger"), h = new l(n);
            r.prototype.load = function () {
                return this.modelDataPath ? (h.info("Using vision.modeldata"), this.loadVisionModelData()) : this.sweepLocationsPath ? (h.warn("Using sweep_locations.csv"), this.loadSweepLocationsCSV()) : (h.warn("No sweep file found"), $.when([]))
            }, r.prototype.loadVisionModelData = function () {
                return a.get(this.modelDataPath, {responseType: "arraybuffer"}).then(function (e) {
                    var t;
                    try {
                        t = this.decoder.decode(e)
                    } catch (i) {
                        return h.warn("Could not decode vision.modeldata, trying sweep_locations.csv"), this.loadSweepLocationsCSV()
                    }
                    var n = t.sweepLocations.map(function (e) {
                        return {
                            uuid: e.uuid.toUTF8().replace(/-/g, ""),
                            position: {x: e.pose.translation.x, y: e.pose.translation.y, z: e.pose.translation.z},
                            quaternion: {
                                x: e.pose.rotation.x,
                                y: e.pose.rotation.y,
                                z: e.pose.rotation.z,
                                w: e.pose.rotation.w
                            },
                            puck: {x: e.puck.x, y: e.puck.y, z: e.puck.z},
                            floor: e.group,
                            neighbours: e.visibles,
                            alignmentType: e.alignment_type
                        }
                    }).map(function (e) {
                        return e.position = s.convertVisionVector(e.position), e.quaternion = s.convertVisionQuaternion(e.quaternion), e.puck = s.convertVisionVector(e.puck), e
                    });
                    return n.forEach(function (e) {
                        e.neighbours = e.neighbours.map(function (e) {
                            return n[e].uuid
                        })
                    }), n
                }.bind(this), function () {
                    return h.warn("Could not load vision.modeldata, trying sweep_locations.csv"), this.loadSweepLocationsCSV()
                }.bind(this))
            }, r.prototype.loadSweepLocationsCSV = function () {
                return a.get(this.sweepLocationsPath).then(function (e) {
                    var t = e.split("\n").map(function (e) {
                        return e.split(", ")
                    }).filter(function (e) {
                        return e.length > 1
                    }).map(function (e) {
                        return {
                            uuid: e[0],
                            position: {x: parseFloat(e[1]), y: parseFloat(e[2]), z: parseFloat(e[3])},
                            quaternion: {
                                x: parseFloat(e[4]),
                                y: parseFloat(e[5]),
                                z: parseFloat(e[6]),
                                w: parseFloat(e[7])
                            }
                        }
                    }).map(function (e) {
                        return e.position = s.convertVisionVector(e.position), e.quaternion = s.convertVisionQuaternion(e.quaternion), e
                    });
                    return t
                }).fail(function () {
                    h.warn("Could not load sweep_locations.csv, no sweeps loaded.")
                })
            }, t.exports = r
        }).call(this, e("buffer").Buffer, "/js/loaders/SweepDataLoader.js")
    }, {
        "../util/ajax": 138,
        "../util/common": 142,
        "../util/logger": 146,
        "../util/math": 147,
        buffer: 156,
        protobufjs: 172
    }],
    93: [function (e, t, i) {
        (function (t) {
            "use strict";
            function i() {
                var e = z.getModelIDFromQueryString();
                if (!e)return I(null, "loading-failed");
                var t = z.parseSidUrl(e), i = s(), o = l(), a = r(), p = 1 === R.valueFromHash("qust", 0) || 1 === R.valueFromHash("qs", 0), f = null, g = null, b = null, w = null, E = null, M = null, T = null, S = null, P = null, L = null, D = null;
                n(a), h({urlBase: t.urlBase}).then(function (i) {
                    return c(t, e)
                }).then(function (e, t) {
                    return P = e, u(P, t, {startSource: i, autoplay: B.autoplay, quickstart: p}), P.urls.init()
                }).then(function () {
                    return P.loadPanos()
                }).then(function () {
                    M = m(P, a), L = v(p), b = L.player, w = L.director, E = L.mattertagManager, T = L.tileDownloader, S = L.qualityManager, D = L.panoRenderer, A(P, M, L), P.supportsTiles && T.start();
                    var e = G.getStartCameraOptions(P, P.panos, new x.Vector3(0, 0, 0), !0);
                    p && e.mode !== _.PANORAMA && (ie.warn("Tried to quickstart, but failed as we are not starting in inside mode."), p = !1);
                    var t = null;
                    return p && (ie.warn("Quickstart engaged. Hold on to your knickers."), f = new Z(S, M.scene, M.camera, a), t = f.load(e).then(function () {
                        M.addComponent(f), M.start(), M.once(te.AfterRender, function () {
                            ie.warn("First render after quickstart load finished.")
                        })
                    })), $.when(t, O.startLoading(P, B.autoplay, p))
                }).then(function () {
                    return d(P, O.onProgress, i, !p, o)
                }).then(function () {
                    if (y(P, M, L, a), X.init(w, b), g = G.getStartCameraOptions(P, P.panos, b.position), g.quickstart = p, k.modelLoaded(P, b, B.autoplay), C(b, P, g, B.autoplay).done(function () {
                            w.autoTour()
                        }), O.init(P, w, b, g), O.endLoading(P, w, E), M.addComponent(P), M.addComponent(E), M.addComponent(b), M.addComponent(D), M.addComponent(N), !P.supportsTiles) {
                        var e = new H(P, b);
                        e.start()
                    }
                    p && (b.control.copy(f.controls), M.removeComponent(f), f.destroy()), M.started || M.start(), M.once(te.AfterRender, function () {
                        ie.warn("First render after model load finished.")
                    })
                }).fail(I.bind(this, e))
            }

            function n(e) {
                ie.info("Version", "2.8.7-0-gece9a22"), j.defaultMaxListeners = 1e3, o(e), a()
            }

            function r() {
                return document.getElementById("player")
            }

            function o(e) {
                e.addEventListener("dragenter", w, !1), e.addEventListener("dragover", w, !1)
            }

            function a() {
                var e = R.valueFromHash("title");
                ("0" === e || 0 === e) && $(document).ready(function () {
                    var e = $(".model-title");
                    e.hide()
                })
            }

            function s() {
                return R.valueFromHash("play", !1) ? "autoplay" : R.inIframe() ? "click" : "fullpage"
            }

            function l() {
                return {
                    panoElementsToLoad: 6,
                    modelElementsToLoad: 0,
                    totalElementsLoaded: 0,
                    totalElementsToLoad: 0,
                    totalPercentageLoaded: 0,
                    progressCallback: null
                }
            }

            function h(e) {
                return W.loadFeatureFlags(e).done(function (e) {
                    W.updateDependentSettings(e, B)
                })
            }

            function c(e, t) {
                var i = D.getModel({
                    url: t,
                    floors: R.valueFromHash("f", !0),
                    autoload: !1
                }), n = k.getMixpanelToken({urlBase: e.urlBase});
                return $.when(i, n).then(null, function (e) {
                    return "loading-failed-mixpanel" === e ? i : this
                })
            }

            function u(e, t, i) {
                ie.info("Model data loaded"), ie.debug("UUID: " + e.data.job.uuid), Y.init(W.getFlags()), k.initMixpanel({
                    model: e.sid,
                    version: "2.8.7-0-gece9a22",
                    startSource: i.startSource,
                    token: t,
                    autoplay: i.autoplay,
                    quickstart: i.quickstart
                }), k.initMixpanelModel(e)
            }

            function d(e, t, i, n, r) {
                return r.progressCallback = t, k.sessionStart(), e.load(n).progress(p.bind(this, r))
            }

            function p(e, t) {
                e.modelElementsToLoad = t[1], g(e), f(e)
            }

            function f(e) {
                e.totalElementsLoaded++, e.totalPercentageLoaded = e.totalElementsLoaded / e.totalElementsToLoad, e.progressCallback && e.progressCallback(100 * e.totalPercentageLoaded)
            }

            function g(e) {
                e.totalElementsToLoad = e.modelElementsToLoad + e.panoElementsToLoad
            }

            function m(e, t) {
                var i = null;
                try {
                    i = new x.WebGLRenderer, i.autoClear = !1, i.setPixelRatio(window.devicePixelRatio ? window.devicePixelRatio : 1), i.setSize(window.innerWidth, window.innerHeight)
                } catch (n) {
                    throw b(e.sid), n
                }
                t.appendChild(i.domElement);
                var r = new x.PerspectiveCamera, o = new x.Scene, a = new x.AmbientLight(16777215);
                o.add(a), o.skybox = new V, o.add(o.skybox), o.plane = new x.Mesh(new x.PlaneBufferGeometry(1e5, 1e5), new x.RawShaderMaterial({side: x.DoubleSide})), o.plane.position.y = 0, o.plane.rotateX(-Math.PI / 2), o.plane.material.visible = !1, o.add(o.plane), o.updateMatrixWorld(), B.showScreenshotLocations && e.data.images.forEach(function (e) {
                    if (e.metadata && e.metadata.camera_position) {
                        var t = e.metadata.camera_position, i = new x.Mesh(new x.BoxGeometry(.3, .3, .3));
                        i.position = t.clone(), o.add(i);
                        var n = e.metadata.camera_quaternion, r = new x.Vector3(0, 0, -1).applyQuaternion(n);
                        o.add(new x.ArrowHelper(r, t.clone(), 1, 16711680))
                    }
                }), B.showAxis && (o.add(new x.ArrowHelper(new x.Vector3(0, 1, 0), new x.Vector3(0, 0, 0), 1, 255)), o.add(new x.ArrowHelper(new x.Vector3(0, 0, 1), new x.Vector3(0, 0, 0), 1, 16711680)), o.add(new x.ArrowHelper(new x.Vector3(1, 0, 0), new x.Vector3(0, 0, 0), 1, 65280)));
                var s = new Q(o, r, i, U);
                return s
            }

            function v(e) {
                var t = e ? 1 : 1e3, i = new q, n = new J({concurrentDownloads: R.valueFromHash("tileconc", 2)}), r = new ee, o = new T, a = new M, s = new E, l = new S(t), h = new P, c = new K;
                return {
                    qualityManager: i,
                    panoRenderer: r,
                    tileDownloader: n,
                    player: s,
                    director: a,
                    modelManager: o,
                    mattertagManager: c,
                    displayController: l,
                    labelDisplayController: h
                }
            }

            function A(e, t, i) {
                var n = i.qualityManager, r = i.panoRenderer, o = i.tileDownloader, a = i.modelManager;
                n.init(), o.init(n), r.init(t, o), a.init(o, r, n), a.addModel(e)
            }

            function y(e, t, i, n) {
                var r = i.qualityManager, o = i.panoRenderer, a = i.tileDownloader, s = i.modelManager, l = i.player, h = i.director, c = i.mattertagManager, u = i.displayController, d = i.labelDisplayController;
                t.scene.add(e), t.qualityManager = r, e.update(), c.init(s, l), l.init(h, s, a, o, r, c, t.camera, n), l.setScene(t.scene), h.init(l, s), u.init(h, l, s, c, n), d.init(l, s, n), U.init(t.composer, l)
            }

            function C(e, t, i, n) {
                return ie.info("Starting player in " + i.mode), k.report(t.sid, "started-playing", n), e.start(i)
            }

            function I(e, t) {
                ie.error(t), F.error(t), k.report(e, "error-" + t)
            }

            function b(e) {
                var t = R.details();
                t && "Safari" === t.name && t.version > 500 && t.version < 600 ? (F.error("webgl-safari"), k.report(e, "error-webgl-safari")) : (F.error("webgl-generic"), k.report(e, "error-webgl-generic"))
            }

            function w(e) {
                e.stopPropagation(), e.preventDefault()
            }

            e("./lib/three75-shim"), e("./lib/array-polyfill"), e("./lib/shaders/CopyShader.js"), e("./lib/shaders/HorizontalBlurShader.js"), e("./lib/shaders/VerticalBlurShader.js"), e("./lib/postprocessing/EffectComposer.js"), e("./lib/postprocessing/RenderPass.js"), e("./lib/postprocessing/MaskPass.js"), e("./lib/postprocessing/ShaderPass.js");
            var x = e("three"), E = (e("./util/sentry"), e("./player")), M = e("./director"), T = e("./model/ModelManager"), S = e("./DisplayController"), P = e("./label/LabelDisplayController"), _ = e("./enum/Viewmode"), L = e("./util/logger"), D = e("./showcase"), R = e("./util/browser"), B = e("./settings"), O = e("./gui/gui"), F = e("./gui/error"), k = e("./analytics"), N = e("./util/transitions"), U = e("./effects"), V = e("./objects/Skybox"), z = (e("./util/common"), e("./util/PanoramaCollection"), e("./util/math"), e("./util/showcase")), G = e("./util/camera"), H = (e("./objects/Panorama"), e("./cameras/PanoramaCamera"), e("./preloaders")), j = e("events").EventEmitter, W = e("./featureflags"), Y = (e("./util/lerp"), e("./util/ajax"), e("./ab")), X = e("./automation.js"), Q = e("./scene/SceneRenderer"), Z = e("./scene/QuickstartManager"), q = e("./tile/QualityManager.js"), K = e("./mattertag/MattertagManager"), J = e("./tile/TileDownloader"), ee = e("./tile/PanoRenderer"), te = (e("./enum/PanoSizeClass"), e("./enum/PanoramaEvents"), e("./enum/SceneRendererEvents")), ie = new L(t);
            L.level = B.logLevel, L.consoleEnabled = B.console, i()
        }).call(this, "/js/main.js")
    }, {
        "./DisplayController": 1,
        "./ab": 2,
        "./analytics": 3,
        "./automation.js": 4,
        "./cameras/PanoramaCamera": 7,
        "./director": 13,
        "./effects": 14,
        "./enum/PanoSizeClass": 28,
        "./enum/PanoramaEvents": 29,
        "./enum/SceneRendererEvents": 34,
        "./enum/Viewmode": 42,
        "./featureflags": 46,
        "./gui/error": 49,
        "./gui/gui": 50,
        "./label/LabelDisplayController": 59,
        "./lib/array-polyfill": 60,
        "./lib/postprocessing/EffectComposer.js": 80,
        "./lib/postprocessing/MaskPass.js": 81,
        "./lib/postprocessing/RenderPass.js": 82,
        "./lib/postprocessing/ShaderPass.js": 83,
        "./lib/shaders/CopyShader.js": 84,
        "./lib/shaders/HorizontalBlurShader.js": 85,
        "./lib/shaders/VerticalBlurShader.js": 86,
        "./lib/three75-shim": 87,
        "./mattertag/MattertagManager": 97,
        "./model/ModelManager": 103,
        "./objects/Panorama": 111,
        "./objects/Skybox": 115,
        "./player": 118,
        "./preloaders": 120,
        "./scene/QuickstartManager": 121,
        "./scene/SceneRenderer": 122,
        "./settings": 123,
        "./showcase": 125,
        "./tile/PanoRenderer": 126,
        "./tile/QualityManager.js": 127,
        "./tile/TileDownloader": 128,
        "./util/PanoramaCollection": 136,
        "./util/ajax": 138,
        "./util/browser": 139,
        "./util/camera": 140,
        "./util/common": 142,
        "./util/lerp": 145,
        "./util/logger": 146,
        "./util/math": 147,
        "./util/sentry": 149,
        "./util/showcase": 150,
        "./util/transitions": 152,
        events: 160,
        three: 175
    }],
    94: [function (e, t, i) {
        "use strict";
        function n(e) {
            e = e || {}, r.RawShaderMaterial.call(this, a.extendObject({
                fragmentShader: o.cube.fragmentShader,
                vertexShader: o.cube.vertexShader,
                uniforms: r.UniformsUtils.clone(o.cube.uniforms),
                name: "CubemapMaterial"
            }, e))
        }

        var r = e("three"), o = e("../shaders"), a = e("../util/common");
        n.prototype = Object.create(r.RawShaderMaterial.prototype), n.prototype.constructor = n, t.exports = n
    }, {"../shaders": 124, "../util/common": 142, three: 175}],
    95: [function (e, t, i) {
        "use strict";
        function n(e) {
            e = e || {}, r.RawShaderMaterial.call(this, a.extendObject({
                fragmentShader: o.model.fragmentShader,
                vertexShader: o.model.vertexShader,
                uniforms: r.UniformsUtils.clone(o.model.uniforms),
                name: "ModelTextureMaterial"
            }, e))
        }

        var r = e("three"), o = e("../shaders"), a = e("../util/common");
        n.prototype = Object.create(r.RawShaderMaterial.prototype), n.prototype.constructor = n, n.prototype.setProjectedPanos = function (e, t) {
            this.uniforms.progress.value = 0, e.tiled || (e.skybox.loaded || (e.skybox.needsUpdate = !0), e.skybox.loaded = !0), this.uniforms.pano0Map.value = e.skybox, this.uniforms.pano0Position.value.copy(e.position), this.uniforms.pano0Matrix.value.copy(e.skyboxMesh.matrixWorld), t.tiled || (t.skybox.loaded || (t.skybox.needsUpdate = !0), t.skybox.loaded = !0), this.uniforms.pano1Map.value = t.skybox, this.uniforms.pano1Position.value.copy(t.position), this.uniforms.pano1Matrix.value.copy(t.skyboxMesh.matrixWorld)
        }, t.exports = n
    }, {"../shaders": 124, "../util/common": 142, three: 175}],
    96: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t, i) {
                var o = i.version || "0";
                "0" !== o && m.info("Mattertag defined using version " + o), this.model = e, this.sid = t, this.enabled = s.mattertags.enabled && i.enabled, this.label = i.label, this.description = i.description, (s.mattertags.enableLinking || s.navTagsEnabled) && (this.link = this.parseLink()), this.floor = null, this.floorIndex = i.floor, this.mode = l.PANORAMA, i.preferred_camera && i.preferred_camera.mode && (this.mode = i.preferred_camera.mode), this.obj3d = this.disc = this.billboard = null, this.materials = {
                    free: n.materials.free.clone(),
                    hover: n.materials.hover.clone(),
                    disable: n.materials.disable.clone(),
                    pole: n.materials.pole.clone(),
                    arrowfree: n.materials.arrowfree.clone(),
                    arrowhover: n.materials.arrowhover.clone()
                }, this.position = (new r.Vector3).copy(i.position), this.discPosition = (new r.Vector3).copy(i.stem.direction), this.discScale = .05, this.poleEnabled = i.stem.enabled, this.boardOrientation = "", this.boardState = v.CLOSED, this.hoveringBillboard = !1, this.animationScale = 0, this.visibleTransition = null, this.boardTransition = null, this.fadeInTimer = void 0, this.fadeOutTimer = void 0
            }

            var r = e("three"), o = e("../util/logger"), a = e("../util/browser"), s = e("../settings"), l = e("../enum/Viewmode"), h = e("../enum/RenderOrder"), c = (e("../enum/Colors"), e("../util/common"), e("../util/texture")), u = e("../objects/Panorama"), d = (e("../analytics"), e("../util/transitions")), p = e("../util/lerp"), f = e("../util/easing"), g = (e("../enum/LinkDestination"), e("events").EventEmitter), m = new o(i), v = {
                CLOSED: "closed",
                OPENING: "opening",
                OPEN: "open",
                CLOSING: "closing",
                ACTIVE: "active"
            }, A = document.getElementById("tag-billboards");
            n.prototype = Object.create(g.prototype), n.raycaster = new r.Raycaster, n.prototype.build = function () {
                return this.enabled ? (this.floor = this.model.floors.get(this.floorIndex) || this.model.floors.first(), this.floor && (this.billboard = this.buildBillboard(), this.obj3d = this.buildObject3D(), this.floor.add(this.obj3d)), this) : null
            }, n.prototype.isPanoTag = function () {
                return s.navTagsEnabled && this.link && "pano" === this.link.type
            }, n.prototype.buildObject3D = function () {
                var e = new r.Object3D;
                if (e.position.copy(this.position), this.isPanoTag())return this.disc = new r.Mesh(n.geometry.arrow, this.materials.arrowfree), this.disc.position.copy(this.discPosition), this.disc.renderOrder = h.mattertagDisc, this.disc.tag = this, this.poleEnabled = !1, e.add(this.disc);
                this.disc = new r.Mesh(n.geometry.disc, this.materials.free), this.disc.position.copy(this.discPosition), this.disc.renderOrder = h.mattertagDisc, this.disc.tag = this;
                var t = new r.Mesh(n.geometry.cutout, n.materials.cutout);
                if (t.renderOrder = h.mattertagCutout, this.disc.add(t), this.poleEnabled) {
                    var i = this.buildPole();
                    i.renderOrder = h.mattertagStem, e.add(i)
                }
                return e.add(this.disc)
            }, n.buildDiscMaterial = function (e) {
                return new r.MeshBasicMaterial({
                    map: e,
                    transparent: !0,
                    opacity: s.mattertags.startup.hideUntilStart ? 0 : s.mattertags.disc.opacity,
                    alphaTest: s.mattertags.visibility.alphaTestLevel
                })
            };
            var y = {
                free: c.loadBase64("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"),
                hover: c.loadBase64("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"),
                arrowFree: c.loadBase64("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"),
                arrowHover: c.loadBase64("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")
            };
            n.geometry = {}, n.geometry.disc = new r.PlaneBufferGeometry(1, 1), n.geometry.arrow = new r.PlaneBufferGeometry(3, 3), n.geometry.cutout = new r.SphereBufferGeometry(.5, 16, 8), n.materials = {}, n.materials.free = n.buildDiscMaterial(y.free), n.materials.hover = n.buildDiscMaterial(y.hover), n.materials.disable = n.materials.free.clone(), n.materials.disable.opacity = s.mattertags.disc.disabledOpacity, n.materials.cutout = new r.MeshBasicMaterial({
                transparent: !0,
                opacity: 1,
                colorWrite: !1
            }), n.materials.arrowfree = n.buildDiscMaterial(y.arrowFree), n.materials.arrowhover = n.buildDiscMaterial(y.arrowHover), n.materials.pole = new r.LineBasicMaterial({
                linewidth: s.mattertags.pole.width,
                color: s.mattertags.pole.color,
                opacity: s.mattertags.startup.hideUntilStart ? 0 : s.mattertags.pole.opacity,
                transparent: !0,
                alphaTest: s.mattertags.pole.opacity * s.mattertags.visibility.alphaTestLevel
            }), n.prototype.buildPole = function () {
                var e = new r.BufferGeometry, t = new Float32Array(6);
                return t[0] = t[1] = t[2] = 0, t[3] = this.discPosition.x, t[4] = this.discPosition.y, t[5] = this.discPosition.z, e.addAttribute("position", new r.BufferAttribute(t, 3)), new r.Line(e, this.materials.pole)
            }, n.prototype.parseLink = function () {
                var e = /\[([^\]]*)\]\(([^\]]*)\)/, t = this.description.match(e);
                if (!t)return null;
                if (!s.brand || -1 !== t[2].indexOf("javascript"))return this.description = this.description.substring(0, t.index) + this.description.substring(t.index + t[0].length, this.description.length), null;
                var i, n = t[1], r = t[2];
                return 0 === r.indexOf("#tn=") ? (i = "pano", r = r.substr(4)) : (i = -1 !== r.indexOf("matterport.com/show") || -1 !== r.indexOf(window.location.hostname) ? "model" : "link", "model" === i && (r += "&play=1"), -1 === r.indexOf("http") && (r = "http://" + r)), this.description = this.description.substring(0, t.index) + this.description.substring(t.index + t[0].length, this.description.length), {
                    index: t.index,
                    label: n,
                    URL: r,
                    type: i
                }
            }, n.prototype.buildBillboard = function () {
                var e = document.createElement("div");
                e.className = this.isPanoTag() ? "panotag-container" : "tag-container has-hotzone", A.appendChild(e);
                var t = document.createElement("div");
                t.className = this.isPanoTag() ? "panotag-body" : "tag-body", e.appendChild(t);
                var i = document.createElement("p");
                i.className = "tag-label", i.textContent = this.label, t.appendChild(i);
                var n = document.createElement("span");
                if (n.className = "tag-desc", (s.mattertags.enableLinking || s.navTagsEnabled) && this.link ? s.navTagsEnabled && this.isPanoTag() ? (n.textContent = "", t.appendChild(n)) : (n.textContent = this.description.substring(0, this.link.index), t.appendChild(n), n = document.createElement("span"), n.className = "tag-desc", n.textContent = this.description.substring(this.link.index), t.appendChild(n)) : (n.textContent = this.description, t.appendChild(n)), s.mattertags.enableLinking && this.link && (!s.navTagsEnabled || !this.isPanoTag())) {
                    var r = document.createElement("a");
                    if (r.classList.add("tag-link"), r.setAttribute("data-linktype", this.link.type), r.setAttribute("data-tagID", this.sid), r.href = this.link.URL, r.textContent = this.link.label + " ", "link" === this.link.type) {
                        var o = document.createElement("i");
                        o.classList.add("icon-ext-link"), o.title = "Link to external web site", r.appendChild(o)
                    }
                    t.insertBefore(r, t.childNodes[1].nextSibling)
                }
                t.addEventListener("mouseover", function (t) {
                    this.boardState === v.OPEN && e.classList.remove("has-hotzone")
                }.bind(this)), t.addEventListener("mousedown", function (e) {
                    e.stopPropagation()
                }), t.addEventListener("mouseup", function (e) {
                    e.stopPropagation()
                });
                var a = function (e) {
                    return function (t) {
                        var i, n = document.getElementById("player");
                        try {
                            i = new MouseEvent(e, t)
                        } catch (r) {
                            i = document.createEvent("MouseEvents"), i.initMouseEvent(e, t.bubbles, t.cancelable, t.view, t.detail, t.screenX, t.screenY, t.clientX, t.clientY, t.ctrlKey, t.altKey, t.shiftKey, t.metaKey, t.button, t.relatedTarget)
                        }
                        n.dispatchEvent(i)
                    }
                };
                return e.addEventListener("mousedown", a("mousedown")), e.addEventListener("mouseup", a("mouseup")), e.addEventListener("mouseenter", function (e) {
                    (s.mattertags.animation.hoverOnClosing || this.boardState !== v.CLOSING) && (this.hoveringBillboard = !0, this.emit("enter", this), this.setHoverState())
                }.bind(this)), e.addEventListener("mouseleave", function (e) {
                    this.hoveringBillboard = !1, this.emit("leave", this), this.boardState !== v.ACTIVE && this.setFreeState()
                }.bind(this)), e
            }, n.prototype.setFreeState = function (e) {
                (e || !this.hoveringBillboard) && (this.fadeOutTimer || (this.fadeOutTimer = setTimeout(function () {
                    this.disc.material = this.isPanoTag() ? this.materials.arrowfree : this.materials.free, this.boardState !== v.CLOSED && (this.boardState = v.CLOSING, this.animateBoard())
                }.bind(this), s.mattertags.animation.animOutDelay)), clearTimeout(this.fadeInTimer), this.fadeInTimer = void 0)
            }, n.prototype.setHoverState = function (e) {
                this.boardState !== v.ACTIVE && (this.hoveringBillboard || this.billboard.classList.add("has-hotzone"), this.fadeInTimer ? e && this.setActiveState() : this.fadeInTimer = setTimeout(function () {
                    this.disc.material = this.isPanoTag() ? this.materials.arrowhover : this.materials.hover, this.boardState !== v.OPEN && (this.boardState = v.OPENING, this.animateBoard(function () {
                        e && this.setActiveState()
                    }.bind(this)))
                }.bind(this), s.mattertags.animation.animInDelay), clearTimeout(this.fadeOutTimer), this.fadeOutTimer = void 0)
            }, n.prototype.setActiveState = function () {
                this.boardState = v.ACTIVE, this.billboard.classList.remove("has-hotzone")
            }, n.prototype.hide = function (e, t) {
                var i = $.Deferred();
                if (0 === this.materials.free.opacity && !d.isRunning(this.visibleTransition))return i.resolve().promise();
                e = e || 0, t = t || 0, d.cancel(this.visibleTransition);
                var n = this.materials.free.opacity / s.mattertags.disc.opacity, r = t + e, o = t / r;
                return this.visibleTransition = d.start(function (e) {
                    p.property(this.materials.free, "opacity", 0)(e), p.property(this.materials.hover, "opacity", 0)(e), p.property(this.materials.pole, "opacity", 0)(e), p.property(this.materials.arrowfree, "opacity", 0)(e), p.property(this.materials.arrowhover, "opacity", 0)(e)
                }.bind(this), r * n, function () {
                    i.resolve()
                }, o, f[s.warp.blendEasing]), i.promise()
            }, n.prototype.show = function (e, t) {
                var i = $.Deferred();
                if (this.materials.free.opacity === s.mattertags.disc.opacity && !d.isRunning(this.visibleTransition))return i.resolve().promise();
                e = e || 0, t = t || 0, d.cancel(this.visibleTransition);
                var n = (s.mattertags.disc.opacity - this.materials.free.opacity) / s.mattertags.disc.opacity, r = t + e, o = t / r;
                return this.visibleTransition = d.start(function (e) {
                    p.property(this.materials.free, "opacity", s.mattertags.disc.opacity)(e), p.property(this.materials.hover, "opacity", s.mattertags.disc.opacity)(e), p.property(this.materials.pole, "opacity", s.mattertags.pole.opacity)(e), p.property(this.materials.arrowfree, "opacity", s.mattertags.disc.opacity)(e), p.property(this.materials.arrowhover, "opacity", s.mattertags.disc.opacity)(e)
                }.bind(this), r * n, function () {
                    i.resolve()
                }, o, f[s.warp.blendEasing]), i.promise()
            }, n.prototype.closestPanoTowardTag = function (e, t) {
                var i = [], o = [], a = this.disc.getWorldPosition();
                if (e === l.PANORAMA) {
                    var h = .5, c = t.position.clone().sub(a).normalize();
                    i.push(u.filters.isPanoAligned()), i.push(u.filters.inPanoDirection(a, c, h)), i.push(u.filters.isNeighbourPanoTo(t)), o.push(u.scoreFunctions.direction(a, c))
                }
                var d = new r.Vector3, p = function (e) {
                    d.copy(a).sub(e.position);
                    var t = -r.Math.radToDeg(Math.atan(d.y / Math.sqrt(d.x * d.x + d.z * d.z))), i = s.mattertags.navigate.tiltTolerance;
                    return s.insideLookLimitDown - i < t && t < s.insideLookLimitUp + i
                }, f = function (e) {
                    return Math.abs(e.position.x - a.x) > s.mattertags.visibility.cameraClearance || Math.abs(e.position.z - a.z) > s.mattertags.visibility.cameraClearance
                };
                i.push(f, p), o.push(u.scoreFunctions.distanceSquared(this, -2));
                var g = this.model.panos.sortByScore(i, o);
                if (s.mattertags.navigate.lineOfSight) {
                    for (var m = 0; m < g.length; m++) {
                        var v = g[m].pano, A = v.position.distanceTo(a);
                        if (!s.mattertags.visibility.anyDistance && A > s.mattertags.visibility.visibleDistance)return null;
                        n.raycaster.set(v.position, a.clone().sub(v.position).normalize());
                        var y = n.raycaster.intersectObjects(this.model.colliders);
                        if (0 === y.length || y[0].distance > A)return v
                    }
                    return null
                }
                return g.length > 0 && g[0].pano
            }, n.prototype.examineMattertag = function (e, t) {
                var i = e.mode, n = s.mattertags.navigate.nearestPano && this.closestPanoTowardTag(i, e.currentPano) || e.currentPano, o = "nothing" === s.mattertags.navigate.aimAt ? null : "disc" === s.mattertags.navigate.aimAt ? this.disc.getWorldPosition() : "object" === s.mattertags.navigate.aimAt ? this.obj3d.getWorldPosition() : this.obj3d.getWorldPosition().add(this.discPosition.clone().multiplyScalar(.5)), a = s.mattertags.navigate.reactivate ? function () {
                    t(this), this.setActiveState()
                }.bind(this) : null;
                if (i === l.PANORAMA) {
                    var h = {pano: n, lookAtPoint: o, duration: null, maxDistanceOverride: null, skipWarpingCheck: !1};
                    e.flyToPano(h, a)
                } else {
                    var c = {pano: n};
                    if (o) {
                        var u = (new r.Matrix4).lookAt(n.position, o, new r.Vector3(0, 1, 0));
                        c.quaternion = (new r.Quaternion).setFromRotationMatrix(u)
                    }
                    s.mattertags.navigate.reactivate && (c.callback = a), c.duration = 1500, c.mode = l.PANORAMA, e.flyToNewMode(c)
                }
            }, n.prototype.update = function (e, t, i, n) {
                return this.enabled ? (this.updateDisc(e, t, i, n), this.isPanoTag() && this.boardState !== v.CLOSED ? void this.updatePanoTagBillboard(t) : void(this.boardState !== v.CLOSED && this.updateBillboard(t))) : void 0
            }, n.prototype.updateDisc = function (e, t, i, o) {
                var a = s.mattertags.visibility, h = s.mattertags.disc.scale, c = this.disc.getWorldPosition(), u = e === l.DOLLHOUSE || e === l.FLOORPLAN ? s.mattertags.visibility.visibleDistance : t.position.distanceTo(c);
                if (this.obj3d.visible = 0 !== this.disc.material.opacity && (a.anyDistance || u <= a.visibleDistance || e === l.TRANSITIONING) && (!a.hideViaFloor || this.tagVisibleOnCurrentFloor(e)) && (!a.hideOffScreenDisc || !this.offScreen(this.disc, t)) && (!a.hideOffScreenObject || !this.offScreen(this.obj3d, t)), this.obj3d.visible) {
                    this.disc.quaternion.copy(t.quaternion);
                    var d = h.maxSize - (h.maxSize - h.minSize) * r.Math.smoothstep(u, h.nearBound, h.farBound), p = c.clone().project(t), f = new r.Vector3(window.innerWidth / 2, window.innerHeight / 2, 1).multiply(p), g = new r.Vector3(d / 2, 0, 0).add(f), m = new r.Vector3(2 / window.innerWidth, 2 / window.innerHeight, 1).multiply(g), v = m.clone().unproject(t), A = v.clone().distanceTo(c), y = 1 + s.mattertags.disc.scale.responsiveness / 100 * (n.viewportScale() - 1);
                    this.discScale = A * y, this.disc.scale.set(this.discScale, this.discScale, this.discScale)
                }
            }, n.prototype.tagVisibleOnCurrentFloor = function (e) {
                return !(e === l.DOLLHOUSE || e === l.FLOORPLAN) || this.model.allFloorsVisible || !this.floor.hidden
            }, n.prototype.offScreen = function (e, t) {
                var i = e.getWorldPosition().project(t);
                return !(-1 < i.x && i.x < 1 && -1 < i.y && i.y < 1)
            }, n.viewportScale = function () {
                return (n.viewportWidth !== window.innerWidth || n.viewportHeight !== window.innerHeight) && (n.viewportWidth = window.innerWidth, n.viewportHeight = window.innerHeight, n.currentViewportScale = Math.sqrt(Math.min(n.viewportWidth, n.viewportHeight) / s.mattertags.disc.scale.baseViewportSize)), n.currentViewportScale
            }, n.prototype.newBillboardOrientation = function (e) {
                if (this.boardOrientation && this.boardState !== v.OPENING)return this.boardOrientation;
                var t = 1 / 3, i = e.y < -t ? 0 : e.y < t ? 1 : 2, n = e.x < -t ? 0 : e.x < t ? 1 : 2, r = "";
                return r += 0 === n ? "right" : 2 === n ? "left" : "", r += 0 === i ? "-down" : 2 === i ? "-up" : "", 1 === n && (r = 0 === i ? "bottom" : 2 === i ? "top" : "", 1 === i && (r = window.innerWidth > window.innerHeight ? e.x < 0 ? "right" : "left" : e.y < 0 ? "bottom" : "top")), r
            }, n.prototype.updatePanoTagBillboard = function (e) {
                var t = this.disc.getWorldPosition(), i = t.clone().project(e);
                i.y *= -1;
                var n = "panotag";
                if (n !== this.boardOrientation) {
                    this.billboard.style.transform = this.billboard.style.webkitTransform = "", this.billboard.classList.add("panotag-container");
                    var o = window.getComputedStyle(this.billboard);
                    this.billboard.initialTransform = o.transform || o.webkitTransform, "none" === this.billboard.initialTransform && (this.billboard.initialTransform = ""), this.boardOrientation = n
                }
                var a = new r.Vector3(-this.discScale / 2, 0, 0).applyQuaternion(e.quaternion).add(t).project(e), l = Math.abs(i.x - a.x) * window.innerWidth, h = Math.sqrt(l / 40) * s.mattertags.boardScale.boardToDiscRatio, c = {
                    x: (i.x + 1) * window.innerWidth / 2,
                    y: (i.y + 1) * window.innerHeight / 2
                };
                this.billboard.screenTransform = this.billboard.initialTransform + " translate(" + c.x + "px, " + c.y + "px) scale(" + h + ")", this.billboard.style.webkitTransform = this.billboard.style.transform = this.billboard.screenTransform
            }, n.prototype.updateBillboard = function (e) {
                var t = this.disc.getWorldPosition(), i = t.clone().project(e);
                i.y *= -1;
                var n = this.newBillboardOrientation(i);
                if (n !== this.boardOrientation) {
                    this.billboard.style.transform = this.billboard.style.webkitTransform = "", this.billboard.classList.remove("tag-container-" + this.boardOrientation), this.billboard.classList.add("tag-container-" + n);
                    var o = window.getComputedStyle(this.billboard);
                    this.billboard.initialTransform = o.transform || o.webkitTransform, "none" === this.billboard.initialTransform && (this.billboard.initialTransform = "");
                    var a = window.getComputedStyle(this.billboard).transform.slice(7, -1).split(","), l = -a[4], h = -a[5];
                    this.billboard.style.webkitTransformOrigin = l + "px " + h + "px", this.billboard.style.transformOrigin = l + "px " + h + "px", this.boardOrientation = n
                }
                var c = new r.Vector3(-this.discScale / 2, 0, 0).applyQuaternion(e.quaternion).add(t).project(e), u = Math.abs(i.x - c.x) * window.innerWidth, d = Math.sqrt(u / 40) * s.mattertags.boardScale.boardToDiscRatio, p = {
                    x: (i.x + 1) * window.innerWidth / 2,
                    y: (i.y + 1) * window.innerHeight / 2
                };
                this.billboard.screenTransform = this.billboard.initialTransform + " translate(" + p.x + "px, " + p.y + "px) scale(" + d + ")", this.billboard.style.webkitTransform = this.billboard.screenTransform, this.billboard.style.transform = this.billboard.screenTransform
            }, n.prototype.animateBoard = function (e, t) {
                if (this.boardState === v.OPENING) {
                    if (d.cancel(this.boardTransition), a.detectSamsungNative())return this.boardOrientation = null, this.billboard.style.visibility = "visible", this.emit("tag.opened"), this.boardState = v.OPEN, void(e && e());
                    this.billboard.style.webkitTransform = "scale(0)", this.billboard.style.transform = "scale(0)", this.billboard.style.visibility = "visible", this.boardTransition = d.start(p.property(this, "animationScale", 1, function () {
                        var e = this.billboard.screenTransform + " scale(" + this.animationScale + ")";
                        this.billboard.style.webkitTransform = e, this.billboard.style.transform = e
                    }.bind(this)), s.mattertags.animation.animInTime, function () {
                        this.emit("tag.opened"), this.boardState = v.OPEN, e && e()
                    }.bind(this))
                } else this.boardState === v.CLOSING && (d.cancel(this.boardTransition), this.boardTransition = d.start(p.property(this, "animationScale", 0, function () {
                    var e = this.billboard.screenTransform + " scale(" + this.animationScale + ")";
                    this.billboard.style.webkitTransform = e, this.billboard.style.transform = e
                }.bind(this)), s.mattertags.animation.animOutTime, function () {
                    this.emit("tag.closed"), this.boardState = v.CLOSED, this.billboard.style.visibility = "hidden", this.billboard.classList.contains("has-hotzone") || this.billboard.classList.add("has-hotzone"), t && t()
                }.bind(this)))
            }, t.exports = n
        }).call(this, "/js/mattertag/Mattertag.js")
    }, {
        "../analytics": 3,
        "../enum/Colors": 17,
        "../enum/LinkDestination": 24,
        "../enum/RenderOrder": 33,
        "../enum/Viewmode": 42,
        "../objects/Panorama": 111,
        "../settings": 123,
        "../util/browser": 139,
        "../util/common": 142,
        "../util/easing": 143,
        "../util/lerp": 145,
        "../util/logger": 146,
        "../util/texture": 151,
        "../util/transitions": 152,
        events: 160,
        three: 175
    }],
    97: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                this.tagState = p.IDLE, this.intersectTag = null, this.hoveredTag = null, this.activeTag = null, this.mattertagDiscs = [], this.raycaster = new r.Raycaster, this.modelManager = null, this.player = null, this.totalMattertags = 0
            }

            var r = e("three"), o = e("../util/logger"), a = e("../util/common"), s = e("../settings"), l = (e("../enum/Viewmode"), e("../enum/WarpStyle")), h = e("../enum/BlackoutStyle"), c = e("../enum/ModelManagerEvents"), u = e("../enum/MattertagEvents"), d = e("../enum/PlayerEvents"), p = (e("../util/lerp"), e("../enum/TagStates")), f = e("events").EventEmitter;
            new o(i);
            a.extend(n, f), n.prototype.init = function (e, t) {
                this.modelManager = e, this.player = t, this.updateModel(), this.bindEvents()
            }, n.prototype.update = function (e) {
                this.updateTags(this.player.mode, this.player.camera, this.player.currentPano, this.player.flying)
            }, n.prototype.updateTags = function (e, t, i, n) {
                for (var r in this.model.mattertags)this.model.mattertags[r].update(e, t, i, n)
            }, n.prototype.updateModel = function () {
                this.model = this.modelManager.getActiveModel(), this.getMattertagsFromModel(), this.totalMattertags = Object.keys(this.model.mattertags).length
            }, n.prototype.getMattertagsFromModel = function () {
                this.mattertagDiscs = [];
                for (var e in this.model.mattertags) {
                    var t = this.model.mattertags[e].disc;
                    t && this.mattertagDiscs.push(t)
                }
            }, n.prototype.bindEvents = function () {
                this.modelManager.on(c.ActiveModelChanged, this.updateModel.bind(this)), this.player.on(d.ModeChanging, this.onPlayerModeChanging.bind(this)), this.player.on(d.Move, this.onPlayerMove.bind(this)), this.player.on(d.Ready, this.onPlayerReady.bind(this)), this.player.on(d.FlyingEnded, this.onPlayerFlyingEnded.bind(this)), this.player.on(d.WarpStarted, this.handleWarpStart.bind(this)), this.player.on(d.WarpInterrupted, this.handleWarpInterruption.bind(this))
            }, n.prototype.handleWarpStart = function (e, t, i) {
                this.dismissExaminedTag(), e === l.BLACK && ((null === i || void 0 === i) && (i = s.warp.teleportTime), this.hideShowTagsForBlackoutStyle(t, i))
            }, n.prototype.handleWarpInterruption = function (e, t, i) {
                (null === i || void 0 === i) && (i = s.warp.teleportTime), this.hideShowTagsForBlackoutStyle(t, i)
            }, n.prototype.hideShowTagsForBlackoutStyle = function (e, t) {
                var i = 0, n = 0, r = t / 2;
                switch ((null === e || void 0 === e) && (e = h.MIDDLE), e) {
                    case h.END:
                        this.hideAllMattertags(r);
                        break;
                    case h.BEGINNING:
                        this.hideAllMattertags().done(this.showAllMattertags.bind(this, r));
                        break;
                    case h.NONE:
                        break;
                    case h.MIDDLE:
                        i = r, n = r, this.hideAllMattertags(n), setTimeout(function () {
                            this.showAllMattertags(i)
                        }.bind(this), n)
                }
            }, n.prototype.onPlayerModeChanging = function () {
                this.dismissExaminedTag()
            }, n.prototype.onPlayerMove = function () {
                this.dismissExaminedTag()
            }, n.prototype.onPlayerReady = function (e, t) {
                this.startAllMattertags(e ? t : null)
            }, n.prototype.onPlayerFlyingEnded = function (e, t) {
                this.updateClosestTags(e)
            }, n.prototype.dismissExaminedTag = function () {
                this.activeTag && this.tagState === p.EXAMINE && this.dismissActiveTag(), this.hoveredTag && (this.hoveredTag.setFreeState(!0), this.hoveredTag = null)
            }, n.prototype.startAllMattertags = function (e) {
                this.model.showingMattertags = s.mattertags.enabled, this.showAllMattertags(s.mattertags.startup.fadeInDuration, s.mattertags.startup.fadeInDelay), e && setTimeout(function () {
                    this.activateTag(this.model.getTagBySid(e))
                }.bind(this), s.mattertags.startup.fadeInDuration / 2)
            }, n.prototype.showAllMattertags = function (e, t) {
                function i() {
                    r++, r === this.totalMattertags && n.resolve()
                }

                var n = $.Deferred();
                if (!this.model.showingMattertags)return n.resolve().promise();
                var r = 0;
                for (var o in this.model.mattertags) {
                    var a = this.model.mattertags[o];
                    a.show(e, t).done(i.bind(this))
                }
                return n.promise()
            }, n.prototype.hideAllMattertags = function (e, t) {
                function i() {
                    r++, r === this.totalMattertags && n.resolve()
                }

                var n = $.Deferred(), r = 0;
                for (var o in this.model.mattertags) {
                    var a = this.model.mattertags[o];
                    a.hide(e, t).done(i.bind(this)), a === this.activeTag && this.dismissActiveTag()
                }
                return n.promise()
            }, n.prototype.activateTag = function (e, t) {
                t = t || p.EXAMINE, this.activeTag = e, this.activeTag.setHoverState(t === p.EXAMINE), this.tagState = t, this.emit(u.TagActivated, e)
            }, n.prototype.dismissActiveTag = function () {
                this.activeTag.setFreeState(!0);
                var e = this.activeTag;
                this.activeTag = null, this.tagState = p.IDLE, this.emit(u.TagDismissed, e)
            }, n.prototype.clickedOnTag = function (e) {
                return e ? (this.tagState === p.IDLE ? this.activateTag(this.intersectTag, p.EXAMINE) : this.tagState === p.EXAMINE && (this.intersectTag !== this.activeTag ? (this.dismissActiveTag(), this.activateTag(this.intersectTag, p.EXAMINE)) : this.dismissActiveTag()), !1) : this.tagState !== p.EXAMINE ? (this.intersectTag.setHoverState(!0), this.activeTag = this.intersectTag, this.activeTag.examineMattertag(this.player, this.activateTag.bind(this)), this.tagState = p.EXAMINE, this.emit(u.TagNavigation, this.activeTag), !0) : (this.dismissActiveTag(), !1)
            }, n.prototype.intersectMattertag = function () {
                var e = new r.Vector3, t = new r.Vector3, i = new r.Vector3;
                return function (n, r, o) {
                    var a = null, s = this.mattertagDiscs.filter(function (e) {
                        return e.parent.visible
                    });
                    if (s.length > 0) {
                        var l = this.model.floors.reduce(function (e, t) {
                            return t.hidden ? e : e.concat(t.collider.children)
                        }, s);
                        e.set(n.x, n.y, -1).unproject(o), t.set(n.x, n.y, 1).unproject(o), i.copy(t).sub(e).normalize(), this.raycaster.set(e, i);
                        var h = this.raycaster.intersectObjects(l);
                        h.length > 0 && -1 !== s.indexOf(h[0].object) && (a = h[0].object.tag)
                    }
                    return this.intersectTag = a, r && (this.activeTag && a !== this.activeTag && (this.tagState === p.BROWSE || this.tagState === p.EXAMINE && a) && this.dismissActiveTag(), a && a !== this.activeTag && (a.listeners("enter").length < 1 && (a.on("enter", function (e) {
                        this.hoveredTag = e
                    }.bind(this)), a.on("leave", function (e) {
                        this.hoveredTag = null
                    }.bind(this))), this.activateTag(a, p.BROWSE))), a
                }
            }(), n.prototype.rankedMattertagInDirection = function () {
                var e = [], t = [], i = new r.Vector3, n = new r.Vector3, o = new r.Vector3;
                return function (r, a, s, l) {
                    var h = 0;
                    t.length = 0;
                    for (var c = 0; c < this.closestMattertags.length; c++) {
                        var u = this.closestMattertags[c];
                        n.copy(u.position), n.add(u.discPosition), i.copy(a), i.sub(n).negate(), i.normalize();
                        var d = i.dot(l);
                        if (d >= 0) {
                            o.copy(n), o.project(s);
                            var p = this.intersectMattertag(o, !1, s);
                            if (p) {
                                if (h >= e.length)for (var f = 0; 64 > f; f++)e.push({tag: u, dot: d});
                                var g = e[h];
                                g.tag = u, g.dot = d, g.position = math.projectPositionToCanvas(n, s), t.push(g), h++
                            }
                        }
                    }
                    return t.sort(function (e, t) {
                        return e.dot > t.dot ? -1 : e.dot < t.dot ? 1 : 0
                    }), r < t.length ? t[r].tag : null
                }
            }(), n.prototype.updateClosestTags = function () {
                var e = new r.Vector3, t = 30;
                return function (i) {
                    this.closestMattertags || (this.closestMattertags = []), this.closestMattertags.length = 0;
                    var n = this.model.mattertags;
                    if (n)for (var r in n)if (n.hasOwnProperty(r)) {
                        var o = n[r], a = o.position;
                        e.copy(i), e.sub(a).negate();
                        var s = e.lengthSq();
                        t > s && this.closestMattertags.push(o)
                    }
                }
            }(), t.exports = n
        }).call(this, "/js/mattertag/MattertagManager.js")
    }, {
        "../enum/BlackoutStyle": 16,
        "../enum/MattertagEvents": 25,
        "../enum/ModelManagerEvents": 26,
        "../enum/PlayerEvents": 32,
        "../enum/TagStates": 35,
        "../enum/Viewmode": 42,
        "../enum/WarpStyle": 43,
        "../settings": 123,
        "../util/common": 142,
        "../util/lerp": 145,
        "../util/logger": 146,
        events: 160,
        three: 175
    }],
    98: [function (e, t, i) {
        (function (i) {
            "use strict";
            var n = e("../util/logger"), r = new n(i), o = {
                parseIdsFromChunkName: function (e, t) {
                    t.floorId = o.parseFloor(e), t.roomId = o.parseRoom(e)
                }, parseFloor: function (e) {
                    var t = e.match(/_group([0-9]+)/);
                    if (!t)return 0;
                    try {
                        return parseInt(t[1], 10)
                    } catch (i) {
                        return r.warn('Non-int value "' + t[1] + '" for mesh group, defaulting to floor 0'), 0
                    }
                }, parseRoom: function (e) {
                    var t = e.match(/_sub([0-9]+)/);
                    if (!t)return -1;
                    try {
                        return parseInt(t[1], 10)
                    } catch (i) {
                        return r.warn('Non-int value "' + t[1] + '" for mesh subgroup, defaulting to subgroup 0'), 0
                    }
                }
            };
            t.exports = o
        }).call(this, "/js/model/Chunks.js")
    }, {"../util/logger": 146}],
    99: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                s.call(this), this.model = e, this.exploded = !1
            }

            var r = e("../objects/Floor"), o = (e("../settings"), e("../util/logger")), a = e("../util/transitions"), s = e("../util/IndexedCollection"), l = e("../util/common"), h = e("../util/easing");
            new o(i);
            l.inherit(n, s), n.prototype.add = function (e) {
                s.prototype.add.call(this, e), this.model.add(e)
            }, n.prototype.getIndex = function (e) {
                return e.floorIndex
            }, n.prototype.build = function () {
                this.list.forEach(function (e) {
                    e.build()
                })
            }, n.prototype.size = function () {
                return this.length
            }, n.prototype.sort = function () {
                s.prototype.sort.call(this, function (e, t) {
                    return e.floorIndex - t.floorIndex
                })
            }, n.prototype.nextFloor = function (e, t) {
                return this.index[e.floorIndex + t] || null
            }, n.prototype.getFloorAtPoint = function (e) {
                for (var t = null, i = 1 / 0, n = 0; n < this.list.length; n++) {
                    var r = this.list[n], o = r.distanceToPoint(e);
                    (!t || i > o) && (i = o, t = r)
                }
                return t
            }, n.prototype.getOrMakeFloor = function (e) {
                var t = this.index[e];
                return t || (t = new r(this.model, e), this.add(t)), t
            }, n.prototype.hide = function () {
                this.list.forEach(function (e) {
                    e.hide()
                })
            }, n.prototype.show = function () {
                this.list.forEach(function (e) {
                    e.show()
                })
            }, n.prototype.names = function () {
                return this.list.reduce(function (e, t) {
                    return e.concat(t.name)
                }, [])
            }, n.prototype.toggleExplodeHorizontal = function () {
                function e(e, t) {
                    e.position.x = i[e.floorIndex] * t, e.position.y = 1 * e.floorIndex * t
                }

                var t, i = [], n = 0;
                this.list.forEach(function (e, r, o) {
                    t = r > 0 ? Math.max(o[r - 1].boundingBox.max.x - e.boundingBox.min.x, e.boundingBox.size().x / 2) : 0, n += t, i[r] = n
                }), i = i.map(function (e) {
                    return e - n / 2
                }), this.exploded ? this.list.forEach(function (t) {
                    a.start(function (i) {
                        e(t, 1 - i)
                    }.bind(this), 1500, null, 0, h.easeOutExpo)
                }.bind(this)) : this.list.forEach(function (t) {
                    a.start(function (i) {
                        e(t, i)
                    }.bind(this), 1500, null, 0, h.easeOutExpo)
                }.bind(this)), this.exploded = !this.exploded
            }, n.prototype.toggleExplodeVertical = function () {
                function e(e, i) {
                    e.position.y = (5 * e.floorIndex - t.y / 2) * i, e.panos.forEach(function (t) {
                        t.position.y = t.origin.y + e.position.y, t.skyboxMesh.position.y = t.origin.y + e.position.y
                    })
                }

                var t = this.model.size;
                this.exploded ? this.list.forEach(function (t) {
                    a.start(function (i) {
                        e(t, 1 - i)
                    }, 1500, null, 0, h.easeOutExpo)
                }) : this.list.forEach(function (t) {
                    a.start(function (i) {
                        e(t, i)
                    }, 1500, null, 0, h.easeOutExpo)
                }), this.exploded = !this.exploded
            }, t.exports = n
        }).call(this, "/js/model/FloorCollection.js")
    }, {
        "../objects/Floor": 109,
        "../settings": 123,
        "../util/IndexedCollection": 133,
        "../util/common": 142,
        "../util/easing": 143,
        "../util/logger": 146,
        "../util/transitions": 152
    }],
    100: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                h.call(this)
            }

            var r = e("../settings"), o = e("../util/logger"), a = e("../enum/Viewmode"), s = e("../objects/Snapshot"), l = (e("../util/math"), e("../util/common")), h = e("../util/IndexedCollection"), c = new o(i);
            l.inherit(n, h), n.prototype.getHeroImage = function () {
                for (var e = 0; e < this.list.length; e++)if (this.list[e].is_hero)return this.list[e];
                return null
            }, n.prototype.filterByModesAndReel = function (e, t) {
                for (var i = [], n = 0; n < t.length; n += 1) {
                    var r = t[n], o = this.index[r.sid];
                    o && i.push(o)
                }
                var s = e[a.DOLLHOUSE], l = e[a.FLOORPLAN];
                i = i.filter(function (e) {
                    if (!e.metadata)return !0;
                    if (void 0 === e.metadata.camera_mode)return !0;
                    var t = a.convertWorkshopModeInt(e.metadata.camera_mode);
                    return t === a.PANORAMA || t === a.FLOORPLAN && l || t === a.DOLLHOUSE && s
                }), i.length !== this.list.length && c.info("Disallowed " + (this.list.length - i.length) + " highlight images"), this.list = i, this.reIndex()
            }, n.prototype.getHeroLocations = function (e) {
                if (0 === this.list.length)return [];
                for (var t = [], i = !1, o = 0; o < this.list.length; ++o) {
                    var l = this.list[o], h = l.thumbnail_signed_src, c = l.name;
                    if (l.metadata && void 0 !== l.metadata.camera_quaternion) {
                        if (!r.show360Views.enabled && l.metadata.scan_id) {
                            var u = e.get(l.metadata.scan_id);
                            if (u && !u.isAligned())continue
                        }
                        var d = {
                            cameraMode: a.convertWorkshopModeInt(l.metadata.camera_mode),
                            position: l.metadata.camera_position,
                            quaternion: l.metadata.camera_quaternion,
                            panoId: l.metadata.scan_id,
                            orthoZoom: l.metadata.ortho_zoom,
                            floorVisibility: void 0 !== l.metadata.floor_visibility ? l.metadata.floor_visibility.slice(0) : [],
                            thumbUrl: h,
                            name: n.filterImageName(c),
                            isHero: l.is_hero
                        }, p = new s(d);
                        t.push(p), i = i || l.is_hero
                    }
                }
                return t.length > 0 & !i && (t[0].isHero = !0), t
            }, n.prototype.getIndex = function (e) {
                return e.sid
            }, n.filterImageName = function (e) {
                return "" === e || e.match(/^[0-9.]+_[0-9.]+$/) ? null : e
            }, t.exports = n
        }).call(this, "/js/model/ImageCollection.js")
    }, {
        "../enum/Viewmode": 42,
        "../objects/Snapshot": 116,
        "../settings": 123,
        "../util/IndexedCollection": 133,
        "../util/common": 142,
        "../util/logger": 146,
        "../util/math": 147
    }],
    101: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                u.call(this)
            }

            var r = e("../label/Label"), o = e("../settings"), a = e("../util/logger"), s = e("../util/math"), l = e("../util/ajax"), h = e("./RoomCollection"), c = e("../util/common"), u = e("../util/IndexedCollection");
            new a(i);
            c.inherit(n, u), n.prototype.getIndex = function (e) {
                return e.labelId
            }, n.prototype.associateWithRooms = function (e) {
                this.forEach(function (t) {
                    e.forEach(function (e) {
                        e.roomId === t.roomId && (t.room = e)
                    })
                })
            }, n.prototype.createFromLabelData = function (e) {
                e.forEach(function (e) {
                    var t = n.parseRoomIndexFromWorkshopRoomId(e.roomId);
                    t = h.generateRoomId(e.floorId, t);
                    var i = new r(e.sid, e.position || e.positions[0], e.text, e.floorId, t);
                    i.position = s.convertWorkshopVector(i.position), this.add(i), i.build()
                }.bind(this))
            }, n.prototype.load = function (e) {
                return l.get(e, {responseType: "json", auth: o.authorizationHeader}).done(function (e) {
                    var t = [];
                    for (var i in e) {
                        var n = e[i];
                        t.push(n)
                    }
                    this.createFromLabelData(t)
                }.bind(this))
            }, n.parseRoomIndexFromWorkshopRoomId = function (e) {
                var t = -1;
                if (e) {
                    var i = e.split("_");
                    t = parseInt(i[0])
                }
                return t
            }, t.exports = n
        }).call(this, "/js/model/LabelCollection.js")
    }, {
        "../label/Label": 58,
        "../settings": 123,
        "../util/IndexedCollection": 133,
        "../util/ajax": 138,
        "../util/common": 142,
        "../util/logger": 146,
        "../util/math": 147,
        "./RoomCollection": 104
    }],
    102: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t) {
                r.Object3D.call(this), this.sid = t.sid, this.data = t, this.options = e, this.urls = new a(e.urlFiles), this.images = new x(this), this.images.extend(t.images), this.heroImage = this.images.getHeroImage(), this.heroLocations = [], this.outdoorPanoLocations = [], this.floors = new u(this), this.floorsEnabled = void 0 !== e.floors ? e.floors : !0, this.changingFloor = !1, this.chunks = [], this.panos = new v, this.colliders = [], this.loadPanosPromise = null, this.loadMeshTexturesPromise = null, this.meshTexturesLoaded = !1, this.mattertags = {}, this.showingMattertags = !1, this.has360Views = !1, this.showingLabels = p.labels.enabled && t.player_options.labels, this.supportedModes = {}, this.supportedModes[l.PANORAMA] = !0, this.supportedModes[l.DOLLHOUSE] = !t.player_options || t.player_options.dollhouse, this.supportedModes[l.FLOORPLAN] = !t.player_options || t.player_options.floor_plan, this.supportedModes[l.TRANSITIONING] = !0, this.supportsTiles = !1, p.tiling.tilingFlagNames.forEach(function (e) {
                    1 === w.valueFromHash(e, 0) && (this.supportsTiles = !0)
                }.bind(this)), this.supportsVR = t.is_vr, this.mode = l.DOLLHOUSE, this.size = null, this.center = null, this.boundingBox = new r.Box3, this.currentFloor = null, this.allFloorsVisible = !0, this.projectedPano0 = null, this.projectedPano1 = null, this.floorsEnabled && t.floors && -1 !== t.floors.indexOf(",") && t.floors.split(",").forEach(function (e, t) {
                    this.addFloor(new c(this, t, e.trim()))
                }.bind(this)), this.waitQueue = [], this.on("load", function (e) {
                    0 !== this.waitQueue.length && (this.waitQueue = this.waitQueue.filter(function (e) {
                        return !e.isLoadedCallback()
                    }), 0 === this.waitQueue.length && this.emit("waiting-done"))
                }.bind(this)), this.setupCustomProperties()
            }

            var r = e("three"), o = e("../util/ajax"), a = e("../util/ModelUrls"), s = e("../objects/BoundingTextureSkybox"), l = e("../enum/Viewmode"), h = e("../enum/RenderOrder"), c = (e("../enum/AlignmentType"), e("../objects/Floor")), u = e("./FloorCollection"), d = e("../objects/Chunk"), p = (e("../objects/Room"), e("../objects/Snapshot"), e("../label/Label"), e("../shaders"), e("../util/math"), e("../settings")), f = e("../util/logger"), g = e("../mattertag/Mattertag"), m = e("../objects/Panorama"), v = e("../util/PanoramaCollection"), A = e("../loaders/ModelLoader"), y = e("../loaders/ModelTextureLoader"), C = e("../loaders/SweepDataLoader"), I = e("../util/transitions"), b = (e("../util/easing"), e("../util/lerp"), e("../util/common")), w = (e("../util/texture"), e("./../util/browser")), x = e("./ImageCollection"), E = e("./RoomCollection"), M = e("./LabelCollection"), T = e("./Chunks"), S = (e("./../util/showcase"), e("../exception/BasicException")), P = e("events").EventEmitter, _ = new f(i);
            n.prototype = Object.create(r.Object3D.prototype), b.extend(n, P), n.prototype.setupCustomProperties = function () {
                var e = p.modelAlpha;
                Object.defineProperty(this, "alpha", {
                    get: function () {
                        return e
                    }, set: function (t) {
                        e = t, this.chunks.forEach(function (t) {
                            t.material && t.material.uniforms.modelAlpha && (t.material.uniforms.modelAlpha.value = e)
                        })
                    }
                })
            }, n.prototype.toggleAlpha = function () {
                this.alpha < 1 ? this.alpha = 1 : this.alpha = 0
            }, n.prototype.load = function (e) {
                var t = function () {
                    return $.when(this.loadPanos(), this.loadMesh())
                }, i = this.urls.init().then(t.bind(this));
                e ? i = i.then(this.loadMeshTextures.bind(this)) : i.then(this.loadMeshTextures.bind(this));
                var n = $.when(this.loadHighlightReel(), this.loadMattertags(), this.loadLabels());
                return $.when(i, n).done(this.build.bind(this))
            }, n.prototype.loadMesh = function () {
                function e(e) {
                    _.error(e), n.reject("loading-failed")
                }

                function t(e, t) {
                    n.notify(e, t)
                }

                function i(e, t) {
                    if (0 === e.length) {
                        _.warn("No geometry found for model, loading faux geometry, disabling outside mode"), o.supportedModes[l.DOLLHOUSE] = !1, o.supportedModes[l.FLOORPLAN] = !1;
                        var i = new d({geometry: new r.PlaneBufferGeometry(5, 5, 1, 1)});
                        i.material.visible = !1, i.rotateX(-Math.PI / 2), i.geometry.computeBoundingBox(), e = [i]
                    }
                    e.forEach(function (e) {
                        var t = o.floorsEnabled ? T.parseFloor(e.name) : 0;
                        o.addChunk(t, e)
                    }), o.floors.sort(), n.resolve(o)
                }

                var n = $.Deferred(), o = this;
                return A.load(o.data.job.uuid, o.urls, i, t, e), n.promise()
            }, n.prototype.loadMeshTextures = function () {
                return this.loadTexturesPromise ? this.loadTexturesPromise : (this.loadTexturesPromise = y.load(this).then(function () {
                    this.meshTexturesLoaded = !0
                }.bind(this)), this.loadTexturesPromise)
            }, n.prototype.loadMattertags = function () {
                var e = $.Deferred();
                if (!p.mattertags.enabled)return e.resolve();
                var t = this.options.urlBase + "/api/v1/jsonstore/model/mattertags/" + this.sid;
                return o.get(t, {responseType: "json", auth: p.authorizationHeader}).done(function (t) {
                    var i = 0, n = 0;
                    for (var r in t) {
                        var o = t[r];
                        o.enabled && (n++, (o.label.length || o.description.length) && (this.mattertags[r] = new g(this, r, o), i++))
                    }
                    i !== n && _.warn("Disallowed " + (n - i) + " tags with no text data"), e.resolve()
                }.bind(this)).fail(function () {
                    _.warn("Getting tags failed, not displaying tags."), e.resolve()
                }), e
            }, n.prototype.loadPanos = function () {
                if (this.loadPanosPromise)return this.loadPanosPromise;
                var e = new C(this);
                return this.loadPanosPromise = e.load().then(function (e) {
                    return this.data.sweeps && Object.keys(this.data.sweeps).length > 0 && (e = e.filter(function (e) {
                        return this.data.sweeps[e.uuid].enabled
                    }.bind(this))), this.panos.extend(e.map(function (e) {
                        return new m(this, e.uuid, e, this.supportsTiles)
                    }.bind(this))), this.panos.forEach(function (e) {
                        e.neighbourUUIDs && (e.neighbourUUIDs.forEach(function (t) {
                            var i = this.panos.get(t);
                            i && this.panos.setNeighbour(e, i, !0)
                        }.bind(this)), e.neighbourPanos = this.panos.getNeighbours(e) || this.panos.setNeighbour(e, e, !0))
                    }.bind(this)), 0 === this.panos.length && (_.warn("Model has no panos, turning off inside mode"), this.supportedModes[l.PANORAMA] = !1), $.when(this)
                }.bind(this)), this.loadPanosPromise
            }, n.prototype.loadHighlightReel = function () {
                var e = $.Deferred(), t = this.options.urlBase + "/api/v1/jsonstore/model/highlights/" + this.sid + "/active_reel";
                return o.get(t, {responseType: "json", auth: p.authorizationHeader}).done(function (t) {
                    t.reel ? (_.info("Got highlight reel with " + t.reel.length + " items"), this.images.filterByModesAndReel(this.supportedModes, t.reel)) : _.info("No highlight reel found"), e.resolve()
                }.bind(this)).fail(function () {
                    _.warn("Getting highlight reel failed, no highlights available"), e.resolve()
                }), e
            }, n.prototype.waitForLoad = function (e, t) {
                t() || (this.waitQueue.push({
                    object: e,
                    isLoadedCallback: t
                }), 1 === this.waitQueue.length && this.emit("waiting"))
            }, n.prototype.update = function (e) {
                this.panos.update(e)
            }, n.prototype.hide = function () {
                this.floors.hide()
            }, n.prototype.show = function () {
                this.floors.show()
            }, n.prototype.floorNames = function () {
                return this.floors.names()
            }, n.prototype.warpDestFloors = function (e) {
                if (!e)return void this.toggleAllFloors(!0);
                var t = e.floorVisibility;
                if (void 0 === t || t.length < 2)this.toggleAllFloors(!0); else {
                    this.toggleAllFloors(!1);
                    for (var i = null, n = 0, r = 0; r < t.length; r += 1)t[r] && (r < this.floors.list.length ? (i = this.floors.list[r], n += 1) : _.warn("Invalid floor selection in warpDestination"));
                    n > 1 ? this.toggleAllFloors(!0) : i ? this._setFloor(i) : _.info("hmm what floor did we want?")
                }
            }, n.prototype.toggleStartFloors = function () {
                var e = 0, t = null;
                if (this.heroImage && this.heroImage.metadata && this.heroImage.metadata.floor_visibility) {
                    var i = this.heroImage.metadata.floor_visibility;
                    if (i.length > 1) {
                        this.toggleAllFloors(!1);
                        for (var n = 0; n < i.length; n += 1)i[n] && (n < this.floors.list.length ? (t = this.floors.list[n], e += 1) : _.warn("Invalid floor selection: " + n))
                    }
                }
                e > 1 || 1 > e ? this.toggleAllFloors(!0) : this._setFloor(t)
            }, n.prototype.setFloor = function (e, t) {
                this.allFloorsVisible && this.emit("allfloors.toggled", !1, this.currentFloor), this.allFloorsVisible = !1, this._setFloor(e, t)
            }, n.prototype.toggleAllFloors = function (e) {
                this.allFloorsVisible = void 0 !== e ? e : !this.allFloorsVisible, this.emit("allfloors.toggled", this.allFloorsVisible, this.currentFloor), this._setFloor(this.currentFloor)
            }, n.prototype._setFloor = function (e, t) {
                t = t || this.mode, this.emit("floor.changed", e, t, this.currentFloor), this.currentFloor = e;
                var i;
                if (t === l.PANORAMA) {
                    if (this.show(), this.showingMattertags)for (i in this.mattertags)this.mattertags[i].show(p.showFloorDuration)
                } else if ((t === l.FLOORPLAN || t === l.DOLLHOUSE) && (this.floors.list.forEach(function (e, t) {
                        e.toggle(e === this.currentFloor || this.allFloorsVisible, this.allFloorsVisible)
                    }.bind(this)), this.showingMattertags))for (i in this.mattertags) {
                    var n = this.mattertags[i];
                    this.allFloorsVisible ? n.show(p.showFloorDuration) : n.floor === this.currentFloor ? n.show(p.showFloorDuration, p.showFloorDelay) : n.hide(p.hideFloorDuration, p.hideFloorDelay)
                }
                var r = this, o = e;
                I.start(function () {
                }, p.showFloorDelay, function () {
                    r.floors.forEach(function (e) {
                        e.chunks.forEach(function (t) {
                            t.renderOrder = e === o ? h.visibleFloor : h.ghostFloor
                        })
                    })
                }.bind(this))
            }, n.prototype.toggleExplode = function () {
                this.floors.toggleExplodeHorizontal()
            }, n.prototype.toggleExplodeUp = function () {
                this.floors.toggleExplodeVertical()
            }, n.prototype.nextFloor = function (e) {
                return this.floors.nextFloor(this.currentFloor, e)
            }, n.prototype.addFloor = function (e) {
                this.floors.add(e)
            }, n.prototype.getFloorAtPoint = function (e) {
                return this.floors.getFloorAtPoint(e)
            }, n.prototype.getTagBySid = function (e) {
                return this.mattertags[e]
            }, n.prototype.addChunk = function (e, t) {
                this.floors.getOrMakeFloor(e).addChunk(t), this.chunks.push(t)
            }, n.prototype.setMode = function (e) {
                if (!this.supportedModes[e])throw new S("Mode not supported for this model: " + e);
                this.mode = e, this.chunks.forEach(function (t) {
                    t.setMode(e)
                })
            }, n.prototype.build = function () {
                this.heroLocations = this.images.getHeroLocations(this.panos), this.has360Views = p.show360Views.enabled && this.heroLocations.some(function (e) {
                        return e.cameraMode === l.PANORAMA && this.panos.get(e.panoId) && !this.panos.get(e.panoId).isAligned()
                    }.bind(this)), null === this.heroImage && _.warn("No hero image defined."), this.currentFloor = this.floors.last(), this.floors.build(), this.colliders = this.floors.reduce(function (e, t) {
                    return e.concat(t.collider.children)
                }, []), this.panos.forEach(function (e) {
                    e.build1(), e.on("enter", function () {
                        e.floor !== this.currentFloor && this.setFloor(e.floor)
                    }.bind(this))
                }.bind(this)), this.panos.forEach(function (e) {
                    e.build2()
                }), this.floors.forEach(function (e) {
                    this.boundingBox.union(e.boundingBox)
                }.bind(this)), this.size = this.boundingBox.size(), this.center = this.boundingBox.center(), this.floors.forEach(function (e) {
                    _.info("Floor " + e + ": " + e.children.length + " chunks, " + e.panos.length + " panos.")
                }.bind(this)), this.panos.populate_path_graph(), this.skybox = new s(this.boundingBox), this.skybox.matrixWorldNeedsUpdate = !0, this.add(this.skybox);
                for (var e in this.mattertags)this.mattertags[e].build();
                return _.debug("Done building model"), m.raycastsDone > 0 && (_.warn("raycasts: " + m.raycastsDone), _.warn("raycasts skipped: " + m.raycastsSkipped)), this.buildRooms(), this.labels.associateWithRooms(this.rooms), $.when(this)
            }, n.prototype.loadLabels = function () {
                if (this.labels = new M(this), !this.showingLabels)return $.Deferred().resolve();
                var e = this.options.urlBase + "/api/v1/jsonstore/model/labels/" + this.sid;
                return this.labels.load(e)
            }, n.prototype.buildRooms = function () {
                this.rooms = new E(this), this.rooms.createFromChunks(this.chunks), this.rooms.calcRoomBoundaries()
            }, n.prototype.setProjectedPanos = function (e, t) {
                this.projectedPano0 = e, this.projectedPano1 = t, this.skybox.material.setProjectedPanos(e, t), this.chunks.forEach(function (i) {
                    i.material.setProjectedPanos(e, t)
                })
            }, n.prototype.setSide = function (e) {
                this.floors.forEach(function (t) {
                    t.collider.material.side = e
                })
            }, n.prototype.heroCount = function () {
                return this.heroLocations ? this.heroLocations.length : 0
            }, n.prototype.getHeroDescriptorByIndex = function (e) {
                if (0 > e)return _.warn("Model.getHeroDescriptorByHeroIndex() -> heroIndex is less than 0."), null;
                var t = this.heroCount();
                if (1 > t)return _.warn("Model.getHeroDescriptorByIndex() -> No hero locations in this model"), null;
                var i = this.heroLocations[e];
                return void 0 === i ? (_.warn("Model.getHeroDescriptorByIndex() -> Index " + e + " is not a validindex"), null) : i
            }, n.prototype.findPanoramicHero = function () {
                for (var e in this.heroLocations)if (this.heroLocations[e].cameraMode === l.PANORAMA)return this.heroLocations[e];
                return null
            }, n.prototype.listImagePanos = function () {
                var e = [], t = this;
                return this.images.forEach(function (i) {
                    if (i.metadata && i.metadata.scan_id) {
                        var n = t.panos.get(i.metadata.scan_id);
                        n && (t.supportsTiles || n.isLoaded("high") || e.push(n))
                    }
                }), e
            }, n.prototype.fadePanoMarkers = function (e, t) {
                this.panos.fadeMarkerOpacity(e, t)
            }, n.prototype.setSweepVisibility = function (e) {
                this.panos.forEach(function (t) {
                    t.marker && (t.marker.visible = e)
                })
            }, n.prototype.outsideAllowed = function () {
                return this.supportedModes[l.DOLLHOUSE] && this.supportedModes[l.FLOORPLAN]
            }, t.exports = n
        }).call(this, "/js/model/Model.js")
    }, {
        "../enum/AlignmentType": 15,
        "../enum/RenderOrder": 33,
        "../enum/Viewmode": 42,
        "../exception/BasicException": 44,
        "../label/Label": 58,
        "../loaders/ModelLoader": 90,
        "../loaders/ModelTextureLoader": 91,
        "../loaders/SweepDataLoader": 92,
        "../mattertag/Mattertag": 96,
        "../objects/BoundingTextureSkybox": 106,
        "../objects/Chunk": 107,
        "../objects/Floor": 109,
        "../objects/Panorama": 111,
        "../objects/Room": 113,
        "../objects/Snapshot": 116,
        "../settings": 123,
        "../shaders": 124,
        "../util/ModelUrls": 135,
        "../util/PanoramaCollection": 136,
        "../util/ajax": 138,
        "../util/common": 142,
        "../util/easing": 143,
        "../util/lerp": 145,
        "../util/logger": 146,
        "../util/math": 147,
        "../util/texture": 151,
        "../util/transitions": 152,
        "./../util/browser": 139,
        "./../util/showcase": 150,
        "./Chunks": 98,
        "./FloorCollection": 99,
        "./ImageCollection": 100,
        "./LabelCollection": 101,
        "./RoomCollection": 104,
        events: 160,
        three: 175
    }],
    103: [function (e, t, i) {
        "use strict";
        function n() {
            this.modelMap = {}, this.activeModel = null, this.modelCount = 0, this.tileDownloader = null, this.panoRenderer = null
        }

        var r = (e("three"), e("../util/common")), o = e("../exception/BasicException"), a = e("../enum/ModelManagerEvents"), s = e("events").EventEmitter;
        n.prototype.init = function (e, t, i) {
            this.tileDownloader = e, this.panoRenderer = t, this.qualityManager = i
        }, n.prototype.addModel = function (e) {
            this.modelMap[e.sid] = e, 0 === this.modelCount && this.activateModel(e.sid), this.modelCount++, this.emit(a.ModelAdded)
        }, n.prototype.getModel = function (e) {
            return this.modelMap[e]
        }, n.prototype.activateModel = function (e) {
            var t = this.modelMap[e];
            if (!t)throw new o("Tried to activate invalid model!");
            this.activeModel = t, this.tileDownloader.setPanoData(t.panos, t.listImagePanos(), t.sid), this.tileDownloader.setUrls(t.urls), t.panos.forEach(function (e) {
                e.attachToPanoRenderer(this.panoRenderer), e.tileDownloader = this.tileDownloader, e.qualityManager = this.qualityManager
            }.bind(this)), this.emit(a.ActiveModelChanged)
        }, n.prototype.getActiveModel = function () {
            return this.activeModel
        }, r.extend(n, s), t.exports = n
    }, {
        "../enum/ModelManagerEvents": 26,
        "../exception/BasicException": 44,
        "../util/common": 142,
        events: 160,
        three: 175
    }],
    104: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                s.call(this)
            }

            var r = e("../objects/Room"), o = (e("../settings"), e("../util/logger")), a = (e("../util/transitions"), e("../util/easing"), e("../util/common")), s = e("../util/IndexedCollection"), l = e("./Chunks");
            new o(i);
            a.inherit(n, s), n.prototype.getIndex = function (e) {
                return e.roomId
            }, n.prototype.calcRoomBoundaries = function () {
                this.forEach(function (e) {
                    e.calcBoundaries()
                })
            }, n.prototype.createFromChunks = function (e) {
                var t = {floorId: -1, roomId: -1}, i = {};
                e.forEach(function (e) {
                    l.parseIdsFromChunkName(e.name, t);
                    var o = i[t.roomId];
                    if (!o) {
                        var a = n.generateRoomId(t.floorId, t.roomId);
                        o = new r(t.floorId, a), this.add(o), i[t.roomId] = o
                    }
                    o.addChunk(e)
                }.bind(this)), this.calcRoomBoundaries()
            }, n.generateRoomId = function (e, t) {
                return e + "_" + t
            }, t.exports = n
        }).call(this, "/js/model/RoomCollection.js")
    }, {
        "../objects/Room": 113,
        "../settings": 123,
        "../util/IndexedCollection": 133,
        "../util/common": 142,
        "../util/easing": 143,
        "../util/logger": 146,
        "../util/transitions": 152,
        "./Chunks": 98
    }],
    105: [function (e, t, i) {
        "use strict";
        function n(e, t, i) {
            e = e.clone();
            var n = e.size(), o = new r.BoxGeometry(n.x, n.y, n.z);
            o.boundingBox = e, r.Mesh.call(this, o, t), this.position.copy(e.center()), this.frustumCulled = !1, i && this.add(new r.WireframeHelper(this))
        }

        var r = e("three");
        n.prototype = Object.create(r.Mesh.prototype), n.prototype.constructor = n, t.exports = n
    }, {three: 175}],
    106: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                c.time("Computing a nice bounding cubemap");
                var t = new a({side: r.BackSide, transparent: !0});
                t.uniforms.modelAlpha.value = 0, t.uniforms.opacity.value = 1 - s.modelAlpha, this.renderOrder = l.boundingSkybox, o.call(this, e, t), c.timeEnd("Computing a nice bounding cubemap")
            }

            var r = e("three"), o = (e("../enum/Viewmode"), e("../shaders"), e("./BoundingMesh")), a = e("../materials/ModelTextureMaterial"), s = e("../settings"), l = e("../enum/RenderOrder"), h = e("../util/logger"), c = new h(i);
            n.prototype = Object.create(o.prototype), n.prototype.constructor = n, t.exports = n
        }).call(this, "/js/objects/BoundingTextureSkybox.js")
    }, {
        "../enum/RenderOrder": 33,
        "../enum/Viewmode": 42,
        "../materials/ModelTextureMaterial": 95,
        "../settings": 123,
        "../shaders": 124,
        "../util/logger": 146,
        "./BoundingMesh": 105,
        three: 175
    }],
    107: [function (e, t, i) {
        "use strict";
        function n(e) {
            this.materialInside = new s({side: r.DoubleSide});
            var t = r.UniformsUtils.clone(o.modelOutside.uniforms);
            this.materialOutside = new r.RawShaderMaterial({
                fragmentShader: o.modelOutside.fragmentShader,
                vertexShader: o.modelOutside.vertexShader,
                uniforms: t,
                side: r.FrontSide,
                name: "chunkOut"
            }), r.Mesh.call(this, e.geometry, this.materialInside), this.name = e.name || "", this.textureName = e.textureName, this.meshUrl = e.meshUrl
        }

        var r = e("three"), o = e("../shaders"), a = e("../enum/Viewmode"), s = e("../materials/ModelTextureMaterial");
        n.prototype = Object.create(r.Mesh.prototype), n.prototype.setTextureMap = function (e) {
            this.materialInside.uniforms.map.value = e, this.materialOutside.uniforms.map.value = e
        }, n.prototype.setMode = function (e) {
            var t = e === a.DOLLHOUSE || e === a.FLOORPLAN ? this.materialOutside : this.materialInside;
            t.side = e === a.PANORAMA ? r.DoubleSide : r.FrontSide, t.transparent = this.material.transparent, t.uniforms.opacity.value = this.material.uniforms.opacity.value, this.material = t
        }, t.exports = n
    }, {"../enum/Viewmode": 42, "../materials/ModelTextureMaterial": 95, "../shaders": 124, three: 175}],
    108: [function (e, t, i) {
        "use strict";
        function n(e) {
            this.chunksize = e || 10, this.chunks = {}, this.boundingBoxes = {}, this.children = [], this.offset = new r.Vector3(0, .5, 0), this.material = new r.MeshBasicMaterial({
                color: 16777215 * Math.random(),
                side: r.DoubleSide
            })
        }

        var r = e("three");
        e("../enum/Viewmode");
        n.prototype.add = function (e) {
            var t, i, n, o, a, s, l, h, c, u, d, p, f, g, m = e.attributes;
            m ? (t = m.position.array, i = void 0 !== e.index ? e.index.array : void 0) : (t = e.vertices, n = e.faces);
            var v = new r.Vector3;
            if (i)for (o = 0, a = i.length; a > o; o += 3) {
                var A = 3 * i[o], y = 3 * i[o + 1], C = 3 * i[o + 2];
                s = (t[A] + t[y] + t[C]) / 3, l = (t[A + 1] + t[y + 1] + t[C + 1]) / 3, h = (t[A + 2] + t[y + 2] + t[C + 2]) / 3, c = Math.floor(s / this.chunksize), u = Math.floor(l / this.chunksize), d = Math.floor(h / this.chunksize), p = c + "." + u + "." + d, p in this.chunks ? (g = this.chunks[p], f = this.boundingBoxes[p]) : (g = this.chunks[p] = [], f = this.boundingBoxes[p] = new r.Box3), g.push(t[A], t[A + 1], t[A + 2], t[y], t[y + 1], t[y + 2], t[C], t[C + 1], t[C + 2]), f.expandByPoint(v.set(t[A], t[A + 1], t[A + 2])), f.expandByPoint(v.set(t[y], t[y + 1], t[y + 2])), f.expandByPoint(v.set(t[C], t[C + 1], t[C + 2]))
            } else for (o = 0, a = t.length; a > o; o += 9)s = (t[o] + t[o + 3] + t[o + 6]) / 3, l = (t[o + 1] + t[o + 4] + t[o + 7]) / 3, h = (t[o + 2] + t[o + 5] + t[o + 8]) / 3, c = Math.floor(s / this.chunksize), u = Math.floor(l / this.chunksize), d = Math.floor(h / this.chunksize), p = c + "." + u + "." + d, p in this.chunks ? (g = this.chunks[p], f = this.boundingBoxes[p]) : (g = this.chunks[p] = [], f = this.boundingBoxes[p] = new r.Box3), g.push(t[o], t[o + 1], t[o + 2], t[o + 3], t[o + 4], t[o + 5], t[o + 6], t[o + 7], t[o + 8]), f.expandByPoint(v.set(t[o], t[o + 1], t[o + 2])), f.expandByPoint(v.set(t[o + 3], t[o + 4], t[o + 5])), f.expandByPoint(v.set(t[o + 6], t[o + 7], t[o + 8]))
        }, n.prototype.build = function () {
            var e = new r.Object3D;
            e.material = this.material;
            for (var t in this.chunks) {
                var i = this.chunks[t], n = new r.BufferGeometry;
                n.addAttribute("position", new r.BufferAttribute(new Float32Array(i), 3)), n.boundingBox = this.boundingBoxes[t];
                var o = new r.Mesh(n, this.material);
                o.material.visible = !1, e.add(o), this.chunks[t] = []
            }
            return e
        }, t.exports = n
    }, {"../enum/Viewmode": 42, three: 175}],
    109: [function (e, t, i) {
        "use strict";
        function n(e, t, i) {
            r.Object3D.call(this), this.model = e, this.floorIndex = t, this.name = i || "Floor " + (t + 1), this.panos = [], this.chunks = [], this.colliderBuilder = new l(3), this.collider = null, this.center = null, this.boundingBox = new r.Box3, this.size = null, this.hidden = !1, this.conservativeBoundingBox = new r.Box3, this.debugColor = 16777215 * Math.random(), this.transition = null
        }

        var r = e("three"), o = e("../settings"), a = e("../util/common"), s = e("../util/lerp"), l = e("./ChunkedCollider"), h = e("../util/transitions"), c = e("../util/easing"), u = (e("../objects/Panorama"), e("../enum/RenderOrder"));
        n.prototype = Object.create(r.Object3D.prototype), n.prototype.enter = function (e) {
            this.model.setFloor(this, e)
        }, n.prototype.hide = function () {
            if (!this.hidden || this.transition) {
                this.chunks.forEach(function (e) {
                    e.material.transparent = !0
                }), h.cancel(this.transition);
                var e = o.hideFloorDuration + o.hideFloorDelay, t = o.hideFloorDelay / e;
                this.transition = h.start(s.allUniforms(this.chunks, "opacity", .08), e, function () {
                    this.hidden = !0
                }.bind(this), t, c.easeInOutQuad)
            }
        }, n.prototype.show = function (e) {
            if (this.hidden || this.transition) {
                this.hidden = !1, h.cancel(this.transition);
                var t = e ? o.showFloorDuration : o.showFloorDuration + o.showFloorDelay, i = e ? 0 : o.showFloorDelay / t;
                this.transition = h.start(s.allUniforms(this.chunks, "opacity", 1), t, function () {
                    this.hidden || this.chunks.forEach(function (e) {
                        e.material.transparent = !1
                    })
                }.bind(this), i, c.easeInOutQuad)
            }
        }, n.prototype.toggle = function (e, t) {
            e = void 0 === e ? this.hidden : e, e ? this.show(t) : this.hide()
        }, n.prototype.containsPoint = function (e) {
            return this.collider.children.some(function (t) {
                return t.geometry.boundingBox || t.geometry.computeBoundingBox(), t.geometry.boundingBox.containsPoint(e)
            })
        }, n.prototype.distanceToPoint = function (e) {
            var t = null, i = 1 / 0;
            return this.collider.children.forEach(function (n) {
                n.geometry.boundingBox || n.geometry.computeBoundingBox();
                var r = n.geometry.boundingBox.distanceToPoint(e);
                (!t || i > r) && (i = r, t = n)
            }), i
        }, n.prototype.addChunk = function (e) {
            e.renderOrder = u.ghostFloor, this.add(e), this.chunks.push(e), this.boundingBox.union(e.geometry.boundingBox), this.size = this.boundingBox.size(), this.colliderBuilder.add(e.geometry)
        }, n.prototype.addPano = function (e) {
            this.panos.push(e), this.add(e.skyboxMesh), e.marker && this.add(e.marker);
            var t = new r.Vector3(1, 1, 1), i = (new r.Box3).setFromCenterAndSize(e.position, t);
            this.boundingBox.union(i)
        }, n.prototype.build = function () {
            this.collider = this.colliderBuilder.build(!0), this.add(this.collider), this.center = this.boundingBox.center(), this.conservativeBoundingBox.copy(this.boundingBox), this.conservativeBoundingBox.min.y = a.lowerMedian(this.collider.children.map(function (e) {
                return e.geometry.boundingBox.min.y
            }), 5), this.conservativeBoundingBox.max.y = a.lowerMedian(this.collider.children.map(function (e) {
                return e.geometry.boundingBox.max.y
            }), 5), this.colliderBuilder = null
        }, n.prototype.toShortString = function () {
            return a.nth(this.floorIndex + 1)
        }, n.prototype.toString = function () {
            return this.name
        }, t.exports = n
    }, {
        "../enum/RenderOrder": 33,
        "../objects/Panorama": 111,
        "../settings": 123,
        "../util/common": 142,
        "../util/easing": 143,
        "../util/lerp": 145,
        "../util/transitions": 152,
        "./ChunkedCollider": 108,
        three: 175
    }],
    110: [function (e, t, i) {
        "use strict";
        function n(e) {
            this.player = e, this.obj3d = null, this.UP = new r.Vector3(0, 1, 0)
        }

        var r = e("three"), o = e("../settings");
        n.prototype.prefs = {
            linewidth: 3,
            height: .07,
            opacity: .45,
            endScale: .05
        }, n.prototype.discard = function () {
            if (this.obj3d) {
                var e = this.obj3d.parent;
                e && e.remove(this.obj3d)
            }
            this.obj3d = null
        }, n.prototype.draw = function () {
            if (this.discard(), o.showNeighbors) {
                var e = this.player.currentPano.floor;
                this.obj3d = new r.Object3D;
                var t = this.player.model.panos.getNeighbours(this.player.currentPano), i = this.player.currentPano.floorPosition.clone().sub(this.player.model.position);
                i.y += this.prefs.height;
                var n = .1525, a = .127, s = .0127, l = .1, h = .19, c = .2032, u = .2286, d = .255, p = new r.Matrix4;
                for (var f in t)if (t[f]) {
                    var g = this.player.model.panos.get(f), m = (g.position.clone().sub(this.player.model.position), g.position.clone().sub(g.floorPosition)), v = g.floorPosition.clone().sub(this.player.model.position);
                    v.y += this.prefs.height;
                    var A = new r.Geometry;
                    A.vertices.push(new r.Vector3(0, -s, 0), new r.Vector3(-s, 0, 0), new r.Vector3(0, s, 0), new r.Vector3(s, 0, 0), new r.Vector3(0, -s, 0)), A.vertices.push(new r.Vector3(0, -d, 0), new r.Vector3(d, -d, 0), new r.Vector3(d, n, 0), new r.Vector3(-n, n, 0), new r.Vector3(-n, a, 0), new r.Vector3(-h, l, 0), new r.Vector3(-h, -c, 0), new r.Vector3(-n, -u, 0), new r.Vector3(-n, -d, 0), new r.Vector3(0, -d, 0)), p.identity().setPosition(m), A.applyMatrix(p), A.vertices.push(new r.Vector3(0, -this.prefs.endScale, 0)), A.vertices.push(new r.Vector3(-this.prefs.endScale, -this.prefs.endScale, 0), new r.Vector3(-this.prefs.endScale, this.prefs.endScale, 0), new r.Vector3(this.prefs.endScale, this.prefs.endScale, 0), new r.Vector3(this.prefs.endScale, -this.prefs.endScale, 0)), p.lookAt(v, i, this.UP).setPosition(v), A.applyMatrix(p), A.vertices.push(v, i);
                    var y = new r.Line(A, new r.LineBasicMaterial({
                        color: g.debugColor.getHex(),
                        transparent: !0,
                        opacity: this.prefs.opacity,
                        depthWrite: !1,
                        name: "sLine" + f,
                        linewidth: this.prefs.linewidth
                    }));
                    this.obj3d.add(y)
                }
                e.add(this.obj3d)
            }
        }, n.prototype.update = function () {
            o.showNeighbors && this.obj3d && this.obj3d.updateMatrixWorld()
        }, t.exports = n
    }, {"../settings": 123, three: 175}],
    111: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t, i, n) {
                this.model = e, this.id = t, this.alignmentType = i.alignmentType || l.ALIGNED, this.neighbourUUIDs = i.neighbours || null, this.neighbourPanos = null, this.floor = null, this.floorIndex = i.floor, this.failedLoadingAt = 0, this.maxLoadRetries = 4, this.origin = i.position.clone(), this.position = this.alignmentType === l.UNALIGNED ? new r.Vector3(0, -5, 0) : i.position.clone(), this.quaternion = i.quaternion.clone(), this.skyboxMesh = new r.Mesh(I), this.skyboxMesh.position.copy(this.position), this.skyboxMesh.quaternion.copy(this.quaternion), this.skyboxMesh.name = "skybox", this.skyboxMesh.visible = !1, this.skyboxMesh.updateMatrix(), this.marker = null, this.isAligned() && (this.marker = new r.Mesh(b, new r.MeshBasicMaterial({
                    map: w,
                    side: r.DoubleSide,
                    opacity: 0,
                    transparent: !0,
                    depthWrite: !1
                })), this.marker.renderOrder = s.panoMarker, this.marker.name = "marker", this.marker.pano = this, a.colorMarkerOnLoad && this.on("load", function () {
                    this.marker.material.color.set(65280)
                })), this.debugColor = (new r.Color).setHSL(.06 + .53 * Math.random(), .8 + .2 * Math.random(), .5 + .2 * Math.random()), this.floorPosition = i.puck ? i.puck.clone() : null, this.tiled = n, this.tiled ? this.skybox = null : (this.skybox = new r.Texture([null, null, null, null, null, null]), this.skybox.flipY = !1), this.panoRenderer = null, this.qualityManager = null, this.tileDownloader = null, this.tiledPanoRenderTarget = null, this.minimumTiledPanoLoaded = !1, this.highestPartialTileRenderOpCompleted = 0, this.highestFullTileRenderOpCompleted = 0, this.shouldRedrawOnBaseLoaded = !1, this.lockUntilRenderingComplete = !1, a.colorMarkerOnLoad && this.on("load", function () {
                    this.marker.material.color.set(65280)
                })
            }

            var r = e("three"), o = e("../util/logger"), a = e("../settings"), s = (e("../enum/Viewmode"), e("../enum/RenderOrder")), l = e("../enum/AlignmentType"), h = (e("../util/common"), e("../util/transitions")), c = e("../util/lerp"), u = e("../util/ajax"), d = e("../util/texture"), p = e("../util/panorama"), f = (e("../enum/TileDownloaderEvents"), e("../enum/PanoramaEvents")), g = e("../enum/PanoRendererEvents"), m = e("../enum/PanoSizeClass"), v = (e("../scene/SceneRenderer"), e("../enum/GLCubeFaces"), e("../exception/BasicException")), A = e("../tile/TileUtils"), y = e("events").EventEmitter, C = new o(i), I = new r.SphereBufferGeometry(.1), b = new r.PlaneBufferGeometry(.4, .4, 1, 1), w = d.loadBase64("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");
            n.prototype = Object.create(y.prototype), n.prototype.enter = function () {
                this.emit("enter")
            }, n.prototype.exit = function () {
                this.tiled ? (this.clearWaitDeferreds(), this.minimumTiledPanoLoaded = !1, this.tiledPanoRenderTarget = null, this.skybox = null, this.panoRenderer.deactivateTiledPano(this), this.highestPartialTileRenderOpCompleted = 0, this.highestFullTileRenderOpCompleted = 0) : (this.skybox.dispose(), this.skybox.loaded = !1, this.skybox.version = 0), this.emit("exit")
            }, n.prototype.hoverOn = function (e) {
                this.marker && (h.start(c.property(this.marker.material, "opacity", a[e].markerOpacityOnHover), 250), a.navigation.panoScores & a.navigation.mouseDirection && this.addTextSprite("HIT", 12525854))
            }, n.prototype.hoverOff = function (e) {
                this.marker && h.start(c.property(this.marker.material, "opacity", a[e].markerOpacity), 250)
            }, n.prototype.build1 = function () {
                this.floor = this.floor || this.model.floors[this.floorIndex] || this.raycastToFindFloor() || this.model.getFloorAtPoint(this.position), this.floor.addPano(this), this.floorPosition = this.floorPosition || this.raycastFloorPosition(), this.neighbourPanos = this.neighbourPanos || this.findNeighourPanos(), a.colorMarkerByFloor && this.marker && this.marker.material.color.set(this.floor.debugColor)
            }, n.prototype.build2 = function () {
                this.floorPosition = this.floorPosition || this.interpolateFloorPosition(), this.height = this.position.distanceTo(this.floorPosition), this.placeMarker()
            }, n.prototype.update = function (e) {
                this.skyboxMesh.updateMatrixWorld(), this.position.setFromMatrixPosition(this.skyboxMesh.matrixWorld), this.marker && (this.marker.updateMatrixWorld(), this.floorPosition.setFromMatrixPosition(this.marker.matrixWorld))
            }, n.prototype.interpolateFloorPosition = function () {
                var e = this.model.panos.filter(n.filters.isNeighbourPanoTo(this)).filter(function (e) {
                    return !!e.floorPosition
                }).sort(function (e, t) {
                    return e.position.distanceTo(this.position) - t.position.distanceTo(this.position)
                }.bind(this)), t = this.position.clone();
                return e.length >= 2 ? t.y = (e[0].floorPosition.y + e[1].floorPosition.y) / 2 : t.add(a.noMeshFloorPositionOffset), t
            }, n.prototype.raycastFloorPosition = function () {
                var e = new r.Raycaster(this.position, new r.Vector3(0, -1, 0)), t = e.intersectObjects(this.model.colliders);
                return t.length ? t[0].point : null
            }, n.prototype.raycastToFindFloor = function () {
                var e = [new r.Vector3(0, -1, 0), new r.Vector3(1, -1, 0), new r.Vector3(0, -1, 1), new r.Vector3(-1, -1, 0), new r.Vector3(0, -1, -1), new r.Vector3(1, 0, 0), new r.Vector3(0, 0, 1), new r.Vector3(-1, 0, 0), new r.Vector3(0, 0, -1)];
                return function () {
                    for (var t = 0; t < e.length; t++) {
                        var i = new r.Raycaster(this.position.clone(), e[t].clone()), n = i.intersectObjects(this.model.colliders);
                        if (n.length)return n[0].object.parent.parent
                    }
                    return null
                }
            }(), n.prototype.placeMarker = function () {
                this.marker && (this.marker.position.copy(this.floorPosition), this.marker.position.y += .05, this.marker.lookAt(new r.Vector3(0, 1, 0).add(this.marker.position)))
            }, n.prototype.findClosestMidtpointPanoTo = function (e) {
                (new r.Vector3).addVectors(this.position, e.position).divideScalar(2);
                return this.model.panos.find([n.filters.notIn([this, e])], [n.sortFunctions.distanceToPoint(point)])
            }, n.prototype.attachToPanoRenderer = function (e) {
                this.panoRenderer = e, this.panoRenderer.on(g.TileRenderSuccess, this.onTileRendered.bind(this)), this.panoRenderer.on(g.PanoRenderComplete, this.onPanoRendered.bind(this)), this.panoRenderer.on(g.TileRenderFailure, this.onTileRenderFail.bind(this)), this.panoRenderer.on(g.UploadAttemptedForAllTiles, this.onUploadAttemptedForAllTiles.bind(this))
            };
            var x = {};
            n.prototype.getWaitDeferred = function (e) {
                var t = x[this.id];
                t || (t = {}, x[this.id] = t);
                var i = t[e];
                return i || (i = {deferred: $.Deferred(), active: !1}, t[e] = i), i
            }, n.prototype.resetWaitDeferred = function (e) {
                var t = this.getWaitDeferred(e);
                t.active = !1, t.deferred = $.Deferred()
            }, n.prototype.clearWaitDeferreds = function () {
                var e = x[this.id];
                e || (e = {}, x[this.id] = e);
                for (var t in e)if (e.hasOwnProperty(t)) {
                    var i = e[t];
                    i.active = !1, i.deferred = $.Deferred()
                }
            }, n.prototype.loadTiledPano = function () {
                var e = (new r.Vector3, []), t = [];
                return function (i, n, r, o, a, s) {
                    (null === o || void 0 === o) && (o = !0), (null === a || void 0 === a) && (a = !0);
                    var l = this.getWaitDeferred(i), h = l.deferred;
                    if (!this.isLoaded(i)) {
                        if (!l.active) {
                            if (l.active = !0, r) {
                                var c = A.matchingTilesInDirection(this, i, n, r);
                                e[this.id + ":" + i] = {
                                    tileCount: 0,
                                    targetTileCount: c
                                }, C.info("Loading partial pano: " + this.id + " with " + c + " tiles")
                            }
                            t[this.id] || (t[this.id] = !0, this.on(f.LoadComplete, function (e, t) {
                                var i = this.getWaitDeferred(e).deferred;
                                i && "pending" === i.state() && this.highestPartialTileRenderOpCompleted >= e && (i.resolve(e, t), this.resetWaitDeferred(e))
                            }.bind(this)), this.on(f.LoadFailed, function (e) {
                                var t = this.getWaitDeferred(e).deferred;
                                t && "pending" === t.state() && this.highestPartialTileRenderOpCompleted >= e && (t.reject(e), this.resetWaitDeferred(e))
                            }.bind(this)), this.on(f.TileLoaded, function (t, i, n) {
                                var r = this.getWaitDeferred(t).deferred;
                                if (r && "pending" === r.state()) {
                                    r.notify(t, i, n);
                                    var o = e[this.id + ":" + t];
                                    o && (o.tileCount++, o.tileCount === o.targetTileCount && (this.onPanoRendered(this.id, t, n, !0), r.resolve(t, n), this.resetWaitDeferred(t)))
                                }
                            }.bind(this)))
                        }
                        this.tileDownloader.forceQueueTilesForPano(this, i, n, r, s), this.tiledPanoRenderTarget = this.panoRenderer.activateTiledPano(this, this.qualityManager.getMaxPanoSize(), o, a), this.panoRenderer.renderPanoTiles(this, n)
                    }
                    return h.promise()
                }
            }(), n.prototype.onUploadAttemptedForAllTiles = function (e, t, i) {
                if (e === this.id) {
                    var n = this.qualityManager.getPanoSize(m.BASE);
                    t === n && this.shouldRedrawOnBaseLoaded && (this.shouldRedrawOnBaseLoaded = !1, this.panoRenderer.resetRenderStatus(e), this.panoRenderer.renderPanoTiles(this, null, !0))
                }
            }, n.prototype.onTileRendered = function (e, t, i, n) {
                e === this.id && this.emit(f.TileLoaded, t, i, n)
            }, n.prototype.onPanoRendered = function (e, t, i, n) {
                e === this.id && (this.minimumTiledPanoLoaded = !0, this.skybox = this.tiledPanoRenderTarget.texture, t > this.highestPartialTileRenderOpCompleted && (this.highestPartialTileRenderOpCompleted = t), !n && t > this.highestFullTileRenderOpCompleted && (this.highestFullTileRenderOpCompleted = t), this.emit("load", t), this.model.emit("load", this), this.emit(f.LoadComplete, t, i))
            }, n.prototype.onTileRenderFail = function (e, t, i) {
                e === this.id && this.emit(f.LoadFailed, t)
            }, n.prototype.isLoaded = function (e) {
                if (this.tiled) {
                    if (e && "string" == typeof e)throw new v("Wrong panoSize given to Panorama.isLoaded(); a tiled pano uses PanoSizeClass");
                    return this.minimumTiledPanoLoaded ? !e || this.highestPartialTileRenderOpCompleted >= e : !1
                }
                if (e && "number" == typeof e)throw new v("Wrong panoSize given to Panorama.isLoaded(); a non-tiled pano uses high/low.");
                return this.skybox.high ? !0 : e in this.skybox
            }, n.prototype.loadCube = function (e) {
                if (this.isLoaded(e))return C.info("Skipping load of pano, already loaded"), $.when();
                this.emit("loading", e), this.model.emit("loading", this);
                var t = p.getCubemapUrls(this.model.urls, this.id, e), i = t.filter(function (e) {
                    return !e
                });
                "low" === e && i.length > 0 && (C.info("Pano", this.id, "not available in low res, loading high res right away"), e = "high", t = p.getCubemapUrls(this.model.urls, this.id, e));
                var n = 0, r = [0, 1, 2, 3, 4, 5].map(function (e, i, n) {
                    return u.getImage(t[i])
                }.bind(this));
                return $.when(r[0], r[1], r[2], r[3], r[4], r[5]).then(function (t, i, n, r, o, a) {
                    return this.skybox[e] = [t, i, n, r, o, a], "high" !== e && this.skybox.high || (this.skybox.image = this.skybox[e], this.skybox.low = null), this.skybox.needsUpdate = !0, this.emit("load", e), this.model.emit("load", this), this
                }.bind(this), function () {
                    C.error("Downloading cubemap for pano", this.id, "failed"), this.failedLoadingAt = Date.now()
                }.bind(this), function () {
                    return $.when(++n, 6)
                })
            }, n.raycastsSkipped = 0, n.raycastsDone = 0, n.prototype.findNeighourPanos = function () {
                return this.model.panos.setNeighbour(this.id, this.id, !1), this.model.panos.forEach(function (e) {
                    if (e !== this && (!this.model.panos.neighbourMap[this.id] || void 0 === this.model.panos.neighbourMap[this.id][e.id])) {
                        var t = this.position.distanceTo(e.position);
                        if (t > a.panoramaNeighbourMaxDistance)return this.model.panos.setNeighbour(this, e, !1), void n.raycastsSkipped++;
                        var i = e.position.clone().sub(this.position).normalize(), o = new r.Raycaster(this.position, i.clone(), 0, t), s = o.intersectObjects(this.model.colliders);
                        n.raycastsDone++, this.model.panos.setNeighbour(this, e, 0 === s.length), a.showNeighbourRaycasts && (s.length ? this.floor.model.add(new r.ArrowHelper(i, this.position, s[0].distance, 16711680)) : this.floor.model.add(new r.ArrowHelper(i, this.position, t, 16777215, 0, 0)))
                    }
                }.bind(this)), this.model.panos.neighbourMap[this.id]
            }, n.prototype.worldPosition = function () {
                return this.position
            }, n.prototype.addTextSprite = function (e, t) {
                this.removeTextSprite();
                var i = document.createElement("canvas"), n = i.getContext("2d");
                i.width = 256, i.height = 256;
                var o = "Arial", a = 60;
                n.font = "bold " + a + "px " + o, n.fillStyle = "white";
                var s = n.measureText(e).width;
                n.fillText(e, (i.width - s) / 2, (i.height + a) / 2);
                var l = new r.Texture(i);
                l.needsUpdate = !0;
                var h = new r.SpriteMaterial({map: l, color: t || 16428055});
                this.text3d = new r.Sprite(h), this.text3d.position.copy(this.skyboxMesh.position), this.floor.add(this.text3d)
            }, n.prototype.removeTextSprite = function () {
                this.text3d && (this.floor.remove(this.text3d), this.text3d = null)
            }, n.prototype.isAligned = function () {
                return this.alignmentType === l.ALIGNED
            }, n.filters = {
                inDirection: function (e, t, i) {
                    return function (n) {
                        var r = n.position.clone().sub(e).normalize();
                        return r.dot(t) > i
                    }
                }, inFloorDirection: function (e, t, i) {
                    return function (n) {
                        var r = n.floorPosition.clone().sub(e).normalize();
                        return r.dot(t) > i
                    }
                }, inPanoDirection: function (e, t, i) {
                    return i = a.navigation.panoScores ? a.navigation.filterStrictness : i, function (n) {
                        var r = n.floorPosition.clone().sub(e).normalize(), o = n.position.clone().sub(e).normalize();
                        return r.dot(t) > i || o.dot(t) > i
                    }
                }, atFloor: function (e) {
                    return function (t) {
                        return e ? t.floor === e : !0
                    }
                }, not: function (e) {
                    return function (t) {
                        return t != e
                    }
                }, notIn: function (e) {
                    return function (t) {
                        return -1 === e.indexOf(t)
                    }
                }, isLoaded: function () {
                    return function (e) {
                        return e.isLoaded()
                    }
                }, isNotLoaded: function () {
                    return function (e) {
                        return !e.isLoaded()
                    }
                }, isCloseEnoughTo: function (e, t) {
                    return function (i) {
                        return e.distanceTo(i.floorPosition) < t
                    }
                }, hasMinimumHeightDifferenceTo: function (e, t) {
                    return function (i) {
                        return Math.abs(i.position.y - e.y) > t
                    }
                }, isNotBehindNormal: function (e, t) {
                    var i = new r.Vector3;
                    return t = t.clone(), function (n) {
                        var r = i.copy(n.position).sub(e).normalize();
                        return r.dot(t) > 0
                    }
                }, isNeighbourPanoTo: function (e) {
                    return function (t) {
                        return e && e.neighbourPanos ? !!e.neighbourPanos[t.id] : !0
                    }
                }, isNeighbourOfNeighbourTo: function (e) {
                    return function (t) {
                        return e.neighbourPanos[t.id] ? !0 : e.neighbourUUIDs.some(function (i) {
                            var n = e.model.panos.get(i);
                            return n ? n.neighbourPanos[t.id] : !1
                        })
                    }
                }, isNotRecentlyFailed: function (e) {
                    return function (t) {
                        return Date.now() - t.failedLoadingAt > e
                    }
                }, isOnVisibleFloor: function () {
                    return function (e) {
                        return !e.floor.hidden
                    }
                }, isPanoAligned: function () {
                    return function (e) {
                        return e.isAligned()
                    }
                }
            }, n.sortFunctions = {
                distanceToPoint: function (e) {
                    return function (t, i) {
                        return t.position.distanceTo(e) - i.position.distanceTo(e)
                    }
                }, floorDistanceToPoint: function (e) {
                    return function (t, i) {
                        return t.floorPosition.distanceTo(e) - i.floorPosition.distanceTo(e)
                    }
                }, choose: function (e) {
                    return function (t, i) {
                        return e.id === t.id ? -1 : e.id === i.id ? 1 : 0
                    }
                }
            }, n.scoreFunctions = {
                distance: function (e, t) {
                    return t = t || a.navigation.distanceFactor, function (i) {
                        return e ? e.position.distanceTo(i.position) * t : 0
                    }
                }, distanceSquared: function (e, t) {
                    return t = t || a.navigation.distanceFactor, function (i) {
                        return e ? e.position.distanceToSquared(i.position) * t : 0
                    }
                }, direction: function (e, t) {
                    return function (i) {
                        var n = i.position.clone().sub(e).normalize();
                        return n.dot(t) * a.navigation.directionFactor
                    }
                }, angle: function (e, t) {
                    return function (i) {
                        var n = i.position.clone().sub(e).normalize();
                        return n.angleTo(t) * a.navigation.angleFactor
                    }
                }, inFieldOfView: function (e, t) {
                    return function (i) {
                        var n = i.position.clone().sub(e).normalize();
                        return n.dot(t) > .75 ? 10 : -1
                    }
                }, optionality: function (e) {
                    return function (t) {
                        var i = t.neighbourUUIDs.filter(function (t) {
                            return t in e.neighbourUUIDs ? !1 : t !== e.id
                        });
                        return i.length * a.navigation.optionalityFactor
                    }
                }, penalizeHeightDifferenceUnder: function (e, t) {
                    return function (i) {
                        return e.y - i.position.y < t ? -20 : 0
                    }
                }
            }, t.exports = n
        }).call(this, "/js/objects/Panorama.js")
    }, {
        "../enum/AlignmentType": 15,
        "../enum/GLCubeFaces": 21,
        "../enum/PanoRendererEvents": 27,
        "../enum/PanoSizeClass": 28,
        "../enum/PanoramaEvents": 29,
        "../enum/RenderOrder": 33,
        "../enum/TileDownloaderEvents": 36,
        "../enum/Viewmode": 42,
        "../exception/BasicException": 44,
        "../scene/SceneRenderer": 122,
        "../settings": 123,
        "../tile/TileUtils": 132,
        "../util/ajax": 138,
        "../util/common": 142,
        "../util/lerp": 145,
        "../util/logger": 146,
        "../util/panorama": 148,
        "../util/texture": 151,
        "../util/transitions": 152,
        events: 160,
        three: 175
    }],
    112: [function (e, t, i) {
        "use strict";
        function n(e) {
            var t = r.UniformsUtils.clone(h.waypoint.uniforms);
            t.map.value = u, t.opacity.value = 0, t.color.value.set(o.reticuleColor), r.Mesh.call(this, new r.PlaneBufferGeometry(.4, .4, 1, 1), new r.RawShaderMaterial({
                side: r.DoubleSide,
                depthWrite: !1,
                depthTest: !1,
                transparent: !0,
                vertexShader: h.waypoint.vertexShader,
                fragmentShader: h.waypoint.fragmentShader,
                uniforms: t,
                name: "waypoint",
                opacity: 0
            })), this.renderOrder = c.reticule, this.player = e, this.direction = new r.Vector3, this.hidden = !0, this.mouseLastMoveTime = Date.now()
        }

        var r = e("three"), o = e("../settings"), a = e("../util/transitions"), s = e("../util/texture"), l = e("../util/lerp"), h = e("../shaders"), c = e("../enum/RenderOrder"), u = s.loadBase64("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");
        n.prototype = Object.create(r.Mesh.prototype), n.prototype.move = function (e, t, i) {
            this.hidden = i, this.mouseLastMoveTime = Date.now()
        }, n.prototype.hide = function () {
            this.hidden || (this.hidden = !0, a.start(l.property(this.material.uniforms.opacity, "value", 0), o.reticuleOpacityTransitionTime))
        }, n.prototype.show = function () {
            this.hidden = !1, this.material.opacity <= 0 && a.start(l.property(this.material.uniforms.opacity, "value", o[this.player.mode].reticuleOpacity), o.reticuleOpacityTransitionTime)
        }, n.prototype.update = function () {
            Date.now() - this.mouseLastMoveTime > o.hideReticuleTimeout && !this.hidden && this.hide()
        }, n.prototype.updatePosition = function (e, t) {
            if (!this.hidden) {
                if (!t)return this.hide();
                var i = t.point, n = e.distanceTo(i), r = 1 + .01 * n;
                1 > n && (r -= 1 - n), this.show(), this.scale.set(r, r, r), this.direction = this.direction.multiplyScalar(.8), this.direction.add(t.face.normal.clone().multiplyScalar(.2)), this.position.copy(i).add(t.face.normal.clone().multiplyScalar(.01)), this.lookAt(this.position.clone().add(this.direction))
            }
        }, n.prototype.writeAsMattertag = function () {
            var e = Math.floor(4294967296 * (1 + Math.random())).toString(16) + Math.floor(16 * (1 + Math.random())).toString(16), t = new Date;
            this.tagCount = "undefined" == typeof this.tagCount ? 1 : this.tagCount + 1;
            var i = {
                enabled: !0,
                version: "0",
                created: t.toISOString(),
                created_by: "APITest",
                position: this.position.clone(),
                stem: {
                    enabled: o.mattertags.pole.enabled,
                    direction: this.direction.multiplyScalar(o.mattertags.pole.height)
                },
                label: "Mattertag " + this.tagCount,
                description: "Description " + e,
                floor: function (e) {
                    if (e.currentFloor) {
                        var t = e.floors.indexOf(e.currentFloor);
                        return t > -1 ? t : void 0
                    }
                }(this.player.model),
                type: "info",
                metadata: {preferred_camera: {mode: this.player.mode}}
            };
            console.log("--------------------------"), console.log(JSON.stringify(i));
            var n = this.player.model.addMattertag(e, i).build();
            n && (n.disc && this.player.mattertagDiscs.push(n.disc), n.visible || n.show(o.mattertags.startup.fadeInDuration))
        }, t.exports = n
    }, {
        "../enum/RenderOrder": 33,
        "../settings": 123,
        "../shaders": 124,
        "../util/lerp": 145,
        "../util/texture": 151,
        "../util/transitions": 152,
        three: 175
    }],
    113: [function (e, t, i) {
        "use strict";
        function n(e, t) {
            this.chunks = [], this.floorId = e, this.roomId = t, this.position = new r.Vector3
        }

        var r = e("three");
        n.prototype.addChunk = function (e) {
            this.chunks.push(e)
        }, n.prototype.calcBoundaries = function () {
            for (var e = new r.Vector3, t = new r.Vector3(0, 0, 0), i = new r.Vector3(0, 0, 0), n = new r.Vector3(0, 0, 0), o = 0, a = 0; a < this.chunks.length; a++) {
                var s = this.chunks[a], l = s.geometry.attributes.position;
                if (l)for (var h = 0; h < l.array.length; h += 3)e.set(l.array[h], l.array[h + 1], l.array[h + 2]), t.add(e), 0 === h ? (i.copy(e), n.copy(e)) : (i.max(e), n.min(e)), o++
            }
            o > 0 ? (t.multiplyScalar(1 / o), this.average = t) : this.average = null, this.boundsMax = i, this.boundsMin = n, this.center = new r.Vector3, this.center.copy(i).sub(n).multiplyScalar(.5).add(n)
        }, t.exports = n
    }, {three: 175}],
    114: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t, i) {
                this.obj3d = null, this.nodes = [], this.colorHull = [], this.shortPaths = {}, this.floorHull = null, this.cameraHull = null, this.floorPathDistance = 0, this.floorCurvePoints = null, this.floorCurveColors = null, this.camCurvePoints = null, this.warpDestHeroLoc = null, this.warpDestPano = null, this.warpPathPoints = null, this.warpPathLengths = [0], this.warpLength = 0, this.closeWarpDistance = 4, this.UP = A.UP.clone(), this.longestStep = 0, this.upcomingTransType = null, this.burnsDir = 1, this.prevNextDist = 0, this.nextI = 0, this.activeTransType = null, this.bunnyObj = null, this.director = e, this.player = t, this.modelManager = i, this.updateModel(), this.updateDefaultsFromModelData(), this.bindEvents(), this.warping = !1, this.warpInterrupted = !1, this.warpInterruptionBlackoutStyle = null, this.warpInterruptionTravelTime = null
            }

            var r = e("three"), o = e("../util/logger"), a = e("../enum/Viewmode"), s = e("../enum/RenderOrder"), l = e("../enum/WarpStyle"), h = e("../settings"), c = e("../util/math"), u = e("../util/lerp"), d = e("../util/easing"), p = e("../util/transitions"), f = e("../objects/Snapshot"), g = e("../effects"), m = e("../shaders"), v = (e("../gui/gui"), e("../util/texture")), A = e("../enum/Vectors"), y = (e("../model/ModelManager"), new o(i)), C = e("../enum/PlayerEvents"), I = e("../enum/BlackoutStyle"), b = e("../enum/ModelManagerEvents"), w = {
                path: v.loadBase64("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3tYC0FIA6N0AFPXxzvx310cmW/9/4/FeDQAAbgC1/gAJhQBR7QC72gEsCse7dQwAxPsD6uKiev4eeYaL87gXVQaA/zQ29s4QgNgG8E02Nja6c2zs2z4A7D5Ae+54VwcAIGgClFnpWusMd8e8L/z3zvwPWFMLsyHkoksAAD+UaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzA2NyA3OS4xNTc3NDcsIDIwMTUvMDMvMzAtMjM6NDA6NDIgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoTWFjaW50b3NoKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxNS0wNy0yMVQxODoyMDo1My0wNzowMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMTUtMDctMjFUMTg6MjE6MzgtMDc6MDA8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE1LTA3LTIxVDE4OjIxOjM4LTA3OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDoyYWI5MzcwNS0xYjZjLTQ1ZGMtYTQyNy1jYWQzOGNiZTUxYjM8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYjc1NjFhOC03MDlhLTExNzgtOTQ1Zi1kNDlkZmJlYjBjMWE8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDpjZjg0YWIzMi1lNTA2LTRkYzUtOGUxZC01MjgxMjhhN2NlOWM8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6Y2Y4NGFiMzItZTUwNi00ZGM1LThlMWQtNTI4MTI4YTdjZTljPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE1LTA3LTIxVDE4OjIwOjUzLTA3OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6MWIzNzcxZGMtZGU3Ni00YTQ4LTkzNjEtMGQ4NzdkOWY0ODkwPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE1LTA3LTIxVDE4OjIxOjM4LTA3OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNvbnZlcnRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5mcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nPC9zdEV2dDpwYXJhbWV0ZXJzPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+ZGVyaXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5jb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6MmFiOTM3MDUtMWI2Yy00NWRjLWE0MjctY2FkMzhjYmU1MWIzPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE1LTA3LTIxVDE4OjIxOjM4LTA3OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjFiMzc3MWRjLWRlNzYtNGE0OC05MzYxLTBkODc3ZDlmNDg5MDwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpjZjg0YWIzMi1lNTA2LTRkYzUtOGUxZC01MjgxMjhhN2NlOWM8L3N0UmVmOmRvY3VtZW50SUQ+CiAgICAgICAgICAgIDxzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDpjZjg0YWIzMi1lNTA2LTRkYzUtOGUxZC01MjgxMjhhN2NlOWM8L3N0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHBob3Rvc2hvcDpJQ0NQcm9maWxlPkRpc3BsYXk8L3Bob3Rvc2hvcDpJQ0NQcm9maWxlPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MTI4PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjMyPC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz6SKsKfAAAAIGNIUk0AAG11AABzoAAA/N0AAINkAABw6AAA7GgAADA+AAAQkOTsmeoAAAOCSURBVHja7FtRi9ZADJxETzkQRf3/P9FTREQ9bXwpUvYyk+x3PiawtPS6/UozmUyyexYROO0OwItzOICX57g7j68u4/U57pfzewDvAXxcjh8AvAPwFsCb83ljuf0G8A3A13N8AvAZwMN5/gDgC4DvAH4s4+d5fATw6xyPAP5cjtfx6JcfjuRl7Lxu5GXjcp8lc7Nnx/hY2rGcW/JNlU+c+Mmyb+/EYdlEBpDKjABkjH8vFWxVAAW5toIgGFquL2FLlDNErUyRzTnGt20LcW7NAFTs/G+uF2hhP+KCKa7zjuQ5wwR7LGDi75mTbbkWimFcUHYkkRwLSNRLZekjRgO0GSAKBr4y7yGeIwOuKwI7uSrIvLhBNwwD8MCCCFBbwGCVCPeGas9yfZYmgoDGyH1jmgGy75h9a1tYg6Vny0Dhzei2BTSWRPmKNicIHOs5nwWlCjQIFo+MNZQIZKVHCJa4vtQxOf9Z9B8b6ZcBKEQpHkwDmEgHVb8gA5VNBXAzC1jBBkyrHYSln1Rj3mwmdOlGiZVhg9t6AJ0G3CHmKuBQAFTlBFP4saA3EqEyVqcAE9VUFdVW9A7QqQKqvn6QFzVRekxLuA+AaDR/lJ+iUVmEEoHsWizAMdK06LDHWG4H8kWfTipQ5XkKHm+gMaOnIDUmGtXD2F4TKDYYuttClhrARPSuVBJCcIAgeVLAfi+ARXrcEHBWlYEg9T2aFAQiTGJRrGO6CjiEAOyIvRDs0C4DoxB1IdgkCmCM5eaLg00wg9Jrnvgy1kDsVgHMwUaYIjufdYB9HRBLjW8bDBJFKvEqBWTNhm6f2gn9T/T3HFh1ZdVyPBORqU7zotbPqAmiCcQ0wUT/bTqAAcFEeraiX1NWAQwMCkms73y93wcEWzoA4Ov+rETMloplC943Kagj8kB+eNLAXjMoim+WNdiOokfwBAzVaiCr7x29JUlLxOCwQC0A15EtrWe7fzos29IAlbiIhgaYrWDPF4HVPUpzKT+VKSCj8o6g6+wDHCDsCUGgXvQxUSGorfo0BWRUrh6OQm3OruD9FACiqyqwOPQ+AroaaM2HZ6jKjtYUk2M5vXvh8Crdtpp83U2h1b8lOZ5uCwv09reN1WW4LeLbGvpKtfFlCsjyjxGVupYfFVCGBfZKwayFfv3G3mQUxhyt/QBRqFRD/m9hPj78byxggnUrMW7Kn38HAONAllI0EmS1AAAAAElFTkSuQmCC"),
                pathEnd: v.loadBase64("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"),
                pathStart: v.loadBase64("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")
            };
            n.prototype.setScene = function (e) {
                this.createCpm(e), this.createBunnyObj(e)
            }, n.prototype.updateModel = function () {
                this.model = this.modelManager.getActiveModel()
            }, n.prototype.bindEvents = function () {
                this.modelManager.on(b.ActiveModelChanged, this.updateModel.bind(this))
            }, n.prototype.updateDefaultsFromModelData = function () {
                this.model.data
            }, n.prototype.pointPathDistance = function (e) {
                for (var t = 0, i = 1; i < e.length; i += 1)t += e[i - 1].distanceTo(e[i]);
                return t
            }, n.prototype.pointPathLengths = function (e) {
                for (var t = [0], i = 1; i < e.length; i += 1)t.push(t[i - 1] + e[i - 1].distanceTo(e[i]));
                return t
            }, n.prototype.interpAlongPath = function (e, t, i) {
                var n, o = new r.Vector3, a = t[t.length - 1];
                if (1 > i) {
                    n = i * a;
                    for (var s = 1; s < t.length; s += 1)if (t[s] > n) {
                        var l = (n - t[s - 1]) / (t[s] - t[s - 1]);
                        return o.copy(e[s]), o.sub(e[s - 1]), o.multiplyScalar(l), o.add(e[s - 1]), o
                    }
                } else o.copy(e[e.length - 1]);
                return o
            }, n.prototype.pathHeight = function () {
                return this.player.mode !== a.FLOORPLAN ? h.path.height : h.path.outsideHeight
            }, n.prototype.createBunnyObj = function (e) {
                this.bunnyObj || (this.bunnyObj = new r.AxisHelper(.1), this.bunnyObj.visible = h.warp.showBunny), this.bunnyObj.parent && this.bunnyObj.parent.remove(bunnyObj), e.add(this.bunnyObj)
            }, n.prototype.createCpm = function (e) {
                if (!this.currentPanoMarker) {
                    var t = this.makeWaypointObj(w.pathEnd, "Current");
                    t.material.uniforms.opacity.value = 0, this.currentPanoMarker = {mesh: t, placed: !1}
                }
                this.currentPanoMarker.mesh.parent && this.currentPanoMarker.mesh.parent.remove(this.currentPanoMarker.mesh), this.placeCpm(), this.currentPanoMarker.mesh.parent || e.add(this.currentPanoMarker.mesh)
            }, n.prototype.placeCpm = function () {
                h.path.mapGuides && this.player.currentPano && this.player.currentPano.isAligned() ? (this.currentPanoMarker.mesh.parent != this.player.currentPano.floor && (this.currentPanoMarker.mesh.parent && this.currentPanoMarker.mesh.parent.remove(this.currentPanoMarker.mesh), this.player.currentPano.floor.add(this.currentPanoMarker.mesh)), this.currentPanoMarker.mesh.position.copy(this.player.currentPano.floorPosition).sub(this.model.position), this.currentPanoMarker.mesh.position.y += this.pathHeight(), this.currentPanoMarker.placed = !0) : this.popOutCpm()
            }, n.prototype.fadeInCpm = function (e) {
                h.path.mapGuides && this.currentPanoMarker.placed && p.start(u.property(this.currentPanoMarker.mesh.material.uniforms.opacity, "value", 1), e)
            }, n.prototype.fadeOutCpm = function (e) {
                p.start(u.property(this.currentPanoMarker.mesh.material.uniforms.opacity, "value", 0), e)
            }, n.prototype.popInCpm = function () {
                h.path.mapGuides && this.currentPanoMarker.placed && this.fadeInCpm(2)
            }, n.prototype.popOutCpm = function () {
                this.fadeOutCpm(2)
            }, n.prototype.brushPrefs = {
                linewidth: 7,
                strokeWidth: 15,
                cvSegments: 48,
                paveStep: .1,
                paveWidth: .2,
                lookBlendDist: 3,
                maxTurn: r.Math.degToRad(2)
            }, n.prototype.panoPathDistance = function (e) {
                var t = this.model.panos;
                if (!e || e.length < 2)return 0;
                for (var i = [], n = 0; n < e.length; n += 1)i.push(t.get(e[n]).floorPosition);
                return this.pointPathDistance(i)
            }, n.prototype.loadTileTexture = function (e) {
                var t = v.load(e, function (t) {
                    t.wrapS = r.RepeatWrapping, t.wrapT = r.RepeatWrapping, t.needsUpdate = !0, y.debug('path texture "' + e + '" is ready')
                }, function () {
                    y.error('path texture "' + e + '" failed')
                });
                return t.mapping = r.UVMapping, t
            }, n.prototype.buildWarpDestinationDescriptor = function (e, t, i, n, r, o) {
                var a = {
                    cameraMode: n,
                    position: e,
                    quaternion: t,
                    panoId: i,
                    orthoZoom: o,
                    floorVisibility: r,
                    thumbUrl: null,
                    name: null,
                    isHero: !1
                };
                return new f(a)
            }, n.prototype.buildWarpDestinationDescriptorFromHero = function (e) {
                return this.buildWarpDestinationDescriptor(e.position, e.quaternion, this.getHeroId(e), e.cameraMode, e.floorVisibility, e.orthoZoom)
            }, n.prototype.setWarpDestination = function (e) {
                this.warpDestHeroLoc = e
            }, n.prototype.setWarpDestinationByHeroIndex = function (e) {
                var t = this.getHeroDescriptorByHeroIndex(e);
                return null === t ? !1 : (this.setWarpDestination(t), !0)
            }, n.prototype.setWarpDestinationByPano = function (e, t) {
                var i = this.model.panos.get(e.id);
                return i ? this.setWarpDestinationByPanoId(e.id, t) : !1
            }, n.prototype.setWarpDestinationByPanoId = function (e, t) {
                var i = this.model.panos.get(e);
                if (i) {
                    t = t || new r.Quaternion;
                    var n = this.buildWarpDestinationDescriptor(i.position, t, i.id, "panorama", [], -1);
                    return this.setWarpDestination(n), !0
                }
                return !1
            }, n.prototype.getHeroDescriptorByHeroIndex = function (e) {
                var t = this.model.heroCount();
                if (null !== this.warpDestHeroLoc && 2 > t)return y.info("ShowPath.getHeroDescriptorByHeroIndex() -> Only one hero location is available."), this.model.getHeroDescriptorByIndex(0);
                var i = this.model.getHeroDescriptorByIndex(e);
                if (i) {
                    var n = i.isPano() ? i.panoId : i.cameraMode;
                    y.debug('ShowPath.getHeroDescriptorByHeroIndex() -> New brush/warp destination: "' + n + '" out of ' + t + " choices.")
                }
                return i
            }, n.prototype.getHeroDescriptorByPano = function (e) {
                var t = this.model.panos.get(e.id);
                return t ? this.getHeroDescriptorByPanoId(e.id) : null
            }, n.prototype.getHeroDescriptorByPanoId = function (e) {
                var t = this.getHeroIndexFromPanoId(e);
                return this.getHeroDescriptorByHeroIndex(t)
            }, n.prototype.getHeroIndexFromPanoId = function (e) {
                for (var t = 0; t < this.model.heroLocations.length; t++) {
                    var i = this.model.heroLocations[t], n = this.getHeroId(i);
                    if (n && n === e)return t
                }
                return -1
            }, n.prototype.getHeroPano = function (e) {
                if (null === e)return y.warn("getHeroPano(): no destination"), null;
                var t = this.getHeroId(e), i = this.model.panos.get(t);
                return void 0 === i && (i = null, "" !== t && y.debug('unable to find pano "' + t + '"')), i
            }, n.prototype.getHeroId = function (e) {
                return e.panoId
            }, n.prototype.setWarpDestPano = function () {
                return this.warpDestPano = this.getHeroPano(this.warpDestHeroLoc), this.warpDestPano
            }, n.prototype.brushToWarpPano = function (e, t) {
                if (this.discardPathObject(), !this.setWarpDestPano())return !1;
                if (this.warpDestHeroLoc.cameraMode !== a.PANORAMA && y.warn("Can only brush from pano to pano"), !this.warpDestPano)return y.info("No brush"), !1;
                if (!this.player.currentPano)return y.debug("No current pano, visibility undefined"), !1;
                if (!this.warpDestPano)return y.info("No wPano, visibility undefined"), !1;
                if (!this.warpDestPano.isAligned())return y.debug("Cannot brush to unaligned pano"), !1;
                var i = (e === l.STD || e === l.WALK) && h.path.mapGuides, n = !0;
                if (this.player.currentPano.id === this.warpDestPano.id)y.debug("Already at destination pano"); else {
                    this.nodes = this.findShortestPath(this.player.currentPano, this.warpDestPano), n = void 0 === this.nodes || null === this.nodes || this.nodes.length < 1, this.obj3d = new r.Object3D, y.debug('Brushing from "' + this.player.currentPano.id + '" to "' + this.warpDestPano.id + '" (' + (this.nodes ? this.nodes.length : 0) + ")"), n ? (y.info('No "walkable" route, using fall-back warp style transition'), e = t) : (this.setPathHulls(this.nodes), this.setFloorCurves(), i && ("chevron" === h.path.style ? this.obj3d.add(this.drawPathPavement(this.floorCurvePoints)) : "ribbon" === h.path.style && this.obj3d.add(this.drawPathRibbon(this.floorCurvePoints, this.floorCurveColors)))), this.player.currentPano.floor.add(this.obj3d);
                    var o = this.player.mode === a.DOLLHOUSE || this.player.mode === a.FLOORPLAN, s = e === l.STD;
                    if (i || s) {
                        if (o) {
                            var c = this.makeStartMarker(this.floorHull[0], this.floorCurvePoints);
                            this.obj3d.add(c)
                        }
                        if (!n) {
                            var u = this.makeEndMarker(this.floorHull[this.floorHull.length - 1]);
                            this.obj3d.add(u)
                        }
                    }
                    this.appearSlow()
                }
                return this.upcomingTransType = e, !n
            }, n.prototype.findShortestPath = function (e, t) {
                if (!e || !t)return null;
                var i = h.warp.walkExtraPanosDistance, n = e.id + ":" + t.id + ":" + i;
                if (this.shortPaths.hasOwnProperty(n))return this.shortPaths[n] ? this.shortPaths[n].slice() : null;
                var r = t.id + ":" + e.id + ":" + i;
                if (this.shortPaths.hasOwnProperty(r))return this.shortPaths[r] ? this.shortPaths[r].slice().reverse() : null;
                var o = this.model.panos.aStarSearch(e, t);
                return this.model.panos.includeNodesNearPath(o, i), this.shortPaths[n] = o ? o.slice() : null, o
            }, n.prototype.makePathHulls = function (e) {
                var t, i, n, r, o, a = 0, s = [], l = [], c = [], u = this.model.panos;
                t = u.get(e[0]), r = t.floor.floorIndex;
                for (var d = 0; d < e.length; d += 1)t = u.get(e[d]), i = t.floorPosition.clone().sub(this.model.position), i.y += this.pathHeight(), s.push(i), l.push(t.position.clone()), n = t.floor.floorIndex, c.push(n > r ? h.path.colorUp : r > n ? h.path.colorDown : h.path.color), d > 0 && (o = l[d].distanceTo(l[d - 1]), o > a && (a = o));
                return a > this.longestStep && (this.longestStep = a, y.debug("path contains " + a + " meter segment")), {
                    floor: s,
                    camera: l,
                    color: c
                }
            }, n.prototype.makeFloorCurves = function (e, t, i) {
                var n = this.player.mode === a.PANORAMA ? h.path.waypointIndoorRadius : h.path.waypointRadius, o = this.pointPathDistance(e) - 2 * n, s = e.slice(0), l = s[1].clone().sub(s[0]);
                l.y = 0, l.normalize().multiplyScalar(n), s[0] = (new r.Vector3).copy(s[0]).add(l), l = s[s.length - 2].clone().sub(s[s.length - 1]), l.y = 0, l.normalize().multiplyScalar(n), s[s.length - 1] = (new r.Vector3).copy(s[s.length - 1]).add(l);
                var c = new r.CatmullRomCurve3(s), u = Math.floor(o / i);
                u = 4 * Math.floor(u / 4), u = Math.max(4, u);
                for (var d, p, f, g = c.getSpacedPoints(u), m = [], v = new r.Vector3, A = 0; A < g.length; A += 1) {
                    f = 0, d = g[A].distanceTo(e[0]);
                    for (var y = 1; y < e.length; y += 1)v.copy(g[A]).sub(e[y]), v.y *= 4, p = v.length(), d > p && (f = y);
                    m.push(t[f])
                }
                return {distance: o, points: g, colors: m}
            }, n.prototype.makeCameraCurvePoints = function (e, t) {
                var i = this.pointPathDistance(e), n = new r.CatmullRomCurve3(e);
                return n.getSpacedPoints(Math.max(2, Math.floor(i / t)))
            }, n.prototype.makeCameraCurveTangents = function (e, t) {
                var i = this.pointPathDistance(e), n = new r.CatmullRomCurve3(e), o = Math.max(2, Math.floor(i / t));
                o || (o = 5);
                for (var a = [], s = 0; o >= s; s++)a.push(n.getTangentAt(s / o));
                return a
            }, n.prototype.setPathHulls = function (e) {
                var t = this.makePathHulls(e);
                this.floorHull = t.floor, this.cameraHull = t.camera, this.colorHull = t.color
            }, n.prototype.setFloorCurves = function () {
                var e = this.makeFloorCurves(this.floorHull, this.colorHull, this.brushPrefs.paveStep);
                this.floorPathDistance = e.distance, this.floorCurvePoints = e.points, this.floorCurveColors = e.colors
            }, n.prototype.setCameraCurvePoints = function () {
                this.camCurvePoints = this.makeCameraCurvePoints(this.cameraHull, h.warp.stepFactor * this.brushPrefs.paveStep)
            }, n.prototype.chooseWarpPath = function (e) {
                var t, i, n, o = this.player.cameras[a.PANORAMA];
                if (this.player.currentPano === this.warpDestPano || !e)return this.warpPathPoints = null, this.warpLength = 0, !1;
                this.nodes = this.findShortestPath(this.player.currentPano, this.warpDestPano), void 0 === this.nodes || null === this.nodes || this.nodes.length < 1 ? (y.debug("warp path to unreachable node"), t = this.warpDestPano.position.clone().sub(o.position), i = t.clone().negate(), t.multiplyScalar(.15).add(o.position), i.multiplyScalar(.15).add(this.warpDestPano.position), t.y = o.position.y, i.y = this.warpDestPano.position.y, n = new r.CubicBezierCurve3(o.position.clone(), t, i, this.warpDestPano.position.clone()), this.warpPathPoints = n.getSpacedPoints(this.brushPrefs.cvSegments)) : (y.debug("follow warp path (path distance was " + this.nodes.length + " nodes, " + this.floorPathDistance + ")"), this.setCameraCurvePoints(), this.warpPathPoints = this.camCurvePoints.slice(0)), this.warpLength = 0, this.warpPathLengths = [0];
                for (var s = new r.Vector3, l = new r.Vector3, c = Math.cos(r.Math.degToRad(h.warp.minBrakeAngle)), u = Math.cos(r.Math.degToRad(h.warp.maxBrakeAngle)), d = 1; d < this.warpPathPoints.length; d += 1) {
                    s.copy(this.warpPathPoints[d - 1]).sub(this.warpPathPoints[d]);
                    var p = s.length();
                    s.y *= h.warp.climbEffort;
                    var f = s.length() / p;
                    if (d > 1) {
                        s.setY(0).normalize(), l.copy(this.warpPathPoints[d - 2]).sub(this.warpPathPoints[d - 1]).setY(0).normalize();
                        var g = Math.min(1, s.dot(l)), m = 1 + (h.warp.brakeStrength - 1) * (1 - r.Math.smoothstep(g, u, c));
                        f = Math.max(m, f)
                    }
                    this.warpLength += p * f, this.warpPathLengths[d] = this.warpLength
                }
                return !0
            }, n.prototype.drawPathRibbon = function (e, t) {
                this.bunnyObj.visible = h.warp.showBunny;
                for (var i = .6 * h.path.ribbonWidth * .5, n = new r.Vector3, o = new r.Vector3(0, this.pathHeight(), 0), l = new r.Geometry, c = new r.Vector3, u = 0; u < e.length; u += 1) {
                    c.copy(e[u]), 0 === u ? c.sub(e[u + 1]) : c.sub(e[u - 1]).negate(), c.normalize(), n.crossVectors(c, A.UP), n.multiplyScalar(i);
                    var d = (new r.Vector3).copy(e[u]).add(o);
                    d.sub(n), l.vertices.push(d), d = (new r.Vector3).copy(e[u]).add(o), d.add(n), l.vertices.push(d)
                }
                var p, f = 0;
                for (u = 0; u < e.length - 1; u += 1) {
                    var g = 2 * u, v = f;
                    f += e[u + 1].distanceTo(e[u]);
                    var y = f, C = t[u], I = t[u + 1];
                    p = new r.Face3(g, g + 1, g + 2), p.vertexColors = [new r.Color(C), new r.Color(C), new r.Color(I)], l.faces.push(p), l.faceVertexUvs[0].push([new r.Vector2(0, v), new r.Vector2(1, v), new r.Vector2(0, y)]), p = new r.Face3(g + 2, g + 1, g + 3), p.vertexColors = [new r.Color(I), new r.Color(C), new r.Color(I)], l.faces.push(p), l.faceVertexUvs[0].push([new r.Vector2(0, y), new r.Vector2(1, v), new r.Vector2(1, y)])
                }
                l.computeFaceNormals(), l.computeVertexNormals();
                var b, x;
                this.player.mode === a.PANORAMA ? (x = r.UniformsUtils.clone(m.ribbon.uniforms), x.map.value = w.path, x.opacity.value = 0, x.color.value.set(h.path.color), b = new r.RawShaderMaterial({
                    side: r.DoubleSide,
                    depthWrite: !1,
                    transparent: !0,
                    vertexShader: m.ribbon.vertexShader,
                    fragmentShader: m.ribbon.fragmentShader,
                    uniforms: x,
                    name: "ribbonT",
                    opacity: 0
                })) : b = new r.MeshBasicMaterial({
                    color: 16777215,
                    side: r.DoubleSide,
                    name: "ribbonOut",
                    vertexColors: r.VertexColors
                });
                var E = new r.Mesh(l, b);
                return E.name = "ribbon", this.player.mode === a.PANORAMA && (E.renderOrder = s.ribbon), E
            }, n.prototype.drawPathPavement = function (e) {
                for (var t, i = .25, n = new r.Vector3, o = new r.Geometry, s = new r.Vector3, l = 0; l < e.length; l += 1)s.copy(e[l]), 0 === l ? s.sub(e[l + 1]).negate() : s.sub(e[l - 1]), s.normalize(), n.crossVectors(s, A.UP), n.multiplyScalar(this.brushPrefs.paveWidth), t = (new r.Vector3).copy(e[l]), t.sub(n), o.vertices.push(t), o.vertices.push((new r.Vector3).copy(e[l])), t = (new r.Vector3).copy(e[l]), t.add(n), o.vertices.push(t);
                var c, u, d;
                for (l = 0; l < e.length - 1; l += 1)c = 3 * l + 1, u = l * i, d = u + i, o.faces.push(new r.Face3(c - 1, c, c + 3)), o.faceVertexUvs[0].push([new r.Vector2(0, u), new r.Vector2(.5, u), new r.Vector2(.5, d)]), o.faces.push(new r.Face3(c + 3, c + 2, c - 1)), o.faceVertexUvs[0].push([new r.Vector2(.5, d), new r.Vector2(0, d), new r.Vector2(0, u)]), o.faces.push(new r.Face3(c + 3, c, c + 1)), o.faceVertexUvs[0].push([new r.Vector2(.5, d), new r.Vector2(.5, u), new r.Vector2(1, u)]), o.faces.push(new r.Face3(c + 3, c + 1, c + 4)), o.faceVertexUvs[0].push([new r.Vector2(.5, d), new r.Vector2(1, u), new r.Vector2(1, d)]);
                var p = this.player.mode === a.PANORAMA ? new r.MeshBasicMaterial({
                    color: h.path.color,
                    side: r.DoubleSide,
                    transparent: !0,
                    depthWrite: !1,
                    opacity: 0,
                    name: "paveT",
                    map: w.path
                }) : new r.MeshBasicMaterial({
                    color: h.path.color,
                    side: r.DoubleSide,
                    transparent: !0,
                    depthWrite: !1,
                    opacity: 1,
                    name: "paveO",
                    map: w.path
                });
                return new r.Mesh(o, p)
            }, n.prototype.hintPrefs = {
                rad: .18,
                width: .0125,
                depth: .0625,
                setBack: -.04,
                markRad: .25,
                markInnerRad: .16
            }, n.prototype.makeWaypointObj = function (e, t) {
                var i = new r.Geometry, n = this.player.mode === a.PANORAMA ? h.path.waypointIndoorRadius : h.path.waypointRadius, o = this.pathHeight();
                i.vertices.push(new r.Vector3(-n, o, n), new r.Vector3(-n, o, -n), new r.Vector3(n, o, -n), new r.Vector3(n, o, n)), i.faces.push(new r.Face3(0, 1, 2), new r.Face3(2, 3, 0)), i.faceVertexUvs[0].push([new r.Vector2(0, 0), new r.Vector2(1, 0), new r.Vector2(1, 1)]), i.faceVertexUvs[0].push([new r.Vector2(1, 1), new r.Vector2(0, 1), new r.Vector2(0, 0)]);
                var s = r.UniformsUtils.clone(m.waypoint.uniforms);
                s.map.value = e, s.opacity.value = 0, s.color.value.set(h.path.color);
                var l = {
                    side: r.DoubleSide,
                    depthWrite: !1,
                    transparent: !0,
                    vertexShader: m.waypoint.vertexShader,
                    fragmentShader: m.waypoint.fragmentShader,
                    uniforms: s,
                    name: "waypoint",
                    opacity: 0
                };
                this.player.mode !== a.PANORAMA && (l.depthTest = !1, l.name = "wayPtOut");
                var c = new r.RawShaderMaterial(l), u = new r.Mesh(i, c);
                return u.name = t, u
            }, n.prototype.makeStartMarker = function (e, t) {
                var i = (new r.Vector3).copy(t[1]).sub(t[0]);
                i.y = 0, i.normalize();
                var n = Math.acos(i.x), o = this.makeWaypointObj(w.pathStart, "Start");
                return o.rotateOnAxis(new r.Vector3(0, 1, 0), n), o.position.copy(e), o
            }, n.prototype.makeEndMarker = function (e) {
                var t = this.makeWaypointObj(w.pathEnd, "End"), i = this.model.panos.get(this.nodes[0]).floor.floorIndex, n = this.model.panos.get(this.nodes[this.nodes.length - 1]).floor.floorIndex;
                return n > i ? t.material.uniforms.color.value.set(h.path.colorUp) : i > n && t.material.uniforms.color.value.set(h.path.colorDown), t.position.copy(e), t
            }, n.prototype.pathClean = function (e) {
                if (e) {
                    for (var t in e.children)this.pathClean(e.children[t]);
                    e.geometry && e.geometry.dispose(), e.material && e.material.dispose()
                }
            }, n.prototype.discardPathObject = function () {
                if (this.obj3d) {
                    var e = this.obj3d.parent;
                    e && e.remove(this.obj3d), this.pathClean(this.obj3d)
                }
                this.obj3d = null, this.popInCpm()
            }, n.prototype.discardSlow = function () {
                if (this.obj3d) {
                    if (this.player.mode !== a.PANORAMA)return void this.discardPathObject();
                    for (var e, t = this, i = 0, n = function () {
                        this.discardPathObject()
                    }.bind(this), r = 0; r < t.obj3d.children.length; r += 1)e = t.obj3d.children[r], void 0 !== e.material && e.material.transparent === !0 && (void 0 !== e.material.uniforms ? p.start(u.property(e.material.uniforms.opacity, "value", 0), h.path.fadeOutTime, n, 0, d[h.warp.blendEasing]) : p.start(u.property(e.material, "opacity", 0), h.path.fadeOutTime, n, 0, d[h.warp.blendEasing]), i += 1, n = null);
                    0 === i && this.discardPathObject(), this.player.mode !== a.PANORAMA && this.fadeInCpm(h.path.fadeInTime - 3)
                }
            }, n.prototype.appearSlow = function () {
                var e, t = this;
                this.fadeOutCpm(h.path.fadeInTime);
                for (var i = this.player.mode === a.PANORAMA ? h.path.opacity : 1, n = 0; n < t.obj3d.children.length; n += 1)e = t.obj3d.children[n], void 0 !== e.material && e.material.transparent === !0 && (void 0 !== e.material.uniforms ? p.start(u.property(e.material.uniforms.opacity, "value", i), h.path.fadeInTime, null, 0, d[h.warp.blendEasing]) : p.start(u.property(e.material, "opacity", i), h.path.fadeInTime, null, 0, d[h.warp.blendEasing]))
            }, n.prototype.update = function () {
                this.obj3d && this.obj3d.updateMatrixWorld()
            }, n.prototype.calcBurnsAmount = function (e) {
                var t = r.Math.degToRad(h.warp.burnsAngle);
                if (this.player.mode === a.PANORAMA) {
                    var i = this.burnsDir * t;
                    if (this.upcomingTransType === l.BLACK)return i;
                    var n = e;
                    if (null === n)return y.warn("Transition request for non-highlight"), i;
                    var o = this.getHeroDescriptorByHeroIndex(n);
                    if (null === o)return i;
                    if (!o.isPano())return i;
                    var s = this.getHeroPano(o), c = this.player.cameras[a.PANORAMA], u = A.FORWARD.clone().applyQuaternion(c.quaternion).setY(0).normalize(), d = Math.min(r.Math.degToRad(h.warp.minBurnsAngle), t), p = function (e) {
                        var i = Math.acos(Math.min(1, e.dot(u))), n = (new r.Vector3).crossVectors(u, e);
                        return Math.max(d, Math.min(Math.abs(i), t)) * Math.sign(n.y)
                    };
                    if (s == this.player.currentPano)return i = p(A.FORWARD.clone().applyQuaternion(o.quaternion).setY(0).normalize());
                    var f = this.findShortestPath(this.player.currentPano, s);
                    if (void 0 === f || null === f || f.length < 1)return y.debug("Empty path ahead..."), i;
                    var g = this.makePathHulls(f), m = new r.CatmullRomCurve3(g.camera), v = Math.min(.1, h.warp.lookAheadDist / m.getLength());
                    return i = p(m.getPointAt(v).clone().sub(c.position).setY(0).normalize())
                }
                if (this.player.mode === a.DOLLHOUSE) {
                    var C = this.player.cameras[a.DOLLHOUSE];
                    return this.burnsDir * Math.min(C.controls.rotationAcceleration.x + .05, .02)
                }
                return this.burnsDir
            }, n.prototype.waitNextStep = function (e, t) {
                var i = new r.Euler, n = new r.Vector3;
                y.debug("Starting wait: " + (void 0 !== t));
                var o = this.calcBurnsAmount(e), s = function () {
                    this.endWarpState(), this.player.mode === a.DOLLHOUSE && (this.player.cameras[a.DOLLHOUSE].controls.rotationAcceleration.x = 0), t && t()
                }.bind(this), l = function (e, t) {
                    if (this.warpInterrupted)return s(), !0;
                    var r = t || 1e3 / 60;
                    if (h.warp.doBurns)if (this.player.mode === a.PANORAMA) {
                        var l = this.player.cameras[a.PANORAMA];
                        i.setFromQuaternion(l.quaternion, h.warp.eOrder);
                        var c = r * o / h.warp.tourStepDelay;
                        i.y += c, n.set(0, 0, -1), n.applyEuler(i), n.add(l.position), l.controls.lookAt(n), l.controls.lookVector.copy(n), l.lookAt(n)
                    } else if (this.player.mode === a.DOLLHOUSE) {
                        var u = this.player.cameras[a.DOLLHOUSE];
                        u.controls.rotationAcceleration.x = o
                    } else this.player.controls[a.FLOORPLAN].absoluteScale *= .9996
                }.bind(this);
                this.startWarpState(), p.start(l, h.warp.tourStepDelay, s, 0, d.easeInOutQuad, "wait")
            }, n.prototype.warpToNonPano = function (e) {
                if (this.discardPathObject(), this.warpDestHeroLoc.cameraMode === a.DOLLHOUSE || this.warpDestHeroLoc.cameraMode === a.FLOORPLAN) {
                    var t = function () {
                        e && e()
                    }.bind(this);
                    this.player.flyToNewMode({
                        mode: this.warpDestHeroLoc.cameraMode,
                        duration: h.warp.outsideTime,
                        warpDest: this.warpDestHeroLoc,
                        callback: t,
                        force: !0
                    })
                } else y.warn("no warp destination!!!"), e && e()
            }, n.prototype._resetWarpShaderParams = function (e) {
                this.player.mode === a.PANORAMA && (void 0 !== e.material.uniforms.blackout && (e.material.uniforms.blackout.value = 0), void 0 !== e.material.uniforms.modelAlpha && (e.material.uniforms.modelAlpha.value = 0))
            }, n.prototype._clearWarpShading = function () {
                for (var e = this.model.chunks, t = 0; t < e.length; t += 1)this._resetWarpShaderParams(e[t]), e[t].visible = !0;
                this._resetWarpShaderParams(this.model.skybox)
            }, n.prototype._warpStopFlying = function () {
                this.activeTransType = null, this.placeCpm()
            }, n.prototype._wrapupTravelOnlyBits = function () {
                this._warpStopFlying(), this.warpPathPoints && (this.player.currentPano.exit(), this.warpDestPano.enter(), this.player.currentPano = this.warpDestPano), this.player.spider.draw(), this.placeCpm()
            }, n.prototype._wrapupTravel = function (e) {
                this._wrapupTravelOnlyBits(), this.warpCameraAim(e)
            }, n.prototype._wrapupWarpShading = function (e) {
                this._clearWarpShading(), this._wrapupTravel(e)
            }, n.prototype.wrapupWarpShadingOnly = function (e, t) {
                t !== I.END && this._clearWarpShading(), this._wrapupTravelOnlyBits(), this.upcomingTransType = null, e && e()
            }, n.prototype._warpCameraAim = function (e, t) {
                var i = this.warpDestHeroLoc.quaternion, n = this.player.cameras[a.PANORAMA], o = new r.Vector3(0, 0, 1).applyQuaternion(i).normalize(), s = new r.Vector3(0, 0, 1).applyQuaternion(n.quaternion).normalize(), l = s.dot(o), u = r.Math.radToDeg(Math.acos(l)), f = new r.Euler(0, 0, 0, h.warp.eOrder).setFromQuaternion(i, h.warp.eOrder), g = (new r.Euler).setFromQuaternion(n.quaternion, h.warp.eOrder), m = new r.Euler(f.x - g.x, f.y - g.y, f.z - g.z, h.warp.eOrder);
                m.y = c.constrainedTurn(m.y), this.burnsDir = Math.sign(m.y);
                var v = new r.Euler(0, 0, 0, h.warp.eOrder), A = new r.Vector3, C = function (e, t) {
                    return this.warpInterrupted ? !0 : (v.x = g.x + e * m.x, v.y = g.y + e * m.y, v.z = g.z + e * m.z, A.set(0, 0, -1), A.applyEuler(v), A.add(n.position), n.controls.lookAt(A), n.controls.lookVector.copy(A), void n.lookAt(A))
                }.bind(this);
                return u > h.warp.minRotation ? p.start(C, e, t, 0, d[h.warp.movementEasing]) : (y.debug("Aim angle only is " + u.toPrecision(3) + " degrees, skipping explicit re-aim"), void(t && t()))
            }, n.prototype._warpBendAim = function (e, t, i, n) {
                var o = n || 0, s = this.player.cameras[a.PANORAMA], l = new r.Euler(0, 0, 0, h.warp.eOrder).setFromQuaternion(this.warpDestHeroLoc.quaternion, h.warp.eOrder), u = (new r.Euler).setFromQuaternion(s.quaternion, h.warp.eOrder), f = new r.Euler(l.x - u.x, l.y - u.y, l.z - u.z, h.warp.eOrder);
                f.y = c.constrainedTurn(f.y);
                var g = Math.min(r.Math.degToRad(h.warp.softBendTilt), Math.abs(f.x));
                f.x = g * Math.sign(f.x), g = Math.min(r.Math.degToRad(Math.max(0, h.warp.softBendAngle)), g), this.burnsDir = Math.sign(f.y), g *= Math.sign(f.y), f.y = g;
                var m = new r.Euler(0, 0, 0, h.warp.eOrder), v = new r.Vector3, A = function (e, t) {
                    if (.5 > e)m.x = u.x + e * f.x, m.y = u.y + e * f.y, m.z = u.z + e * f.z; else {
                        var i = (1 - e) * h.warp.softBendEnd;
                        m.x = l.x - i * f.x, m.y = l.y - i * f.y, m.z = l.z - i * f.z
                    }
                    v.set(0, 0, -1), v.applyEuler(m), v.add(s.position), s.controls.lookAt(v), s.controls.lookVector.copy(v), s.lookAt(v)
                }.bind(this);
                return p.start(A, t, i, o, d[h.warp.movementEasing])
            }, n.prototype._warpStepCameraAim = function (e, t, i) {
                var n = this.player.cameras[a.PANORAMA], o = new r.Euler(0, 0, 0, h.warp.eOrder).setFromQuaternion(this.warpDestHeroLoc.quaternion, h.warp.eOrder), s = (new r.Euler).setFromQuaternion(n.quaternion, h.warp.eOrder), l = new r.Euler(o.x - s.x, o.y - s.y, o.z - s.z, h.warp.eOrder);
                l.y = c.constrainedTurn(l.y), this.burnsDir = Math.sign(l.y);
                var u = new r.Euler(0, 0, 0, h.warp.eOrder), f = new r.Vector3, g = function (e, t) {
                    .5 > e ? u.copy(s) : u.copy(o), f.set(0, 0, -1), f.applyEuler(u), f.add(n.position), n.controls.lookAt(f), n.controls.lookVector.copy(f), n.lookAt(f)
                }.bind(this);
                return p.start(g, t, i, 0, d[h.warp.movementEasing])
            }, n.prototype.setBurnsDir = function () {
                var e = this.player.cameras[a.PANORAMA], t = new r.Euler(0, 0, 0, h.warp.eOrder).setFromQuaternion(this.warpDestHeroLoc.quaternion, h.warp.eOrder), i = (new r.Euler).setFromQuaternion(e.quaternion, h.warp.eOrder), n = new r.Euler(t.x - i.x, t.y - i.y, t.z - i.z, h.warp.eOrder);
                n.y = c.constrainedTurn(n.y), this.burnsDir = Math.sign(n.y)
            }, n.prototype.stepWarpPath = function (e, t) {
                var i = this.player.cameras[a.PANORAMA];
                if (!this.warpPathPoints)return i.position.copy(this.warpDestPano.position), !0;
                var n = this.warpPathPoints[0], o = this.warpDestPano.position;
                if (null !== this.nodes && this.cameraHull.length > 1) {
                    var s = new r.Vector3;
                    .5 > e ? s.copy(this.cameraHull[1]).sub(n).normalize().multiplyScalar(h.warp.softPushDist * e).add(n) : s.copy(this.cameraHull[this.cameraHull.length - 2]).sub(o).normalize().multiplyScalar(h.warp.softPushDist * h.warp.softPushEnd * (1 - e)).add(o), i.position.copy(s)
                } else.5 > e ? i.position.copy(n) : i.position.copy(o)
            }, n.prototype.interruptAndFastForward = function (e, t) {
                this.warping && (this.warpInterrupted = !0, this.warpInterruptionBlackoutStyle = e, this.warpInterruptionTravelTime = t, (null === this.warpInterruptionBlackoutStyle || void 0 === this.warpInterruptionBlackoutStyle) && (this.warpInterruptionBlackoutStyle = I.MIDDLE), (null === this.warpInterruptionTravelTime || void 0 === this.warpInterruptionTravelTime) && (this.warpInterruptionTravelTime = h.minWarpTime))
            }, n.prototype.warpCameraAim = function (e) {
                var t = h.warp.minWarpTime;
                if (this.upcomingTransType === l.BLACK)t = h.warp.teleportTime; else {
                    var i = this.player.cameras[a.PANORAMA], n = new r.Euler(0, 0, 0, h.warp.eOrder).setFromQuaternion(this.warpDestHeroLoc.quaternion, h.warp.eOrder), o = (new r.Euler).setFromQuaternion(i.quaternion, h.warp.eOrder), s = new r.Euler(n.x - o.x, n.y - o.y, n.z - o.z, h.warp.eOrder);
                    s.y = c.constrainedTurn(s.y);
                    var u = 1e3 * Math.abs(s.y) / r.Math.degToRad(h.warp.maxAimPerSec);
                    t = Math.max(t, u)
                }
                var d = function () {
                    this._warpStopFlying(), this.discardSlow(), e && e()
                }.bind(this);
                this._warpCameraAim(t, d)
            }, n.prototype.warpCommonParameters = function (e, t, i, n) {
                this.model.skybox.material.uniforms.blackout.value = n;
                var r = u.uniform(this.model.skybox, "progress", 1), o = u.allUniforms(this.model.chunks, "progress", 1), a = !1, s = function () {
                    return this.warpInterrupted ? (a = !0, !0) : void 0
                }.bind(this), l = function (e, t) {
                    return i && a ? (this.model.skybox.material.uniforms.progress.value = 0, !0) : void r(e, t)
                }.bind(this), c = function (e, t) {
                    return i && a ? (o(0), !0) : void o(e, t)
                }.bind(this);
                p.start(s, e, null, t, null, "safeHaltWatch"), p.start(l, e, null, t, d[h.warp.blendEasing], "skyboxProgress"), p.start(c, e, null, t, d[h.warp.blendEasing], "chunkProgress")
            }, n.prototype.warpTravel_STD = function (e) {
                var t, i = Math.min(h.warp.lookAheadMax, h.warp.lookAheadDist / this.warpLength), n = this.player.cameras[a.PANORAMA], o = (Math.min(.25, 3 / this.warpLength), Math.min(.35, 7 / this.warpLength)), s = new r.Euler(0, 0, 0, h.warp.eOrder), f = new r.Vector3, m = (new r.Euler).setFromQuaternion(n.quaternion, h.warp.eOrder), v = (new r.Euler).copy(m), C = n.position.clone(), b = new r.Matrix4, w = new r.Euler, x = h.warp.minWarpTime;
                x += this.warpLength * h.warp.timePerMeter, h.warp.flySpeed > .01 && (x = 1e3 * this.warpLength / h.warp.flySpeed);
                var E = !1, M = this.warpDestHeroLoc.quaternion, T = new r.Vector3(0, 0, -1).applyQuaternion(M).normalize(), S = this.warpPathPoints[this.warpPathPoints.length - 1].clone().sub(this.warpPathPoints[this.warpPathPoints.length - 2]).normalize(), P = S.dot(T), _ = r.Math.radToDeg(Math.acos(P)), L = function (e) {
                    var t = o, i = r.Math.smoothstep(e, 0, t) * (1 - r.Math.smoothstep(e, 1 - t, 1));
                    return i
                }, D = function () {
                    return b.lookAt(C, t, A.UP), s.setFromRotationMatrix(b, h.warp.eOrder), m.setFromQuaternion(n.quaternion, h.warp.eOrder), w.set(s.x - m.x, s.y - m.y, s.z - m.z, h.warp.eOrder), c.constrainedTurn(w.y)
                }.bind(this), R = function (e, t) {
                    return this.warpInterrupted ? (E = !0, !0) : void 0
                }.bind(this), B = function (e, t) {
                    return E || !this.warpPathPoints ? (g.blur(0), !0) : void g.blur(e)
                }.bind(this), O = u.allUniforms(this.model.chunks, "modelAlpha", 1), F = function (e, t) {
                    return E || !this.warpPathPoints ? (O(0), !0) : void O(e, t)
                }.bind(this), k = function (e, t) {
                    if (!this.warpPathPoints)return n.position.copy(this.warpDestPano.position), !0;
                    if (E)return !0;
                    var i = this.interpAlongPath(this.warpPathPoints, this.warpPathLengths, e);
                    n.position.copy(i), C = this.interpAlongPath(this.warpPathPoints, this.warpPathLengths, .99 * e)
                }.bind(this), N = function (e, n) {
                    return this.warpPathPoints ? E ? !0 : void(t = this.interpAlongPath(this.warpPathPoints, this.warpPathLengths, Math.min(e + i, 1))) : (y.debug("Lost bunny."), !0)
                }.bind(this), U = function (e, o) {
                    if (E)return y.debug(">>>> Walkthrough interupted at t=" + e), !0;
                    if (!this.warpPathPoints)return !0;
                    var a = this.warpLength * e, l = r.Math.smoothstep(a, 0, this.brushPrefs.lookBlendDist), u = r.Math.smoothstep(a, this.warpLength - this.brushPrefs.lookBlendDist, this.warpLength);
                    h.warp.matchCam && (l *= 1 - u), b.lookAt(C, t, A.UP), s.setFromRotationMatrix(b, h.warp.eOrder), m.setFromQuaternion(n.quaternion, h.warp.eOrder), w.set(s.x - m.x, s.y - m.y, s.z - m.z, h.warp.eOrder), w.y = c.constrainedTurn(w.y), s.x = m.x + l * w.x, s.y = m.y + l * w.y, s.z = m.z + l * w.z, w.set(s.x - v.x, s.y - v.y, s.z - v.z, h.warp.eOrder), w.y = c.constrainedTurn(w.y);
                    var d = r.Math.degToRad(h.warp.maxTurnPerSec) * o / 1e3;
                    w.y = Math.sign(w.y) * Math.min(d, Math.abs(w.y)), v.x = v.x + w.x * h.warp.turnFriction, v.y = v.y + w.y * h.warp.turnFriction, v.z = v.z + w.z * h.warp.turnFriction, v.x = Math.max(r.Math.degToRad(h.warp.minDownAngle), v.x);
                    var p = t.clone().sub(C).normalize();
                    if (_ < h.warp.maxAimRotation && u > 0) {
                        var g = 1 - u;
                        p.x = p.x * g + u * S.x, p.y = p.y * g + u * S.y, p.z = p.z * g + u * S.z, p.normalize()
                    }
                    this.bunnyObj.position.copy(n.position).add(p), f.set(0, 0, -1).applyEuler(v).normalize(), f.multiplyScalar(8), f.add(n.position), e > 1 - i && h.warp.matchCam || (n.controls.lookAt(f), n.controls.lookVector.copy(f), n.lookAt(f))
                }.bind(this), V = function () {
                    E ? (this.discardSlow(), this.upcomingTransType = l.BLACK, this.warpTravel_BLACK(-.5, this.warpInterruptionTravelTime, I.BEGINNING, e)) : this._wrapupWarpShading(e)
                }.bind(this);
                N(0);
                var z = h.warp.motionLeadTime + 1e3 * Math.abs(D()) / r.Math.degToRad(h.warp.maxTurnPerSec);
                x += z;
                var G = z / x;
                this.warpCommonParameters(x, G, !0, I.NONE), p.start(R, x, null, 0, null, "_haltWatcher"), h.warp.blur > 0 && (g.blurStrength = h.warp.blur, p.start(B, x, null, G, L, "blurring")), p.start(F, x, null, G, L, "modelAlpha"), p.start(k, x, null, G, d[h.warp.blendEasing], "followPath"), p.start(N, x, null, G, d[h.warp.blendEasing], "goBunny"), p.start(U, x, V, 0, d[h.warp.blendEasing], "lookAtBunny")
            }, n.prototype.warpTravel_BLACK = function (e, t, i, n) {
                var r = e || 0;
                (void 0 === t || null === t) && (t = h.warp.teleportTime), this.warpCommonParameters(t, r, !1, i), this.model.chunks.forEach(function (e) {
                    e.material.uniforms.blackout.value = i
                }), this._warpBendAim(null, t, null, r);
                var o = function () {
                    this.wrapupWarpShadingOnly(n, i)
                }.bind(this);
                p.start(this.stepWarpPath.bind(this), t, o, r, d[h.warp.blendEasing], "stepMotion")
            }, n.prototype.flightStepWalk = function (e, t, i) {
                if (this.warpInterrupted)i && i(); else if (this.activeTransType !== l.WALK)this._clearWarpShading(), this._warpStopFlying(), this.player.spider.draw(), this.placeCpm(), i && i(); else if (this.player.currentPano !== e) {
                    var n = {
                        pano: e,
                        lookAtPoint: t,
                        duration: null,
                        maxDistanceOverride: h.warp.walkMaxDist,
                        skipWarpingCheck: !1,
                        constantMoveSpeed: !0
                    };
                    this.player.nonInterruptingFlyToPano(n, i)
                } else i && i()
            }, n.prototype.makeWalkFlightFunc = function (e, t, i) {
                return this.flightStepWalk.bind(this, e, t, i)
            }, n.prototype.warpTravel_WALK = function (e) {
                var t = this.nodes.length, i = this.player.model.panos, n = i.get(this.nodes[t - 1]), r = n.position.clone().multiplyScalar(2).sub(i.get(this.nodes[t - 2]).position), o = new Array(t + 1);
                o[o.length - 1] = function () {
                    e && e()
                }.bind(this);
                for (var a = t - 1, s = o.length - 1; s > 0; s -= 1) {
                    var l = this.nodes[a];
                    n = i.get(l);
                    var h = r.distanceTo(n.position) < .3 ? null : r;
                    o[s - 1] = this.makeWalkFlightFunc(n, h, o[s]), r = n.position.clone(), a--
                }
                o[0]()
            }, n.prototype.warpCameraTravel = function (e, t, i, n) {
                if (this.activeTransType = this.upcomingTransType, this.upcomingTransType = null, !e) {
                    var r = function () {
                        this._wrapupTravel(n)
                    }.bind(this), o = {
                        pano: this.warpDestPano,
                        lookAtPoint: null,
                        duration: null,
                        maxDistanceOverride: null,
                        skipWarpingCheck: !1
                    };
                    return void this.player.flyToPano(o, r)
                }
                this.activeTransType == l.BLACK ? this.warpTravel_BLACK(null, i, t, n) : this.activeTransType === l.WALK ? this.warpTravel_WALK(function () {
                    this._clearWarpShading(), this._warpStopFlying(), this.player.spider.draw(), this.placeCpm(), n && n()
                }.bind(this)) : this.warpTravel_STD(n)
            }, n.prototype.startWarpState = function () {
                this.warping = !0, this.warpInterrupted = !1, this.warpInterruptionBlackoutStyle = null, this.warpInterruptionTravelTime = null
            }, n.prototype.endWarpState = function () {
                this.warping = !1
            }, n.prototype.warpToPano = function (e, t, i, n) {
                if (this.warping)return void y.warn("Cannot warp when already warping");
                if (this.upcomingTransType = e, this.activeTransType = null, !this.setWarpDestPano())return this.upcomingTransType = null, void this.warpToNonPano(n);
                if (this.player.mode !== a.PANORAMA)return this.upcomingTransType = null, this.discardSlow(), void this.player.flyToNewMode({
                    mode: a.PANORAMA,
                    pano: this.warpDestPano,
                    duration: h.warp.outsideTime,
                    warpDest: this.warpDestHeroLoc,
                    callback: n,
                    force: !0
                });
                if (!this.warpDestPano)return y.warn("no warp destination, callback dropped"), void(this.upcomingTransType = null);
                var r = !(this.model.panos.isNeighbour(this.player.currentPano, this.warpDestPano) && this.warpDestPano !== this.player.currentPano && this.warpDestPano.position.distanceTo(this.player.currentPano.position) < h.warp.nearPanoDist), o = this.chooseWarpPath(r);
                if (o && this.upcomingTransType !== l.WALK) {
                    var s = function () {
                        this.warpToPano(e, t, i, n)
                    }.bind(this);
                    if (this.player.checkAndWaitForPanoLoad(this.warpDestPano, "high", "low", this.player.basePanoSize, s))return
                }
                this.player.currentPano || (y.warn("Arrived at a very strange spot!"), this.player.currentPano = this.warpDestPano, this.placeCpm(), this.fadeOutCpm(h.path.fadeOutTime), this.player.spider.draw()), y.debug("Warping to pano ", this.warpDestPano.position), this.upcomingTransType !== l.WALK && (this.player.emit(C.PanoChosen, this.player.currentPano, this.warpDestPano), this.model.setProjectedPanos(this.player.currentPano, this.warpDestPano)), this.player.activeTag && this.player.dismissActiveTag(), this.startWarpState();
                var c = function () {
                    this.endWarpState(), n && n()
                }.bind(this);
                o ? this.warpCameraTravel(r, t, i, c) : this.warpCameraAim(c)
            }, t.exports = n
        }).call(this, "/js/objects/ShowPath.js")
    }, {
        "../effects": 14,
        "../enum/BlackoutStyle": 16,
        "../enum/ModelManagerEvents": 26,
        "../enum/PlayerEvents": 32,
        "../enum/RenderOrder": 33,
        "../enum/Vectors": 41,
        "../enum/Viewmode": 42,
        "../enum/WarpStyle": 43,
        "../gui/gui": 50,
        "../model/ModelManager": 103,
        "../objects/Snapshot": 116,
        "../settings": 123,
        "../shaders": 124,
        "../util/easing": 143,
        "../util/lerp": 145,
        "../util/logger": 146,
        "../util/math": 147,
        "../util/texture": 151,
        "../util/transitions": 152,
        three: 175
    }],
    115: [function (e, t, i) {
        "use strict";
        function n() {
            var e = new r.SphereBufferGeometry(a.skyboxRadius, 20, 5), t = new r.RawShaderMaterial({
                fragmentShader: o.skysphere.fragmentShader,
                vertexShader: o.skysphere.vertexShader,
                uniforms: r.UniformsUtils.clone(o.skysphere.uniforms),
                side: r.BackSide,
                name: "skysphere"
            });
            t.uniforms.radius.value = e.parameters.radius, r.Mesh.call(this, e, t)
        }

        var r = e("three"), o = e("../shaders"), a = e("../settings");
        n.prototype = Object.create(r.Mesh.prototype), n.prototype.constructor = n, t.exports = n
    }, {"../settings": 123, "../shaders": 124, three: 175}],
    116: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                o.call(this, e), this.panoId = e.panoId, this.orthoZoom = e.orthoZoom, this.floorVisibility = e.floorVisibility, this.thumbUrl = e.thumbUrl, this.name = e.name, this.isHero = e.isHero
            }

            var r = (e("three"), e("../util/logger")), o = (e("../settings"), e("../enum/Viewmode"), e("../util/common"), e("../util/transitions"), e("../util/lerp"), e("../util/ajax"), e("../util/texture"), e("./View"));
            e("events").EventEmitter, new r(i);
            n.prototype = Object.create(o.prototype), n.prototype.isPano = function () {
                return this.panoId && "" !== this.panoId
            }, t.exports = n
        }).call(this, "/js/objects/Snapshot.js")
    }, {
        "../enum/Viewmode": 42,
        "../settings": 123,
        "../util/ajax": 138,
        "../util/common": 142,
        "../util/lerp": 145,
        "../util/logger": 146,
        "../util/texture": 151,
        "../util/transitions": 152,
        "./View": 117,
        events: 160,
        three: 175
    }],
    117: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                e = e || {}, this.position = new r.Vector3, this.quaternion = new r.Quaternion, this.update(e)
            }

            var r = e("three"), o = e("../util/logger"), a = (e("../settings"), e("../enum/Viewmode"), e("../util/common"), e("../util/transitions"), e("../util/lerp"), e("../util/ajax"), e("../util/texture"), e("events").EventEmitter);
            new o(i);
            n.prototype = Object.create(a.prototype), n.prototype.isValid = function () {
                return !!this.cameraMode
            }, n.prototype.update = function (e) {
                return this.cameraMode = e.cameraMode || this.cameraMode, this.pano = e.pano || this.pano, e.position && this.position.copy(e.position), e.quaternion && this.quaternion.copy(e.quaternion), this
            }, t.exports = n
        }).call(this, "/js/objects/View.js")
    }, {
        "../enum/Viewmode": 42,
        "../settings": 123,
        "../util/ajax": 138,
        "../util/common": 142,
        "../util/lerp": 145,
        "../util/logger": 146,
        "../util/texture": 151,
        "../util/transitions": 152,
        events: 160,
        three: 175
    }],
    118: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                this.defaultInitialMode = v.DOLLHOUSE, this.currentPano = null, this.camera = null, this.paused = !1, this.flying = !1, this.sceneIntersectionPlane = null, this.target = new s.Vector3, this.mouse = new s.Vector3(1.1, 1.1, .5), this.mouseAtMouseDown = new s.Vector2, this.mouseCouldBeClickToMove = !1, this.mouseLastMoveTime = Date.now(), this.mouseDown = !1, this.containsMouse = !0, this.isTouchEvent = !1, this.reticule = new h(this), this.panoMarkers = [], this.lookTransition = null, this.spider = new m(this), this.quaternion = new s.Quaternion, this.position = new s.Vector3(15, 10, 15), this.previousState = null, this.lastInsideView = new g, this.last360View = new g, this.raycaster = new s.Raycaster, this.intersect = null, this.lastChangeTime = Date.now(), this.history = new _, this.control = null, this.controls = {}, this.cameras = {}, this.path = null, this.model = null, this.domElement = null, this.activeTransitions = {}, this.cachedPanoCandidates = null, this.basePanoSize = 0, this.standardPanoSize = 0, this.highPanoSize = 0, this.ultraHighPanoSize = 0, this.preRenderingEnabled = !1, this.setupCustomProperties()
            }

            function r(e, t, i) {
                this.mode === v.DOLLHOUSE && e !== i && a.call(this, e.center.y)
            }

            function o(e, t) {
                if (this.mode === v.DOLLHOUSE) {
                    var i = e ? this.model.center.y : i = t.center.y;
                    a.call(this, i)
                }
            }

            function a(e) {
                var t = this.cameras[v.DOLLHOUSE], i = this.controls[v.DOLLHOUSE], n = t.position.y + (e - i.target.y), r = C.showFloorDuration + C.showFloorDelay;
                E.start(w.property(i.target, "y", e), r, null, C.flydown.movementDelay, x[C.flydown.movementEasing]), E.start(w.property(t.position, "y", n), r, null, C.flydown.movementDelay, x[C.flydown.movementEasing])
            }

            var s = e("three"), l = e("./util/logger"), h = e("./objects/Reticule"), c = e("./controls/PanoramaControls"), u = e("./controls/DollhouseControls"), d = e("./controls/FloorplanControls"), p = e("./objects/Panorama"), f = e("./objects/ShowPath"), g = e("./objects/View"), m = (e("./objects/Snapshot"), e("./objects/NSpider")), v = e("./enum/Viewmode"), A = (e("./enum/TagStates"), e("./enum/Vectors")), y = e("./enum/Keys"), C = (e("./enum/AlignmentType"), e("./settings")), I = e("./util/common"), b = (e("./util/browser"), e("./util/math")), w = e("./util/lerp"), x = e("./util/easing"), E = e("./util/transitions"), M = e("events").EventEmitter, T = e("./cameras/PanoramaCamera"), S = e("./cameras/DollhouseCamera"), P = e("./cameras/FloorplanCamera"), _ = (e("./shaders"), e("./util/history")), L = e("./util/camera"), D = (e("./model/ModelManager"), e("./enum/PathDiscardMode")), R = e("./enum/PathDisplayMode"), B = e("./enum/PlayerEvents"), O = e("./enum/ControlEvents"), F = e("./enum/ModelManagerEvents"), k = e("./enum/WarpStyle"), N = e("./enum/BlackoutStyle"), U = e("./exception/BasicException"), V = e("./enum/PanoSizeClass"), z = (e("./tile/TileDownloader"), e("./tile/TilePrioritizer")), G = (e("./enum/PanoramaEvents"), new l(i)), H = Object.freeze({FlyToPano: "flyToPano"});
            n.prototype = Object.create(M.prototype), n.prototype.init = function (e, t, i, n, r, o, a, s) {
                this.modelManager = t, this.tileDownloader = i, this.panoRenderer = n, this.qualityManager = r, this.domElement = s, this.camera = a, this.setUpControls(), this.path = new f(e, this, t), this.mattertagManager = o, this.tileDownloader = i, this.basePanoSize = this.qualityManager.getPanoSize(V.BASE), this.standardPanoSize = this.qualityManager.getPanoSize(V.STANDARD), this.highPanoSize = this.qualityManager.getPanoSize(V.HIGH), this.ultraHighPanoSize = this.qualityManager.getPanoSize(V.ULTRAHIGH), this.tileDownloader.processPriorityQueue = !1, this.tileDownloader.tilePrioritizer = new z(this.basePanoSize, this.standardPanoSize, this.highPanoSize, this.ultraHighPanoSize), this.updateModel(), this.bindEvents(s)
            }, n.prototype.setupCustomProperties = function () {
                var e = this.defaultInitialMode;
                Object.defineProperty(this, "mode", {
                    get: function () {
                        return e
                    }, set: function (t) {
                        var i = e;
                        e = t, this.onModeUpdated(i, e)
                    }
                })
            }, n.prototype.setScene = function (e) {
                this.sceneIntersectionPlane = e.plane, this.path.setScene(e), this.moveReticuleToScene(e)
            }, n.prototype.moveReticuleToScene = function (e) {
                this.reticule.parent && this.reticule.parent.remove(this.reticule), e.add(this.reticule)
            }, n.prototype.updateModel = function () {
                this.model = this.modelManager.getActiveModel(), this.model.on("floor.changed", r.bind(this)), this.model.on("allfloors.toggled", o.bind(this)), this.on(B.PanoChosen, this.model.setProjectedPanos.bind(this.model))
            }, n.prototype.updateModelDependentData = function () {
                this.setModelForControls(this.model), this.getPanoMarkersFromModel()
            }, n.prototype.onModelChanged = function () {
                this.updateModel(), this.updateModelDependentData()
            }, n.prototype.getPanoMarkersFromModel = function () {
                this.panoMarkers = this.model.panos.list.reduce(function (e, t) {
                    return t.marker ? e.concat(t.marker) : e
                }, [])
            }, n.prototype.setModelForControls = function (e) {
                this.controls[v.DOLLHOUSE].setZoomBounds(e.boundingBox);
                var t = this.model.boundingBox.clone().expandByScalar(C.modelBoundsPadding);
                [v.DOLLHOUSE, v.FLOORPLAN].forEach(function (e) {
                    this.controls[e].setBounds(t)
                }.bind(this))
            }, n.prototype.updateControlsForNewMode = function (e, t) {
                this.controls[e] && (this.controls[e].reset(), this.controls[e].enabled = !1), this.controls[t] && (this.controls[t].enabled = !0), this.control = this.controls[t]
            }, n.prototype.setUpControls = function () {
                var e = {};
                e[v.PANORAMA] = new T, e[v.DOLLHOUSE] = new S, e[v.FLOORPLAN] = new P;
                var t = {};
                t[v.PANORAMA] = new c(e[v.PANORAMA]), t[v.DOLLHOUSE] = new u(e[v.DOLLHOUSE]), t[v.FLOORPLAN] = new d(e[v.FLOORPLAN]);
                var i = this.handleControlMove.bind(this);
                t[v.PANORAMA].on(O.Move, i), t[v.DOLLHOUSE].on(O.Move, i), t[v.FLOORPLAN].on(O.Move, i);
                var n = this.handleControlInputStart.bind(this);
                t[v.PANORAMA].on(O.InputStart, n), t[v.DOLLHOUSE].on(O.InputStart, n), t[v.FLOORPLAN].on(O.InputStart, n), this.control = t[this.defaultInitialMode], this.control.enabled = !0, this.controls = t, this.cameras = e
            }, n.prototype.handleControlMove = function (e) {
                this.emit(B.Move, e)
            }, n.prototype.handleControlInputStart = function (e) {
                this.emit(B.InputStart, e)
            }, n.prototype.onModeUpdated = function (e, t) {
                this.updateControlsForNewMode(e, t), this.emit(B.ModeChanged, e, t)
            }, n.prototype.isWarping = function () {
                return this.path.warping
            }, n.prototype.getZoom = function () {
                if (this.mode == v.FLOORPLAN || this.mode == v.DOLLHOUSE) {
                    var e = 10, t = Math.sqrt(this.controls[v.FLOORPLAN].currentScale / e);
                    return t
                }
                return .5
            }, n.prototype.bindEvents = function (e) {
                e !== document && e.setAttribute("tabindex", -1), this.controls[v.PANORAMA].on(O.FlyInDirection, this.flyLocalDirection.bind(this)), e.addEventListener("mousedown", this.onMouseDown.bind(this)), e.addEventListener("mousemove", this.onMouseMove.bind(this)), e.addEventListener("mouseover", this.onMouseOver.bind(this)), e.addEventListener("mouseout", this.onMouseOut.bind(this)), e.addEventListener("mouseup", this.onMouseUp.bind(this)), this.modelManager.on(F.ActiveModelChanged, this.onModelChanged.bind(this)), e.addEventListener("touchstart", this.onTouchStart.bind(this)), e.addEventListener("touchmove", this.onTouchMove.bind(this)), e.addEventListener("touchend", this.onTouchEnd.bind(this)), e.addEventListener("pointerdown", this.onPointerDown.bind(this)), e.addEventListener("pointermove", this.onPointerMove.bind(this)), e.addEventListener("pointerup", this.onPointerUp.bind(this)), e.addEventListener("pointerout", this.onPointerOut.bind(this)), e.addEventListener("pointercancel", this.onPointerCancel.bind(this)), document.addEventListener("keydown", this.onKeyDown.bind(this));
                for (var t in this.controls)this.controls[t].bindEvents(e)
            }, n.prototype.onMouseDown = function (e) {
                e.currentTarget !== document && e.currentTarget.focus(), 0 === e.button && (this.handleInputStart.call(this, e.clientX, e.clientY, !1), this.updateIntersect())
            }, n.prototype.onMouseMove = function (e) {
                this.isTouchEvent = !1, this.handleInputMove.call(this, e.clientX, e.clientY, !1)
            }, n.prototype.onMouseOver = function (e) {
                this.containsMouse = !0, !this.mouseDown || 0 !== e.which && 0 !== e.buttons || (this.mouseDown = !1)
            }, n.prototype.onMouseOut = function (e) {
                this.containsMouse = !1
            }, n.prototype.onMouseUp = function (e) {
                this.handleInputEnd.call(this, e.clientX, e.clientY, !1)
            }, n.prototype.onTouchStart = function (e) {
                if (e.currentTarget !== document && e.currentTarget.focus(), !this.mouseDown) {
                    var t = I.average(e.changedTouches, "clientX"), i = I.average(e.changedTouches, "clientY");
                    this.handleInputStart.call(this, t, i, !0)
                }
            }, n.prototype.onTouchMove = function (e) {
                var t = I.average(e.changedTouches, "clientX"), i = I.average(e.changedTouches, "clientY");
                this.handleInputMove.call(this, t, i, !0)
            }, n.prototype.onTouchEnd = function (e) {
                this.updateIntersect();
                var t = I.average(e.changedTouches, "clientX"), i = I.average(e.changedTouches, "clientY");
                this.handleInputEnd.call(this, t, i, !0)
            }, n.prototype.onPointerDown = function (e) {
                e.currentTarget !== document && e.currentTarget.focus(), this.mouseDown || this.handleInputStart.call(this, e.clientX, e.clientY, !0)
            }, n.prototype.onPointerMove = function (e) {
                this.handleInputMove.call(this, e.clientX, e.clientY, !0)
            }, n.prototype.onPointerUp = function (e) {
                this.updateIntersect(), this.handleInputEnd.call(this, e.clientX, e.clientY, !0)
            }, n.prototype.onPointerOut = function (e) {
                this.mouseDown = !1
            }, n.prototype.onPointerCancel = function (e) {
                this.mouseDown = !1
            }, n.prototype.onKeyDown = function (e) {
                var t = function () {
                    this.control && this.control.emit(O.Move, "key")
                }.bind(this), i = e.which;
                switch (i) {
                    case y.F:
                        t(), this.changeFloor(-1);
                        break;
                    case y.R:
                        t(), this.changeFloor(1)
                }
            }, n.prototype.handleInputStart = function (e, t, i) {
                this.isTouchEvent = i, b.convertScreenPositionToNDC(e, t, this.mouse), b.convertScreenPositionToNDC(e, t, this.mouseAtMouseDown), this.mouseCouldBeClickToMove = !0, this.mouseDown = !0
            }, n.prototype.handleInputMove = function (e, t, i) {
                this.isTouchEvent = i, b.convertScreenPositionToNDC(e, t, this.mouse), this.mouseAtMouseDown.distanceTo(this.mouse) > .02 && (this.mouseCouldBeClickToMove = !1), this.mouseLastMoveTime = Date.now(), this.reticule.move(e, t, i)
            }, n.prototype.handleInputEnd = function (e, t, i) {
                if (this.isTouchEvent = i, this.mouseDown = !1, this.controls[v.PANORAMA].emit("interaction.direct"), this.mouseCouldBeClickToMove) {
                    if (this.checkMattertagClick())return !0;
                    if (this.control && this.control.emit(O.Move, this.isTouchEvent ? "touch" : "mouse"), this.history.invalidate(), this.intersect)return this.flyToPanoClosestToMouse();
                    if (this.mode === v.PANORAMA) {
                        var n = this.closestPanoInDirection(this.getMouseDirection());
                        return n ? this.flyToPano({pano: n}) : this.bump(this.getMouseDirection())
                    }
                }
            }, n.prototype.checkMattertagClick = function () {
                if (this.mattertagManager.intersectTag) {
                    var e = this.isTouchEvent ? this.mattertagManager.intersectTag : this.mattertagManager.activeTag || this.mattertagManager.intersectTag;
                    if (e.isPanoTag()) {
                        var t = L.optionsFromString(e.link.URL);
                        return t && t.mode === v.PANORAMA && this.warpToPanoById(t.panoId, t.quaternion, null, null, k.BLACK, null, null), !0
                    }
                    var i = this.isTouchEvent, n = this.mattertagManager.clickedOnTag(i, this);
                    return i || n || E.cancel(this.lookTransition), !0
                }
                return this.mattertagManager.activeTag ? (this.mattertagManager.dismissActiveTag(), !1) : void 0
            }, n.prototype.rankedMattertagInDirection = function (e, t) {
                return this.mattertagManager.rankedMattertagInDirection(e, this.position, this.camera, t)
            }, n.prototype.start = function (e) {
                var t = e.mode, i = e.pano, n = e.position, r = e.quaternion, o = e.tag, a = e.quickstart, s = $.Deferred();
                this.updateModelDependentData(), this.updateFromControls(), this.model.has360Views && this.findDefaultViews();
                var l = t === v.PANORAMA && i && !i.isAligned();
                return !this.model.outsideAllowed() || l || a ? this.startInside(i, n, r, o, s) : this.startOutside(t, i, n, r, o, s), s.done(function (e) {
                    this.emit(B.Ready, e, o)
                }.bind(this)), s
            }, n.prototype.startOutside = function (e, t, i, n, r, o) {
                this.emit(B.StartOutside, C[e].transitionTime), e === v.FLOORPLAN || e === v.DOLLHOUSE ? (e === v.FLOORPLAN ? this.floorplanMode() : this.dollhouseMode(i, n), o.resolve(!1)) : (e !== v.PANORAMA && (t = this.model.panos.findClosest(i), r = null), this.startInsideWithFlyin(t, i, n, r, o))
            }, n.prototype.startInside = function (e, t, i, n, r) {
                r = r || $.Deferred(), this.currentPano = e;
                var o = e && !e.isAligned();
                if (t = o ? e.position : t || e.position, i = i || e.quaternion, e) {
                    var a = this.startInside.bind(this, e, t, i, n, r);
                    if (this.checkAndWaitForPanoLoad(e, "high", "low", this.basePanoSize, a))return
                }
                return this.mode = v.PANORAMA, e.floor.enter(this.mode), this.emit(B.PanoChosen, this.currentPano, this.currentPano), this.switchCameraMode(this.mode, i), this.emit(B.StartInside, o ? 0 : C.panorama.transitionTime), r.resolve(!0), r
            }, n.prototype.startInsideWithFlyin = function (e, t, i, n, r) {
                if (r = r || $.Deferred(), this.dollhouseMode(), !e)return G.warn("Player.startInsideWithFlyin() -> targetPano is invalid."), r.resolve(!1), r;
                t = t || e.position;
                var o = i || this.control.camera.quaternion, a = e.position;
                return this.fitDollhouse(a, t, o), setTimeout(function (t) {
                    this.control && (this.control.maxDistance = t);
                    var n = {
                        mode: v.PANORAMA, pano: e, quaternion: i, callback: function () {
                            r.resolve(!0)
                        }.bind(this)
                    };
                    this.flyToNewMode(n)
                }.bind(this, this.control.maxDistance), C.startupFlyinDelay), r
            }, n.prototype.checkAndWaitForPanoLoad = function (e, t, i, n, r, o, a, s, l, h) {
                return (null === s || void 0 === s) && (s = !0), this.model.supportsTiles ? this.checkAndWaitForTiledPanoLoad(e, n, r, o, a, s, l, h) : this.checkAndWaitForWholePanoLoad(e, t, i, r, s)
            }, n.prototype.checkAndWaitForWholePanoLoad = function (e, t, i, n, r) {
                if (!e)throw new U("Player.checkAndWaitForWholePanoLoad() -> Cannot load texture for null pano.");
                return r && this.model.waitForLoad(e, function () {
                    return e.isLoaded(i)
                }), e.isLoaded(t) ? !1 : (e.loadCube(t).done(n), !0)
            }, n.prototype.checkAndWaitForTiledPanoLoad = function () {
                var e = new s.Vector3, t = [];
                return function (i, n, r, o, a, s, l, h) {
                    if (!i)throw new U("Player.checkAndWaitForTiledPanoLoad() -> Cannot load texture for null pano.");
                    if (e.copy(A.FORWARD), this.getDirection(e), i.isLoaded(n))return !1;
                    var c = n + ":" + i.id;
                    return t[c] || (t[c] = !0, s && this.model.waitForLoad(i, function () {
                        return i.isLoaded(n)
                    }), i.loadTiledPano(n, e, null, l, h).done(function (e, i) {
                        t[c] = !1, r && r(e, i)
                    }.bind(this)).fail(function (e) {
                        t[c] = !1, o && o(e)
                    }.bind(this)).progress(function (e, t, i) {
                        a && a(e, t, i)
                    }.bind(this))), !0
                }
            }(), n.prototype.switchCameraMode = function (e, t) {
                var i = this.controls[e], n = i.camera;
                switch (e) {
                    case v.PANORAMA:
                        n.position.copy(this.currentPano.position);
                        var r = t ? A.FORWARD.clone().applyQuaternion(t) : this.getDirection().setY(0).normalize();
                        i.lookAt(r.add(n.position));
                        break;
                    case v.DOLLHOUSE:
                        var o = this.position.clone();
                        this.mode === v.PANORAMA ? o.add(new s.Vector3(0, 6, 0)).add(this.getDirection().multiplyScalar(-10)) : o.add(A.DOWN.clone().applyQuaternion(this.quaternion).multiplyScalar(6)).setY(6), n.position.copy(o), i.target.copy(this.target.clone().setY(this.model.center.y));
                        break;
                    case v.FLOORPLAN:
                        n.position.copy(this.model.center).setY(10), i.target.copy(this.model.center).setY(0), i.zoomToContain(this.model.size), i.rotateToView(this.model.size, this.getDirection())
                }
                i.update(0)
            }, n.prototype.update = function () {
                var e = (new s.Vector3, {}), t = [];
                return function (i) {
                    this.updateFromControls(i), this.getCurrentNodePanos(t), this.hasChanged(e) && (this.lastChangeTime = Date.now(), !this.mouseDown && this.containsMouse && this.updateIntersect(), this.model.supportsTiles && this.updateTileDownloader(t), this.emit(B.ViewChanged)), this.panoRenderer.hasQueuedTiles() && this.model.supportsTiles && this.updatePanoRenderer(t), this.updatePreRendering(t), this.reticule.update(), this.path.update(), this.spider.update(), this.cachedPanoCandidates && C.navigation.panoScores && this.model.panos.showPanoScores(this.cachedPanoCandidates), this.updateControlLocks()
                }
            }(), n.prototype.updateControlLocks = function () {
                this.currentPano && this.model.supportsTiles && (this.controls[v.PANORAMA].locked = !this.currentPano.highestFullTileRenderOpCompleted && this.currentPano.lockUntilRenderingComplete)
            }, n.prototype.updatePanoRenderer = function () {
                var e = new s.Vector3;
                return function (t) {
                    var i = this.nextPano || this.currentPano;
                    i && (e.copy(A.FORWARD), this.getDirection(e), this.panoRenderer.updateDirection(e))
                }
            }(), n.prototype.cleanupInactivePanos = function () {
                var e = [], t = [];
                return function () {
                    e.length = 0, e.push(this.currentPano), this.nextPano && e.push(this.nextPano), t.length = 0;
                    for (var i = 0; i < this.panoRenderer.activePanos.length; i++)t.push(this.panoRenderer.activePanos[i]);
                    for (var n = 0; n < t.length; n++) {
                        for (var r = t[n], o = !0, a = 0; a < e.length; a++)r.id === e[a].id && (o = !1);
                        o && r.exit()
                    }
                }
            }(), n.prototype.updatePreRendering = function () {
                var e = {};
                return function (t) {
                    if (1 === C.tiling.preRenderTourPanos && this.preRenderingEnabled) {
                        var i = this.nextPano || this.currentPano;
                        if (i && t && t.length > 1) {
                            var n = t.findIndex(function (e) {
                                return e.id === i.id ? !0 : void 0
                            });
                            if (n >= 0 && n + 1 < t.length) {
                                var r = t[n + 1];
                                r.isLoaded(this.basePanoSize) || e[r.id] || (window.setTimeout(function (t) {
                                    this.checkAndWaitForPanoLoad(t, "high", "low", this.basePanoSize, null, null, null, !1, !1, !1), window.setTimeout(function (t) {
                                        e[t.id] = !1
                                    }.bind(this, t), C.tiling.panoPreRenderRepeatDelay)
                                }.bind(this, r), C.tiling.panoPreRenderDelay), e[r.id] = !0)
                            }
                        }
                    }
                }
            }(), n.prototype.enablePreRendering = function () {
                this.preRenderingEnabled = !0
            }, n.prototype.disablePreRendering = function () {
                this.preRenderingEnabled = !1, this.cleanupInactivePanos()
            }, n.prototype.updateTileDownloader = function () {
                var e = new s.Vector3;
                return function (t) {
                    var i = this.nextPano || this.currentPano;
                    i && (e.copy(A.FORWARD), this.getDirection(e), this.tileDownloader.tilePrioritizer.updateCriteria(i, this.position, e, t.length > 0 ? t : null), this.tileDownloader.processPriorityQueue = !0)
                }
            }(), n.prototype.updateFromControls = function (e) {
                (null === e || void 0 === e) && (e = 0), this.control && (this.control.update(e), this.quaternion.copy(this.control.camera.quaternion), this.position.copy(this.control.camera.position), this.target.copy(this.control.target), this.control.camera.updateProjectionMatrix(), this.camera.projectionMatrix.copy(this.control.camera.projectionMatrix)), this.camera.position.copy(this.position), this.camera.quaternion.copy(this.quaternion), this.camera.updateMatrix(), this.camera.updateMatrixWorld()
            }, n.prototype.hasChanged = function (e) {
                if (!this.previousState)return this.previousState = {
                    position: this.position.clone(),
                    quaternion: this.quaternion.clone(),
                    mouse: this.mouse.clone(),
                    zoom: this.getZoom(),
                    currentFloor: this.model.currentFloor,
                    projectionMatrix: this.camera.projectionMatrix.clone(),
                    worldMatrix: this.camera.matrixWorld.clone(),
                    mode: this.mode,
                    modelPosition: this.model.position.clone(),
                    modelCenter: this.model.center.clone()
                }, !0;
                var t = this.position.equals(this.previousState.position) && this.quaternion.equals(this.previousState.quaternion) && this.mouse.equals(this.previousState.mouse) && this.getZoom() === this.previousState.zoom && this.model.currentFloor === this.previousState.currentFloor && this.camera.projectionMatrix.equals(this.previousState.projectionMatrix) && this.camera.matrixWorld.equals(this.previousState.worldMatrix) && this.mode === this.previousState.mode && this.model.position.equals(this.previousState.modelPosition) && this.model.center.equals(this.previousState.modelCenter) && null !== this.nextPano;
                return e.moved = !this.position.equals(this.previousState.position), e.rotated = !this.quaternion.equals(this.previousState.quaternion), e.mouseMoved = !this.mouse.equals(this.previousState.mouse), e.zoomed = this.getZoom() !== this.previousState.zoom, e.floorChanged = this.model.currentFloor !== this.previousState.currentFloor, e.cameraProjectionChanged = !this.camera.projectionMatrix.equals(this.previousState.projectionMatrix), e.cameraWorldMatrixChanged = !this.camera.matrixWorld.equals(this.previousState.worldMatrix), e.modeChanged = this.mode !== this.previousState.mode, e.modelPositionChanged = !this.model.position.equals(this.previousState.modelPosition), e.modelCenterChanged = !this.model.center.equals(this.previousState.modelCenter), e.nextPanoActive = null !== this.nextPano, this.previousState.position.copy(this.position), this.previousState.quaternion.copy(this.quaternion), this.previousState.mouse.copy(this.mouse), this.previousState.zoom = this.getZoom(), this.previousState.currentFloor = this.model.currentFloor, this.previousState.projectionMatrix.copy(this.camera.projectionMatrix), this.previousState.worldMatrix.copy(this.camera.matrixWorld), this.previousState.mode = this.mode, this.previousState.modelPosition.copy(this.model.position), this.previousState.modelCenter.copy(this.model.center), !t
            }, n.prototype.updateIntersect = function () {
                var e = this.flying || this.isWarping(), t = this.isInMode(v.DOLLHOUSE, v.FLOORPLAN) && this.controls[this.mode].isEngaged(), i = !(e || t || this.isTouchEvent || E.isRunning(this.lookTransition));
                this.mattertagManager.intersectMattertag(this.mouse, i, this.camera) || (this.intersect = this.getMouseIntersect(), this.intersect && this.updateClosestPano(this.intersect), this.closestPano || this.closestPanoInDirection(this.getMouseDirection()) ? (this.reticule.updatePosition(this.position, this.intersect), C.navigation.panoScores && !C.navigation.mouseDirection && this.closestPanoInDirection(this.getDirection())) : this.reticule.hide())
            }, n.prototype.getMouseDirection = function (e) {
                e = e || this.mouse;
                var t = new s.Vector3(e.x, e.y, -1).unproject(this.camera), i = new s.Vector3(e.x, e.y, 1).unproject(this.camera);
                return i.sub(t).normalize()
            }, n.prototype.getMouseIntersect = function (e, t) {
                e = e || this.mouse.clone(), t = t || this.model.floors.reduce(function (e, t) {
                        return t.hidden ? e : e.concat(t.collider.children)
                    }, this.mode === v.PANORAMA ? this.panoMarkers : []);
                var i = new s.Vector3(e.x, e.y, -1).unproject(this.camera);
                this.raycaster.set(i, this.getMouseDirection(e));
                var n = this.raycaster.intersectObjects(t);
                if (0 === n.length)return null;
                var r = n[0];
                if (r.face) {
                    r.normal = r.face.normal.applyQuaternion(r.object.quaternion);
                    var o = this.position.clone().sub(r.point);
                    o.dot(r.normal) < 0 && r.normal.negate(), this.currentPano ? r.onFloor = r.point.y < this.position.y - .5 * this.currentPano.height : r.onFloor = r.point.y < this.position.y - .5, r.horizontal = r.normal.y > .8
                }
                return r
            }, n.prototype.updateClosestPano = function (e) {
                var t = [p.filters.isPanoAligned()];
                this.mode === v.PANORAMA ? (t.push(p.filters.not(this.currentPano)), t.push(p.filters.inFloorDirection(this.currentPano.floorPosition, this.getDirection(), .25)), t.push(p.filters.isNeighbourPanoTo(this.currentPano)), t.push(p.filters.isCloseEnoughTo(e.point, C.panoFloorClickRadius)), t.push(p.filters.isNotBehindNormal(e.point, e.normal))) : (t.push(p.filters.isOnVisibleFloor()), this.mode !== v.FLOORPLAN && t.push(p.filters.inDirection(this.position, this.getDirection(), .25)));
                var i = this.model.panos.find(t, [p.sortFunctions.floorDistanceToPoint(e.point)]);
                i != this.closestPano && (this.emit(B.ClosestPanoChanging, this.closestPano, i, this.mode), this.closestPano = i)
            }, n.prototype.dollhouseMode = function (e, t) {
                this.emit(B.ModeChanging, this.mode, v.DOLLHOUSE), this.mode = v.DOLLHOUSE, this.controls[v.DOLLHOUSE].reset();
                var i = new s.Vector3(this.model.center.x, 0, this.model.center.z), n = new s.Vector3(15, 10, 15);
                if (e && t) {
                    var r = A.FORWARD.clone().applyQuaternion(t), o = this.model.center.clone().sub(e), a = o.dot(r);
                    a > 0 ? (i = r.clone().multiplyScalar(a).add(e), n.copy(e)) : G.warn("Tried to initiate dollhouse mode that wasn't looking at the model", e, t)
                }
                this.controls[v.DOLLHOUSE].resetRanges(0, !0), this.controls[v.DOLLHOUSE].target.copy(i), this.cameras[v.DOLLHOUSE].position.copy(n), this.updateFromControls(), this.model.alpha = 1, this.model.skybox.material.uniforms.opacity.value = 0
            }, n.prototype.insideMode = function (e, t) {
                var i = t || null;
                if (this.mode !== v.PANORAMA && this.mode !== v.TRANSITIONING) {
                    var n = [p.filters.isPanoAligned()];
                    this.model.currentFloor && n.push(p.filters.atFloor(this.model.currentFloor)), e = e || this.currentPano || this.model.panos.find(n, [p.sortFunctions.distanceToPoint(this.control.target)]), this.flyToNewMode({
                        mode: v.PANORAMA,
                        pano: e,
                        callback: i
                    })
                }
            }, n.prototype.fitDollhouse = function (e, t, i) {
                var n = A.FORWARD.clone().applyQuaternion(i);
                this.control.target.copy(n).add(e);
                var r = A.RIGHT.clone().applyQuaternion(i), o = A.UP.clone(), a = r.clone().applyAxisAngle(o, Math.PI / 2), l = this.model.boundingBox.max.clone(), h = this.model.boundingBox.min.clone(), c = [new s.Vector3(l.x, 0, l.z).sub(e), new s.Vector3(l.x, 0, h.z).sub(e), new s.Vector3(h.x, 0, l.z).sub(e), new s.Vector3(h.x, 0, h.z).sub(e)], u = 0, d = 0, p = 0;
                c.forEach(function (e, t, i) {
                    var n = Math.abs(e.dot(r)), o = e.dot(a);
                    n > u && (u = n, d = o), o > p && (p = o)
                });
                var f = Math.max(Math.abs(new s.Vector3(0, l.y, 0).sub(e).dot(o)), Math.abs(new s.Vector3(0, h.y, 0).sub(e).dot(o))), g = t.clone().add(a.clone().multiplyScalar(d)), m = t.clone().add(a.clone().multiplyScalar(p));
                d = u / Math.tan(this.control.camera.fov / 2 * this.control.camera.aspect * (Math.PI / 180)), p = f / Math.tan(this.control.camera.fov / 2 * (Math.PI / 180)), d = Math.max(d, 10), p = Math.max(p, 10);
                var v = t.clone().sub(g.clone().add(n.clone().multiplyScalar(-d))).length(), y = t.clone().sub(g.clone().add(n.clone().multiplyScalar(-p))).length();
                this.control.maxDistance = C.skyboxRadius - 1, v >= y ? this.control.camera.position.set(0, 6, 0).add(g).add(n.multiplyScalar(1.1 * -d)) : this.control.camera.position.set(0, 6, 0).add(m).add(n.multiplyScalar(1.1 * -p))
            }, n.prototype.floorplanMode = function () {
                this.emit(B.ModeChanging, this.mode, v.FLOORPLAN), this.mode = v.FLOORPLAN;
                var e = this.cameras[v.FLOORPLAN], t = this.controls[v.FLOORPLAN];
                if (t.reset(), this.model.heroImage && this.model.heroImage.metadata) {
                    t.target.copy(this.model.heroImage.metadata.camera_position).setY(0), e.position.copy(t.target).setY(10);
                    var i = this.model.heroImage.metadata.camera_quaternion, n = A.LEFT.clone().applyQuaternion(i);
                    t.rotateLeft(-Math.atan2(n.x, n.z)), t.currentScale = this.model.heroImage.metadata.ortho_zoom / 4 / (window.innerWidth / window.innerHeight), t.absoluteScale = t.currentScale, t.update()
                } else {
                    G.info("no floorplan metadata");
                    var r = new s.Vector3(this.model.center.x, 0, this.model.center.z), o = new s.Vector3(this.model.center.x, 10, this.model.center.z);
                    t.target.copy(r), e.position.copy(o)
                }
                this.model.alpha = 1, this.model.skybox.material.uniforms.opacity.value = 0, this.model.toggleStartFloors()
            }, n.prototype.nonInterruptingFlyToPano = function (e, t) {
                return e.skipWarpingCheck = !0, this.flyToPano(e, t)
            }, n.prototype.flyToPano = function (e, t) {
                var i = e.pano, n = e.lookAtPoint, r = e.duration, o = e.maxDistanceOverride, a = e.skipWarpingCheck, l = e.constantMoveSpeed, h = null;
                if (this.isWarping() && !a) {
                    if (this.path.activeTransType === k.BLACK)return G.warn("Player.flyToPano() -> Cannot fly when warping"), t && t(), !1;
                    h = I.deepExtend(e), h.skipWarpingCheck = !0;
                    var c = this.flyToPano.bind(this, h, null);
                    return this.emit(B.WarpInterruptedWithFlyTo, this.path.activeTransType, c), t && t(), !1
                }
                if (this.updateLastView(), this.mode !== v.PANORAMA)return void this.flyToNewMode({
                    mode: v.PANORAMA,
                    pano: i,
                    callback: t
                });
                if (i) {
                    h = I.deepExtend(e);
                    var u = this.flyToPano.bind(this, h, t);
                    if (this.checkAndWaitForPanoLoad(i, "high", "low", this.basePanoSize, u))return
                }
                var d = function (e) {
                    t && t(e)
                }.bind(this);
                this.currentPano || (this.currentPano = i, this.path.placeCpm(), this.path.fadeOutCpm(C.path.fadeOutTime), this.spider.draw());
                var p = r;
                if ("number" != typeof r) {
                    var f = o || C.transition.flytimeMaxDistanceThreshold;
                    p = Math.min(this.currentPano.position.distanceTo(i.position), f) * C.transition.flytimeDistanceMultiplier + C.transition.flyTime
                }
                if (C.transition.flySpeed > .01 && (p = 1e3 * this.currentPano.position.distanceTo(i.position) / C.transition.flySpeed), n) {
                    E.cancel(this.lookTransition), p *= C.transition.aimSlowFactor;
                    var g = this.control.camera.quaternion.clone(), m = (new s.Matrix4).lookAt(i.position, n, new s.Vector3(0, 1, 0)), y = (new s.Quaternion).setFromRotationMatrix(m), b = g.clone(), M = new s.Vector3;
                    if (i === this.currentPano) {
                        var T = A.FORWARD.clone().applyQuaternion(g), S = A.FORWARD.clone().applyQuaternion(y), P = T.angleTo(S), _ = 1 * Math.sqrt(P) / C.mattertags.navigate.rotateSpeedFactor * 1e3;
                        return void(this.lookTransition = E.start(function (e) {
                            b.copy(g), w.quaternion(b, y)(e), M.set(0, 0, -1).applyQuaternion(b).add(this.control.camera.position), this.control.lookAt(M)
                        }.bind(this), _, d, 0, x[C.transition.movementEasing]))
                    }
                }
                if (i === this.currentPano || this.flying)return void d();
                this.flying = !0;
                var L = this.position.clone(), D = this.currentPano;
                G.debug("Flying to pano ", i.position), this.emit(B.PanoChosen, this.currentPano, i), this.emit(B.FlyingStarted, i.position, L, i, D);
                var R = [];
                n && (this.lookTransition = E.start(function (e) {
                    b.copy(g), w.quaternion(b, y)(e), M.set(0, 0, -1).applyQuaternion(b).add(this.control.camera.position), this.control.lookAt(M)
                }.bind(this), p, null, 0, x[C.transition.movementEasing]), R.push(this.lookTransition));
                var O = l ? null : x[C.transition.movementEasing];
                this.nextPano = i, R.push(E.start(w.uniform(this.model.skybox, "progress", 1), p, null, 0, x[C.transition.blendEasing], "skyFly")), R.push(E.start(w.allUniforms(this.model.chunks, "progress", 1), p, null, 0, x[C.transition.blendEasing], "chunkFly")), R.push(E.start(w.vector(this.cameras[v.PANORAMA].position, i.position), p, function (e) {
                    this.flying = !1, this.currentPano.exit(), i.enter(), this.currentPano = i, this.nextPano = null, this.path.placeCpm(), this.path.fadeOutCpm(C.path.fadeOutTime), this.spider.draw(), this.emit(B.FlyingEnded, i.position, L, i, D), this.activeTransitions[H.FlyToPano] = null, d(e)
                }.bind(this), 0, O, "camFly")), this.activeTransitions[H.FlyToPano] = R
            }, n.prototype.fastForwardActivePanoFlight = function (e) {
                e = e || C.transition.fastForwardFactor / 10 * 4 + 1;
                for (var t = this.activeTransitions[H.FlyToPano], i = 0; i < t.length; i++)E.adjustSpeed(t[i], e)
            }, n.prototype.flyToPanoClosestToMouse = function () {
                if (Date.now() - this.mouseLastMoveTime > 50 && (this.intersect = this.getMouseIntersect(), this.intersect && this.updateClosestPano(this.intersect)), this.closestPano)return this.flyToPano({pano: this.closestPano});
                var e = this.getMouseDirection();
                this.flyDirection(e) || this.flyToPano({pano: this.currentPano})
            }, n.prototype.flyLocalDirection = function (e) {
                var t = this.getDirection(e), i = 1 === e.z ? .4 : .75, n = 1 === Math.abs(e.x);
                this.flyDirection(t, i, n)
            }, n.prototype.flyDirection = function (e, t, i) {
                this.history.invalidate();
                var n = this.closestPanoInDirection(e, t, i);
                return n ? (this.flyToPano({pano: n}), !0) : (this.bump(e), !1)
            }, n.prototype.closestPanoInDirection = function (e, t, i) {
                return this.rankedPanoInDirection(0, e, t, i)
            }, n.prototype.rankedPanoInDirection = function () {
                var e = {pano: null, candidates: []};
                return function (t, i, n, r) {
                    t || (t = 0), n = void 0 !== n ? n : .75;
                    var o = r ? "angle" : "direction";
                    return this.model.panos.findRankedByScore(t, [p.filters.isPanoAligned(), p.filters.inPanoDirection(this.position, i, n), p.filters.isNeighbourPanoTo(this.currentPano), p.filters.not(this.currentPano)], [p.scoreFunctions.distanceSquared(this.currentPano), p.scoreFunctions[o](this.position, i)], e), this.cachedPanoCandidates = e.candidates, e.pano
                }
            }(), n.prototype.bump = function (e) {
                if (this.mode === v.PANORAMA && !this.flying && !this.isWarping()) {
                    var t, i, n, r = C.transition, o = (r.flytimeMaxDistanceThreshold * r.flytimeDistanceMultiplier + r.flyTime) / 8, a = this.camera.getWorldDirection().dot(e), s = Math.abs(a) > .5;
                    if (s)t = function () {
                        E.start(w.property(this.cameras[v.PANORAMA], "zoom", a > 0 ? 1.04 : .96), o, i, 0, x.easeInOutSine, "bumpZStart")
                    }.bind(this), i = function () {
                        E.start(w.property(this.cameras[v.PANORAMA], "zoom", 1), 5 * o, n, 0, x.easeInOutSine, "bumpZRelax")
                    }.bind(this); else {
                        var l = this.camera.position.clone(), h = e.clone();
                        this.raycaster.set(l, h);
                        var c = this.model.floors.reduce(function (e, t) {
                            return e.concat(t.collider.children)
                        }, []), u = this.raycaster.intersectObjects(c), d = u.length > 0 ? u[0].distance / 25 : .04, p = l.clone().add(h.multiplyScalar(d));
                        t = function () {
                            E.start(w.vector(this.cameras[v.PANORAMA].position, p), o, i, 0, x.easeInOutSine, "bumpTStart")
                        }.bind(this), i = function () {
                            E.start(w.vector(this.cameras[v.PANORAMA].position, l), 5 * o, n, 0, x.easeInOutSine, "bumpTRelax")
                        }.bind(this)
                    }
                    n = function () {
                        this.flying = !1
                    }.bind(this), this.flying = !0, t()
                }
            }, n.prototype.changeFloor = function (e, t) {
                var i = this.controls[this.mode];
                if (i && i.emit(O.Move, t), t && this.controls[v.PANORAMA].emit(O.InteractionGui, "floor-control"), this.mode !== v.PANORAMA || !this.currentPano || this.currentPano.isAligned())if (this.mode === v.PANORAMA) {
                    var n = this.history.reversePano(e);
                    n && n.isAligned() ? this.flyToPano({pano: n}) : this.changeFloorByScore(e)
                } else this.model.setFloor(this.model.nextFloor(e) || this.model.currentFloor)
            }, n.prototype.changeFloorByScore = function () {
                var e = {pano: null, candidates: []};
                return function (t) {
                    var i = this.model.nextFloor(t);
                    return i ? (this.model.panos.lowestByScore([p.filters.atFloor(i), p.filters.isPanoAligned()], [p.scoreFunctions.distance(this.currentPano), p.scoreFunctions.direction(this.position, new s.Vector3(0, t, 0)), p.scoreFunctions.penalizeHeightDifferenceUnder(this.position, .5)], e), void(e.pano ? (this.cachedPanoCandidates = e.candidates, this.history.push(t, this.currentPano), this.flyToPano({pano: e.pano})) : G.warn("No pano found on selected floor, not moving there."))) : void G.debug("player.changeFloor(" + t + "): no such floor")
                }
            }(), n.prototype.gotoFloor = function (e, t) {
                var i = e - this.model.currentFloor.floorIndex;
                this.changeFloor(i, t)
            }, n.prototype.getDirection = function (e) {
                return e = e ? e : (new s.Vector3).copy(A.FORWARD), e.applyQuaternion(this.camera.quaternion)
            }, n.prototype.flyToSameMode = function (e, t, i, n) {
                if (this.mode === v.TRANSITIONING)return G.warn("should not be transitioning here"), void(n && n(!1));
                var r = i || !1, o = i ? i.position : this.position, a = this.position.clone(), l = this.currentPano;
                if (G.debug("New pose in mode " + this.mode), e) {
                    var h = this.flyToSameMode.bind(this, e, t, i, n);
                    if (this.checkAndWaitForPanoLoad(e, "high", "low", this.basePanoSize, h))return
                }
                var c = function () {
                    this.emit(B.FlyingEnded, o, a, e, l), n && n(!0)
                }.bind(this), u = C[this.mode], d = void 0 !== t ? t : u.transitionTime, p = new s.Vector3, f = new s.Vector3, g = [];
                if (this.emit(B.FlyingStarted, o, a, e, l), this.mode === v.PANORAMA)G.warn("we should not be here for panorama views"), g.push(E.start(function () {
                }, d, function () {
                    this.mode = v.PANORAMA, c()
                }.bind(this), 0, null, "waitPanoDone")); else if (this.mode === v.DOLLHOUSE)if (r) {
                    var m = new s.Vector3(0, 1, 0);
                    this.controls[v.DOLLHOUSE].resetRanges(1, !0), this.model.warpDestFloors(i), f.copy(i.position);
                    var A = new s.Vector3(0, 0, -1).applyQuaternion(i.quaternion), y = new s.Raycaster(f.clone(), A.clone(), 0, 1 / 0), I = y.intersectObjects(this.model.colliders), b = 3;
                    I.length ? (p.copy(I[0].point), b = .75 * f.distanceTo(p)) : (p.copy(A).multiplyScalar(3).add(f), G.debug("Tried to restore dollhouse mode that did not intersect...", i.position, i.quaternion));
                    var M = (new s.Matrix4).lookAt(f, p, m), T = (new s.Euler).setFromRotationMatrix(M, C.warp.eOrder), S = p.distanceTo(f), P = (new s.Matrix4).lookAt(this.cameras[v.DOLLHOUSE].position, this.controls[v.DOLLHOUSE].target, m), _ = (new s.Euler).setFromRotationMatrix(P, C.warp.eOrder), L = this.cameras[v.DOLLHOUSE].position.distanceTo(this.controls[v.DOLLHOUSE].target);
                    this.controls[v.DOLLHOUSE].resetRanges(Math.min(L, b), !0);
                    var D = new s.Euler(T.x - _.x, T.y - _.y, T.z - _.z, C.warp.eOrder);
                    D.y = D.y > Math.PI ? D.y -= 2 * Math.PI : D.y < -Math.PI ? D.y += 2 * Math.PI : D.y, this.path.burnsDir = Math.sign(D.y);
                    var R = new s.Euler(0, 0, 0, C.warp.eOrder), O = new s.Vector3;
                    g.push(E.start(w.vector(this.controls[v.DOLLHOUSE].target, p), d, null, C.flydown.movementDelay, x[C.flydown.movementEasing])), g.push(E.start(function (e, t) {
                        R.x = _.x + e * D.x, R.y = _.y + e * D.y, R.z = _.z + e * D.z;
                        var i = L + e * (S - L);
                        O.set(0, 0, i).applyEuler(R).add(this.controls[v.DOLLHOUSE].target), this.cameras[v.DOLLHOUSE].position.copy(O).add(this.model.position)
                    }.bind(this), d, null, C.flydown.movementDelay, x[C.flydown.movementEasing])), g.push(E.start(function (e, t) {
                        this.controls[v.DOLLHOUSE].update(), this.quaternion.copy(this.cameras[v.DOLLHOUSE].quaternion), this.position.copy(this.cameras[v.DOLLHOUSE].position)
                    }.bind(this), d, null, C.flydown.movementDelay, x[C.flydown.movementEasing])), g.push(E.start(function () {
                    }, d, function () {
                        this.mode = v.DOLLHOUSE, c()
                    }.bind(this)))
                } else G.warn("invalid warp destination in flyToSameMode()? ignore it then"); else if (this.path.placeCpm(), this.path.fadeInCpm(C.path.fadeInTime), i) {
                    this.model.warpDestFloors(i);
                    var F = this.cameras[v.FLOORPLAN], k = this.controls[v.FLOORPLAN], N = k.target.clone(), U = i.position.clone().sub(N), V = F.position.clone().sub(k.target), z = V.length(), H = new s.Vector3(-1, 0, 0).applyQuaternion(i.quaternion).normalize(), j = Math.atan2(k.offset.x, k.offset.z), W = Math.atan2(H.x, H.z), Y = k.absoluteScale, X = i.orthoZoom / 4 / (window.innerWidth / window.innerHeight);
                    g.push(E.start(function (e, t) {
                        k.target.copy(U).multiplyScalar(e).add(N);
                        var i = j + (W - j) * e;
                        k.offset.x = z * Math.sin(i), k.offset.z = z * Math.cos(i), F.position.copy(k.target).add(k.offset), k.absoluteScale = Y + e * (X - Y), k.update(), this.quaternion.copy(F.quaternion), this.position.copy(F.position), this.target.copy(k.target), this.camera.projectionMatrix.copy(F.projectionMatrix)
                    }.bind(this), d, null, 0, x[C.flydown.movementEasing])), g.push(E.start(function () {
                    }, d, function () {
                        this.mode = v.FLOORPLAN, c()
                    }.bind(this)))
                } else G.info("flyToSameMode() funny floorplan view? skipping");
                this.mode = v.TRANSITIONING
            }, n.prototype.flyToNewMode = function (e) {
                function t(e, t) {
                    return e === v.PANORAMA && t && !t.isAligned()
                }

                function i(e) {
                    return e === v.DOLLHOUSE || e === v.FLOORPLAN
                }

                e = e || {};
                var n = e.mode, r = e.pano, o = e.duration, a = e.warpDest, l = e.callback, h = e.force, c = e.quaternion;
                if (this.isWarping())return G.warn("Player.flyToNewMode() -> Cannot fly when warping"), void(l && l(!1));
                if (this.mode === v.TRANSITIONING)return void(l && l(!1));
                if (n === this.mode)return h ? void this.flyToSameMode(r, o, a, l) : void(l && l(!1));
                var u = a || !1;
                G.debug("Switching mode to " + n);
                var d = this.flyToNewMode.bind(this, e);
                if (!r || !this.checkAndWaitForPanoLoad(r, "low", "low", this.basePanoSize, d)) {
                    if (!this.model.meshTexturesLoaded && (n === v.DOLLHOUSE || n === v.FLOORPLAN))return G.info("Waiting for model textures to be loaded before going out to dollhouse"), this.model.waitForLoad(this.model, function () {
                        return this.model.meshTexturesLoaded
                    }.bind(this)), void this.model.loadMeshTextures().done(d);
                    this.history.invalidate(), this.updateLastView();
                    var p = this.mode, f = this.cameras[n];
                    e = I.deepExtend({}, C[n], C[p + "-" + n]);
                    var g = void 0 !== o ? o : e.transitionTime;
                    this.emit(B.ModeChanging, p, n), r && (this.currentPano = r), this.switchCameraMode(n, c), E.cancel(this.lookTransition);
                    var m = (new s.Vector3).copy(this.position);
                    if (n === v.PANORAMA)this.emit(B.PanoChosen, r, r), setTimeout(function () {
                        r.floor.enter(n)
                    }.bind(this), g / 2), this.path.fadeOutCpm(C.path.fadeOutTime); else if (n === v.DOLLHOUSE) {
                        if (u && (this.model.stayPut = !0), a ? (this.controls[v.DOLLHOUSE].resetRanges(1, !0), this.model.warpDestFloors(a)) : this.model.toggleAllFloors(!0), this.path.placeCpm(), this.path.fadeInCpm(C.path.fadeInTime), u) {
                            var A = new s.Vector3(this.model.center.x, 0, this.model.center.z);
                            m.set(15, 10, 15);
                            var y = new s.Vector3(0, 0, -1).applyQuaternion(a.quaternion), b = new s.Raycaster(a.position.clone(), y.clone(), 0, 1 / 0), M = b.intersectObjects([this.sceneIntersectionPlane]);
                            M.length ? (A.copy(M[0].point), m.copy(a.position), this.controls[v.DOLLHOUSE].resetRanges(.75 * m.distanceTo(A), !0)) : (G.warn("Tried to restore dollhouse mode that did not intersect...", a.position, a.quaternion), this.controls[v.DOLLHOUSE].resetRanges(3, !0)), this.controls[v.DOLLHOUSE].target.copy(A), m.add(this.model.position), f.position.copy(m), this.controls[v.DOLLHOUSE].update()
                        }
                    } else if (this.path.placeCpm(), this.path.fadeInCpm(C.path.fadeInTime), a) {
                        this.model.warpDestFloors(a);
                        var T = this.cameras[v.FLOORPLAN], S = this.controls[v.FLOORPLAN], P = T.position.clone().sub(S.target), _ = new s.Vector3(-1, 0, 0).applyQuaternion(a.quaternion).normalize(), L = Math.atan2(_.x, _.z);
                        S.target.copy(a.position);
                        var O = P.length();
                        S.offset.x = O * Math.sin(L), S.offset.y = 0, S.offset.z = O * Math.cos(L), T.position.copy(S.target).add(S.offset);
                        S.target.clone().sub(f.position);
                        f.quaternion.copy(a.quaternion), S.currentScale = a.orthoZoom / 4 / (window.innerWidth / window.innerHeight), S.absoluteScale = S.currentScale, S.update()
                    } else this.model.currentFloor.enter(n);
                    var F = this.currentPano, N = this.position.clone();
                    this.emit(B.FlyingStarted, m, N, r, this.currentPano), this.flying = !0;
                    var U = [];
                    i(n) && t(p, F) ? (u || n !== v.DOLLHOUSE || (f.position.set(15, 10, 15), f.controls.target.set(this.model.center.x, 0, this.model.center.z), f.controls.update()), this.fade360View(f, e)) : i(p) && t(n, r) ? (u && this.switchCameraMode(n, u.quaternion), this.mode = n, this.path && this.path.popOutCpm(), this.fade360View(f, e)) : (U.push(E.start(w.property(this.model, "alpha", e.modelAlpha, null), g * e.modelAlphaLength, null, e.modelAlphaDelay)), U.push(E.start(w.vector(this.position, f.position), g, null, C.flydown.movementDelay, x[C.flydown.movementEasing])), U.push(E.start(w.quaternion(this.quaternion, f.quaternion), g * e.rotationDuration, null, e.rotationDelay, x[C.flydown.rotationEasing])), U.push(E.start(w.matrix4(this.camera.projectionMatrix, f.projectionMatrix), g * e.cameraMatrixDuration, null, e.cameraMatrixDelay, e.cameraMatrixEase)), U.push(E.start(w.uniform(this.model.skybox, "opacity", e.skyboxOpacity), g * e.skyboxOpacityLength, null, e.skyboxOpacityDelay)), U.push(E.start(w.property(this.reticule.material.uniforms.opacity, "value", 0), g))), U.push(E.start(function () {
                    }, g, function () {
                        this.flying = !1, p === v.PANORAMA && n !== v.PANORAMA ? this.currentPano.exit() : p !== v.PANORAMA && n === v.PANORAMA && (this.currentPano.enter(), this.path.placeCpm(), this.path.fadeOutCpm(C.path.fadeOutTime), this.spider.draw()), p === v.DOLLHOUSE && this.controls[v.DOLLHOUSE].resetRanges(), this.mode = n, this.emit(B.FlyingEnded, m, N, this.currentPano, F), u && p !== v.PANORAMA && n === v.PANORAMA ? this.startWarp(R.Retain, D.Retain, k.BLACK, null, null, l) : l && l()
                    }.bind(this))), this.mode = v.TRANSITIONING
                }
            }, n.prototype.fade360View = function (e, t) {
                var i = C.show360Views.transitionTime;
                $(this.domElement).fadeOut(.5 * i, function () {
                    this.model.skybox.material.uniforms.opacity.value = t.skyboxOpacity, this.model.alpha = t.modelAlpha, this.position.copy(e.position), this.quaternion.copy(e.quaternion), this.camera.projectionMatrix.copy(e.projectionMatrix), $(this.domElement).fadeIn(.5 * i)
                }.bind(this))
            }, n.prototype.findDefaultViews = function () {
                this.findDefaultView(this.lastInsideView, !0), this.findDefaultView(this.last360View, !1)
            }, n.prototype.findDefaultView = function (e, t) {
                var i, n = this.model.heroLocations, r = this.model.panos, o = n.findIndex(function (e) {
                    if (e.cameraMode !== v.PANORAMA)return !1;
                    var i = r.get(e.panoId);
                    return i && i.isAligned() === t
                });
                o >= 0 ? (i = r.get(n[o].panoId), e.update({
                    cameraMode: v.PANORAMA,
                    pano: i,
                    position: n[o].position,
                    quaternion: n[o].quaternion
                })) : (o = r.list.findIndex(function (e) {
                    return e.isAligned() === t
                }), o >= 0 ? (i = r.list[o], e.update({
                    cameraMode: v.PANORAMA,
                    pano: i,
                    position: i.position
                })) : G.warn("There are no", t ? "inside" : "360º", "views in this model"))
            }, n.prototype.updateLastView = function () {
                if (this.mode === v.PANORAMA) {
                    var e = this.currentPano.isAligned() ? this.lastInsideView : this.last360View;
                    e.update({pano: this.currentPano, position: this.position, quaternion: this.quaternion})
                }
            }, n.prototype.goToLastView = function (e) {
                var t = e ? this.lastInsideView : this.last360View;
                this.isInMode(v.PANORAMA) && this.currentPano.isAligned() !== e && this.updateLastView(), this.isInMode(v.PANORAMA) ? (this.path && this.path.popOutCpm(), this.fadeToView(e, t, C.show360Views.transitionTime)) : this.isInMode(v.DOLLHOUSE, v.FLOORPLAN) && this.flyToNewMode({
                    mode: t.cameraMode,
                    pano: t.pano,
                    quaternion: t.quaternion
                })
            }, n.prototype.fadeToView = function (e, t, i) {
                if (!t.isValid() || t.cameraMode === v.PANORAMA && !t.pano)return G.warn("Tried to fade to an illegal view", t.cameraMode), !1;
                var n = C[t.cameraMode];
                $(this.domElement).fadeOut(.5 * i, function () {
                    this.currentPano = t.pano, this.emit(B.PanoChosen, this.currentPano, this.currentPano), this.mode = t.cameraMode, this.switchCameraMode(t.cameraMode, t.quaternion), this.model.skybox.material.uniforms.opacity.value = n.skyboxOpacity,
                        this.model.alpha = n.modelAlpha, this.position.copy(t.position), this.quaternion.copy(t.quaternion), this.camera.projectionMatrix.copy(this.cameras[this.mode].projectionMatrix), this.model.fadePanoMarkers(e ? C.panorama.markerOpacity : 0), $(this.domElement).fadeIn(.5 * i, function () {
                        this.currentPano.enter()
                    }.bind(this))
                }.bind(this))
            }, n.prototype.startWarp = function (e, t, i, n, r, o) {
                return this.control && (this.control.enabled = !1), this.flying ? (G.warn("Player.startWarp() -> Cannot warp when flying"), o && o(), !1) : (this.emit(B.WarpStarted, i, n, r), (null === e || void 0 === e) && (e = R.Show), this.history.invalidate(), e != R.Retain ? this.path.brushToWarpPano(i, k.BLACK) || (i = k.BLACK) : i = this.path.upcomingTransType, n = n || N.MIDDLE, this.path.warpToPano(i, n, r, function () {
                    t === D.Slow ? this.path.discardSlow() : t === D.Standard && this.path.discardPathObject(), this.emit(B.WarpEnded, i), this.control && (this.control.enabled = !0), o && o()
                }.bind(this)), e === R.Hide && this.path.discardPathObject(), !0)
            }, n.prototype.warpToPanoById = function (e, t, i, n, r, o, a, s) {
                return this.path.setWarpDestinationByPanoId(e, t) ? this.startWarp(i, n, r, o, a, s) : (G.warn("Player.warpToPanoById() -> Could not setWarpDestinationByPanoId()"), s && s(), !1)
            }, n.prototype.warpToPanoByHeroIndex = function (e, t, i, n, r, o, a) {
                return this.path.setWarpDestinationByHeroIndex(e) ? this.startWarp(t, i, n, r, o, a) : (G.warn("Player.warpToPanoByHeroIndex() -> Could not setWarpDestinationByHeroIndex()"), a && a(), !1)
            }, n.prototype.warpToPano = function (e, t, i, n, r, o, a, s) {
                return this.warpToPanoById(e.id, t, i, n, r, o, a, s)
            }, n.prototype.warpToNonPanoByHeroIndex = function (e, t) {
                return this.path.setWarpDestinationByHeroIndex(e) ? (this.path.warpToNonPano(t), !0) : (G.warn("Player.warpToNonPanoByHeroIndex() -> Could not setWarpDestinationByHeroIndex()"), t && t(), !1)
            }, n.prototype.aimTourCamera = function (e, t, i, n) {
                return G.debug("player.aimTourCamera(" + e + ") calling warpToPanoByHeroIndex(" + e + ")"), this.warpToPanoByHeroIndex(e, t, i, null, null, null, n)
            }, n.prototype.showPathToHeroLocation = function (e) {
                this.path.setWarpDestinationByHeroIndex(e) && this.path.brushToWarpPano(k.STD, k.BLACK)
            }, n.prototype.tourInterlude = function (e, t) {
                this.history.invalidate(), this.path.discardSlow(), this.path.waitNextStep(e, function () {
                    t && t()
                }.bind(this))
            }, n.prototype.stopInterlude = function () {
                this.interruptAndFastForward(null, 0)
            }, n.prototype.interruptAndFastForward = function (e, t) {
                this.isWarping() && this.emit(B.WarpInterrupted, this.path.activeTransType, e, t), this.flying && this.emit(B.FlyingInterrupted), this.path.interruptAndFastForward(e, t)
            }, n.prototype.isInMode = function () {
                for (var e = 0; e < arguments.length; e++)if (this.mode === arguments[e])return !0;
                return !1
            }, n.prototype.serialize = function () {
                return [v.toInt(this.mode), this.currentPano ? this.currentPano.id : "", this.position.x.toFixed(4), this.position.y.toFixed(4), this.position.z.toFixed(4), this.quaternion.x.toFixed(4), this.quaternion.y.toFixed(4), this.quaternion.z.toFixed(4), this.quaternion.w.toFixed(4)].join(",")
            }, n.prototype.setSize = function (e, t) {
                var i = e / t;
                for (var n in this.cameras)this.cameras[n].updateAspect(i)
            }, n.prototype.getCurrentNodePanos = function (e) {
                this.model.panos.map;
                if (e.length = 0, this.path.nodes)for (var t = 0; t < this.path.nodes.length; t++) {
                    var i = this.path.nodes[t];
                    e.push(this.model.panos.get(i))
                }
            }, t.exports = n
        }).call(this, "/js/player.js")
    }, {
        "./cameras/DollhouseCamera": 5,
        "./cameras/FloorplanCamera": 6,
        "./cameras/PanoramaCamera": 7,
        "./controls/DollhouseControls": 9,
        "./controls/FloorplanControls": 10,
        "./controls/PanoramaControls": 12,
        "./enum/AlignmentType": 15,
        "./enum/BlackoutStyle": 16,
        "./enum/ControlEvents": 18,
        "./enum/Keys": 23,
        "./enum/ModelManagerEvents": 26,
        "./enum/PanoSizeClass": 28,
        "./enum/PanoramaEvents": 29,
        "./enum/PathDiscardMode": 30,
        "./enum/PathDisplayMode": 31,
        "./enum/PlayerEvents": 32,
        "./enum/TagStates": 35,
        "./enum/Vectors": 41,
        "./enum/Viewmode": 42,
        "./enum/WarpStyle": 43,
        "./exception/BasicException": 44,
        "./model/ModelManager": 103,
        "./objects/NSpider": 110,
        "./objects/Panorama": 111,
        "./objects/Reticule": 112,
        "./objects/ShowPath": 114,
        "./objects/Snapshot": 116,
        "./objects/View": 117,
        "./settings": 123,
        "./shaders": 124,
        "./tile/TileDownloader": 128,
        "./tile/TilePrioritizer": 130,
        "./util/browser": 139,
        "./util/camera": 140,
        "./util/common": 142,
        "./util/easing": 143,
        "./util/history": 144,
        "./util/lerp": 145,
        "./util/logger": 146,
        "./util/math": 147,
        "./util/transitions": 152,
        events: 160,
        three: 175
    }],
    119: [function (e, t, i) {
        "use strict";
        !function () {
            if ("performance" in window == !1 && (window.performance = {}), Date.now = Date.now || function () {
                        return (new Date).getTime()
                    }, "now" in window.performance == !1) {
                var e = Date.now();
                performance.timing && performance.timing.navigationStart && (e = performance.timing.navigationStart), window.performance.now = function () {
                    return Date.now() - e
                }
            }
        }();
        var n = n || {};
        !function (e) {
            var t = 0, i = {Message: 0, Response: 1}, n = function (t) {
                var i = t.origin || t.originalEvent.origin;
                e.receiveMessage(i, t.data, t.source)
            }, r = function (e, t, i, n) {
                var r = {uid: e, message: t, type: i, waitForResponse: n};
                return r
            }, o = {}, a = {}, s = null;
            window.addEventListener("message", n, !1), e.setReceiver = function (e) {
                s = e
            }, e.sendMessage = function (e, n, a, s) {
                var l = t++;
                if (s) {
                    var h = {targetWindow: e, uid: l, timestamp: performance.now(), onResponse: s};
                    o[l] = h
                }
                var c = r(l, a, i.Message, s ? !0 : !1);
                e.postMessage(c, n)
            }, e.receiveMessage = function (e, t, n) {
                if (t) {
                    if (t.type === i.Message && t.waitForResponse) {
                        var r = {uid: t.uid, timestamp: performance.now(), sourceWindow: n};
                        a[t.uid] = r
                    }
                    if (t.type === i.Response) {
                        var l = t.uid, h = o[l];
                        o[l] = null, h.onResponse && h.onResponse(t.message)
                    }
                }
                s && s(e, t.message, t.uid)
            }, e.respondToMessage = function (e, t) {
                var n = a[e];
                if (n && n.sourceWindow) {
                    var o = r(e, t, i.Response, !1);
                    n.sourceWindow.postMessage(o, "*"), a[o.uid] = null
                }
            }
        }(n), "undefined" != typeof t && (t.exports = n)
    }, {}],
    120: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t) {
                this.model = e, this.panos = e.panos, this.player = t, this.imagePanos = this.listImagePanos(), this.retryMinimumTime = 1e4
            }

            var r = (e("three"), e("./enum/Viewmode")), o = (e("./settings"), e("./objects/Panorama")), a = e("./util/logger"), s = new a(i);
            n.prototype.start = function () {
                this.loadNextPano(function (e) {
                    e ? this.start() : (s.debug("No suitable pano loaded, waiting a little while before looking again"), setTimeout(function () {
                        this.start()
                    }.bind(this), 1e3))
                }.bind(this))
            }, n.prototype.validLoadTarget = function (e) {
                return e && !e.isLoaded("high") && Date.now() - e.failedLoadingAt > this.retryMinimumTime
            }, n.prototype.listImagePanos = function () {
                var e = [], t = this;
                return this.model.images.forEach(function (i) {
                    if (i.metadata && i.metadata.scan_id) {
                        var n = t.model.panos.get(i.metadata.scan_id);
                        n && !n.isLoaded("high") && e.push(n)
                    }
                }), e
            }, n.prototype.nextNotLoadedImage = function () {
                for (; this.imagePanos.length > 0;) {
                    var e = this.imagePanos[0];
                    if (!e.isLoaded("high"))return e;
                    this.imagePanos.shift()
                }
                return null
            }, n.prototype.loadNextPano = function (e) {
                var t, i, n = this.model.waitQueue.filter(function (e) {
                    return e.object instanceof o
                });
                n.length > 0 ? (t = n[0].object, s.debug("Overrode pano selection: Flying to an unloaded pano " + t.id)) : this.validLoadTarget(this.player.currentPano) ? (t = this.player.currentPano, s.debug("Overrode pano selection: Currently at an unloaded pano " + t.id)) : this.validLoadTarget(this.player.closestPano) ? (t = this.player.closestPano, s.debug("Overrode pano selection: Hovering over an unloaded pano " + t.id)) : this.validLoadTarget(this.nextNotLoadedImage()) ? (i = "high", t = this.imagePanos[0], s.debug("Overrode pano selection: Highlight image " + t.id)) : this.player.mode === r.PANORAMA && (t = this.panos.lowestByScore([this.validLoadTarget.bind(this), o.filters.isNeighbourPanoTo(this.player.currentPano)], [o.scoreFunctions.distance(this.player.currentPano), o.scoreFunctions.direction(this.player.position, this.player.getDirection()), o.scoreFunctions.inFieldOfView(this.player.position, this.player.getDirection())]), t ? s.debug("Normal pano selection: neighbor " + t.id) : (t = this.panos.lowestByScore([this.validLoadTarget.bind(this), o.filters.isNeighbourOfNeighbourTo(this.player.currentPano)], [o.scoreFunctions.distance(this.player.currentPano), o.scoreFunctions.direction(this.player.position, this.player.getDirection()), o.scoreFunctions.inFieldOfView(this.player.position, this.player.getDirection())]), t && (i = "high", s.debug("Normal pano selection: neighbor of neighbor " + t.id)))), t ? (i = i || t.isLoaded("low") ? "high" : "low", s.debug("Preloading " + i + "-res pano " + t.id), t.loadCube(i).done(e).fail(function () {
                    s.warn("Failed preloading pano", t.id, ", marking it as failed and forgetting it for a while"), e()
                })) : e && e(null)
            }, t.exports = n
        }).call(this, "/js/preloaders.js")
    }, {"./enum/Viewmode": 42, "./objects/Panorama": 111, "./settings": 123, "./util/logger": 146, three: 175}],
    121: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t, i, n) {
                this.qualityManager = e, this.scene = t, this.camera = i, this.container = n, this.quickstartCamera = new h, this.controls = new c(this.quickstartCamera), this.controls.bindEvents(n), this.controls.enabled = !0, this.controls.locked = !0, this.skybox = null
            }

            var r = e("three"), o = e("../util/logger"), a = (e("../constants"), e("../enum/Vectors")), s = e("../enum/PanoSizeClass"), l = (e("../materials/ModelTextureMaterial"), e("../materials/CubemapMaterial")), h = e("../cameras/PanoramaCamera"), c = e("../controls/PanoramaControls"), u = (e("../tile/TileUtils"), e("../util/camera"), e("../util/cameraLight")), d = new o(i);
            n.prototype.load = function (e) {
                e.pano.shouldRedrawOnBaseLoaded = !0;
                var t, i, n = this, r = a.FORWARD.clone().applyQuaternion(e.quaternion), o = r.clone().negate();
                this.controls.lookAt(r.add(this.quickstartCamera.position));
                var l = this.qualityManager.getPanoSize(s.BASE), h = this.qualityManager.getPanoSize(s.STANDARD);
                if (e.pano.tiled) {
                    d.warn("Loading startPano, TILED", e.pano.id), e.pano.update();
                    var c = u.getHFOVForCamera(this.quickstartCamera, window.innerWidth, window.innerHeight);
                    c = c > this.quickstartCamera.fov ? c : this.quickstartCamera.fov, d.warn("Quickstart loading tiles in FOV: " + c), t = e.pano.loadTiledPano(h, r, c, !1, !1, !0), i = e.pano.loadTiledPano(l, o, 360, !1, !1, !0)
                } else d.warn("Loading startPano", e.pano.id), t = e.pano.loadCube("high");
                return $.when(t).then(function () {
                    n.init(e.pano, e.quaternion), e.pano.tiled ? i.done(function () {
                        e.pano.lockUntilRenderingComplete = !1, this.controls.locked = !1
                    }.bind(this)) : this.controls.locked = !1
                }.bind(this))
            }, n.prototype.init = function (e, t) {
                d.info("Quickstart done loading, adding scene objects"), e.lockUntilRenderingComplete = !0, this.skybox = new r.Mesh(new r.CubeGeometry(1, 1, 1), new l({side: r.BackSide})), this.skybox.material.uniforms.map.value = e.skybox, this.skybox.quaternion.copy(e.quaternion), this.scene.add(this.skybox), $(this.container).show()
            }, n.prototype.update = function (e) {
                this.controls.update(e), this.camera.copy(this.quickstartCamera)
            }, n.prototype.setSize = function (e, t) {
                this.quickstartCamera.updateAspect(e / t)
            }, n.prototype.destroy = function () {
                this.scene.remove(this.skybox)
            }, t.exports = n
        }).call(this, "/js/scene/QuickstartManager.js")
    }, {
        "../cameras/PanoramaCamera": 7,
        "../constants": 8,
        "../controls/PanoramaControls": 12,
        "../enum/PanoSizeClass": 28,
        "../enum/Vectors": 41,
        "../materials/CubemapMaterial": 94,
        "../materials/ModelTextureMaterial": 95,
        "../tile/TileUtils": 132,
        "../util/camera": 140,
        "../util/cameraLight": 141,
        "../util/logger": 146,
        three: 175
    }],
    122: [function (e, t, i) {
        "use strict";
        function n(e, t, i, n) {
            this.scene = e, this.camera = t, this.renderer = i, this.effects = n, this.animateCallback = null, this.composer = new r.EffectComposer(this.renderer), this.composer.addPass(new r.RenderPass(this.scene, this.camera)), this.qualityManager = null, e.renderWidth = 0, e.renderHeight = 0, this.updateClock = new r.Clock, this.components = [], this.updateListeners = [], this.resizeListeners = [], this.forceUpdateSize = !1, this.started = !1
        }

        var r = e("three"), o = e("../enum/SceneRendererEvents"), a = e("../exception/BasicException"), s = e("events").EventEmitter;
        window.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame, n.prototype = Object.create(s.prototype), n.prototype.addComponent = function (e) {
            this.components.push(e), e.update && this.updateListeners.push(e), e.setSize && (this.resizeListeners.push(e), this.forceUpdateSize = !0)
        }, n.prototype.removeComponent = function (e) {
            var t = function (t) {
                return t != e
            };
            this.components = this.components.filter(t), this.updateListeners = this.updateListeners.filter(t), this.resizeListeners = this.resizeListeners.filter(t)
        }, n.prototype.start = function () {
            if (this.started)throw new a("Can't start SceneRenderer, already started");
            this.started = !0, (l = l.bind(this))()
        }, n.prototype.setSize = function (e, t) {
            this.renderWidth = e, this.renderHeight = t, this.effects.aspect = e / t, this.renderer.setSize(e, t), this.composer.setSize(e, t);
            for (var i = 0; i < this.resizeListeners.length; i++)this.resizeListeners[i].setSize(e, t)
        }, n.prototype.render = function () {
            this.effects.currentBlur > 0 ? this.composer.render() : this.renderer.render(this.scene, this.camera)
        }, n.prototype.updateScreenSize = function () {
            (window.innerWidth != this.renderWidth || window.innerHeight != this.renderHeight || this.forceUpdateSize) && (this.setSize(window.innerWidth, window.innerHeight), this.forceUpdateSize = !1)
        }, n.prototype.updateComponents = function () {
            for (var e = Math.min(1, this.updateClock.getDelta()), t = 0; t < this.updateListeners.length; t++)this.updateListeners[t].update(e)
        };
        var l = function () {
            window.requestAnimationFrame(l), this.updateScreenSize(), this.updateComponents(), this.render(), this.emit(o.AfterRender)
        };
        n.prototype.getImageData = function () {
            var e = document.createElement("canvas"), t = e.getContext("2d");
            return function (i, n, r) {
                return (e.width != n || e.height != r) && (e.width = n, e.height = r), t.drawImage(i, 0, 0, n, r), t.getImageData(0, 0, n, r)
            }
        }(), n.prototype.initSizedTexture2D = function (e, t, i) {
            var n = this.renderer, o = n.context, a = n.state, s = new r.Texture(null);
            s.flipY = !1, i !== !0 && (i = !1), s.generateMipmaps = i;
            var l = n.paramThreeToGL(s.format), h = n.paramThreeToGL(s.type), c = n.properties.get(s), u = o.createTexture();
            a.bindTexture(o.TEXTURE_2D, u), o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL, s.flipY), o.texImage2D(o.TEXTURE_2D, 0, l, e, e, 0, l, h, null), s.wrapS = t, s.wrapT = t;
            var d = n.paramThreeToGL(t);
            return o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_S, d), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_T, d), i ? (s.magFilter = r.LinearFilter, s.minFilter = r.LinearMipMapLinearFilter, o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, o.LINEAR), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, o.LINEAR_MIPMAP_NEAREST), o.generateMipmap(o.TEXTURE_2D)) : (s.magFilter = r.LinearFilter, s.minFilter = r.LinearFilter, o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, o.LINEAR), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, o.LINEAR)), a.bindTexture(o.TEXTURE_2D, null), c.__webglTexture = u, s
        }, n.prototype.initSizedCubeMap = function (e, t) {
            var i = this.renderer, n = i.context, o = i.state, a = new r.CubeTexture([null, null, null, null, null, null]);
            a.flipY = !1, a.generateMipmaps = t;
            var s = i.paramThreeToGL(a.format), l = i.paramThreeToGL(a.type), h = i.properties.get(a), c = n.createTexture();
            o.bindTexture(n.TEXTURE_CUBE_MAP, c), n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL, a.flipY);
            for (var u = 0; 6 > u; u++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X + u, 0, s, e, e, 0, s, l, null);
            return t ? (a.magFilter = r.LinearFilter, a.minFilter = r.LinearMipMapLinearFilter, n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_MAG_FILTER, n.LINEAR), n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_MIN_FILTER, n.LINEAR_MIPMAP_LINEAR), n.texParameteri(n.TEXTURE_CUBE_MAP, n.GENERATE_MIPMAP, n.TRUE), n.generateMipmap(n.TEXTURE_CUBE_MAP)) : (a.magFilter = r.LinearFilter, a.minFilter = r.LinearFilter, n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_MAG_FILTER, n.LINEAR), n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_MIN_FILTER, n.LINEAR)), o.bindTexture(n.TEXTURE_CUBE_MAP, null), h.__image__webglTextureCube = c, a
        }, n.prototype.uploadTexture2D = function (e, t, i, n, r, o) {
            var a = this.renderer, s = a.context, l = a.state, h = a.properties.get(t);
            l.bindTexture(s.TEXTURE_2D, h.__webglTexture), s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL, t.flipY), s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultiplyAlpha), s.pixelStorei(s.UNPACK_ALIGNMENT, t.unpackAlignment), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_WRAP_S, a.paramThreeToGL(t.wrapS)), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_WRAP_T, a.paramThreeToGL(t.wrapT)), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_MAG_FILTER, a.paramThreeToGL(t.magFilter)), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_MIN_FILTER, a.paramThreeToGL(t.minFilter)), s.texSubImage2D(s.TEXTURE_2D, 0, i, n, s.RGBA, s.UNSIGNED_BYTE, e), t.generateMipmaps && s.generateMipmap(s.TEXTURE_2D), l.bindTexture(s.TEXTURE_2D, null)
        }, n.prototype.uploadTexture3D = function (e, t, i, n, r, o, a) {
            var s = this.renderer, l = s.context, h = s.state, c = s.properties.get(t);
            h.bindTexture(l.TEXTURE_CUBE_MAP, c.__image__webglTextureCube), l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL, t.flipY), l.texSubImage2D(r, 0, i, n, l.RGBA, l.UNSIGNED_BYTE, e), t.generateMipmaps && l.generateMipmap(l.TEXTURE_CUBE_MAP), h.bindTexture(l.TEXTURE_CUBE_MAP, null)
        }, n.prototype.rebuildMipMaps2D = function (e) {
            var t = this.renderer, i = t.context, n = t.state;
            t.properties.get(e);
            i.generateMipmap(i.TEXTURE_2D), n.bindTexture(i.TEXTURE_2D, null)
        }, n.prototype.rebuildMipMaps3D = function (e) {
            var t = this.renderer, i = t.context, n = t.state, r = t.properties.get(e);
            n.bindTexture(i.TEXTURE_CUBE_MAP, r.__image__webglTextureCube), i.generateMipmap(i.TEXTURE_CUBE_MAP), n.bindTexture(i.TEXTURE_CUBE_MAP, null)
        }, n.prototype.renderToCubeMap = function () {
            var e = !1, t = null, i = null, n = null, o = null, a = null;
            return function (s, l, h, c, u, d, p, f, g, m, v, A, y, C, I, b) {
                var w = this.renderer;
                w.context;
                if (!e) {
                    var x = 1;
                    i = new r.OrthographicCamera(x / -2, x / 2, x / 2, x / -2, -200, 200), i.position.z = 150, t = new r.Scene, t.add(i);
                    var E = ["varying vec2 vUv; ", "void main() { ", " vUv = uv; ", " vec4 pos = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", " gl_Position = pos; ", "}"].join("\n"), M = ["varying vec2 vUv;", "uniform float alpha;", "uniform sampler2D tDiffuse;", "void main() {", "  vec4 texColor = texture2D( tDiffuse, vec2(vUv.x, vUv.y) );", "  gl_FragColor = vec4(texColor.rgb, texColor.a * alpha);", "}"].join("\n");
                    n = new r.ShaderMaterial({
                        uniforms: {
                            tDiffuse: {type: "t", value: null},
                            alpha: {type: "f", value: 1}
                        }, vertexShader: E, fragmentShader: M, depthWrite: !1, depthTest: !1, side: r.DoubleSide
                    }), o = new r.PlaneBufferGeometry(x, x);
                    o.getAttribute("position");
                    a = new r.Mesh(o, n), a.position.z = 0, t.add(a), e = !0
                }
                var T = o.getAttribute("uv"), S = T, P = u / h, _ = d / c, L = p / h, D = f / c;
                S[0] = P, S[1] = _ + D, S[2] = P + L, S[3] = _ + D, S[4] = P, S[5] = _, S[6] = P + L, S[7] = _;
                this.renderer.properties.get(s);
                n.uniforms.tDiffuse.value = s, n.blending = C || r.NoBlending, n.transparent = I ? !0 : !1, (void 0 === b || null === b) && (b = 1), n.uniforms.alpha.value = b, n.needUpdate = !0, l.activeCubeFace = y, l.viewport.set(g, m, v, A), this.renderer.render(t, i, l, !1)
            }
        }(), n.prototype.renderSolidTileToCubeMap = function () {
            var e = !1, t = null, i = null, n = null, o = null, a = null;
            return function (s, l, h, c, u, d, p, f, g, m) {
                var v = this.renderer;
                v.context;
                if (!e) {
                    var A = 1;
                    i = new r.OrthographicCamera(A / -2, A / 2, A / 2, A / -2, -200, 200), i.position.z = 150, t = new r.Scene, t.add(i);
                    var y = ["void main() { ", " vec4 pos = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", " gl_Position = pos; ", "}"].join("\n"), C = ["uniform vec4 blockColor;", "uniform float alpha;", "void main() {", "  gl_FragColor = vec4(blockColor.rgb, alpha);", "}"].join("\n");
                    n = new r.ShaderMaterial({
                        uniforms: {
                            blockColor: {type: "v4", value: null},
                            alpha: {type: "f", value: 1}
                        }, vertexShader: y, fragmentShader: C, depthWrite: !1, depthTest: !1, side: r.DoubleSide
                    }), o = new r.PlaneBufferGeometry(A, A);
                    o.getAttribute("position");
                    a = new r.Mesh(o, n), a.position.z = 0, t.add(a), e = !0
                }
                n.uniforms.blockColor.value = p, (void 0 === m || null === m) && (m = 1), n.uniforms.alpha.value = m, n.blending = f || r.NoBlending, n.transparent = g ? !0 : !1, n.needUpdate = !0, s.activeCubeFace = d, s.viewport.set(l, h, c, u), this.renderer.render(t, i, s, !1)
            }
        }(), t.exports = n
    }, {"../enum/SceneRendererEvents": 34, "../exception/BasicException": 44, events: 160, three: 175}],
    123: [function (e, t, i) {
        "use strict";
        var n = e("three"), r = e("./util/browser"), o = e("./enum/Viewmode"), a = e("./enum/VROption"), s = e("./enum/Colors"), l = e("./enum/WarpStyle"), h = e("./util/easing"), c = e("./util/common"), u = e("./util/showcase"), d = e("./constants"), p = {
            brand: r.valueFromHash("brand", !0),
            debug: !1,
            version: "2.8.7-0-gece9a22",
            pageTitle: "Matterport 3D Showcase",
            authorizationHeader: u.getAuthorizationHeader(),
            autoplay: r.valueFromHash("play", !1) || !r.inIframe(),
            autohelp: r.valueFromHash("help", null),
            logLevel: r.valueFromHash("log", 2),
            skyboxRadius: 250,
            modelBoundsPadding: 5,
            showNeighbors: !1,
            hideHighlights: r.valueFromHash("hhl", !1),
            startHighlights: r.valueFromHash("hl", !1),
            specialEdition: r.valueFromHash("bn", 0),
            useWheel: r.valueFromHash("wh", !0),
            navTagsEnabled: r.valueFromHash("op", !1),
            crossOrigin: "anonymous",
            fancierTransition: !1,
            wireframe: !1,
            skyboxWireframe: !1,
            modelAlpha: 1,
            highlightPanoSelection: !1,
            showSweeps: !0,
            showSkyboxes: !1,
            showMesh: !0,
            showFloors: !1,
            showFloorDuration: 300,
            showFloorDelay: 300,
            hideFloorDuration: 300,
            hideFloorDelay: 0,
            reticuleOpacityTransitionTime: 250,
            reticuleColor: s.newBlue,
            markerOpacityTransitionTime: 500,
            guiAnimationSpeed: 250,
            highlightAnimationDuration: 500,
            modelComponentLoadSpinnerDelay: 150,
            captureErrors: !1,
            maxMobileTextures: 10,
            startupFlyinDelay: 3e3,
            dollhouseDefault: {
                minDistance: 15,
                maxDistance: 50,
                minPolarAngle: n.Math.degToRad(10),
                maxPolarAngle: n.Math.degToRad(90)
            },
            hideReticuleTimeout: 1e3,
            analytics: {
                inactivityThreshold: 30,
                sessionTrackingRate: .15,
                maxTrackedErrors: 20,
                sessionDurationPingFrequency: 10,
                sessionDurationTimeout: 15
            },
            flydown: {
                movementEasing: "easeInOutQuad",
                movementDelay: .001,
                rotationEasing: "easeInOutQuad",
                rotationDelay: .5,
                modelTextureDelay: .75,
                skyboxDelay: .75
            },
            transition: {
                flySpeed: .01,
                flyTime: 750,
                flytimeMaxDistanceThreshold: 5,
                flytimeDistanceMultiplier: 150,
                aimTime: 1500,
                aimSlowFactor: 1.5,
                blur: .8,
                movementEasing: "easeInOutQuad",
                blendEasing: "easeInOutQuad",
                fastForwardFactor: 3
            },
            show360Views: {enabled: !0, transitionTime: 1e3},
            vr: {enabled: !1, option: r.valueFromHash("vr", a.CONTEXTUAL)},
            labels: {
                enabled: !1,
                hideUntilStart: !0,
                fadeInDuration: 250,
                fadeInDelay: 250,
                fadeOutDuration: 250,
                fadeOutDelay: 0,
                zoomHideThreshhold: {mobile: r.isSmallScreen() ? .45 : .6, desktop: 2},
                zoomTruncateThreshhold: {mobile: r.isSmallScreen() ? .35 : .45, desktop: .85},
                minLengthForTruncate: 16,
                truncateLength: 12,
                truncateSuffix: "..."
            },
            mattertags: {
                enabled: !0,
                enableLinking: !0,
                linkDestination: r.valueFromHash("nt", ""),
                startup: {hideUntilStart: !0, fadeInDuration: 500, fadeInDelay: 100},
                visibility: {
                    anyDistance: !0,
                    visibleDistance: 8,
                    cameraClearance: .1,
                    alphaTestLevel: .05,
                    hideViaFloor: !0,
                    hideOffScreenDisc: !1,
                    hideOffScreenObject: !1
                },
                disc: {
                    opacity: .9,
                    disabledOpacity: .5,
                    scale: {
                        nearBound: 1.5,
                        farBound: 4.8,
                        linkFarBound: !1,
                        linkPercent: 40,
                        maxSize: 80,
                        minSize: 40,
                        baseViewportSize: 800,
                        responsiveness: 100
                    }
                },
                pole: {enabled: !0, height: .5, width: 2, opacity: .5, color: "white"},
                animation: {hoverOnClosing: !1, animInDelay: 100, animOutDelay: 50, animInTime: 200, animOutTime: 100},
                boardScale: {billboardScale: 1, scaleToDisc: !0, boardToDiscRatio: 1.2},
                navigate: {
                    nearestPano: !0,
                    lineOfSight: !0,
                    reactivate: !0,
                    aimAt: "disc",
                    tiltTolerance: 25,
                    rotateSpeedFactor: .6
                }
            },
            path: {
                color: s.newBlue,
                colorUp: s._desat(s.newBlue, .5),
                colorDown: s._darken(s.newBlue, .35),
                opacity: .5,
                style: "ribbon",
                height: .025,
                ribbonWidth: .24,
                outsideHeight: .5,
                waypointRadius: .5,
                waypointIndoorRadius: .24,
                waypointPulse: 1e3,
                typ: l.BLACK,
                meshFree: r.valueFromHash("mf", 0),
                mapGuides: r.valueFromHash("guides", !0),
                fadeInTime: 400,
                fadeOutTime: 300
            },
            warp: {
                nearPanoDist: .1,
                matchCam: !1,
                blur: .33,
                fastTime: 1500,
                teleportTime: 1500,
                outsideTime: 2e3,
                lookAheadMax: .3,
                lookAheadDist: 2.5,
                softPushDist: .37,
                softPushEnd: .3,
                softBendAngle: 8,
                softBendTilt: 4,
                softBendEnd: .3,
                doBurns: r.valueFromHash("kb", !0),
                burnsAngle: 15,
                minBurnsAngle: 6,
                minDownAngle: -35,
                maxTurnPerSec: 280,
                maxAimPerSec: 45,
                minRotation: 12,
                maxAimRotation: 33.2,
                turnFriction: .2,
                flySpeed: .01,
                minWarpTime: 1200,
                warpInterruptionRedirectTime: 500,
                tourStepDelay: r.valueFromHash("st", 5e3),
                walkDelay: 0,
                walkMaxDist: 50,
                walkSlideShowThreshhold: 3e3,
                walkExtraPanosDistance: .4,
                timePerMeter: 800,
                motionLeadTime: 500,
                movementEasing: "easeInOutQuad",
                blendEasing: "easeInOutQuad",
                showBunny: !1,
                loop: r.valueFromHash("lp", !1),
                auto: r.valueFromHash("ts", -1),
                eOrder: "YXZ",
                stepFactor: .25,
                brakeStrength: 2,
                minBrakeAngle: .1,
                maxBrakeAngle: 1.8,
                climbEffort: 4
            },
            rotationFriction: .09,
            rotationAccelerationInside: 4.5,
            rotationAccelerationOutside: .15,
            rotationAfterMoveMultiplier: 30,
            rotationAfterMoveHistoryCount: 5,
            panFriction: .09,
            panAccelerationOutside: 60,
            onload: r.valueFromHash("onload", o.PANORAMA),
            zoomNearLimit: .1,
            zoomFarLimit: 10,
            navigation: {
                panoScores: !1,
                mouseDirection: !0,
                filterStrictness: .75,
                angleFactor: -30,
                directionFactor: 10,
                distanceFactor: -1,
                optionalityFactor: 3
            },
            secretPanelWord: [38, 38, 40, 40, 37, 39, 37, 39, 66, 65],
            console: r.valueFromHash("console", !1),
            noMeshFloorPositionOffset: new n.Vector3(0, -1.2, 0),
            panoramaNeighbourMaxDistance: 5,
            panoFloorClickRadius: .35,
            showScreenshotLocations: !1,
            showAxis: !1,
            showNeighbourRaycasts: !1,
            colorMarkerOnLoad: !1,
            colorMarkerByFloor: !1,
            tiling: {
                panoPreRenderRepeatDelay: 2500,
                panoPreRenderDelay: 500,
                preRenderTourPanos: r.valueFromHash("tileprerender", 0),
                allTilingParameterNames: ["usetiles", "tiles", "maxtileq", "tileoverlay", "tileupdelay", "itiledelay", "maxtpf", "tilecustcomp", "tileprerender"],
                tilingFlagNames: ["usetiles", "tiles"],
                maxPanoQuality: r.valueFromHash("maxtileq", 1024),
                overlayStyle: r.valueFromHash("tileoverlay", 0),
                uploadIntervalDelay: r.valueFromHash("tileupdelay", 10),
                initialIntervalDelay: r.valueFromHash("itiledelay", 0),
                maxUploadsPerFrame: r.valueFromHash("maxtpf", 1),
                customCompression: r.valueFromHash("tilecustcomp", 0)
            }
        };
        p = c.deepExtend(p, d, {
            panorama: {
                transitionTime: 1e3,
                modelAlpha: 0,
                modelAlphaDelay: p.flydown.modelTextureDelay,
                modelAlphaLength: 1,
                skyboxOpacity: 1,
                skyboxOpacityDelay: p.flydown.skyboxDelay,
                skyboxOpacityLength: .9,
                fovLength: 1,
                fovDelay: 0,
                cameraMatrixDuration: .8,
                cameraMatrixDelay: 0,
                cameraMatrixEase: h.easeInCubic,
                reticuleOpacity: 1,
                markerOpacity: .3,
                markerOpacityOnHover: 1
            },
            dollhouse: {
                transitionTime: 1e3,
                modelAlpha: 1,
                modelAlphaDelay: 0,
                modelAlphaLength: 1 - p.flydown.modelTextureDelay,
                skyboxOpacity: 0,
                skyboxOpacityDelay: 0,
                skyboxOpacityLength: 1 - p.flydown.skyboxDelay,
                fovLength: 1,
                fovDelay: 0,
                cameraMatrixDuration: .8,
                cameraMatrixDelay: .3,
                cameraMatrixEase: h.easeInCubic,
                reticuleOpacity: 1,
                markerOpacity: 0,
                markerOpacityOnHover: 0
            },
            floorplan: {
                transitionTime: 1e3,
                modelAlpha: 1,
                modelAlphaDelay: 0,
                modelAlphaLength: 1 - p.flydown.modelTextureDelay,
                skyboxOpacity: 0,
                skyboxOpacityDelay: 0,
                skyboxOpacityLength: 1 - p.flydown.skyboxDelay,
                fovLength: 1,
                fovDelay: 0,
                cameraMatrixDuration: .5,
                cameraMatrixDelay: 0,
                cameraMatrixEase: h.easeOutCubic,
                reticuleOpacity: 1,
                markerOpacity: 0,
                markerOpacityOnHover: 0
            },
            transitioning: {reticuleOpacity: 0},
            "floorplan-dollhouse": {rotationDelay: 0, rotationDuration: 1},
            "floorplan-panorama": {rotationDelay: .5, rotationDuration: 1},
            "dollhouse-panorama": {rotationDelay: .5, rotationDuration: 1},
            "dollhouse-floorplan": {
                rotationDelay: 0,
                rotationDuration: 1,
                cameraMatrixDuration: 1.05,
                cameraMatrixDelay: .5
            },
            "panorama-dollhouse": {rotationDelay: 0, rotationDuration: .5},
            "panorama-floorplan": {transitionTime: 1500, rotationDelay: 0, rotationDuration: .5}
        }), p.warp.auto >= 0 && (p.autohelp = 0), p.path.meshFree && (p.path.typ = l.WALK), t.exports = p
    }, {
        "./constants": 8,
        "./enum/Colors": 17,
        "./enum/VROption": 38,
        "./enum/Viewmode": 42,
        "./enum/WarpStyle": 43,
        "./util/browser": 139,
        "./util/common": 142,
        "./util/easing": 143,
        "./util/showcase": 150,
        three: 175
    }],
    124: [function (e, t, i) {
        "use strict";
        var n = e("three"), r = e("./settings"), o = "precision highp float;\nprecision highp int;\n\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n", a = "precision highp float;\nprecision highp int;\n\nuniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n";
        t.exports = {
            cube: {
                uniforms: {map: {type: "t", value: null}, opacity: {type: "f", value: 1}},
                vertexShader: o + "varying vec3 vWorldPosition;\n\nvoid main() {\n  vWorldPosition = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",
                fragmentShader: a + "uniform samplerCube map;\nuniform float opacity;\n\nvarying vec3 vWorldPosition;\n\nvoid main() {\n  vec4 color = textureCube( map, vec3( -vWorldPosition.x, vWorldPosition.yz ) );\n  gl_FragColor = vec4(color.rgb, opacity);\n}\n"
            },
            model: {
                uniforms: {
                    map: {type: "t", value: null},
                    modelAlpha: {type: "f", value: r.modelAlpha},
                    opacity: {type: "f", value: 1},
                    progress: {type: "f", value: 0},
                    blackout: {type: "i", value: 0},
                    pano0Map: {type: "t", value: null},
                    pano0Position: {type: "v3", value: new n.Vector3},
                    pano0Matrix: {type: "m4", value: new n.Matrix4},
                    pano1Map: {type: "t", value: null},
                    pano1Position: {type: "v3", value: new n.Vector3},
                    pano1Matrix: {type: "m4", value: new n.Matrix4}
                },
                vertexShader: o + "uniform vec3 pano0Position;\nuniform mat4 pano0Matrix;\n\nuniform vec3 pano1Position;\nuniform mat4 pano1Matrix;\n\nvarying vec2 vUv;\nvarying vec3 vWorldPosition0;\nvarying vec3 vWorldPosition1;\n\nvoid main() {\n\n  vUv = uv;\n  vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n\n  vec3 positionLocalToPanoCenter0 = worldPosition.xyz - pano0Position;\n  vWorldPosition0 = (vec4(positionLocalToPanoCenter0, 1.0) * pano0Matrix).xyz;\n  vWorldPosition0.x *= -1.0;\n\n  vec3 positionLocalToPanoCenter1 = worldPosition.xyz - pano1Position;\n  vWorldPosition1 = (vec4(positionLocalToPanoCenter1, 1.0) * pano1Matrix).xyz;\n  vWorldPosition1.x *= -1.0;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n",
                fragmentShader: a + "uniform sampler2D map;\nuniform float modelAlpha;\nuniform float opacity;\nuniform float progress;\nuniform int blackout;\n\nuniform vec3 pano0Position;\nuniform samplerCube pano0Map;\n\nuniform vec3 pano1Position;\nuniform samplerCube pano1Map;\n\nvarying vec2 vUv;\nvarying vec3 vWorldPosition0;\nvarying vec3 vWorldPosition1;\n\nvoid main() {\n	const vec4 BLACK = vec4(0.0, 0.0, 0.0, 1.0);\n	const vec4 GREY  = vec4(0.5, 0.5, 0.5, 1.0);\n\n	vec4 colorFromPanos;\n	vec4 colorFromPano0 = textureCube( pano0Map, vWorldPosition0.xyz);\n	vec4 colorFromPano1 = textureCube( pano1Map, vWorldPosition1.xyz);\n\n	if (blackout == 0) {\n		colorFromPanos = mix(colorFromPano0, colorFromPano1, progress);\n	} else if (blackout == 1) {\n		colorFromPanos = mix(colorFromPano0, BLACK, min(1.0, progress*2.0));\n		colorFromPanos = mix(colorFromPanos, colorFromPano1, max(0.0, progress * 2.0 - 1.0));\n	} else if (blackout == 2) {\n		colorFromPanos = mix(colorFromPano0, BLACK, progress);\n	} else if (blackout == 3) {\n		colorFromPanos = mix(BLACK, colorFromPano1, max(0.0, progress * 2.0 - 1.0));\n	} \n\n	vec4 colorFromTexture = texture2D( map, vUv );\n	colorFromPanos = mix(colorFromPanos, colorFromTexture, modelAlpha);\n\n	float whiteness = 1.0 - smoothstep(0.1, 0.2, opacity);\n	colorFromPanos = mix(colorFromPanos, GREY, whiteness);\n	gl_FragColor = vec4(colorFromPanos.rgb, opacity);\n}\n"
            },
            modelOutside: {
                uniforms: {map: {type: "t", value: null}, opacity: {type: "f", value: 1}},
                vertexShader: o + "varying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n",
                fragmentShader: a + "uniform sampler2D map;\nuniform float opacity;\nvarying vec2 vUv;\n\nvec4 white = vec4(0.5, 0.5, 0.5, 1.0);\n\nvoid main() {\n\n  vec4 colorFromTexture = texture2D( map, vUv );\n  float whiteness = 1.0 - smoothstep(0.1, 0.2, opacity);\n  colorFromTexture = mix(colorFromTexture, white, whiteness);\n  gl_FragColor = vec4(colorFromTexture.rgb, opacity);\n\n}\n"
            },
            ribbon: {
                uniforms: {
                    map: {type: "t", value: null},
                    opacity: {type: "f", value: 1},
                    color: {type: "c", value: new n.Color(r.path.color)}
                },
                vertexShader: o + "varying vec2 vUv;\nvarying vec3 vN;\nvarying vec4 vP;\n\nvoid main() {\n\n  vUv = uv;\n  vN= normalMatrix * normal;\n  vP = modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * vP;\n}\n",
                fragmentShader: a + "uniform sampler2D map;\nuniform float opacity;\nvarying vec2 vUv;\nuniform vec3 color;\nvarying vec3 vN; // show-1182\nvarying vec4 vP; // show-1182\n\nvoid main() {\n	// TODO add scroll-in and pulsing behaviors\n	vec3 vNn = normalize(vN);\n	vec3 vPn = normalize(vP.xyz);\n	float f = pow(1.0-abs(dot(vNn,vPn)),0.2);\n  vec4 colorFromTexture = texture2D( map, vUv );\n  colorFromTexture.a *= f;\n  gl_FragColor = vec4((color.rgb*colorFromTexture.rgb),\n  						(opacity*colorFromTexture.a));\n}\n"
            },
            waypoint: {
                uniforms: {
                    map: {type: "t", value: null},
                    opacity: {type: "f", value: 1},
                    pulse: {type: "f", value: 1},
                    nearFade: {type: "v2", value: new n.Vector2(2 * r.insideNear, 2 * r.path.waypointIndoorRadius)},
                    color: {type: "c", value: new n.Color(r.reticuleColor)}
                },
                vertexShader: o + "varying vec2 vUv;\nvarying vec4 vPointView;\n\nvoid main() {\n\n  vUv = uv;\n  vPointView = modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * vPointView;\n\n}\n",
                fragmentShader: a + "uniform sampler2D map;\nuniform float opacity;\nuniform float pulse; // another opacity, with a different clock\nuniform vec2 nearFade;\nvarying vec2 vUv;\nvarying vec4 vPointView;\nuniform vec3 color;\n\nvoid main() {\n	// TODO add scroll-in and pulsing behaviors\n	float depthFade = min(1.0, (abs(vPointView.z)-nearFade.x)/(nearFade.y-nearFade.x));\n  vec4 colorFromTexture = texture2D( map, vUv );		// we only use the alpha!\n  gl_FragColor = vec4(color.rgb,\n  						(pulse*opacity*colorFromTexture.a * depthFade));\n}\n"
            },
            modelDebug: {
                uniforms: {
                    map: {type: "t", value: null},
                    modelAlpha: {type: "f", value: r.modelAlpha},
                    depthmapRatio: {type: "f", value: 0},
                    opacity: {type: "f", value: 1},
                    progress: {type: "f", value: 0},
                    considerOcclusion: {type: "i", value: r.fancierTransition},
                    highlightPanoSelection: {type: "i", value: 0},
                    useThirdPano: {type: "i", value: r.useThirdPano},
                    pano0Map: {type: "t", value: null},
                    pano0Depth: {type: "t", value: null},
                    pano0Position: {type: "v3", value: new n.Vector3},
                    pano0Matrix: {type: "m4", value: new n.Matrix4},
                    pano0Weight: {type: "f", value: r.transition.pano0Weight},
                    pano1Map: {type: "t", value: null},
                    pano1Depth: {type: "t", value: null},
                    pano1Position: {type: "v3", value: new n.Vector3},
                    pano1Matrix: {type: "m4", value: new n.Matrix4},
                    pano1Weight: {type: "f", value: r.transition.pano1Weight},
                    pano2Map: {type: "t", value: null},
                    pano2Depth: {type: "t", value: null},
                    pano2Position: {type: "v3", value: new n.Vector3},
                    pano2Matrix: {type: "m4", value: new n.Matrix4},
                    pano2Weight: {type: "f", value: r.transition.pano2Weight}
                },
                vertexShader: o + "uniform vec3 pano0Position;\nuniform mat4 pano0Matrix;\n\nuniform vec3 pano1Position;\nuniform mat4 pano1Matrix;\n\nuniform vec3 pano2Position;\nuniform mat4 pano2Matrix;\n\nvarying vec2 vUv;\nvarying vec3 vWorldPosition0;\nvarying vec3 vWorldPosition1;\nvarying vec3 vWorldPosition2;\n\nvarying vec4 worldPosition;\n\nvoid main() {\n\n  vUv = uv;\n  worldPosition = modelMatrix * vec4(position, 1.0);\n\n  vec3 positionLocalToPanoCenter0 = worldPosition.xyz - pano0Position;\n  vWorldPosition0 = (vec4(positionLocalToPanoCenter0, 1.0) * pano0Matrix).xyz;\n  vWorldPosition0.x *= -1.0;\n\n  vec3 positionLocalToPanoCenter1 = worldPosition.xyz - pano1Position;\n  vWorldPosition1 = (vec4(positionLocalToPanoCenter1, 1.0) * pano1Matrix).xyz;\n  vWorldPosition1.x *= -1.0;\n\n  vec3 positionLocalToPanoCenter2 = worldPosition.xyz - pano2Position;\n  vWorldPosition2 = (vec4(positionLocalToPanoCenter2, 2.0) * pano2Matrix).xyz;\n  vWorldPosition2.x *= -1.0;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n",
                fragmentShader: a + "uniform sampler2D map;\nuniform float depthmapRatio;\nuniform float modelAlpha;\nuniform float opacity;\nuniform float progress;\nuniform int considerOcclusion;\nuniform int highlightPanoSelection;\nuniform int useThirdPano;\n\nuniform vec3 pano0Position;\nuniform samplerCube pano0Map;\nuniform samplerCube pano0Depth;\nuniform float pano0Weight;\n\nuniform vec3 pano1Position;\nuniform samplerCube pano1Map;\nuniform samplerCube pano1Depth;\nuniform float pano1Weight;\n\nuniform vec3 pano2Position;\nuniform samplerCube pano2Map;\nuniform samplerCube pano2Depth;\nuniform float pano2Weight;\n\nvarying vec2 vUv;\nvarying vec3 vWorldPosition0;\nvarying vec3 vWorldPosition1;\nvarying vec3 vWorldPosition2;\n\nvarying vec4 worldPosition;\n\nvoid main() {\n\n  vec4 depthFromPano0 = textureCube( pano0Depth, vWorldPosition0.xyz );\n  vec4 depthFromPano1 = textureCube( pano1Depth, vWorldPosition1.xyz );\n  vec4 depthFromPano2 = textureCube( pano2Depth, vWorldPosition2.xyz );\n\n  vec4 colorFromPano0 = textureCube( pano0Map, vWorldPosition0.xyz );\n  vec4 colorFromPano1 = textureCube( pano1Map, vWorldPosition1.xyz );\n  vec4 colorFromPano2 = textureCube( pano2Map, vWorldPosition2.xyz );\n\n  float distanceToPano0 = distance(worldPosition.xyz, pano0Position);\n  float distanceToPano1 = distance(worldPosition.xyz, pano1Position);\n  float distanceToPano2 = distance(worldPosition.xyz, pano2Position);\n\n  float cameraToPano0 = distance(cameraPosition.xyz, pano0Position);\n  float cameraToPano1 = distance(cameraPosition.xyz, pano1Position);\n  float cameraToPano2 = distance(cameraPosition.xyz, pano2Position);\n\n  float contributionFromPano0 = cameraToPano0 == 0.0 ? 1000.0 : pano0Weight / cameraToPano0;\n  float contributionFromPano1 = cameraToPano1 == 0.0 ? 1000.0 : pano1Weight / cameraToPano1;\n  float contributionFromPano2 = cameraToPano2 == 0.0 ? 1000.0 : pano2Weight / cameraToPano2;\n\n  contributionFromPano0 *= 1.0 / distanceToPano0;\n  contributionFromPano1 *= 1.0 / distanceToPano1;\n  contributionFromPano2 *= 1.0 / distanceToPano2;\n\n  if(considerOcclusion == 1) {\n    bool occludedFromPano0 = distanceToPano0 / 10.0 > 1.01 - depthFromPano0.x;\n    bool occludedFromPano1 = distanceToPano1 / 10.0 > 1.01 - depthFromPano1.x;\n    bool occludedFromPano2 = distanceToPano2 / 10.0 > 1.01 - depthFromPano2.x;\n\n    if(occludedFromPano0){contributionFromPano0 *= 0.1;}\n    if(occludedFromPano1){contributionFromPano1 *= 0.1;}\n    if(occludedFromPano2){contributionFromPano2 *= 0.1;}\n    //if(occludedFromPano0 && occludedFromPano1 && !occludedFromPano2) { contributionFromPano2 += 0.5; }\n  }\n\n  float contributionSum = contributionFromPano0 + contributionFromPano1 + contributionFromPano2;\n  contributionFromPano0 /= contributionSum;\n  contributionFromPano1 /= contributionSum;\n  contributionFromPano2 /= contributionSum;\n\n  vec4 colorFromPanos = colorFromPano0 * contributionFromPano0;\n  colorFromPanos += colorFromPano1 * contributionFromPano1;\n  colorFromPanos += colorFromPano2 * contributionFromPano2;\n\n  vec4 depthFromPanos = depthFromPano0 * contributionFromPano0;\n  depthFromPanos += depthFromPano1 * contributionFromPano1;\n  depthFromPanos += depthFromPano2 * contributionFromPano2;\n\n  vec4 colorFromTexture = texture2D( map, vUv );\n  colorFromPanos = mix(colorFromPanos, colorFromTexture, modelAlpha);\n\n  if(highlightPanoSelection == 1) {\n    colorFromPanos.r = contributionFromPano0;\n    colorFromPanos.g = contributionFromPano1;\n    colorFromPanos.b = contributionFromPano2;\n  }\n\n  gl_FragColor = vec4(mix(colorFromPanos, depthFromPanos, depthmapRatio).rgb, opacity);\n\n}\n"
            },
            customDepth: {
                uniforms: {panoPosition: {type: "v3", value: new n.Vector3}},
                vertexShader: o + "varying vec4 worldPosition;\n\nvoid main() {\n\n  worldPosition = modelMatrix * vec4(position, 1.0);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n",
                fragmentShader: a + "uniform vec3 panoPosition;\nvarying vec4 worldPosition;\n\nvoid main() {\n\n  float depth = distance(worldPosition.xyz, panoPosition);\n  float color = 1.0 - depth / 10.0;\n  gl_FragColor = vec4(color, color, color, 1.0);\n\n}\n"
            },
            skysphere: {
                uniforms: {radius: {type: "f", value: 0}},
                vertexShader: o + "varying vec4 worldPosition;\n\nvoid main() {\n\n  worldPosition = modelMatrix * vec4(position, 1.0);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n",
                fragmentShader: a + "varying vec4 worldPosition;\nuniform float radius;\n\nvoid main() {\n\n  vec4 topColor = vec4(0.094, 0.102, 0.11, 1.0);\n  vec4 bottomColor = vec4(0.2, 0.216, 0.235, 1.0);\n  float normalizedHeight = (worldPosition.y + radius) / (radius * 2.0);\n  float ratio = smoothstep(0.0, 0.5, normalizedHeight);\n  gl_FragColor = mix(bottomColor, topColor, ratio);\n\n}\n"
            }
        }
    }, {"./settings": 123, three: 175}],
    125: [function (e, t, i) {
        (function (i) {
            "use strict";
            var n = e("three"), r = (e("url"), e("./util/ajax")), o = e("./settings"), a = e("./util/logger"), s = e("./util/math"), l = e("./util/showcase"), h = e("./objects/Panorama"), c = new a(i), u = e("./model/Model"), d = e("./shaders"), p = e("./util/transitions"), f = e("./objects/Chunk"), g = e("./objects/Reticule"), m = e("./objects/Skybox"), v = e("./objects/Floor"), A = e("./cameras/DollhouseCamera"), y = e("./cameras/FloorplanCamera"), C = e("./cameras/PanoramaCamera"), I = e("./controls/DollhouseControls"), b = e("./controls/FloorplanControls"), w = e("./controls/PanoramaControls");
            n.ImageUtils.crossOrigin = o.crossOrigin, t.exports = {
                shaders: d,
                transitions: p,
                Model: u,
                Chunk: f,
                Floor: v,
                Skybox: m,
                Reticule: g,
                Panorama: h,
                DollhouseCamera: A,
                FloorplanCamera: y,
                PanoramaCamera: C,
                DollhouseControls: I,
                FloorplanControls: b,
                PanoramaControls: w,
                getModel: function (e) {
                    if (!e.url)throw'getModel(): missing parameter "url"';
                    e.autoload = void 0 !== e.autoload ? e.autoload : !0;
                    var t = l.parseSidUrl(e.url);
                    e.urlBase = t.urlBase, e.urlModel = t.urlModel, e.urlFiles = t.urlFiles;
                    var i = this._getPlatformError();
                    return i ? $.Deferred().reject(i).promise() : (this.options = e, this._loadModel().then(this._buildModel.bind(this)))
                },
                _getPlatformError: function () {
                    return "IE" === $.ua.browser.name && parseInt($.ua.browser.major) < 11 ? "webgl-unsupported" : "iOS" === $.ua.os.name && /^[0-7][$\.]/.test($.ua.os.version) ? "webgl-ios" : Modernizr.webgl ? null : "webgl-unsupported"
                },
                _loadModel: function () {
                    return r.get(this.options.urlModel, {
                        responseType: "json",
                        prefetchFrom: "model",
                        auth: o.authorizationHeader
                    }).then(null, function () {
                        return c.warn("Model loading failed at initial metadata load"), "loading-failed"
                    })
                },
                _buildModel: function (e) {
                    e = l.normalizeModeldata(e, s);
                    var t = new u(this.options, e);
                    return this.options.autoload ? t.load(!0) : $.when(t)
                }
            }
        }).call(this, "/js/showcase.js")
    }, {
        "./cameras/DollhouseCamera": 5,
        "./cameras/FloorplanCamera": 6,
        "./cameras/PanoramaCamera": 7,
        "./controls/DollhouseControls": 9,
        "./controls/FloorplanControls": 10,
        "./controls/PanoramaControls": 12,
        "./model/Model": 102,
        "./objects/Chunk": 107,
        "./objects/Floor": 109,
        "./objects/Panorama": 111,
        "./objects/Reticule": 112,
        "./objects/Skybox": 115,
        "./settings": 123,
        "./shaders": 124,
        "./util/ajax": 138,
        "./util/logger": 146,
        "./util/math": 147,
        "./util/showcase": 150,
        "./util/transitions": 152,
        three: 175,
        url: 167
    }],
    126: [function (e, t, i) {
        "use strict";
        function n() {
            var e = {renderTarget: null, inUse: !1, size: -1, pano: null};
            return e
        }

        function r(e) {
            T.push(e)
        }

        function o(e) {
            var t = n();
            return t.inUse = !0, t.size = e, r(t), t
        }

        function a(e) {
            for (var t = 0; t < T.length; t++) {
                var i = T[t];
                if (!i.inUse && i.size === e)return i.inUse = !0, i
            }
            return null
        }

        function s(e) {
            for (var t = 0; t < T.length; t++) {
                var i = T[t];
                if (i.renderTarget === e)return i.inUse = !1, !0
            }
            return !1
        }

        function l() {
            this.tileDirectory = {}, this.activeRenderTargetDescriptors = {}, this.activePanos = [], this.uploadDescriptors = {}, this.tileTrees = {}, this.sceneRenderer = null, this.tileDownloader = null, this.forceQueue = [], this.uploadQueues = {}, this.uploadInterval = null, this.uploadIntervalCancelled = !1, this.usingTileOverlay = !1, this.overlayTilesLoaded = !1, this.overlayTileBase = null, this.overlayTilesBasic = {}, this.overlayTilesEnhanced = {}, this.direction = new c.Vector3, this.initTime = -1, this.maxBaseUploadsPerFrame = E, this.maxUploadsPerFrame = x
        }

        function h() {
            this.uploadIntervalCancelled || (this.overlayTilesLoaded || !this.usingTileOverlay ? (I = !0, this.updateUploadQueue(this.maxUploadsPerFrame, this.maxBaseUploadsPerFrame), this.peekNextFromUploadQueue() ? this.refreshUploadInterval(b) : this.uploadInterval = null) : this.refreshUploadInterval(this.uploadIntervalDelay))
        }

        var c = e("three"), u = e("../exception/BasicException"), d = e("../settings"), p = (e("../enum/PanoSizeClass"), e("../objects/Panorama"), e("../enum/PanoRendererEvents")), f = e("../enum/TileDownloaderEvents"), g = e("../enum/Vectors"), m = (e("../enum/GLCubeFaces"), e("../objects/Panorama"), e("./TileTree")), v = (e("./TileDownloader"), e("./TilePrioritizer")), A = e("./TileUtils"), y = (e("../util/browser"), e("../util/panorama")), C = e("events").EventEmitter, I = !1, b = d.tiling.uploadIntervalDelay, w = d.tiling.initialIntervalDelay, x = d.tiling.maxUploadsPerFrame, E = d.tiling.maxBaseUploadsPerFrame, M = {
            Base: 0,
            Remaining: 1
        }, T = [];
        l.prototype = Object.create(C.prototype), l.prototype.init = function (e, t) {
            this.sceneRenderer = e, this.tileDownloader = t, this.bindEvents(), this.loadOverlayTiles(), this.initTime = performance.now()
        }, l.prototype.hasQueuedTiles = function () {
            var e = this.peekNextFromUploadQueue();
            return null !== e && void 0 !== e
        }, l.prototype.getActiveRenderTargetDescriptor = function (e) {
            return this.activeRenderTargetDescriptors[e]
        }, l.prototype.setActiveRenderTargetDescriptor = function (e, t) {
            this.activeRenderTargetDescriptors[e] = t
        }, l.prototype.loadOverlayTiles = function () {
            if (0 !== d.tiling.overlayStyle) {
                var e = 0, t = function (t, n, r) {
                    t = n ? t[n] = this.sceneRenderer.initSizedTexture2D(A.TILE_SIZE, c.ClampToEdgeWrapping) : this.overlayTileBase = this.sceneRenderer.initSizedTexture2D(A.TILE_SIZE, c.ClampToEdgeWrapping), this.sceneRenderer.uploadTexture2D(r, t, 0, 0, A.TILE_SIZE, A.TILE_SIZE), e++, e === i.length && (this.overlayTilesLoaded = !0)
                }.bind(this), i = [["images/outlineBase.png", t.bind(this, this.overlayTileBase, null)], ["images/outlineBasic512.png", t.bind(this, this.overlayTilesBasic, 256)], ["images/outlineBasic512.png", t.bind(this, this.overlayTilesBasic, 512)], ["images/outlineBasic1024.png", t.bind(this, this.overlayTilesBasic, 1024)], ["images/outlineBasic2048.png", t.bind(this, this.overlayTilesBasic, 2048)], ["images/outlineBasic4096.png", t.bind(this, this.overlayTilesBasic, 4096)], ["images/outlineEnhanced512.png", t.bind(this, this.overlayTilesEnhanced, 256)], ["images/outlineEnhanced512.png", t.bind(this, this.overlayTilesEnhanced, 512)], ["images/outlineEnhanced1024.png", t.bind(this, this.overlayTilesEnhanced, 1024)], ["images/outlineEnhanced2048.png", t.bind(this, this.overlayTilesEnhanced, 2048)], ["images/outlineEnhanced4096.png", t.bind(this, this.overlayTilesEnhanced, 4096)]];
                i.forEach(function (e) {
                    this.tileDownloader.loadImage(e[0], e[1])
                }.bind(this)), this.usingTileOverlay = !0
            } else this.usingTileOverlay = !1
        }, l.prototype.bindEvents = function () {
            this.tileDownloader.on(f.TileDownloadSuccess, this.onTileDownloaded.bind(this))
        }, l.prototype.activateTiledPano = function (e, t, i, n) {
            i && this.clearAllUploadQueues(0);
            var r = this.getActiveRenderTargetDescriptor(e.id), l = !1;
            if (!r || t !== r.size) {
                if (r && s(r.renderTarget), r = a(t), !r) {
                    r = o(t);
                    var h = this.initTiledPano(t, !1);
                    r.renderTarget = h, r.pano = e
                }
                this.resetUploadDescriptors(e.id), l = !0
            }
            this.setActiveRenderTargetDescriptor(e.id, r);
            var c = i ? 0 : 1;
            this.updateActivePanos(e, c);
            for (var u = function (t, i, r, o) {
                var a = this.getTileDirectoryEntry(e.id, t, r, o);
                this.linkTileAndNode(a, i), l && (a.uploaded = !1), a.renderImmediate = 0 === r && n
            }, d = 0; d < A.FACES_PER_PANO; d++) {
                var p = this.getTileTree(e.id, d);
                p.breadthFirst(!1, u.bind(this, d))
            }
            return r.renderTarget
        }, l.prototype.deactivateTiledPano = function (e) {
            var t = this.getActiveRenderTargetDescriptor(e.id);
            this.isRenderTargetDescriptorValid(t) && s(t.renderTarget), this.setActiveRenderTargetDescriptor(e.id, null);
            var i = this.getUploadQueueForPano(e.id);
            this.clearUploadQueue(i), this.cleanupInactivePanos()
        }, l.prototype.updateActivePanos = function () {
            var e = [];
            return function (t, i) {
                if (e.length = 0, 0 === this.activePanos.length || i >= this.activePanos.length)e.push(t); else for (var n = 0; n < this.activePanos.length; n++) {
                    e.length === i && e.push(t);
                    var r = this.activePanos[n], o = this.getActiveRenderTargetDescriptor(r.id);
                    r.id !== t.id && this.isRenderTargetDescriptorValid(o) && e.push(r)
                }
                this.activePanos.length = 0, this.activePanos.push.apply(this.activePanos, e)
            }
        }(), l.prototype.cleanupInactivePanos = function () {
            var e = [];
            return function () {
                e.length = 0;
                for (var t = 0; t < this.activePanos.length; t++) {
                    var i = this.activePanos[t], n = this.getActiveRenderTargetDescriptor(i.id);
                    this.isRenderTargetDescriptorValid(n) && e.push(i)
                }
                this.activePanos.length = 0, this.activePanos.push.apply(this.activePanos, e)
            }
        }(), l.prototype.getActivePanoCount = function () {
            return this.activePanos.length
        }, l.prototype.resetRenderStatus = function (e) {
            for (var t = function (e, t, i, n) {
                t.tile.uploaded = !1
            }, i = 0; i < A.FACES_PER_PANO; i++) {
                var n = this.getTileTree(e, i);
                n.breadthFirst(!1, t.bind(this, i))
            }
        }, l.prototype.renderPanoTiles = function () {
            var e = [];
            return function (t, i, n) {
                i = i || this.direction || g.FORWARD;
                var r = this.getActiveRenderTargetDescriptor(t.id);
                if (!this.isRenderTargetDescriptorValid(r))throw new u("PanoRenderer.renderPanoTiles() -> Cannot load a pano that is not activated.");
                for (var o = 0; o < A.FACES_PER_PANO; o++) {
                    var a = this.getTileTree(t.id, o);
                    e.length = 0, a.breadthFirst(!1, null, e);
                    for (var s = 0; s < e.length; s++) {
                        var l = e[s];
                        this.queueTileUpload(l.tile, !1, n)
                    }
                }
                this.updateDirection(i)
            }
        }(), l.prototype.isRenderTargetDescriptorValid = function (e) {
            return e && e.renderTarget
        }, l.prototype.isPanoActive = function (e) {
            var t = this.getActiveRenderTargetDescriptor(e);
            return this.isRenderTargetDescriptorValid(t)
        }, l.prototype.getTileTree = function (e, t) {
            var i = this.tileTrees[e];
            i || (i = [], this.tileTrees[e] = i);
            var n = i[t];
            if (!n) {
                var r = this.getActiveRenderTargetDescriptor(e);
                if (!r)throw new u("PanoRenderer.getTileTree() -> Cannot get tile tree for inactive pano.");
                var o = m.getLevelCountForSize(A.TILE_SIZE, r.size);
                n = new m(A.TILE_SIZE, o), i[t] = n
            }
            return n
        }, l.prototype.initTiledPano = function (e, t) {
            var i = this.sceneRenderer.renderer, n = (i.context, new c.WebGLRenderTargetCube(e, e, {stencilBuffer: !1})), r = new c.CubeTexture([]);
            n.texture = r, r.image = [null, null, null, null, null, null], r.flipY = !0, t ? (r.generateMipmaps = !0, r.magFilter = c.LinearFilter, r.minFilter = c.LinearMipMapLinearFilter) : (r.generateMipmaps = !1, r.magFilter = c.LinearFilter, r.minFilter = c.LinearFilter), r.format = c.RGBAFormat, i.setRenderTarget(n), i.setRenderTarget(null);
            var o = i.properties.get(r);
            return o.__image__webglTextureCube = o.__webglTexture, n
        }, l.prototype.getUploadQueueForPano = function (e) {
            var t = this.uploadQueues[e];
            return t || (t = [], this.uploadQueues[e] = t), t
        }, l.prototype.queueTileUpload = function (e, t, i) {
            var n = this.getActiveRenderTargetDescriptor(e.panoId);
            if (this.isRenderTargetDescriptorValid(n) && e.downloaded && !e.uploaded && (!e.uploadQueued || i)) {
                var r = this.getUploadQueueForPano(e.panoId);
                this.shouldUploadImmediately(e) || i ? this.uploadTile(e, !1) : this.shoulPushToFrontOfQueue(e) ? (this.forceQueue.push(e), e.uploadQueued = !0, this.uploadInterval || this.uploadIntervalCancelled || this.refreshUploadInterval(0)) : (t && this.direction ? v.insertSortedPanoTile(r, e, n.pano, this.direction) : r.push(e), e.uploadQueued = !0, this.uploadInterval || this.uploadIntervalCancelled || this.refreshUploadInterval(0))
            }
        }, l.prototype.shouldUploadImmediately = function (e) {
            return e.renderImmediate
        }, l.prototype.shoulPushToFrontOfQueue = function (e) {
            var t = m.getLevelCountForSize(A.TILE_SIZE, e.panoSize);
            return 0 === t
        }, l.prototype.getTopUploadQueue = function () {
            for (var e = null, t = null, i = M.Base; i <= M.Remaining; i++)for (var n = 0; n < this.activePanos.length; n++)if (e = this.activePanos[n], t = this.getUploadQueueForPano(e.id), t.length > 0)switch (i) {
                case M.Base:
                    if (0 === t[0].level)return t;
                    break;
                case M.Remaining:
                    return t
            }
            return null
        }, l.prototype.getNextFromUploadQueue = function () {
            var e = function (e) {
                var t = e.shift();
                return t.uploadQueued = !1, t
            };
            return function () {
                if (this.forceQueue.length > 0)return e(this.forceQueue);
                var t = this.getTopUploadQueue();
                return t && t.length > 0 ? e(t) : null
            }
        }(), l.prototype.peekNextFromUploadQueue = function () {
            if (this.forceQueue.length > 0)return this.forceQueue[0];
            var e = this.getTopUploadQueue();
            return e && e.length > 0 ? e[0] : null
        }, l.prototype.clearAllUploadQueues = function (e) {
            for (var t = 0; t < this.activePanos.length; t++) {
                var i = this.activePanos[t], n = this.getUploadQueueForPano(i.id);
                this.clearUploadQueue(n, e)
            }
            this.clearUploadQueue(this.forceQueue, e)
        }, l.prototype.clearUploadQueue = function (e, t) {
            (void 0 === t || null === t) && (t = -1);
            for (var i = 0; i < e.length;) {
                var n = e[i];
                n.level > t ? (n.uploadQueued = !1, e.splice(i, 1)) : i++
            }
        }, l.prototype.refreshUploadInterval = function () {
            var e = null;
            return function (t) {
                this.uploadIntervalCancelled || (e || (e = h.bind(this)), (null === t || void 0 === t) && (t = b), I || (t = w), this.uploadInterval = window.setTimeout(e, t), this.uploadIntervalDelay = t)
            }
        }(), l.prototype.update = function () {
            var e = performance.now(), t = 0;
            return function () {
                this.uploadIntervalCancelled = !0, window.clearTimeout(this.uploadInterval), this.uploadInterval = null;
                var i = performance.now() - e;
                !(i > b || 0 === t) || !this.overlayTilesLoaded && this.usingTileOverlay || (this.updateUploadQueue(this.maxUploadsPerFrame, this.maxBaseUploadsPerFrame), e = performance.now()), t++
            }
        }(), l.prototype.updateUploadQueue = function (e, t) {
            e || (e = 1);
            for (var i = 0, n = 0; ;) {
                var r = this.getNextFromUploadQueue();
                if (!r)break;
                0 !== r.level && i++, n++;
                var o = this.getActiveRenderTargetDescriptor(r.panoId);
                if (this.isRenderTargetDescriptorValid(o) && (this.uploadTile(r, r.forceUpload), n > t || i > e))break
            }
        }, l.prototype.updateDirection = function (e) {
            if (e = e || this.direction) {
                this.direction = e;
                for (var t = 0; t < this.activePanos.length; t++) {
                    var i = this.activePanos[t], n = this.getUploadQueueForPano(i.id);
                    v.sortPanoTiles(n, i, this.direction)
                }
            }
        }, l.prototype.uploadTile = function () {
            var e = {}, t = (new c.Vector4, d.tiling.overlayStyle);
            return function (i, n) {
                var r = i.panoId, o = i.image, a = i.tileSize, s = i.panoSize, l = i.tileIndex, h = (i.faceTileIndex, i.totalTiles), u = (i.face, i.tileX), d = i.tileY, f = !0, g = !1, m = this.getActiveRenderTargetDescriptor(r);
                this.isRenderTargetDescriptorValid(m) || (f = !1, g = !1), n || (this.anyUploaded(i.node) && (f = !1, g = !0), i.uploaded && (f = !1, g = !1));
                var v = this.getUploadDescriptor(r, s);
                if (f) {
                    var A = m.renderTarget, y = u * a, C = d * a, I = a / s * m.size, b = y / s * m.size, w = C / s * m.size;
                    e[a] || (e[a] = this.sceneRenderer.initSizedTexture2D(a, c.ClampToEdgeWrapping));
                    var x = e[a];
                    if (this.sceneRenderer.uploadTexture2D(o, x, 0, 0, a, a), 1 === t || 2 === t) {
                        var E = 1 === t ? this.overlayTilesBasic : this.overlayTilesEnhanced;
                        this.sceneRenderer.renderToCubeMap(x, A, a, a, 0, 0, a, a, b, w, I, I, i.cubeFace), this.sceneRenderer.renderToCubeMap(E[s], A, a, a, 0, 0, a, a, b, w, I, I, i.cubeFace, c.NormalBlending, !0, .5)
                    } else this.sceneRenderer.renderToCubeMap(x, A, a, a, 0, 0, a, a, b, w, I, I, i.cubeFace);
                    v.uploadCount++, this.emit(p.TileRenderSuccess, r, s, l, h), v.uploadCount === h && this.emit(p.PanoRenderComplete, r, s, h), i.uploaded = !0, this.updateCoverageForNode(i.node, !0)
                } else i.uploaded = !1;
                return i.uploadAttempted || (v.uploadAttempts++, this.emit(p.TileUploadAttempted, r, s, l, h)), i.uploadAttempted = !0, v.uploadAttempts === h && this.emit(p.UploadAttemptedForAllTiles, r, s, h), g
            }
        }(), l.prototype.linkTileAndNode = function (e, t) {
            t.tile = e, e.node = t
        }, l.prototype.updateCoverageForNode = function (e, t) {
            if (e.covered = t, e.parent && e.covered) {
                var i = e.parent;
                this.nodeSubcovered(i) && this.updateCoverageForNode(i, !0)
            }
        }, l.prototype.nodeSubcovered = function (e) {
            if (!e.children)return !1;
            for (var t = 0; t < e.children.length; t++)if (!e.children[t] || !e.children[t].covered)return !1;
            return !0
        }, l.prototype.resetUploadDescriptors = function (e) {
            var t = this.getUploadDescriptors(e);
            for (var i in t)if (t.hasOwnProperty(i)) {
                var n = t[i];
                n.uploadCount = 0
            }
        }, l.prototype.getUploadDescriptor = function (e, t) {
            var i = this.getUploadDescriptors(e), n = i[t];
            return n || (n = {uploadCount: 0, uploadAttempts: 0}, i[t] = n), n
        }, l.prototype.getUploadDescriptors = function (e) {
            var t = this.uploadDescriptors[e];
            return t || (t = {}, this.uploadDescriptors[e] = t), t
        }, l.prototype.anyUploaded = function (e) {
            if (!e)return !1;
            if (e.tile && e.tile.uploaded)return !0;
            for (var t = 0; t < e.children.length; t++) {
                var i = e.children[t];
                if (this.anyUploaded(i))return !0
            }
            return !1
        }, l.prototype.onTileDownloaded = function (e) {
            var t = m.getLevelCountForSize(A.TILE_SIZE, e.panoSize), i = this.getTileDirectoryEntry(e.panoId, e.face, t, e.faceTileIndex);
            if (i.downloaded = !0, i.image = e.image, i.panoSize = e.panoSize, i.tileX = e.tileX, i.tileY = e.tileY, i.totalTiles = e.totalTiles, i.tileIndex = e.tileIndex, i.faceTileIndex = e.faceTileIndex, i.face = e.face, i.cubeFace = y.mapFaceToCubemapFace(e.face), i.panoId = e.panoId, i.tileSize = e.tileSize, i.direction = (new c.Vector3).copy(e.direction), i.node = null, i.level = m.getLevelCountForSize(A.TILE_SIZE, i.panoSize), this.isPanoActive(i.panoId)) {
                var n = this.getTileTree(i.panoId, i.face), r = n.getSubNode(i.panoSize, i.tileX, i.tileY);
                this.linkTileAndNode(i, r), this.queueTileUpload(i, !0)
            }
        }, l.prototype.getTileDirectoryEntry = function (e, t, i, n) {
            var r = this.tileDirectory[e];
            r || (r = {}, this.tileDirectory[e] = r);
            var o = 16384 * t + 1024 * i + n, a = r[o];
            return a || (a = {downloaded: !1, uploaded: !1}, r[o] = a), a._key = e + ":" + t + ":" + i + ":" + n, a
        }, t.exports = l
    }, {
        "../enum/GLCubeFaces": 21,
        "../enum/PanoRendererEvents": 27,
        "../enum/PanoSizeClass": 28,
        "../enum/TileDownloaderEvents": 36,
        "../enum/Vectors": 41,
        "../exception/BasicException": 44,
        "../objects/Panorama": 111,
        "../settings": 123,
        "../util/browser": 139,
        "../util/panorama": 148,
        "./TileDownloader": 128,
        "./TilePrioritizer": 130,
        "./TileTree": 131,
        "./TileUtils": 132,
        events: 160,
        three: 175
    }],
    127: [function (e, t, i) {
        "use strict";
        function n(e, t, i) {
            this.maxQuality = o.tiling.maxPanoQuality, this.devicePixelDensity = e, this.deviceScreenSize = t, this.clientBandwidth = i, this.panoSizeClassMap = {}
        }

        var r = e("../enum/PanoSizeClass"), o = e("../settings");
        n.prototype.init = function () {
            this.buildPanoSizeClassMap(this.devicePixelDensity, this.deviceScreenSize, this.clientBandwidth);
            var e = this.getPanoSize(r.ULTRAHIGH), t = this.getPanoSize(r.HIGH), i = this.getPanoSize(r.STANDARD);
            this.maxQuality >= e ? this.maxPanoSize = e : this.maxQuality >= t ? this.maxPanoSize = t : this.maxPanoSize = i
        }, n.prototype.buildPanoSizeClassMap = function () {
            this.panoSizeClassMap[r.BASE] = 512, this.panoSizeClassMap[r.STANDARD] = 1024, this.panoSizeClassMap[r.HIGH] = 2048, this.panoSizeClassMap[r.ULTRAHIGH] = 4096
        }, n.prototype.getPanoSize = function (e) {
            return this.panoSizeClassMap[e]
        }, n.prototype.getMaxPanoSize = function () {
            return this.maxPanoSize
        }, t.exports = n
    }, {"../enum/PanoSizeClass": 28, "../settings": 123}],
    128: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                this.panos = null, this.retryMinimumTime = 1e4, this.urls = null, this.panoLoadCallbacks = {}, this.downloadDescriptors = {}, this.priorityQueue = [], this.forceQueue = [], this.activeDownloads = [], this.qualityManager = null, this.tilePrioritizer = null, this.refreshInterval = null, this.processPriorityQueue = !1, this.concurrentDownloads = e.concurrentDownloads || 1
            }

            var r = e("three"), o = (e("../enum/Viewmode"), e("../settings")), a = (e("../objects/Panorama"), e("../util/logger")), s = (e("../enum/Vectors"), e("../enum/PanoSizeClass"), e("../enum/TileDownloaderEvents")), l = e("./TilePrioritizer"), h = e("./TileUtils"), c = e("./TileModeValidator"), u = (e("../enum/GLCubeFaces"), e("../enum/DownloadStatus")), d = (e("../util/texture"), e("../util/panorama")), p = e("../util/ajax"), f = e("events").EventEmitter;
            new a(i);
            n.prototype = Object.create(f.prototype), n.IDLE_REFRESH_DELAY = 500, n.ACTIVE_REFRESH_DELAY = 16, n.prototype.init = function (e) {
                this.qualityManager = e
            }, n.prototype.setUrls = function (e) {
                this.urls = e
            }, n.prototype.setPanoData = function (e, t, i) {
                this.panos = e, this.imagePanos = t, this.panoGroupId = i
            }, n.prototype.start = function () {
                this.refreshUpdateInterval(0)
            }, n.prototype.stop = function () {
                window.cancel(this.refreshInterval)
            }, n.prototype.refreshUpdateInterval = function (e) {
                e || (e = 0), this.refreshInterval = window.setTimeout(function () {
                    var e = this.update();
                    e ? this.refreshUpdateInterval(n.ACTIVE_REFRESH_DELAY) : this.refreshUpdateInterval(n.IDLE_REFRESH_DELAY)
                }.bind(this), e)
            }, n.prototype.update = function () {
                var e = this.forceQueue.length > 0;
                return this.processQueueForDownloading(this.forceQueue), this.processPriorityQueue && (this.queuePrioritizedTilesForPanos(this.panos), this.priorityQueue.length > 0 && (e = !0), this.processQueueForDownloading(this.priorityQueue)), e
            }, n.prototype.forceQueueTilesForPano = function () {
                var e = [];
                return function (t, i, n, r, o) {
                    e.length = 0;
                    for (var a = this.getTileDownloadDescriptors(t, i), s = 0; s < a.length; s++) {
                        var c = a[s];
                        (c.status === u.None || c.status === u.Queued) && e.push(c)
                    }
                    if (n && e.length > 0 && (l.sortPanoTiles(e, t, n), r)) {
                        var d = h.matchingTilesInDirection(t, i, n, r);
                        e.length > d && (e.length = d)
                    }
                    for (var p = 0; p < e.length; p++)this.forceQueue.push(e[p]);
                    this.setStatusForAllDescriptors(this.forceQueue, u.ForceQueued), this.clearFromQueue(this.priorityQueue, u.ForceQueued, !1), o && this.processQueueForDownloading(this.forceQueue, !0)
                }
            }(), n.prototype.queuePrioritizedTilesForPanos = function (e) {
                this.tilePrioritizer && (this.clearQueue(this.priorityQueue), this.tilePrioritizer.filterAndPrioritize(this.priorityQueue, e, this), this.clearFromQueue(this.priorityQueue, u.None, !0), this.setStatusOrRemoveForAllDescriptors(this.priorityQueue, u.Queued))
            }, n.prototype.clearQueue = function (e) {
                this.setStatusForAllDescriptors(e, u.None), e.length = 0
            }, n.prototype.clearFromQueue = function (e, t, i) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    r && (t === r.status && !i || t !== r.status && i) && (e[n] = null)
                }
            }, n.prototype.setStatusForAllDescriptors = function (e, t) {
                for (var i = 0; i < e.length; i++) {
                    var n = e[i];
                    n && (n.status = t)
                }
            }, n.prototype.setStatusOrRemoveForAllDescriptors = function (e, t) {
                for (var i = 0; i < e.length; i++) {
                    var n = e[i];
                    n && (n.status !== t ? n.status = t : e[i] = null)
                }
            }, n.prototype.getTileDownloadDescriptors = function (e, t) {
                var i = this.getAllTileDownloadDescriptorsForPano(e), n = i[t];
                return n || (n = this.buildDownloadDescriptorArray(t), i[t] = n, this.initTileDownloadDescriptors(n, e, t)), n
            }, n.prototype.getAllTileDownloadDescriptorsForPano = function (e) {
                var t = this.downloadDescriptors[e.id];
                return t || (t = {}, this.downloadDescriptors[e.id] = t), t
            }, n.prototype.processQueueForDownloading = function (e, t) {
                if (this.cleanupActiveDownloads(), this.activeDownloads.length < this.concurrentDownloads || t)for (var i = t ? e.length : this.concurrentDownloads - this.activeDownloads.length, n = 0, r = 0; i > n && e.length > 0; r++) {
                    var o = e.shift();
                    o && (this.startDownload(o), n++)
                }
            }, n.prototype.startDownload = function (e) {
                e.status = u.Downloading;
                var t = this.getTileUrl(e.pano.id, e.panoSize, e.tileSize, e.tileIndex);
                this.activeDownloads.push(e), this.loadImage(t, this.downloadComplete.bind(this, e), this.downloadFailed.bind(this, e))
            }, n.prototype.downloadFailed = function (e, t) {
                c.redirectToNonTiledMode(o.tiling.allTilingParameterNames)
            }, n.prototype.downloadComplete = function (e, t) {
                if (e.panoGroupId == this.panoGroupId) {
                    var i = this.getPanoLoadCallbacks(e.pano, e.panoSize);
                    e.status = u.Downloaded, i && i.onProgress && i.onProgress(e.pano, e.panoSize);
                    var n = {
                        panoId: e.pano.id,
                        image: t,
                        tileSize: e.tileSize,
                        panoSize: e.panoSize,
                        tileIndex: e.tileIndex,
                        faceTileIndex: e.faceTileIndex,
                        totalTiles: e.totalTiles,
                        face: e.face,
                        tileX: e.tileX,
                        tileY: e.tileY,
                        direction: e.direction
                    };
                    e.image = t, this.emit(s.TileDownloadSuccess, n), this.isPanoDownloaded(e.pano, e.panoSize) && (n = {
                        panoId: e.pano.id,
                        tileSize: e.tileSize,
                        panoSize: e.panoSize
                    }, this.emit(s.PanoDownloadComplete, n), i && i.onLoad && i.onLoad(e.pano, e.panoSize))
                }
            }, n.prototype.cleanupActiveDownloads = function () {
                var e = [];
                return function () {
                    e.length = 0;
                    for (var t = 0; t < this.activeDownloads.length; t++) {
                        var i = this.activeDownloads[t];
                        i.status !== u.Downloaded && i.status !== u.Failed && e.push(i)
                    }
                    this.activeDownloads.length = 0, this.activeDownloads.push.apply(this.activeDownloads, e)
                }
            }(), n.prototype.isPanoDownloaded = function (e, t) {
                var i = this.getTileDownloadDescriptors(e, t);
                if (i.length <= 0)return !1;
                for (var n = 0; n < i.length; n++) {
                    var r = i[n];
                    if (r.status !== u.Downloaded)return !1
                }
                return !0
            }, n.prototype.setPanoLoadCallbacks = function (e, t, i, n, r) {
                var o = e.id + ":" + this.qualityManager.getPanoSize(t);
                this.panoLoadCallbacks[o] = {onLoad: i, onFail: n, onProgress: r}
            }, n.prototype.getPanoLoadCallbacks = function (e, t) {
                var i = e.id + ":" + t;
                return this.panoLoadCallbacks[i]
            }, n.prototype.buildDownloadDescriptorArray = function (e) {
                for (var t = h.getTileCountForSize(e), i = [], n = 0; t > n; n++) {
                    var r = this.buildDownloadDescriptor();
                    i.push(r)
                }
                return i
            }, n.prototype.buildDownloadDescriptor = function () {
                var e = {
                    panoGroupId: null,
                    pano: null,
                    panoSize: -1,
                    tileSize: -1,
                    tileIndex: -1,
                    totalTiles: -1,
                    faceTileIndex: -1,
                    status: u.None,
                    url: null,
                    image: null,
                    direction: new r.Vector3,
                    face: -1,
                    cubeFace: -1,
                    tileX: -1,
                    tileY: -1
                };
                return e
            }, n.prototype.initTileDownloadDescriptors = function (e, t, i) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    this.initTileDownloadDescriptor(r, t, i, n)
                }
            }, n.prototype.initTileDownloadDescriptor = function (e, t, i, n) {
                var r = i >= h.TILE_SIZE ? h.TILE_SIZE : i;
                e.face = h.getFaceForTile(i, n), e.cubeFace = d.mapFaceToCubemapFace(e.face), e.panoGroupId = this.panoGroupId, e.pano = t, e.panoSize = i, e.tileSize = r, e.tileIndex = n, e.totalTiles = h.getTileCountForSize(i), e.status = u.None, e.image = null, h.getTileLocation(e.panoSize, e.tileIndex, e), h.getTileVector(e.panoSize, e.tileSize, e.cubeFace, e.tileX, e.tileY, h.LocationOnTile.Center, 0, e.direction)
            }, n.prototype.getTileUrl = function () {
                var e = {256: "256", 512: "512", 1024: "1k", 2048: "2k", 4096: "4k"}, t = {
                    face: -1,
                    faceTileIndex: -1,
                    tileX: -1,
                    tileY: -1
                };
                return function (i, n, r, a) {
                    h.getTileLocation(n, a, t);
                    var s = Math.floor(n / r), l = s * s, c = Math.floor(a / l), u = "";
                    return 1 === o.tiling.customCompression && (u = "_" + o.tiling["q" + e[n]]), this.urls.get("tiles/" + i + "/" + e[n] + u + "_face" + c + "_" + t.tileX + "_" + t.tileY + ".jpg")
                }
            }(), n.prototype.loadImage = function (e, t, i) {
                p.getImage(e).then(function (e) {
                    t(e)
                }).fail(i)
            }, t.exports = n
        }).call(this, "/js/tile/TileDownloader.js")
    }, {
        "../enum/DownloadStatus": 20,
        "../enum/GLCubeFaces": 21,
        "../enum/PanoSizeClass": 28,
        "../enum/TileDownloaderEvents": 36,
        "../enum/Vectors": 41,
        "../enum/Viewmode": 42,
        "../objects/Panorama": 111,
        "../settings": 123,
        "../util/ajax": 138,
        "../util/logger": 146,
        "../util/panorama": 148,
        "../util/texture": 151,
        "./TileModeValidator": 129,
        "./TilePrioritizer": 130,
        "./TileUtils": 132,
        events: 160,
        three: 175
    }],
    129: [function (e, t, i) {
        "use strict";
        var n = {};
        n.redirectToNonTiledMode = function (e) {
            var t = window.location.href;
            e.forEach(function (e) {
                t = n.removeURLParameter(t, e)
            }), window.location.href = t
        }, n.removeURLParameter = function (e, t) {
            var i = new RegExp(t + "=[^$&]*&?");
            return e.replace(i, "")
        }, t.exports = n
    }, {}],
    130: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t, i, a) {
                this.maxQuality = o.tiling.maxPanoQuality, this.baseSize = e, this.standardSize = t, this.highSize = i, this.ultraHighSize = a, this.priorityCriteria = new n.PriorityCriteria(null, new r.Vector3(0, 0, 0), new r.Vector3(0, 0, -1), new r.Vector3(0, 0, -1))
            }

            var r = e("three"), o = (e("../enum/Viewmode"), e("../settings")), a = (e("../settings"), e("../objects/Panorama")), s = e("../util/logger"), l = (e("../enum/Vectors"), e("../enum/PanoSizeClass"), e("../enum/ModelManagerEvents"), e("../enum/GLCubeFaces"), e("../enum/DownloadStatus")), h = (e("../util/browser"), e("./TileUtils")), c = e("../util/math"), u = (e("events").EventEmitter, new s(i), Object.freeze({
                None: 0,
                DirectionalFOV: 1
            }));
            n.PriorityCriteria = function (e, t, i, n, o) {
                this.pano = e, this.cameraPosition = (new r.Vector3).copy(t), this.cameraDir = (new r.Vector3).copy(i), this.panoSpaceDir = (new r.Vector3).copy(n), this.upcomingPanos = o, this.copy = function (e) {
                    this.pano = e.pano, this.cameraPosition.copy(e.cameraPosition), this.cameraDir.copy(e.cameraDir), this.panoSpaceDir.copy(e.panoSpaceDir), this.upcomingPanos = o
                }
            }, n.DIRECTIONAL_FOV = 180, n.DIRECTIONAL_FOV_NARROW = 120, n.MAX_SCORED_PANOS_TOCONSIDER = 6, n.MAX_SCORED_PANOS_TOADD = 2, n.MAX_UPCOMING_PANOS_TOADD = 3, n.DIRECTION_SCORE_STRICTNESS = .75, n.appendQueue = function (e, t) {
                if (e && t)for (var i = 0; i < t.length; i++)e.push(t[i])
            }, n.prototype.updateCriteria = function (e, t, i, n) {
                this.priorityCriteria.pano = e, this.priorityCriteria.cameraPosition.copy(t), this.priorityCriteria.cameraDir.copy(i), this.priorityCriteria.upcomingPanos = n
            }, n.prototype.filterAndPrioritize = function () {
                var e = [], t = [], i = [];
                return function (r, o, a) {
                    this.populateNeighborPanos(this.priorityCriteria.pano, o, e), this.populateScoredPanos(this.priorityCriteria.pano, o, t, this.priorityCriteria.cameraDir, n.MAX_SCORED_PANOS_TOCONSIDER);
                    var s = this.baseSize, l = this.standardSize, h = this.highSize, c = this.ultraHighSize;
                    this.queueTilesForPano(r, a, this.priorityCriteria.pano, s), this.priorityCriteria.upcomingPanos && this.queueTilesForPanos(r, this.priorityCriteria.upcomingPanos, a, s, n.MAX_UPCOMING_PANOS_TOADD), i.length = 0, this.maxQuality >= l && this.queueTilesInDirectionForPano(i, a, this.priorityCriteria.pano, l, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, n.DIRECTIONAL_FOV_NARROW), n.sortPanoTiles(i, this.priorityCriteria.pano, this.priorityCriteria.cameraDir), n.appendQueue(r, i), this.queueTilesForPanos(r, t, a, s, n.MAX_SCORED_PANOS_TOADD), i.length = 0, this.maxQuality >= h && this.queueTilesInDirectionForPano(i, a, this.priorityCriteria.pano, h, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, n.DIRECTIONAL_FOV_NARROW), this.maxQuality >= c && this.queueTilesInDirectionForPano(i, a, this.priorityCriteria.pano, c, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, n.DIRECTIONAL_FOV_NARROW), n.sortPanoTiles(i, this.priorityCriteria.pano, this.priorityCriteria.cameraDir), n.appendQueue(r, i), i.length = 0, this.maxQuality >= l && this.queueTilesInDirectionForPano(i, a, this.priorityCriteria.pano, l, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, n.DIRECTIONAL_FOV), this.maxQuality >= h && this.queueTilesInDirectionForPano(i, a, this.priorityCriteria.pano, h, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, n.DIRECTIONAL_FOV), this.maxQuality >= c && this.queueTilesInDirectionForPano(i, a, this.priorityCriteria.pano, c, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, n.DIRECTIONAL_FOV), n.sortPanoTiles(i, this.priorityCriteria.pano, this.priorityCriteria.cameraDir), n.appendQueue(r, i), this.queueTilesForPanos(r, e, a, s)
                }
            }(), n.prototype.populateNeighborPanos = function (e, t, i) {
                i = i || [], i.length = 0;
                var n = t.getNeighbours(e);
                for (var r in n)if (n.hasOwnProperty(r)) {
                    var o = t.get(r);
                    i.push(o)
                }
                return i
            }, n.prototype.populateScoredPanos = function (e, t, i, r, o) {
                i = i || [], i.length = 0;
                var s = [a.filters.inPanoDirection(e.position, r, n.DIRECTION_SCORE_STRICTNESS), a.filters.not(e)], l = [a.scoreFunctions.distanceSquared(e), a.scoreFunctions.direction(e.position, r)], h = t.sortByScore(s, l);
                if (h)for (var c = 0; c < h.length && o > c; c++) {
                    var u = h[c].pano;
                    i.push(u)
                }
                return i
            }, n.prototype.queueTilesForPanos = function (e, t, i, n, r) {
                for (var o = 0, a = 0; a < t.length; a++) {
                    var s = t[a], l = this.queueTilesForPano(e, i, s, n);
                    if (o += l > 0 ? 1 : 0, r && o >= r)break
                }
                return o
            }, n.prototype.queueTilesForPano = function () {
                var e = {filter: u.None};
                return function (t, i, n, r) {
                    return this.filterAndQueueTileDownloadDescriptors(t, i, n, r, e)
                }
            }(), n.prototype.queueTilesForPanosInDirection = function () {
                var e = new r.Vector3;
                return function (t, i, n, r, o, a, s, l) {
                    for (var h = 0, u = 0; u < n.length; u++) {
                        var d = n[u];
                        e.copy(d.position), e.sub(o), e.normalize();
                        var p = Math.max(Math.min(a.dot(e), 1), -1), f = c.getFOVDotThreshold(s);
                        if (p >= f) {
                            var g = this.queueTilesInDirectionForPano(t, i, d, r, o, a, s);
                            if (h += g > 0 ? 1 : 0, l && h >= l)break
                        }
                    }
                    return h
                }
            }(), n.prototype.queueTilesInDirectionForPanos = function (e, t, i, n, r, o, a, s) {
                for (var l = 0, h = 0; h < i.length; h++) {
                    var c = i[h], u = this.queueTilesInDirectionForPano(e, t, c, n, o, a);
                    if (l += u > 0 ? 1 : 0, s && l >= s)break
                }
                return l
            }, n.prototype.queueTilesInDirectionForPano = function () {
                var e = {filter: u.DirectionalFOV, direction: new r.Vector3, fov: 60}, t = new r.Vector3;
                return function (i, n, r, o, a, s, l) {
                    return t.copy(s), h.getRelativeDirection(r.quaternion, t), e.direction.copy(t), e.fov = l, this.filterAndQueueTileDownloadDescriptors(i, n, r, o, e)
                }
            }(), n.prototype.filterAndQueueTileDownloadDescriptors = function () {
                var e = [];
                return function (t, i, n, r, o) {
                    var a = i.getTileDownloadDescriptors(n, r);
                    e.length = 0, this.filterTileDownloadDescriptors(n, a, e, o);
                    for (var s = 0, l = 0; l < e.length; l++) {
                        var h = e[l];
                        h && (t.push(h), s++)
                    }
                    return s
                }
            }(), n.prototype.filterTileDownloadDescriptors = function () {
                new r.Vector3;
                return function (e, t, i, n) {
                    var r, o;
                    switch (n.filter) {
                        case u.DirectionalFOV:
                            for (r = 0; r < t.length; r++)o = t[r], h.isTileWithinFOV(o.panoSize, o.tileSize, o.face, o.tileX, o.tileY, n.direction, n.fov) && i.push(o);
                            break;
                        default:
                            for (r = 0; r < t.length; r++)o = t[r], i.push(o)
                    }
                    for (r = 0; r < i.length; r++)o = i[r], this.canIncludeDescriptor(o) || (i[r] = null)
                }
            }(), n.prototype.canIncludeDescriptor = function (e) {
                return e.status !== l.Downloading && e.status !== l.Downloaded
            }, n.prototype.canIncludePano = function (e, t) {
                return !e.isLoaded(t)
            }, n.getFOVDotThreshold = function (e) {
                return Math.cos(r.Math.degToRad(e / 2))
            };
            var d = function () {
                var e = function t(e, i) {
                    var n = t._panoSpaceDir, r = t._fovThreshold, o = t._fovThresholdNarrow, a = Math.max(Math.min(n.dot(e.direction), 1), -1), s = Math.max(Math.min(n.dot(i.direction), 1), -1);
                    return e._dot = a, i._dot = s, a >= r && r > s ? -1 : r > a && s >= r ? 1 : a >= o && o > s ? -1 : o > a && s >= o ? 1 : e.panoSize > i.panoSize ? 1 : i.panoSize > e.panoSize ? -1 : -(a - s)
                };
                return e._panoSpaceDir = new r.Vector3, e._fovThreshold = -1, e._fovThresholdNarrow = -1, e
            }();
            n.sortPanoTiles = function (e, t, i) {
                d._panoSpaceDir.copy(i), h.getRelativeDirection(t.quaternion, d._panoSpaceDir), d._fovThresholdNarrow = c.getFOVDotThreshold(n.DIRECTIONAL_FOV_NARROW), d._fovThreshold = c.getFOVDotThreshold(n.DIRECTIONAL_FOV), e.sort(d)
            }, n.insertSortedPanoTile = function (e, t, i, r) {
                d._panoSpaceDir.copy(r), h.getRelativeDirection(i.quaternion, d._panoSpaceDir), d._fovThresholdNarrow = c.getFOVDotThreshold(n.DIRECTIONAL_FOV_NARROW), d._fovThreshold = c.getFOVDotThreshold(n.DIRECTIONAL_FOV);
                for (var o = -1, a = 0; a < e.length; a++) {
                    var s = d(t, e[a]);
                    if (0 >= s) {
                        o = a;
                        break
                    }
                }
                if (-1 === o)e[e.length] = t; else {
                    for (var l = e.length; l > o; l--)e[l] = e[l - 1];
                    e[o] = t
                }
            }, t.exports = n
        }).call(this, "/js/tile/TilePrioritizer.js")
    }, {
        "../enum/DownloadStatus": 20,
        "../enum/GLCubeFaces": 21,
        "../enum/ModelManagerEvents": 26,
        "../enum/PanoSizeClass": 28,
        "../enum/Vectors": 41,
        "../enum/Viewmode": 42,
        "../objects/Panorama": 111,
        "../settings": 123,
        "../util/browser": 139,
        "../util/logger": 146,
        "../util/math": 147,
        "./TileUtils": 132,
        events: 160,
        three: 175
    }],
    131: [function (e, t, i) {
        "use strict";
        function n(e, t) {
            this.levels = t, this.tileSize = e, this.root = null, this.allNodes = [], a(this)
        }

        function r(e, t) {
            this.tree = e, this.parent = t, this.children = []
        }

        function o(e, t, i, r, a, s, l, c) {
            if (e) {
                l = l || n.TraversalType.PreOrder;
                var u = r * h + i;
                if (l === n.TraversalType.PreOrder && (a && a(e, t, u, i, r), s && s.push(e)), e.children && 0 !== e.children.length) {
                    for (var d = r * h, p = i * h, f = 0; h > f; f++)for (var g = 0; h > g; g++)o(e.children[g * h + f], t + 1, p + f, d + g, a, s, l, c);
                    l === n.TraversalType.PostOrder && (a && a(e, t, u, i, r), s && s.push(e))
                }
            }
        }

        function a(e) {
            e.root = s(e, null, 0)
        }

        function s(e, t, i) {
            if (i > e.levels)return null;
            var n = new r(e, t);
            e.allNodes.push(n);
            for (var o = 0; c > o; o++)n.children[o] = s(e, n, i + 1);
            return n
        }

        function l(e, t, i, n, r) {
            if (!e)return null;
            if (0 === i)return e;
            if (!e.children || 0 === e.children.length)return null;
            var o = Math.pow(h, i), a = o / h, s = n % a, c = r % a, u = Math.floor(r / a), d = Math.floor(n / a), p = u * h + d, f = e.children[p];
            return l(f, t + 1, i - 1, s, c)
        }

        var h = (e("three"), e("./TileUtils"), e("../objects/Panorama"), e("../util/panorama"), e("events").EventEmitter, 2), c = h * h;
        n.TraversalType = Object.freeze({PreOrder: 0, PostOrder: 1}), n.getLevelCountForSize = function (e, t) {
            var i = 0;
            for (e > t && (t = e); ;) {
                if (t /= h, e > t)break;
                i++
            }
            return i
        }, n.getSizeForLevel = function (e, t) {
            return Math.pow(h, t) * e
        }, n.prototype.getSubNode = function (e, t, i) {
            (!t || e < this.tileSize) && (t = 0), (!i || e < this.tileSize) && (i = 0), e < this.tileSize && (e = this.tileSize);
            var r = n.getLevelCountForSize(this.tileSize, e), o = l(this.root, 0, r, t, i);
            return o
        }, n.prototype.breadthFirst = function (e, t, i) {
            var n = [], r = {}, o = 0, a = 0;
            for (n.push(this.root), n.push(r); n.length > 0;) {
                var s = n.shift();
                if (s === r)t && e && t(null), i && e && i.push(null), n.length > 0 && n.push(r), o++, a = 0; else {
                    if (s.children)for (var l = 0; l < s.children.length; l++) {
                        var h = s.children[l];
                        h && n.push(s.children[l])
                    }
                    var c = this.converBreadthFirstIndexToFaceIndex(a, o);
                    t && t(s, o, c), i && i.push(s), a++
                }
            }
        }, n.prototype.converBreadthFirstIndexToFaceIndex = function (e, t) {
            if (0 === t)return 0;
            var i = Math.pow(h, t), n = i / h, r = Math.floor(e / c), o = r % n, a = Math.floor(r / n), s = e % c, l = o * h + s % h, u = a * h + Math.floor(s / h);
            return u * i + l
        }, n.prototype.depthFirst = function (e, t, i) {
            o(this.root, 0, 0, 0, e, t, i, this.tileSize)
        }, t.exports = n
    }, {"../objects/Panorama": 111, "../util/panorama": 148, "./TileUtils": 132, events: 160, three: 175}],
    132: [function (e, t, i) {
        "use strict";
        var n = e("../enum/GLCubeFaces"), r = e("../util/MathLight"), o = {};
        o.TILE_SIZE = 512, o.FACES_PER_PANO = 6, o.LocationOnTile = {
            Center: 0,
            UpperLeft: 1,
            UpperRight: 2,
            LowerRight: 3,
            LowerLeft: 4
        }, o.getTileVector = function () {
            return function (e, t, i, a, s, l, h, c) {
                l = l || o.LocationOnTile.Center;
                var u = e / t, d = a / u;
                s = -s + (u - 1);
                var p = s / u, f = t / e, g = 2 * f, m = g / 2, v = 2 * d - 1 + m, A = 2 * p - 1 + m;
                switch (l) {
                    case o.LocationOnTile.UpperLeft:
                        v -= m, A += m, v += h * g;
                        break;
                    case o.LocationOnTile.UpperRight:
                        v += m, A += m, A -= h * g;
                        break;
                    case o.LocationOnTile.LowerRight:
                        v += m, A -= m, v -= h * g;
                        break;
                    case o.LocationOnTile.LowerLeft:
                        v -= m, A -= m, A += h * g;
                        break;
                    case o.LocationOnTile.Center:
                }
                switch (i) {
                    case n.GL_TEXTURE_CUBE_MAP_POSITIVE_X:
                        r.setVector(c, -1, A, -v);
                        break;
                    case n.GL_TEXTURE_CUBE_MAP_NEGATIVE_X:
                        r.setVector(c, 1, A, v);
                        break;
                    case n.GL_TEXTURE_CUBE_MAP_POSITIVE_Y:
                        r.setVector(c, -v, 1, -A);
                        break;
                    case n.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y:
                        r.setVector(c, -v, -1, A);
                        break;
                    case n.GL_TEXTURE_CUBE_MAP_POSITIVE_Z:
                        r.setVector(c, -v, A, 1);
                        break;
                    case n.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z:
                        r.setVector(c, v, A, -1)
                }
                r.normalize(c)
            }
        }(), o.getFaceForTile = function (e, t) {
            var i = o.TILE_SIZE;
            e < o.TILE_SIZE && (i = e);
            var n = Math.floor(e / i), r = n * n;
            return Math.floor(t / r)
        }, o.getTileLocation = function (e, t, i) {
            var n = o.TILE_SIZE;
            e < o.TILE_SIZE && (n = e);
            var r = o.getFaceForTile(e, t), a = Math.floor(e / n), s = a * a, l = t - r * s;
            i.tileX = l % a, i.tileY = Math.floor(l / a), i.face = r, i.faceTileIndex = l
        }, o.getTileCountForSize = function (e) {
            if (e <= o.TILE_SIZE)return o.FACES_PER_PANO;
            var t = Math.floor(e / o.TILE_SIZE), i = t * t, n = i * o.FACES_PER_PANO;
            return n
        }, o.getRelativeDirection = function () {
            var e = new r.Matrix4, t = new r.Quaternion;
            return function (i, n) {
                t.copy(i), t.inverse(), e.makeRotationFromQuaternion(t), e.applyToVector3(n), r.normalize(n)
            }
        }(), o.matchingTilesInDirection = function () {
            var e = new r.Vector3, t = {face: -1, faceTileIndex: -1, tileX: -1, tileY: -1};
            new r.Vector3, new r.Vector3, new r.Matrix4;
            return function (i, n, a, s, l) {
                s = Math.max(0, Math.min(s, 360)), r.copyVector(a, e), o.getRelativeDirection(i.quaternion, e);
                for (var h = o.getTileCountForSize(n), c = n < o.TILE_SIZE ? n : o.TILE_SIZE, u = 0, d = 0; h > d; d++)o.getTileLocation(n, d, t), o.isTileWithinFOV(n, c, t.face, t.tileX, t.tileY, e, s) && (u++, l && l.push({
                    face: t.face,
                    index: t.faceTileIndex,
                    tileX: t.tileX,
                    tileY: t.tileY
                }));
                return u
            }
        }(), o.isTileWithinFOV = function () {
            var e = new r.Vector3;
            return function (t, i, n, r, a, s, l) {
                var h = o.mapFaceToCubemapFace(n);
                if (o.getTileVector(t, i, h, r, a, o.LocationOnTile.Center, 0, e), o.isWithinFOV(e, s, l))return !0;
                for (var c = l / 360, u = Math.floor(1 / c), d = 0, p = 0; u >= p; p++) {
                    for (var f = o.LocationOnTile.UpperLeft; f <= o.LocationOnTile.LowerLeft; f++)if (o.getTileVector(t, i, h, r, a, f, d, e), o.isWithinFOV(e, s, l))return !0;
                    d += c
                }
                return !1
            }
        }(), o.isWithinFOV = function () {
            var e = Math.PI / 180;
            return function (t, i, n) {
                var o = n / 2 * e, a = Math.cos(o), s = r.dot(t, i);
                return s >= a
            }
        }(), o.mapFaceToCubemapFace = function () {
            var e = {
                0: n.GL_TEXTURE_CUBE_MAP_POSITIVE_Y,
                1: n.GL_TEXTURE_CUBE_MAP_POSITIVE_Z,
                2: n.GL_TEXTURE_CUBE_MAP_POSITIVE_X,
                3: n.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z,
                4: n.GL_TEXTURE_CUBE_MAP_NEGATIVE_X,
                5: n.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y
            };
            return function (t) {
                return e[t]
            }
        }(), t.exports = o
    }, {"../enum/GLCubeFaces": 21, "../util/MathLight": 134}],
    133: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                this.list = [], this.index = {}, Object.defineProperty(this, "length", {
                    get: function () {
                        return this.list.length
                    }
                })
            }

            var r = (e("./common"), e("./logger"));
            new r(i);
            n.prototype.forEach = function (e) {
                this.list.forEach(e)
            }, n.prototype.add = function (e) {
                this.list.push(e), this.index[this.getIndex(e)] = e
            }, n.prototype.getIndex = function (e) {
                throw new Error("IndexedCollection.getIndex not implemented in subclass.")
            }, n.prototype.extend = function (e) {
                for (var t = 0; t < e.length; t++)this.add(e[t])
            }, n.prototype.get = function (e) {
                return this.index[e]
            }, n.prototype.first = function () {
                return this.list[0]
            }, n.prototype.last = function () {
                return this.list[this.list.length - 1]
            }, n.prototype.reIndex = function () {
                this.index = {};
                var e = this;
                this.forEach(function (t) {
                    e.index[e.getIndex(t)] = t
                })
            }, n.prototype.filter = function (e) {
                var t = this.list.filter(e);
                return this.reIndex(), t
            }, n.prototype.reduce = function (e, t) {
                return this.list.reduce(e, t)
            }, n.prototype.sort = function (e) {
                return this.list.sort(e)
            }, n.prototype.indexOf = function (e) {
                for (var t = 0; t < this.list.length; ++t)if (this.list[t] === e)return t;
                return -1
            }, t.exports = n
        }).call(this, "/js/util/IndexedCollection.js")
    }, {"./common": 142, "./logger": 146}],
    134: [function (e, t, i) {
        "use strict";
        var n = {};
        n.Vector3 = function (e, t, i) {
            this.x = e || 0, this.y = t || 0, this.z = i || 0
        }, n.Matrix4 = function () {
            this.elements = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]), arguments.length > 0 && console.error("MathLight.Matrix4: the constructor no longer reads arguments. use .set() instead.")
        }, n.Matrix4.prototype = {
            identity: function () {
                return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            }, copy: function (e) {
                return this.elements.set(e.elements), this
            }, applyToVector3: function (e) {
                var t = e.x, i = e.y, n = e.z, r = this.elements;
                return e.x = r[0] * t + r[4] * i + r[8] * n + r[12], e.y = r[1] * t + r[5] * i + r[9] * n + r[13], e.z = r[2] * t + r[6] * i + r[10] * n + r[14], this
            }, getInverse: function (e, t) {
                var i = this.elements, n = e.elements, r = n[0], o = n[1], a = n[2], s = n[3], l = n[4], h = n[5], c = n[6], u = n[7], d = n[8], p = n[9], f = n[10], g = n[11], m = n[12], v = n[13], A = n[14], y = n[15], C = p * A * u - v * f * u + v * c * g - h * A * g - p * c * y + h * f * y, I = m * f * u - d * A * u - m * c * g + l * A * g + d * c * y - l * f * y, b = d * v * u - m * p * u + m * h * g - l * v * g - d * h * y + l * p * y, w = m * p * c - d * v * c - m * h * f + l * v * f + d * h * A - l * p * A, x = r * C + o * I + a * b + s * w;
                if (0 === x) {
                    var E = "MathLight.Matrix4.getInverse(): can't invert matrix, determinant is 0";
                    if (t)throw new Error(E);
                    return console.warn(E), this.identity()
                }
                var M = 1 / x;
                return i[0] = C * M, i[1] = (v * f * s - p * A * s - v * a * g + o * A * g + p * a * y - o * f * y) * M, i[2] = (h * A * s - v * c * s + v * a * u - o * A * u - h * a * y + o * c * y) * M, i[3] = (p * c * s - h * f * s - p * a * u + o * f * u + h * a * g - o * c * g) * M, i[4] = I * M, i[5] = (d * A * s - m * f * s + m * a * g - r * A * g - d * a * y + r * f * y) * M, i[6] = (m * c * s - l * A * s - m * a * u + r * A * u + l * a * y - r * c * y) * M, i[7] = (l * f * s - d * c * s + d * a * u - r * f * u - l * a * g + r * c * g) * M, i[8] = b * M, i[9] = (m * p * s - d * v * s - m * o * g + r * v * g + d * o * y - r * p * y) * M, i[10] = (l * v * s - m * h * s + m * o * u - r * v * u - l * o * y + r * h * y) * M, i[11] = (d * h * s - l * p * s - d * o * u + r * p * u + l * o * g - r * h * g) * M, i[12] = w * M, i[13] = (d * v * a - m * p * a + m * o * f - r * v * f - d * o * A + r * p * A) * M, i[14] = (m * h * a - l * v * a - m * o * c + r * v * c + l * o * A - r * h * A) * M, i[15] = (l * p * a - d * h * a + d * o * c - r * p * c - l * o * f + r * h * f) * M, this
            }, makeRotationFromQuaternion: function (e) {
                var t = this.elements, i = e.x, n = e.y, r = e.z, o = e.w, a = i + i, s = n + n, l = r + r, h = i * a, c = i * s, u = i * l, d = n * s, p = n * l, f = r * l, g = o * a, m = o * s, v = o * l;
                return t[0] = 1 - (d + f), t[4] = c - v, t[8] = u + m, t[1] = c + v, t[5] = 1 - (h + f), t[9] = p - g, t[2] = u - m, t[6] = p + g, t[10] = 1 - (h + d), t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
            }
        }, n.Quaternion = function (e, t, i, n) {
            this._x = e || 0, this._y = t || 0, this._z = i || 0, this._w = void 0 !== n ? n : 1
        }, n.Quaternion.prototype = {
            get x() {
                return this._x
            }, set x(e) {
                this._x = e
            }, get y() {
                return this._y
            }, set y(e) {
                this._y = e
            }, get z() {
                return this._z
            }, set z(e) {
                this._z = e
            }, get w() {
                return this._w
            }, set w(e) {
                this._w = e
            }, copy: function (e) {
                this._x = e.x, this._y = e.y, this._z = e.z, this._w = e.w
            }, inverse: function () {
                return this.conjugate().normalize()
            }, conjugate: function () {
                return this._x *= -1, this._y *= -1, this._z *= -1, this
            }, length: function () {
                return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
            }, normalize: function () {
                var e = this.length();
                return 0 === e ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e = 1 / e, this._x = this._x * e, this._y = this._y * e, this._z = this._z * e, this._w = this._w * e), this
            }, multiply: function (e) {
                return this.multiplyQuaternions(this, e)
            }, premultiply: function (e) {
                return this.multiplyQuaternions(e, this)
            }, multiplyQuaternions: function (e, t) {
                var i = e._x, n = e._y, r = e._z, o = e._w, a = t._x, s = t._y, l = t._z, h = t._w;
                return this._x = i * h + o * a + n * l - r * s, this._y = n * h + o * s + r * a - i * l, this._z = r * h + o * l + i * s - n * a, this._w = o * h - i * a - n * s - r * l, this
            }
        }, n.convertWorkshopVector = function (e) {
            return new n.Vector3(-e.x, e.y, e.z)
        }, n.convertWorkshopQuaternion = function (e) {
            return new n.Quaternion(-e.x, e.y, e.z, -e.w).multiply(new n.Quaternion(Math.sqrt(2) / 2, Math.sqrt(2) / 2, 0, 0))
        }, n.normalize = function (e) {
            var t = e.x * e.x + e.y * e.y + e.z * e.z, i = Math.sqrt(t);
            e.x /= i, e.y /= i, e.z /= i
        }, n.dot = function (e, t) {
            return e.x * t.x + e.y * t.y + e.z * t.z
        }, n.setVector = function (e, t, i, n) {
            e.x = t, e.y = i, e.z = n
        }, n.copyVector = function (e, t) {
            t.x = e.x, t.y = e.y, t.z = e.z
        }, n.addVector = function (e, t) {
            e.x += t.x, e.y += t.y, e.z += t.z
        }, n.subVector = function (e, t) {
            e.x -= t.x, e.y -= t.y, e.z -= t.z
        }, t.exports = n
    }, {}],
    135: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e) {
                this.cache = null
            }

            function r() {
                this.baseUrl = null, this.cache = null
            }

            function o() {
                this.baseUrl = null
            }

            function a(e) {
                this.initialLoadingPromise = null, this.endpoint = e + "?type=3", this.urlContainer = null, this.authorizationHeader = c.getAuthorizationHeader(), this.containerClasses = [o, r, n]
            }

            var s = e("./ajax"), l = e("./logger"), h = e("../constants"), c = e("./showcase"), u = new l(i);
            n.prototype = {
                version: 1, validate: function (e) {
                    return Object.keys(e).length > 0
                }, update: function (e) {
                    return this.cache = e, $.when()
                }, get: function (e) {
                    return this.cache[e]
                }
            }, r.prototype = {
                version: 2, validate: function (e) {
                    return "base.url" in e && Object.keys(e).length > 1
                }, update: function (e) {
                    return this.baseUrl = e["base.url"], this.cache = e, $.when()
                }, get: function (e) {
                    var t = this.cache[e];
                    return t ? this.baseUrl.replace("{{filename}}", e) + t : null
                }
            }, o.prototype = {
                version: 3, validate: function (e) {
                    return e.templates && e.catalog_file
                }, update: function (e) {
                    var t = e.templates;
                    return this.baseUrl = t[0], $.when()
                }, get: function (e) {
                    return this.baseUrl.replace("{{filename}}", e)
                }
            }, a.prototype = {
                init: function () {
                    return this.initialLoadingPromise ? this.initialLoadingPromise : (setInterval(function () {
                        u.debug("refreshing urls..."), this.refresh().done(function () {
                            u.debug("refreshed")
                        }).fail(function () {
                            u.error("failed url refresh, urls might go stale soon")
                        })
                    }.bind(this), 1e3 * h.signedUrlRefreshRate), this.initialLoadingPromise = this.refresh(), this.initialLoadingPromise)
                }, refresh: function () {
                    return s.get(this.endpoint, {
                        responseType: "json",
                        prefetchFrom: "files",
                        auth: this.authorizationHeader
                    }).then(function (e) {
                        if (this.urlContainer && this.urlContainer.validate(e))return this.urlContainer.update(e);
                        for (var t = 0; t < this.containerClasses.length; t++) {
                            var i = this.containerClasses[t], n = new i;
                            if (n.validate(e))return u.info("Using urls version " + n.version), this.urlContainer = n, this.urlContainer.update(e)
                        }
                        return $.Deferred().reject("missing-urls")
                    }.bind(this), function (e) {
                        return "loading-failed"
                    })
                }, get: function (e) {
                    return this.urlContainer.get(e)
                }
            }, t.exports = a
        }).call(this, "/js/util/ModelUrls.js")
    }, {"../constants": 8, "./ajax": 138, "./logger": 146, "./showcase": 150}],
    136: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n() {
                u.call(this), this.neighbourMap = {}, this.map = null
            }

            var r = e("three"), o = e("./common"), a = e("../settings"), s = e("../objects/Panorama"), a = e("../settings"), l = e("./aStar"), h = e("./logger"), c = new h(i), u = e("./IndexedCollection"), d = e("./transitions");
            o.inherit(n, u), n.prototype.getIndex = function (e) {
                return e.id
            }, n.prototype.find = function (e, t) {
                var i = o.filterAll(this.list, e);
                return 0 === i.length ? null : (t && t.forEach(function (e) {
                    i = o.stableSort(i, e)
                }), i[0])
            }, n.prototype.sortByScore = function (e, t) {
                var i = o.filterAll(this.list, e);
                return 0 === i.length ? null : i = i.map(function (e) {
                    return {
                        pano: e, score: t.reduce(function (t, i) {
                            return t + i(e)
                        }, 0)
                    }
                }).sort(function (e, t) {
                    return t.score - e.score
                })
            }, n.prototype.lowestByScore = function (e, t, i) {
                return this.findRankedByScore(0, e, t, i)
            }, n.prototype.findRankedByScore = function (e, t, i, n) {
                n && (n.candidates = null, n.pano = null), e || (e = 0);
                var r = this.sortByScore(t, i);
                return !r || 0 === r.length || e >= r.length ? null : (n && (n.candidates = r, n.pano = r[e].pano), r[e].pano)
            }, n.prototype.showPanoScores = function (e) {
                this.list.forEach(function (e) {
                    e.removeTextSprite()
                });
                var t = 6344768;
                e.forEach(function (e) {
                    e.pano.addTextSprite(e.score.toFixed(2), t), t = 16428055
                })
            }, n.prototype.isNeighbour = function (e, t) {
                return this.neighbourMap[e.id][t.id]
            }, n.prototype.getNeighbours = function (e) {
                return this.neighbourMap[e.id]
            }, n.prototype.setNeighbour = function (e, t, i) {
                return this.neighbourMap[e.id] || (this.neighbourMap[e.id] = {}), this.neighbourMap[t.id] || (this.neighbourMap[t.id] = {}), this.neighbourMap[e.id][e.id] = !0, this.neighbourMap[t.id][t.id] = !0, this.neighbourMap[e.id][t.id] = i, this.neighbourMap[t.id][e.id] = i, this.neighbourMap[e.id]
            }, n.prototype.findClosest = function (e, t) {
                var i = [s.filters.isPanoAligned()];
                return t && i.push(s.filters.inDirection(e, t, .75)), this.find(i, [s.sortFunctions.distanceToPoint(e)])
            }, n.prototype.dualNeighbors = function (e, t) {
                var i, n = [];
                for (i in this.neighbourMap[e.id])this.neighbourMap[t.id][i] && n.push(i);
                return n
            }, n.prototype.populate_path_graph = function () {
                var e, t, i, n, o, a, s, l, h = Date.now(), u = {}, d = 0, p = new r.Vector3(0, 0, 0), f = 0, g = 0;
                for (e = 0; e < this.list.length; e += 1) {
                    o = this.list[e], s = {}, l = !1, i = o.neighbourPanos || o.findNeighourPanos();
                    for (t in i)if (i[t]) {
                        a = this.index[t], p.copy(o.floorPosition), p.sub(a.floorPosition);
                        var m = Math.sqrt(p.x * p.x + p.z * p.z), v = (Math.abs(p.y) / Math.max(m, .01), Math.max(0, Math.abs(p.y) - .2));
                        v > 0 ? (f += 1, v = Math.pow(4 * v, 2), m = Math.pow(m, 2), n = Math.sqrt(v * v + m * m)) : (g += 1, n = p.length()), s[a.id] = n, l = !0
                    }
                    l ? u[o.id] = s : d += 1
                }
                this.map = u, c.info("graph ready in " + (Date.now() - h) + "ms, " + d + " had no neighbors")
            }, n.prototype.aStarSearch = function (e, t) {
                var i = Date.now(), n = new l({
                    start: e, isEnd: function (e) {
                        return e === t
                    }, neighbor: function (e) {
                        var t = e.neighbourPanos || e.findNeighourPanos(), i = [];
                        for (var n in t)i.push(this.index[n]);
                        return i
                    }.bind(this), distance: function (e, t) {
                        var i = this.map[e.id], n = i[t.id];
                        return n
                    }.bind(this), heuristic: function (e, t) {
                        return 1
                    }.bind(this), hash: function (e) {
                        return e.id
                    }, timeout: 5e3
                });
                if (c.debug("A* search in " + (Date.now() - i) + "ms"), "success" !== n.status)return c.debug("Did not find A* path from " + e + " to " + t), null;
                c.debug("Total cost " + n.cost.toPrecision(3) + ", " + n.path.length + " steps");
                var r = [];
                return n.path.forEach(function (e) {
                    r.push(e.id)
                }), r
            }, n.prototype.includeNodesNearPath = function () {
                var e = new r.Vector3, t = new r.Vector3, i = new r.Vector3, n = new r.Vector3, o = new r.Vector3, a = new r.Vector3, s = new r.Vector3, l = new r.Vector3, h = [], c = new r.Vector3, u = new r.Vector3;
                return function (r, d) {
                    if (r)for (var p = function (e, t, i) {
                        return o.copy(t).sub(e), o.dot(i)
                    }, f = function (e, t) {
                        return p(c, e.position, i) - p(c, t.position, i)
                    }, g = 0; g < r.length - 1;) {
                        var m = r[g], v = r[g + 1], A = this.index[m], y = this.index[v];
                        c.copy(A.position), u.copy(y.position), h.length = 0, e.copy(u).sub(c), i.copy(e).normalize();
                        for (var C = 0; C < this.list.length; C++) {
                            var I = this.list[C];
                            o.copy(I.position).sub(c);
                            var b = o.dot(i);
                            if (b > 0) {
                                s.copy(i), s.multiplyScalar(b), a.copy(o), a.sub(s);
                                var w = a.length();
                                if (d > w) {
                                    t.copy(e).negate(), n.copy(t).normalize(), l.copy(I.position).sub(u);
                                    var x = l.dot(n);
                                    x > 0 && h.push(I)
                                }
                            }
                        }
                        if (h.length > 0) {
                            h.sort(f);
                            for (var E = r.length + h.length - 1; E >= g + h.length; E--)r[E] = r[E - h.length];
                            for (var M = 0; M < h.length; M++)r[M + g + 1] = h[M].id
                        }
                        g += h.length + 1
                    }
                }
            }(), n.prototype.fadeMarkerOpacity = function (e, t) {
                var i = void 0 === e ? a.panorama.markerOpacity : e, n = this.list.findIndex(function (e) {
                    return e.marker
                });
                if (!(0 > n)) {
                    var r = this.list[n].marker.material.opacity;
                    if (r !== e) {
                        var o = i - r;
                        d.trigger({
                            func: function (e, t) {
                                var i = r + e * o;
                                this.forEach(function (e) {
                                    e.marker && (e.marker.material.opacity = i)
                                })
                            }.bind(this), duration: void 0 === t ? a.markerOpacityTransitionTime : t, name: "_fpm"
                        })
                    }
                }
            }, n.prototype.update = function (e) {
                this.forEach(function (t) {
                    t.update(e)
                })
            }, t.exports = n
        }).call(this, "/js/util/PanoramaCollection.js")
    }, {
        "../objects/Panorama": 111,
        "../settings": 123,
        "./IndexedCollection": 133,
        "./aStar": 137,
        "./common": 142,
        "./logger": 146,
        "./transitions": 152,
        three: 175
    }],
    137: [function (e, t, i) {
        "use strict";
        function n(e) {
            void 0 === e.timeout && (e.timeout = 1 / 0);
            var t = e.hash || o, i = {data: e.start, g: 0, h: e.heuristic(e.start)}, n = i;
            i.f = i.h;
            var c = new s, u = new l(a), d = h();
            u.push(i), d.set(t(i.data), i);
            for (var p = new Date; u.size();) {
                if (new Date - p > e.timeout)return {status: "timeout", cost: n.g, path: r(n)};
                var f = u.pop();
                if (d["delete"](t(f.data)), e.isEnd(f.data))return {status: "success", cost: f.g, path: r(f)};
                c.add(t(f.data));
                for (var g = e.neighbor(f.data), m = 0; m < g.length; m++) {
                    var v = g[m];
                    if (!c.contains(t(v))) {
                        var A = f.g + e.distance(f.data, v), y = d.get(t(v)), C = !1;
                        if (void 0 === y)y = {data: v}, d.set(t(v), y); else {
                            if (y.g < A)continue;
                            C = !0
                        }
                        y.parent = f, y.g = A, y.h = e.heuristic(v), y.f = A + y.h, y.h < n.h && (n = y), C ? u.heapify() : u.push(y)
                    }
                }
            }
            return {status: "noPath", cost: n.g, path: r(n)}
        }

        function r(e) {
            if (void 0 !== e.parent) {
                var t = r(e.parent);
                return t.push(e.data), t
            }
            return [e.data]
        }

        function o(e) {
            return e.toString()
        }

        function a(e, t) {
            return e.f - t.f
        }

        var s = e("Set"), l = e("heap"), h = e("dict");
        t.exports = n
    }, {Set: 153, dict: 169, heap: 170}],
    138: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t, i) {
                var n = new XMLHttpRequest;
                if (i && "withCredentials" in n)n.open(e, t, i); else if ("undefined" != typeof XDomainRequest)n = new XDomainRequest, n.open(e, t); else {
                    if (i)throw"Browser does not support CORS!";
                    n.open(e, t)
                }
                return n
            }

            function r(e, t, i) {
                function o() {
                    l.warn("Retrying ", t), r(e, t, i).done(h.resolve.bind(h)).progress(h.notify.bind(h)).fail(h.reject.bind(h))
                }

                function a(e, t) {
                    var i = e.response;
                    if ("json" === t && "object" != typeof i)try {
                        i = JSON.parse(e.responseText)
                    } catch (n) {
                        return void h.reject({error: "Failed parsing JSON"})
                    } else if ("image/jpeg" === t) {
                        var r = new Uint8Array(e.response), o = new Blob([r], {type: "image/jpeg"}), a = URL.createObjectURL(o);
                        i = new Image, i.src = a, i.crossOrigin = "Anonymous", i.onload = function () {
                            URL.revokeObjectURL(a)
                        }
                    }
                    return i
                }

                var s = n(e, t, !1);
                if (i = i || {}, i.retries = void 0 !== i.retries ? i.retries : 0, i.retry = void 0 !== i.retry ? i.retry : "get" === e.toLowerCase(), i.responseType)if (["arraybuffer", "text", "json"].indexOf(i.responseType) > -1)s.responseType = i.responseType; else {
                    if ("image/jpeg" !== i.responseType)throw new Error('reponseType can only be one of "arraybuffer", "text" or "json", "image/jpeg"');
                    s.responseType = "arraybuffer"
                }
                "json" === i.responseType && s.setRequestHeader("Accept", "application/json"), i.auth && s.setRequestHeader("Authorization", i.auth), "object" == typeof i.data && (i.data = JSON.stringify(i.data), s.setRequestHeader("Content-Type", "application/json"));
                var h = $.Deferred();
                return s.onreadystatechange = function (e) {
                    if (4 == this.readyState)if (this.status >= 500 && this.status <= 600 && i.retry && i.retries < 3)i.retries++, setTimeout(o, 1e3); else if (200 == this.status) {
                        var t = a(this, i.responseType);
                        h.resolve(t)
                    } else h.reject(this)
                }, s.onprogress = function (e) {
                    h.notify(e)
                }, s.send(i.data), h.promise()
            }

            function o(e) {
                return window.MP_REQUEST_CACHE ? window.MP_REQUEST_CACHE[e] : null
            }

            function a(e, t) {
                window.MP_REQUEST_CACHE && (window.MP_REQUEST_CACHE[e] = t)
            }

            var s = e("./logger"), l = new s(i);
            window.URL = window.URL || window.webkitURL, window.MP_REQUEST_CACHE = window.MP_REQUEST_CACHE || {}, window.MP_PREFETCHED_MODELDATA = window.MP_PREFETCHED_MODELDATA || {}, setTimeout(function () {
                window.MP_REQUEST_CACHE = null, window.MP_PREFETCHED_MODELDATA = {}
            }, 6e4), t.exports = {
                get: function (e, t) {
                    var i = o(e);
                    if (i)return i;
                    var n;
                    return n = t && t.prefetchFrom && window.MP_PREFETCHED_MODELDATA[t.prefetchFrom] ? $.when(window.MP_PREFETCHED_MODELDATA[t.prefetchFrom]) : r("GET", e, t), a(e, n), n
                }, post: function (e, t) {
                    return r("POST", e, t)
                }, patch: function (e, t) {
                    return r("PATCH", e, t)
                }, getImage: function (e, t) {
                    function i() {
                        l.warn("Retrying ", e), o.getImage(e, t + 1).done(n.resolve.bind(n)).progress(n.notify.bind(n)).fail(n.reject.bind(n))
                    }

                    var n = $.Deferred(), r = new Image, o = this;
                    return t = t || 0, r.onerror = function () {
                        3 > t ? setTimeout(i, 1e3) : n.reject()
                    }, r.onload = function () {
                        n.resolve(r)
                    }, r.crossOrigin = "anonymous", r.src = e, n
                }
            }
        }).call(this, "/js/util/ajax.js")
    }, {"./logger": 146}],
    139: [function (e, t, i) {
        "use strict";
        function n(e, t) {
            var i = window.navigator.userAgent, n = i.match(e);
            return n = n ? n[1].split(t) : [], {
                major: parseInt(n[0]) || 0,
                minor: parseInt(n[1]) || 0,
                patch: parseInt(n[2]) || 0
            }
        }

        var r = e("../exception/DeviceMismatchException");
        t.exports = {
            isFullscreen: function () {
                return document.fullscreenElement || document.mozFullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement
            }, supportsFullscreen: function () {
                return document.fullscreenEnabled || document.mozFullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled
            }, isPointerLocked: function () {
                return document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement
            }, requestFullscreen: function (e, t) {
                e.requestFullscreen ? e.requestFullscreen() : e.mozRequestFullScreen ? e.mozRequestFullScreen() : e.webkitRequestFullscreen ? e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT) : e.msRequestFullscreen && e.msRequestFullscreen(), t && $(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange", browser.requestPointerLock)
            }, requestPointerLock: function () {
                var e;
                if (document.fullscreenElement)e = document.fullscreenElement(); else if (document.mozFullscreenElement)e = document.mozFullscreenElement(); else if (document.mozFullScreenElement)e = document.mozFullScreenElement(); else {
                    if (!document.webkitFullscreenElement)return;
                    e = document.webkitFullscreenElement()
                }
                e.requestPointerLock = e.requestPointerLock || e.mozRequestPointerLock || e.webkitRequestPointerLock, e.requestPointerLock(), $(document).off("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange", this)
            }, exitPointerLock: function () {
                document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock, document.exitPointerLock()
            }, exitFullscreen: function () {
                document.exitFullscreen ? document.exitFullscreen() : document.msExitFullscreen ? document.msExitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen && document.webkitExitFullscreen()
            }, details: function () {
                var e = navigator.userAgent.match("(Firefox|Chrome|Safari)/([\\d]+)");
                return e ? {name: e[1], version: parseInt(e[2]), platform: navigator.platform} : {}
            }, is: function (e) {
                return this.details() && this.details().name === e
            }, inIframe: function () {
                return window.parent !== window
            }, aspectRatio: function () {
                var e = window.innerWidth / window.innerHeight;
                return isFinite(e) ? e : 0
            }, userAgent: function () {
                return window.navigator.userAgent
            }, isMobile: function () {
                var e = navigator.userAgent || navigator.vendor || window.opera;
                return /(android|bb\d+|meego).+mobile|android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0, 4));
            }, isSmallScreen: function () {
                var e = screen.width / window.devicePixelRatio;
                return 240 > e
            }, detectIE: function () {
                var e = window.navigator.userAgent, t = e.indexOf("MSIE ");
                return -1 !== t || !!navigator.userAgent.match(/Trident.*rv\:11\./)
            }, detectSafari: function () {
                var e = window.navigator.userAgent, t = e.indexOf("Safari");
                return -1 !== t && !this.detectChrome()
            }, detectFirefox: function () {
                var e = window.navigator.userAgent;
                return -1 !== e.indexOf("Firefox")
            }, detectChrome: function () {
                var e = window.navigator.userAgent;
                return -1 !== e.indexOf("Chrome") && !this.detectOpera()
            }, detectOpera: function () {
                var e = window.navigator.userAgent;
                return -1 !== e.indexOf("OPR")
            }, detectIOS: function () {
                var e = window.navigator.userAgent, t = /iPad|iPhone|iPod/;
                return t.test(e)
            }, detectAndroid: function () {
                var e = window.navigator.userAgent;
                return -1 !== e.indexOf("Android")
            }, detectSamsungNative: function () {
                var e = window.navigator.userAgent;
                return -1 !== e.indexOf("SM-G900H") || -1 !== e.indexOf("GT-I9500") || -1 !== e.indexOf("SM-N900")
            }, detectSamsungS6: function () {
                var e = window.navigator.userAgent;
                return -1 !== e.indexOf("SM-G92")
            }, iosVersion: function () {
                if (!this.detectIOS())throw new r("Did not detect an iDevice");
                var e = /((?:\d+\_?){1,3}) like Mac OS/, t = "_";
                return n(e, t)
            }, androidVersion: function () {
                if (!this.detectAndroid())throw new r("Did not detect an Android based device");
                var e = /Android ((?:\d+\.?){1,3})/, t = ".";
                return n(e, t)
            }, valueFromCookie: function (e, t) {
                var i = new RegExp(e + "=([0-9a-f]+)(; ?|$)").exec(document.cookie);
                if (!i)return t;
                var n = i[1];
                return "boolean" == typeof t ? "true" === n || "1" === n : "number" == typeof t ? parseFloat(n) : n
            }, valueFromHash: function (e, t) {
                var i = new RegExp("[#&?]" + e + "=([^#&?]*)"), n = i.exec(window.location.href);
                if (!n)return t;
                var r = n[1];
                return "boolean" == typeof t ? "true" === r || "1" === r : "number" == typeof t ? parseFloat(r) : window.decodeURIComponent(r)
            }
        }
    }, {"../exception/DeviceMismatchException": 45}],
    140: [function (e, t, i) {
        (function (i) {
            "use strict";
            function n(e, t, i, n) {
                var a = {}, h = s.valueFromHash("start", "");
                "" === h || n || (c.debug("Start override found in parameters, trying to parse..."), a = o(h) || {}, a.tag = s.valueFromHash("tag", null), a.panoId && (a.pano = t.get(a.panoId)));
                var u = e.data.camera_start;
                return u && Object.keys(u).length > 0 && 0 === Object.keys(a).length && (a.mode = l.convertWorkshopModeInt(u.mode), a.position = u.camera.position, a.quaternion = u.camera.quaternion, u.pano && (a.pano = t.get(u.pano.uuid))), 0 === Object.keys(a).length && (a = r(e, t)), e.outsideAllowed() || a.mode === l.PANORAMA || (a = {}), 0 === Object.keys(a).length && (a.pano = t.list[0], a.position = a.pano.position, a.quaternion = a.pano.quaternion, c.info("Starting at 1st pano " + a.pano.id)), a.mode = a.mode || l.PANORAMA, a.pano || (c.debug("No pano selected, choosing the closest one to player location"), a.pano = t.findClosest(a.position || i)), a
            }

            function r(e, t) {
                if (!e.heroImage || !e.heroImage.metadata.camera_position)return {};
                var i = {}, n = e.heroImage.metadata;
                return c.debug("Using start position from thumbnail image"), i.position = n.camera_position, i.quaternion = n.camera_quaternion, 0 === n.camera_mode ? (i.mode = l.PANORAMA, i.pano = t.get(n.scan_id)) : 1 === n.camera_mode ? i.mode = l.FLOORPLAN : 2 === n.camera_mode ? i.mode = l.DOLLHOUSE : (c.debug("Unknown camera mode: " + n.camera_mode), i.mode = null, i.pano = null), i
            }

            function o(e) {
                var t = e.split(",");
                try {
                    var i = {x: parseFloat(t[2]), y: parseFloat(t[3]), z: parseFloat(t[4])}, n = {
                        x: parseFloat(t[5]),
                        y: parseFloat(t[6]),
                        z: parseFloat(t[7]),
                        w: parseFloat(t[8])
                    }, r = new a.Vector3(i.x, i.y, i.z), o = new a.Quaternion(n.x, n.y, n.z, n.w), s = {
                        mode: l.fromInt(t[0]),
                        panoId: t[1],
                        position: r,
                        quaternion: o
                    };
                    return c.debug("Overriding start with params:", s), s
                } catch (h) {
                    return c.warn('Invalid start override, ignoring: "' + e + '"', h.message), null
                }
            }

            var a = e("three"), s = (e("./math"), e("./browser")), l = e("../enum/Viewmode"), h = e("../util/logger"), c = new h(i);
            t.exports = {optionsFromString: o, getStartCameraOptions: n}
        }).call(this, "/js/util/camera.js")
    }, {"../enum/Viewmode": 42, "../util/logger": 146, "./browser": 139, "./math": 147, three: 175}],
    141: [function (e, t, i) {
        "use strict";
        function n(e, t, i) {
            return r(e.fov, t, i)
        }

        function r(e, t, i) {
            var n = window.innerWidth, r = window.innerHeight, o = n * e / r;
            return o
        }

        t.exports = {getHFOVForCamera: n, getHFOVFromVFov: r}
    }, {}],
    142: [function (e, t, i) {
        "use strict";
        var n = e("three");
        t.exports = {
            normalizeUrl: function (e) {
                return e.replace("https://", "http://")
            }, domainFromUrl: function (e) {
                var t = /^([^:]*:\/\/)?(www\.)?([^\/]+)/.exec(e);
                return t ? t[3] : e
            }, average: function (e, t) {
                if (0 === e.length)return null;
                for (var i = 0, n = 0, r = 0; r < e.length; r++) {
                    var o = t ? e[r][t] : e[r];
                    i += o, n++
                }
                return i / n
            }, countUnique: function (e) {
                for (var t = {}, i = 0; i < e.length; i++)t[e[i]] = 1 + (t[e[i]] || 0);
                return Object.keys(t).length
            }, averageVectors: function (e, t) {
                var i = new n.Vector3;
                if (0 === e.length)return i;
                for (var r = 0, o = 0; o < e.length; o++) {
                    var a = t ? e[o][t] : e[o];
                    i.add(a), r++
                }
                return i.divideScalar(r)
            }, equalLists: function (e, t) {
                if (e.length !== t.length)return !1;
                for (var i = 0; i < e.length; i++)if (e[i] !== t[i])return !1;
                return !0
            }, lowerMedian: function (e, t) {
                if (0 === e.length)return null;
                t = t || 2, e.sort(function (e, t) {
                    return e - t
                });
                var i = Math.floor(e.length / t);
                return e[i]
            }, stableSort: function (e, t) {
                return e.map(function (e, t) {
                    return {value: e, index: t}
                }).sort(function (e, i) {
                    var n = t(e.value, i.value);
                    return 0 !== n ? n : e.index - i.index
                }).map(function (e) {
                    return e.value
                })
            }, filterAll: function (e, t) {
                return e.filter(function (e) {
                    return t.every(function (t) {
                        return t(e)
                    })
                })
            }, formatDate: function (e) {
                return [e.getFullYear(), e.getMonth() + 1, e.getDate()].join("-")
            }, formatDatetime: function (e) {
                return [e.getFullYear(), e.getMonth() + 1, e.getDate(), e.getHours(), e.getMinutes()].join("-")
            }, randomString: function (e) {
                for (var t = "", i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", n = 0; e > n; n++)t += i.charAt(Math.floor(Math.random() * i.length));
                return t
            }, nth: function (e) {
                return e %= 10, 1 == e ? e + "st" : 2 == e ? e + "nd" : 3 == e ? e + "rd" : e + "th"
            }, extendObject: function (e, t) {
                return Object.keys(t).forEach(function (i) {
                    e[i] = t[i]
                }), e
            }, deepExtend: function r(e) {
                e = e || {};
                for (var t = 1; t < arguments.length; t++) {
                    var i = arguments[t];
                    if (i)for (var n in i)i.hasOwnProperty(n) && ("object" == typeof i[n] ? e[n] = r(e[n], i[n]) : e[n] = i[n])
                }
                return e
            }, inherit: function (e, t) {
                e.prototype = Object.create(t.prototype), e.prototype.constructor = e
            }, extend: function (e, t) {
                for (var i in t.prototype)e.prototype[i] = t.prototype[i]
            }
        }, Math.sign = function (e) {
            return 0 > e ? -1 : 1
        }
    }, {three: 175}],
    143: [function (e, t, i) {
        "use strict";
        var n = {};
        n.linearTween = function (e, t, i, n) {
            return i * e / n + t
        }, n.easeInQuad = function (e, t, i, n) {
            return e /= n, i * e * e + t
        }, n.easeOutQuad = function (e, t, i, n) {
            return e /= n, -i * e * (e - 2) + t
        }, n.easeInOutQuad = function (e, t, i, n) {
            return e /= n / 2, 1 > e ? i / 2 * e * e + t : (e--, -i / 2 * (e * (e - 2) - 1) + t)
        }, n.easeInCubic = function (e, t, i, n) {
            return e /= n, i * e * e * e + t
        }, n.easeOutCubic = function (e, t, i, n) {
            return e /= n, e--, i * (e * e * e + 1) + t
        }, n.easeInOutCubic = function (e, t, i, n) {
            return e /= n / 2, 1 > e ? i / 2 * e * e * e + t : (e -= 2, i / 2 * (e * e * e + 2) + t)
        }, n.easeInQuart = function (e, t, i, n) {
            return e /= n, i * e * e * e * e + t
        }, n.easeOutQuart = function (e, t, i, n) {
            return e /= n, e--, -i * (e * e * e * e - 1) + t
        }, n.easeInOutQuart = function (e, t, i, n) {
            return e /= n / 2, 1 > e ? i / 2 * e * e * e * e + t : (e -= 2, -i / 2 * (e * e * e * e - 2) + t)
        }, n.easeInQuint = function (e, t, i, n) {
            return e /= n, i * e * e * e * e * e + t
        }, n.easeOutQuint = function (e, t, i, n) {
            return e /= n, e--, i * (e * e * e * e * e + 1) + t
        }, n.easeInOutQuint = function (e, t, i, n) {
            return e /= n / 2, 1 > e ? i / 2 * e * e * e * e * e + t : (e -= 2, i / 2 * (e * e * e * e * e + 2) + t)
        }, n.easeInSine = function (e, t, i, n) {
            return -i * Math.cos(e / n * (Math.PI / 2)) + i + t
        }, n.easeOutSine = function (e, t, i, n) {
            return i * Math.sin(e / n * (Math.PI / 2)) + t
        }, n.easeInOutSine = function (e, t, i, n) {
            return -i / 2 * (Math.cos(Math.PI * e / n) - 1) + t
        }, n.easeInExpo = function (e, t, i, n) {
            return i * Math.pow(2, 10 * (e / n - 1)) + t
        }, n.easeOutExpo = function (e, t, i, n) {
            return i * (-Math.pow(2, -10 * e / n) + 1) + t
        }, n.easeInOutExpo = function (e, t, i, n) {
            return e /= n / 2, 1 > e ? i / 2 * Math.pow(2, 10 * (e - 1)) + t : (e--, i / 2 * (-Math.pow(2, -10 * e) + 2) + t)
        }, n.easeInCirc = function (e, t, i, n) {
            return e /= n, -i * (Math.sqrt(1 - e * e) - 1) + t
        }, n.easeOutCirc = function (e, t, i, n) {
            return e /= n, e--, i * Math.sqrt(1 - e * e) + t
        }, n.easeInOutCirc = function (e, t, i, n) {
            return e /= n / 2, 1 > e ? -i / 2 * (Math.sqrt(1 - e * e) - 1) + t : (e -= 2, i / 2 * (Math.sqrt(1 - e * e) + 1) + t)
        }, n.easeInElastic = function (e, t, i, n) {
            var r = 1.70158, o = 0, a = i;
            return 0 === e ? t : 1 === (e /= n) ? t + i : (o || (o = .3 * n), a < Math.abs(i) ? (a = i, r = o / 4) : r = o / (2 * Math.PI) * Math.asin(i / a), -(a * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * n - r) * (2 * Math.PI) / o)) + t)
        }, n.easeOutElastic = function (e, t, i, n) {
            var r = 1.70158, o = 0, a = i;
            return 0 === e ? t : 1 === (e /= n) ? t + i : (o || (o = .3 * n), a < Math.abs(i) ? (a = i, r = o / 4) : r = o / (2 * Math.PI) * Math.asin(i / a), a * Math.pow(2, -10 * e) * Math.sin((e * n - r) * (2 * Math.PI) / o) + i + t)
        }, n.easeInOutElastic = function (e, t, i, n) {
            var r = 1.70158, o = 0, a = i;
            return 0 === e ? t : 2 === (e /= n / 2) ? t + i : (o || (o = n * (.3 * 1.5)), a < Math.abs(i) ? (a = i, r = o / 4) : r = o / (2 * Math.PI) * Math.asin(i / a), 1 > e ? -.5 * (a * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * n - r) * (2 * Math.PI) / o)) + t : a * Math.pow(2, -10 * (e -= 1)) * Math.sin((e * n - r) * (2 * Math.PI) / o) * .5 + i + t)
        }, n.easeInBack = function (e, t, i, n, r) {
            return void 0 === r && (r = 1.70158), i * (e /= n) * e * ((r + 1) * e - r) + t
        }, n.easeOutBack = function (e, t, i, n, r) {
            return void 0 === r && (r = 1.70158), i * ((e = e / n - 1) * e * ((r + 1) * e + r) + 1) + t
        }, n.easeInOutBack = function (e, t, i, n, r) {
            return void 0 === r && (r = 1.70158), (e /= n / 2) < 1 ? i / 2 * (e * e * (((r *= 1.525) + 1) * e - r)) + t : i / 2 * ((e -= 2) * e * (((r *= 1.525) + 1) * e + r) + 2) + t
        }, n.easeOutBounce = function (e, t, i, n) {
            return (e /= n) < 1 / 2.75 ? i * (7.5625 * e * e) + t : 2 / 2.75 > e ? i * (7.5625 * (e -= 1.5 / 2.75) * e + .75) + t : 2.5 / 2.75 > e ? i * (7.5625 * (e -= 2.25 / 2.75) * e + .9375) + t : i * (7.5625 * (e -= 2.625 / 2.75) * e + .984375) + t
        }, n.easeInBounce = function (e, t, i, r) {
            return i - n.easeOutBounce(r - e, 0, i, r) + t
        }, n.easeInOutBounce = function (e, t, i, r) {
            return r / 2 > e ? .5 * n.easeInBounce(2 * e, 0, i, r) + t : .5 * n.easeOutBounce(x, 2 * e - r, 0, i, r) + .5 * i + t
        }, t.exports = n
    }, {}],
    144: [function (e, t, i) {
        "use strict";
        function n() {
            this.events = [], this.valid = !1
        }

        var r = e("../enum/Joystick");
        n.prototype.push = function (e, t) {
            this.events.push({direction: e, pano: t}), this.valid = !0
        }, n.prototype.pop = function (e) {
            var t = this.events.pop();
            return this.events.length < 1 && (this.valid = !1), t
        }, n.prototype.peek = function () {
            return this.events.length ? this.events[this.events.length - 1] : {direction: null, pano: null}
        }, n.prototype.invalidate = function () {
            this.events = [], this.valid = !1
        }, n.prototype.reversePano = function (e) {
            if (!this.valid)return null;
            var t = this.peek();
            return r.opposite(e) === t.direction ? (this.pop(), t.pano) : null
        }, t.exports = n
    }, {"../enum/Joystick": 22}],
    145: [function (e, t, i) {
        "use strict";
        t.exports = {
            vector: function (e, t) {
                var i = e.clone();
                return t = t.clone(), function (n) {
                    e.set(i.x * (1 - n) + t.x * n, i.y * (1 - n) + t.y * n, i.z * (1 - n) + t.z * n)
                }
            }, quaternion: function (e, t) {
                var i = e.clone();
                return function (n) {
                    e.copy(i).slerp(t, n)
                }
            }, property: function (e, t, i, n) {
                var r = e[t];
                return function (o) {
                    e[t] = r * (1 - o) + i * o, n && n(e[t])
                }
            }, uniform: function (e, t, i) {
                var n = e.material.uniforms[t].value;
                return function (r) {
                    e.material.uniforms[t] && (e.material.uniforms[t].value = n * (1 - r) + i * r)
                }
            }, matrix4: function (e, t) {
                var i = e.clone();
                return function (n) {
                    for (var r = e.elements, o = i.elements, a = t.elements, s = 0; 16 > s; s++)r[s] = o[s] * (1 - n) + a[s] * n
                }
            }, allUniforms: function (e, t, i) {
                var n = e.map(function (e) {
                    return this.uniform(e, t, i)
                }.bind(this));
                return function (e) {
                    n.forEach(function (t) {
                        t(e)
                    })
                }
            }
        }
    }, {}],
    146: [function (e, t, i) {
        "use strict";
        function n(e) {
            var t, i, o, a, s = e.split("/"), l = "[" + s[s.length - 1].replace(".js", "") + "]", h = {};
            if (n.consoleEnabled) {
                var c = function (e) {
                    $("#debug-console").append("<p>" + e + "</p>"), $("#debug-console")[0].scrollTop = $("#debug-console")[0].scrollHeight
                };
                t = function (e) {
                    c(Array.prototype.slice.call(arguments).join(" "))
                }, i = function (e) {
                    c(Array.prototype.slice.call(arguments).join(" "))
                }, o = function (e) {
                    c("WARN: " + Array.prototype.slice.call(arguments).join(" "))
                }, a = function (e) {
                    c("ERROR: " + Array.prototype.slice.call(arguments).join(" "))
                }
            } else console.log ? (t = console.log, i = console.info ? console.info : console.log, o = console.warn ? console.warn : console.log, a = console.error ? console.error : console.log) : t = i = o = a = function () {
            };
            var u = function (e) {
                return [l, n.timestamp()].concat(Array.prototype.slice.call(e))
            }, d = function (t, i) {
                if (r) {
                    var o = Array.prototype.slice.call(t).join(" ");
                    r.captureMessage(o, {level: i, path: e, timestamp: n.timestamp()})
                }
            }, p = function (t, i) {
                if (r) {
                    var o = Array.prototype.slice.call(t).join(" ");
                    r.captureException(new Error(o), {level: i, path: e, timestamp: n.timestamp()})
                }
            };
            return {
                debug: function () {
                    n.level >= n.levels.debug && t.apply(console, u(arguments))
                }, info: function () {
                    n.level >= n.levels.info && i.apply(console, u(arguments))
                }, warn: function () {
                    d(arguments, "warn"), n.level >= n.levels.warn && o.apply(console, u(arguments))
                }, error: function () {
                    p(arguments, "error"), n.level >= n.levels.error && a.apply(console, u(arguments))
                }, v3str: function (e, t) {
                    var i = void 0 === t ? 2 : t;
                    return "(" + e.x.toPrecision(i) + ", " + e.y.toPrecision(i) + ", " + e.z.toPrecision(i) + ")"
                }, eulstr: function (e, t) {
                    var i = void 0 === t ? 2 : t;
                    return "(" + THREE.Math.radToDeg(e.x).toPrecision(i) + ", " + THREE.Math.radToDeg(e.y).toPrecision(i) + ", " + THREE.Math.radToDeg(e.z).toPrecision(i) + ' "' + e.order + '")'
                }, time: function (e) {
                    n.level >= n.levels.debug && (h[e] = Date.now())
                }, timeEnd: function (e) {
                    if (n.level >= n.levels.debug) {
                        var t = h[e];
                        if (!t)return;
                        var i = (Date.now() - t) / 1e3;
                        this.debug(e, i + "s")
                    }
                }
            }
        }

        var r = window.Raven;
        n.timestamp = function () {
            return (Date.now() - window.navigationStart) / 1e3 + "s"
        }, n.levels = {debug: 3, info: 2, warn: 1, error: 0}, n.level = n.levels.info, t.exports = n
    }, {}],
    147: [function (e, t, i) {
        "use strict";
        var n = e("three");
        t.exports = {
            convertVisionVector: function (e) {
                return new n.Vector3(e.x, e.z, -e.y)
            }, convertVisionQuaternion: function (e) {
                return new n.Quaternion(e.x, e.z, -e.y, e.w).multiply((new n.Quaternion).setFromAxisAngle(new n.Vector3(0, 1, 0), n.Math.degToRad(90)))
            }, convertWorkshopVector: function (e) {
                return new n.Vector3(-e.x, e.y, e.z)
            }, convertWorkshopQuaternion: function (e) {
                return new n.Quaternion(-e.x, e.y, e.z, -e.w).multiply(new n.Quaternion(Math.sqrt(2) / 2, Math.sqrt(2) / 2, 0, 0))
            }, projectPositionToCanvas: function (e, t, i) {
                i = i || new n.Vector3, i.copy(e);
                var r = .5 * window.innerWidth, o = .5 * window.innerHeight;
                return i.project(t), i.x = i.x * r + r, i.y = -(i.y * o) + o, i
            }, convertScreenPositionToNDC: function (e, t, i) {
                return i = i || new n.Vector2, i.x = e / window.innerWidth * 2 - 1, i.y = 2 * -(t / window.innerHeight) + 1, i
            }, constrainedTurn: function (e) {
                var t = e % (2 * Math.PI);
                return t = t > Math.PI ? t -= 2 * Math.PI : t < -Math.PI ? t += 2 * Math.PI : t
            }, getFOVDotThreshold: function (e) {
                return Math.cos(n.Math.degToRad(e / 2))
            }
        }
    }, {three: 175}],
    148: [function (e, t, i) {
        "use strict";
        function n(e, t, i) {
            return a.map(function (n, o) {
                return e.get("pan/" + i + "/" + t + "_skybox" + r(n) + ".jpg")
            }.bind(this))
        }

        function r(e) {
            return s[e]
        }

        var o = e("../enum/GLCubeFaces"), a = [0, 1, 2, 3, 4, 5], s = {
            0: o.GL_TEXTURE_CUBE_MAP_POSITIVE_Y,
            1: o.GL_TEXTURE_CUBE_MAP_POSITIVE_Z,
            2: o.GL_TEXTURE_CUBE_MAP_POSITIVE_X,
            3: o.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z,
            4: o.GL_TEXTURE_CUBE_MAP_NEGATIVE_X,
            5: o.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y
        };
        t.exports = {mapFaceToCubemapFace: r, getCubemapUrls: n}
    }, {"../enum/GLCubeFaces": 21}],
    149: [function (e, t, i) {
        "use strict";
        t.exports = {
            captureErrors: function (e, t, i) {
                if ("Raven" in window) {
                    Raven.config(e, t).install(), i && Raven.setTagsContext(i);
                    var n = console.warn, r = console.error;
                    console.warn = function () {
                        var e = Array.prototype.slice.call(arguments);
                        Raven.captureMessage(e.join(" "), {level: "warning"}), n.apply(console, e)
                    }, console.error = function () {
                        var e = Array.prototype.slice.call(arguments);
                        Raven.captureException(new Error(e.join(" ")), {level: "error"}), r.apply(console, e)
                    }
                } else console.error("Raven not found, not capturing errors.")
            }
        }
    }, {}],
    150: [function (e, t, i) {
        (function (i) {
            "use strict";
            var n = e("./browser"), r = e("url"), o = e("./logger"), a = new o(i);
            t.exports = {
                getAuthorizationHeader: function () {
                    var e = n.valueFromHash("auth");
                    if (e)return e.replace(",", " ");
                    var t = n.valueFromCookie("token");
                    return t ? "Token " + t : null
                }, parseSidUrl: function (e) {
                    var t, i;
                    if (e = e || "", e.match(/^https?/)) {
                        var n = r.parse(e);
                        t = n.protocol + "//" + n.host, i = e
                    } else t = window.location.protocol + "//" + window.location.host, i = t + "/api/player/models/" + e;
                    return {
                        urlBase: t,
                        urlModel: i,
                        urlFiles: i + (i.match(/\/$/) ? "files" : "/files"),
                        urlThumb: i + (i.match(/\/$/) ? "thumb" : "/thumb")
                    }
                }, getModelIDFromQueryString: function () {
                    return n.valueFromHash("model") || n.valueFromHash("m")
                }, getHeroImage: function (e) {
                    for (var t = 0; t < e.length; t++)if (e[t].is_hero)return e[t];
                    return null
                }, normalizeModeldata: function (e, t) {
                    e = JSON.parse(JSON.stringify(e)), e.images.forEach(function (e) {
                        if (e.metadata && "string" == typeof e.metadata)try {
                            e.metadata = JSON.parse(e.metadata)
                        } catch (i) {
                            a.warn("Unable to parse image metadata"), e.metadata = null
                        } else"object" == typeof e.metadata && a.debug("image.metadata already a JSON object");
                        e.metadata && e.metadata.camera_quaternion && (e.metadata.camera_quaternion = t.convertWorkshopQuaternion(e.metadata.camera_quaternion)), e.metadata && e.metadata.camera_position && (e.metadata.camera_position = t.convertWorkshopVector(e.metadata.camera_position))
                    });
                    var i = e.camera_start;
                    return i && (i.pano && (i.pano.quaternion = t.convertWorkshopQuaternion(i.pano.quaternion), i.pano.position = t.convertWorkshopVector(i.pano.position)), i.camera.quaternion = t.convertWorkshopQuaternion(i.camera.quaternion), i.camera.position = t.convertWorkshopVector(i.camera.position)), e
                }
            }
        }).call(this, "/js/util/showcase.js")
    }, {"./browser": 139, "./logger": 146, url: 167}],
    151: [function (e, t, i) {
        "use strict";
        var n = e("../util/ajax"), r = e("three"), o = {};
        t.exports = {
            load: function (e, t, i) {
                var a = o[e];
                return a ? (t && setTimeout(function () {
                    t(a)
                }, 1), a) : (a = new r.Texture, a.sourceFile = e, o[e] = a, n.getImage(e).then(function (e) {
                    a.image = e, a.needsUpdate = !0, t && t(a)
                }).fail(i), a)
            }, loadBase64: function (e, t) {
                t = t || "png";
                var i = new r.Texture;
                return i.image = document.createElement("img"), i.image.setAttribute("src", "data:image/" + t + ";base64," + e), i.needsUpdate = !0, i
            }, isLoaded: function (e) {
                return !!o[e]
            }
        }
    }, {"../util/ajax": 138, three: 175}],
    152: [function (e, t, i) {
        "use strict";
        var n = e("./easing");
        t.exports = {
            globalDone: null, funcs: [], counter: 0, start: function (e, t, i, r, o, a, s) {
                return r = r || 0, this.funcs.push({
                    func: e,
                    current: -r * Math.abs(t),
                    duration: (1 - Math.max(r, 0)) * Math.abs(t),
                    done: i,
                    easing: o || n.linearTween,
                    cycling: 0 > t,
                    running: !0,
                    debug: 0 > r,
                    name: a || "T" + this.counter,
                    id: void 0 === s ? this.counter : s,
                    paused: !1
                }), e(0, 16), this.counter += 1, e
            }, trigger: function (e) {
                var t = void 0 === e.delayRatio ? 0 : e.delayRatio, i = e.func || function () {
                    }, r = void 0 === e.duration ? 0 : e.duration;
                void 0 !== e.cycling && e.cycling && (r = -Math.abs(r));
                var o = e.done || null, a = e.easing || n.linearTween, s = e.name || "R" + this.counter, l = void 0 === e.id ? this.counter : e.id;
                return this.start(i, r, o, t, a, s, l)
            }, setTimeout: function (e, t, i) {
                var n = void 0 === i ? this.counter : i;
                return this.trigger({done: e, duration: void 0 === t ? 0 : t, name: "O" + this.counter, id: n})
            }, pause: function () {
                this.paused = !0
            }, resume: function () {
                this.paused = !1
            }, update: function (e) {
                this.funcs.forEach(function (t) {
                    if (!(t.paused || (t.current += 1e3 * e, t.current < 0)))if (t.current >= t.duration && !t.cycling) {
                        var i = t.easing(1, 0, 1, 1);
                        t.func(i, 1e3 * e), t.done && t.done(), t.running = !1
                    } else {
                        var n = t.easing(t.current % t.duration / t.duration, 0, 1, 1), r = t.func(n, 1e3 * e) || !1;
                        r && (t.done && t.done(), t.running = !1)
                    }
                });
                var t = this.funcs.length;
                this.funcs = this.funcs.filter(function (e) {
                    return e.running
                });
                var i = this.funcs.length;
                if (t > 0 && 0 === i && this.globalDone) {
                    var n = this.globalDone;
                    this.globalDone = null, n()
                }
            }, adjustSpeed: function (e, t) {
                var i = this.get(e);
                i && (i.duration /= t, i.current /= t)
            }, get: function (e) {
                for (var t = 0; t < this.funcs.length; t += 1)if (this.funcs[t].func == e)return this.funcs[t];
                return null
            }, isRunning: function (e) {
                var t = this.get(e);
                return null !== t && t.running
            }, countActive: function () {
                for (var e = 0, t = 0; t < this.funcs.length; t += 1)e += this.funcs[t].running;
                return e
            }, listActive: function () {
                for (var e = [], t = 0; t < this.funcs.length; t += 1)this.funcs[t].running && e.push(this.funcs[t].name);
                return e
            }, done: function (e) {
                this.globalDone = e
            }, clearById: function (e) {
                var t = void 0 === e ? 0 : e;
                this.funcs = this.funcs.filter(function (e) {
                    return e.id !== t
                })
            }, cancel: function (e) {
                this.funcs = this.funcs.filter(function (t) {
                    return t.func !== e
                })
            }
        }
    }, {"./easing": 143}],
    153: [function (e, t, i) {
        function n(e) {
            if (this.set = {}, this.infContains = function () {
                    return !0
                }, "object" == typeof e)if (e instanceof Array)for (var t = 0; t < e.length; t++)this.set[e[t]] = !0; else this.set = e; else if ("function" == typeof e)this.infContains = e; else if ("undefined" != typeof e)throw new Error("set must be either an array or an object.")
        }

        t.exports = n, n.prototype.contains = function (e) {
            return this.set[e] ? !0 : !1
        }, n.prototype.has = n.prototype.contains, n.prototype.add = function (e) {
            if (1 == arguments.length)this.set[e] = !0; else for (var t = 0; t < arguments.length; t++)this.set[arguments[t]] = !0
        }, n.prototype.addAll = function (e) {
            if ("object" != typeof e && !(e instanceof Array))throw new Error("arr must be an array.");
            for (var t = 0; t < e.length; t++)this.add(e[t])
        }, n.prototype.remove = function (e) {
            if (1 == arguments.length)delete this.set[e]; else for (var t = 0; t < arguments.length; t++)delete this.set[arguments[t]]
        }, n.prototype["delete"] = n.prototype.remove, n.prototype.clear = function () {
            this.set = {}
        }, n.prototype.size = function () {
            return Object.keys(this.set).length
        }, n.prototype.toString = function () {
            return "{" + Object.keys(this.set).toString() + "}"
        }, n.prototype.toArray = function () {
            return "undefined" == typeof this.set ? [] : Object.keys(this.set)
        }, n.prototype["*values"] = n.prototype.toArray
    }, {}],
    154: [function (e, t, i) {
        (function (i, n) {
            "use strict";
            function r(t, r) {
                function o(e) {
                    var t, i;
                    for (t = 0; e[t]; t += 1)if (i = e[t], "." === i)e.splice(t, 1), t -= 1; else if (".." === i) {
                        if (1 === t && (".." === e[2] || ".." === e[0]))break;
                        t > 0 && (e.splice(t - 1, 2), t -= 2)
                    }
                }

                function a(e, t) {
                    var i;
                    return e && "." === e.charAt(0) && t && (i = t.split("/"), i = i.slice(0, i.length - 1), i = i.concat(e.split("/")), o(i), e = i.join("/")), e
                }

                function s(e) {
                    return function (t) {
                        return a(t, e)
                    }
                }

                function l(e) {
                    function t(t) {
                        f[e] = t
                    }

                    return t.fromText = function (e, t) {
                        throw new Error("amdefine does not implement load.fromText")
                    }, t
                }

                function h(e, i, o) {
                    var a, s, l, h;
                    if (e)s = f[e] = {}, l = {id: e, uri: n, exports: s}, a = u(r, s, l, e); else {
                        if (g)throw new Error("amdefine with no module ID cannot be called more than once per file.");
                        g = !0, s = t.exports, l = t, a = u(r, s, l, t.id)
                    }
                    i && (i = i.map(function (e) {
                        return a(e)
                    })), h = "function" == typeof o ? o.apply(l.exports, i) : o, void 0 !== h && (l.exports = h, e && (f[e] = l.exports))
                }

                function c(e, t, i) {
                    Array.isArray(e) ? (i = t, t = e, e = void 0) : "string" != typeof e && (i = e, e = t = void 0), t && !Array.isArray(t) && (i = t, t = void 0), t || (t = ["require", "exports", "module"]), e ? p[e] = [e, t, i] : h(e, t, i)
                }

                var u, d, p = {}, f = {}, g = !1, m = e("path");
                return u = function (e, t, n, r) {
                    function o(o, a) {
                        return "string" == typeof o ? d(e, t, n, o, r) : (o = o.map(function (i) {
                            return d(e, t, n, i, r)
                        }), void(a && i.nextTick(function () {
                            a.apply(null, o)
                        })))
                    }

                    return o.toUrl = function (e) {
                        return 0 === e.indexOf(".") ? a(e, m.dirname(n.filename)) : e
                    }, o
                }, r = r || function () {
                        return t.require.apply(t, arguments)
                    }, d = function (e, t, i, n, r) {
                    var o, c, g = n.indexOf("!"), m = n;
                    if (-1 === g) {
                        if (n = a(n, r), "require" === n)return u(e, t, i, r);
                        if ("exports" === n)return t;
                        if ("module" === n)return i;
                        if (f.hasOwnProperty(n))return f[n];
                        if (p[n])return h.apply(null, p[n]), f[n];
                        if (e)return e(m);
                        throw new Error("No module with ID: " + n)
                    }
                    return o = n.substring(0, g), n = n.substring(g + 1, n.length), c = d(e, t, i, o, r), n = c.normalize ? c.normalize(n, s(r)) : a(n, r), f[n] ? f[n] : (c.load(n, u(e, t, i, r), l(n), {}), f[n])
                }, c.require = function (e) {
                    return f[e] ? f[e] : p[e] ? (h.apply(null, p[e]), f[e]) : void 0
                }, c.amd = {}, c
            }

            t.exports = r
        }).call(this, e("_process"), "/node_modules/amdefine/amdefine.js")
    }, {_process: 162, path: 161}],
    155: [function (e, t, i) {
    }, {}],
    156: [function (e, t, i) {
        (function (t) {
            "use strict";
            function n() {
                try {
                    var e = new Uint8Array(1);
                    return e.__proto__ = {
                        __proto__: Uint8Array.prototype, foo: function () {
                            return 42
                        }
                    }, 42 === e.foo() && "function" == typeof e.subarray && 0 === e.subarray(1, 1).byteLength
                } catch (t) {
                    return !1
                }
            }

            function r() {
                return a.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823
            }

            function o(e, t) {
                if (r() < t)throw new RangeError("Invalid typed array length");
                return a.TYPED_ARRAY_SUPPORT ? (e = new Uint8Array(t), e.__proto__ = a.prototype) : (null === e && (e = new a(t)), e.length = t), e
            }

            function a(e, t, i) {
                if (!(a.TYPED_ARRAY_SUPPORT || this instanceof a))return new a(e, t, i);
                if ("number" == typeof e) {
                    if ("string" == typeof t)throw new Error("If encoding is specified then the first argument must be a string");
                    return c(this, e)
                }
                return s(this, e, t, i)
            }

            function s(e, t, i, n) {
                if ("number" == typeof t)throw new TypeError('"value" argument must not be a number');
                return "undefined" != typeof ArrayBuffer && t instanceof ArrayBuffer ? p(e, t, i, n) : "string" == typeof t ? u(e, t, i) : f(e, t)
            }

            function l(e) {
                if ("number" != typeof e)throw new TypeError('"size" argument must be a number');
                if (0 > e)throw new RangeError('"size" argument must not be negative')
            }

            function h(e, t, i, n) {
                return l(t), 0 >= t ? o(e, t) : void 0 !== i ? "string" == typeof n ? o(e, t).fill(i, n) : o(e, t).fill(i) : o(e, t)
            }

            function c(e, t) {
                if (l(t), e = o(e, 0 > t ? 0 : 0 | g(t)), !a.TYPED_ARRAY_SUPPORT)for (var i = 0; t > i; ++i)e[i] = 0;
                return e
            }

            function u(e, t, i) {
                if (("string" != typeof i || "" === i) && (i = "utf8"), !a.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');
                var n = 0 | v(t, i);
                e = o(e, n);
                var r = e.write(t, i);
                return r !== n && (e = e.slice(0, r)), e
            }

            function d(e, t) {
                var i = t.length < 0 ? 0 : 0 | g(t.length);
                e = o(e, i);
                for (var n = 0; i > n; n += 1)e[n] = 255 & t[n];
                return e
            }

            function p(e, t, i, n) {
                if (t.byteLength, 0 > i || t.byteLength < i)throw new RangeError("'offset' is out of bounds");
                if (t.byteLength < i + (n || 0))throw new RangeError("'length' is out of bounds");
                return t = void 0 === i && void 0 === n ? new Uint8Array(t) : void 0 === n ? new Uint8Array(t, i) : new Uint8Array(t, i, n), a.TYPED_ARRAY_SUPPORT ? (e = t, e.__proto__ = a.prototype) : e = d(e, t), e
            }

            function f(e, t) {
                if (a.isBuffer(t)) {
                    var i = 0 | g(t.length);
                    return e = o(e, i), 0 === e.length ? e : (t.copy(e, 0, 0, i), e)
                }
                if (t) {
                    if ("undefined" != typeof ArrayBuffer && t.buffer instanceof ArrayBuffer || "length" in t)return "number" != typeof t.length || q(t.length) ? o(e, 0) : d(e, t);
                    if ("Buffer" === t.type && $(t.data))return d(e, t.data)
                }
                throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
            }

            function g(e) {
                if (e >= r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + r().toString(16) + " bytes");
                return 0 | e
            }

            function m(e) {
                return +e != e && (e = 0), a.alloc(+e)
            }

            function v(e, t) {
                if (a.isBuffer(e))return e.length;
                if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(e) || e instanceof ArrayBuffer))return e.byteLength;
                "string" != typeof e && (e = "" + e);
                var i = e.length;
                if (0 === i)return 0;
                for (var n = !1; ;)switch (t) {
                    case"ascii":
                    case"latin1":
                    case"binary":
                        return i;
                    case"utf8":
                    case"utf-8":
                    case void 0:
                        return W(e).length;
                    case"ucs2":
                    case"ucs-2":
                    case"utf16le":
                    case"utf-16le":
                        return 2 * i;
                    case"hex":
                        return i >>> 1;
                    case"base64":
                        return Q(e).length;
                    default:
                        if (n)return W(e).length;
                        t = ("" + t).toLowerCase(), n = !0
                }
            }

            function A(e, t, i) {
                var n = !1;
                if ((void 0 === t || 0 > t) && (t = 0), t > this.length)return "";
                if ((void 0 === i || i > this.length) && (i = this.length), 0 >= i)return "";
                if (i >>>= 0, t >>>= 0, t >= i)return "";
                for (e || (e = "utf8"); ;)switch (e) {
                    case"hex":
                        return R(this, t, i);
                    case"utf8":
                    case"utf-8":
                        return P(this, t, i);
                    case"ascii":
                        return L(this, t, i);
                    case"latin1":
                    case"binary":
                        return D(this, t, i);
                    case"base64":
                        return S(this, t, i);
                    case"ucs2":
                    case"ucs-2":
                    case"utf16le":
                    case"utf-16le":
                        return B(this, t, i);
                    default:
                        if (n)throw new TypeError("Unknown encoding: " + e);
                        e = (e + "").toLowerCase(), n = !0
                }
            }

            function y(e, t, i) {
                var n = e[t];
                e[t] = e[i], e[i] = n
            }

            function C(e, t, i, n, r) {
                if (0 === e.length)return -1;
                if ("string" == typeof i ? (n = i, i = 0) : i > 2147483647 ? i = 2147483647 : -2147483648 > i && (i = -2147483648), i = +i, isNaN(i) && (i = r ? 0 : e.length - 1), 0 > i && (i = e.length + i), i >= e.length) {
                    if (r)return -1;
                    i = e.length - 1
                } else if (0 > i) {
                    if (!r)return -1;
                    i = 0
                }
                if ("string" == typeof t && (t = a.from(t, n)), a.isBuffer(t))return 0 === t.length ? -1 : I(e, t, i, n, r);
                if ("number" == typeof t)return t = 255 & t, a.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? r ? Uint8Array.prototype.indexOf.call(e, t, i) : Uint8Array.prototype.lastIndexOf.call(e, t, i) : I(e, [t], i, n, r);
                throw new TypeError("val must be string, number or Buffer")
            }

            function I(e, t, i, n, r) {
                function o(e, t) {
                    return 1 === a ? e[t] : e.readUInt16BE(t * a)
                }

                var a = 1, s = e.length, l = t.length;
                if (void 0 !== n && (n = String(n).toLowerCase(), "ucs2" === n || "ucs-2" === n || "utf16le" === n || "utf-16le" === n)) {
                    if (e.length < 2 || t.length < 2)return -1;
                    a = 2, s /= 2, l /= 2, i /= 2
                }
                var h;
                if (r) {
                    var c = -1;
                    for (h = i; s > h; h++)if (o(e, h) === o(t, -1 === c ? 0 : h - c)) {
                        if (-1 === c && (c = h), h - c + 1 === l)return c * a
                    } else-1 !== c && (h -= h - c), c = -1
                } else for (i + l > s && (i = s - l), h = i; h >= 0; h--) {
                    for (var u = !0, d = 0; l > d; d++)if (o(e, h + d) !== o(t, d)) {
                        u = !1;
                        break
                    }
                    if (u)return h
                }
                return -1
            }

            function b(e, t, i, n) {
                i = Number(i) || 0;
                var r = e.length - i;
                n ? (n = Number(n), n > r && (n = r)) : n = r;
                var o = t.length;
                if (o % 2 !== 0)throw new TypeError("Invalid hex string");
                n > o / 2 && (n = o / 2);
                for (var a = 0; n > a; ++a) {
                    var s = parseInt(t.substr(2 * a, 2), 16);
                    if (isNaN(s))return a;
                    e[i + a] = s
                }
                return a
            }

            function w(e, t, i, n) {
                return Z(W(t, e.length - i), e, i, n)
            }

            function x(e, t, i, n) {
                return Z(Y(t), e, i, n)
            }

            function E(e, t, i, n) {
                return x(e, t, i, n)
            }

            function M(e, t, i, n) {
                return Z(Q(t), e, i, n)
            }

            function T(e, t, i, n) {
                return Z(X(t, e.length - i), e, i, n)
            }

            function S(e, t, i) {
                return 0 === t && i === e.length ? K.fromByteArray(e) : K.fromByteArray(e.slice(t, i))
            }

            function P(e, t, i) {
                i = Math.min(e.length, i);
                for (var n = [], r = t; i > r;) {
                    var o = e[r], a = null, s = o > 239 ? 4 : o > 223 ? 3 : o > 191 ? 2 : 1;
                    if (i >= r + s) {
                        var l, h, c, u;
                        switch (s) {
                            case 1:
                                128 > o && (a = o);
                                break;
                            case 2:
                                l = e[r + 1], 128 === (192 & l) && (u = (31 & o) << 6 | 63 & l, u > 127 && (a = u));
                                break;
                            case 3:
                                l = e[r + 1], h = e[r + 2], 128 === (192 & l) && 128 === (192 & h) && (u = (15 & o) << 12 | (63 & l) << 6 | 63 & h, u > 2047 && (55296 > u || u > 57343) && (a = u));
                                break;
                            case 4:
                                l = e[r + 1], h = e[r + 2], c = e[r + 3], 128 === (192 & l) && 128 === (192 & h) && 128 === (192 & c) && (u = (15 & o) << 18 | (63 & l) << 12 | (63 & h) << 6 | 63 & c, u > 65535 && 1114112 > u && (a = u))
                        }
                    }
                    null === a ? (a = 65533, s = 1) : a > 65535 && (a -= 65536, n.push(a >>> 10 & 1023 | 55296), a = 56320 | 1023 & a), n.push(a), r += s
                }
                return _(n)
            }

            function _(e) {
                var t = e.length;
                if (ee >= t)return String.fromCharCode.apply(String, e);
                for (var i = "", n = 0; t > n;)i += String.fromCharCode.apply(String, e.slice(n, n += ee));
                return i
            }

            function L(e, t, i) {
                var n = "";
                i = Math.min(e.length, i);
                for (var r = t; i > r; ++r)n += String.fromCharCode(127 & e[r]);
                return n
            }

            function D(e, t, i) {
                var n = "";
                i = Math.min(e.length, i);
                for (var r = t; i > r; ++r)n += String.fromCharCode(e[r]);
                return n
            }

            function R(e, t, i) {
                var n = e.length;
                (!t || 0 > t) && (t = 0), (!i || 0 > i || i > n) && (i = n);
                for (var r = "", o = t; i > o; ++o)r += j(e[o]);
                return r
            }

            function B(e, t, i) {
                for (var n = e.slice(t, i), r = "", o = 0; o < n.length; o += 2)r += String.fromCharCode(n[o] + 256 * n[o + 1]);
                return r
            }

            function O(e, t, i) {
                if (e % 1 !== 0 || 0 > e)throw new RangeError("offset is not uint");
                if (e + t > i)throw new RangeError("Trying to access beyond buffer length")
            }

            function F(e, t, i, n, r, o) {
                if (!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');
                if (t > r || o > t)throw new RangeError('"value" argument is out of bounds');
                if (i + n > e.length)throw new RangeError("Index out of range")
            }

            function k(e, t, i, n) {
                0 > t && (t = 65535 + t + 1);
                for (var r = 0, o = Math.min(e.length - i, 2); o > r; ++r)e[i + r] = (t & 255 << 8 * (n ? r : 1 - r)) >>> 8 * (n ? r : 1 - r)
            }

            function N(e, t, i, n) {
                0 > t && (t = 4294967295 + t + 1);
                for (var r = 0, o = Math.min(e.length - i, 4); o > r; ++r)e[i + r] = t >>> 8 * (n ? r : 3 - r) & 255
            }

            function U(e, t, i, n, r, o) {
                if (i + n > e.length)throw new RangeError("Index out of range");
                if (0 > i)throw new RangeError("Index out of range")
            }

            function V(e, t, i, n, r) {
                return r || U(e, t, i, 4, 3.4028234663852886e38, -3.4028234663852886e38), J.write(e, t, i, n, 23, 4), i + 4
            }

            function z(e, t, i, n, r) {
                return r || U(e, t, i, 8, 1.7976931348623157e308, -1.7976931348623157e308), J.write(e, t, i, n, 52, 8), i + 8
            }

            function G(e) {
                if (e = H(e).replace(te, ""), e.length < 2)return "";
                for (; e.length % 4 !== 0;)e += "=";
                return e
            }

            function H(e) {
                return e.trim ? e.trim() : e.replace(/^\s+|\s+$/g, "")
            }

            function j(e) {
                return 16 > e ? "0" + e.toString(16) : e.toString(16)
            }

            function W(e, t) {
                t = t || 1 / 0;
                for (var i, n = e.length, r = null, o = [], a = 0; n > a; ++a) {
                    if (i = e.charCodeAt(a), i > 55295 && 57344 > i) {
                        if (!r) {
                            if (i > 56319) {
                                (t -= 3) > -1 && o.push(239, 191, 189);
                                continue
                            }
                            if (a + 1 === n) {
                                (t -= 3) > -1 && o.push(239, 191, 189);
                                continue
                            }
                            r = i;
                            continue
                        }
                        if (56320 > i) {
                            (t -= 3) > -1 && o.push(239, 191, 189), r = i;
                            continue
                        }
                        i = (r - 55296 << 10 | i - 56320) + 65536
                    } else r && (t -= 3) > -1 && o.push(239, 191, 189);
                    if (r = null, 128 > i) {
                        if ((t -= 1) < 0)break;
                        o.push(i)
                    } else if (2048 > i) {
                        if ((t -= 2) < 0)break;
                        o.push(i >> 6 | 192, 63 & i | 128)
                    } else if (65536 > i) {
                        if ((t -= 3) < 0)break;
                        o.push(i >> 12 | 224, i >> 6 & 63 | 128, 63 & i | 128)
                    } else {
                        if (!(1114112 > i))throw new Error("Invalid code point");
                        if ((t -= 4) < 0)break;
                        o.push(i >> 18 | 240, i >> 12 & 63 | 128, i >> 6 & 63 | 128, 63 & i | 128)
                    }
                }
                return o
            }

            function Y(e) {
                for (var t = [], i = 0; i < e.length; ++i)t.push(255 & e.charCodeAt(i));
                return t
            }

            function X(e, t) {
                for (var i, n, r, o = [], a = 0; a < e.length && !((t -= 2) < 0); ++a)i = e.charCodeAt(a), n = i >> 8, r = i % 256, o.push(r), o.push(n);
                return o
            }

            function Q(e) {
                return K.toByteArray(G(e))
            }

            function Z(e, t, i, n) {
                for (var r = 0; n > r && !(r + i >= t.length || r >= e.length); ++r)t[r + i] = e[r];
                return r
            }

            function q(e) {
                return e !== e
            }

            var K = e("base64-js"), J = e("ieee754"), $ = e("isarray");
            i.Buffer = a, i.SlowBuffer = m, i.INSPECT_MAX_BYTES = 50, a.TYPED_ARRAY_SUPPORT = void 0 !== t.TYPED_ARRAY_SUPPORT ? t.TYPED_ARRAY_SUPPORT : n(), i.kMaxLength = r(), a.poolSize = 8192, a._augment = function (e) {
                return e.__proto__ = a.prototype, e
            }, a.from = function (e, t, i) {
                return s(null, e, t, i)
            }, a.TYPED_ARRAY_SUPPORT && (a.prototype.__proto__ = Uint8Array.prototype,
                a.__proto__ = Uint8Array, "undefined" != typeof Symbol && Symbol.species && a[Symbol.species] === a && Object.defineProperty(a, Symbol.species, {
                value: null,
                configurable: !0
            })), a.alloc = function (e, t, i) {
                return h(null, e, t, i)
            }, a.allocUnsafe = function (e) {
                return c(null, e)
            }, a.allocUnsafeSlow = function (e) {
                return c(null, e)
            }, a.isBuffer = function (e) {
                return !(null == e || !e._isBuffer)
            }, a.compare = function (e, t) {
                if (!a.isBuffer(e) || !a.isBuffer(t))throw new TypeError("Arguments must be Buffers");
                if (e === t)return 0;
                for (var i = e.length, n = t.length, r = 0, o = Math.min(i, n); o > r; ++r)if (e[r] !== t[r]) {
                    i = e[r], n = t[r];
                    break
                }
                return n > i ? -1 : i > n ? 1 : 0
            }, a.isEncoding = function (e) {
                switch (String(e).toLowerCase()) {
                    case"hex":
                    case"utf8":
                    case"utf-8":
                    case"ascii":
                    case"latin1":
                    case"binary":
                    case"base64":
                    case"ucs2":
                    case"ucs-2":
                    case"utf16le":
                    case"utf-16le":
                        return !0;
                    default:
                        return !1
                }
            }, a.concat = function (e, t) {
                if (!$(e))throw new TypeError('"list" argument must be an Array of Buffers');
                if (0 === e.length)return a.alloc(0);
                var i;
                if (void 0 === t)for (t = 0, i = 0; i < e.length; ++i)t += e[i].length;
                var n = a.allocUnsafe(t), r = 0;
                for (i = 0; i < e.length; ++i) {
                    var o = e[i];
                    if (!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');
                    o.copy(n, r), r += o.length
                }
                return n
            }, a.byteLength = v, a.prototype._isBuffer = !0, a.prototype.swap16 = function () {
                var e = this.length;
                if (e % 2 !== 0)throw new RangeError("Buffer size must be a multiple of 16-bits");
                for (var t = 0; e > t; t += 2)y(this, t, t + 1);
                return this
            }, a.prototype.swap32 = function () {
                var e = this.length;
                if (e % 4 !== 0)throw new RangeError("Buffer size must be a multiple of 32-bits");
                for (var t = 0; e > t; t += 4)y(this, t, t + 3), y(this, t + 1, t + 2);
                return this
            }, a.prototype.swap64 = function () {
                var e = this.length;
                if (e % 8 !== 0)throw new RangeError("Buffer size must be a multiple of 64-bits");
                for (var t = 0; e > t; t += 8)y(this, t, t + 7), y(this, t + 1, t + 6), y(this, t + 2, t + 5), y(this, t + 3, t + 4);
                return this
            }, a.prototype.toString = function () {
                var e = 0 | this.length;
                return 0 === e ? "" : 0 === arguments.length ? P(this, 0, e) : A.apply(this, arguments)
            }, a.prototype.equals = function (e) {
                if (!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");
                return this === e ? !0 : 0 === a.compare(this, e)
            }, a.prototype.inspect = function () {
                var e = "", t = i.INSPECT_MAX_BYTES;
                return this.length > 0 && (e = this.toString("hex", 0, t).match(/.{2}/g).join(" "), this.length > t && (e += " ... ")), "<Buffer " + e + ">"
            }, a.prototype.compare = function (e, t, i, n, r) {
                if (!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");
                if (void 0 === t && (t = 0), void 0 === i && (i = e ? e.length : 0), void 0 === n && (n = 0), void 0 === r && (r = this.length), 0 > t || i > e.length || 0 > n || r > this.length)throw new RangeError("out of range index");
                if (n >= r && t >= i)return 0;
                if (n >= r)return -1;
                if (t >= i)return 1;
                if (t >>>= 0, i >>>= 0, n >>>= 0, r >>>= 0, this === e)return 0;
                for (var o = r - n, s = i - t, l = Math.min(o, s), h = this.slice(n, r), c = e.slice(t, i), u = 0; l > u; ++u)if (h[u] !== c[u]) {
                    o = h[u], s = c[u];
                    break
                }
                return s > o ? -1 : o > s ? 1 : 0
            }, a.prototype.includes = function (e, t, i) {
                return -1 !== this.indexOf(e, t, i)
            }, a.prototype.indexOf = function (e, t, i) {
                return C(this, e, t, i, !0)
            }, a.prototype.lastIndexOf = function (e, t, i) {
                return C(this, e, t, i, !1)
            }, a.prototype.write = function (e, t, i, n) {
                if (void 0 === t)n = "utf8", i = this.length, t = 0; else if (void 0 === i && "string" == typeof t)n = t, i = this.length, t = 0; else {
                    if (!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                    t = 0 | t, isFinite(i) ? (i = 0 | i, void 0 === n && (n = "utf8")) : (n = i, i = void 0)
                }
                var r = this.length - t;
                if ((void 0 === i || i > r) && (i = r), e.length > 0 && (0 > i || 0 > t) || t > this.length)throw new RangeError("Attempt to write outside buffer bounds");
                n || (n = "utf8");
                for (var o = !1; ;)switch (n) {
                    case"hex":
                        return b(this, e, t, i);
                    case"utf8":
                    case"utf-8":
                        return w(this, e, t, i);
                    case"ascii":
                        return x(this, e, t, i);
                    case"latin1":
                    case"binary":
                        return E(this, e, t, i);
                    case"base64":
                        return M(this, e, t, i);
                    case"ucs2":
                    case"ucs-2":
                    case"utf16le":
                    case"utf-16le":
                        return T(this, e, t, i);
                    default:
                        if (o)throw new TypeError("Unknown encoding: " + n);
                        n = ("" + n).toLowerCase(), o = !0
                }
            }, a.prototype.toJSON = function () {
                return {type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0)}
            };
            var ee = 4096;
            a.prototype.slice = function (e, t) {
                var i = this.length;
                e = ~~e, t = void 0 === t ? i : ~~t, 0 > e ? (e += i, 0 > e && (e = 0)) : e > i && (e = i), 0 > t ? (t += i, 0 > t && (t = 0)) : t > i && (t = i), e > t && (t = e);
                var n;
                if (a.TYPED_ARRAY_SUPPORT)n = this.subarray(e, t), n.__proto__ = a.prototype; else {
                    var r = t - e;
                    n = new a(r, void 0);
                    for (var o = 0; r > o; ++o)n[o] = this[o + e]
                }
                return n
            }, a.prototype.readUIntLE = function (e, t, i) {
                e = 0 | e, t = 0 | t, i || O(e, t, this.length);
                for (var n = this[e], r = 1, o = 0; ++o < t && (r *= 256);)n += this[e + o] * r;
                return n
            }, a.prototype.readUIntBE = function (e, t, i) {
                e = 0 | e, t = 0 | t, i || O(e, t, this.length);
                for (var n = this[e + --t], r = 1; t > 0 && (r *= 256);)n += this[e + --t] * r;
                return n
            }, a.prototype.readUInt8 = function (e, t) {
                return t || O(e, 1, this.length), this[e]
            }, a.prototype.readUInt16LE = function (e, t) {
                return t || O(e, 2, this.length), this[e] | this[e + 1] << 8
            }, a.prototype.readUInt16BE = function (e, t) {
                return t || O(e, 2, this.length), this[e] << 8 | this[e + 1]
            }, a.prototype.readUInt32LE = function (e, t) {
                return t || O(e, 4, this.length), (this[e] | this[e + 1] << 8 | this[e + 2] << 16) + 16777216 * this[e + 3]
            }, a.prototype.readUInt32BE = function (e, t) {
                return t || O(e, 4, this.length), 16777216 * this[e] + (this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3])
            }, a.prototype.readIntLE = function (e, t, i) {
                e = 0 | e, t = 0 | t, i || O(e, t, this.length);
                for (var n = this[e], r = 1, o = 0; ++o < t && (r *= 256);)n += this[e + o] * r;
                return r *= 128, n >= r && (n -= Math.pow(2, 8 * t)), n
            }, a.prototype.readIntBE = function (e, t, i) {
                e = 0 | e, t = 0 | t, i || O(e, t, this.length);
                for (var n = t, r = 1, o = this[e + --n]; n > 0 && (r *= 256);)o += this[e + --n] * r;
                return r *= 128, o >= r && (o -= Math.pow(2, 8 * t)), o
            }, a.prototype.readInt8 = function (e, t) {
                return t || O(e, 1, this.length), 128 & this[e] ? -1 * (255 - this[e] + 1) : this[e]
            }, a.prototype.readInt16LE = function (e, t) {
                t || O(e, 2, this.length);
                var i = this[e] | this[e + 1] << 8;
                return 32768 & i ? 4294901760 | i : i
            }, a.prototype.readInt16BE = function (e, t) {
                t || O(e, 2, this.length);
                var i = this[e + 1] | this[e] << 8;
                return 32768 & i ? 4294901760 | i : i
            }, a.prototype.readInt32LE = function (e, t) {
                return t || O(e, 4, this.length), this[e] | this[e + 1] << 8 | this[e + 2] << 16 | this[e + 3] << 24
            }, a.prototype.readInt32BE = function (e, t) {
                return t || O(e, 4, this.length), this[e] << 24 | this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3]
            }, a.prototype.readFloatLE = function (e, t) {
                return t || O(e, 4, this.length), J.read(this, e, !0, 23, 4)
            }, a.prototype.readFloatBE = function (e, t) {
                return t || O(e, 4, this.length), J.read(this, e, !1, 23, 4)
            }, a.prototype.readDoubleLE = function (e, t) {
                return t || O(e, 8, this.length), J.read(this, e, !0, 52, 8)
            }, a.prototype.readDoubleBE = function (e, t) {
                return t || O(e, 8, this.length), J.read(this, e, !1, 52, 8)
            }, a.prototype.writeUIntLE = function (e, t, i, n) {
                if (e = +e, t = 0 | t, i = 0 | i, !n) {
                    var r = Math.pow(2, 8 * i) - 1;
                    F(this, e, t, i, r, 0)
                }
                var o = 1, a = 0;
                for (this[t] = 255 & e; ++a < i && (o *= 256);)this[t + a] = e / o & 255;
                return t + i
            }, a.prototype.writeUIntBE = function (e, t, i, n) {
                if (e = +e, t = 0 | t, i = 0 | i, !n) {
                    var r = Math.pow(2, 8 * i) - 1;
                    F(this, e, t, i, r, 0)
                }
                var o = i - 1, a = 1;
                for (this[t + o] = 255 & e; --o >= 0 && (a *= 256);)this[t + o] = e / a & 255;
                return t + i
            }, a.prototype.writeUInt8 = function (e, t, i) {
                return e = +e, t = 0 | t, i || F(this, e, t, 1, 255, 0), a.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)), this[t] = 255 & e, t + 1
            }, a.prototype.writeUInt16LE = function (e, t, i) {
                return e = +e, t = 0 | t, i || F(this, e, t, 2, 65535, 0), a.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e, this[t + 1] = e >>> 8) : k(this, e, t, !0), t + 2
            }, a.prototype.writeUInt16BE = function (e, t, i) {
                return e = +e, t = 0 | t, i || F(this, e, t, 2, 65535, 0), a.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 8, this[t + 1] = 255 & e) : k(this, e, t, !1), t + 2
            }, a.prototype.writeUInt32LE = function (e, t, i) {
                return e = +e, t = 0 | t, i || F(this, e, t, 4, 4294967295, 0), a.TYPED_ARRAY_SUPPORT ? (this[t + 3] = e >>> 24, this[t + 2] = e >>> 16, this[t + 1] = e >>> 8, this[t] = 255 & e) : N(this, e, t, !0), t + 4
            }, a.prototype.writeUInt32BE = function (e, t, i) {
                return e = +e, t = 0 | t, i || F(this, e, t, 4, 4294967295, 0), a.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 24, this[t + 1] = e >>> 16, this[t + 2] = e >>> 8, this[t + 3] = 255 & e) : N(this, e, t, !1), t + 4
            }, a.prototype.writeIntLE = function (e, t, i, n) {
                if (e = +e, t = 0 | t, !n) {
                    var r = Math.pow(2, 8 * i - 1);
                    F(this, e, t, i, r - 1, -r)
                }
                var o = 0, a = 1, s = 0;
                for (this[t] = 255 & e; ++o < i && (a *= 256);)0 > e && 0 === s && 0 !== this[t + o - 1] && (s = 1), this[t + o] = (e / a >> 0) - s & 255;
                return t + i
            }, a.prototype.writeIntBE = function (e, t, i, n) {
                if (e = +e, t = 0 | t, !n) {
                    var r = Math.pow(2, 8 * i - 1);
                    F(this, e, t, i, r - 1, -r)
                }
                var o = i - 1, a = 1, s = 0;
                for (this[t + o] = 255 & e; --o >= 0 && (a *= 256);)0 > e && 0 === s && 0 !== this[t + o + 1] && (s = 1), this[t + o] = (e / a >> 0) - s & 255;
                return t + i
            }, a.prototype.writeInt8 = function (e, t, i) {
                return e = +e, t = 0 | t, i || F(this, e, t, 1, 127, -128), a.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)), 0 > e && (e = 255 + e + 1), this[t] = 255 & e, t + 1
            }, a.prototype.writeInt16LE = function (e, t, i) {
                return e = +e, t = 0 | t, i || F(this, e, t, 2, 32767, -32768), a.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e, this[t + 1] = e >>> 8) : k(this, e, t, !0), t + 2
            }, a.prototype.writeInt16BE = function (e, t, i) {
                return e = +e, t = 0 | t, i || F(this, e, t, 2, 32767, -32768), a.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 8, this[t + 1] = 255 & e) : k(this, e, t, !1), t + 2
            }, a.prototype.writeInt32LE = function (e, t, i) {
                return e = +e, t = 0 | t, i || F(this, e, t, 4, 2147483647, -2147483648), a.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e, this[t + 1] = e >>> 8, this[t + 2] = e >>> 16, this[t + 3] = e >>> 24) : N(this, e, t, !0), t + 4
            }, a.prototype.writeInt32BE = function (e, t, i) {
                return e = +e, t = 0 | t, i || F(this, e, t, 4, 2147483647, -2147483648), 0 > e && (e = 4294967295 + e + 1), a.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 24, this[t + 1] = e >>> 16, this[t + 2] = e >>> 8, this[t + 3] = 255 & e) : N(this, e, t, !1), t + 4
            }, a.prototype.writeFloatLE = function (e, t, i) {
                return V(this, e, t, !0, i)
            }, a.prototype.writeFloatBE = function (e, t, i) {
                return V(this, e, t, !1, i)
            }, a.prototype.writeDoubleLE = function (e, t, i) {
                return z(this, e, t, !0, i)
            }, a.prototype.writeDoubleBE = function (e, t, i) {
                return z(this, e, t, !1, i)
            }, a.prototype.copy = function (e, t, i, n) {
                if (i || (i = 0), n || 0 === n || (n = this.length), t >= e.length && (t = e.length), t || (t = 0), n > 0 && i > n && (n = i), n === i)return 0;
                if (0 === e.length || 0 === this.length)return 0;
                if (0 > t)throw new RangeError("targetStart out of bounds");
                if (0 > i || i >= this.length)throw new RangeError("sourceStart out of bounds");
                if (0 > n)throw new RangeError("sourceEnd out of bounds");
                n > this.length && (n = this.length), e.length - t < n - i && (n = e.length - t + i);
                var r, o = n - i;
                if (this === e && t > i && n > t)for (r = o - 1; r >= 0; --r)e[r + t] = this[r + i]; else if (1e3 > o || !a.TYPED_ARRAY_SUPPORT)for (r = 0; o > r; ++r)e[r + t] = this[r + i]; else Uint8Array.prototype.set.call(e, this.subarray(i, i + o), t);
                return o
            }, a.prototype.fill = function (e, t, i, n) {
                if ("string" == typeof e) {
                    if ("string" == typeof t ? (n = t, t = 0, i = this.length) : "string" == typeof i && (n = i, i = this.length), 1 === e.length) {
                        var r = e.charCodeAt(0);
                        256 > r && (e = r)
                    }
                    if (void 0 !== n && "string" != typeof n)throw new TypeError("encoding must be a string");
                    if ("string" == typeof n && !a.isEncoding(n))throw new TypeError("Unknown encoding: " + n)
                } else"number" == typeof e && (e = 255 & e);
                if (0 > t || this.length < t || this.length < i)throw new RangeError("Out of range index");
                if (t >= i)return this;
                t >>>= 0, i = void 0 === i ? this.length : i >>> 0, e || (e = 0);
                var o;
                if ("number" == typeof e)for (o = t; i > o; ++o)this[o] = e; else {
                    var s = a.isBuffer(e) ? e : W(new a(e, n).toString()), l = s.length;
                    for (o = 0; i - t > o; ++o)this[o + t] = s[o % l]
                }
                return this
            };
            var te = /[^+\/0-9A-Za-z-_]/g
        }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
    }, {"base64-js": 157, ieee754: 158, isarray: 159}],
    157: [function (e, t, i) {
        "use strict";
        function n() {
            for (var e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", t = 0, i = e.length; i > t; ++t)l[t] = e[t], h[e.charCodeAt(t)] = t;
            h["-".charCodeAt(0)] = 62, h["_".charCodeAt(0)] = 63
        }

        function r(e) {
            var t, i, n, r, o, a, s = e.length;
            if (s % 4 > 0)throw new Error("Invalid string. Length must be a multiple of 4");
            o = "=" === e[s - 2] ? 2 : "=" === e[s - 1] ? 1 : 0, a = new c(3 * s / 4 - o), n = o > 0 ? s - 4 : s;
            var l = 0;
            for (t = 0, i = 0; n > t; t += 4, i += 3)r = h[e.charCodeAt(t)] << 18 | h[e.charCodeAt(t + 1)] << 12 | h[e.charCodeAt(t + 2)] << 6 | h[e.charCodeAt(t + 3)], a[l++] = r >> 16 & 255, a[l++] = r >> 8 & 255, a[l++] = 255 & r;
            return 2 === o ? (r = h[e.charCodeAt(t)] << 2 | h[e.charCodeAt(t + 1)] >> 4, a[l++] = 255 & r) : 1 === o && (r = h[e.charCodeAt(t)] << 10 | h[e.charCodeAt(t + 1)] << 4 | h[e.charCodeAt(t + 2)] >> 2, a[l++] = r >> 8 & 255, a[l++] = 255 & r), a
        }

        function o(e) {
            return l[e >> 18 & 63] + l[e >> 12 & 63] + l[e >> 6 & 63] + l[63 & e]
        }

        function a(e, t, i) {
            for (var n, r = [], a = t; i > a; a += 3)n = (e[a] << 16) + (e[a + 1] << 8) + e[a + 2], r.push(o(n));
            return r.join("")
        }

        function s(e) {
            for (var t, i = e.length, n = i % 3, r = "", o = [], s = 16383, h = 0, c = i - n; c > h; h += s)o.push(a(e, h, h + s > c ? c : h + s));
            return 1 === n ? (t = e[i - 1], r += l[t >> 2], r += l[t << 4 & 63], r += "==") : 2 === n && (t = (e[i - 2] << 8) + e[i - 1], r += l[t >> 10], r += l[t >> 4 & 63], r += l[t << 2 & 63], r += "="), o.push(r), o.join("")
        }

        i.toByteArray = r, i.fromByteArray = s;
        var l = [], h = [], c = "undefined" != typeof Uint8Array ? Uint8Array : Array;
        n()
    }, {}],
    158: [function (e, t, i) {
        i.read = function (e, t, i, n, r) {
            var o, a, s = 8 * r - n - 1, l = (1 << s) - 1, h = l >> 1, c = -7, u = i ? r - 1 : 0, d = i ? -1 : 1, p = e[t + u];
            for (u += d, o = p & (1 << -c) - 1, p >>= -c, c += s; c > 0; o = 256 * o + e[t + u], u += d, c -= 8);
            for (a = o & (1 << -c) - 1, o >>= -c, c += n; c > 0; a = 256 * a + e[t + u], u += d, c -= 8);
            if (0 === o)o = 1 - h; else {
                if (o === l)return a ? NaN : (p ? -1 : 1) * (1 / 0);
                a += Math.pow(2, n), o -= h
            }
            return (p ? -1 : 1) * a * Math.pow(2, o - n)
        }, i.write = function (e, t, i, n, r, o) {
            var a, s, l, h = 8 * o - r - 1, c = (1 << h) - 1, u = c >> 1, d = 23 === r ? Math.pow(2, -24) - Math.pow(2, -77) : 0, p = n ? 0 : o - 1, f = n ? 1 : -1, g = 0 > t || 0 === t && 0 > 1 / t ? 1 : 0;
            for (t = Math.abs(t), isNaN(t) || t === 1 / 0 ? (s = isNaN(t) ? 1 : 0, a = c) : (a = Math.floor(Math.log(t) / Math.LN2), t * (l = Math.pow(2, -a)) < 1 && (a--, l *= 2), t += a + u >= 1 ? d / l : d * Math.pow(2, 1 - u), t * l >= 2 && (a++, l /= 2), a + u >= c ? (s = 0, a = c) : a + u >= 1 ? (s = (t * l - 1) * Math.pow(2, r), a += u) : (s = t * Math.pow(2, u - 1) * Math.pow(2, r), a = 0)); r >= 8; e[i + p] = 255 & s, p += f, s /= 256, r -= 8);
            for (a = a << r | s, h += r; h > 0; e[i + p] = 255 & a, p += f, a /= 256, h -= 8);
            e[i + p - f] |= 128 * g
        }
    }, {}],
    159: [function (e, t, i) {
        var n = {}.toString;
        t.exports = Array.isArray || function (e) {
                return "[object Array]" == n.call(e)
            }
    }, {}],
    160: [function (e, t, i) {
        function n() {
            this._events = this._events || {}, this._maxListeners = this._maxListeners || void 0
        }

        function r(e) {
            return "function" == typeof e
        }

        function o(e) {
            return "number" == typeof e
        }

        function a(e) {
            return "object" == typeof e && null !== e
        }

        function s(e) {
            return void 0 === e
        }

        t.exports = n, n.EventEmitter = n, n.prototype._events = void 0, n.prototype._maxListeners = void 0, n.defaultMaxListeners = 10, n.prototype.setMaxListeners = function (e) {
            if (!o(e) || 0 > e || isNaN(e))throw TypeError("n must be a positive number");
            return this._maxListeners = e, this
        }, n.prototype.emit = function (e) {
            var t, i, n, o, l, h;
            if (this._events || (this._events = {}), "error" === e && (!this._events.error || a(this._events.error) && !this._events.error.length)) {
                if (t = arguments[1], t instanceof Error)throw t;
                var c = new Error('Uncaught, unspecified "error" event. (' + t + ")");
                throw c.context = t, c
            }
            if (i = this._events[e], s(i))return !1;
            if (r(i))switch (arguments.length) {
                case 1:
                    i.call(this);
                    break;
                case 2:
                    i.call(this, arguments[1]);
                    break;
                case 3:
                    i.call(this, arguments[1], arguments[2]);
                    break;
                default:
                    o = Array.prototype.slice.call(arguments, 1), i.apply(this, o)
            } else if (a(i))for (o = Array.prototype.slice.call(arguments, 1), h = i.slice(), n = h.length, l = 0; n > l; l++)h[l].apply(this, o);
            return !0
        }, n.prototype.addListener = function (e, t) {
            var i;
            if (!r(t))throw TypeError("listener must be a function");
            return this._events || (this._events = {}), this._events.newListener && this.emit("newListener", e, r(t.listener) ? t.listener : t), this._events[e] ? a(this._events[e]) ? this._events[e].push(t) : this._events[e] = [this._events[e], t] : this._events[e] = t, a(this._events[e]) && !this._events[e].warned && (i = s(this._maxListeners) ? n.defaultMaxListeners : this._maxListeners, i && i > 0 && this._events[e].length > i && (this._events[e].warned = !0, console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.", this._events[e].length), "function" == typeof console.trace && console.trace())), this
        }, n.prototype.on = n.prototype.addListener, n.prototype.once = function (e, t) {
            function i() {
                this.removeListener(e, i), n || (n = !0, t.apply(this, arguments))
            }

            if (!r(t))throw TypeError("listener must be a function");
            var n = !1;
            return i.listener = t, this.on(e, i), this
        }, n.prototype.removeListener = function (e, t) {
            var i, n, o, s;
            if (!r(t))throw TypeError("listener must be a function");
            if (!this._events || !this._events[e])return this;
            if (i = this._events[e], o = i.length, n = -1, i === t || r(i.listener) && i.listener === t)delete this._events[e], this._events.removeListener && this.emit("removeListener", e, t); else if (a(i)) {
                for (s = o; s-- > 0;)if (i[s] === t || i[s].listener && i[s].listener === t) {
                    n = s;
                    break
                }
                if (0 > n)return this;
                1 === i.length ? (i.length = 0, delete this._events[e]) : i.splice(n, 1), this._events.removeListener && this.emit("removeListener", e, t)
            }
            return this
        }, n.prototype.removeAllListeners = function (e) {
            var t, i;
            if (!this._events)return this;
            if (!this._events.removeListener)return 0 === arguments.length ? this._events = {} : this._events[e] && delete this._events[e], this;
            if (0 === arguments.length) {
                for (t in this._events)"removeListener" !== t && this.removeAllListeners(t);
                return this.removeAllListeners("removeListener"), this._events = {}, this
            }
            if (i = this._events[e], r(i))this.removeListener(e, i); else if (i)for (; i.length;)this.removeListener(e, i[i.length - 1]);
            return delete this._events[e], this
        }, n.prototype.listeners = function (e) {
            var t;
            return t = this._events && this._events[e] ? r(this._events[e]) ? [this._events[e]] : this._events[e].slice() : []
        }, n.prototype.listenerCount = function (e) {
            if (this._events) {
                var t = this._events[e];
                if (r(t))return 1;
                if (t)return t.length
            }
            return 0
        }, n.listenerCount = function (e, t) {
            return e.listenerCount(t)
        }
    }, {}],
    161: [function (e, t, i) {
        (function (e) {
            function t(e, t) {
                for (var i = 0, n = e.length - 1; n >= 0; n--) {
                    var r = e[n];
                    "." === r ? e.splice(n, 1) : ".." === r ? (e.splice(n, 1), i++) : i && (e.splice(n, 1), i--)
                }
                if (t)for (; i--; i)e.unshift("..");
                return e
            }

            function n(e, t) {
                if (e.filter)return e.filter(t);
                for (var i = [], n = 0; n < e.length; n++)t(e[n], n, e) && i.push(e[n]);
                return i
            }

            var r = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/, o = function (e) {
                return r.exec(e).slice(1)
            };
            i.resolve = function () {
                for (var i = "", r = !1, o = arguments.length - 1; o >= -1 && !r; o--) {
                    var a = o >= 0 ? arguments[o] : e.cwd();
                    if ("string" != typeof a)throw new TypeError("Arguments to path.resolve must be strings");
                    a && (i = a + "/" + i, r = "/" === a.charAt(0))
                }
                return i = t(n(i.split("/"), function (e) {
                    return !!e
                }), !r).join("/"), (r ? "/" : "") + i || "."
            }, i.normalize = function (e) {
                var r = i.isAbsolute(e), o = "/" === a(e, -1);
                return e = t(n(e.split("/"), function (e) {
                    return !!e
                }), !r).join("/"), e || r || (e = "."), e && o && (e += "/"), (r ? "/" : "") + e
            }, i.isAbsolute = function (e) {
                return "/" === e.charAt(0)
            }, i.join = function () {
                var e = Array.prototype.slice.call(arguments, 0);
                return i.normalize(n(e, function (e, t) {
                    if ("string" != typeof e)throw new TypeError("Arguments to path.join must be strings");
                    return e
                }).join("/"))
            }, i.relative = function (e, t) {
                function n(e) {
                    for (var t = 0; t < e.length && "" === e[t]; t++);
                    for (var i = e.length - 1; i >= 0 && "" === e[i]; i--);
                    return t > i ? [] : e.slice(t, i - t + 1)
                }

                e = i.resolve(e).substr(1), t = i.resolve(t).substr(1);
                for (var r = n(e.split("/")), o = n(t.split("/")), a = Math.min(r.length, o.length), s = a, l = 0; a > l; l++)if (r[l] !== o[l]) {
                    s = l;
                    break
                }
                for (var h = [], l = s; l < r.length; l++)h.push("..");
                return h = h.concat(o.slice(s)), h.join("/")
            }, i.sep = "/", i.delimiter = ":", i.dirname = function (e) {
                var t = o(e), i = t[0], n = t[1];
                return i || n ? (n && (n = n.substr(0, n.length - 1)), i + n) : "."
            }, i.basename = function (e, t) {
                var i = o(e)[2];
                return t && i.substr(-1 * t.length) === t && (i = i.substr(0, i.length - t.length)), i
            }, i.extname = function (e) {
                return o(e)[3]
            };
            var a = "b" === "ab".substr(-1) ? function (e, t, i) {
                return e.substr(t, i)
            } : function (e, t, i) {
                return 0 > t && (t = e.length + t), e.substr(t, i)
            }
        }).call(this, e("_process"))
    }, {_process: 162}],
    162: [function (e, t, i) {
        function n() {
            throw new Error("setTimeout has not been defined")
        }

        function r() {
            throw new Error("clearTimeout has not been defined")
        }

        function o(e) {
            if (u === setTimeout)return setTimeout(e, 0);
            if ((u === n || !u) && setTimeout)return u = setTimeout, setTimeout(e, 0);
            try {
                return u(e, 0)
            } catch (t) {
                try {
                    return u.call(null, e, 0)
                } catch (t) {
                    return u.call(this, e, 0)
                }
            }
        }

        function a(e) {
            if (d === clearTimeout)return clearTimeout(e);
            if ((d === r || !d) && clearTimeout)return d = clearTimeout, clearTimeout(e);
            try {
                return d(e)
            } catch (t) {
                try {
                    return d.call(null, e)
                } catch (t) {
                    return d.call(this, e)
                }
            }
        }

        function s() {
            m && f && (m = !1, f.length ? g = f.concat(g) : v = -1, g.length && l())
        }

        function l() {
            if (!m) {
                var e = o(s);
                m = !0;
                for (var t = g.length; t;) {
                    for (f = g, g = []; ++v < t;)f && f[v].run();
                    v = -1, t = g.length
                }
                f = null, m = !1, a(e)
            }
        }

        function h(e, t) {
            this.fun = e, this.array = t
        }

        function c() {
        }

        var u, d, p = t.exports = {};
        !function () {
            try {
                u = "function" == typeof setTimeout ? setTimeout : n
            } catch (e) {
                u = n
            }
            try {
                d = "function" == typeof clearTimeout ? clearTimeout : r
            } catch (e) {
                d = r
            }
        }();
        var f, g = [], m = !1, v = -1;
        p.nextTick = function (e) {
            var t = new Array(arguments.length - 1);
            if (arguments.length > 1)for (var i = 1; i < arguments.length; i++)t[i - 1] = arguments[i];
            g.push(new h(e, t)), 1 !== g.length || m || o(l)
        }, h.prototype.run = function () {
            this.fun.apply(null, this.array)
        }, p.title = "browser", p.browser = !0, p.env = {}, p.argv = [], p.version = "", p.versions = {}, p.on = c, p.addListener = c, p.once = c, p.off = c, p.removeListener = c, p.removeAllListeners = c, p.emit = c, p.binding = function (e) {
            throw new Error("process.binding is not supported")
        }, p.cwd = function () {
            return "/"
        }, p.chdir = function (e) {
            throw new Error("process.chdir is not supported")
        }, p.umask = function () {
            return 0
        }
    }, {}],
    163: [function (e, t, i) {
        (function (e) {
            !function (n) {
                function r(e) {
                    throw new RangeError(R[e])
                }

                function o(e, t) {
                    for (var i = e.length, n = []; i--;)n[i] = t(e[i]);
                    return n
                }

                function a(e, t) {
                    var i = e.split("@"), n = "";
                    i.length > 1 && (n = i[0] + "@", e = i[1]), e = e.replace(D, ".");
                    var r = e.split("."), a = o(r, t).join(".");
                    return n + a
                }

                function s(e) {
                    for (var t, i, n = [], r = 0, o = e.length; o > r;)t = e.charCodeAt(r++), t >= 55296 && 56319 >= t && o > r ? (i = e.charCodeAt(r++), 56320 == (64512 & i) ? n.push(((1023 & t) << 10) + (1023 & i) + 65536) : (n.push(t), r--)) : n.push(t);
                    return n
                }

                function l(e) {
                    return o(e, function (e) {
                        var t = "";
                        return e > 65535 && (e -= 65536, t += F(e >>> 10 & 1023 | 55296), e = 56320 | 1023 & e), t += F(e)
                    }).join("")
                }

                function h(e) {
                    return 10 > e - 48 ? e - 22 : 26 > e - 65 ? e - 65 : 26 > e - 97 ? e - 97 : b
                }

                function c(e, t) {
                    return e + 22 + 75 * (26 > e) - ((0 != t) << 5)
                }

                function u(e, t, i) {
                    var n = 0;
                    for (e = i ? O(e / M) : e >> 1, e += O(e / t); e > B * x >> 1; n += b)e = O(e / B);
                    return O(n + (B + 1) * e / (e + E))
                }

                function d(e) {
                    var t, i, n, o, a, s, c, d, p, f, g = [], m = e.length, v = 0, A = S, y = T;
                    for (i = e.lastIndexOf(P), 0 > i && (i = 0), n = 0; i > n; ++n)e.charCodeAt(n) >= 128 && r("not-basic"), g.push(e.charCodeAt(n));
                    for (o = i > 0 ? i + 1 : 0; m > o;) {
                        for (a = v, s = 1, c = b; o >= m && r("invalid-input"), d = h(e.charCodeAt(o++)), (d >= b || d > O((I - v) / s)) && r("overflow"), v += d * s, p = y >= c ? w : c >= y + x ? x : c - y, !(p > d); c += b)f = b - p, s > O(I / f) && r("overflow"), s *= f;
                        t = g.length + 1, y = u(v - a, t, 0 == a), O(v / t) > I - A && r("overflow"), A += O(v / t), v %= t, g.splice(v++, 0, A)
                    }
                    return l(g)
                }

                function p(e) {
                    var t, i, n, o, a, l, h, d, p, f, g, m, v, A, y, C = [];
                    for (e = s(e), m = e.length, t = S, i = 0, a = T, l = 0; m > l; ++l)g = e[l], 128 > g && C.push(F(g));
                    for (n = o = C.length, o && C.push(P); m > n;) {
                        for (h = I, l = 0; m > l; ++l)g = e[l], g >= t && h > g && (h = g);
                        for (v = n + 1, h - t > O((I - i) / v) && r("overflow"), i += (h - t) * v, t = h, l = 0; m > l; ++l)if (g = e[l], t > g && ++i > I && r("overflow"), g == t) {
                            for (d = i, p = b; f = a >= p ? w : p >= a + x ? x : p - a, !(f > d); p += b)y = d - f, A = b - f, C.push(F(c(f + y % A, 0))), d = O(y / A);
                            C.push(F(c(d, 0))), a = u(i, v, n == o), i = 0, ++n
                        }
                        ++i, ++t
                    }
                    return C.join("")
                }

                function f(e) {
                    return a(e, function (e) {
                        return _.test(e) ? d(e.slice(4).toLowerCase()) : e
                    })
                }

                function g(e) {
                    return a(e, function (e) {
                        return L.test(e) ? "xn--" + p(e) : e
                    })
                }

                var m = "object" == typeof i && i && !i.nodeType && i, v = "object" == typeof t && t && !t.nodeType && t, A = "object" == typeof e && e;
                (A.global === A || A.window === A || A.self === A) && (n = A);
                var y, C, I = 2147483647, b = 36, w = 1, x = 26, E = 38, M = 700, T = 72, S = 128, P = "-", _ = /^xn--/, L = /[^\x20-\x7E]/, D = /[\x2E\u3002\uFF0E\uFF61]/g, R = {
                    overflow: "Overflow: input needs wider integers to process",
                    "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                    "invalid-input": "Invalid input"
                }, B = b - w, O = Math.floor, F = String.fromCharCode;
                if (y = {
                        version: "1.4.1",
                        ucs2: {decode: s, encode: l},
                        decode: d,
                        encode: p,
                        toASCII: g,
                        toUnicode: f
                    }, "function" == typeof define && "object" == typeof define.amd && define.amd)define("punycode", function () {
                    return y
                }); else if (m && v)if (t.exports == m)v.exports = y; else for (C in y)y.hasOwnProperty(C) && (m[C] = y[C]); else n.punycode = y
            }(this)
        }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
    }, {}],
    164: [function (e, t, i) {
        "use strict";
        function n(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t)
        }

        t.exports = function (e, t, i, o) {
            t = t || "&", i = i || "=";
            var a = {};
            if ("string" != typeof e || 0 === e.length)return a;
            var s = /\+/g;
            e = e.split(t);
            var l = 1e3;
            o && "number" == typeof o.maxKeys && (l = o.maxKeys);
            var h = e.length;
            l > 0 && h > l && (h = l);
            for (var c = 0; h > c; ++c) {
                var u, d, p, f, g = e[c].replace(s, "%20"), m = g.indexOf(i);
                m >= 0 ? (u = g.substr(0, m), d = g.substr(m + 1)) : (u = g, d = ""), p = decodeURIComponent(u), f = decodeURIComponent(d), n(a, p) ? r(a[p]) ? a[p].push(f) : a[p] = [a[p], f] : a[p] = f
            }
            return a
        };
        var r = Array.isArray || function (e) {
                return "[object Array]" === Object.prototype.toString.call(e)
            }
    }, {}],
    165: [function (e, t, i) {
        "use strict";
        function n(e, t) {
            if (e.map)return e.map(t);
            for (var i = [], n = 0; n < e.length; n++)i.push(t(e[n], n));
            return i
        }

        var r = function (e) {
            switch (typeof e) {
                case"string":
                    return e;
                case"boolean":
                    return e ? "true" : "false";
                case"number":
                    return isFinite(e) ? e : "";
                default:
                    return ""
            }
        };
        t.exports = function (e, t, i, s) {
            return t = t || "&", i = i || "=", null === e && (e = void 0), "object" == typeof e ? n(a(e), function (a) {
                var s = encodeURIComponent(r(a)) + i;
                return o(e[a]) ? n(e[a], function (e) {
                    return s + encodeURIComponent(r(e))
                }).join(t) : s + encodeURIComponent(r(e[a]))
            }).join(t) : s ? encodeURIComponent(r(s)) + i + encodeURIComponent(r(e)) : ""
        };
        var o = Array.isArray || function (e) {
                return "[object Array]" === Object.prototype.toString.call(e)
            }, a = Object.keys || function (e) {
                var t = [];
                for (var i in e)Object.prototype.hasOwnProperty.call(e, i) && t.push(i);
                return t
            }
    }, {}],
    166: [function (e, t, i) {
        "use strict";
        i.decode = i.parse = e("./decode"), i.encode = i.stringify = e("./encode")
    }, {"./decode": 164, "./encode": 165}],
    167: [function (e, t, i) {
        "use strict";
        function n() {
            this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null
        }

        function r(e, t, i) {
            if (e && h.isObject(e) && e instanceof n)return e;
            var r = new n;
            return r.parse(e, t, i), r
        }

        function o(e) {
            return h.isString(e) && (e = r(e)), e instanceof n ? e.format() : n.prototype.format.call(e)
        }

        function a(e, t) {
            return r(e, !1, !0).resolve(t)
        }

        function s(e, t) {
            return e ? r(e, !1, !0).resolveObject(t) : t
        }

        var l = e("punycode"), h = e("./util");
        i.parse = r, i.resolve = a, i.resolveObject = s, i.format = o, i.Url = n;
        var c = /^([a-z0-9.+-]+:)/i, u = /:[0-9]*$/, d = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/, p = ["<", ">", '"', "`", " ", "\r", "\n", "	"], f = ["{", "}", "|", "\\", "^", "`"].concat(p), g = ["'"].concat(f), m = ["%", "/", "?", ";", "#"].concat(g), v = ["/", "?", "#"], A = 255, y = /^[+a-z0-9A-Z_-]{0,63}$/, C = /^([+a-z0-9A-Z_-]{0,63})(.*)$/, I = {
            javascript: !0,
            "javascript:": !0
        }, b = {javascript: !0, "javascript:": !0}, w = {
            http: !0,
            https: !0,
            ftp: !0,
            gopher: !0,
            file: !0,
            "http:": !0,
            "https:": !0,
            "ftp:": !0,
            "gopher:": !0,
            "file:": !0
        }, x = e("querystring");
        n.prototype.parse = function (e, t, i) {
            if (!h.isString(e))throw new TypeError("Parameter 'url' must be a string, not " + typeof e);
            var n = e.indexOf("?"), r = -1 !== n && n < e.indexOf("#") ? "?" : "#", o = e.split(r), a = /\\/g;
            o[0] = o[0].replace(a, "/"), e = o.join(r);
            var s = e;
            if (s = s.trim(), !i && 1 === e.split("#").length) {
                var u = d.exec(s);
                if (u)return this.path = s, this.href = s, this.pathname = u[1], u[2] ? (this.search = u[2], t ? this.query = x.parse(this.search.substr(1)) : this.query = this.search.substr(1)) : t && (this.search = "", this.query = {}), this
            }
            var p = c.exec(s);
            if (p) {
                p = p[0];
                var f = p.toLowerCase();
                this.protocol = f, s = s.substr(p.length)
            }
            if (i || p || s.match(/^\/\/[^@\/]+@[^@\/]+/)) {
                var E = "//" === s.substr(0, 2);
                !E || p && b[p] || (s = s.substr(2), this.slashes = !0)
            }
            if (!b[p] && (E || p && !w[p])) {
                for (var M = -1, T = 0; T < v.length; T++) {
                    var S = s.indexOf(v[T]);
                    -1 !== S && (-1 === M || M > S) && (M = S)
                }
                var P, _;
                _ = -1 === M ? s.lastIndexOf("@") : s.lastIndexOf("@", M), -1 !== _ && (P = s.slice(0, _), s = s.slice(_ + 1), this.auth = decodeURIComponent(P)), M = -1;
                for (var T = 0; T < m.length; T++) {
                    var S = s.indexOf(m[T]);
                    -1 !== S && (-1 === M || M > S) && (M = S)
                }
                -1 === M && (M = s.length), this.host = s.slice(0, M), s = s.slice(M), this.parseHost(), this.hostname = this.hostname || "";
                var L = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1];
                if (!L)for (var D = this.hostname.split(/\./), T = 0, R = D.length; R > T; T++) {
                    var B = D[T];
                    if (B && !B.match(y)) {
                        for (var O = "", F = 0, k = B.length; k > F; F++)O += B.charCodeAt(F) > 127 ? "x" : B[F];
                        if (!O.match(y)) {
                            var N = D.slice(0, T), U = D.slice(T + 1), V = B.match(C);
                            V && (N.push(V[1]), U.unshift(V[2])), U.length && (s = "/" + U.join(".") + s), this.hostname = N.join(".");
                            break
                        }
                    }
                }
                this.hostname.length > A ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), L || (this.hostname = l.toASCII(this.hostname));
                var z = this.port ? ":" + this.port : "", G = this.hostname || "";
                this.host = G + z, this.href += this.host, L && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), "/" !== s[0] && (s = "/" + s))
            }
            if (!I[f])for (var T = 0, R = g.length; R > T; T++) {
                var H = g[T];
                if (-1 !== s.indexOf(H)) {
                    var j = encodeURIComponent(H);
                    j === H && (j = escape(H)), s = s.split(H).join(j)
                }
            }
            var W = s.indexOf("#");
            -1 !== W && (this.hash = s.substr(W), s = s.slice(0, W));
            var Y = s.indexOf("?");
            if (-1 !== Y ? (this.search = s.substr(Y), this.query = s.substr(Y + 1), t && (this.query = x.parse(this.query)), s = s.slice(0, Y)) : t && (this.search = "", this.query = {}), s && (this.pathname = s), w[f] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) {
                var z = this.pathname || "", X = this.search || "";
                this.path = z + X
            }
            return this.href = this.format(), this
        }, n.prototype.format = function () {
            var e = this.auth || "";
            e && (e = encodeURIComponent(e), e = e.replace(/%3A/i, ":"), e += "@");
            var t = this.protocol || "", i = this.pathname || "", n = this.hash || "", r = !1, o = "";
            this.host ? r = e + this.host : this.hostname && (r = e + (-1 === this.hostname.indexOf(":") ? this.hostname : "[" + this.hostname + "]"), this.port && (r += ":" + this.port)), this.query && h.isObject(this.query) && Object.keys(this.query).length && (o = x.stringify(this.query));
            var a = this.search || o && "?" + o || "";
            return t && ":" !== t.substr(-1) && (t += ":"), this.slashes || (!t || w[t]) && r !== !1 ? (r = "//" + (r || ""), i && "/" !== i.charAt(0) && (i = "/" + i)) : r || (r = ""), n && "#" !== n.charAt(0) && (n = "#" + n), a && "?" !== a.charAt(0) && (a = "?" + a), i = i.replace(/[?#]/g, function (e) {
                return encodeURIComponent(e)
            }), a = a.replace("#", "%23"), t + r + i + a + n
        }, n.prototype.resolve = function (e) {
            return this.resolveObject(r(e, !1, !0)).format()
        }, n.prototype.resolveObject = function (e) {
            if (h.isString(e)) {
                var t = new n;
                t.parse(e, !1, !0), e = t
            }
            for (var i = new n, r = Object.keys(this), o = 0; o < r.length; o++) {
                var a = r[o];
                i[a] = this[a]
            }
            if (i.hash = e.hash, "" === e.href)return i.href = i.format(), i;
            if (e.slashes && !e.protocol) {
                for (var s = Object.keys(e), l = 0; l < s.length; l++) {
                    var c = s[l];
                    "protocol" !== c && (i[c] = e[c])
                }
                return w[i.protocol] && i.hostname && !i.pathname && (i.path = i.pathname = "/"), i.href = i.format(), i
            }
            if (e.protocol && e.protocol !== i.protocol) {
                if (!w[e.protocol]) {
                    for (var u = Object.keys(e), d = 0; d < u.length; d++) {
                        var p = u[d];
                        i[p] = e[p]
                    }
                    return i.href = i.format(), i
                }
                if (i.protocol = e.protocol, e.host || b[e.protocol])i.pathname = e.pathname; else {
                    for (var f = (e.pathname || "").split("/"); f.length && !(e.host = f.shift()););
                    e.host || (e.host = ""), e.hostname || (e.hostname = ""), "" !== f[0] && f.unshift(""), f.length < 2 && f.unshift(""), i.pathname = f.join("/")
                }
                if (i.search = e.search, i.query = e.query, i.host = e.host || "", i.auth = e.auth, i.hostname = e.hostname || e.host, i.port = e.port, i.pathname || i.search) {
                    var g = i.pathname || "", m = i.search || "";
                    i.path = g + m
                }
                return i.slashes = i.slashes || e.slashes, i.href = i.format(), i
            }
            var v = i.pathname && "/" === i.pathname.charAt(0), A = e.host || e.pathname && "/" === e.pathname.charAt(0), y = A || v || i.host && e.pathname, C = y, I = i.pathname && i.pathname.split("/") || [], f = e.pathname && e.pathname.split("/") || [], x = i.protocol && !w[i.protocol];
            if (x && (i.hostname = "", i.port = null, i.host && ("" === I[0] ? I[0] = i.host : I.unshift(i.host)), i.host = "", e.protocol && (e.hostname = null, e.port = null, e.host && ("" === f[0] ? f[0] = e.host : f.unshift(e.host)), e.host = null), y = y && ("" === f[0] || "" === I[0])), A)i.host = e.host || "" === e.host ? e.host : i.host, i.hostname = e.hostname || "" === e.hostname ? e.hostname : i.hostname, i.search = e.search, i.query = e.query, I = f; else if (f.length)I || (I = []), I.pop(), I = I.concat(f), i.search = e.search, i.query = e.query; else if (!h.isNullOrUndefined(e.search)) {
                if (x) {
                    i.hostname = i.host = I.shift();
                    var E = i.host && i.host.indexOf("@") > 0 ? i.host.split("@") : !1;
                    E && (i.auth = E.shift(), i.host = i.hostname = E.shift())
                }
                return i.search = e.search, i.query = e.query, h.isNull(i.pathname) && h.isNull(i.search) || (i.path = (i.pathname ? i.pathname : "") + (i.search ? i.search : "")), i.href = i.format(), i
            }
            if (!I.length)return i.pathname = null, i.search ? i.path = "/" + i.search : i.path = null, i.href = i.format(), i;
            for (var M = I.slice(-1)[0], T = (i.host || e.host || I.length > 1) && ("." === M || ".." === M) || "" === M, S = 0, P = I.length; P >= 0; P--)M = I[P], "." === M ? I.splice(P, 1) : ".." === M ? (I.splice(P, 1), S++) : S && (I.splice(P, 1), S--);
            if (!y && !C)for (; S--; S)I.unshift("..");
            !y || "" === I[0] || I[0] && "/" === I[0].charAt(0) || I.unshift(""), T && "/" !== I.join("/").substr(-1) && I.push("");
            var _ = "" === I[0] || I[0] && "/" === I[0].charAt(0);
            if (x) {
                i.hostname = i.host = _ ? "" : I.length ? I.shift() : "";
                var E = i.host && i.host.indexOf("@") > 0 ? i.host.split("@") : !1;
                E && (i.auth = E.shift(), i.host = i.hostname = E.shift())
            }
            return y = y || i.host && I.length, y && !_ && I.unshift(""), I.length ? i.pathname = I.join("/") : (i.pathname = null, i.path = null), h.isNull(i.pathname) && h.isNull(i.search) || (i.path = (i.pathname ? i.pathname : "") + (i.search ? i.search : "")),
                i.auth = e.auth || i.auth, i.slashes = i.slashes || e.slashes, i.href = i.format(), i
        }, n.prototype.parseHost = function () {
            var e = this.host, t = u.exec(e);
            t && (t = t[0], ":" !== t && (this.port = t.substr(1)), e = e.substr(0, e.length - t.length)), e && (this.hostname = e)
        }
    }, {"./util": 168, punycode: 163, querystring: 166}],
    168: [function (e, t, i) {
        "use strict";
        t.exports = {
            isString: function (e) {
                return "string" == typeof e
            }, isObject: function (e) {
                return "object" == typeof e && null !== e
            }, isNull: function (e) {
                return null === e
            }, isNullOrUndefined: function (e) {
                return null == e
            }
        }
    }, {}],
    169: [function (e, t, i) {
        "use strict";
        function n(e) {
            return l + e
        }

        function r(e) {
            return e.substring(l.length)
        }

        function o(e, t) {
            for (var i in t)Object.defineProperty(e, i, {value: t[i], configurable: !0, writable: !0})
        }

        function a(e) {
            if ("string" != typeof e)throw new TypeError("key must be a string.")
        }

        var s = Object.prototype.hasOwnProperty, l = "~";
        t.exports = function (e) {
            var t = Object.create(null), i = 0, l = {};
            return o(l, {
                get: function (e, i) {
                    a(e);
                    var r = n(e);
                    return r in t ? t[r] : i
                }, set: function (e, r) {
                    a(e);
                    var o = n(e);
                    return o in t || ++i, t[o] = r
                }, has: function (e) {
                    return a(e), n(e) in t
                }, "delete": function (e) {
                    a(e);
                    var r = n(e);
                    return r in t ? (--i, delete t[r], !0) : !1
                }, clear: function () {
                    t = Object.create(null), i = 0
                }, forEach: function (e, i) {
                    if ("function" != typeof e)throw new TypeError("`callback` must be a function");
                    for (var n in t)if (s.call(t, n)) {
                        var o = r(n), a = t[n];
                        e.call(i, a, o, l)
                    }
                }
            }), Object.defineProperty(l, "size", {
                get: function () {
                    return i
                }, configurable: !0
            }), "object" == typeof e && null !== e && Object.keys(e).forEach(function (t) {
                l.set(t, e[t])
            }), l
        }
    }, {}],
    170: [function (e, t, i) {
        t.exports = e("./lib/heap")
    }, {"./lib/heap": 171}],
    171: [function (e, t, i) {
        (function () {
            var e, n, r, o, a, s, l, h, c, u, d, p, f, g, m;
            r = Math.floor, u = Math.min, n = function (e, t) {
                return t > e ? -1 : e > t ? 1 : 0
            }, c = function (e, t, i, o, a) {
                var s;
                if (null == i && (i = 0), null == a && (a = n), 0 > i)throw new Error("lo must be non-negative");
                for (null == o && (o = e.length); o > i;)s = r((i + o) / 2), a(t, e[s]) < 0 ? o = s : i = s + 1;
                return [].splice.apply(e, [i, i - i].concat(t)), t
            }, s = function (e, t, i) {
                return null == i && (i = n), e.push(t), g(e, 0, e.length - 1, i)
            }, a = function (e, t) {
                var i, r;
                return null == t && (t = n), i = e.pop(), e.length ? (r = e[0], e[0] = i, m(e, 0, t)) : r = i, r
            }, h = function (e, t, i) {
                var r;
                return null == i && (i = n), r = e[0], e[0] = t, m(e, 0, i), r
            }, l = function (e, t, i) {
                var r;
                return null == i && (i = n), e.length && i(e[0], t) < 0 && (r = [e[0], t], t = r[0], e[0] = r[1], m(e, 0, i)), t
            }, o = function (e, t) {
                var i, o, a, s, l, h;
                for (null == t && (t = n), s = function () {
                    h = [];
                    for (var t = 0, i = r(e.length / 2); i >= 0 ? i > t : t > i; i >= 0 ? t++ : t--)h.push(t);
                    return h
                }.apply(this).reverse(), l = [], o = 0, a = s.length; a > o; o++)i = s[o], l.push(m(e, i, t));
                return l
            }, f = function (e, t, i) {
                var r;
                return null == i && (i = n), r = e.indexOf(t), -1 !== r ? (g(e, 0, r, i), m(e, r, i)) : void 0
            }, d = function (e, t, i) {
                var r, a, s, h, c;
                if (null == i && (i = n), a = e.slice(0, t), !a.length)return a;
                for (o(a, i), c = e.slice(t), s = 0, h = c.length; h > s; s++)r = c[s], l(a, r, i);
                return a.sort(i).reverse()
            }, p = function (e, t, i) {
                var r, s, l, h, d, p, f, g, m, v;
                if (null == i && (i = n), 10 * t <= e.length) {
                    if (h = e.slice(0, t).sort(i), !h.length)return h;
                    for (l = h[h.length - 1], g = e.slice(t), d = 0, f = g.length; f > d; d++)r = g[d], i(r, l) < 0 && (c(h, r, 0, null, i), h.pop(), l = h[h.length - 1]);
                    return h
                }
                for (o(e, i), v = [], s = p = 0, m = u(t, e.length); m >= 0 ? m > p : p > m; s = m >= 0 ? ++p : --p)v.push(a(e, i));
                return v
            }, g = function (e, t, i, r) {
                var o, a, s;
                for (null == r && (r = n), o = e[i]; i > t && (s = i - 1 >> 1, a = e[s], r(o, a) < 0);)e[i] = a, i = s;
                return e[i] = o
            }, m = function (e, t, i) {
                var r, o, a, s, l;
                for (null == i && (i = n), o = e.length, l = t, a = e[t], r = 2 * t + 1; o > r;)s = r + 1, o > s && !(i(e[r], e[s]) < 0) && (r = s), e[t] = e[r], t = r, r = 2 * t + 1;
                return e[t] = a, g(e, l, t, i)
            }, e = function () {
                function e(e) {
                    this.cmp = null != e ? e : n, this.nodes = []
                }

                return e.push = s, e.pop = a, e.replace = h, e.pushpop = l, e.heapify = o, e.updateItem = f, e.nlargest = d, e.nsmallest = p, e.prototype.push = function (e) {
                    return s(this.nodes, e, this.cmp)
                }, e.prototype.pop = function () {
                    return a(this.nodes, this.cmp)
                }, e.prototype.peek = function () {
                    return this.nodes[0]
                }, e.prototype.contains = function (e) {
                    return -1 !== this.nodes.indexOf(e)
                }, e.prototype.replace = function (e) {
                    return h(this.nodes, e, this.cmp)
                }, e.prototype.pushpop = function (e) {
                    return l(this.nodes, e, this.cmp)
                }, e.prototype.heapify = function () {
                    return o(this.nodes, this.cmp)
                }, e.prototype.updateItem = function (e) {
                    return f(this.nodes, e, this.cmp)
                }, e.prototype.clear = function () {
                    return this.nodes = []
                }, e.prototype.empty = function () {
                    return 0 === this.nodes.length
                }, e.prototype.size = function () {
                    return this.nodes.length
                }, e.prototype.clone = function () {
                    var t;
                    return t = new e, t.nodes = this.nodes.slice(0), t
                }, e.prototype.toArray = function () {
                    return this.nodes.slice(0)
                }, e.prototype.insert = e.prototype.push, e.prototype.top = e.prototype.peek, e.prototype.front = e.prototype.peek, e.prototype.has = e.prototype.contains, e.prototype.copy = e.prototype.clone, e
            }(), function (e, n) {
                return "function" == typeof define && define.amd ? define([], n) : "object" == typeof i ? t.exports = n() : e.Heap = n()
            }(this, function () {
                return e
            })
        }).call(this)
    }, {}],
    172: [function (e, t, i) {
        (function (i) {
            !function (i, n) {
                "function" == typeof define && define.amd ? define(["bytebuffer"], n) : "function" == typeof e && "object" == typeof t && t && t.exports ? t.exports = n(e("bytebuffer"), !0) : (i.dcodeIO = i.dcodeIO || {}).ProtoBuf = n(i.dcodeIO.ByteBuffer)
            }(this, function (t, n) {
                "use strict";
                var r = {};
                return r.ByteBuffer = t, r.Long = t.Long || null, r.VERSION = "5.0.1", r.WIRE_TYPES = {}, r.WIRE_TYPES.VARINT = 0, r.WIRE_TYPES.BITS64 = 1, r.WIRE_TYPES.LDELIM = 2, r.WIRE_TYPES.STARTGROUP = 3, r.WIRE_TYPES.ENDGROUP = 4, r.WIRE_TYPES.BITS32 = 5, r.PACKABLE_WIRE_TYPES = [r.WIRE_TYPES.VARINT, r.WIRE_TYPES.BITS64, r.WIRE_TYPES.BITS32], r.TYPES = {
                    int32: {
                        name: "int32",
                        wireType: r.WIRE_TYPES.VARINT,
                        defaultValue: 0
                    },
                    uint32: {name: "uint32", wireType: r.WIRE_TYPES.VARINT, defaultValue: 0},
                    sint32: {name: "sint32", wireType: r.WIRE_TYPES.VARINT, defaultValue: 0},
                    int64: {name: "int64", wireType: r.WIRE_TYPES.VARINT, defaultValue: r.Long ? r.Long.ZERO : void 0},
                    uint64: {
                        name: "uint64",
                        wireType: r.WIRE_TYPES.VARINT,
                        defaultValue: r.Long ? r.Long.UZERO : void 0
                    },
                    sint64: {
                        name: "sint64",
                        wireType: r.WIRE_TYPES.VARINT,
                        defaultValue: r.Long ? r.Long.ZERO : void 0
                    },
                    bool: {name: "bool", wireType: r.WIRE_TYPES.VARINT, defaultValue: !1},
                    "double": {name: "double", wireType: r.WIRE_TYPES.BITS64, defaultValue: 0},
                    string: {name: "string", wireType: r.WIRE_TYPES.LDELIM, defaultValue: ""},
                    bytes: {name: "bytes", wireType: r.WIRE_TYPES.LDELIM, defaultValue: null},
                    fixed32: {name: "fixed32", wireType: r.WIRE_TYPES.BITS32, defaultValue: 0},
                    sfixed32: {name: "sfixed32", wireType: r.WIRE_TYPES.BITS32, defaultValue: 0},
                    fixed64: {
                        name: "fixed64",
                        wireType: r.WIRE_TYPES.BITS64,
                        defaultValue: r.Long ? r.Long.UZERO : void 0
                    },
                    sfixed64: {
                        name: "sfixed64",
                        wireType: r.WIRE_TYPES.BITS64,
                        defaultValue: r.Long ? r.Long.ZERO : void 0
                    },
                    "float": {name: "float", wireType: r.WIRE_TYPES.BITS32, defaultValue: 0},
                    "enum": {name: "enum", wireType: r.WIRE_TYPES.VARINT, defaultValue: 0},
                    message: {name: "message", wireType: r.WIRE_TYPES.LDELIM, defaultValue: null},
                    group: {name: "group", wireType: r.WIRE_TYPES.STARTGROUP, defaultValue: null}
                }, r.MAP_KEY_TYPES = [r.TYPES.int32, r.TYPES.sint32, r.TYPES.sfixed32, r.TYPES.uint32, r.TYPES.fixed32, r.TYPES.int64, r.TYPES.sint64, r.TYPES.sfixed64, r.TYPES.uint64, r.TYPES.fixed64, r.TYPES.bool, r.TYPES.string, r.TYPES.bytes], r.ID_MIN = 1, r.ID_MAX = 536870911, r.convertFieldsToCamelCase = !1, r.populateAccessors = !0, r.populateDefaults = !0, r.Util = function () {
                    var t = {};
                    return t.IS_NODE = !("object" != typeof i || i + "" != "[object process]" || i.browser), t.XHR = function () {
                        for (var e = [function () {
                            return new XMLHttpRequest
                        }, function () {
                            return new ActiveXObject("Msxml2.XMLHTTP")
                        }, function () {
                            return new ActiveXObject("Msxml3.XMLHTTP")
                        }, function () {
                            return new ActiveXObject("Microsoft.XMLHTTP")
                        }], t = null, i = 0; i < e.length; i++) {
                            try {
                                t = e[i]()
                            } catch (n) {
                                continue
                            }
                            break
                        }
                        if (!t)throw Error("XMLHttpRequest is not supported");
                        return t
                    }, t.fetch = function (i, n) {
                        if (n && "function" != typeof n && (n = null), t.IS_NODE) {
                            var r = e("fs");
                            if (n)r.readFile(i, function (e, t) {
                                n(e ? null : "" + t)
                            }); else try {
                                return r.readFileSync(i)
                            } catch (o) {
                                return null
                            }
                        } else {
                            var a = t.XHR();
                            if (a.open("GET", i, n ? !0 : !1), a.setRequestHeader("Accept", "text/plain"), "function" == typeof a.overrideMimeType && a.overrideMimeType("text/plain"), !n)return a.send(null), 200 == a.status || 0 == a.status && "string" == typeof a.responseText ? a.responseText : null;
                            if (a.onreadystatechange = function () {
                                    4 == a.readyState && n(200 == a.status || 0 == a.status && "string" == typeof a.responseText ? a.responseText : null)
                                }, 4 == a.readyState)return;
                            a.send(null)
                        }
                    }, t.toCamelCase = function (e) {
                        return e.replace(/_([a-zA-Z])/g, function (e, t) {
                            return t.toUpperCase()
                        })
                    }, t
                }(), r.Lang = {
                    DELIM: /[\s\{\}=;:\[\],'"\(\)<>]/g,
                    RULE: /^(?:required|optional|repeated|map)$/,
                    TYPE: /^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,
                    NAME: /^[a-zA-Z_][a-zA-Z_0-9]*$/,
                    TYPEDEF: /^[a-zA-Z][a-zA-Z_0-9]*$/,
                    TYPEREF: /^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,
                    FQTYPEREF: /^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,
                    NUMBER: /^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,
                    NUMBER_DEC: /^(?:[1-9][0-9]*|0)$/,
                    NUMBER_HEX: /^0[xX][0-9a-fA-F]+$/,
                    NUMBER_OCT: /^0[0-7]+$/,
                    NUMBER_FLT: /^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,
                    BOOL: /^(?:true|false)$/i,
                    ID: /^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,
                    NEGID: /^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,
                    WHITESPACE: /\s/,
                    STRING: /(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,
                    STRING_DQ: /(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,
                    STRING_SQ: /(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g
                }, r.DotProto = function (e, t) {
                    function i(e, i) {
                        var n = -1, r = 1;
                        if ("-" == e.charAt(0) && (r = -1, e = e.substring(1)), t.NUMBER_DEC.test(e))n = parseInt(e); else if (t.NUMBER_HEX.test(e))n = parseInt(e.substring(2), 16); else {
                            if (!t.NUMBER_OCT.test(e))throw Error("illegal id value: " + (0 > r ? "-" : "") + e);
                            n = parseInt(e.substring(1), 8)
                        }
                        if (n = r * n | 0, !i && 0 > n)throw Error("illegal id value: " + (0 > r ? "-" : "") + e);
                        return n
                    }

                    function n(e) {
                        var i = 1;
                        if ("-" == e.charAt(0) && (i = -1, e = e.substring(1)), t.NUMBER_DEC.test(e))return i * parseInt(e, 10);
                        if (t.NUMBER_HEX.test(e))return i * parseInt(e.substring(2), 16);
                        if (t.NUMBER_OCT.test(e))return i * parseInt(e.substring(1), 8);
                        if ("inf" === e)return i * (1 / 0);
                        if ("nan" === e)return NaN;
                        if (t.NUMBER_FLT.test(e))return i * parseFloat(e);
                        throw Error("illegal number value: " + (0 > i ? "-" : "") + e)
                    }

                    function r(e, t, i) {
                        "undefined" == typeof e[t] ? e[t] = i : (Array.isArray(e[t]) || (e[t] = [e[t]]), e[t].push(i))
                    }

                    var o = {}, a = function (e) {
                        this.source = e + "", this.index = 0, this.line = 1, this.stack = [], this._stringOpen = null
                    }, s = a.prototype;
                    s._readString = function () {
                        var e = '"' === this._stringOpen ? t.STRING_DQ : t.STRING_SQ;
                        e.lastIndex = this.index - 1;
                        var i = e.exec(this.source);
                        if (!i)throw Error("unterminated string");
                        return this.index = e.lastIndex, this.stack.push(this._stringOpen), this._stringOpen = null, i[1]
                    }, s.next = function () {
                        if (this.stack.length > 0)return this.stack.shift();
                        if (this.index >= this.source.length)return null;
                        if (null !== this._stringOpen)return this._readString();
                        var e, i, n;
                        do {
                            for (e = !1; t.WHITESPACE.test(n = this.source.charAt(this.index));)if ("\n" === n && ++this.line, ++this.index === this.source.length)return null;
                            if ("/" === this.source.charAt(this.index))if (++this.index, "/" === this.source.charAt(this.index)) {
                                for (; "\n" !== this.source.charAt(++this.index);)if (this.index == this.source.length)return null;
                                ++this.index, ++this.line, e = !0
                            } else {
                                if ("*" !== (n = this.source.charAt(this.index)))return "/";
                                do {
                                    if ("\n" === n && ++this.line, ++this.index === this.source.length)return null;
                                    i = n, n = this.source.charAt(this.index)
                                } while ("*" !== i || "/" !== n);
                                ++this.index, e = !0
                            }
                        } while (e);
                        if (this.index === this.source.length)return null;
                        var r = this.index;
                        t.DELIM.lastIndex = 0;
                        var o = t.DELIM.test(this.source.charAt(r++));
                        if (!o)for (; r < this.source.length && !t.DELIM.test(this.source.charAt(r));)++r;
                        var a = this.source.substring(this.index, this.index = r);
                        return ('"' === a || "'" === a) && (this._stringOpen = a), a
                    }, s.peek = function () {
                        if (0 === this.stack.length) {
                            var e = this.next();
                            if (null === e)return null;
                            this.stack.push(e)
                        }
                        return this.stack[0]
                    }, s.skip = function (e) {
                        var t = this.next();
                        if (t !== e)throw Error("illegal '" + t + "', '" + e + "' expected")
                    }, s.omit = function (e) {
                        return this.peek() === e ? (this.next(), !0) : !1
                    }, s.toString = function () {
                        return "Tokenizer (" + this.index + "/" + this.source.length + " at line " + this.line + ")"
                    }, o.Tokenizer = a;
                    var l = function (e) {
                        this.tn = new a(e), this.proto3 = !1
                    }, h = l.prototype;
                    return h.parse = function () {
                        var e, i, n = {
                            name: "[ROOT]",
                            "package": null,
                            messages: [],
                            enums: [],
                            imports: [],
                            options: {},
                            services: []
                        }, r = !0;
                        try {
                            for (; e = this.tn.next();)switch (e) {
                                case"package":
                                    if (!r || null !== n["package"])throw Error("unexpected 'package'");
                                    if (e = this.tn.next(), !t.TYPEREF.test(e))throw Error("illegal package name: " + e);
                                    this.tn.skip(";"), n["package"] = e;
                                    break;
                                case"import":
                                    if (!r)throw Error("unexpected 'import'");
                                    e = this.tn.peek(), ("public" === e || (i = "weak" === e)) && this.tn.next(), e = this._readString(), this.tn.skip(";"), i || n.imports.push(e);
                                    break;
                                case"syntax":
                                    if (!r)throw Error("unexpected 'syntax'");
                                    this.tn.skip("="), "proto3" === (n.syntax = this._readString()) && (this.proto3 = !0), this.tn.skip(";");
                                    break;
                                case"message":
                                    this._parseMessage(n, null), r = !1;
                                    break;
                                case"enum":
                                    this._parseEnum(n), r = !1;
                                    break;
                                case"option":
                                    this._parseOption(n);
                                    break;
                                case"service":
                                    this._parseService(n);
                                    break;
                                case"extend":
                                    this._parseExtend(n);
                                    break;
                                default:
                                    throw Error("unexpected '" + e + "'")
                            }
                        } catch (o) {
                            throw o.message = "Parse error at line " + this.tn.line + ": " + o.message, o
                        }
                        return delete n.name, n
                    }, l.parse = function (e) {
                        return new l(e).parse()
                    }, h._readString = function () {
                        var e, t, i = "";
                        do {
                            if (t = this.tn.next(), "'" !== t && '"' !== t)throw Error("illegal string delimiter: " + t);
                            i += this.tn.next(), this.tn.skip(t), e = this.tn.peek()
                        } while ('"' === e || '"' === e);
                        return i
                    }, h._readValue = function (e) {
                        var i = this.tn.peek();
                        if ('"' === i || "'" === i)return this._readString();
                        if (this.tn.next(), t.NUMBER.test(i))return n(i);
                        if (t.BOOL.test(i))return "true" === i.toLowerCase();
                        if (e && t.TYPEREF.test(i))return i;
                        throw Error("illegal value: " + i)
                    }, h._parseOption = function (e, i) {
                        var n = this.tn.next(), r = !1;
                        if ("(" === n && (r = !0, n = this.tn.next()), !t.TYPEREF.test(n))throw Error("illegal option name: " + n);
                        var o = n;
                        r && (this.tn.skip(")"), o = "(" + o + ")", n = this.tn.peek(), t.FQTYPEREF.test(n) && (o += n, this.tn.next())), this.tn.skip("="), this._parseOptionValue(e, o), i || this.tn.skip(";")
                    }, h._parseOptionValue = function (e, i) {
                        var n = this.tn.peek();
                        if ("{" !== n)r(e.options, i, this._readValue(!0)); else for (this.tn.skip("{"); "}" !== (n = this.tn.next());) {
                            if (!t.NAME.test(n))throw Error("illegal option name: " + i + "." + n);
                            this.tn.omit(":") ? r(e.options, i + "." + n, this._readValue(!0)) : this._parseOptionValue(e, i + "." + n)
                        }
                    }, h._parseService = function (e) {
                        var i = this.tn.next();
                        if (!t.NAME.test(i))throw Error("illegal service name at line " + this.tn.line + ": " + i);
                        var n = i, r = {name: n, rpc: {}, options: {}};
                        for (this.tn.skip("{"); "}" !== (i = this.tn.next());)if ("option" === i)this._parseOption(r); else {
                            if ("rpc" !== i)throw Error("illegal service token: " + i);
                            this._parseServiceRPC(r)
                        }
                        this.tn.omit(";"), e.services.push(r)
                    }, h._parseServiceRPC = function (e) {
                        var i = "rpc", n = this.tn.next();
                        if (!t.NAME.test(n))throw Error("illegal rpc service method name: " + n);
                        var r = n, o = {
                            request: null,
                            response: null,
                            request_stream: !1,
                            response_stream: !1,
                            options: {}
                        };
                        if (this.tn.skip("("), n = this.tn.next(), "stream" === n.toLowerCase() && (o.request_stream = !0, n = this.tn.next()), !t.TYPEREF.test(n))throw Error("illegal rpc service request type: " + n);
                        if (o.request = n, this.tn.skip(")"), n = this.tn.next(), "returns" !== n.toLowerCase())throw Error("illegal rpc service request type delimiter: " + n);
                        if (this.tn.skip("("), n = this.tn.next(), "stream" === n.toLowerCase() && (o.response_stream = !0, n = this.tn.next()), o.response = n, this.tn.skip(")"), n = this.tn.peek(), "{" === n) {
                            for (this.tn.next(); "}" !== (n = this.tn.next());) {
                                if ("option" !== n)throw Error("illegal rpc service token: " + n);
                                this._parseOption(o)
                            }
                            this.tn.omit(";")
                        } else this.tn.skip(";");
                        "undefined" == typeof e[i] && (e[i] = {}), e[i][r] = o
                    }, h._parseMessage = function (e, n) {
                        var r = !!n, o = this.tn.next(), a = {
                            name: "",
                            fields: [],
                            enums: [],
                            messages: [],
                            options: {},
                            services: [],
                            oneofs: {}
                        };
                        if (!t.NAME.test(o))throw Error("illegal " + (r ? "group" : "message") + " name: " + o);
                        for (a.name = o, r && (this.tn.skip("="), n.id = i(this.tn.next()), a.isGroup = !0), o = this.tn.peek(), "[" === o && n && this._parseFieldOptions(n), this.tn.skip("{"); "}" !== (o = this.tn.next());)if (t.RULE.test(o))this._parseMessageField(a, o); else if ("oneof" === o)this._parseMessageOneOf(a); else if ("enum" === o)this._parseEnum(a); else if ("message" === o)this._parseMessage(a); else if ("option" === o)this._parseOption(a); else if ("service" === o)this._parseService(a); else if ("extensions" === o)a.extensions = this._parseExtensionRanges(); else if ("reserved" === o)this._parseIgnored(); else if ("extend" === o)this._parseExtend(a); else {
                            if (!t.TYPEREF.test(o))throw Error("illegal message token: " + o);
                            if (!this.proto3)throw Error("illegal field rule: " + o);
                            this._parseMessageField(a, "optional", o)
                        }
                        return this.tn.omit(";"), e.messages.push(a), a
                    }, h._parseIgnored = function () {
                        for (; ";" !== this.tn.peek();)this.tn.next();
                        this.tn.skip(";")
                    }, h._parseMessageField = function (e, n, r) {
                        if (!t.RULE.test(n))throw Error("illegal message field rule: " + n);
                        var o, a = {rule: n, type: "", name: "", options: {}, id: 0};
                        if ("map" === n) {
                            if (r)throw Error("illegal type: " + r);
                            if (this.tn.skip("<"), o = this.tn.next(), !t.TYPE.test(o) && !t.TYPEREF.test(o))throw Error("illegal message field type: " + o);
                            if (a.keytype = o, this.tn.skip(","), o = this.tn.next(), !t.TYPE.test(o) && !t.TYPEREF.test(o))throw Error("illegal message field: " + o);
                            if (a.type = o, this.tn.skip(">"), o = this.tn.next(), !t.NAME.test(o))throw Error("illegal message field name: " + o);
                            a.name = o, this.tn.skip("="), a.id = i(this.tn.next()), o = this.tn.peek(), "[" === o && this._parseFieldOptions(a), this.tn.skip(";")
                        } else if (r = "undefined" != typeof r ? r : this.tn.next(), "group" === r) {
                            var s = this._parseMessage(e, a);
                            if (!/^[A-Z]/.test(s.name))throw Error("illegal group name: " + s.name);
                            a.type = s.name, a.name = s.name.toLowerCase(), this.tn.omit(";")
                        } else {
                            if (!t.TYPE.test(r) && !t.TYPEREF.test(r))throw Error("illegal message field type: " + r);
                            if (a.type = r, o = this.tn.next(), !t.NAME.test(o))throw Error("illegal message field name: " + o);
                            a.name = o, this.tn.skip("="), a.id = i(this.tn.next()), o = this.tn.peek(), "[" === o && this._parseFieldOptions(a), this.tn.skip(";")
                        }
                        return e.fields.push(a), a
                    }, h._parseMessageOneOf = function (e) {
                        var i = this.tn.next();
                        if (!t.NAME.test(i))throw Error("illegal oneof name: " + i);
                        var n, r = i, o = [];
                        for (this.tn.skip("{"); "}" !== (i = this.tn.next());)n = this._parseMessageField(e, "optional", i), n.oneof = r, o.push(n.id);
                        this.tn.omit(";"), e.oneofs[r] = o
                    }, h._parseFieldOptions = function (e) {
                        this.tn.skip("[");
                        for (var t, i = !0; "]" !== (t = this.tn.peek());)i || this.tn.skip(","), this._parseOption(e, !0), i = !1;
                        this.tn.next()
                    }, h._parseEnum = function (e) {
                        var n = {name: "", values: [], options: {}}, r = this.tn.next();
                        if (!t.NAME.test(r))throw Error("illegal name: " + r);
                        for (n.name = r, this.tn.skip("{"); "}" !== (r = this.tn.next());)if ("option" === r)this._parseOption(n); else {
                            if (!t.NAME.test(r))throw Error("illegal name: " + r);
                            this.tn.skip("=");
                            var o = {name: r, id: i(this.tn.next(), !0)};
                            r = this.tn.peek(), "[" === r && this._parseFieldOptions({options: {}}), this.tn.skip(";"), n.values.push(o)
                        }
                        this.tn.omit(";"), e.enums.push(n)
                    }, h._parseExtensionRanges = function () {
                        var t, i, r, o = [];
                        do {
                            for (i = []; ;) {
                                switch (t = this.tn.next()) {
                                    case"min":
                                        r = e.ID_MIN;
                                        break;
                                    case"max":
                                        r = e.ID_MAX;
                                        break;
                                    default:
                                        r = n(t)
                                }
                                if (i.push(r), 2 === i.length)break;
                                if ("to" !== this.tn.peek()) {
                                    i.push(r);
                                    break
                                }
                                this.tn.next()
                            }
                            o.push(i)
                        } while (this.tn.omit(","));
                        return this.tn.skip(";"), o
                    }, h._parseExtend = function (e) {
                        var i = this.tn.next();
                        if (!t.TYPEREF.test(i))throw Error("illegal extend reference: " + i);
                        var n = {ref: i, fields: []};
                        for (this.tn.skip("{"); "}" !== (i = this.tn.next());)if (t.RULE.test(i))this._parseMessageField(n, i); else {
                            if (!t.TYPEREF.test(i))throw Error("illegal extend token: " + i);
                            if (!this.proto3)throw Error("illegal field rule: " + i);
                            this._parseMessageField(n, "optional", i)
                        }
                        return this.tn.omit(";"), e.messages.push(n), n
                    }, h.toString = function () {
                        return "Parser at line " + this.tn.line
                    }, o.Parser = l, o
                }(r, r.Lang), r.Reflect = function (e) {
                    function i(i) {
                        if ("string" == typeof i && (i = e.TYPES[i]), "undefined" == typeof i.defaultValue)throw Error("default value for type " + i.name + " is not supported");
                        return i == e.TYPES.bytes ? new t(0) : i.defaultValue
                    }

                    function n(t, i) {
                        if (t && "number" == typeof t.low && "number" == typeof t.high && "boolean" == typeof t.unsigned && t.low === t.low && t.high === t.high)return new e.Long(t.low, t.high, "undefined" == typeof i ? t.unsigned : i);
                        if ("string" == typeof t)return e.Long.fromString(t, i || !1, 10);
                        if ("number" == typeof t)return e.Long.fromNumber(t, i || !1);
                        throw Error("not convertible to Long")
                    }

                    function r(t, i) {
                        var n = i.readVarint32(), o = 7 & n, a = n >>> 3;
                        switch (o) {
                            case e.WIRE_TYPES.VARINT:
                                do n = i.readUint8(); while (128 === (128 & n));
                                break;
                            case e.WIRE_TYPES.BITS64:
                                i.offset += 8;
                                break;
                            case e.WIRE_TYPES.LDELIM:
                                n = i.readVarint32(), i.offset += n;
                                break;
                            case e.WIRE_TYPES.STARTGROUP:
                                r(a, i);
                                break;
                            case e.WIRE_TYPES.ENDGROUP:
                                if (a === t)return !1;
                                throw Error("Illegal GROUPEND after unknown group: " + a + " (" + t + " expected)");
                            case e.WIRE_TYPES.BITS32:
                                i.offset += 4;
                                break;
                            default:
                                throw Error("Illegal wire type in unknown group " + t + ": " + o)
                        }
                        return !0
                    }

                    var o = {}, a = function (e, t, i) {
                        this.builder = e, this.parent = t, this.name = i, this.className
                    }, s = a.prototype;
                    s.fqn = function () {
                        for (var e = this.name, t = this; ;) {
                            if (t = t.parent, null == t)break;
                            e = t.name + "." + e
                        }
                        return e
                    }, s.toString = function (e) {
                        return (e ? this.className + " " : "") + this.fqn()
                    }, s.build = function () {
                        throw Error(this.toString(!0) + " cannot be built directly")
                    }, o.T = a;
                    var l = function (e, t, i, n, r) {
                        a.call(this, e, t, i), this.className = "Namespace", this.children = [], this.options = n || {}, this.syntax = r || "proto2"
                    }, h = l.prototype = Object.create(a.prototype);
                    h.getChildren = function (e) {
                        if (e = e || null, null == e)return this.children.slice();
                        for (var t = [], i = 0, n = this.children.length; n > i; ++i)this.children[i] instanceof e && t.push(this.children[i]);
                        return t
                    }, h.addChild = function (e) {
                        var t;
                        if (t = this.getChild(e.name))if (t instanceof d.Field && t.name !== t.originalName && null === this.getChild(t.originalName))t.name = t.originalName; else {
                            if (!(e instanceof d.Field && e.name !== e.originalName && null === this.getChild(e.originalName)))throw Error("Duplicate name in namespace " + this.toString(!0) + ": " + e.name);
                            e.name = e.originalName
                        }
                        this.children.push(e)
                    }, h.getChild = function (e) {
                        for (var t = "number" == typeof e ? "id" : "name", i = 0, n = this.children.length; n > i; ++i)if (this.children[i][t] === e)return this.children[i];
                        return null
                    }, h.resolve = function (e, t) {
                        var i = "string" == typeof e ? e.split(".") : e, n = this, r = 0;
                        if ("" === i[r]) {
                            for (; null !== n.parent;)n = n.parent;
                            r++
                        }
                        var a;
                        do {
                            do {
                                if (!(n instanceof o.Namespace)) {
                                    n = null;
                                    break
                                }
                                if (a = n.getChild(i[r]), !a || !(a instanceof o.T) || t && !(a instanceof o.Namespace)) {
                                    n = null;
                                    break
                                }
                                n = a, r++
                            } while (r < i.length);
                            if (null != n)break;
                            if (null !== this.parent)return this.parent.resolve(e, t)
                        } while (null != n);
                        return n
                    }, h.qn = function (e) {
                        var t = [], i = e;
                        do t.unshift(i.name), i = i.parent; while (null !== i);
                        for (var n = 1; n <= t.length; n++) {
                            var r = t.slice(t.length - n);
                            if (e === this.resolve(r, e instanceof o.Namespace))return r.join(".")
                        }
                        return e.fqn()
                    }, h.build = function () {
                        for (var e, t = {}, i = this.children, n = 0, r = i.length; r > n; ++n)e = i[n], e instanceof l && (t[e.name] = e.build());
                        return Object.defineProperty && Object.defineProperty(t, "$options", {value: this.buildOpt()}), t
                    }, h.buildOpt = function () {
                        for (var e = {}, t = Object.keys(this.options), i = 0, n = t.length; n > i; ++i) {
                            var r = t[i], o = this.options[t[i]];
                            e[r] = o
                        }
                        return e
                    }, h.getOption = function (e) {
                        return "undefined" == typeof e ? this.options : "undefined" != typeof this.options[e] ? this.options[e] : null
                    }, o.Namespace = l;
                    var c = function (t, i, n, r) {
                        if (this.type = t, this.resolvedType = i, this.isMapKey = n, this.syntax = r, n && e.MAP_KEY_TYPES.indexOf(t) < 0)throw Error("Invalid map key type: " + t.name)
                    }, u = c.prototype;
                    c.defaultFieldValue = i, u.verifyValue = function (i) {
                        function r(e, t) {
                            throw Error("Illegal value for " + o.toString(!0) + " of type " + o.type.name + ": " + e + " (" + t + ")")
                        }

                        var o = this;
                        switch (this.type) {
                            case e.TYPES.int32:
                            case e.TYPES.sint32:
                            case e.TYPES.sfixed32:
                                return ("number" != typeof i || i === i && i % 1 !== 0) && r(typeof i, "not an integer"), i > 4294967295 ? 0 | i : i;
                            case e.TYPES.uint32:
                            case e.TYPES.fixed32:
                                return ("number" != typeof i || i === i && i % 1 !== 0) && r(typeof i, "not an integer"), 0 > i ? i >>> 0 : i;
                            case e.TYPES.int64:
                            case e.TYPES.sint64:
                            case e.TYPES.sfixed64:
                                if (e.Long)try {
                                    return n(i, !1)
                                } catch (a) {
                                    r(typeof i, a.message)
                                } else r(typeof i, "requires Long.js");
                            case e.TYPES.uint64:
                            case e.TYPES.fixed64:
                                if (e.Long)try {
                                    return n(i, !0)
                                } catch (a) {
                                    r(typeof i, a.message)
                                } else r(typeof i, "requires Long.js");
                            case e.TYPES.bool:
                                return "boolean" != typeof i && r(typeof i, "not a boolean"), i;
                            case e.TYPES["float"]:
                            case e.TYPES["double"]:
                                return "number" != typeof i && r(typeof i, "not a number"), i;
                            case e.TYPES.string:
                                return "string" == typeof i || i && i instanceof String || r(typeof i, "not a string"), "" + i;
                            case e.TYPES.bytes:
                                return t.isByteBuffer(i) ? i : t.wrap(i, "base64");
                            case e.TYPES["enum"]:
                                var s = this.resolvedType.getChildren(e.Reflect.Enum.Value);
                                for (h = 0; h < s.length; h++) {
                                    if (s[h].name == i)return s[h].id;
                                    if (s[h].id == i)return s[h].id
                                }
                                if ("proto3" === this.syntax)return ("number" != typeof i || i === i && i % 1 !== 0) && r(typeof i, "not an integer"), (i > 4294967295 || 0 > i) && r(typeof i, "not in range for uint32"), i;
                                r(i, "not a valid enum value");
                            case e.TYPES.group:
                            case e.TYPES.message:
                                if (i && "object" == typeof i || r(typeof i, "object expected"), i instanceof this.resolvedType.clazz)return i;
                                if (i instanceof e.Builder.Message) {
                                    var l = {};
                                    for (var h in i)i.hasOwnProperty(h) && (l[h] = i[h]);
                                    i = l
                                }
                                return new this.resolvedType.clazz(i)
                        }
                        throw Error("[INTERNAL] Illegal value for " + this.toString(!0) + ": " + i + " (undefined type " + this.type + ")")
                    }, u.calculateLength = function (i, n) {
                        if (null === n)return 0;
                        var r;
                        switch (this.type) {
                            case e.TYPES.int32:
                                return 0 > n ? t.calculateVarint64(n) : t.calculateVarint32(n);
                            case e.TYPES.uint32:
                                return t.calculateVarint32(n);
                            case e.TYPES.sint32:
                                return t.calculateVarint32(t.zigZagEncode32(n));
                            case e.TYPES.fixed32:
                            case e.TYPES.sfixed32:
                            case e.TYPES["float"]:
                                return 4;
                            case e.TYPES.int64:
                            case e.TYPES.uint64:
                                return t.calculateVarint64(n);
                            case e.TYPES.sint64:
                                return t.calculateVarint64(t.zigZagEncode64(n));
                            case e.TYPES.fixed64:
                            case e.TYPES.sfixed64:
                                return 8;
                            case e.TYPES.bool:
                                return 1;
                            case e.TYPES["enum"]:
                                return t.calculateVarint32(n);
                            case e.TYPES["double"]:
                                return 8;
                            case e.TYPES.string:
                                return r = t.calculateUTF8Bytes(n), t.calculateVarint32(r) + r;
                            case e.TYPES.bytes:
                                if (n.remaining() < 0)throw Error("Illegal value for " + this.toString(!0) + ": " + n.remaining() + " bytes remaining");
                                return t.calculateVarint32(n.remaining()) + n.remaining();
                            case e.TYPES.message:
                                return r = this.resolvedType.calculate(n), t.calculateVarint32(r) + r;
                            case e.TYPES.group:
                                return r = this.resolvedType.calculate(n), r + t.calculateVarint32(i << 3 | e.WIRE_TYPES.ENDGROUP)
                        }
                        throw Error("[INTERNAL] Illegal value to encode in " + this.toString(!0) + ": " + n + " (unknown type)")
                    }, u.encodeValue = function (i, n, r) {
                        if (null === n)return r;
                        switch (this.type) {
                            case e.TYPES.int32:
                                0 > n ? r.writeVarint64(n) : r.writeVarint32(n);
                                break;
                            case e.TYPES.uint32:
                                r.writeVarint32(n);
                                break;
                            case e.TYPES.sint32:
                                r.writeVarint32ZigZag(n);
                                break;
                            case e.TYPES.fixed32:
                                r.writeUint32(n);
                                break;
                            case e.TYPES.sfixed32:
                                r.writeInt32(n);
                                break;
                            case e.TYPES.int64:
                            case e.TYPES.uint64:
                                r.writeVarint64(n);
                                break;
                            case e.TYPES.sint64:
                                r.writeVarint64ZigZag(n);
                                break;
                            case e.TYPES.fixed64:
                                r.writeUint64(n);
                                break;
                            case e.TYPES.sfixed64:
                                r.writeInt64(n);
                                break;
                            case e.TYPES.bool:
                                "string" == typeof n ? r.writeVarint32("false" === n.toLowerCase() ? 0 : !!n) : r.writeVarint32(n ? 1 : 0);
                                break;
                            case e.TYPES["enum"]:
                                r.writeVarint32(n);
                                break;
                            case e.TYPES["float"]:
                                r.writeFloat32(n);
                                break;
                            case e.TYPES["double"]:
                                r.writeFloat64(n);
                                break;
                            case e.TYPES.string:
                                r.writeVString(n);
                                break;
                            case e.TYPES.bytes:
                                if (n.remaining() < 0)throw Error("Illegal value for " + this.toString(!0) + ": " + n.remaining() + " bytes remaining");
                                var o = n.offset;
                                r.writeVarint32(n.remaining()), r.append(n), n.offset = o;
                                break;
                            case e.TYPES.message:
                                var a = (new t).LE();
                                this.resolvedType.encode(n, a), r.writeVarint32(a.offset), r.append(a.flip());
                                break;
                            case e.TYPES.group:
                                this.resolvedType.encode(n, r), r.writeVarint32(i << 3 | e.WIRE_TYPES.ENDGROUP);
                                break;
                            default:
                                throw Error("[INTERNAL] Illegal value to encode in " + this.toString(!0) + ": " + n + " (unknown type)")
                        }
                        return r
                    }, u.decode = function (t, i, n) {
                        if (i != this.type.wireType)throw Error("Unexpected wire type for element");
                        var r, o;
                        switch (this.type) {
                            case e.TYPES.int32:
                                return 0 | t.readVarint32();
                            case e.TYPES.uint32:
                                return t.readVarint32() >>> 0;
                            case e.TYPES.sint32:
                                return 0 | t.readVarint32ZigZag();
                            case e.TYPES.fixed32:
                                return t.readUint32() >>> 0;
                            case e.TYPES.sfixed32:
                                return 0 | t.readInt32();
                            case e.TYPES.int64:
                                return t.readVarint64();
                            case e.TYPES.uint64:
                                return t.readVarint64().toUnsigned();
                            case e.TYPES.sint64:
                                return t.readVarint64ZigZag();
                            case e.TYPES.fixed64:
                                return t.readUint64();
                            case e.TYPES.sfixed64:
                                return t.readInt64();
                            case e.TYPES.bool:
                                return !!t.readVarint32();
                            case e.TYPES["enum"]:
                                return t.readVarint32();
                            case e.TYPES["float"]:
                                return t.readFloat();
                            case e.TYPES["double"]:
                                return t.readDouble();
                            case e.TYPES.string:
                                return t.readVString();
                            case e.TYPES.bytes:
                                if (o = t.readVarint32(), t.remaining() < o)throw Error("Illegal number of bytes for " + this.toString(!0) + ": " + o + " required but got only " + t.remaining());
                                return r = t.clone(), r.limit = r.offset + o, t.offset += o, r;
                            case e.TYPES.message:
                                return o = t.readVarint32(), this.resolvedType.decode(t, o);
                            case e.TYPES.group:
                                return this.resolvedType.decode(t, -1, n)
                        }
                        throw Error("[INTERNAL] Illegal decode type")
                    }, u.valueFromString = function (i) {
                        if (!this.isMapKey)throw Error("valueFromString() called on non-map-key element");
                        switch (this.type) {
                            case e.TYPES.int32:
                            case e.TYPES.sint32:
                            case e.TYPES.sfixed32:
                            case e.TYPES.uint32:
                            case e.TYPES.fixed32:
                                return this.verifyValue(parseInt(i));
                            case e.TYPES.int64:
                            case e.TYPES.sint64:
                            case e.TYPES.sfixed64:
                            case e.TYPES.uint64:
                            case e.TYPES.fixed64:
                                return this.verifyValue(i);
                            case e.TYPES.bool:
                                return "true" === i;
                            case e.TYPES.string:
                                return this.verifyValue(i);
                            case e.TYPES.bytes:
                                return t.fromBinary(i)
                        }
                    }, u.valueToString = function (t) {
                        if (!this.isMapKey)throw Error("valueToString() called on non-map-key element");
                        return this.type === e.TYPES.bytes ? t.toString("binary") : t.toString()
                    }, o.Element = c;
                    var d = function (e, t, i, n, r, o) {
                        l.call(this, e, t, i, n, o), this.className = "Message", this.extensions = void 0, this.clazz = null, this.isGroup = !!r, this._fields = null, this._fieldsById = null, this._fieldsByName = null
                    }, p = d.prototype = Object.create(l.prototype);
                    p.build = function (i) {
                        if (this.clazz && !i)return this.clazz;
                        var n = function (e, i) {
                            function n(i, r, o, a) {
                                if (null === i || "object" != typeof i) {
                                    if (a && a instanceof e.Reflect.Enum) {
                                        var s = e.Reflect.Enum.getName(a.object, i);
                                        if (null !== s)return s
                                    }
                                    return i
                                }
                                if (t.isByteBuffer(i))return r ? i.toBase64() : i.toBuffer();
                                if (e.Long.isLong(i))return o ? i.toString() : e.Long.fromValue(i);
                                var l;
                                if (Array.isArray(i))return l = [], i.forEach(function (e, t) {
                                    l[t] = n(e, r, o, a)
                                }), l;
                                if (l = {}, i instanceof e.Map) {
                                    for (var h = i.entries(), c = h.next(); !c.done; c = h.next())l[i.keyElem.valueToString(c.value[0])] = n(c.value[1], r, o, i.valueElem.resolvedType);
                                    return l
                                }
                                var u = i.$type, d = void 0;
                                for (var p in i)i.hasOwnProperty(p) && (u && (d = u.getChild(p)) ? l[p] = n(i[p], r, o, d.resolvedType) : l[p] = n(i[p], r, o));
                                return l
                            }

                            var r = i.getChildren(e.Reflect.Message.Field), o = i.getChildren(e.Reflect.Message.OneOf), a = function (n, s) {
                                e.Builder.Message.call(this);
                                for (var l = 0, h = o.length; h > l; ++l)this[o[l].name] = null;
                                for (l = 0, h = r.length; h > l; ++l) {
                                    var c = r[l];
                                    this[c.name] = c.repeated ? [] : c.map ? new e.Map(c) : null, !c.required && "proto3" !== i.syntax || null === c.defaultValue || (this[c.name] = c.defaultValue)
                                }
                                if (arguments.length > 0) {
                                    var u;
                                    if (1 !== arguments.length || null === n || "object" != typeof n || !("function" != typeof n.encode || n instanceof a) || Array.isArray(n) || n instanceof e.Map || t.isByteBuffer(n) || n instanceof ArrayBuffer || e.Long && n instanceof e.Long)for (l = 0, h = arguments.length; h > l; ++l)"undefined" != typeof(u = arguments[l]) && this.$set(r[l].name, u); else this.$set(n)
                                }
                            }, s = a.prototype = Object.create(e.Builder.Message.prototype);
                            s.add = function (t, n, r) {
                                var o = i._fieldsByName[t];
                                if (!r) {
                                    if (!o)throw Error(this + "#" + t + " is undefined");
                                    if (!(o instanceof e.Reflect.Message.Field))throw Error(this + "#" + t + " is not a field: " + o.toString(!0));
                                    if (!o.repeated)throw Error(this + "#" + t + " is not a repeated field");
                                    n = o.verifyValue(n, !0)
                                }
                                return null === this[t] && (this[t] = []), this[t].push(n), this
                            }, s.$add = s.add, s.set = function (t, n, r) {
                                if (t && "object" == typeof t) {
                                    r = n;
                                    for (var o in t)t.hasOwnProperty(o) && "undefined" != typeof(n = t[o]) && this.$set(o, n, r);
                                    return this
                                }
                                var a = i._fieldsByName[t];
                                if (r)this[t] = n; else {
                                    if (!a)throw Error(this + "#" + t + " is not a field: undefined");
                                    if (!(a instanceof e.Reflect.Message.Field))throw Error(this + "#" + t + " is not a field: " + a.toString(!0));
                                    this[a.name] = n = a.verifyValue(n)
                                }
                                if (a && a.oneof) {
                                    var s = this[a.oneof.name];
                                    null !== n ? (null !== s && s !== a.name && (this[s] = null), this[a.oneof.name] = a.name) : s === t && (this[a.oneof.name] = null);
                                }
                                return this
                            }, s.$set = s.set, s.get = function (t, n) {
                                if (n)return this[t];
                                var r = i._fieldsByName[t];
                                if (!(r && r instanceof e.Reflect.Message.Field))throw Error(this + "#" + t + " is not a field: undefined");
                                if (!(r instanceof e.Reflect.Message.Field))throw Error(this + "#" + t + " is not a field: " + r.toString(!0));
                                return this[r.name]
                            }, s.$get = s.get;
                            for (var l = 0; l < r.length; l++) {
                                var h = r[l];
                                h instanceof e.Reflect.Message.ExtensionField || i.builder.options.populateAccessors && function (e) {
                                    var t = e.originalName.replace(/(_[a-zA-Z])/g, function (e) {
                                        return e.toUpperCase().replace("_", "")
                                    });
                                    t = t.substring(0, 1).toUpperCase() + t.substring(1);
                                    var n = e.originalName.replace(/([A-Z])/g, function (e) {
                                        return "_" + e
                                    }), r = function (t, i) {
                                        return this[e.name] = i ? t : e.verifyValue(t), this
                                    }, o = function () {
                                        return this[e.name]
                                    };
                                    null === i.getChild("set" + t) && (s["set" + t] = r), null === i.getChild("set_" + n) && (s["set_" + n] = r), null === i.getChild("get" + t) && (s["get" + t] = o), null === i.getChild("get_" + n) && (s["get_" + n] = o)
                                }(h)
                            }
                            s.encode = function (e, n) {
                                "boolean" == typeof e && (n = e, e = void 0);
                                var r = !1;
                                e || (e = new t, r = !0);
                                var o = e.littleEndian;
                                try {
                                    return i.encode(this, e.LE(), n), (r ? e.flip() : e).LE(o)
                                } catch (a) {
                                    throw e.LE(o), a
                                }
                            }, a.encode = function (e, t, i) {
                                return new a(e).encode(t, i)
                            }, s.calculate = function () {
                                return i.calculate(this)
                            }, s.encodeDelimited = function (e, n) {
                                var r = !1;
                                e || (e = new t, r = !0);
                                var o = (new t).LE();
                                return i.encode(this, o, n).flip(), e.writeVarint32(o.remaining()), e.append(o), r ? e.flip() : e
                            }, s.encodeAB = function () {
                                try {
                                    return this.encode().toArrayBuffer()
                                } catch (e) {
                                    throw e.encoded && (e.encoded = e.encoded.toArrayBuffer()), e
                                }
                            }, s.toArrayBuffer = s.encodeAB, s.encodeNB = function () {
                                try {
                                    return this.encode().toBuffer()
                                } catch (e) {
                                    throw e.encoded && (e.encoded = e.encoded.toBuffer()), e
                                }
                            }, s.toBuffer = s.encodeNB, s.encode64 = function () {
                                try {
                                    return this.encode().toBase64()
                                } catch (e) {
                                    throw e.encoded && (e.encoded = e.encoded.toBase64()), e
                                }
                            }, s.toBase64 = s.encode64, s.encodeHex = function () {
                                try {
                                    return this.encode().toHex()
                                } catch (e) {
                                    throw e.encoded && (e.encoded = e.encoded.toHex()), e
                                }
                            }, s.toHex = s.encodeHex, s.toRaw = function (e, t) {
                                return n(this, !!e, !!t, this.$type)
                            }, s.encodeJSON = function () {
                                return JSON.stringify(n(this, !0, !0, this.$type))
                            }, a.decode = function (e, n, r) {
                                "string" == typeof n && (r = n, n = -1), "string" == typeof e && (e = t.wrap(e, r ? r : "base64")), e = t.isByteBuffer(e) ? e : t.wrap(e);
                                var o = e.littleEndian;
                                try {
                                    var a = i.decode(e.LE());
                                    return e.LE(o), a
                                } catch (s) {
                                    throw e.LE(o), s
                                }
                            }, a.decodeDelimited = function (e, n) {
                                if ("string" == typeof e && (e = t.wrap(e, n ? n : "base64")), e = t.isByteBuffer(e) ? e : t.wrap(e), e.remaining() < 1)return null;
                                var r = e.offset, o = e.readVarint32();
                                if (e.remaining() < o)return e.offset = r, null;
                                try {
                                    var a = i.decode(e.slice(e.offset, e.offset + o).LE());
                                    return e.offset += o, a
                                } catch (s) {
                                    throw e.offset += o, s
                                }
                            }, a.decode64 = function (e) {
                                return a.decode(e, "base64")
                            }, a.decodeHex = function (e) {
                                return a.decode(e, "hex")
                            }, a.decodeJSON = function (e) {
                                return new a(JSON.parse(e))
                            }, s.toString = function () {
                                return i.toString()
                            };
                            return Object.defineProperty && (Object.defineProperty(a, "$options", {value: i.buildOpt()}), Object.defineProperty(s, "$options", {value: a.$options}), Object.defineProperty(a, "$type", {value: i}), Object.defineProperty(s, "$type", {value: i})), a
                        }(e, this);
                        this._fields = [], this._fieldsById = {}, this._fieldsByName = {};
                        for (var r, o = 0, a = this.children.length; a > o; o++)if (r = this.children[o], r instanceof A || r instanceof d || r instanceof b) {
                            if (n.hasOwnProperty(r.name))throw Error("Illegal reflect child of " + this.toString(!0) + ": " + r.toString(!0) + " cannot override static property '" + r.name + "'");
                            n[r.name] = r.build()
                        } else if (r instanceof d.Field)r.build(), this._fields.push(r), this._fieldsById[r.id] = r, this._fieldsByName[r.name] = r; else if (!(r instanceof d.OneOf || r instanceof I))throw Error("Illegal reflect child of " + this.toString(!0) + ": " + this.children[o].toString(!0));
                        return this.clazz = n
                    }, p.encode = function (e, t, i) {
                        for (var n, r, o = null, a = 0, s = this._fields.length; s > a; ++a)n = this._fields[a], r = e[n.name], n.required && null === r ? null === o && (o = n) : n.encode(i ? r : n.verifyValue(r), t, e);
                        if (null !== o) {
                            var l = Error("Missing at least one required field for " + this.toString(!0) + ": " + o);
                            throw l.encoded = t, l
                        }
                        return t
                    }, p.calculate = function (e) {
                        for (var t, i, n = 0, r = 0, o = this._fields.length; o > r; ++r) {
                            if (t = this._fields[r], i = e[t.name], t.required && null === i)throw Error("Missing at least one required field for " + this.toString(!0) + ": " + t);
                            n += t.calculate(i, e)
                        }
                        return n
                    }, p.decode = function (t, i, n) {
                        i = "number" == typeof i ? i : -1;
                        for (var o, a, s, l, h = t.offset, c = new this.clazz; t.offset < h + i || -1 === i && t.remaining() > 0;) {
                            if (o = t.readVarint32(), a = 7 & o, s = o >>> 3, a === e.WIRE_TYPES.ENDGROUP) {
                                if (s !== n)throw Error("Illegal group end indicator for " + this.toString(!0) + ": " + s + " (" + (n ? n + " expected" : "not a group") + ")");
                                break
                            }
                            if (l = this._fieldsById[s]) {
                                if (l.repeated && !l.options.packed)c[l.name].push(l.decode(a, t)); else if (l.map) {
                                    var u = l.decode(a, t);
                                    c[l.name].set(u[0], u[1])
                                } else if (c[l.name] = l.decode(a, t), l.oneof) {
                                    var d = c[l.oneof.name];
                                    null !== d && d !== l.name && (c[d] = null), c[l.oneof.name] = l.name
                                }
                            } else switch (a) {
                                case e.WIRE_TYPES.VARINT:
                                    t.readVarint32();
                                    break;
                                case e.WIRE_TYPES.BITS32:
                                    t.offset += 4;
                                    break;
                                case e.WIRE_TYPES.BITS64:
                                    t.offset += 8;
                                    break;
                                case e.WIRE_TYPES.LDELIM:
                                    var p = t.readVarint32();
                                    t.offset += p;
                                    break;
                                case e.WIRE_TYPES.STARTGROUP:
                                    for (; r(s, t););
                                    break;
                                default:
                                    throw Error("Illegal wire type for unknown field " + s + " in " + this.toString(!0) + "#decode: " + a)
                            }
                        }
                        for (var f = 0, g = this._fields.length; g > f; ++f)if (l = this._fields[f], null === c[l.name])if ("proto3" === this.syntax)c[l.name] = l.defaultValue; else {
                            if (l.required) {
                                var m = Error("Missing at least one required field for " + this.toString(!0) + ": " + l.name);
                                throw m.decoded = c, m
                            }
                            e.populateDefaults && null !== l.defaultValue && (c[l.name] = l.defaultValue)
                        }
                        return c
                    }, o.Message = d;
                    var f = function (t, i, n, r, o, s, l, h, c, u) {
                        a.call(this, t, i, s), this.className = "Message.Field", this.required = "required" === n, this.repeated = "repeated" === n, this.map = "map" === n, this.keyType = r || null, this.type = o, this.resolvedType = null, this.id = l, this.options = h || {}, this.defaultValue = null, this.oneof = c || null, this.syntax = u || "proto2", this.originalName = this.name, this.element = null, this.keyElement = null, !this.builder.options.convertFieldsToCamelCase || this instanceof d.ExtensionField || (this.name = e.Util.toCamelCase(this.name))
                    }, g = f.prototype = Object.create(a.prototype);
                    g.build = function () {
                        this.element = new c(this.type, this.resolvedType, !1, this.syntax), this.map && (this.keyElement = new c(this.keyType, void 0, !0, this.syntax)), "proto3" !== this.syntax || this.repeated || this.map ? "undefined" != typeof this.options["default"] && (this.defaultValue = this.verifyValue(this.options["default"])) : this.defaultValue = c.defaultFieldValue(this.type)
                    }, g.verifyValue = function (t, i) {
                        function n(e, t) {
                            throw Error("Illegal value for " + r.toString(!0) + " of type " + r.type.name + ": " + e + " (" + t + ")")
                        }

                        i = i || !1;
                        var r = this;
                        if (null === t)return this.required && n(typeof t, "required"), "proto3" === this.syntax && this.type !== e.TYPES.message && n(typeof t, "proto3 field without field presence cannot be null"), null;
                        var o;
                        if (this.repeated && !i) {
                            Array.isArray(t) || (t = [t]);
                            var a = [];
                            for (o = 0; o < t.length; o++)a.push(this.element.verifyValue(t[o]));
                            return a
                        }
                        return this.map && !i ? t instanceof e.Map ? t : (t instanceof Object || n(typeof t, "expected ProtoBuf.Map or raw object for map field"), new e.Map(this, t)) : (!this.repeated && Array.isArray(t) && n(typeof t, "no array expected"), this.element.verifyValue(t))
                    }, g.hasWirePresence = function (t, i) {
                        if ("proto3" !== this.syntax)return null !== t;
                        if (this.oneof && i[this.oneof.name] === this.name)return !0;
                        switch (this.type) {
                            case e.TYPES.int32:
                            case e.TYPES.sint32:
                            case e.TYPES.sfixed32:
                            case e.TYPES.uint32:
                            case e.TYPES.fixed32:
                                return 0 !== t;
                            case e.TYPES.int64:
                            case e.TYPES.sint64:
                            case e.TYPES.sfixed64:
                            case e.TYPES.uint64:
                            case e.TYPES.fixed64:
                                return 0 !== t.low || 0 !== t.high;
                            case e.TYPES.bool:
                                return t;
                            case e.TYPES["float"]:
                            case e.TYPES["double"]:
                                return 0 !== t;
                            case e.TYPES.string:
                                return t.length > 0;
                            case e.TYPES.bytes:
                                return t.remaining() > 0;
                            case e.TYPES["enum"]:
                                return 0 !== t;
                            case e.TYPES.message:
                                return null !== t;
                            default:
                                return !0
                        }
                    }, g.encode = function (i, n, r) {
                        if (null === this.type || "object" != typeof this.type)throw Error("[INTERNAL] Unresolved type in " + this.toString(!0) + ": " + this.type);
                        if (null === i || this.repeated && 0 == i.length)return n;
                        try {
                            if (this.repeated) {
                                var o;
                                if (this.options.packed && e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType) >= 0) {
                                    n.writeVarint32(this.id << 3 | e.WIRE_TYPES.LDELIM), n.ensureCapacity(n.offset += 1);
                                    var a = n.offset;
                                    for (o = 0; o < i.length; o++)this.element.encodeValue(this.id, i[o], n);
                                    var s = n.offset - a, l = t.calculateVarint32(s);
                                    if (l > 1) {
                                        var h = n.slice(a, n.offset);
                                        a += l - 1, n.offset = a, n.append(h)
                                    }
                                    n.writeVarint32(s, a - l)
                                } else for (o = 0; o < i.length; o++)n.writeVarint32(this.id << 3 | this.type.wireType), this.element.encodeValue(this.id, i[o], n)
                            } else this.map ? i.forEach(function (i, r, o) {
                                var a = t.calculateVarint32(8 | this.keyType.wireType) + this.keyElement.calculateLength(1, r) + t.calculateVarint32(16 | this.type.wireType) + this.element.calculateLength(2, i);
                                n.writeVarint32(this.id << 3 | e.WIRE_TYPES.LDELIM), n.writeVarint32(a), n.writeVarint32(8 | this.keyType.wireType), this.keyElement.encodeValue(1, r, n), n.writeVarint32(16 | this.type.wireType), this.element.encodeValue(2, i, n)
                            }, this) : this.hasWirePresence(i, r) && (n.writeVarint32(this.id << 3 | this.type.wireType), this.element.encodeValue(this.id, i, n))
                        } catch (c) {
                            throw Error("Illegal value for " + this.toString(!0) + ": " + i + " (" + c + ")")
                        }
                        return n
                    }, g.calculate = function (i, n) {
                        if (i = this.verifyValue(i), null === this.type || "object" != typeof this.type)throw Error("[INTERNAL] Unresolved type in " + this.toString(!0) + ": " + this.type);
                        if (null === i || this.repeated && 0 == i.length)return 0;
                        var r = 0;
                        try {
                            if (this.repeated) {
                                var o, a;
                                if (this.options.packed && e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType) >= 0) {
                                    for (r += t.calculateVarint32(this.id << 3 | e.WIRE_TYPES.LDELIM), a = 0, o = 0; o < i.length; o++)a += this.element.calculateLength(this.id, i[o]);
                                    r += t.calculateVarint32(a), r += a
                                } else for (o = 0; o < i.length; o++)r += t.calculateVarint32(this.id << 3 | this.type.wireType), r += this.element.calculateLength(this.id, i[o])
                            } else this.map ? i.forEach(function (i, n, o) {
                                var a = t.calculateVarint32(8 | this.keyType.wireType) + this.keyElement.calculateLength(1, n) + t.calculateVarint32(16 | this.type.wireType) + this.element.calculateLength(2, i);
                                r += t.calculateVarint32(this.id << 3 | e.WIRE_TYPES.LDELIM), r += t.calculateVarint32(a), r += a
                            }, this) : this.hasWirePresence(i, n) && (r += t.calculateVarint32(this.id << 3 | this.type.wireType), r += this.element.calculateLength(this.id, i))
                        } catch (s) {
                            throw Error("Illegal value for " + this.toString(!0) + ": " + i + " (" + s + ")")
                        }
                        return r
                    }, g.decode = function (t, i, n) {
                        var r, o, a = !this.map && t == this.type.wireType || !n && this.repeated && this.options.packed && t == e.WIRE_TYPES.LDELIM || this.map && t == e.WIRE_TYPES.LDELIM;
                        if (!a)throw Error("Illegal wire type for field " + this.toString(!0) + ": " + t + " (" + this.type.wireType + " expected)");
                        if (t == e.WIRE_TYPES.LDELIM && this.repeated && this.options.packed && e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType) >= 0 && !n) {
                            o = i.readVarint32(), o = i.offset + o;
                            for (var s = []; i.offset < o;)s.push(this.decode(this.type.wireType, i, !0));
                            return s
                        }
                        if (this.map) {
                            var l = c.defaultFieldValue(this.keyType);
                            if (r = c.defaultFieldValue(this.type), o = i.readVarint32(), i.remaining() < o)throw Error("Illegal number of bytes for " + this.toString(!0) + ": " + o + " required but got only " + i.remaining());
                            var h = i.clone();
                            for (h.limit = h.offset + o, i.offset += o; h.remaining() > 0;) {
                                var u = h.readVarint32();
                                t = 7 & u;
                                var d = u >>> 3;
                                if (1 === d)l = this.keyElement.decode(h, t, d); else {
                                    if (2 !== d)throw Error("Unexpected tag in map field key/value submessage");
                                    r = this.element.decode(h, t, d)
                                }
                            }
                            return [l, r]
                        }
                        return this.element.decode(i, t, this.id)
                    }, o.Message.Field = f;
                    var m = function (e, t, i, n, r, o, a) {
                        f.call(this, e, t, i, null, n, r, o, a), this.extension
                    };
                    m.prototype = Object.create(f.prototype), o.Message.ExtensionField = m;
                    var v = function (e, t, i) {
                        a.call(this, e, t, i), this.fields = []
                    };
                    o.Message.OneOf = v;
                    var A = function (e, t, i, n, r) {
                        l.call(this, e, t, i, n, r), this.className = "Enum", this.object = null
                    };
                    A.getName = function (e, t) {
                        for (var i, n = Object.keys(e), r = 0; r < n.length; ++r)if (e[i = n[r]] === t)return i;
                        return null
                    };
                    var y = A.prototype = Object.create(l.prototype);
                    y.build = function (t) {
                        if (this.object && !t)return this.object;
                        for (var i = new e.Builder.Enum, n = this.getChildren(A.Value), r = 0, o = n.length; o > r; ++r)i[n[r].name] = n[r].id;
                        return Object.defineProperty && Object.defineProperty(i, "$options", {
                            value: this.buildOpt(),
                            enumerable: !1
                        }), this.object = i
                    }, o.Enum = A;
                    var C = function (e, t, i, n) {
                        a.call(this, e, t, i), this.className = "Enum.Value", this.id = n
                    };
                    C.prototype = Object.create(a.prototype), o.Enum.Value = C;
                    var I = function (e, t, i, n) {
                        a.call(this, e, t, i), this.field = n
                    };
                    I.prototype = Object.create(a.prototype), o.Extension = I;
                    var b = function (e, t, i, n) {
                        l.call(this, e, t, i, n), this.className = "Service", this.clazz = null
                    }, w = b.prototype = Object.create(l.prototype);
                    w.build = function (i) {
                        return this.clazz && !i ? this.clazz : this.clazz = function (e, i) {
                            for (var n = function (t) {
                                e.Builder.Service.call(this), this.rpcImpl = t || function (e, t, i) {
                                        setTimeout(i.bind(this, Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")), 0)
                                    }
                            }, r = n.prototype = Object.create(e.Builder.Service.prototype), o = i.getChildren(e.Reflect.Service.RPCMethod), a = 0; a < o.length; a++)!function (e) {
                                r[e.name] = function (n, r) {
                                    try {
                                        try {
                                            n = e.resolvedRequestType.clazz.decode(t.wrap(n))
                                        } catch (o) {
                                            if (!(o instanceof TypeError))throw o
                                        }
                                        if (null === n || "object" != typeof n)throw Error("Illegal arguments");
                                        n instanceof e.resolvedRequestType.clazz || (n = new e.resolvedRequestType.clazz(n)), this.rpcImpl(e.fqn(), n, function (t, n) {
                                            if (t)return void r(t);
                                            null === n && (n = "");
                                            try {
                                                n = e.resolvedResponseType.clazz.decode(n)
                                            } catch (o) {
                                            }
                                            return n && n instanceof e.resolvedResponseType.clazz ? void r(null, n) : void r(Error("Illegal response type received in service method " + i.name + "#" + e.name))
                                        })
                                    } catch (o) {
                                        setTimeout(r.bind(this, o), 0)
                                    }
                                }, n[e.name] = function (t, i, r) {
                                    new n(t)[e.name](i, r)
                                }, Object.defineProperty && (Object.defineProperty(n[e.name], "$options", {value: e.buildOpt()}), Object.defineProperty(r[e.name], "$options", {value: n[e.name].$options}))
                            }(o[a]);
                            return Object.defineProperty && (Object.defineProperty(n, "$options", {value: i.buildOpt()}), Object.defineProperty(r, "$options", {value: n.$options}), Object.defineProperty(n, "$type", {value: i}), Object.defineProperty(r, "$type", {value: i})), n
                        }(e, this)
                    }, o.Service = b;
                    var x = function (e, t, i, n) {
                        a.call(this, e, t, i), this.className = "Service.Method", this.options = n || {}
                    }, E = x.prototype = Object.create(a.prototype);
                    E.buildOpt = h.buildOpt, o.Service.Method = x;
                    var M = function (e, t, i, n, r, o, a, s) {
                        x.call(this, e, t, i, s), this.className = "Service.RPCMethod", this.requestName = n, this.responseName = r, this.requestStream = o, this.responseStream = a, this.resolvedRequestType = null, this.resolvedResponseType = null
                    };
                    return M.prototype = Object.create(x.prototype), o.Service.RPCMethod = M, o
                }(r), r.Builder = function (t, i, n) {
                    function r(e) {
                        e.messages && e.messages.forEach(function (t) {
                            t.syntax = e.syntax, r(t)
                        }), e.enums && e.enums.forEach(function (t) {
                            t.syntax = e.syntax
                        })
                    }

                    var o = function (e) {
                        this.ns = new n.Namespace(this, null, ""), this.ptr = this.ns, this.resolved = !1, this.result = null, this.files = {}, this.importRoot = null, this.options = e || {}
                    }, a = o.prototype;
                    return o.isMessage = function (e) {
                        return "string" != typeof e.name ? !1 : "undefined" != typeof e.values || "undefined" != typeof e.rpc ? !1 : !0
                    }, o.isMessageField = function (e) {
                        return "string" != typeof e.rule || "string" != typeof e.name || "string" != typeof e.type || "undefined" == typeof e.id ? !1 : !0
                    }, o.isEnum = function (e) {
                        return "string" != typeof e.name ? !1 : "undefined" != typeof e.values && Array.isArray(e.values) && 0 !== e.values.length ? !0 : !1
                    }, o.isService = function (e) {
                        return "string" == typeof e.name && "object" == typeof e.rpc && e.rpc ? !0 : !1
                    }, o.isExtend = function (e) {
                        return "string" != typeof e.ref ? !1 : !0
                    }, a.reset = function () {
                        return this.ptr = this.ns, this
                    }, a.define = function (e) {
                        if ("string" != typeof e || !i.TYPEREF.test(e))throw Error("illegal namespace: " + e);
                        return e.split(".").forEach(function (e) {
                            var t = this.ptr.getChild(e);
                            null === t && this.ptr.addChild(t = new n.Namespace(this, this.ptr, e)), this.ptr = t
                        }, this), this
                    }, a.create = function (e) {
                        if (!e)return this;
                        if (Array.isArray(e)) {
                            if (0 === e.length)return this;
                            e = e.slice()
                        } else e = [e];
                        for (var i = [e]; i.length > 0;) {
                            if (e = i.pop(), !Array.isArray(e))throw Error("not a valid namespace: " + JSON.stringify(e));
                            for (; e.length > 0;) {
                                var r = e.shift();
                                if (o.isMessage(r)) {
                                    var a = new n.Message(this, this.ptr, r.name, r.options, r.isGroup, r.syntax), s = {};
                                    r.oneofs && Object.keys(r.oneofs).forEach(function (e) {
                                        a.addChild(s[e] = new n.Message.OneOf(this, a, e))
                                    }, this), r.fields && r.fields.forEach(function (e) {
                                        if (null !== a.getChild(0 | e.id))throw Error("duplicate or invalid field id in " + a.name + ": " + e.id);
                                        if (e.options && "object" != typeof e.options)throw Error("illegal field options in " + a.name + "#" + e.name);
                                        var t = null;
                                        if ("string" == typeof e.oneof && !(t = s[e.oneof]))throw Error("illegal oneof in " + a.name + "#" + e.name + ": " + e.oneof);
                                        e = new n.Message.Field(this, a, e.rule, e.keytype, e.type, e.name, e.id, e.options, t, r.syntax), t && t.fields.push(e), a.addChild(e)
                                    }, this);
                                    var l = [];
                                    if (r.enums && r.enums.forEach(function (e) {
                                            l.push(e)
                                        }), r.messages && r.messages.forEach(function (e) {
                                            l.push(e)
                                        }), r.services && r.services.forEach(function (e) {
                                            l.push(e)
                                        }), r.extensions && ("number" == typeof r.extensions[0] ? a.extensions = [r.extensions] : a.extensions = r.extensions), this.ptr.addChild(a), l.length > 0) {
                                        i.push(e), e = l, l = null, this.ptr = a, a = null;
                                        continue
                                    }
                                    l = null
                                } else if (o.isEnum(r))a = new n.Enum(this, this.ptr, r.name, r.options, r.syntax), r.values.forEach(function (e) {
                                    a.addChild(new n.Enum.Value(this, a, e.name, e.id))
                                }, this), this.ptr.addChild(a); else if (o.isService(r))a = new n.Service(this, this.ptr, r.name, r.options), Object.keys(r.rpc).forEach(function (e) {
                                    var t = r.rpc[e];
                                    a.addChild(new n.Service.RPCMethod(this, a, e, t.request, t.response, !!t.request_stream, !!t.response_stream, t.options))
                                }, this), this.ptr.addChild(a); else {
                                    if (!o.isExtend(r))throw Error("not a valid definition: " + JSON.stringify(r));
                                    if (a = this.ptr.resolve(r.ref, !0))r.fields.forEach(function (e) {
                                        if (null !== a.getChild(0 | e.id))throw Error("duplicate extended field id in " + a.name + ": " + e.id);
                                        if (a.extensions) {
                                            var i = !1;
                                            if (a.extensions.forEach(function (t) {
                                                    e.id >= t[0] && e.id <= t[1] && (i = !0)
                                                }), !i)throw Error("illegal extended field id in " + a.name + ": " + e.id + " (not within valid ranges)")
                                        }
                                        var r = e.name;
                                        this.options.convertFieldsToCamelCase && (r = t.Util.toCamelCase(r));
                                        var o = new n.Message.ExtensionField(this, a, e.rule, e.type, this.ptr.fqn() + "." + r, e.id, e.options), s = new n.Extension(this, this.ptr, e.name, o);
                                        o.extension = s, this.ptr.addChild(s), a.addChild(o)
                                    }, this); else if (!/\.?google\.protobuf\./.test(r.ref))throw Error("extended message " + r.ref + " is not defined")
                                }
                                r = null, a = null
                            }
                            e = null, this.ptr = this.ptr.parent
                        }
                        return this.resolved = !1, this.result = null, this
                    }, a["import"] = function (i, n) {
                        var o = "/";
                        if ("string" == typeof n) {
                            if (t.Util.IS_NODE && (n = e("path").resolve(n)), this.files[n] === !0)return this.reset();
                            this.files[n] = !0
                        } else if ("object" == typeof n) {
                            var a = n.root;
                            t.Util.IS_NODE && (a = e("path").resolve(a)), (a.indexOf("\\") >= 0 || n.file.indexOf("\\") >= 0) && (o = "\\");
                            var s = a + o + n.file;
                            if (this.files[s] === !0)return this.reset();
                            this.files[s] = !0
                        }
                        if (i.imports && i.imports.length > 0) {
                            var l, h = !1;
                            "object" == typeof n ? (this.importRoot = n.root, h = !0, l = this.importRoot, n = n.file, (l.indexOf("\\") >= 0 || n.indexOf("\\") >= 0) && (o = "\\")) : "string" == typeof n ? this.importRoot ? l = this.importRoot : n.indexOf("/") >= 0 ? (l = n.replace(/\/[^\/]*$/, ""), "" === l && (l = "/")) : n.indexOf("\\") >= 0 ? (l = n.replace(/\\[^\\]*$/, ""), o = "\\") : l = "." : l = null;
                            for (var c = 0; c < i.imports.length; c++)if ("string" == typeof i.imports[c]) {
                                if (!l)throw Error("cannot determine import root");
                                var u = i.imports[c];
                                if ("google/protobuf/descriptor.proto" === u)continue;
                                if (u = l + o + u, this.files[u] === !0)continue;
                                /\.proto$/i.test(u) && !t.DotProto && (u = u.replace(/\.proto$/, ".json"));
                                var d = t.Util.fetch(u);
                                if (null === d)throw Error("failed to import '" + u + "' in '" + n + "': file not found");
                                /\.json$/i.test(u) ? this["import"](JSON.parse(d + ""), u) : this["import"](t.DotProto.Parser.parse(d), u)
                            } else n ? /\.(\w+)$/.test(n) ? this["import"](i.imports[c], n.replace(/^(.+)\.(\w+)$/, function (e, t, i) {
                                return t + "_import" + c + "." + i
                            })) : this["import"](i.imports[c], n + "_import" + c) : this["import"](i.imports[c]);
                            h && (this.importRoot = null)
                        }
                        i["package"] && this.define(i["package"]), i.syntax && r(i);
                        var p = this.ptr;
                        return i.options && Object.keys(i.options).forEach(function (e) {
                            p.options[e] = i.options[e]
                        }), i.messages && (this.create(i.messages), this.ptr = p), i.enums && (this.create(i.enums), this.ptr = p), i.services && (this.create(i.services), this.ptr = p), i["extends"] && this.create(i["extends"]), this.reset()
                    }, a.resolveAll = function () {
                        var e;
                        if (null == this.ptr || "object" == typeof this.ptr.type)return this;
                        if (this.ptr instanceof n.Namespace)this.ptr.children.forEach(function (e) {
                            this.ptr = e, this.resolveAll()
                        }, this); else if (this.ptr instanceof n.Message.Field) {
                            if (i.TYPE.test(this.ptr.type))this.ptr.type = t.TYPES[this.ptr.type]; else {
                                if (!i.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in " + this.ptr.toString(!0) + ": " + this.ptr.type);
                                if (e = (this.ptr instanceof n.Message.ExtensionField ? this.ptr.extension.parent : this.ptr.parent).resolve(this.ptr.type, !0), !e)throw Error("unresolvable type reference in " + this.ptr.toString(!0) + ": " + this.ptr.type);
                                if (this.ptr.resolvedType = e, e instanceof n.Enum) {
                                    if (this.ptr.type = t.TYPES["enum"], "proto3" === this.ptr.syntax && "proto3" !== e.syntax)throw Error("proto3 message cannot reference proto2 enum")
                                } else {
                                    if (!(e instanceof n.Message))throw Error("illegal type reference in " + this.ptr.toString(!0) + ": " + this.ptr.type);
                                    this.ptr.type = e.isGroup ? t.TYPES.group : t.TYPES.message
                                }
                            }
                            if (this.ptr.map) {
                                if (!i.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in " + this.ptr.toString(!0) + ": " + this.ptr.keyType);
                                this.ptr.keyType = t.TYPES[this.ptr.keyType]
                            }
                        } else if (this.ptr instanceof t.Reflect.Service.Method) {
                            if (!(this.ptr instanceof t.Reflect.Service.RPCMethod))throw Error("illegal service type in " + this.ptr.toString(!0));
                            if (e = this.ptr.parent.resolve(this.ptr.requestName, !0), !(e && e instanceof t.Reflect.Message))throw Error("Illegal type reference in " + this.ptr.toString(!0) + ": " + this.ptr.requestName);
                            if (this.ptr.resolvedRequestType = e, e = this.ptr.parent.resolve(this.ptr.responseName, !0), !(e && e instanceof t.Reflect.Message))throw Error("Illegal type reference in " + this.ptr.toString(!0) + ": " + this.ptr.responseName);
                            this.ptr.resolvedResponseType = e
                        } else if (!(this.ptr instanceof t.Reflect.Message.OneOf || this.ptr instanceof t.Reflect.Extension || this.ptr instanceof t.Reflect.Enum.Value))throw Error("illegal object in namespace: " + typeof this.ptr + ": " + this.ptr);
                        return this.reset()
                    }, a.build = function (e) {
                        if (this.reset(), this.resolved || (this.resolveAll(), this.resolved = !0, this.result = null), null === this.result && (this.result = this.ns.build()), !e)return this.result;
                        for (var t = "string" == typeof e ? e.split(".") : e, i = this.result, n = 0; n < t.length; n++) {
                            if (!i[t[n]]) {
                                i = null;
                                break
                            }
                            i = i[t[n]]
                        }
                        return i
                    }, a.lookup = function (e, t) {
                        return e ? this.ns.resolve(e, t) : this.ns
                    }, a.toString = function () {
                        return "Builder"
                    }, o.Message = function () {
                    }, o.Enum = function () {
                    }, o.Service = function () {
                    }, o
                }(r, r.Lang, r.Reflect), r.Map = function (e, t) {
                    function i(e) {
                        var t = 0;
                        return {
                            next: function () {
                                return t < e.length ? {done: !1, value: e[t++]} : {done: !0}
                            }
                        }
                    }

                    var n = function (e, i) {
                        if (!e.map)throw Error("field is not a map");
                        if (this.field = e, this.keyElem = new t.Element(e.keyType, null, !0, e.syntax), this.valueElem = new t.Element(e.type, e.resolvedType, !1, e.syntax), this.map = {}, Object.defineProperty(this, "size", {
                                get: function () {
                                    return Object.keys(this.map).length
                                }
                            }), i)for (var n = Object.keys(i), r = 0; r < n.length; r++) {
                            var o = this.keyElem.valueFromString(n[r]), a = this.valueElem.verifyValue(i[n[r]]);
                            this.map[this.keyElem.valueToString(o)] = {key: o, value: a}
                        }
                    }, r = n.prototype;
                    return r.clear = function () {
                        this.map = {}
                    }, r["delete"] = function (e) {
                        var t = this.keyElem.valueToString(this.keyElem.verifyValue(e)), i = t in this.map;
                        return delete this.map[t], i
                    }, r.entries = function () {
                        for (var e, t = [], n = Object.keys(this.map), r = 0; r < n.length; r++)t.push([(e = this.map[n[r]]).key, e.value]);
                        return i(t)
                    }, r.keys = function () {
                        for (var e = [], t = Object.keys(this.map), n = 0; n < t.length; n++)e.push(this.map[t[n]].key);
                        return i(e)
                    }, r.values = function () {
                        for (var e = [], t = Object.keys(this.map), n = 0; n < t.length; n++)e.push(this.map[t[n]].value);
                        return i(e)
                    }, r.forEach = function (e, t) {
                        for (var i, n = Object.keys(this.map), r = 0; r < n.length; r++)e.call(t, (i = this.map[n[r]]).value, i.key, this)
                    }, r.set = function (e, t) {
                        var i = this.keyElem.verifyValue(e), n = this.valueElem.verifyValue(t);
                        return this.map[this.keyElem.valueToString(i)] = {key: i, value: n}, this
                    }, r.get = function (e) {
                        var t = this.keyElem.valueToString(this.keyElem.verifyValue(e));
                        if (t in this.map)return this.map[t].value
                    }, r.has = function (e) {
                        var t = this.keyElem.valueToString(this.keyElem.verifyValue(e));
                        return t in this.map
                    }, n
                }(r, r.Reflect), r.loadProto = function (e, t, i) {
                    return ("string" == typeof t || t && "string" == typeof t.file && "string" == typeof t.root) && (i = t, t = void 0), r.loadJson(r.DotProto.Parser.parse(e), t, i)
                }, r.protoFromString = r.loadProto, r.loadProtoFile = function (e, t, i) {
                    if (t && "object" == typeof t ? (i = t, t = null) : t && "function" == typeof t || (t = null), t)return r.Util.fetch("string" == typeof e ? e : e.root + "/" + e.file, function (n) {
                        if (null === n)return void t(Error("Failed to fetch file"));
                        try {
                            t(null, r.loadProto(n, i, e))
                        } catch (o) {
                            t(o)
                        }
                    });
                    var n = r.Util.fetch("object" == typeof e ? e.root + "/" + e.file : e);
                    return null === n ? null : r.loadProto(n, i, e)
                }, r.protoFromFile = r.loadProtoFile, r.newBuilder = function (e) {
                    return e = e || {}, "undefined" == typeof e.convertFieldsToCamelCase && (e.convertFieldsToCamelCase = r.convertFieldsToCamelCase), "undefined" == typeof e.populateAccessors && (e.populateAccessors = r.populateAccessors), new r.Builder(e)
                }, r.loadJson = function (e, t, i) {
                    return ("string" == typeof t || t && "string" == typeof t.file && "string" == typeof t.root) && (i = t, t = null), t && "object" == typeof t || (t = r.newBuilder()), "string" == typeof e && (e = JSON.parse(e)), t["import"](e, i), t.resolveAll(), t
                }, r.loadJsonFile = function (e, t, i) {
                    if (t && "object" == typeof t ? (i = t, t = null) : t && "function" == typeof t || (t = null), t)return r.Util.fetch("string" == typeof e ? e : e.root + "/" + e.file, function (n) {
                        if (null === n)return void t(Error("Failed to fetch file"));
                        try {
                            t(null, r.loadJson(JSON.parse(n), i, e))
                        } catch (o) {
                            t(o)
                        }
                    });
                    var n = r.Util.fetch("object" == typeof e ? e.root + "/" + e.file : e);
                    return null === n ? null : r.loadJson(JSON.parse(n), i, e)
                }, r
            })
        }).call(this, e("_process"))
    }, {_process: 162, bytebuffer: 173, fs: 155, path: 155}],
    173: [function (e, t, i) {
        !function (i, n) {
            "function" == typeof define && define.amd ? define(["long"], n) : "function" == typeof e && "object" == typeof t && t && t.exports ? t.exports = function () {
                var t;
                try {
                    t = e("long")
                } catch (i) {
                }
                return n(t)
            }() : (i.dcodeIO = i.dcodeIO || {}).ByteBuffer = n(i.dcodeIO.Long)
        }(this, function (e) {
            "use strict";
            function t(e) {
                var t = 0;
                return function () {
                    return t < e.length ? e.charCodeAt(t++) : null
                }
            }

            function i() {
                var e = [], t = [];
                return function () {
                    return 0 === arguments.length ? t.join("") + l.apply(String, e) : (e.length + arguments.length > 1024 && (t.push(l.apply(String, e)), e.length = 0), void Array.prototype.push.apply(e, arguments))
                }
            }

            function n(e, t, i, n, r) {
                var o, a, s = 8 * r - n - 1, l = (1 << s) - 1, h = l >> 1, c = -7, u = i ? r - 1 : 0, d = i ? -1 : 1, p = e[t + u];
                for (u += d, o = p & (1 << -c) - 1, p >>= -c, c += s; c > 0; o = 256 * o + e[t + u], u += d, c -= 8);
                for (a = o & (1 << -c) - 1, o >>= -c, c += n; c > 0; a = 256 * a + e[t + u], u += d, c -= 8);
                if (0 === o)o = 1 - h; else {
                    if (o === l)return a ? NaN : (p ? -1 : 1) * (1 / 0);
                    a += Math.pow(2, n), o -= h
                }
                return (p ? -1 : 1) * a * Math.pow(2, o - n)
            }

            function r(e, t, i, n, r, o) {
                var a, s, l, h = 8 * o - r - 1, c = (1 << h) - 1, u = c >> 1, d = 23 === r ? Math.pow(2, -24) - Math.pow(2, -77) : 0, p = n ? 0 : o - 1, f = n ? 1 : -1, g = 0 > t || 0 === t && 0 > 1 / t ? 1 : 0;
                for (t = Math.abs(t), isNaN(t) || t === 1 / 0 ? (s = isNaN(t) ? 1 : 0, a = c) : (a = Math.floor(Math.log(t) / Math.LN2), t * (l = Math.pow(2, -a)) < 1 && (a--, l *= 2), t += a + u >= 1 ? d / l : d * Math.pow(2, 1 - u), t * l >= 2 && (a++, l /= 2), a + u >= c ? (s = 0, a = c) : a + u >= 1 ? (s = (t * l - 1) * Math.pow(2, r), a += u) : (s = t * Math.pow(2, u - 1) * Math.pow(2, r), a = 0)); r >= 8; e[i + p] = 255 & s, p += f, s /= 256, r -= 8);
                for (a = a << r | s, h += r; h > 0; e[i + p] = 255 & a, p += f, a /= 256, h -= 8);
                e[i + p - f] |= 128 * g
            }

            var o = function (e, t, i) {
                if ("undefined" == typeof e && (e = o.DEFAULT_CAPACITY), "undefined" == typeof t && (t = o.DEFAULT_ENDIAN), "undefined" == typeof i && (i = o.DEFAULT_NOASSERT), !i) {
                    if (e = 0 | e, 0 > e)throw RangeError("Illegal capacity");
                    t = !!t, i = !!i
                }
                this.buffer = 0 === e ? s : new ArrayBuffer(e), this.view = 0 === e ? null : new Uint8Array(this.buffer), this.offset = 0, this.markedOffset = -1, this.limit = e, this.littleEndian = "undefined" != typeof t ? !!t : !1, this.noAssert = !!i
            };
            o.VERSION = "5.0.0", o.LITTLE_ENDIAN = !0, o.BIG_ENDIAN = !1, o.DEFAULT_CAPACITY = 16, o.DEFAULT_ENDIAN = o.BIG_ENDIAN, o.DEFAULT_NOASSERT = !1, o.Long = e || null;
            var a = o.prototype;
            a.__isByteBuffer__, Object.defineProperty(a, "__isByteBuffer__", {
                value: !0,
                enumerable: !1,
                configurable: !1
            });
            var s = new ArrayBuffer(0), l = String.fromCharCode;
            o.accessor = function () {
                return Uint8Array
            }, o.allocate = function (e, t, i) {
                return new o(e, t, i)
            }, o.concat = function (e, t, i, n) {
                ("boolean" == typeof t || "string" != typeof t) && (n = i, i = t, t = void 0);
                for (var r, a = 0, s = 0, l = e.length; l > s; ++s)o.isByteBuffer(e[s]) || (e[s] = o.wrap(e[s], t)), r = e[s].limit - e[s].offset, r > 0 && (a += r);
                if (0 === a)return new o(0, i, n);
                var h, c = new o(a, i, n);
                for (s = 0; l > s;)h = e[s++], r = h.limit - h.offset, 0 >= r || (c.view.set(h.view.subarray(h.offset, h.limit), c.offset), c.offset += r);
                return c.limit = c.offset, c.offset = 0, c
            }, o.isByteBuffer = function (e) {
                return (e && e.__isByteBuffer__) === !0
            }, o.type = function () {
                return ArrayBuffer
            }, o.wrap = function (e, t, i, n) {
                if ("string" != typeof t && (n = i, i = t, t = void 0), "string" == typeof e)switch ("undefined" == typeof t && (t = "utf8"), t) {
                    case"base64":
                        return o.fromBase64(e, i);
                    case"hex":
                        return o.fromHex(e, i);
                    case"binary":
                        return o.fromBinary(e, i);
                    case"utf8":
                        return o.fromUTF8(e, i);
                    case"debug":
                        return o.fromDebug(e, i);
                    default:
                        throw Error("Unsupported encoding: " + t)
                }
                if (null === e || "object" != typeof e)throw TypeError("Illegal buffer");
                var r;
                if (o.isByteBuffer(e))return r = a.clone.call(e), r.markedOffset = -1, r;
                if (e instanceof Uint8Array)r = new o(0, i, n), e.length > 0 && (r.buffer = e.buffer, r.offset = e.byteOffset, r.limit = e.byteOffset + e.byteLength, r.view = new Uint8Array(e.buffer)); else if (e instanceof ArrayBuffer)r = new o(0, i, n), e.byteLength > 0 && (r.buffer = e, r.offset = 0, r.limit = e.byteLength, r.view = e.byteLength > 0 ? new Uint8Array(e) : null); else {
                    if ("[object Array]" !== Object.prototype.toString.call(e))throw TypeError("Illegal buffer");
                    r = new o(e.length, i, n), r.limit = e.length;
                    for (var s = 0; s < e.length; ++s)r.view[s] = e[s]
                }
                return r
            }, a.readBytes = function (e, t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + e > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+" + e + ") <= " + this.buffer.byteLength)
                }
                var n = this.slice(t, t + e);
                return i && (this.offset += e), n
            }, a.writeBytes = a.append, a.writeInt8 = function (e, t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal value: " + e + " (not an integer)");
                    if (e |= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+0) <= " + this.buffer.byteLength)
                }
                t += 1;
                var n = this.buffer.byteLength;
                return t > n && this.resize((n *= 2) > t ? n : t), t -= 1, this.view[t] = e, i && (this.offset += 1), this
            }, a.writeByte = a.writeInt8, a.readInt8 = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 1 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+1) <= " + this.buffer.byteLength)
                }
                var i = this.view[e];
                return 128 === (128 & i) && (i = -(255 - i + 1)), t && (this.offset += 1), i
            }, a.readByte = a.readInt8, a.writeUint8 = function (e, t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal value: " + e + " (not an integer)");
                    if (e >>>= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+0) <= " + this.buffer.byteLength)
                }
                t += 1;
                var n = this.buffer.byteLength;
                return t > n && this.resize((n *= 2) > t ? n : t), t -= 1, this.view[t] = e, i && (this.offset += 1), this
            }, a.writeUInt8 = a.writeUint8, a.readUint8 = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 1 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+1) <= " + this.buffer.byteLength)
                }
                var i = this.view[e];
                return t && (this.offset += 1), i
            }, a.readUInt8 = a.readUint8, a.writeInt16 = function (e, t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset),
                        !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal value: " + e + " (not an integer)");
                    if (e |= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+0) <= " + this.buffer.byteLength)
                }
                t += 2;
                var n = this.buffer.byteLength;
                return t > n && this.resize((n *= 2) > t ? n : t), t -= 2, this.littleEndian ? (this.view[t + 1] = (65280 & e) >>> 8, this.view[t] = 255 & e) : (this.view[t] = (65280 & e) >>> 8, this.view[t + 1] = 255 & e), i && (this.offset += 2), this
            }, a.writeShort = a.writeInt16, a.readInt16 = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 2 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+2) <= " + this.buffer.byteLength)
                }
                var i = 0;
                return this.littleEndian ? (i = this.view[e], i |= this.view[e + 1] << 8) : (i = this.view[e] << 8, i |= this.view[e + 1]), 32768 === (32768 & i) && (i = -(65535 - i + 1)), t && (this.offset += 2), i
            }, a.readShort = a.readInt16, a.writeUint16 = function (e, t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal value: " + e + " (not an integer)");
                    if (e >>>= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+0) <= " + this.buffer.byteLength)
                }
                t += 2;
                var n = this.buffer.byteLength;
                return t > n && this.resize((n *= 2) > t ? n : t), t -= 2, this.littleEndian ? (this.view[t + 1] = (65280 & e) >>> 8, this.view[t] = 255 & e) : (this.view[t] = (65280 & e) >>> 8, this.view[t + 1] = 255 & e), i && (this.offset += 2), this
            }, a.writeUInt16 = a.writeUint16, a.readUint16 = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 2 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+2) <= " + this.buffer.byteLength)
                }
                var i = 0;
                return this.littleEndian ? (i = this.view[e], i |= this.view[e + 1] << 8) : (i = this.view[e] << 8, i |= this.view[e + 1]), t && (this.offset += 2), i
            }, a.readUInt16 = a.readUint16, a.writeInt32 = function (e, t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal value: " + e + " (not an integer)");
                    if (e |= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+0) <= " + this.buffer.byteLength)
                }
                t += 4;
                var n = this.buffer.byteLength;
                return t > n && this.resize((n *= 2) > t ? n : t), t -= 4, this.littleEndian ? (this.view[t + 3] = e >>> 24 & 255, this.view[t + 2] = e >>> 16 & 255, this.view[t + 1] = e >>> 8 & 255, this.view[t] = 255 & e) : (this.view[t] = e >>> 24 & 255, this.view[t + 1] = e >>> 16 & 255, this.view[t + 2] = e >>> 8 & 255, this.view[t + 3] = 255 & e), i && (this.offset += 4), this
            }, a.writeInt = a.writeInt32, a.readInt32 = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 4 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+4) <= " + this.buffer.byteLength)
                }
                var i = 0;
                return this.littleEndian ? (i = this.view[e + 2] << 16, i |= this.view[e + 1] << 8, i |= this.view[e], i += this.view[e + 3] << 24 >>> 0) : (i = this.view[e + 1] << 16, i |= this.view[e + 2] << 8, i |= this.view[e + 3], i += this.view[e] << 24 >>> 0), i |= 0, t && (this.offset += 4), i
            }, a.readInt = a.readInt32, a.writeUint32 = function (e, t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal value: " + e + " (not an integer)");
                    if (e >>>= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+0) <= " + this.buffer.byteLength)
                }
                t += 4;
                var n = this.buffer.byteLength;
                return t > n && this.resize((n *= 2) > t ? n : t), t -= 4, this.littleEndian ? (this.view[t + 3] = e >>> 24 & 255, this.view[t + 2] = e >>> 16 & 255, this.view[t + 1] = e >>> 8 & 255, this.view[t] = 255 & e) : (this.view[t] = e >>> 24 & 255, this.view[t + 1] = e >>> 16 & 255, this.view[t + 2] = e >>> 8 & 255, this.view[t + 3] = 255 & e), i && (this.offset += 4), this
            }, a.writeUInt32 = a.writeUint32, a.readUint32 = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 4 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+4) <= " + this.buffer.byteLength)
                }
                var i = 0;
                return this.littleEndian ? (i = this.view[e + 2] << 16, i |= this.view[e + 1] << 8, i |= this.view[e], i += this.view[e + 3] << 24 >>> 0) : (i = this.view[e + 1] << 16, i |= this.view[e + 2] << 8, i |= this.view[e + 3], i += this.view[e] << 24 >>> 0), t && (this.offset += 4), i
            }, a.readUInt32 = a.readUint32, e && (a.writeInt64 = function (t, i) {
                var n = "undefined" == typeof i;
                if (n && (i = this.offset), !this.noAssert) {
                    if ("number" == typeof t)t = e.fromNumber(t); else if ("string" == typeof t)t = e.fromString(t); else if (!(t && t instanceof e))throw TypeError("Illegal value: " + t + " (not an integer or Long)");
                    if ("number" != typeof i || i % 1 !== 0)throw TypeError("Illegal offset: " + i + " (not an integer)");
                    if (i >>>= 0, 0 > i || i + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + i + " (+0) <= " + this.buffer.byteLength)
                }
                "number" == typeof t ? t = e.fromNumber(t) : "string" == typeof t && (t = e.fromString(t)), i += 8;
                var r = this.buffer.byteLength;
                i > r && this.resize((r *= 2) > i ? r : i), i -= 8;
                var o = t.low, a = t.high;
                return this.littleEndian ? (this.view[i + 3] = o >>> 24 & 255, this.view[i + 2] = o >>> 16 & 255, this.view[i + 1] = o >>> 8 & 255, this.view[i] = 255 & o, i += 4, this.view[i + 3] = a >>> 24 & 255, this.view[i + 2] = a >>> 16 & 255, this.view[i + 1] = a >>> 8 & 255, this.view[i] = 255 & a) : (this.view[i] = a >>> 24 & 255, this.view[i + 1] = a >>> 16 & 255, this.view[i + 2] = a >>> 8 & 255, this.view[i + 3] = 255 & a, i += 4, this.view[i] = o >>> 24 & 255, this.view[i + 1] = o >>> 16 & 255, this.view[i + 2] = o >>> 8 & 255, this.view[i + 3] = 255 & o), n && (this.offset += 8), this
            }, a.writeLong = a.writeInt64, a.readInt64 = function (t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 8 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+8) <= " + this.buffer.byteLength)
                }
                var n = 0, r = 0;
                this.littleEndian ? (n = this.view[t + 2] << 16, n |= this.view[t + 1] << 8, n |= this.view[t], n += this.view[t + 3] << 24 >>> 0, t += 4, r = this.view[t + 2] << 16, r |= this.view[t + 1] << 8, r |= this.view[t], r += this.view[t + 3] << 24 >>> 0) : (r = this.view[t + 1] << 16, r |= this.view[t + 2] << 8, r |= this.view[t + 3], r += this.view[t] << 24 >>> 0, t += 4, n = this.view[t + 1] << 16, n |= this.view[t + 2] << 8, n |= this.view[t + 3], n += this.view[t] << 24 >>> 0);
                var o = new e(n, r, !1);
                return i && (this.offset += 8), o
            }, a.readLong = a.readInt64, a.writeUint64 = function (t, i) {
                var n = "undefined" == typeof i;
                if (n && (i = this.offset), !this.noAssert) {
                    if ("number" == typeof t)t = e.fromNumber(t); else if ("string" == typeof t)t = e.fromString(t); else if (!(t && t instanceof e))throw TypeError("Illegal value: " + t + " (not an integer or Long)");
                    if ("number" != typeof i || i % 1 !== 0)throw TypeError("Illegal offset: " + i + " (not an integer)");
                    if (i >>>= 0, 0 > i || i + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + i + " (+0) <= " + this.buffer.byteLength)
                }
                "number" == typeof t ? t = e.fromNumber(t) : "string" == typeof t && (t = e.fromString(t)), i += 8;
                var r = this.buffer.byteLength;
                i > r && this.resize((r *= 2) > i ? r : i), i -= 8;
                var o = t.low, a = t.high;
                return this.littleEndian ? (this.view[i + 3] = o >>> 24 & 255, this.view[i + 2] = o >>> 16 & 255, this.view[i + 1] = o >>> 8 & 255, this.view[i] = 255 & o, i += 4, this.view[i + 3] = a >>> 24 & 255, this.view[i + 2] = a >>> 16 & 255, this.view[i + 1] = a >>> 8 & 255, this.view[i] = 255 & a) : (this.view[i] = a >>> 24 & 255, this.view[i + 1] = a >>> 16 & 255, this.view[i + 2] = a >>> 8 & 255, this.view[i + 3] = 255 & a, i += 4, this.view[i] = o >>> 24 & 255, this.view[i + 1] = o >>> 16 & 255, this.view[i + 2] = o >>> 8 & 255, this.view[i + 3] = 255 & o), n && (this.offset += 8), this
            }, a.writeUInt64 = a.writeUint64, a.readUint64 = function (t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 8 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+8) <= " + this.buffer.byteLength)
                }
                var n = 0, r = 0;
                this.littleEndian ? (n = this.view[t + 2] << 16, n |= this.view[t + 1] << 8, n |= this.view[t], n += this.view[t + 3] << 24 >>> 0, t += 4, r = this.view[t + 2] << 16, r |= this.view[t + 1] << 8, r |= this.view[t], r += this.view[t + 3] << 24 >>> 0) : (r = this.view[t + 1] << 16, r |= this.view[t + 2] << 8, r |= this.view[t + 3], r += this.view[t] << 24 >>> 0, t += 4, n = this.view[t + 1] << 16, n |= this.view[t + 2] << 8, n |= this.view[t + 3], n += this.view[t] << 24 >>> 0);
                var o = new e(n, r, !0);
                return i && (this.offset += 8), o
            }, a.readUInt64 = a.readUint64), a.writeFloat32 = function (e, t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof e)throw TypeError("Illegal value: " + e + " (not a number)");
                    if ("number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+0) <= " + this.buffer.byteLength)
                }
                t += 4;
                var n = this.buffer.byteLength;
                return t > n && this.resize((n *= 2) > t ? n : t), t -= 4, r(this.view, e, t, this.littleEndian, 23, 4), i && (this.offset += 4), this
            }, a.writeFloat = a.writeFloat32, a.readFloat32 = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 4 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+4) <= " + this.buffer.byteLength)
                }
                var i = n(this.view, e, this.littleEndian, 23, 4);
                return t && (this.offset += 4), i
            }, a.readFloat = a.readFloat32, a.writeFloat64 = function (e, t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof e)throw TypeError("Illegal value: " + e + " (not a number)");
                    if ("number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+0) <= " + this.buffer.byteLength)
                }
                t += 8;
                var n = this.buffer.byteLength;
                return t > n && this.resize((n *= 2) > t ? n : t), t -= 8, r(this.view, e, t, this.littleEndian, 52, 8), i && (this.offset += 8), this
            }, a.writeDouble = a.writeFloat64, a.readFloat64 = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 8 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+8) <= " + this.buffer.byteLength)
                }
                var i = n(this.view, e, this.littleEndian, 52, 8);
                return t && (this.offset += 8), i
            }, a.readDouble = a.readFloat64, o.MAX_VARINT32_BYTES = 5, o.calculateVarint32 = function (e) {
                return e >>>= 0, 128 > e ? 1 : 16384 > e ? 2 : 1 << 21 > e ? 3 : 1 << 28 > e ? 4 : 5
            }, o.zigZagEncode32 = function (e) {
                return ((e |= 0) << 1 ^ e >> 31) >>> 0
            }, o.zigZagDecode32 = function (e) {
                return e >>> 1 ^ -(1 & e) | 0
            }, a.writeVarint32 = function (e, t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal value: " + e + " (not an integer)");
                    if (e |= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+0) <= " + this.buffer.byteLength)
                }
                var n, r = o.calculateVarint32(e);
                t += r;
                var a = this.buffer.byteLength;
                for (t > a && this.resize((a *= 2) > t ? a : t), t -= r, e >>>= 0; e >= 128;)n = 127 & e | 128, this.view[t++] = n, e >>>= 7;
                return this.view[t++] = e, i ? (this.offset = t, this) : r
            }, a.writeVarint32ZigZag = function (e, t) {
                return this.writeVarint32(o.zigZagEncode32(e), t)
            }, a.readVarint32 = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 1 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+1) <= " + this.buffer.byteLength)
                }
                var i, n = 0, r = 0;
                do {
                    if (!this.noAssert && e > this.limit) {
                        var o = Error("Truncated");
                        throw o.truncated = !0, o
                    }
                    i = this.view[e++], 5 > n && (r |= (127 & i) << 7 * n), ++n
                } while (0 !== (128 & i));
                return r |= 0, t ? (this.offset = e, r) : {value: r, length: n}
            }, a.readVarint32ZigZag = function (e) {
                var t = this.readVarint32(e);
                return "object" == typeof t ? t.value = o.zigZagDecode32(t.value) : t = o.zigZagDecode32(t), t
            }, e && (o.MAX_VARINT64_BYTES = 10, o.calculateVarint64 = function (t) {
                "number" == typeof t ? t = e.fromNumber(t) : "string" == typeof t && (t = e.fromString(t));
                var i = t.toInt() >>> 0, n = t.shiftRightUnsigned(28).toInt() >>> 0, r = t.shiftRightUnsigned(56).toInt() >>> 0;
                return 0 == r ? 0 == n ? 16384 > i ? 128 > i ? 1 : 2 : 1 << 21 > i ? 3 : 4 : 16384 > n ? 128 > n ? 5 : 6 : 1 << 21 > n ? 7 : 8 : 128 > r ? 9 : 10
            }, o.zigZagEncode64 = function (t) {
                return "number" == typeof t ? t = e.fromNumber(t, !1) : "string" == typeof t ? t = e.fromString(t, !1) : t.unsigned !== !1 && (t = t.toSigned()), t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()
            }, o.zigZagDecode64 = function (t) {
                return "number" == typeof t ? t = e.fromNumber(t, !1) : "string" == typeof t ? t = e.fromString(t, !1) : t.unsigned !== !1 && (t = t.toSigned()), t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()
            }, a.writeVarint64 = function (t, i) {
                var n = "undefined" == typeof i;
                if (n && (i = this.offset), !this.noAssert) {
                    if ("number" == typeof t)t = e.fromNumber(t); else if ("string" == typeof t)t = e.fromString(t); else if (!(t && t instanceof e))throw TypeError("Illegal value: " + t + " (not an integer or Long)");
                    if ("number" != typeof i || i % 1 !== 0)throw TypeError("Illegal offset: " + i + " (not an integer)");
                    if (i >>>= 0, 0 > i || i + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + i + " (+0) <= " + this.buffer.byteLength)
                }
                "number" == typeof t ? t = e.fromNumber(t, !1) : "string" == typeof t ? t = e.fromString(t, !1) : t.unsigned !== !1 && (t = t.toSigned());
                var r = o.calculateVarint64(t), a = t.toInt() >>> 0, s = t.shiftRightUnsigned(28).toInt() >>> 0, l = t.shiftRightUnsigned(56).toInt() >>> 0;
                i += r;
                var h = this.buffer.byteLength;
                switch (i > h && this.resize((h *= 2) > i ? h : i), i -= r, r) {
                    case 10:
                        this.view[i + 9] = l >>> 7 & 1;
                    case 9:
                        this.view[i + 8] = 9 !== r ? 128 | l : 127 & l;
                    case 8:
                        this.view[i + 7] = 8 !== r ? s >>> 21 | 128 : s >>> 21 & 127;
                    case 7:
                        this.view[i + 6] = 7 !== r ? s >>> 14 | 128 : s >>> 14 & 127;
                    case 6:
                        this.view[i + 5] = 6 !== r ? s >>> 7 | 128 : s >>> 7 & 127;
                    case 5:
                        this.view[i + 4] = 5 !== r ? 128 | s : 127 & s;
                    case 4:
                        this.view[i + 3] = 4 !== r ? a >>> 21 | 128 : a >>> 21 & 127;
                    case 3:
                        this.view[i + 2] = 3 !== r ? a >>> 14 | 128 : a >>> 14 & 127;
                    case 2:
                        this.view[i + 1] = 2 !== r ? a >>> 7 | 128 : a >>> 7 & 127;
                    case 1:
                        this.view[i] = 1 !== r ? 128 | a : 127 & a
                }
                return n ? (this.offset += r, this) : r
            }, a.writeVarint64ZigZag = function (e, t) {
                return this.writeVarint64(o.zigZagEncode64(e), t)
            }, a.readVarint64 = function (t) {
                var i = "undefined" == typeof t;
                if (i && (t = this.offset), !this.noAssert) {
                    if ("number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: " + t + " (not an integer)");
                    if (t >>>= 0, 0 > t || t + 1 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + t + " (+1) <= " + this.buffer.byteLength)
                }
                var n = t, r = 0, o = 0, a = 0, s = 0;
                if (s = this.view[t++], r = 127 & s, 128 & s && (s = this.view[t++], r |= (127 & s) << 7, (128 & s || this.noAssert && "undefined" == typeof s) && (s = this.view[t++], r |= (127 & s) << 14, (128 & s || this.noAssert && "undefined" == typeof s) && (s = this.view[t++], r |= (127 & s) << 21, (128 & s || this.noAssert && "undefined" == typeof s) && (s = this.view[t++], o = 127 & s, (128 & s || this.noAssert && "undefined" == typeof s) && (s = this.view[t++], o |= (127 & s) << 7, (128 & s || this.noAssert && "undefined" == typeof s) && (s = this.view[t++], o |= (127 & s) << 14, (128 & s || this.noAssert && "undefined" == typeof s) && (s = this.view[t++], o |= (127 & s) << 21, (128 & s || this.noAssert && "undefined" == typeof s) && (s = this.view[t++], a = 127 & s, (128 & s || this.noAssert && "undefined" == typeof s) && (s = this.view[t++], a |= (127 & s) << 7, 128 & s || this.noAssert && "undefined" == typeof s))))))))))throw Error("Buffer overrun");
                var l = e.fromBits(r | o << 28, o >>> 4 | a << 24, !1);
                return i ? (this.offset = t, l) : {value: l, length: t - n}
            }, a.readVarint64ZigZag = function (t) {
                var i = this.readVarint64(t);
                return i && i.value instanceof e ? i.value = o.zigZagDecode64(i.value) : i = o.zigZagDecode64(i), i
            }), a.writeCString = function (e, i) {
                var n = "undefined" == typeof i;
                n && (i = this.offset);
                var r, o = e.length;
                if (!this.noAssert) {
                    if ("string" != typeof e)throw TypeError("Illegal str: Not a string");
                    for (r = 0; o > r; ++r)if (0 === e.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");
                    if ("number" != typeof i || i % 1 !== 0)throw TypeError("Illegal offset: " + i + " (not an integer)");
                    if (i >>>= 0, 0 > i || i + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + i + " (+0) <= " + this.buffer.byteLength)
                }
                o = c.calculateUTF16asUTF8(t(e))[1], i += o + 1;
                var a = this.buffer.byteLength;
                return i > a && this.resize((a *= 2) > i ? a : i), i -= o + 1, c.encodeUTF16toUTF8(t(e), function (e) {
                    this.view[i++] = e
                }.bind(this)), this.view[i++] = 0, n ? (this.offset = i, this) : o
            }, a.readCString = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 1 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+1) <= " + this.buffer.byteLength)
                }
                var n, r = e, o = -1;
                return c.decodeUTF8toUTF16(function () {
                    if (0 === o)return null;
                    if (e >= this.limit)throw RangeError("Illegal range: Truncated data, " + e + " < " + this.limit);
                    return o = this.view[e++], 0 === o ? null : o
                }.bind(this), n = i(), !0), t ? (this.offset = e, n()) : {string: n(), length: e - r}
            }, a.writeIString = function (e, i) {
                var n = "undefined" == typeof i;
                if (n && (i = this.offset), !this.noAssert) {
                    if ("string" != typeof e)throw TypeError("Illegal str: Not a string");
                    if ("number" != typeof i || i % 1 !== 0)throw TypeError("Illegal offset: " + i + " (not an integer)");
                    if (i >>>= 0, 0 > i || i + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + i + " (+0) <= " + this.buffer.byteLength)
                }
                var r, o = i;
                r = c.calculateUTF16asUTF8(t(e), this.noAssert)[1], i += 4 + r;
                var a = this.buffer.byteLength;
                if (i > a && this.resize((a *= 2) > i ? a : i), i -= 4 + r, this.littleEndian ? (this.view[i + 3] = r >>> 24 & 255, this.view[i + 2] = r >>> 16 & 255, this.view[i + 1] = r >>> 8 & 255, this.view[i] = 255 & r) : (this.view[i] = r >>> 24 & 255, this.view[i + 1] = r >>> 16 & 255, this.view[i + 2] = r >>> 8 & 255, this.view[i + 3] = 255 & r), i += 4, c.encodeUTF16toUTF8(t(e), function (e) {
                        this.view[i++] = e
                    }.bind(this)), i !== o + 4 + r)throw RangeError("Illegal range: Truncated data, " + i + " == " + (i + 4 + r));
                return n ? (this.offset = i, this) : i - o
            }, a.readIString = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 4 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+4) <= " + this.buffer.byteLength)
                }
                var i = e, n = this.readUint32(e), r = this.readUTF8String(n, o.METRICS_BYTES, e += 4);
                return e += r.length, t ? (this.offset = e, r.string) : {string: r.string, length: e - i}
            }, o.METRICS_CHARS = "c", o.METRICS_BYTES = "b", a.writeUTF8String = function (e, i) {
                var n = "undefined" == typeof i;
                if (n && (i = this.offset), !this.noAssert) {
                    if ("number" != typeof i || i % 1 !== 0)throw TypeError("Illegal offset: " + i + " (not an integer)");
                    if (i >>>= 0, 0 > i || i + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + i + " (+0) <= " + this.buffer.byteLength)
                }
                var r, o = i;
                r = c.calculateUTF16asUTF8(t(e))[1], i += r;
                var a = this.buffer.byteLength;
                return i > a && this.resize((a *= 2) > i ? a : i), i -= r, c.encodeUTF16toUTF8(t(e), function (e) {
                    this.view[i++] = e
                }.bind(this)), n ? (this.offset = i, this) : i - o
            }, a.writeString = a.writeUTF8String, o.calculateUTF8Chars = function (e) {
                return c.calculateUTF16asUTF8(t(e))[0]
            }, o.calculateUTF8Bytes = function (e) {
                return c.calculateUTF16asUTF8(t(e))[1]
            }, o.calculateString = o.calculateUTF8Bytes, a.readUTF8String = function (e, t, n) {
                "number" == typeof t && (n = t, t = void 0);
                var r = "undefined" == typeof n;
                if (r && (n = this.offset), "undefined" == typeof t && (t = o.METRICS_CHARS), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal length: " + e + " (not an integer)");
                    if (e |= 0, "number" != typeof n || n % 1 !== 0)throw TypeError("Illegal offset: " + n + " (not an integer)");
                    if (n >>>= 0, 0 > n || n + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + n + " (+0) <= " + this.buffer.byteLength)
                }
                var a, s = 0, l = n;
                if (t === o.METRICS_CHARS) {
                    if (a = i(), c.decodeUTF8(function () {
                            return e > s && n < this.limit ? this.view[n++] : null
                        }.bind(this), function (e) {
                            ++s, c.UTF8toUTF16(e, a)
                        }), s !== e)throw RangeError("Illegal range: Truncated data, " + s + " == " + e);
                    return r ? (this.offset = n, a()) : {string: a(), length: n - l}
                }
                if (t === o.METRICS_BYTES) {
                    if (!this.noAssert) {
                        if ("number" != typeof n || n % 1 !== 0)throw TypeError("Illegal offset: " + n + " (not an integer)");
                        if (n >>>= 0, 0 > n || n + e > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + n + " (+" + e + ") <= " + this.buffer.byteLength)
                    }
                    var h = n + e;
                    if (c.decodeUTF8toUTF16(function () {
                            return h > n ? this.view[n++] : null
                        }.bind(this), a = i(), this.noAssert), n !== h)throw RangeError("Illegal range: Truncated data, " + n + " == " + h);
                    return r ? (this.offset = n, a()) : {string: a(), length: n - l}
                }
                throw TypeError("Unsupported metrics: " + t)
            }, a.readString = a.readUTF8String, a.writeVString = function (e, i) {
                var n = "undefined" == typeof i;
                if (n && (i = this.offset), !this.noAssert) {
                    if ("string" != typeof e)throw TypeError("Illegal str: Not a string");
                    if ("number" != typeof i || i % 1 !== 0)throw TypeError("Illegal offset: " + i + " (not an integer)");
                    if (i >>>= 0, 0 > i || i + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + i + " (+0) <= " + this.buffer.byteLength)
                }
                var r, a, s = i;
                r = c.calculateUTF16asUTF8(t(e), this.noAssert)[1], a = o.calculateVarint32(r), i += a + r;
                var l = this.buffer.byteLength;
                if (i > l && this.resize((l *= 2) > i ? l : i), i -= a + r, i += this.writeVarint32(r, i), c.encodeUTF16toUTF8(t(e), function (e) {
                        this.view[i++] = e
                    }.bind(this)), i !== s + r + a)throw RangeError("Illegal range: Truncated data, " + i + " == " + (i + r + a));
                return n ? (this.offset = i, this) : i - s
            }, a.readVString = function (e) {
                var t = "undefined" == typeof e;
                if (t && (e = this.offset), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 1 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+1) <= " + this.buffer.byteLength)
                }
                var i = e, n = this.readVarint32(e), r = this.readUTF8String(n.value, o.METRICS_BYTES, e += n.length);
                return e += r.length, t ? (this.offset = e, r.string) : {string: r.string, length: e - i}
            }, a.append = function (e, t, i) {
                ("number" == typeof t || "string" != typeof t) && (i = t, t = void 0);
                var n = "undefined" == typeof i;
                if (n && (i = this.offset), !this.noAssert) {
                    if ("number" != typeof i || i % 1 !== 0)throw TypeError("Illegal offset: " + i + " (not an integer)");
                    if (i >>>= 0, 0 > i || i + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + i + " (+0) <= " + this.buffer.byteLength)
                }
                e instanceof o || (e = o.wrap(e, t));
                var r = e.limit - e.offset;
                if (0 >= r)return this;
                i += r;
                var a = this.buffer.byteLength;
                return i > a && this.resize((a *= 2) > i ? a : i), i -= r, this.view.set(e.view.subarray(e.offset, e.limit), i), e.offset += r, n && (this.offset += r), this
            }, a.appendTo = function (e, t) {
                return e.append(this, t), this
            }, a.assert = function (e) {
                return this.noAssert = !e, this
            }, a.capacity = function () {
                return this.buffer.byteLength
            }, a.clear = function () {
                return this.offset = 0, this.limit = this.buffer.byteLength, this.markedOffset = -1, this
            }, a.clone = function (e) {
                var t = new o(0, this.littleEndian, this.noAssert);
                return e ? (t.buffer = new ArrayBuffer(this.buffer.byteLength), t.view = new Uint8Array(t.buffer)) : (t.buffer = this.buffer, t.view = this.view), t.offset = this.offset, t.markedOffset = this.markedOffset, t.limit = this.limit, t
            }, a.compact = function (e, t) {
                if ("undefined" == typeof e && (e = this.offset), "undefined" == typeof t && (t = this.limit), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal begin: Not an integer");
                    if (e >>>= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal end: Not an integer");
                    if (t >>>= 0, 0 > e || e > t || t > this.buffer.byteLength)throw RangeError("Illegal range: 0 <= " + e + " <= " + t + " <= " + this.buffer.byteLength)
                }
                if (0 === e && t === this.buffer.byteLength)return this;
                var i = t - e;
                if (0 === i)return this.buffer = s, this.view = null, this.markedOffset >= 0 && (this.markedOffset -= e), this.offset = 0, this.limit = 0, this;
                var n = new ArrayBuffer(i), r = new Uint8Array(n);
                return r.set(this.view.subarray(e, t)), this.buffer = n, this.view = r, this.markedOffset >= 0 && (this.markedOffset -= e), this.offset = 0, this.limit = i, this
            }, a.copy = function (e, t) {
                if ("undefined" == typeof e && (e = this.offset), "undefined" == typeof t && (t = this.limit), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal begin: Not an integer");
                    if (e >>>= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal end: Not an integer");
                    if (t >>>= 0, 0 > e || e > t || t > this.buffer.byteLength)throw RangeError("Illegal range: 0 <= " + e + " <= " + t + " <= " + this.buffer.byteLength)
                }
                if (e === t)return new o(0, this.littleEndian, this.noAssert);
                var i = t - e, n = new o(i, this.littleEndian, this.noAssert);
                return n.offset = 0, n.limit = i, n.markedOffset >= 0 && (n.markedOffset -= e), this.copyTo(n, 0, e, t), n
            }, a.copyTo = function (e, t, i, n) {
                var r, a;
                if (!this.noAssert && !o.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");
                if (t = (a = "undefined" == typeof t) ? e.offset : 0 | t, i = (r = "undefined" == typeof i) ? this.offset : 0 | i, n = "undefined" == typeof n ? this.limit : 0 | n, 0 > t || t > e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= " + t + " <= " + e.buffer.byteLength);
                if (0 > i || n > this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= " + i + " <= " + this.buffer.byteLength);
                var s = n - i;
                return 0 === s ? e : (e.ensureCapacity(t + s), e.view.set(this.view.subarray(i, n), t), r && (this.offset += s), a && (e.offset += s), this)
            }, a.ensureCapacity = function (e) {
                var t = this.buffer.byteLength;
                return e > t ? this.resize((t *= 2) > e ? t : e) : this
            }, a.fill = function (e, t, i) {
                var n = "undefined" == typeof t;
                if (n && (t = this.offset), "string" == typeof e && e.length > 0 && (e = e.charCodeAt(0)), "undefined" == typeof t && (t = this.offset), "undefined" == typeof i && (i = this.limit), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal value: " + e + " (not an integer)");
                    if (e |= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal begin: Not an integer");
                    if (t >>>= 0, "number" != typeof i || i % 1 !== 0)throw TypeError("Illegal end: Not an integer");
                    if (i >>>= 0, 0 > t || t > i || i > this.buffer.byteLength)throw RangeError("Illegal range: 0 <= " + t + " <= " + i + " <= " + this.buffer.byteLength)
                }
                if (t >= i)return this;
                for (; i > t;)this.view[t++] = e;
                return n && (this.offset = t), this
            }, a.flip = function () {
                return this.limit = this.offset, this.offset = 0, this
            }, a.mark = function (e) {
                if (e = "undefined" == typeof e ? this.offset : e, !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal offset: " + e + " (not an integer)");
                    if (e >>>= 0, 0 > e || e + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + e + " (+0) <= " + this.buffer.byteLength)
                }
                return this.markedOffset = e, this
            }, a.order = function (e) {
                if (!this.noAssert && "boolean" != typeof e)throw TypeError("Illegal littleEndian: Not a boolean");
                return this.littleEndian = !!e, this
            }, a.LE = function (e) {
                return this.littleEndian = "undefined" != typeof e ? !!e : !0, this
            }, a.BE = function (e) {
                return this.littleEndian = "undefined" != typeof e ? !e : !1, this
            }, a.prepend = function (e, t, i) {
                ("number" == typeof t || "string" != typeof t) && (i = t, t = void 0);
                var n = "undefined" == typeof i;
                if (n && (i = this.offset), !this.noAssert) {
                    if ("number" != typeof i || i % 1 !== 0)throw TypeError("Illegal offset: " + i + " (not an integer)");
                    if (i >>>= 0, 0 > i || i + 0 > this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= " + i + " (+0) <= " + this.buffer.byteLength)
                }
                e instanceof o || (e = o.wrap(e, t));
                var r = e.limit - e.offset;
                if (0 >= r)return this;
                var a = r - i;
                if (a > 0) {
                    var s = new ArrayBuffer(this.buffer.byteLength + a), l = new Uint8Array(s);
                    l.set(this.view.subarray(i, this.buffer.byteLength), r), this.buffer = s, this.view = l, this.offset += a, this.markedOffset >= 0 && (this.markedOffset += a), this.limit += a, i += a
                } else {
                    new Uint8Array(this.buffer)
                }
                return this.view.set(e.view.subarray(e.offset, e.limit), i - r), e.offset = e.limit, n && (this.offset -= r), this
            }, a.prependTo = function (e, t) {
                return e.prepend(this, t), this
            }, a.printDebug = function (e) {
                "function" != typeof e && (e = console.log.bind(console)), e(this.toString() + "\n-------------------------------------------------------------------\n" + this.toDebug(!0))
            }, a.remaining = function () {
                return this.limit - this.offset
            }, a.reset = function () {
                return this.markedOffset >= 0 ? (this.offset = this.markedOffset, this.markedOffset = -1) : this.offset = 0, this
            }, a.resize = function (e) {
                if (!this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal capacity: " + e + " (not an integer)");
                    if (e |= 0, 0 > e)throw RangeError("Illegal capacity: 0 <= " + e)
                }
                if (this.buffer.byteLength < e) {
                    var t = new ArrayBuffer(e), i = new Uint8Array(t);
                    i.set(this.view), this.buffer = t, this.view = i
                }
                return this
            }, a.reverse = function (e, t) {
                if ("undefined" == typeof e && (e = this.offset), "undefined" == typeof t && (t = this.limit), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal begin: Not an integer");
                    if (e >>>= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal end: Not an integer");
                    if (t >>>= 0, 0 > e || e > t || t > this.buffer.byteLength)throw RangeError("Illegal range: 0 <= " + e + " <= " + t + " <= " + this.buffer.byteLength)
                }
                return e === t ? this : (Array.prototype.reverse.call(this.view.subarray(e, t)), this)
            }, a.skip = function (e) {
                if (!this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal length: " + e + " (not an integer)");
                    e |= 0
                }
                var t = this.offset + e;
                if (!this.noAssert && (0 > t || t > this.buffer.byteLength))throw RangeError("Illegal length: 0 <= " + this.offset + " + " + e + " <= " + this.buffer.byteLength);
                return this.offset = t, this
            }, a.slice = function (e, t) {
                if ("undefined" == typeof e && (e = this.offset), "undefined" == typeof t && (t = this.limit), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal begin: Not an integer");
                    if (e >>>= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal end: Not an integer");
                    if (t >>>= 0, 0 > e || e > t || t > this.buffer.byteLength)throw RangeError("Illegal range: 0 <= " + e + " <= " + t + " <= " + this.buffer.byteLength)
                }
                var i = this.clone();
                return i.offset = e, i.limit = t, i
            }, a.toBuffer = function (e) {
                var t = this.offset, i = this.limit;
                if (!this.noAssert) {
                    if ("number" != typeof t || t % 1 !== 0)throw TypeError("Illegal offset: Not an integer");
                    if (t >>>= 0, "number" != typeof i || i % 1 !== 0)throw TypeError("Illegal limit: Not an integer");
                    if (i >>>= 0, 0 > t || t > i || i > this.buffer.byteLength)throw RangeError("Illegal range: 0 <= " + t + " <= " + i + " <= " + this.buffer.byteLength)
                }
                if (!e && 0 === t && i === this.buffer.byteLength)return this.buffer;
                if (t === i)return s;
                var n = new ArrayBuffer(i - t);
                return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t, i), 0), n
            }, a.toArrayBuffer = a.toBuffer, a.toString = function (e, t, i) {
                if ("undefined" == typeof e)return "ByteBufferAB(offset=" + this.offset + ",markedOffset=" + this.markedOffset + ",limit=" + this.limit + ",capacity=" + this.capacity() + ")";
                switch ("number" == typeof e && (e = "utf8", t = e, i = t), e) {
                    case"utf8":
                        return this.toUTF8(t, i);
                    case"base64":
                        return this.toBase64(t, i);
                    case"hex":
                        return this.toHex(t, i);
                    case"binary":
                        return this.toBinary(t, i);
                    case"debug":
                        return this.toDebug();
                    case"columns":
                        return this.toColumns();
                    default:
                        throw Error("Unsupported encoding: " + e)
                }
            };
            var h = function () {
                for (var e = {}, t = [65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 43, 47], i = [], n = 0, r = t.length; r > n; ++n)i[t[n]] = n;
                return e.encode = function (e, i) {
                    for (var n, r; null !== (n = e());)i(t[n >> 2 & 63]), r = (3 & n) << 4, null !== (n = e()) ? (r |= n >> 4 & 15, i(t[63 & (r | n >> 4 & 15)]), r = (15 & n) << 2, null !== (n = e()) ? (i(t[63 & (r | n >> 6 & 3)]), i(t[63 & n])) : (i(t[63 & r]), i(61))) : (i(t[63 & r]), i(61), i(61))
                }, e.decode = function (e, t) {
                    function n(e) {
                        throw Error("Illegal character code: " + e)
                    }

                    for (var r, o, a; null !== (r = e());)if (o = i[r], "undefined" == typeof o && n(r), null !== (r = e()) && (a = i[r], "undefined" == typeof a && n(r), t(o << 2 >>> 0 | (48 & a) >> 4), null !== (r = e()))) {
                        if (o = i[r], "undefined" == typeof o) {
                            if (61 === r)break;
                            n(r)
                        }
                        if (t((15 & a) << 4 >>> 0 | (60 & o) >> 2), null !== (r = e())) {
                            if (a = i[r], "undefined" == typeof a) {
                                if (61 === r)break;
                                n(r)
                            }
                            t((3 & o) << 6 >>> 0 | a)
                        }
                    }
                }, e.test = function (e) {
                    return /^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)
                }, e
            }();
            a.toBase64 = function (e, t) {
                if ("undefined" == typeof e && (e = this.offset), "undefined" == typeof t && (t = this.limit), e = 0 | e, t = 0 | t, 0 > e || t > this.capacity || e > t)throw RangeError("begin, end");
                var n;
                return h.encode(function () {
                    return t > e ? this.view[e++] : null
                }.bind(this), n = i()), n()
            }, o.fromBase64 = function (e, i) {
                if ("string" != typeof e)throw TypeError("str");
                var n = new o(e.length / 4 * 3, i), r = 0;
                return h.decode(t(e), function (e) {
                    n.view[r++] = e
                }), n.limit = r, n
            }, o.btoa = function (e) {
                return o.fromBinary(e).toBase64()
            }, o.atob = function (e) {
                return o.fromBase64(e).toBinary()
            }, a.toBinary = function (e, t) {
                if ("undefined" == typeof e && (e = this.offset), "undefined" == typeof t && (t = this.limit), e |= 0, t |= 0, 0 > e || t > this.capacity() || e > t)throw RangeError("begin, end");
                if (e === t)return "";
                for (var i = [], n = []; t > e;)i.push(this.view[e++]), i.length >= 1024 && (n.push(String.fromCharCode.apply(String, i)), i = []);
                return n.join("") + String.fromCharCode.apply(String, i)
            }, o.fromBinary = function (e, t) {
                if ("string" != typeof e)throw TypeError("str");
                for (var i, n = 0, r = e.length, a = new o(r, t); r > n;) {
                    if (i = e.charCodeAt(n), i > 255)throw RangeError("illegal char code: " + i);
                    a.view[n++] = i
                }
                return a.limit = r, a
            }, a.toDebug = function (e) {
                for (var t, i = -1, n = this.buffer.byteLength, r = "", o = "", a = ""; n > i;) {
                    if (-1 !== i && (t = this.view[i], r += 16 > t ? "0" + t.toString(16).toUpperCase() : t.toString(16).toUpperCase(), e && (o += t > 32 && 127 > t ? String.fromCharCode(t) : ".")), ++i, e && i > 0 && i % 16 === 0 && i !== n) {
                        for (; r.length < 51;)r += " ";
                        a += r + o + "\n", r = o = ""
                    }
                    r += i === this.offset && i === this.limit ? i === this.markedOffset ? "!" : "|" : i === this.offset ? i === this.markedOffset ? "[" : "<" : i === this.limit ? i === this.markedOffset ? "]" : ">" : i === this.markedOffset ? "'" : e || 0 !== i && i !== n ? " " : ""
                }
                if (e && " " !== r) {
                    for (; r.length < 51;)r += " ";
                    a += r + o + "\n"
                }
                return e ? a : r
            }, o.fromDebug = function (e, t, i) {
                for (var n, r, a = e.length, s = new o((a + 1) / 3 | 0, t, i), l = 0, h = 0, c = !1, u = !1, d = !1, p = !1, f = !1; a > l;) {
                    switch (n = e.charAt(l++)) {
                        case"!":
                            if (!i) {
                                if (u || d || p) {
                                    f = !0;
                                    break
                                }
                                u = d = p = !0
                            }
                            s.offset = s.markedOffset = s.limit = h, c = !1;
                            break;
                        case"|":
                            if (!i) {
                                if (u || p) {
                                    f = !0;
                                    break
                                }
                                u = p = !0
                            }
                            s.offset = s.limit = h, c = !1;
                            break;
                        case"[":
                            if (!i) {
                                if (u || d) {
                                    f = !0;
                                    break
                                }
                                u = d = !0
                            }
                            s.offset = s.markedOffset = h, c = !1;
                            break;
                        case"<":
                            if (!i) {
                                if (u) {
                                    f = !0;
                                    break
                                }
                                u = !0
                            }
                            s.offset = h, c = !1;
                            break;
                        case"]":
                            if (!i) {
                                if (p || d) {
                                    f = !0;
                                    break
                                }
                                p = d = !0
                            }
                            s.limit = s.markedOffset = h, c = !1;
                            break;
                        case">":
                            if (!i) {
                                if (p) {
                                    f = !0;
                                    break
                                }
                                p = !0
                            }
                            s.limit = h, c = !1;
                            break;
                        case"'":
                            if (!i) {
                                if (d) {
                                    f = !0;
                                    break
                                }
                                d = !0
                            }
                            s.markedOffset = h, c = !1;
                            break;
                        case" ":
                            c = !1;
                            break;
                        default:
                            if (!i && c) {
                                f = !0;
                                break
                            }
                            if (r = parseInt(n + e.charAt(l++), 16), !i && (isNaN(r) || 0 > r || r > 255))throw TypeError("Illegal str: Not a debug encoded string");
                            s.view[h++] = r, c = !0
                    }
                    if (f)throw TypeError("Illegal str: Invalid symbol at " + l)
                }
                if (!i) {
                    if (!u || !p)throw TypeError("Illegal str: Missing offset or limit");
                    if (h < s.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) " + h + " < " + a)
                }
                return s
            }, a.toHex = function (e, t) {
                if (e = "undefined" == typeof e ? this.offset : e, t = "undefined" == typeof t ? this.limit : t, !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal begin: Not an integer");
                    if (e >>>= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal end: Not an integer");
                    if (t >>>= 0, 0 > e || e > t || t > this.buffer.byteLength)throw RangeError("Illegal range: 0 <= " + e + " <= " + t + " <= " + this.buffer.byteLength)
                }
                for (var i, n = new Array(t - e); t > e;)i = this.view[e++], 16 > i ? n.push("0", i.toString(16)) : n.push(i.toString(16));
                return n.join("")
            }, o.fromHex = function (e, t, i) {
                if (!i) {
                    if ("string" != typeof e)throw TypeError("Illegal str: Not a string");
                    if (e.length % 2 !== 0)throw TypeError("Illegal str: Length not a multiple of 2")
                }
                for (var n, r = e.length, a = new o(r / 2 | 0, t), s = 0, l = 0; r > s; s += 2) {
                    if (n = parseInt(e.substring(s, s + 2), 16), !i && (!isFinite(n) || 0 > n || n > 255))throw TypeError("Illegal str: Contains non-hex characters");
                    a.view[l++] = n
                }
                return a.limit = l, a
            };
            var c = function () {
                var e = {};
                return e.MAX_CODEPOINT = 1114111, e.encodeUTF8 = function (e, t) {
                    var i = null;
                    for ("number" == typeof e && (i = e, e = function () {
                        return null
                    }); null !== i || null !== (i = e());)128 > i ? t(127 & i) : 2048 > i ? (t(i >> 6 & 31 | 192), t(63 & i | 128)) : 65536 > i ? (t(i >> 12 & 15 | 224), t(i >> 6 & 63 | 128), t(63 & i | 128)) : (t(i >> 18 & 7 | 240), t(i >> 12 & 63 | 128), t(i >> 6 & 63 | 128), t(63 & i | 128)), i = null
                }, e.decodeUTF8 = function (e, t) {
                    for (var i, n, r, o, a = function (e) {
                        e = e.slice(0, e.indexOf(null));
                        var t = Error(e.toString());
                        throw t.name = "TruncatedError", t.bytes = e, t
                    }; null !== (i = e());)if (0 === (128 & i))t(i); else if (192 === (224 & i))null === (n = e()) && a([i, n]), t((31 & i) << 6 | 63 & n); else if (224 === (240 & i))(null === (n = e()) || null === (r = e())) && a([i, n, r]), t((15 & i) << 12 | (63 & n) << 6 | 63 & r); else {
                        if (240 !== (248 & i))throw RangeError("Illegal starting byte: " + i);
                        (null === (n = e()) || null === (r = e()) || null === (o = e())) && a([i, n, r, o]), t((7 & i) << 18 | (63 & n) << 12 | (63 & r) << 6 | 63 & o)
                    }
                }, e.UTF16toUTF8 = function (e, t) {
                    for (var i, n = null; ;) {
                        if (null === (i = null !== n ? n : e()))break;
                        i >= 55296 && 57343 >= i && null !== (n = e()) && n >= 56320 && 57343 >= n ? (t(1024 * (i - 55296) + n - 56320 + 65536), n = null) : t(i)
                    }
                    null !== n && t(n)
                }, e.UTF8toUTF16 = function (e, t) {
                    var i = null;
                    for ("number" == typeof e && (i = e, e = function () {
                        return null
                    }); null !== i || null !== (i = e());)65535 >= i ? t(i) : (i -= 65536, t((i >> 10) + 55296), t(i % 1024 + 56320)), i = null
                }, e.encodeUTF16toUTF8 = function (t, i) {
                    e.UTF16toUTF8(t, function (t) {
                        e.encodeUTF8(t, i)
                    })
                }, e.decodeUTF8toUTF16 = function (t, i) {
                    e.decodeUTF8(t, function (t) {
                        e.UTF8toUTF16(t, i)
                    })
                }, e.calculateCodePoint = function (e) {
                    return 128 > e ? 1 : 2048 > e ? 2 : 65536 > e ? 3 : 4
                }, e.calculateUTF8 = function (e) {
                    for (var t, i = 0; null !== (t = e());)i += 128 > t ? 1 : 2048 > t ? 2 : 65536 > t ? 3 : 4;
                    return i
                }, e.calculateUTF16asUTF8 = function (t) {
                    var i = 0, n = 0;
                    return e.UTF16toUTF8(t, function (e) {
                        ++i, n += 128 > e ? 1 : 2048 > e ? 2 : 65536 > e ? 3 : 4
                    }), [i, n]
                }, e
            }();
            return a.toUTF8 = function (e, t) {
                if ("undefined" == typeof e && (e = this.offset), "undefined" == typeof t && (t = this.limit), !this.noAssert) {
                    if ("number" != typeof e || e % 1 !== 0)throw TypeError("Illegal begin: Not an integer");
                    if (e >>>= 0, "number" != typeof t || t % 1 !== 0)throw TypeError("Illegal end: Not an integer");
                    if (t >>>= 0, 0 > e || e > t || t > this.buffer.byteLength)throw RangeError("Illegal range: 0 <= " + e + " <= " + t + " <= " + this.buffer.byteLength)
                }
                var n;
                try {
                    c.decodeUTF8toUTF16(function () {
                        return t > e ? this.view[e++] : null
                    }.bind(this), n = i())
                } catch (r) {
                    if (e !== t)throw RangeError("Illegal range: Truncated data, " + e + " != " + t)
                }
                return n()
            }, o.fromUTF8 = function (e, i, n) {
                if (!n && "string" != typeof e)throw TypeError("Illegal str: Not a string");
                var r = new o(c.calculateUTF16asUTF8(t(e), !0)[1], i, n), a = 0;
                return c.encodeUTF16toUTF8(t(e), function (e) {
                    r.view[a++] = e
                }), r.limit = a, r
            }, o
        })
    }, {"long": 174}],
    174: [function (e, t, i) {
        !function (i, n) {
            "function" == typeof define && define.amd ? define([], n) : "function" == typeof e && "object" == typeof t && t && t.exports ? t.exports = n() : (i.dcodeIO = i.dcodeIO || {}).Long = n()
        }(this, function () {
            "use strict";
            function e(e, t, i) {
                this.low = 0 | e, this.high = 0 | t, this.unsigned = !!i
            }

            function t(e) {
                return (e && e.__isLong__) === !0
            }

            function i(e, t) {
                var i, n, o;
                return t ? (e >>>= 0, (o = e >= 0 && 256 > e) && (n = l[e]) ? n : (i = r(e, 0 > (0 | e) ? -1 : 0, !0), o && (l[e] = i), i)) : (e |= 0, (o = e >= -128 && 128 > e) && (n = s[e]) ? n : (i = r(e, 0 > e ? -1 : 0, !1), o && (s[e] = i), i))
            }

            function n(e, t) {
                if (isNaN(e) || !isFinite(e))return t ? v : m;
                if (t) {
                    if (0 > e)return v;
                    if (e >= p)return b
                } else {
                    if (-f >= e)return w;
                    if (e + 1 >= f)return I
                }
                return 0 > e ? n(-e, t).neg() : r(e % d | 0, e / d | 0, t)
            }

            function r(t, i, n) {
                return new e(t, i, n)
            }

            function o(e, t, i) {
                if (0 === e.length)throw Error("empty string");
                if ("NaN" === e || "Infinity" === e || "+Infinity" === e || "-Infinity" === e)return m;
                if ("number" == typeof t && (i = t, t = !1), i = i || 10, 2 > i || i > 36)throw RangeError("radix");
                var r;
                if ((r = e.indexOf("-")) > 0)throw Error("interior hyphen");
                if (0 === r)return o(e.substring(1), t, i).neg();
                for (var a = n(h(i, 8)), s = m, l = 0; l < e.length; l += 8) {
                    var c = Math.min(8, e.length - l), u = parseInt(e.substring(l, l + c), i);
                    if (8 > c) {
                        var d = n(h(i, c));
                        s = s.mul(d).add(n(u))
                    } else s = s.mul(a), s = s.add(n(u))
                }
                return s.unsigned = t, s
            }

            function a(t) {
                return t instanceof e ? t : "number" == typeof t ? n(t) : "string" == typeof t ? o(t) : r(t.low, t.high, t.unsigned)
            }

            e.__isLong__, Object.defineProperty(e.prototype, "__isLong__", {
                value: !0,
                enumerable: !1,
                configurable: !1
            }), e.isLong = t;
            var s = {}, l = {};
            e.fromInt = i, e.fromNumber = n, e.fromBits = r;
            var h = Math.pow;
            e.fromString = o, e.fromValue = a;
            var c = 65536, u = 1 << 24, d = c * c, p = d * d, f = p / 2, g = i(u), m = i(0);
            e.ZERO = m;
            var v = i(0, !0);
            e.UZERO = v;
            var A = i(1);
            e.ONE = A;
            var y = i(1, !0);
            e.UONE = y;
            var C = i(-1);
            e.NEG_ONE = C;
            var I = r(-1, 2147483647, !1);
            e.MAX_VALUE = I;
            var b = r(-1, -1, !0);
            e.MAX_UNSIGNED_VALUE = b;
            var w = r(0, -2147483648, !1);
            e.MIN_VALUE = w;
            var x = e.prototype;
            return x.toInt = function () {
                return this.unsigned ? this.low >>> 0 : this.low
            }, x.toNumber = function () {
                return this.unsigned ? (this.high >>> 0) * d + (this.low >>> 0) : this.high * d + (this.low >>> 0)
            }, x.toString = function (e) {
                if (e = e || 10, 2 > e || e > 36)throw RangeError("radix");
                if (this.isZero())return "0";
                if (this.isNegative()) {
                    if (this.eq(w)) {
                        var t = n(e), i = this.div(t), r = i.mul(t).sub(this);
                        return i.toString(e) + r.toInt().toString(e)
                    }
                    return "-" + this.neg().toString(e)
                }
                for (var o = n(h(e, 6), this.unsigned), a = this, s = ""; ;) {
                    var l = a.div(o), c = a.sub(l.mul(o)).toInt() >>> 0, u = c.toString(e);
                    if (a = l, a.isZero())return u + s;
                    for (; u.length < 6;)u = "0" + u;
                    s = "" + u + s
                }
            }, x.getHighBits = function () {
                return this.high
            }, x.getHighBitsUnsigned = function () {
                return this.high >>> 0
            }, x.getLowBits = function () {
                return this.low
            }, x.getLowBitsUnsigned = function () {
                return this.low >>> 0
            }, x.getNumBitsAbs = function () {
                if (this.isNegative())return this.eq(w) ? 64 : this.neg().getNumBitsAbs();
                for (var e = 0 != this.high ? this.high : this.low, t = 31; t > 0 && 0 == (e & 1 << t); t--);
                return 0 != this.high ? t + 33 : t + 1
            }, x.isZero = function () {
                return 0 === this.high && 0 === this.low
            }, x.isNegative = function () {
                return !this.unsigned && this.high < 0
            }, x.isPositive = function () {
                return this.unsigned || this.high >= 0
            }, x.isOdd = function () {
                return 1 === (1 & this.low)
            }, x.isEven = function () {
                return 0 === (1 & this.low)
            }, x.equals = function (e) {
                return t(e) || (e = a(e)), this.unsigned !== e.unsigned && this.high >>> 31 === 1 && e.high >>> 31 === 1 ? !1 : this.high === e.high && this.low === e.low
            }, x.eq = x.equals, x.notEquals = function (e) {
                return !this.eq(e)
            }, x.neq = x.notEquals, x.lessThan = function (e) {
                return this.comp(e) < 0
            }, x.lt = x.lessThan, x.lessThanOrEqual = function (e) {
                return this.comp(e) <= 0
            }, x.lte = x.lessThanOrEqual, x.greaterThan = function (e) {
                return this.comp(e) > 0
            }, x.gt = x.greaterThan, x.greaterThanOrEqual = function (e) {
                return this.comp(e) >= 0
            }, x.gte = x.greaterThanOrEqual, x.compare = function (e) {
                if (t(e) || (e = a(e)), this.eq(e))return 0;
                var i = this.isNegative(), n = e.isNegative();
                return i && !n ? -1 : !i && n ? 1 : this.unsigned ? e.high >>> 0 > this.high >>> 0 || e.high === this.high && e.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(e).isNegative() ? -1 : 1
            }, x.comp = x.compare, x.negate = function () {
                return !this.unsigned && this.eq(w) ? w : this.not().add(A)
            }, x.neg = x.negate, x.add = function (e) {
                t(e) || (e = a(e));
                var i = this.high >>> 16, n = 65535 & this.high, o = this.low >>> 16, s = 65535 & this.low, l = e.high >>> 16, h = 65535 & e.high, c = e.low >>> 16, u = 65535 & e.low, d = 0, p = 0, f = 0, g = 0;
                return g += s + u, f += g >>> 16, g &= 65535, f += o + c, p += f >>> 16, f &= 65535, p += n + h, d += p >>> 16, p &= 65535, d += i + l, d &= 65535, r(f << 16 | g, d << 16 | p, this.unsigned)
            }, x.subtract = function (e) {
                return t(e) || (e = a(e)), this.add(e.neg())
            }, x.sub = x.subtract, x.multiply = function (e) {
                if (this.isZero())return m;
                if (t(e) || (e = a(e)), e.isZero())return m;
                if (this.eq(w))return e.isOdd() ? w : m;
                if (e.eq(w))return this.isOdd() ? w : m;
                if (this.isNegative())return e.isNegative() ? this.neg().mul(e.neg()) : this.neg().mul(e).neg();
                if (e.isNegative())return this.mul(e.neg()).neg();
                if (this.lt(g) && e.lt(g))return n(this.toNumber() * e.toNumber(), this.unsigned);
                var i = this.high >>> 16, o = 65535 & this.high, s = this.low >>> 16, l = 65535 & this.low, h = e.high >>> 16, c = 65535 & e.high, u = e.low >>> 16, d = 65535 & e.low, p = 0, f = 0, v = 0, A = 0;
                return A += l * d, v += A >>> 16, A &= 65535, v += s * d, f += v >>> 16, v &= 65535, v += l * u, f += v >>> 16, v &= 65535, f += o * d, p += f >>> 16, f &= 65535, f += s * u, p += f >>> 16, f &= 65535, f += l * c, p += f >>> 16, f &= 65535, p += i * d + o * u + s * c + l * h, p &= 65535, r(v << 16 | A, p << 16 | f, this.unsigned)
            }, x.mul = x.multiply, x.divide = function (e) {
                if (t(e) || (e = a(e)), e.isZero())throw Error("division by zero");
                if (this.isZero())return this.unsigned ? v : m;
                var i, r, o;
                if (this.eq(w)) {
                    if (e.eq(A) || e.eq(C))return w;
                    if (e.eq(w))return A;
                    var s = this.shr(1);
                    return i = s.div(e).shl(1), i.eq(m) ? e.isNegative() ? A : C : (r = this.sub(e.mul(i)), o = i.add(r.div(e)))
                }
                if (e.eq(w))return this.unsigned ? v : m;
                if (this.isNegative())return e.isNegative() ? this.neg().div(e.neg()) : this.neg().div(e).neg();
                if (e.isNegative())return this.div(e.neg()).neg();
                for (o = m, r = this; r.gte(e);) {
                    i = Math.max(1, Math.floor(r.toNumber() / e.toNumber()));
                    for (var l = Math.ceil(Math.log(i) / Math.LN2), c = 48 >= l ? 1 : h(2, l - 48), u = n(i), d = u.mul(e); d.isNegative() || d.gt(r);)i -= c, u = n(i, this.unsigned), d = u.mul(e);
                    u.isZero() && (u = A), o = o.add(u), r = r.sub(d)
                }
                return o
            }, x.div = x.divide, x.modulo = function (e) {
                return t(e) || (e = a(e)), this.sub(this.div(e).mul(e))
            }, x.mod = x.modulo, x.not = function () {
                return r(~this.low, ~this.high, this.unsigned)
            }, x.and = function (e) {
                return t(e) || (e = a(e)), r(this.low & e.low, this.high & e.high, this.unsigned)
            }, x.or = function (e) {
                return t(e) || (e = a(e)), r(this.low | e.low, this.high | e.high, this.unsigned)
            }, x.xor = function (e) {
                return t(e) || (e = a(e)), r(this.low ^ e.low, this.high ^ e.high, this.unsigned)
            }, x.shiftLeft = function (e) {
                return t(e) && (e = e.toInt()), 0 === (e &= 63) ? this : 32 > e ? r(this.low << e, this.high << e | this.low >>> 32 - e, this.unsigned) : r(0, this.low << e - 32, this.unsigned)
            }, x.shl = x.shiftLeft, x.shiftRight = function (e) {
                return t(e) && (e = e.toInt()), 0 === (e &= 63) ? this : 32 > e ? r(this.low >>> e | this.high << 32 - e, this.high >> e, this.unsigned) : r(this.high >> e - 32, this.high >= 0 ? 0 : -1, this.unsigned)
            }, x.shr = x.shiftRight, x.shiftRightUnsigned = function (e) {
                if (t(e) && (e = e.toInt()), e &= 63, 0 === e)return this;
                var i = this.high;
                if (32 > e) {
                    var n = this.low;
                    return r(n >>> e | i << 32 - e, i >>> e, this.unsigned)
                }
                return 32 === e ? r(i, 0, this.unsigned) : r(i >>> e - 32, 0, this.unsigned)
            }, x.shru = x.shiftRightUnsigned, x.toSigned = function () {
                return this.unsigned ? r(this.low, this.high, !1) : this
            }, x.toUnsigned = function () {
                return this.unsigned ? this : r(this.low, this.high, !0)
            }, e
        })
    }, {}],
    175: [function (e, t, i) {
        var n = {REVISION: "75"};
        "function" == typeof define && define.amd ? define("three", n) : "undefined" != typeof i && "undefined" != typeof t && (t.exports = n), void 0 === Number.EPSILON && (Number.EPSILON = Math.pow(2, -52)), void 0 === Math.sign && (Math.sign = function (e) {
            return 0 > e ? -1 : e > 0 ? 1 : +e
        }), void 0 === Function.prototype.name && void 0 !== Object.defineProperty && Object.defineProperty(Function.prototype, "name", {
            get: function () {
                return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]
            }
        }), void 0 === Object.assign && Object.defineProperty(Object, "assign", {
            writable: !0,
            configurable: !0,
            value: function (e) {
                "use strict";
                if (void 0 === e || null === e)throw new TypeError("Cannot convert first argument to object");
                for (var t = Object(e), i = 1, n = arguments.length; i !== n; ++i) {
                    var r = arguments[i];
                    if (void 0 !== r && null !== r) {
                        r = Object(r);
                        for (var o = Object.keys(r), a = 0, s = o.length; a !== s; ++a) {
                            var l = o[a], h = Object.getOwnPropertyDescriptor(r, l);
                            void 0 !== h && h.enumerable && (t[l] = r[l])
                        }
                    }
                }
                return t
            }
        }), n.MOUSE = {
            LEFT: 0,
            MIDDLE: 1,
            RIGHT: 2
        }, n.CullFaceNone = 0, n.CullFaceBack = 1, n.CullFaceFront = 2, n.CullFaceFrontBack = 3, n.FrontFaceDirectionCW = 0, n.FrontFaceDirectionCCW = 1, n.BasicShadowMap = 0, n.PCFShadowMap = 1, n.PCFSoftShadowMap = 2, n.FrontSide = 0, n.BackSide = 1, n.DoubleSide = 2, n.FlatShading = 1, n.SmoothShading = 2, n.NoColors = 0, n.FaceColors = 1, n.VertexColors = 2, n.NoBlending = 0, n.NormalBlending = 1, n.AdditiveBlending = 2, n.SubtractiveBlending = 3, n.MultiplyBlending = 4, n.CustomBlending = 5, n.AddEquation = 100, n.SubtractEquation = 101, n.ReverseSubtractEquation = 102, n.MinEquation = 103, n.MaxEquation = 104, n.ZeroFactor = 200, n.OneFactor = 201, n.SrcColorFactor = 202, n.OneMinusSrcColorFactor = 203, n.SrcAlphaFactor = 204, n.OneMinusSrcAlphaFactor = 205, n.DstAlphaFactor = 206, n.OneMinusDstAlphaFactor = 207, n.DstColorFactor = 208, n.OneMinusDstColorFactor = 209, n.SrcAlphaSaturateFactor = 210, n.NeverDepth = 0, n.AlwaysDepth = 1, n.LessDepth = 2, n.LessEqualDepth = 3, n.EqualDepth = 4, n.GreaterEqualDepth = 5, n.GreaterDepth = 6, n.NotEqualDepth = 7, n.MultiplyOperation = 0, n.MixOperation = 1, n.AddOperation = 2, n.NoToneMapping = 0, n.LinearToneMapping = 1, n.ReinhardToneMapping = 2, n.Uncharted2ToneMapping = 3, n.CineonToneMapping = 4, n.UVMapping = 300, n.CubeReflectionMapping = 301, n.CubeRefractionMapping = 302, n.EquirectangularReflectionMapping = 303, n.EquirectangularRefractionMapping = 304, n.SphericalReflectionMapping = 305, n.CubeUVReflectionMapping = 306, n.CubeUVRefractionMapping = 307, n.RepeatWrapping = 1e3, n.ClampToEdgeWrapping = 1001, n.MirroredRepeatWrapping = 1002, n.NearestFilter = 1003, n.NearestMipMapNearestFilter = 1004, n.NearestMipMapLinearFilter = 1005, n.LinearFilter = 1006, n.LinearMipMapNearestFilter = 1007, n.LinearMipMapLinearFilter = 1008, n.UnsignedByteType = 1009, n.ByteType = 1010, n.ShortType = 1011, n.UnsignedShortType = 1012, n.IntType = 1013, n.UnsignedIntType = 1014, n.FloatType = 1015, n.HalfFloatType = 1025, n.UnsignedShort4444Type = 1016, n.UnsignedShort5551Type = 1017, n.UnsignedShort565Type = 1018, n.AlphaFormat = 1019, n.RGBFormat = 1020, n.RGBAFormat = 1021, n.LuminanceFormat = 1022, n.LuminanceAlphaFormat = 1023, n.RGBEFormat = n.RGBAFormat, n.RGB_S3TC_DXT1_Format = 2001, n.RGBA_S3TC_DXT1_Format = 2002, n.RGBA_S3TC_DXT3_Format = 2003, n.RGBA_S3TC_DXT5_Format = 2004, n.RGB_PVRTC_4BPPV1_Format = 2100, n.RGB_PVRTC_2BPPV1_Format = 2101,n.RGBA_PVRTC_4BPPV1_Format = 2102,n.RGBA_PVRTC_2BPPV1_Format = 2103,n.RGB_ETC1_Format = 2151,n.LoopOnce = 2200,n.LoopRepeat = 2201,n.LoopPingPong = 2202,n.InterpolateDiscrete = 2300,n.InterpolateLinear = 2301,n.InterpolateSmooth = 2302,n.ZeroCurvatureEnding = 2400,n.ZeroSlopeEnding = 2401,n.WrapAroundEnding = 2402,n.TrianglesDrawMode = 0,n.TriangleStripDrawMode = 1,n.TriangleFanDrawMode = 2,n.LinearEncoding = 3e3,n.sRGBEncoding = 3001,n.GammaEncoding = 3007,n.RGBEEncoding = 3002,n.LogLuvEncoding = 3003,n.RGBM7Encoding = 3004,n.RGBM16Encoding = 3005,n.RGBDEncoding = 3006,n.Color = function (e) {
            return 3 === arguments.length ? this.fromArray(arguments) : this.set(e)
        },n.Color.prototype = {
            constructor: n.Color, r: 1, g: 1, b: 1, set: function (e) {
                return e instanceof n.Color ? this.copy(e) : "number" == typeof e ? this.setHex(e) : "string" == typeof e && this.setStyle(e), this
            }, setScalar: function (e) {
                this.r = e, this.g = e, this.b = e
            }, setHex: function (e) {
                return e = Math.floor(e), this.r = (e >> 16 & 255) / 255, this.g = (e >> 8 & 255) / 255, this.b = (255 & e) / 255, this
            }, setRGB: function (e, t, i) {
                return this.r = e, this.g = t, this.b = i, this
            }, setHSL: function () {
                function e(e, t, i) {
                    return 0 > i && (i += 1), i > 1 && (i -= 1), 1 / 6 > i ? e + 6 * (t - e) * i : .5 > i ? t : 2 / 3 > i ? e + 6 * (t - e) * (2 / 3 - i) : e
                }

                return function (t, i, r) {
                    if (t = n.Math.euclideanModulo(t, 1), i = n.Math.clamp(i, 0, 1), r = n.Math.clamp(r, 0, 1), 0 === i)this.r = this.g = this.b = r; else {
                        var o = .5 >= r ? r * (1 + i) : r + i - r * i, a = 2 * r - o;
                        this.r = e(a, o, t + 1 / 3), this.g = e(a, o, t), this.b = e(a, o, t - 1 / 3)
                    }
                    return this
                }
            }(), setStyle: function (e) {
                function t(t) {
                    void 0 !== t && parseFloat(t) < 1 && console.warn("THREE.Color: Alpha component of " + e + " will be ignored.")
                }

                var i;
                if (i = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)) {
                    var r, o = i[1], a = i[2];
                    switch (o) {
                        case"rgb":
                        case"rgba":
                            if (r = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r = Math.min(255, parseInt(r[1], 10)) / 255, this.g = Math.min(255, parseInt(r[2], 10)) / 255, this.b = Math.min(255, parseInt(r[3], 10)) / 255, t(r[5]), this;
                            if (r = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r = Math.min(100, parseInt(r[1], 10)) / 100, this.g = Math.min(100, parseInt(r[2], 10)) / 100, this.b = Math.min(100, parseInt(r[3], 10)) / 100, t(r[5]), this;
                            break;
                        case"hsl":
                        case"hsla":
                            if (r = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)) {
                                var s = parseFloat(r[1]) / 360, l = parseInt(r[2], 10) / 100, h = parseInt(r[3], 10) / 100;
                                return t(r[5]), this.setHSL(s, l, h)
                            }
                    }
                } else if (i = /^\#([A-Fa-f0-9]+)$/.exec(e)) {
                    var c = i[1], u = c.length;
                    if (3 === u)return this.r = parseInt(c.charAt(0) + c.charAt(0), 16) / 255, this.g = parseInt(c.charAt(1) + c.charAt(1), 16) / 255, this.b = parseInt(c.charAt(2) + c.charAt(2), 16) / 255, this;
                    if (6 === u)return this.r = parseInt(c.charAt(0) + c.charAt(1), 16) / 255, this.g = parseInt(c.charAt(2) + c.charAt(3), 16) / 255, this.b = parseInt(c.charAt(4) + c.charAt(5), 16) / 255, this
                }
                if (e && e.length > 0) {
                    var c = n.ColorKeywords[e];
                    void 0 !== c ? this.setHex(c) : console.warn("THREE.Color: Unknown color " + e)
                }
                return this
            }, clone: function () {
                return new this.constructor(this.r, this.g, this.b)
            }, copy: function (e) {
                return this.r = e.r, this.g = e.g, this.b = e.b, this
            }, copyGammaToLinear: function (e, t) {
                return void 0 === t && (t = 2), this.r = Math.pow(e.r, t), this.g = Math.pow(e.g, t), this.b = Math.pow(e.b, t), this
            }, copyLinearToGamma: function (e, t) {
                void 0 === t && (t = 2);
                var i = t > 0 ? 1 / t : 1;
                return this.r = Math.pow(e.r, i), this.g = Math.pow(e.g, i), this.b = Math.pow(e.b, i), this
            }, convertGammaToLinear: function () {
                var e = this.r, t = this.g, i = this.b;
                return this.r = e * e, this.g = t * t, this.b = i * i, this
            }, convertLinearToGamma: function () {
                return this.r = Math.sqrt(this.r), this.g = Math.sqrt(this.g), this.b = Math.sqrt(this.b), this
            }, getHex: function () {
                return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
            }, getHexString: function () {
                return ("000000" + this.getHex().toString(16)).slice(-6)
            }, getHSL: function (e) {
                var t, i, n = e || {
                        h: 0,
                        s: 0,
                        l: 0
                    }, r = this.r, o = this.g, a = this.b, s = Math.max(r, o, a), l = Math.min(r, o, a), h = (l + s) / 2;
                if (l === s)t = 0, i = 0; else {
                    var c = s - l;
                    switch (i = .5 >= h ? c / (s + l) : c / (2 - s - l), s) {
                        case r:
                            t = (o - a) / c + (a > o ? 6 : 0);
                            break;
                        case o:
                            t = (a - r) / c + 2;
                            break;
                        case a:
                            t = (r - o) / c + 4
                    }
                    t /= 6
                }
                return n.h = t, n.s = i, n.l = h, n
            }, getStyle: function () {
                return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
            }, offsetHSL: function (e, t, i) {
                var n = this.getHSL();
                return n.h += e, n.s += t, n.l += i, this.setHSL(n.h, n.s, n.l), this
            }, add: function (e) {
                return this.r += e.r, this.g += e.g, this.b += e.b, this
            }, addColors: function (e, t) {
                return this.r = e.r + t.r, this.g = e.g + t.g, this.b = e.b + t.b, this
            }, addScalar: function (e) {
                return this.r += e, this.g += e, this.b += e, this
            }, multiply: function (e) {
                return this.r *= e.r, this.g *= e.g, this.b *= e.b, this
            }, multiplyScalar: function (e) {
                return this.r *= e, this.g *= e, this.b *= e, this
            }, lerp: function (e, t) {
                return this.r += (e.r - this.r) * t, this.g += (e.g - this.g) * t, this.b += (e.b - this.b) * t, this
            }, equals: function (e) {
                return e.r === this.r && e.g === this.g && e.b === this.b
            }, fromArray: function (e, t) {
                return void 0 === t && (t = 0), this.r = e[t], this.g = e[t + 1], this.b = e[t + 2], this
            }, toArray: function (e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.r, e[t + 1] = this.g, e[t + 2] = this.b, e
            }
        },n.ColorKeywords = {
            aliceblue: 15792383,
            antiquewhite: 16444375,
            aqua: 65535,
            aquamarine: 8388564,
            azure: 15794175,
            beige: 16119260,
            bisque: 16770244,
            black: 0,
            blanchedalmond: 16772045,
            blue: 255,
            blueviolet: 9055202,
            brown: 10824234,
            burlywood: 14596231,
            cadetblue: 6266528,
            chartreuse: 8388352,
            chocolate: 13789470,
            coral: 16744272,
            cornflowerblue: 6591981,
            cornsilk: 16775388,
            crimson: 14423100,
            cyan: 65535,
            darkblue: 139,
            darkcyan: 35723,
            darkgoldenrod: 12092939,
            darkgray: 11119017,
            darkgreen: 25600,
            darkgrey: 11119017,
            darkkhaki: 12433259,
            darkmagenta: 9109643,
            darkolivegreen: 5597999,
            darkorange: 16747520,
            darkorchid: 10040012,
            darkred: 9109504,
            darksalmon: 15308410,
            darkseagreen: 9419919,
            darkslateblue: 4734347,
            darkslategray: 3100495,
            darkslategrey: 3100495,
            darkturquoise: 52945,
            darkviolet: 9699539,
            deeppink: 16716947,
            deepskyblue: 49151,
            dimgray: 6908265,
            dimgrey: 6908265,
            dodgerblue: 2003199,
            firebrick: 11674146,
            floralwhite: 16775920,
            forestgreen: 2263842,
            fuchsia: 16711935,
            gainsboro: 14474460,
            ghostwhite: 16316671,
            gold: 16766720,
            goldenrod: 14329120,
            gray: 8421504,
            green: 32768,
            greenyellow: 11403055,
            grey: 8421504,
            honeydew: 15794160,
            hotpink: 16738740,
            indianred: 13458524,
            indigo: 4915330,
            ivory: 16777200,
            khaki: 15787660,
            lavender: 15132410,
            lavenderblush: 16773365,
            lawngreen: 8190976,
            lemonchiffon: 16775885,
            lightblue: 11393254,
            lightcoral: 15761536,
            lightcyan: 14745599,
            lightgoldenrodyellow: 16448210,
            lightgray: 13882323,
            lightgreen: 9498256,
            lightgrey: 13882323,
            lightpink: 16758465,
            lightsalmon: 16752762,
            lightseagreen: 2142890,
            lightskyblue: 8900346,
            lightslategray: 7833753,
            lightslategrey: 7833753,
            lightsteelblue: 11584734,
            lightyellow: 16777184,
            lime: 65280,
            limegreen: 3329330,
            linen: 16445670,
            magenta: 16711935,
            maroon: 8388608,
            mediumaquamarine: 6737322,
            mediumblue: 205,
            mediumorchid: 12211667,
            mediumpurple: 9662683,
            mediumseagreen: 3978097,
            mediumslateblue: 8087790,
            mediumspringgreen: 64154,
            mediumturquoise: 4772300,
            mediumvioletred: 13047173,
            midnightblue: 1644912,
            mintcream: 16121850,
            mistyrose: 16770273,
            moccasin: 16770229,
            navajowhite: 16768685,
            navy: 128,
            oldlace: 16643558,
            olive: 8421376,
            olivedrab: 7048739,
            orange: 16753920,
            orangered: 16729344,
            orchid: 14315734,
            palegoldenrod: 15657130,
            palegreen: 10025880,
            paleturquoise: 11529966,
            palevioletred: 14381203,
            papayawhip: 16773077,
            peachpuff: 16767673,
            peru: 13468991,
            pink: 16761035,
            plum: 14524637,
            powderblue: 11591910,
            purple: 8388736,
            red: 16711680,
            rosybrown: 12357519,
            royalblue: 4286945,
            saddlebrown: 9127187,
            salmon: 16416882,
            sandybrown: 16032864,
            seagreen: 3050327,
            seashell: 16774638,
            sienna: 10506797,
            silver: 12632256,
            skyblue: 8900331,
            slateblue: 6970061,
            slategray: 7372944,
            slategrey: 7372944,
            snow: 16775930,
            springgreen: 65407,
            steelblue: 4620980,
            tan: 13808780,
            teal: 32896,
            thistle: 14204888,
            tomato: 16737095,
            turquoise: 4251856,
            violet: 15631086,
            wheat: 16113331,
            white: 16777215,
            whitesmoke: 16119285,
            yellow: 16776960,
            yellowgreen: 10145074
        },n.Quaternion = function (e, t, i, n) {
            this._x = e || 0, this._y = t || 0, this._z = i || 0, this._w = void 0 !== n ? n : 1
        },n.Quaternion.prototype = {
            constructor: n.Quaternion, get x() {
                return this._x
            }, set x(e) {
                this._x = e, this.onChangeCallback()
            }, get y() {
                return this._y
            }, set y(e) {
                this._y = e, this.onChangeCallback()
            }, get z() {
                return this._z
            }, set z(e) {
                this._z = e, this.onChangeCallback()
            }, get w() {
                return this._w
            }, set w(e) {
                this._w = e, this.onChangeCallback()
            }, set: function (e, t, i, n) {
                return this._x = e, this._y = t, this._z = i, this._w = n, this.onChangeCallback(), this
            }, clone: function () {
                return new this.constructor(this._x, this._y, this._z, this._w)
            }, copy: function (e) {
                return this._x = e.x, this._y = e.y, this._z = e.z, this._w = e.w, this.onChangeCallback(), this
            }, setFromEuler: function (e, t) {
                if (e instanceof n.Euler == !1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
                var i = Math.cos(e._x / 2), r = Math.cos(e._y / 2), o = Math.cos(e._z / 2), a = Math.sin(e._x / 2), s = Math.sin(e._y / 2), l = Math.sin(e._z / 2), h = e.order;
                return "XYZ" === h ? (this._x = a * r * o + i * s * l, this._y = i * s * o - a * r * l, this._z = i * r * l + a * s * o, this._w = i * r * o - a * s * l) : "YXZ" === h ? (this._x = a * r * o + i * s * l, this._y = i * s * o - a * r * l, this._z = i * r * l - a * s * o, this._w = i * r * o + a * s * l) : "ZXY" === h ? (this._x = a * r * o - i * s * l, this._y = i * s * o + a * r * l, this._z = i * r * l + a * s * o, this._w = i * r * o - a * s * l) : "ZYX" === h ? (this._x = a * r * o - i * s * l, this._y = i * s * o + a * r * l, this._z = i * r * l - a * s * o, this._w = i * r * o + a * s * l) : "YZX" === h ? (this._x = a * r * o + i * s * l, this._y = i * s * o + a * r * l, this._z = i * r * l - a * s * o, this._w = i * r * o - a * s * l) : "XZY" === h && (this._x = a * r * o - i * s * l, this._y = i * s * o - a * r * l, this._z = i * r * l + a * s * o, this._w = i * r * o + a * s * l), t !== !1 && this.onChangeCallback(), this
            }, setFromAxisAngle: function (e, t) {
                var i = t / 2, n = Math.sin(i);
                return this._x = e.x * n, this._y = e.y * n, this._z = e.z * n, this._w = Math.cos(i), this.onChangeCallback(), this
            }, setFromRotationMatrix: function (e) {
                var t, i = e.elements, n = i[0], r = i[4], o = i[8], a = i[1], s = i[5], l = i[9], h = i[2], c = i[6], u = i[10], d = n + s + u;
                return d > 0 ? (t = .5 / Math.sqrt(d + 1), this._w = .25 / t, this._x = (c - l) * t, this._y = (o - h) * t, this._z = (a - r) * t) : n > s && n > u ? (t = 2 * Math.sqrt(1 + n - s - u), this._w = (c - l) / t, this._x = .25 * t, this._y = (r + a) / t, this._z = (o + h) / t) : s > u ? (t = 2 * Math.sqrt(1 + s - n - u), this._w = (o - h) / t, this._x = (r + a) / t, this._y = .25 * t, this._z = (l + c) / t) : (t = 2 * Math.sqrt(1 + u - n - s), this._w = (a - r) / t, this._x = (o + h) / t, this._y = (l + c) / t, this._z = .25 * t), this.onChangeCallback(), this
            }, setFromUnitVectors: function () {
                var e, t, i = 1e-6;
                return function (r, o) {
                    return void 0 === e && (e = new n.Vector3), t = r.dot(o) + 1, i > t ? (t = 0, Math.abs(r.x) > Math.abs(r.z) ? e.set(-r.y, r.x, 0) : e.set(0, -r.z, r.y)) : e.crossVectors(r, o), this._x = e.x, this._y = e.y, this._z = e.z, this._w = t, this.normalize(), this
                }
            }(), inverse: function () {
                return this.conjugate().normalize(), this
            }, conjugate: function () {
                return this._x *= -1, this._y *= -1, this._z *= -1, this.onChangeCallback(), this
            }, dot: function (e) {
                return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
            }, lengthSq: function () {
                return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
            }, length: function () {
                return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
            }, normalize: function () {
                var e = this.length();
                return 0 === e ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e = 1 / e, this._x = this._x * e, this._y = this._y * e, this._z = this._z * e, this._w = this._w * e), this.onChangeCallback(), this
            }, multiply: function (e, t) {
                return void 0 !== t ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(e, t)) : this.multiplyQuaternions(this, e)
            }, multiplyQuaternions: function (e, t) {
                var i = e._x, n = e._y, r = e._z, o = e._w, a = t._x, s = t._y, l = t._z, h = t._w;
                return this._x = i * h + o * a + n * l - r * s, this._y = n * h + o * s + r * a - i * l, this._z = r * h + o * l + i * s - n * a, this._w = o * h - i * a - n * s - r * l, this.onChangeCallback(), this
            }, slerp: function (e, t) {
                if (0 === t)return this;
                if (1 === t)return this.copy(e);
                var i = this._x, n = this._y, r = this._z, o = this._w, a = o * e._w + i * e._x + n * e._y + r * e._z;
                if (0 > a ? (this._w = -e._w, this._x = -e._x, this._y = -e._y, this._z = -e._z, a = -a) : this.copy(e), a >= 1)return this._w = o, this._x = i, this._y = n, this._z = r, this;
                var s = Math.sqrt(1 - a * a);
                if (Math.abs(s) < .001)return this._w = .5 * (o + this._w), this._x = .5 * (i + this._x), this._y = .5 * (n + this._y), this._z = .5 * (r + this._z), this;
                var l = Math.atan2(s, a), h = Math.sin((1 - t) * l) / s, c = Math.sin(t * l) / s;
                return this._w = o * h + this._w * c, this._x = i * h + this._x * c, this._y = n * h + this._y * c, this._z = r * h + this._z * c, this.onChangeCallback(), this
            }, equals: function (e) {
                return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w
            }, fromArray: function (e, t) {
                return void 0 === t && (t = 0), this._x = e[t], this._y = e[t + 1], this._z = e[t + 2], this._w = e[t + 3], this.onChangeCallback(), this
            }, toArray: function (e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._w, e
            }, onChange: function (e) {
                return this.onChangeCallback = e, this
            }, onChangeCallback: function () {
            }
        },Object.assign(n.Quaternion, {
            slerp: function (e, t, i, n) {
                return i.copy(e).slerp(t, n)
            }, slerpFlat: function (e, t, i, n, r, o, a) {
                var s = i[n + 0], l = i[n + 1], h = i[n + 2], c = i[n + 3], u = r[o + 0], d = r[o + 1], p = r[o + 2], f = r[o + 3];
                if (c !== f || s !== u || l !== d || h !== p) {
                    var g = 1 - a, m = s * u + l * d + h * p + c * f, v = m >= 0 ? 1 : -1, A = 1 - m * m;
                    if (A > Number.EPSILON) {
                        var y = Math.sqrt(A), C = Math.atan2(y, m * v);
                        g = Math.sin(g * C) / y, a = Math.sin(a * C) / y
                    }
                    var I = a * v;
                    if (s = s * g + u * I, l = l * g + d * I, h = h * g + p * I, c = c * g + f * I, g === 1 - a) {
                        var b = 1 / Math.sqrt(s * s + l * l + h * h + c * c);
                        s *= b, l *= b, h *= b, c *= b
                    }
                }
                e[t] = s, e[t + 1] = l, e[t + 2] = h, e[t + 3] = c
            }
        }),n.Vector2 = function (e, t) {
            this.x = e || 0, this.y = t || 0
        },n.Vector2.prototype = {
            constructor: n.Vector2, get width() {
                return this.x
            }, set width(e) {
                this.x = e
            }, get height() {
                return this.y
            }, set height(e) {
                this.y = e
            }, set: function (e, t) {
                return this.x = e, this.y = t, this
            }, setScalar: function (e) {
                return this.x = e, this.y = e, this
            }, setX: function (e) {
                return this.x = e, this
            }, setY: function (e) {
                return this.y = e, this
            }, setComponent: function (e, t) {
                switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    default:
                        throw new Error("index is out of range: " + e)
                }
            }, getComponent: function (e) {
                switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    default:
                        throw new Error("index is out of range: " + e)
                }
            }, clone: function () {
                return new this.constructor(this.x, this.y)
            }, copy: function (e) {
                return this.x = e.x, this.y = e.y, this
            }, add: function (e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this)
            }, addScalar: function (e) {
                return this.x += e, this.y += e, this
            }, addVectors: function (e, t) {
                return this.x = e.x + t.x, this.y = e.y + t.y, this
            }, addScaledVector: function (e, t) {
                return this.x += e.x * t, this.y += e.y * t, this
            }, sub: function (e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this)
            }, subScalar: function (e) {
                return this.x -= e, this.y -= e, this
            }, subVectors: function (e, t) {
                return this.x = e.x - t.x, this.y = e.y - t.y, this
            }, multiply: function (e) {
                return this.x *= e.x, this.y *= e.y, this
            }, multiplyScalar: function (e) {
                return isFinite(e) ? (this.x *= e, this.y *= e) : (this.x = 0, this.y = 0), this
            }, divide: function (e) {
                return this.x /= e.x, this.y /= e.y, this
            }, divideScalar: function (e) {
                return this.multiplyScalar(1 / e)
            }, min: function (e) {
                return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this
            }, max: function (e) {
                return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this
            }, clamp: function (e, t) {
                return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this
            }, clampScalar: function () {
                var e, t;
                return function (i, r) {
                    return void 0 === e && (e = new n.Vector2, t = new n.Vector2), e.set(i, i), t.set(r, r), this.clamp(e, t)
                }
            }(), clampLength: function (e, t) {
                var i = this.length();
                return this.multiplyScalar(Math.max(e, Math.min(t, i)) / i), this
            }, floor: function () {
                return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
            }, ceil: function () {
                return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this
            }, round: function () {
                return this.x = Math.round(this.x), this.y = Math.round(this.y), this
            }, roundToZero: function () {
                return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this
            }, negate: function () {
                return this.x = -this.x, this.y = -this.y, this
            }, dot: function (e) {
                return this.x * e.x + this.y * e.y
            }, lengthSq: function () {
                return this.x * this.x + this.y * this.y
            }, length: function () {
                return Math.sqrt(this.x * this.x + this.y * this.y)
            }, lengthManhattan: function () {
                return Math.abs(this.x) + Math.abs(this.y)
            }, normalize: function () {
                return this.divideScalar(this.length())
            }, angle: function () {
                var e = Math.atan2(this.y, this.x);
                return 0 > e && (e += 2 * Math.PI), e
            }, distanceTo: function (e) {
                return Math.sqrt(this.distanceToSquared(e))
            }, distanceToSquared: function (e) {
                var t = this.x - e.x, i = this.y - e.y;
                return t * t + i * i
            }, setLength: function (e) {
                return this.multiplyScalar(e / this.length())
            }, lerp: function (e, t) {
                return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this
            }, lerpVectors: function (e, t, i) {
                return this.subVectors(t, e).multiplyScalar(i).add(e), this
            }, equals: function (e) {
                return e.x === this.x && e.y === this.y
            }, fromArray: function (e, t) {
                return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this
            }, toArray: function (e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e
            }, fromAttribute: function (e, t, i) {
                return void 0 === i && (i = 0), t = t * e.itemSize + i, this.x = e.array[t], this.y = e.array[t + 1], this
            }, rotateAround: function (e, t) {
                var i = Math.cos(t), n = Math.sin(t), r = this.x - e.x, o = this.y - e.y;
                return this.x = r * i - o * n + e.x, this.y = r * n + o * i + e.y, this
            }
        },n.Vector3 = function (e, t, i) {
            this.x = e || 0, this.y = t || 0, this.z = i || 0
        },n.Vector3.prototype = {
            constructor: n.Vector3, set: function (e, t, i) {
                return this.x = e, this.y = t, this.z = i, this
            }, setScalar: function (e) {
                return this.x = e, this.y = e, this.z = e, this
            }, setX: function (e) {
                return this.x = e, this
            }, setY: function (e) {
                return this.y = e, this
            }, setZ: function (e) {
                return this.z = e, this
            }, setComponent: function (e, t) {
                switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    case 2:
                        this.z = t;
                        break;
                    default:
                        throw new Error("index is out of range: " + e)
                }
            }, getComponent: function (e) {
                switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    case 2:
                        return this.z;
                    default:
                        throw new Error("index is out of range: " + e)
                }
            }, clone: function () {
                return new this.constructor(this.x, this.y, this.z)
            }, copy: function (e) {
                return this.x = e.x, this.y = e.y, this.z = e.z, this
            }, add: function (e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this)
            }, addScalar: function (e) {
                return this.x += e, this.y += e, this.z += e, this
            }, addVectors: function (e, t) {
                return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this
            }, addScaledVector: function (e, t) {
                return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this
            }, sub: function (e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this)
            }, subScalar: function (e) {
                return this.x -= e, this.y -= e, this.z -= e, this
            }, subVectors: function (e, t) {
                return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this
            }, multiply: function (e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(e, t)) : (this.x *= e.x, this.y *= e.y, this.z *= e.z, this)
            }, multiplyScalar: function (e) {
                return isFinite(e) ? (this.x *= e, this.y *= e, this.z *= e) : (this.x = 0, this.y = 0, this.z = 0), this
            }, multiplyVectors: function (e, t) {
                return this.x = e.x * t.x, this.y = e.y * t.y, this.z = e.z * t.z, this
            }, applyEuler: function () {
                var e;
                return function (t) {
                    return t instanceof n.Euler == !1 && console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."), void 0 === e && (e = new n.Quaternion), this.applyQuaternion(e.setFromEuler(t)), this
                }
            }(), applyAxisAngle: function () {
                var e;
                return function (t, i) {
                    return void 0 === e && (e = new n.Quaternion), this.applyQuaternion(e.setFromAxisAngle(t, i)), this
                }
            }(), applyMatrix3: function (e) {
                var t = this.x, i = this.y, n = this.z, r = e.elements;
                return this.x = r[0] * t + r[3] * i + r[6] * n, this.y = r[1] * t + r[4] * i + r[7] * n, this.z = r[2] * t + r[5] * i + r[8] * n, this
            }, applyMatrix4: function (e) {
                var t = this.x, i = this.y, n = this.z, r = e.elements;
                return this.x = r[0] * t + r[4] * i + r[8] * n + r[12], this.y = r[1] * t + r[5] * i + r[9] * n + r[13], this.z = r[2] * t + r[6] * i + r[10] * n + r[14], this
            }, applyProjection: function (e) {
                var t = this.x, i = this.y, n = this.z, r = e.elements, o = 1 / (r[3] * t + r[7] * i + r[11] * n + r[15]);
                return this.x = (r[0] * t + r[4] * i + r[8] * n + r[12]) * o, this.y = (r[1] * t + r[5] * i + r[9] * n + r[13]) * o, this.z = (r[2] * t + r[6] * i + r[10] * n + r[14]) * o, this
            }, applyQuaternion: function (e) {
                var t = this.x, i = this.y, n = this.z, r = e.x, o = e.y, a = e.z, s = e.w, l = s * t + o * n - a * i, h = s * i + a * t - r * n, c = s * n + r * i - o * t, u = -r * t - o * i - a * n;
                return this.x = l * s + u * -r + h * -a - c * -o, this.y = h * s + u * -o + c * -r - l * -a, this.z = c * s + u * -a + l * -o - h * -r, this
            }, project: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Matrix4), e.multiplyMatrices(t.projectionMatrix, e.getInverse(t.matrixWorld)), this.applyProjection(e)
                }
            }(), unproject: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Matrix4), e.multiplyMatrices(t.matrixWorld, e.getInverse(t.projectionMatrix)), this.applyProjection(e)
                }
            }(), transformDirection: function (e) {
                var t = this.x, i = this.y, n = this.z, r = e.elements;
                return this.x = r[0] * t + r[4] * i + r[8] * n, this.y = r[1] * t + r[5] * i + r[9] * n, this.z = r[2] * t + r[6] * i + r[10] * n, this.normalize(), this
            }, divide: function (e) {
                return this.x /= e.x, this.y /= e.y, this.z /= e.z, this
            }, divideScalar: function (e) {
                return this.multiplyScalar(1 / e)
            }, min: function (e) {
                return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this
            }, max: function (e) {
                return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this
            }, clamp: function (e, t) {
                return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this
            }, clampScalar: function () {
                var e, t;
                return function (i, r) {
                    return void 0 === e && (e = new n.Vector3, t = new n.Vector3), e.set(i, i, i), t.set(r, r, r), this.clamp(e, t)
                }
            }(), clampLength: function (e, t) {
                var i = this.length();
                return this.multiplyScalar(Math.max(e, Math.min(t, i)) / i), this
            }, floor: function () {
                return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this
            }, ceil: function () {
                return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this
            }, round: function () {
                return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this
            }, roundToZero: function () {
                return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this
            }, negate: function () {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
            }, dot: function (e) {
                return this.x * e.x + this.y * e.y + this.z * e.z
            }, lengthSq: function () {
                return this.x * this.x + this.y * this.y + this.z * this.z
            }, length: function () {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
            }, lengthManhattan: function () {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
            }, normalize: function () {
                return this.divideScalar(this.length())
            }, setLength: function (e) {
                return this.multiplyScalar(e / this.length())
            }, lerp: function (e, t) {
                return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this
            }, lerpVectors: function (e, t, i) {
                return this.subVectors(t, e).multiplyScalar(i).add(e), this
            }, cross: function (e, t) {
                if (void 0 !== t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(e, t);
                var i = this.x, n = this.y, r = this.z;
                return this.x = n * e.z - r * e.y, this.y = r * e.x - i * e.z, this.z = i * e.y - n * e.x, this
            }, crossVectors: function (e, t) {
                var i = e.x, n = e.y, r = e.z, o = t.x, a = t.y, s = t.z;
                return this.x = n * s - r * a, this.y = r * o - i * s, this.z = i * a - n * o, this
            }, projectOnVector: function () {
                var e, t;
                return function (i) {
                    return void 0 === e && (e = new n.Vector3), e.copy(i).normalize(), t = this.dot(e), this.copy(e).multiplyScalar(t)
                }
            }(), projectOnPlane: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Vector3), e.copy(this).projectOnVector(t), this.sub(e)
                }
            }(), reflect: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Vector3), this.sub(e.copy(t).multiplyScalar(2 * this.dot(t)))
                }
            }(), angleTo: function (e) {
                var t = this.dot(e) / Math.sqrt(this.lengthSq() * e.lengthSq());
                return Math.acos(n.Math.clamp(t, -1, 1))
            }, distanceTo: function (e) {
                return Math.sqrt(this.distanceToSquared(e))
            }, distanceToSquared: function (e) {
                var t = this.x - e.x, i = this.y - e.y, n = this.z - e.z;
                return t * t + i * i + n * n
            }, setFromSpherical: function (e) {
                var t = Math.sin(e.phi) * e.radius;
                return this.x = t * Math.sin(e.theta), this.y = Math.cos(e.phi) * e.radius, this.z = t * Math.cos(e.theta), this
            }, setFromMatrixPosition: function (e) {
                return this.setFromMatrixColumn(e, 3)
            }, setFromMatrixScale: function (e) {
                var t = this.setFromMatrixColumn(e, 0).length(), i = this.setFromMatrixColumn(e, 1).length(), n = this.setFromMatrixColumn(e, 2).length();
                return this.x = t, this.y = i, this.z = n, this
            }, setFromMatrixColumn: function (e, t) {
                return "number" == typeof e && (console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index )."), e = arguments[1], t = arguments[0]), this.fromArray(e.elements, 4 * t)
            }, equals: function (e) {
                return e.x === this.x && e.y === this.y && e.z === this.z
            }, fromArray: function (e, t) {
                return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this
            }, toArray: function (e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e
            }, fromAttribute: function (e, t, i) {
                return void 0 === i && (i = 0), t = t * e.itemSize + i, this.x = e.array[t], this.y = e.array[t + 1], this.z = e.array[t + 2], this
            }
        },n.Vector4 = function (e, t, i, n) {
            this.x = e || 0, this.y = t || 0, this.z = i || 0, this.w = void 0 !== n ? n : 1
        },n.Vector4.prototype = {
            constructor: n.Vector4, set: function (e, t, i, n) {
                return this.x = e, this.y = t, this.z = i, this.w = n, this
            }, setScalar: function (e) {
                return this.x = e, this.y = e, this.z = e, this.w = e, this
            }, setX: function (e) {
                return this.x = e, this
            }, setY: function (e) {
                return this.y = e, this
            }, setZ: function (e) {
                return this.z = e, this
            }, setW: function (e) {
                return this.w = e, this
            }, setComponent: function (e, t) {
                switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    case 2:
                        this.z = t;
                        break;
                    case 3:
                        this.w = t;
                        break;
                    default:
                        throw new Error("index is out of range: " + e)
                }
            }, getComponent: function (e) {
                switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    case 2:
                        return this.z;
                    case 3:
                        return this.w;
                    default:
                        throw new Error("index is out of range: " + e)
                }
            }, clone: function () {
                return new this.constructor(this.x, this.y, this.z, this.w)
            }, copy: function (e) {
                return this.x = e.x, this.y = e.y, this.z = e.z, this.w = void 0 !== e.w ? e.w : 1, this
            }, add: function (e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this.w += e.w, this)
            }, addScalar: function (e) {
                return this.x += e, this.y += e, this.z += e, this.w += e, this
            }, addVectors: function (e, t) {
                return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this.w = e.w + t.w, this
            }, addScaledVector: function (e, t) {
                return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this.w += e.w * t, this
            }, sub: function (e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this.w -= e.w, this)
            }, subScalar: function (e) {
                return this.x -= e, this.y -= e, this.z -= e, this.w -= e, this
            }, subVectors: function (e, t) {
                return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this.w = e.w - t.w, this
            }, multiplyScalar: function (e) {
                return isFinite(e) ? (this.x *= e, this.y *= e, this.z *= e, this.w *= e) : (this.x = 0, this.y = 0, this.z = 0, this.w = 0), this
            }, applyMatrix4: function (e) {
                var t = this.x, i = this.y, n = this.z, r = this.w, o = e.elements;
                return this.x = o[0] * t + o[4] * i + o[8] * n + o[12] * r, this.y = o[1] * t + o[5] * i + o[9] * n + o[13] * r, this.z = o[2] * t + o[6] * i + o[10] * n + o[14] * r, this.w = o[3] * t + o[7] * i + o[11] * n + o[15] * r, this
            }, divideScalar: function (e) {
                return this.multiplyScalar(1 / e)
            }, setAxisAngleFromQuaternion: function (e) {
                this.w = 2 * Math.acos(e.w);
                var t = Math.sqrt(1 - e.w * e.w);
                return 1e-4 > t ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e.x / t, this.y = e.y / t, this.z = e.z / t), this
            }, setAxisAngleFromRotationMatrix: function (e) {
                var t, i, n, r, o = .01, a = .1, s = e.elements, l = s[0], h = s[4], c = s[8], u = s[1], d = s[5], p = s[9], f = s[2], g = s[6], m = s[10];
                if (Math.abs(h - u) < o && Math.abs(c - f) < o && Math.abs(p - g) < o) {
                    if (Math.abs(h + u) < a && Math.abs(c + f) < a && Math.abs(p + g) < a && Math.abs(l + d + m - 3) < a)return this.set(1, 0, 0, 0), this;
                    t = Math.PI;
                    var v = (l + 1) / 2, A = (d + 1) / 2, y = (m + 1) / 2, C = (h + u) / 4, I = (c + f) / 4, b = (p + g) / 4;
                    return v > A && v > y ? o > v ? (i = 0, n = .707106781, r = .707106781) : (i = Math.sqrt(v), n = C / i, r = I / i) : A > y ? o > A ? (i = .707106781, n = 0, r = .707106781) : (n = Math.sqrt(A), i = C / n, r = b / n) : o > y ? (i = .707106781, n = .707106781, r = 0) : (r = Math.sqrt(y), i = I / r, n = b / r), this.set(i, n, r, t), this
                }
                var w = Math.sqrt((g - p) * (g - p) + (c - f) * (c - f) + (u - h) * (u - h));
                return Math.abs(w) < .001 && (w = 1), this.x = (g - p) / w, this.y = (c - f) / w, this.z = (u - h) / w, this.w = Math.acos((l + d + m - 1) / 2), this
            }, min: function (e) {
                return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this.w = Math.min(this.w, e.w), this
            }, max: function (e) {
                return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this.w = Math.max(this.w, e.w), this
            }, clamp: function (e, t) {
                return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this.w = Math.max(e.w, Math.min(t.w, this.w)), this
            }, clampScalar: function () {
                var e, t;
                return function (i, r) {
                    return void 0 === e && (e = new n.Vector4, t = new n.Vector4), e.set(i, i, i, i), t.set(r, r, r, r), this.clamp(e, t)
                }
            }(), floor: function () {
                return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this
            }, ceil: function () {
                return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this
            }, round: function () {
                return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this
            }, roundToZero: function () {
                return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this
            }, negate: function () {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
            }, dot: function (e) {
                return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
            }, lengthSq: function () {
                return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
            }, length: function () {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
            }, lengthManhattan: function () {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
            }, normalize: function () {
                return this.divideScalar(this.length())
            }, setLength: function (e) {
                return this.multiplyScalar(e / this.length())
            }, lerp: function (e, t) {
                return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this.w += (e.w - this.w) * t, this
            }, lerpVectors: function (e, t, i) {
                return this.subVectors(t, e).multiplyScalar(i).add(e), this
            }, equals: function (e) {
                return e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
            }, fromArray: function (e, t) {
                return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this.w = e[t + 3], this
            }, toArray: function (e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e[t + 3] = this.w, e
            }, fromAttribute: function (e, t, i) {
                return void 0 === i && (i = 0), t = t * e.itemSize + i, this.x = e.array[t], this.y = e.array[t + 1], this.z = e.array[t + 2], this.w = e.array[t + 3], this
            }
        },n.Euler = function (e, t, i, r) {
            this._x = e || 0, this._y = t || 0, this._z = i || 0, this._order = r || n.Euler.DefaultOrder
        },n.Euler.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"],n.Euler.DefaultOrder = "XYZ",n.Euler.prototype = {
            constructor: n.Euler,
            get x() {
                return this._x
            },
            set x(e) {
                this._x = e, this.onChangeCallback()
            },
            get y() {
                return this._y
            },
            set y(e) {
                this._y = e, this.onChangeCallback()
            },
            get z() {
                return this._z
            },
            set z(e) {
                this._z = e, this.onChangeCallback()
            },
            get order() {
                return this._order
            },
            set order(e) {
                this._order = e, this.onChangeCallback()
            },
            set: function (e, t, i, n) {
                return this._x = e, this._y = t, this._z = i, this._order = n || this._order, this.onChangeCallback(), this
            },
            clone: function () {
                return new this.constructor(this._x, this._y, this._z, this._order)
            },
            copy: function (e) {
                return this._x = e._x, this._y = e._y, this._z = e._z, this._order = e._order, this.onChangeCallback(), this
            },
            setFromRotationMatrix: function (e, t, i) {
                var r = n.Math.clamp, o = e.elements, a = o[0], s = o[4], l = o[8], h = o[1], c = o[5], u = o[9], d = o[2], p = o[6], f = o[10];
                return t = t || this._order, "XYZ" === t ? (this._y = Math.asin(r(l, -1, 1)), Math.abs(l) < .99999 ? (this._x = Math.atan2(-u, f), this._z = Math.atan2(-s, a)) : (this._x = Math.atan2(p, c), this._z = 0)) : "YXZ" === t ? (this._x = Math.asin(-r(u, -1, 1)), Math.abs(u) < .99999 ? (this._y = Math.atan2(l, f), this._z = Math.atan2(h, c)) : (this._y = Math.atan2(-d, a), this._z = 0)) : "ZXY" === t ? (this._x = Math.asin(r(p, -1, 1)), Math.abs(p) < .99999 ? (this._y = Math.atan2(-d, f), this._z = Math.atan2(-s, c)) : (this._y = 0, this._z = Math.atan2(h, a))) : "ZYX" === t ? (this._y = Math.asin(-r(d, -1, 1)), Math.abs(d) < .99999 ? (this._x = Math.atan2(p, f), this._z = Math.atan2(h, a)) : (this._x = 0, this._z = Math.atan2(-s, c))) : "YZX" === t ? (this._z = Math.asin(r(h, -1, 1)), Math.abs(h) < .99999 ? (this._x = Math.atan2(-u, c), this._y = Math.atan2(-d, a)) : (this._x = 0, this._y = Math.atan2(l, f))) : "XZY" === t ? (this._z = Math.asin(-r(s, -1, 1)), Math.abs(s) < .99999 ? (this._x = Math.atan2(p, c), this._y = Math.atan2(l, a)) : (this._x = Math.atan2(-u, f), this._y = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + t), this._order = t, i !== !1 && this.onChangeCallback(), this
            },
            setFromQuaternion: function () {
                var e;
                return function (t, i, r) {
                    return void 0 === e && (e = new n.Matrix4), e.makeRotationFromQuaternion(t), this.setFromRotationMatrix(e, i, r), this
                }
            }(),
            setFromVector3: function (e, t) {
                return this.set(e.x, e.y, e.z, t || this._order)
            },
            reorder: function () {
                var e = new n.Quaternion;
                return function (t) {
                    e.setFromEuler(this), this.setFromQuaternion(e, t)
                }
            }(),
            equals: function (e) {
                return e._x === this._x && e._y === this._y && e._z === this._z && e._order === this._order
            },
            fromArray: function (e) {
                return this._x = e[0], this._y = e[1], this._z = e[2], void 0 !== e[3] && (this._order = e[3]), this.onChangeCallback(), this
            },
            toArray: function (e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._order, e
            },
            toVector3: function (e) {
                return e ? e.set(this._x, this._y, this._z) : new n.Vector3(this._x, this._y, this._z)
            },
            onChange: function (e) {
                return this.onChangeCallback = e, this
            },
            onChangeCallback: function () {
            }
        },n.Line3 = function (e, t) {
            this.start = void 0 !== e ? e : new n.Vector3, this.end = void 0 !== t ? t : new n.Vector3
        },n.Line3.prototype = {
            constructor: n.Line3, set: function (e, t) {
                return this.start.copy(e), this.end.copy(t), this
            }, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                return this.start.copy(e.start), this.end.copy(e.end), this
            }, center: function (e) {
                var t = e || new n.Vector3;
                return t.addVectors(this.start, this.end).multiplyScalar(.5)
            }, delta: function (e) {
                var t = e || new n.Vector3;
                return t.subVectors(this.end, this.start)
            }, distanceSq: function () {
                return this.start.distanceToSquared(this.end)
            }, distance: function () {
                return this.start.distanceTo(this.end)
            }, at: function (e, t) {
                var i = t || new n.Vector3;
                return this.delta(i).multiplyScalar(e).add(this.start)
            }, closestPointToPointParameter: function () {
                var e = new n.Vector3, t = new n.Vector3;
                return function (i, r) {
                    e.subVectors(i, this.start), t.subVectors(this.end, this.start);
                    var o = t.dot(t), a = t.dot(e), s = a / o;
                    return r && (s = n.Math.clamp(s, 0, 1)), s
                }
            }(), closestPointToPoint: function (e, t, i) {
                var r = this.closestPointToPointParameter(e, t), o = i || new n.Vector3;
                return this.delta(o).multiplyScalar(r).add(this.start)
            }, applyMatrix4: function (e) {
                return this.start.applyMatrix4(e), this.end.applyMatrix4(e), this
            }, equals: function (e) {
                return e.start.equals(this.start) && e.end.equals(this.end)
            }
        },n.Box2 = function (e, t) {
            this.min = void 0 !== e ? e : new n.Vector2(+(1 / 0), +(1 / 0)), this.max = void 0 !== t ? t : new n.Vector2(-(1 / 0), -(1 / 0))
        },n.Box2.prototype = {
            constructor: n.Box2, set: function (e, t) {
                return this.min.copy(e), this.max.copy(t), this
            }, setFromPoints: function (e) {
                this.makeEmpty();
                for (var t = 0, i = e.length; i > t; t++)this.expandByPoint(e[t]);
                return this
            }, setFromCenterAndSize: function () {
                var e = new n.Vector2;
                return function (t, i) {
                    var n = e.copy(i).multiplyScalar(.5);
                    return this.min.copy(t).sub(n), this.max.copy(t).add(n), this
                }
            }(), clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                return this.min.copy(e.min), this.max.copy(e.max), this
            }, makeEmpty: function () {
                return this.min.x = this.min.y = +(1 / 0), this.max.x = this.max.y = -(1 / 0), this
            }, isEmpty: function () {
                return this.max.x < this.min.x || this.max.y < this.min.y
            }, center: function (e) {
                var t = e || new n.Vector2;
                return t.addVectors(this.min, this.max).multiplyScalar(.5)
            }, size: function (e) {
                var t = e || new n.Vector2;
                return t.subVectors(this.max, this.min)
            }, expandByPoint: function (e) {
                return this.min.min(e), this.max.max(e), this
            }, expandByVector: function (e) {
                return this.min.sub(e), this.max.add(e), this
            }, expandByScalar: function (e) {
                return this.min.addScalar(-e), this.max.addScalar(e), this
            }, containsPoint: function (e) {
                return e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y ? !1 : !0
            }, containsBox: function (e) {
                return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y ? !0 : !1
            }, getParameter: function (e, t) {
                var i = t || new n.Vector2;
                return i.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y))
            }, intersectsBox: function (e) {
                return e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y ? !1 : !0
            }, clampPoint: function (e, t) {
                var i = t || new n.Vector2;
                return i.copy(e).clamp(this.min, this.max)
            }, distanceToPoint: function () {
                var e = new n.Vector2;
                return function (t) {
                    var i = e.copy(t).clamp(this.min, this.max);
                    return i.sub(t).length()
                }
            }(), intersect: function (e) {
                return this.min.max(e.min), this.max.min(e.max), this
            }, union: function (e) {
                return this.min.min(e.min), this.max.max(e.max), this
            }, translate: function (e) {
                return this.min.add(e), this.max.add(e), this
            }, equals: function (e) {
                return e.min.equals(this.min) && e.max.equals(this.max)
            }
        },n.Box3 = function (e, t) {
            this.min = void 0 !== e ? e : new n.Vector3(+(1 / 0), +(1 / 0), +(1 / 0)), this.max = void 0 !== t ? t : new n.Vector3(-(1 / 0), -(1 / 0), -(1 / 0))
        },n.Box3.prototype = {
            constructor: n.Box3, set: function (e, t) {
                return this.min.copy(e), this.max.copy(t), this
            }, setFromArray: function (e) {
                this.makeEmpty();
                for (var t = +(1 / 0), i = +(1 / 0), n = +(1 / 0), r = -(1 / 0), o = -(1 / 0), a = -(1 / 0), s = 0, l = e.length; l > s; s += 3) {
                    var h = e[s], c = e[s + 1], u = e[s + 2];
                    t > h && (t = h), i > c && (i = c), n > u && (n = u), h > r && (r = h), c > o && (o = c), u > a && (a = u)
                }
                this.min.set(t, i, n), this.max.set(r, o, a)
            }, setFromPoints: function (e) {
                this.makeEmpty();
                for (var t = 0, i = e.length; i > t; t++)this.expandByPoint(e[t]);
                return this
            }, setFromCenterAndSize: function () {
                var e = new n.Vector3;
                return function (t, i) {
                    var n = e.copy(i).multiplyScalar(.5);
                    return this.min.copy(t).sub(n), this.max.copy(t).add(n), this
                }
            }(), setFromObject: function () {
                var e;
                return function (t) {
                    void 0 === e && (e = new n.Box3);
                    var i = this;
                    return this.makeEmpty(), t.updateMatrixWorld(!0), t.traverse(function (t) {
                        var n = t.geometry;
                        void 0 !== n && (null === n.boundingBox && n.computeBoundingBox(), n.boundingBox.isEmpty() === !1 && (e.copy(n.boundingBox), e.applyMatrix4(t.matrixWorld), i.union(e)))
                    }), this
                }
            }(), clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                return this.min.copy(e.min), this.max.copy(e.max), this
            }, makeEmpty: function () {
                return this.min.x = this.min.y = this.min.z = +(1 / 0), this.max.x = this.max.y = this.max.z = -(1 / 0), this
            }, isEmpty: function () {
                return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
            }, center: function (e) {
                var t = e || new n.Vector3;
                return t.addVectors(this.min, this.max).multiplyScalar(.5)
            }, size: function (e) {
                var t = e || new n.Vector3;
                return t.subVectors(this.max, this.min)
            }, expandByPoint: function (e) {
                return this.min.min(e), this.max.max(e), this
            }, expandByVector: function (e) {
                return this.min.sub(e), this.max.add(e), this
            }, expandByScalar: function (e) {
                return this.min.addScalar(-e), this.max.addScalar(e), this
            }, containsPoint: function (e) {
                return e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z ? !1 : !0
            }, containsBox: function (e) {
                return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z ? !0 : !1
            }, getParameter: function (e, t) {
                var i = t || new n.Vector3;
                return i.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y), (e.z - this.min.z) / (this.max.z - this.min.z))
            }, intersectsBox: function (e) {
                return e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z ? !1 : !0
            }, intersectsSphere: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Vector3), this.clampPoint(t.center, e), e.distanceToSquared(t.center) <= t.radius * t.radius
                }
            }(), intersectsPlane: function (e) {
                var t, i;
                return e.normal.x > 0 ? (t = e.normal.x * this.min.x, i = e.normal.x * this.max.x) : (t = e.normal.x * this.max.x, i = e.normal.x * this.min.x), e.normal.y > 0 ? (t += e.normal.y * this.min.y, i += e.normal.y * this.max.y) : (t += e.normal.y * this.max.y, i += e.normal.y * this.min.y), e.normal.z > 0 ? (t += e.normal.z * this.min.z, i += e.normal.z * this.max.z) : (t += e.normal.z * this.max.z, i += e.normal.z * this.min.z), t <= e.constant && i >= e.constant
            }, clampPoint: function (e, t) {
                var i = t || new n.Vector3;
                return i.copy(e).clamp(this.min, this.max)
            }, distanceToPoint: function () {
                var e = new n.Vector3;
                return function (t) {
                    var i = e.copy(t).clamp(this.min, this.max);
                    return i.sub(t).length()
                }
            }(), getBoundingSphere: function () {
                var e = new n.Vector3;
                return function (t) {
                    var i = t || new n.Sphere;
                    return i.center = this.center(), i.radius = .5 * this.size(e).length(), i
                }
            }(), intersect: function (e) {
                return this.min.max(e.min), this.max.min(e.max), this
            }, union: function (e) {
                return this.min.min(e.min), this.max.max(e.max), this
            }, applyMatrix4: function () {
                var e = [new n.Vector3, new n.Vector3, new n.Vector3, new n.Vector3, new n.Vector3, new n.Vector3, new n.Vector3, new n.Vector3];
                return function (t) {
                    return e[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t), e[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t), e[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t), e[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t), e[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t), e[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t), e[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t), e[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t), this.makeEmpty(), this.setFromPoints(e), this
                }
            }(), translate: function (e) {
                return this.min.add(e), this.max.add(e), this
            }, equals: function (e) {
                return e.min.equals(this.min) && e.max.equals(this.max)
            }
        },n.Matrix3 = function () {
            this.elements = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]), arguments.length > 0 && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
        },n.Matrix3.prototype = {
            constructor: n.Matrix3, set: function (e, t, i, n, r, o, a, s, l) {
                var h = this.elements;
                return h[0] = e, h[1] = n, h[2] = a, h[3] = t, h[4] = r, h[5] = s, h[6] = i, h[7] = o, h[8] = l, this
            }, identity: function () {
                return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this
            }, clone: function () {
                return (new this.constructor).fromArray(this.elements)
            }, copy: function (e) {
                var t = e.elements;
                return this.set(t[0], t[3], t[6], t[1], t[4], t[7], t[2], t[5], t[8]), this
            }, setFromMatrix4: function (e) {
                var t = e.elements;
                return this.set(t[0], t[4], t[8], t[1], t[5], t[9], t[2], t[6], t[10]), this
            }, applyToVector3Array: function () {
                var e;
                return function (t, i, r) {
                    void 0 === e && (e = new n.Vector3), void 0 === i && (i = 0), void 0 === r && (r = t.length);
                    for (var o = 0, a = i; r > o; o += 3, a += 3)e.fromArray(t, a), e.applyMatrix3(this), e.toArray(t, a);
                    return t
                }
            }(), applyToBuffer: function () {
                var e;
                return function (t, i, r) {
                    void 0 === e && (e = new n.Vector3), void 0 === i && (i = 0), void 0 === r && (r = t.length / t.itemSize);
                    for (var o = 0, a = i; r > o; o++, a++)e.x = t.getX(a), e.y = t.getY(a), e.z = t.getZ(a), e.applyMatrix3(this), t.setXYZ(e.x, e.y, e.z);
                    return t
                }
            }(), multiplyScalar: function (e) {
                var t = this.elements;
                return t[0] *= e, t[3] *= e, t[6] *= e, t[1] *= e, t[4] *= e, t[7] *= e, t[2] *= e, t[5] *= e, t[8] *= e, this
            }, determinant: function () {
                var e = this.elements, t = e[0], i = e[1], n = e[2], r = e[3], o = e[4], a = e[5], s = e[6], l = e[7], h = e[8];
                return t * o * h - t * a * l - i * r * h + i * a * s + n * r * l - n * o * s
            }, getInverse: function (e, t) {
                e instanceof n.Matrix4 && console.warn("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");
                var i = e.elements, r = this.elements, o = i[0], a = i[1], s = i[2], l = i[3], h = i[4], c = i[5], u = i[6], d = i[7], p = i[8], f = p * h - c * d, g = c * u - p * l, m = d * l - h * u, v = o * f + a * g + s * m;
                if (0 === v) {
                    var A = "THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";
                    if (t)throw new Error(A);
                    return console.warn(A), this.identity()
                }
                return r[0] = f, r[1] = s * d - p * a, r[2] = c * a - s * h, r[3] = g, r[4] = p * o - s * u, r[5] = s * l - c * o, r[6] = m, r[7] = a * u - d * o, r[8] = h * o - a * l, this.multiplyScalar(1 / v)
            }, transpose: function () {
                var e, t = this.elements;
                return e = t[1], t[1] = t[3], t[3] = e, e = t[2], t[2] = t[6], t[6] = e, e = t[5], t[5] = t[7], t[7] = e, this
            }, flattenToArrayOffset: function (e, t) {
                var i = this.elements;
                return e[t] = i[0], e[t + 1] = i[1], e[t + 2] = i[2], e[t + 3] = i[3], e[t + 4] = i[4], e[t + 5] = i[5], e[t + 6] = i[6], e[t + 7] = i[7], e[t + 8] = i[8], e
            }, getNormalMatrix: function (e) {
                return this.setFromMatrix4(e).getInverse(this).transpose()
            }, transposeIntoArray: function (e) {
                var t = this.elements;
                return e[0] = t[0], e[1] = t[3], e[2] = t[6], e[3] = t[1], e[4] = t[4], e[5] = t[7], e[6] = t[2], e[7] = t[5], e[8] = t[8], this
            }, fromArray: function (e) {
                return this.elements.set(e), this
            }, toArray: function () {
                var e = this.elements;
                return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8]]
            }
        },n.Matrix4 = function () {
            this.elements = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]), arguments.length > 0 && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
        },n.Matrix4.prototype = {
            constructor: n.Matrix4, set: function (e, t, i, n, r, o, a, s, l, h, c, u, d, p, f, g) {
                var m = this.elements;
                return m[0] = e, m[4] = t, m[8] = i, m[12] = n, m[1] = r, m[5] = o, m[9] = a, m[13] = s, m[2] = l, m[6] = h, m[10] = c, m[14] = u, m[3] = d, m[7] = p, m[11] = f, m[15] = g, this
            }, identity: function () {
                return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            }, clone: function () {
                return (new n.Matrix4).fromArray(this.elements)
            }, copy: function (e) {
                return this.elements.set(e.elements), this
            }, copyPosition: function (e) {
                var t = this.elements, i = e.elements;
                return t[12] = i[12], t[13] = i[13], t[14] = i[14], this
            }, extractBasis: function (e, t, i) {
                return e.setFromMatrixColumn(this, 0), t.setFromMatrixColumn(this, 1), i.setFromMatrixColumn(this, 2), this
            }, makeBasis: function (e, t, i) {
                return this.set(e.x, t.x, i.x, 0, e.y, t.y, i.y, 0, e.z, t.z, i.z, 0, 0, 0, 0, 1), this
            }, extractRotation: function () {
                var e;
                return function (t) {
                    void 0 === e && (e = new n.Vector3);
                    var i = this.elements, r = t.elements, o = 1 / e.setFromMatrixColumn(t, 0).length(), a = 1 / e.setFromMatrixColumn(t, 1).length(), s = 1 / e.setFromMatrixColumn(t, 2).length();
                    return i[0] = r[0] * o, i[1] = r[1] * o, i[2] = r[2] * o, i[4] = r[4] * a, i[5] = r[5] * a, i[6] = r[6] * a, i[8] = r[8] * s, i[9] = r[9] * s, i[10] = r[10] * s, this
                }
            }(), makeRotationFromEuler: function (e) {
                e instanceof n.Euler == !1 && console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
                var t = this.elements, i = e.x, r = e.y, o = e.z, a = Math.cos(i), s = Math.sin(i), l = Math.cos(r), h = Math.sin(r), c = Math.cos(o), u = Math.sin(o);
                if ("XYZ" === e.order) {
                    var d = a * c, p = a * u, f = s * c, g = s * u;
                    t[0] = l * c, t[4] = -l * u, t[8] = h, t[1] = p + f * h, t[5] = d - g * h, t[9] = -s * l, t[2] = g - d * h, t[6] = f + p * h, t[10] = a * l
                } else if ("YXZ" === e.order) {
                    var m = l * c, v = l * u, A = h * c, y = h * u;
                    t[0] = m + y * s, t[4] = A * s - v, t[8] = a * h, t[1] = a * u, t[5] = a * c, t[9] = -s, t[2] = v * s - A, t[6] = y + m * s, t[10] = a * l
                } else if ("ZXY" === e.order) {
                    var m = l * c, v = l * u, A = h * c, y = h * u;
                    t[0] = m - y * s, t[4] = -a * u, t[8] = A + v * s, t[1] = v + A * s, t[5] = a * c, t[9] = y - m * s, t[2] = -a * h, t[6] = s, t[10] = a * l
                } else if ("ZYX" === e.order) {
                    var d = a * c, p = a * u, f = s * c, g = s * u;
                    t[0] = l * c, t[4] = f * h - p, t[8] = d * h + g, t[1] = l * u, t[5] = g * h + d, t[9] = p * h - f, t[2] = -h, t[6] = s * l, t[10] = a * l
                } else if ("YZX" === e.order) {
                    var C = a * l, I = a * h, b = s * l, w = s * h;
                    t[0] = l * c, t[4] = w - C * u, t[8] = b * u + I, t[1] = u, t[5] = a * c, t[9] = -s * c, t[2] = -h * c, t[6] = I * u + b, t[10] = C - w * u
                } else if ("XZY" === e.order) {
                    var C = a * l, I = a * h, b = s * l, w = s * h;
                    t[0] = l * c, t[4] = -u, t[8] = h * c, t[1] = C * u + w, t[5] = a * c, t[9] = I * u - b, t[2] = b * u - I, t[6] = s * c, t[10] = w * u + C
                }
                return t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
            }, makeRotationFromQuaternion: function (e) {
                var t = this.elements, i = e.x, n = e.y, r = e.z, o = e.w, a = i + i, s = n + n, l = r + r, h = i * a, c = i * s, u = i * l, d = n * s, p = n * l, f = r * l, g = o * a, m = o * s, v = o * l;
                return t[0] = 1 - (d + f), t[4] = c - v, t[8] = u + m, t[1] = c + v, t[5] = 1 - (h + f), t[9] = p - g, t[2] = u - m, t[6] = p + g, t[10] = 1 - (h + d), t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
            }, lookAt: function () {
                var e, t, i;
                return function (r, o, a) {
                    void 0 === e && (e = new n.Vector3), void 0 === t && (t = new n.Vector3), void 0 === i && (i = new n.Vector3);
                    var s = this.elements;
                    return i.subVectors(r, o).normalize(), 0 === i.lengthSq() && (i.z = 1), e.crossVectors(a, i).normalize(), 0 === e.lengthSq() && (i.x += 1e-4, e.crossVectors(a, i).normalize()), t.crossVectors(i, e), s[0] = e.x, s[4] = t.x, s[8] = i.x, s[1] = e.y, s[5] = t.y, s[9] = i.y, s[2] = e.z, s[6] = t.z, s[10] = i.z, this
                }
            }(), multiply: function (e, t) {
                return void 0 !== t ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(e, t)) : this.multiplyMatrices(this, e)
            }, multiplyMatrices: function (e, t) {
                var i = e.elements, n = t.elements, r = this.elements, o = i[0], a = i[4], s = i[8], l = i[12], h = i[1], c = i[5], u = i[9], d = i[13], p = i[2], f = i[6], g = i[10], m = i[14], v = i[3], A = i[7], y = i[11], C = i[15], I = n[0], b = n[4], w = n[8], x = n[12], E = n[1], M = n[5], T = n[9], S = n[13], P = n[2], _ = n[6], L = n[10], D = n[14], R = n[3], B = n[7], O = n[11], F = n[15];
                return r[0] = o * I + a * E + s * P + l * R, r[4] = o * b + a * M + s * _ + l * B, r[8] = o * w + a * T + s * L + l * O, r[12] = o * x + a * S + s * D + l * F, r[1] = h * I + c * E + u * P + d * R, r[5] = h * b + c * M + u * _ + d * B, r[9] = h * w + c * T + u * L + d * O, r[13] = h * x + c * S + u * D + d * F, r[2] = p * I + f * E + g * P + m * R, r[6] = p * b + f * M + g * _ + m * B, r[10] = p * w + f * T + g * L + m * O, r[14] = p * x + f * S + g * D + m * F, r[3] = v * I + A * E + y * P + C * R, r[7] = v * b + A * M + y * _ + C * B, r[11] = v * w + A * T + y * L + C * O, r[15] = v * x + A * S + y * D + C * F, this
            }, multiplyToArray: function (e, t, i) {
                var n = this.elements;
                return this.multiplyMatrices(e, t), i[0] = n[0], i[1] = n[1], i[2] = n[2], i[3] = n[3], i[4] = n[4], i[5] = n[5], i[6] = n[6], i[7] = n[7], i[8] = n[8], i[9] = n[9], i[10] = n[10], i[11] = n[11], i[12] = n[12], i[13] = n[13], i[14] = n[14], i[15] = n[15], this
            }, multiplyScalar: function (e) {
                var t = this.elements;
                return t[0] *= e, t[4] *= e, t[8] *= e, t[12] *= e, t[1] *= e, t[5] *= e, t[9] *= e, t[13] *= e, t[2] *= e, t[6] *= e, t[10] *= e, t[14] *= e,
                    t[3] *= e, t[7] *= e, t[11] *= e, t[15] *= e, this
            }, applyToVector3Array: function () {
                var e;
                return function (t, i, r) {
                    void 0 === e && (e = new n.Vector3), void 0 === i && (i = 0), void 0 === r && (r = t.length);
                    for (var o = 0, a = i; r > o; o += 3, a += 3)e.fromArray(t, a), e.applyMatrix4(this), e.toArray(t, a);
                    return t
                }
            }(), applyToBuffer: function () {
                var e;
                return function (t, i, r) {
                    void 0 === e && (e = new n.Vector3), void 0 === i && (i = 0), void 0 === r && (r = t.length / t.itemSize);
                    for (var o = 0, a = i; r > o; o++, a++)e.x = t.getX(a), e.y = t.getY(a), e.z = t.getZ(a), e.applyMatrix4(this), t.setXYZ(e.x, e.y, e.z);
                    return t
                }
            }(), determinant: function () {
                var e = this.elements, t = e[0], i = e[4], n = e[8], r = e[12], o = e[1], a = e[5], s = e[9], l = e[13], h = e[2], c = e[6], u = e[10], d = e[14], p = e[3], f = e[7], g = e[11], m = e[15];
                return p * (+r * s * c - n * l * c - r * a * u + i * l * u + n * a * d - i * s * d) + f * (+t * s * d - t * l * u + r * o * u - n * o * d + n * l * h - r * s * h) + g * (+t * l * c - t * a * d - r * o * c + i * o * d + r * a * h - i * l * h) + m * (-n * a * h - t * s * c + t * a * u + n * o * c - i * o * u + i * s * h)
            }, transpose: function () {
                var e, t = this.elements;
                return e = t[1], t[1] = t[4], t[4] = e, e = t[2], t[2] = t[8], t[8] = e, e = t[6], t[6] = t[9], t[9] = e, e = t[3], t[3] = t[12], t[12] = e, e = t[7], t[7] = t[13], t[13] = e, e = t[11], t[11] = t[14], t[14] = e, this
            }, flattenToArrayOffset: function (e, t) {
                var i = this.elements;
                return e[t] = i[0], e[t + 1] = i[1], e[t + 2] = i[2], e[t + 3] = i[3], e[t + 4] = i[4], e[t + 5] = i[5], e[t + 6] = i[6], e[t + 7] = i[7], e[t + 8] = i[8], e[t + 9] = i[9], e[t + 10] = i[10], e[t + 11] = i[11], e[t + 12] = i[12], e[t + 13] = i[13], e[t + 14] = i[14], e[t + 15] = i[15], e
            }, getPosition: function () {
                var e;
                return function () {
                    return void 0 === e && (e = new n.Vector3), console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."), e.setFromMatrixColumn(this, 3)
                }
            }(), setPosition: function (e) {
                var t = this.elements;
                return t[12] = e.x, t[13] = e.y, t[14] = e.z, this
            }, getInverse: function (e, t) {
                var i = this.elements, n = e.elements, r = n[0], o = n[1], a = n[2], s = n[3], l = n[4], h = n[5], c = n[6], u = n[7], d = n[8], p = n[9], f = n[10], g = n[11], m = n[12], v = n[13], A = n[14], y = n[15], C = p * A * u - v * f * u + v * c * g - h * A * g - p * c * y + h * f * y, I = m * f * u - d * A * u - m * c * g + l * A * g + d * c * y - l * f * y, b = d * v * u - m * p * u + m * h * g - l * v * g - d * h * y + l * p * y, w = m * p * c - d * v * c - m * h * f + l * v * f + d * h * A - l * p * A, x = r * C + o * I + a * b + s * w;
                if (0 === x) {
                    var E = "THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";
                    if (t)throw new Error(E);
                    return console.warn(E), this.identity()
                }
                return i[0] = C, i[1] = v * f * s - p * A * s - v * a * g + o * A * g + p * a * y - o * f * y, i[2] = h * A * s - v * c * s + v * a * u - o * A * u - h * a * y + o * c * y, i[3] = p * c * s - h * f * s - p * a * u + o * f * u + h * a * g - o * c * g, i[4] = I, i[5] = d * A * s - m * f * s + m * a * g - r * A * g - d * a * y + r * f * y, i[6] = m * c * s - l * A * s - m * a * u + r * A * u + l * a * y - r * c * y, i[7] = l * f * s - d * c * s + d * a * u - r * f * u - l * a * g + r * c * g, i[8] = b, i[9] = m * p * s - d * v * s - m * o * g + r * v * g + d * o * y - r * p * y, i[10] = l * v * s - m * h * s + m * o * u - r * v * u - l * o * y + r * h * y, i[11] = d * h * s - l * p * s - d * o * u + r * p * u + l * o * g - r * h * g, i[12] = w, i[13] = d * v * a - m * p * a + m * o * f - r * v * f - d * o * A + r * p * A, i[14] = m * h * a - l * v * a - m * o * c + r * v * c + l * o * A - r * h * A, i[15] = l * p * a - d * h * a + d * o * c - r * p * c - l * o * f + r * h * f, this.multiplyScalar(1 / x)
            }, scale: function (e) {
                var t = this.elements, i = e.x, n = e.y, r = e.z;
                return t[0] *= i, t[4] *= n, t[8] *= r, t[1] *= i, t[5] *= n, t[9] *= r, t[2] *= i, t[6] *= n, t[10] *= r, t[3] *= i, t[7] *= n, t[11] *= r, this
            }, getMaxScaleOnAxis: function () {
                var e = this.elements, t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2], i = e[4] * e[4] + e[5] * e[5] + e[6] * e[6], n = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
                return Math.sqrt(Math.max(t, i, n))
            }, makeTranslation: function (e, t, i) {
                return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, i, 0, 0, 0, 1), this
            }, makeRotationX: function (e) {
                var t = Math.cos(e), i = Math.sin(e);
                return this.set(1, 0, 0, 0, 0, t, -i, 0, 0, i, t, 0, 0, 0, 0, 1), this
            }, makeRotationY: function (e) {
                var t = Math.cos(e), i = Math.sin(e);
                return this.set(t, 0, i, 0, 0, 1, 0, 0, -i, 0, t, 0, 0, 0, 0, 1), this
            }, makeRotationZ: function (e) {
                var t = Math.cos(e), i = Math.sin(e);
                return this.set(t, -i, 0, 0, i, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            }, makeRotationAxis: function (e, t) {
                var i = Math.cos(t), n = Math.sin(t), r = 1 - i, o = e.x, a = e.y, s = e.z, l = r * o, h = r * a;
                return this.set(l * o + i, l * a - n * s, l * s + n * a, 0, l * a + n * s, h * a + i, h * s - n * o, 0, l * s - n * a, h * s + n * o, r * s * s + i, 0, 0, 0, 0, 1), this
            }, makeScale: function (e, t, i) {
                return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, i, 0, 0, 0, 0, 1), this
            }, compose: function (e, t, i) {
                return this.makeRotationFromQuaternion(t), this.scale(i), this.setPosition(e), this
            }, decompose: function () {
                var e, t;
                return function (i, r, o) {
                    void 0 === e && (e = new n.Vector3), void 0 === t && (t = new n.Matrix4);
                    var a = this.elements, s = e.set(a[0], a[1], a[2]).length(), l = e.set(a[4], a[5], a[6]).length(), h = e.set(a[8], a[9], a[10]).length(), c = this.determinant();
                    0 > c && (s = -s), i.x = a[12], i.y = a[13], i.z = a[14], t.elements.set(this.elements);
                    var u = 1 / s, d = 1 / l, p = 1 / h;
                    return t.elements[0] *= u, t.elements[1] *= u, t.elements[2] *= u, t.elements[4] *= d, t.elements[5] *= d, t.elements[6] *= d, t.elements[8] *= p, t.elements[9] *= p, t.elements[10] *= p, r.setFromRotationMatrix(t), o.x = s, o.y = l, o.z = h, this
                }
            }(), makeFrustum: function (e, t, i, n, r, o) {
                var a = this.elements, s = 2 * r / (t - e), l = 2 * r / (n - i), h = (t + e) / (t - e), c = (n + i) / (n - i), u = -(o + r) / (o - r), d = -2 * o * r / (o - r);
                return a[0] = s, a[4] = 0, a[8] = h, a[12] = 0, a[1] = 0, a[5] = l, a[9] = c, a[13] = 0, a[2] = 0, a[6] = 0, a[10] = u, a[14] = d, a[3] = 0, a[7] = 0, a[11] = -1, a[15] = 0, this
            }, makePerspective: function (e, t, i, r) {
                var o = i * Math.tan(n.Math.degToRad(.5 * e)), a = -o, s = a * t, l = o * t;
                return this.makeFrustum(s, l, a, o, i, r)
            }, makeOrthographic: function (e, t, i, n, r, o) {
                var a = this.elements, s = 1 / (t - e), l = 1 / (i - n), h = 1 / (o - r), c = (t + e) * s, u = (i + n) * l, d = (o + r) * h;
                return a[0] = 2 * s, a[4] = 0, a[8] = 0, a[12] = -c, a[1] = 0, a[5] = 2 * l, a[9] = 0, a[13] = -u, a[2] = 0, a[6] = 0, a[10] = -2 * h, a[14] = -d, a[3] = 0, a[7] = 0, a[11] = 0, a[15] = 1, this
            }, equals: function (e) {
                for (var t = this.elements, i = e.elements, n = 0; 16 > n; n++)if (t[n] !== i[n])return !1;
                return !0
            }, fromArray: function (e) {
                return this.elements.set(e), this
            }, toArray: function () {
                var e = this.elements;
                return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8], e[9], e[10], e[11], e[12], e[13], e[14], e[15]]
            }
        },n.Ray = function (e, t) {
            this.origin = void 0 !== e ? e : new n.Vector3, this.direction = void 0 !== t ? t : new n.Vector3
        },n.Ray.prototype = {
            constructor: n.Ray, set: function (e, t) {
                return this.origin.copy(e), this.direction.copy(t), this
            }, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                return this.origin.copy(e.origin), this.direction.copy(e.direction), this
            }, at: function (e, t) {
                var i = t || new n.Vector3;
                return i.copy(this.direction).multiplyScalar(e).add(this.origin)
            }, lookAt: function (e) {
                this.direction.copy(e).sub(this.origin).normalize()
            }, recast: function () {
                var e = new n.Vector3;
                return function (t) {
                    return this.origin.copy(this.at(t, e)), this
                }
            }(), closestPointToPoint: function (e, t) {
                var i = t || new n.Vector3;
                i.subVectors(e, this.origin);
                var r = i.dot(this.direction);
                return 0 > r ? i.copy(this.origin) : i.copy(this.direction).multiplyScalar(r).add(this.origin)
            }, distanceToPoint: function (e) {
                return Math.sqrt(this.distanceSqToPoint(e))
            }, distanceSqToPoint: function () {
                var e = new n.Vector3;
                return function (t) {
                    var i = e.subVectors(t, this.origin).dot(this.direction);
                    return 0 > i ? this.origin.distanceToSquared(t) : (e.copy(this.direction).multiplyScalar(i).add(this.origin), e.distanceToSquared(t))
                }
            }(), distanceSqToSegment: function () {
                var e = new n.Vector3, t = new n.Vector3, i = new n.Vector3;
                return function (n, r, o, a) {
                    e.copy(n).add(r).multiplyScalar(.5), t.copy(r).sub(n).normalize(), i.copy(this.origin).sub(e);
                    var s, l, h, c, u = .5 * n.distanceTo(r), d = -this.direction.dot(t), p = i.dot(this.direction), f = -i.dot(t), g = i.lengthSq(), m = Math.abs(1 - d * d);
                    if (m > 0)if (s = d * f - p, l = d * p - f, c = u * m, s >= 0)if (l >= -c)if (c >= l) {
                        var v = 1 / m;
                        s *= v, l *= v, h = s * (s + d * l + 2 * p) + l * (d * s + l + 2 * f) + g
                    } else l = u, s = Math.max(0, -(d * l + p)), h = -s * s + l * (l + 2 * f) + g; else l = -u, s = Math.max(0, -(d * l + p)), h = -s * s + l * (l + 2 * f) + g; else-c >= l ? (s = Math.max(0, -(-d * u + p)), l = s > 0 ? -u : Math.min(Math.max(-u, -f), u), h = -s * s + l * (l + 2 * f) + g) : c >= l ? (s = 0, l = Math.min(Math.max(-u, -f), u), h = l * (l + 2 * f) + g) : (s = Math.max(0, -(d * u + p)), l = s > 0 ? u : Math.min(Math.max(-u, -f), u), h = -s * s + l * (l + 2 * f) + g); else l = d > 0 ? -u : u, s = Math.max(0, -(d * l + p)), h = -s * s + l * (l + 2 * f) + g;
                    return o && o.copy(this.direction).multiplyScalar(s).add(this.origin), a && a.copy(t).multiplyScalar(l).add(e), h
                }
            }(), intersectSphere: function () {
                var e = new n.Vector3;
                return function (t, i) {
                    e.subVectors(t.center, this.origin);
                    var n = e.dot(this.direction), r = e.dot(e) - n * n, o = t.radius * t.radius;
                    if (r > o)return null;
                    var a = Math.sqrt(o - r), s = n - a, l = n + a;
                    return 0 > s && 0 > l ? null : 0 > s ? this.at(l, i) : this.at(s, i)
                }
            }(), intersectsSphere: function (e) {
                return this.distanceToPoint(e.center) <= e.radius
            }, distanceToPlane: function (e) {
                var t = e.normal.dot(this.direction);
                if (0 === t)return 0 === e.distanceToPoint(this.origin) ? 0 : null;
                var i = -(this.origin.dot(e.normal) + e.constant) / t;
                return i >= 0 ? i : null
            }, intersectPlane: function (e, t) {
                var i = this.distanceToPlane(e);
                return null === i ? null : this.at(i, t)
            }, intersectsPlane: function (e) {
                var t = e.distanceToPoint(this.origin);
                if (0 === t)return !0;
                var i = e.normal.dot(this.direction);
                return 0 > i * t ? !0 : !1
            }, intersectBox: function (e, t) {
                var i, n, r, o, a, s, l = 1 / this.direction.x, h = 1 / this.direction.y, c = 1 / this.direction.z, u = this.origin;
                return l >= 0 ? (i = (e.min.x - u.x) * l, n = (e.max.x - u.x) * l) : (i = (e.max.x - u.x) * l, n = (e.min.x - u.x) * l), h >= 0 ? (r = (e.min.y - u.y) * h, o = (e.max.y - u.y) * h) : (r = (e.max.y - u.y) * h, o = (e.min.y - u.y) * h), i > o || r > n ? null : ((r > i || i !== i) && (i = r), (n > o || n !== n) && (n = o), c >= 0 ? (a = (e.min.z - u.z) * c, s = (e.max.z - u.z) * c) : (a = (e.max.z - u.z) * c, s = (e.min.z - u.z) * c), i > s || a > n ? null : ((a > i || i !== i) && (i = a), (n > s || n !== n) && (n = s), 0 > n ? null : this.at(i >= 0 ? i : n, t)))
            }, intersectsBox: function () {
                var e = new n.Vector3;
                return function (t) {
                    return null !== this.intersectBox(t, e)
                }
            }(), intersectTriangle: function () {
                var e = new n.Vector3, t = new n.Vector3, i = new n.Vector3, r = new n.Vector3;
                return function (n, o, a, s, l) {
                    t.subVectors(o, n), i.subVectors(a, n), r.crossVectors(t, i);
                    var h, c = this.direction.dot(r);
                    if (c > 0) {
                        if (s)return null;
                        h = 1
                    } else {
                        if (!(0 > c))return null;
                        h = -1, c = -c
                    }
                    e.subVectors(this.origin, n);
                    var u = h * this.direction.dot(i.crossVectors(e, i));
                    if (0 > u)return null;
                    var d = h * this.direction.dot(t.cross(e));
                    if (0 > d)return null;
                    if (u + d > c)return null;
                    var p = -h * e.dot(r);
                    return 0 > p ? null : this.at(p / c, l)
                }
            }(), applyMatrix4: function (e) {
                return this.direction.add(this.origin).applyMatrix4(e), this.origin.applyMatrix4(e), this.direction.sub(this.origin), this.direction.normalize(), this
            }, equals: function (e) {
                return e.origin.equals(this.origin) && e.direction.equals(this.direction)
            }
        },n.Sphere = function (e, t) {
            this.center = void 0 !== e ? e : new n.Vector3, this.radius = void 0 !== t ? t : 0
        },n.Sphere.prototype = {
            constructor: n.Sphere, set: function (e, t) {
                return this.center.copy(e), this.radius = t, this
            }, setFromPoints: function () {
                var e = new n.Box3;
                return function (t, i) {
                    var n = this.center;
                    void 0 !== i ? n.copy(i) : e.setFromPoints(t).center(n);
                    for (var r = 0, o = 0, a = t.length; a > o; o++)r = Math.max(r, n.distanceToSquared(t[o]));
                    return this.radius = Math.sqrt(r), this
                }
            }(), clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                return this.center.copy(e.center), this.radius = e.radius, this
            }, empty: function () {
                return this.radius <= 0
            }, containsPoint: function (e) {
                return e.distanceToSquared(this.center) <= this.radius * this.radius
            }, distanceToPoint: function (e) {
                return e.distanceTo(this.center) - this.radius
            }, intersectsSphere: function (e) {
                var t = this.radius + e.radius;
                return e.center.distanceToSquared(this.center) <= t * t
            }, intersectsBox: function (e) {
                return e.intersectsSphere(this)
            }, intersectsPlane: function (e) {
                return Math.abs(this.center.dot(e.normal) - e.constant) <= this.radius
            }, clampPoint: function (e, t) {
                var i = this.center.distanceToSquared(e), r = t || new n.Vector3;
                return r.copy(e), i > this.radius * this.radius && (r.sub(this.center).normalize(), r.multiplyScalar(this.radius).add(this.center)), r
            }, getBoundingBox: function (e) {
                var t = e || new n.Box3;
                return t.set(this.center, this.center), t.expandByScalar(this.radius), t
            }, applyMatrix4: function (e) {
                return this.center.applyMatrix4(e), this.radius = this.radius * e.getMaxScaleOnAxis(), this
            }, translate: function (e) {
                return this.center.add(e), this
            }, equals: function (e) {
                return e.center.equals(this.center) && e.radius === this.radius
            }
        },n.Frustum = function (e, t, i, r, o, a) {
            this.planes = [void 0 !== e ? e : new n.Plane, void 0 !== t ? t : new n.Plane, void 0 !== i ? i : new n.Plane, void 0 !== r ? r : new n.Plane, void 0 !== o ? o : new n.Plane, void 0 !== a ? a : new n.Plane]
        },n.Frustum.prototype = {
            constructor: n.Frustum, set: function (e, t, i, n, r, o) {
                var a = this.planes;
                return a[0].copy(e), a[1].copy(t), a[2].copy(i), a[3].copy(n), a[4].copy(r), a[5].copy(o), this
            }, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                for (var t = this.planes, i = 0; 6 > i; i++)t[i].copy(e.planes[i]);
                return this
            }, setFromMatrix: function (e) {
                var t = this.planes, i = e.elements, n = i[0], r = i[1], o = i[2], a = i[3], s = i[4], l = i[5], h = i[6], c = i[7], u = i[8], d = i[9], p = i[10], f = i[11], g = i[12], m = i[13], v = i[14], A = i[15];
                return t[0].setComponents(a - n, c - s, f - u, A - g).normalize(), t[1].setComponents(a + n, c + s, f + u, A + g).normalize(), t[2].setComponents(a + r, c + l, f + d, A + m).normalize(), t[3].setComponents(a - r, c - l, f - d, A - m).normalize(), t[4].setComponents(a - o, c - h, f - p, A - v).normalize(), t[5].setComponents(a + o, c + h, f + p, A + v).normalize(), this
            }, intersectsObject: function () {
                var e = new n.Sphere;
                return function (t) {
                    var i = t.geometry;
                    return null === i.boundingSphere && i.computeBoundingSphere(), e.copy(i.boundingSphere), e.applyMatrix4(t.matrixWorld), this.intersectsSphere(e)
                }
            }(), intersectsSphere: function (e) {
                for (var t = this.planes, i = e.center, n = -e.radius, r = 0; 6 > r; r++) {
                    var o = t[r].distanceToPoint(i);
                    if (n > o)return !1
                }
                return !0
            }, intersectsBox: function () {
                var e = new n.Vector3, t = new n.Vector3;
                return function (i) {
                    for (var n = this.planes, r = 0; 6 > r; r++) {
                        var o = n[r];
                        e.x = o.normal.x > 0 ? i.min.x : i.max.x, t.x = o.normal.x > 0 ? i.max.x : i.min.x, e.y = o.normal.y > 0 ? i.min.y : i.max.y, t.y = o.normal.y > 0 ? i.max.y : i.min.y, e.z = o.normal.z > 0 ? i.min.z : i.max.z, t.z = o.normal.z > 0 ? i.max.z : i.min.z;
                        var a = o.distanceToPoint(e), s = o.distanceToPoint(t);
                        if (0 > a && 0 > s)return !1
                    }
                    return !0
                }
            }(), containsPoint: function (e) {
                for (var t = this.planes, i = 0; 6 > i; i++)if (t[i].distanceToPoint(e) < 0)return !1;
                return !0
            }
        },n.Plane = function (e, t) {
            this.normal = void 0 !== e ? e : new n.Vector3(1, 0, 0), this.constant = void 0 !== t ? t : 0
        },n.Plane.prototype = {
            constructor: n.Plane, set: function (e, t) {
                return this.normal.copy(e), this.constant = t, this
            }, setComponents: function (e, t, i, n) {
                return this.normal.set(e, t, i), this.constant = n, this
            }, setFromNormalAndCoplanarPoint: function (e, t) {
                return this.normal.copy(e), this.constant = -t.dot(this.normal), this
            }, setFromCoplanarPoints: function () {
                var e = new n.Vector3, t = new n.Vector3;
                return function (i, n, r) {
                    var o = e.subVectors(r, n).cross(t.subVectors(i, n)).normalize();
                    return this.setFromNormalAndCoplanarPoint(o, i), this
                }
            }(), clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                return this.normal.copy(e.normal), this.constant = e.constant, this
            }, normalize: function () {
                var e = 1 / this.normal.length();
                return this.normal.multiplyScalar(e), this.constant *= e, this
            }, negate: function () {
                return this.constant *= -1, this.normal.negate(), this
            }, distanceToPoint: function (e) {
                return this.normal.dot(e) + this.constant
            }, distanceToSphere: function (e) {
                return this.distanceToPoint(e.center) - e.radius
            }, projectPoint: function (e, t) {
                return this.orthoPoint(e, t).sub(e).negate()
            }, orthoPoint: function (e, t) {
                var i = this.distanceToPoint(e), r = t || new n.Vector3;
                return r.copy(this.normal).multiplyScalar(i)
            }, intersectLine: function () {
                var e = new n.Vector3;
                return function (t, i) {
                    var r = i || new n.Vector3, o = t.delta(e), a = this.normal.dot(o);
                    if (0 !== a) {
                        var s = -(t.start.dot(this.normal) + this.constant) / a;
                        if (!(0 > s || s > 1))return r.copy(o).multiplyScalar(s).add(t.start)
                    } else if (0 === this.distanceToPoint(t.start))return r.copy(t.start)
                }
            }(), intersectsLine: function (e) {
                var t = this.distanceToPoint(e.start), i = this.distanceToPoint(e.end);
                return 0 > t && i > 0 || 0 > i && t > 0
            }, intersectsBox: function (e) {
                return e.intersectsPlane(this)
            }, intersectsSphere: function (e) {
                return e.intersectsPlane(this)
            }, coplanarPoint: function (e) {
                var t = e || new n.Vector3;
                return t.copy(this.normal).multiplyScalar(-this.constant)
            }, applyMatrix4: function () {
                var e = new n.Vector3, t = new n.Vector3, i = new n.Matrix3;
                return function (n, r) {
                    var o = r || i.getNormalMatrix(n), a = e.copy(this.normal).applyMatrix3(o), s = this.coplanarPoint(t);
                    return s.applyMatrix4(n), this.setFromNormalAndCoplanarPoint(a, s), this
                }
            }(), translate: function (e) {
                return this.constant = this.constant - e.dot(this.normal), this
            }, equals: function (e) {
                return e.normal.equals(this.normal) && e.constant === this.constant
            }
        },n.Spherical = function (e, t, i) {
            return this.radius = void 0 !== e ? e : 1, this.phi = void 0 !== t ? t : 0, this.theta = void 0 !== i ? i : 0, this
        },n.Spherical.prototype = {
            constructor: n.Spherical, set: function (e, t, i) {
                this.radius = e, this.phi = t, this.theta = i
            }, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                return this.radius.copy(e.radius), this.phi.copy(e.phi), this.theta.copy(e.theta), this
            }, makeSafe: function () {
                var e = 1e-6;
                this.phi = Math.max(e, Math.min(Math.PI - e, this.phi))
            }, setFromVector3: function (e) {
                return this.radius = e.length(), 0 === this.radius ? (this.theta = 0, this.phi = 0) : (this.theta = Math.atan2(e.x, e.z), this.phi = Math.acos(n.Math.clamp(e.y / this.radius, -1, 1))), this
            }
        },n.Math = {
            generateUUID: function () {
                var e, t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), i = new Array(36), n = 0;
                return function () {
                    for (var r = 0; 36 > r; r++)8 === r || 13 === r || 18 === r || 23 === r ? i[r] = "-" : 14 === r ? i[r] = "4" : (2 >= n && (n = 33554432 + 16777216 * Math.random() | 0), e = 15 & n, n >>= 4, i[r] = t[19 === r ? 3 & e | 8 : e]);
                    return i.join("")
                }
            }(), clamp: function (e, t, i) {
                return Math.max(t, Math.min(i, e))
            }, euclideanModulo: function (e, t) {
                return (e % t + t) % t
            }, mapLinear: function (e, t, i, n, r) {
                return n + (e - t) * (r - n) / (i - t)
            }, smoothstep: function (e, t, i) {
                return t >= e ? 0 : e >= i ? 1 : (e = (e - t) / (i - t), e * e * (3 - 2 * e))
            }, smootherstep: function (e, t, i) {
                return t >= e ? 0 : e >= i ? 1 : (e = (e - t) / (i - t), e * e * e * (e * (6 * e - 15) + 10))
            }, random16: function () {
                return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."), Math.random()
            }, randInt: function (e, t) {
                return e + Math.floor(Math.random() * (t - e + 1))
            }, randFloat: function (e, t) {
                return e + Math.random() * (t - e)
            }, randFloatSpread: function (e) {
                return e * (.5 - Math.random())
            }, degToRad: function () {
                var e = Math.PI / 180;
                return function (t) {
                    return t * e
                }
            }(), radToDeg: function () {
                var e = 180 / Math.PI;
                return function (t) {
                    return t * e
                }
            }(), isPowerOfTwo: function (e) {
                return 0 === (e & e - 1) && 0 !== e
            }, nearestPowerOfTwo: function (e) {
                return Math.pow(2, Math.round(Math.log(e) / Math.LN2))
            }, nextPowerOfTwo: function (e) {
                return e--, e |= e >> 1, e |= e >> 2, e |= e >> 4, e |= e >> 8, e |= e >> 16, e++, e
            }
        },n.Spline = function (e) {
            function t(e, t, i, n, r, o, a) {
                var s = .5 * (i - e), l = .5 * (n - t);
                return (2 * (t - i) + s + l) * a + (-3 * (t - i) - 2 * s - l) * o + s * r + t
            }

            this.points = e;
            var i, r, o, a, s, l, h, c, u, d = [], p = {x: 0, y: 0, z: 0};
            this.initFromArray = function (e) {
                this.points = [];
                for (var t = 0; t < e.length; t++)this.points[t] = {x: e[t][0], y: e[t][1], z: e[t][2]}
            }, this.getPoint = function (e) {
                return i = (this.points.length - 1) * e, r = Math.floor(i), o = i - r, d[0] = 0 === r ? r : r - 1, d[1] = r, d[2] = r > this.points.length - 2 ? this.points.length - 1 : r + 1, d[3] = r > this.points.length - 3 ? this.points.length - 1 : r + 2, l = this.points[d[0]], h = this.points[d[1]], c = this.points[d[2]], u = this.points[d[3]], a = o * o, s = o * a, p.x = t(l.x, h.x, c.x, u.x, o, a, s), p.y = t(l.y, h.y, c.y, u.y, o, a, s), p.z = t(l.z, h.z, c.z, u.z, o, a, s), p
            }, this.getControlPointsArray = function () {
                var e, t, i = this.points.length, n = [];
                for (e = 0; i > e; e++)t = this.points[e], n[e] = [t.x, t.y, t.z];
                return n
            }, this.getLength = function (e) {
                var t, i, r, o, a = 0, s = 0, l = 0, h = new n.Vector3, c = new n.Vector3, u = [], d = 0;
                for (u[0] = 0, e || (e = 100), r = this.points.length * e, h.copy(this.points[0]), t = 1; r > t; t++)i = t / r, o = this.getPoint(i), c.copy(o), d += c.distanceTo(h), h.copy(o), a = (this.points.length - 1) * i, s = Math.floor(a), s !== l && (u[s] = d, l = s);
                return u[u.length] = d, {chunks: u, total: d}
            }, this.reparametrizeByArcLength = function (e) {
                var t, i, r, o, a, s, l, h, c = [], u = new n.Vector3, d = this.getLength();
                for (c.push(u.copy(this.points[0]).clone()), t = 1; t < this.points.length; t++) {
                    for (s = d.chunks[t] - d.chunks[t - 1], l = Math.ceil(e * s / d.total), o = (t - 1) / (this.points.length - 1), a = t / (this.points.length - 1), i = 1; l - 1 > i; i++)r = o + i * (1 / l) * (a - o), h = this.getPoint(r), c.push(u.copy(h).clone());
                    c.push(u.copy(this.points[t]).clone())
                }
                this.points = c
            }
        },n.Triangle = function (e, t, i) {
            this.a = void 0 !== e ? e : new n.Vector3, this.b = void 0 !== t ? t : new n.Vector3, this.c = void 0 !== i ? i : new n.Vector3
        },n.Triangle.normal = function () {
            var e = new n.Vector3;
            return function (t, i, r, o) {
                var a = o || new n.Vector3;
                a.subVectors(r, i), e.subVectors(t, i), a.cross(e);
                var s = a.lengthSq();
                return s > 0 ? a.multiplyScalar(1 / Math.sqrt(s)) : a.set(0, 0, 0)
            }
        }(),n.Triangle.barycoordFromPoint = function () {
            var e = new n.Vector3, t = new n.Vector3, i = new n.Vector3;
            return function (r, o, a, s, l) {
                e.subVectors(s, o), t.subVectors(a, o), i.subVectors(r, o);
                var h = e.dot(e), c = e.dot(t), u = e.dot(i), d = t.dot(t), p = t.dot(i), f = h * d - c * c, g = l || new n.Vector3;
                if (0 === f)return g.set(-2, -1, -1);
                var m = 1 / f, v = (d * u - c * p) * m, A = (h * p - c * u) * m;
                return g.set(1 - v - A, A, v)
            }
        }(),n.Triangle.containsPoint = function () {
            var e = new n.Vector3;
            return function (t, i, r, o) {
                var a = n.Triangle.barycoordFromPoint(t, i, r, o, e);
                return a.x >= 0 && a.y >= 0 && a.x + a.y <= 1
            }
        }(),n.Triangle.prototype = {
            constructor: n.Triangle, set: function (e, t, i) {
                return this.a.copy(e), this.b.copy(t), this.c.copy(i), this
            }, setFromPointsAndIndices: function (e, t, i, n) {
                return this.a.copy(e[t]), this.b.copy(e[i]), this.c.copy(e[n]), this
            }, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                return this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this
            }, area: function () {
                var e = new n.Vector3, t = new n.Vector3;
                return function () {
                    return e.subVectors(this.c, this.b), t.subVectors(this.a, this.b), .5 * e.cross(t).length()
                }
            }(), midpoint: function (e) {
                var t = e || new n.Vector3;
                return t.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
            }, normal: function (e) {
                return n.Triangle.normal(this.a, this.b, this.c, e)
            }, plane: function (e) {
                var t = e || new n.Plane;
                return t.setFromCoplanarPoints(this.a, this.b, this.c)
            }, barycoordFromPoint: function (e, t) {
                return n.Triangle.barycoordFromPoint(e, this.a, this.b, this.c, t)
            }, containsPoint: function (e) {
                return n.Triangle.containsPoint(e, this.a, this.b, this.c)
            }, equals: function (e) {
                return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c)
            }
        },n.Interpolant = function (e, t, i, n) {
            this.parameterPositions = e, this._cachedIndex = 0, this.resultBuffer = void 0 !== n ? n : new t.constructor(i), this.sampleValues = t, this.valueSize = i
        },n.Interpolant.prototype = {
            constructor: n.Interpolant, evaluate: function (e) {
                var t = this.parameterPositions, i = this._cachedIndex, n = t[i], r = t[i - 1];
                e:{
                    t:{
                        var o;
                        i:{
                            n:if (!(n > e)) {
                                for (var a = i + 2; ;) {
                                    if (void 0 === n) {
                                        if (r > e)break n;
                                        return i = t.length, this._cachedIndex = i, this.afterEnd_(i - 1, e, r)
                                    }
                                    if (i === a)break;
                                    if (r = n, n = t[++i], n > e)break t
                                }
                                o = t.length;
                                break i
                            }
                            {
                                if (e >= r)break e;
                                var s = t[1];
                                s > e && (i = 2, r = s);
                                for (var a = i - 2; ;) {
                                    if (void 0 === r)return this._cachedIndex = 0, this.beforeStart_(0, e, n);
                                    if (i === a)break;
                                    if (n = r, r = t[--i - 1], e >= r)break t
                                }
                                o = i, i = 0
                            }
                        }
                        for (; o > i;) {
                            var l = i + o >>> 1;
                            e < t[l] ? o = l : i = l + 1
                        }
                        if (n = t[i], r = t[i - 1], void 0 === r)return this._cachedIndex = 0, this.beforeStart_(0, e, n);
                        if (void 0 === n)return i = t.length, this._cachedIndex = i, this.afterEnd_(i - 1, r, e)
                    }
                    this._cachedIndex = i, this.intervalChanged_(i, r, n)
                }
                return this.interpolate_(i, r, e, n)
            }, settings: null, DefaultSettings_: {}, getSettings_: function () {
                return this.settings || this.DefaultSettings_
            }, copySampleValue_: function (e) {
                for (var t = this.resultBuffer, i = this.sampleValues, n = this.valueSize, r = e * n, o = 0; o !== n; ++o)t[o] = i[r + o];
                return t
            }, interpolate_: function (e, t, i, n) {
                throw new Error("call to abstract method")
            }, intervalChanged_: function (e, t, i) {
            }
        },Object.assign(n.Interpolant.prototype, {
            beforeStart_: n.Interpolant.prototype.copySampleValue_,
            afterEnd_: n.Interpolant.prototype.copySampleValue_
        }),n.CubicInterpolant = function (e, t, i, r) {
            n.Interpolant.call(this, e, t, i, r), this._weightPrev = -0, this._offsetPrev = -0, this._weightNext = -0, this._offsetNext = -0
        },n.CubicInterpolant.prototype = Object.assign(Object.create(n.Interpolant.prototype), {
            constructor: n.CubicInterpolant,
            DefaultSettings_: {endingStart: n.ZeroCurvatureEnding, endingEnd: n.ZeroCurvatureEnding},
            intervalChanged_: function (e, t, i) {
                var r = this.parameterPositions, o = e - 2, a = e + 1, s = r[o], l = r[a];
                if (void 0 === s)switch (this.getSettings_().endingStart) {
                    case n.ZeroSlopeEnding:
                        o = e, s = 2 * t - i;
                        break;
                    case n.WrapAroundEnding:
                        o = r.length - 2, s = t + r[o] - r[o + 1];
                        break;
                    default:
                        o = e, s = i
                }
                if (void 0 === l)switch (this.getSettings_().endingEnd) {
                    case n.ZeroSlopeEnding:
                        a = e, l = 2 * i - t;
                        break;
                    case n.WrapAroundEnding:
                        a = 1, l = i + r[1] - r[0];
                        break;
                    default:
                        a = e - 1, l = t
                }
                var h = .5 * (i - t), c = this.valueSize;
                this._weightPrev = h / (t - s), this._weightNext = h / (l - i), this._offsetPrev = o * c, this._offsetNext = a * c
            },
            interpolate_: function (e, t, i, n) {
                for (var r = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = e * a, l = s - a, h = this._offsetPrev, c = this._offsetNext, u = this._weightPrev, d = this._weightNext, p = (i - t) / (n - t), f = p * p, g = f * p, m = -u * g + 2 * u * f - u * p, v = (1 + u) * g + (-1.5 - 2 * u) * f + (-.5 + u) * p + 1, A = (-1 - d) * g + (1.5 + d) * f + .5 * p, y = d * g - d * f, C = 0; C !== a; ++C)r[C] = m * o[h + C] + v * o[l + C] + A * o[s + C] + y * o[c + C];
                return r
            }
        }),n.DiscreteInterpolant = function (e, t, i, r) {
            n.Interpolant.call(this, e, t, i, r)
        },n.DiscreteInterpolant.prototype = Object.assign(Object.create(n.Interpolant.prototype), {
            constructor: n.DiscreteInterpolant,
            interpolate_: function (e, t, i, n) {
                return this.copySampleValue_(e - 1)
            }
        }),n.LinearInterpolant = function (e, t, i, r) {
            n.Interpolant.call(this, e, t, i, r)
        },n.LinearInterpolant.prototype = Object.assign(Object.create(n.Interpolant.prototype), {
            constructor: n.LinearInterpolant,
            interpolate_: function (e, t, i, n) {
                for (var r = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = e * a, l = s - a, h = (i - t) / (n - t), c = 1 - h, u = 0; u !== a; ++u)r[u] = o[l + u] * c + o[s + u] * h;
                return r
            }
        }),n.QuaternionLinearInterpolant = function (e, t, i, r) {
            n.Interpolant.call(this, e, t, i, r)
        },n.QuaternionLinearInterpolant.prototype = Object.assign(Object.create(n.Interpolant.prototype), {
            constructor: n.QuaternionLinearInterpolant,
            interpolate_: function (e, t, i, r) {
                for (var o = this.resultBuffer, a = this.sampleValues, s = this.valueSize, l = e * s, h = (i - t) / (r - t), c = l + s; l !== c; l += 4)n.Quaternion.slerpFlat(o, 0, a, l - s, a, l, h);
                return o
            }
        }),n.Clock = function (e) {
            this.autoStart = void 0 !== e ? e : !0, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, this.running = !1
        },n.Clock.prototype = {
            constructor: n.Clock, start: function () {
                this.startTime = performance.now(), this.oldTime = this.startTime, this.running = !0
            }, stop: function () {
                this.getElapsedTime(), this.running = !1
            }, getElapsedTime: function () {
                return this.getDelta(), this.elapsedTime
            }, getDelta: function () {
                var e = 0;
                if (this.autoStart && !this.running && this.start(), this.running) {
                    var t = performance.now();
                    e = .001 * (t - this.oldTime), this.oldTime = t, this.elapsedTime += e
                }
                return e
            }
        },n.EventDispatcher = function () {
        },n.EventDispatcher.prototype = {
            constructor: n.EventDispatcher, apply: function (e) {
                e.addEventListener = n.EventDispatcher.prototype.addEventListener, e.hasEventListener = n.EventDispatcher.prototype.hasEventListener, e.removeEventListener = n.EventDispatcher.prototype.removeEventListener, e.dispatchEvent = n.EventDispatcher.prototype.dispatchEvent
            }, addEventListener: function (e, t) {
                void 0 === this._listeners && (this._listeners = {});
                var i = this._listeners;
                void 0 === i[e] && (i[e] = []), -1 === i[e].indexOf(t) && i[e].push(t)
            }, hasEventListener: function (e, t) {
                if (void 0 === this._listeners)return !1;
                var i = this._listeners;
                return void 0 !== i[e] && -1 !== i[e].indexOf(t) ? !0 : !1
            }, removeEventListener: function (e, t) {
                if (void 0 !== this._listeners) {
                    var i = this._listeners, n = i[e];
                    if (void 0 !== n) {
                        var r = n.indexOf(t);
                        -1 !== r && n.splice(r, 1)
                    }
                }
            }, dispatchEvent: function (e) {
                if (void 0 !== this._listeners) {
                    var t = this._listeners, i = t[e.type];
                    if (void 0 !== i) {
                        e.target = this;
                        for (var n = [], r = i.length, o = 0; r > o; o++)n[o] = i[o];
                        for (var o = 0; r > o; o++)n[o].call(this, e)
                    }
                }
            }
        },n.Layers = function () {
            this.mask = 1
        },n.Layers.prototype = {
            constructor: n.Layers, set: function (e) {
                this.mask = 1 << e
            }, enable: function (e) {
                this.mask |= 1 << e
            }, toggle: function (e) {
                this.mask ^= 1 << e
            }, disable: function (e) {
                this.mask &= ~(1 << e)
            }, test: function (e) {
                return 0 !== (this.mask & e.mask)
            }
        },function (e) {
            function t(e, t) {
                return e.distance - t.distance
            }

            function i(e, t, n, r) {
                if (e.visible !== !1 && (e.raycast(t, n), r === !0))for (var o = e.children, a = 0, s = o.length; s > a; a++)i(o[a], t, n, !0)
            }

            e.Raycaster = function (t, i, n, r) {
                this.ray = new e.Ray(t, i), this.near = n || 0, this.far = r || 1 / 0, this.params = {
                    Mesh: {},
                    Line: {},
                    LOD: {},
                    Points: {threshold: 1},
                    Sprite: {}
                }, Object.defineProperties(this.params, {
                    PointCloud: {
                        get: function () {
                            return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."), this.Points
                        }
                    }
                })
            }, e.Raycaster.prototype = {
                constructor: e.Raycaster, linePrecision: 1, set: function (e, t) {
                    this.ray.set(e, t)
                }, setFromCamera: function (t, i) {
                    i instanceof e.PerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(i.matrixWorld), this.ray.direction.set(t.x, t.y, .5).unproject(i).sub(this.ray.origin).normalize()) : i instanceof e.OrthographicCamera ? (this.ray.origin.set(t.x, t.y, -1).unproject(i), this.ray.direction.set(0, 0, -1).transformDirection(i.matrixWorld)) : console.error("THREE.Raycaster: Unsupported camera type.")
                }, intersectObject: function (e, n) {
                    var r = [];
                    return i(e, this, r, n), r.sort(t), r
                }, intersectObjects: function (e, n) {
                    var r = [];
                    if (Array.isArray(e) === !1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."), r;
                    for (var o = 0, a = e.length; a > o; o++)i(e[o], this, r, n);
                    return r.sort(t), r
                }
            }
        }(n),n.Object3D = function () {
            function e() {
                o.setFromEuler(r, !1)
            }

            function t() {
                r.setFromQuaternion(o, void 0, !1)
            }

            Object.defineProperty(this, "id", {value: n.Object3DIdCount++}), this.uuid = n.Math.generateUUID(), this.name = "", this.type = "Object3D", this.parent = null, this.children = [], this.up = n.Object3D.DefaultUp.clone();
            var i = new n.Vector3, r = new n.Euler, o = new n.Quaternion, a = new n.Vector3(1, 1, 1);
            r.onChange(e), o.onChange(t), Object.defineProperties(this, {
                position: {enumerable: !0, value: i},
                rotation: {enumerable: !0, value: r},
                quaternion: {enumerable: !0, value: o},
                scale: {enumerable: !0, value: a},
                modelViewMatrix: {value: new n.Matrix4},
                normalMatrix: {value: new n.Matrix3}
            }), this.rotationAutoUpdate = !0, this.matrix = new n.Matrix4, this.matrixWorld = new n.Matrix4, this.matrixAutoUpdate = n.Object3D.DefaultMatrixAutoUpdate, this.matrixWorldNeedsUpdate = !1, this.layers = new n.Layers, this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, this.frustumCulled = !0, this.renderOrder = 0, this.userData = {}
        },n.Object3D.DefaultUp = new n.Vector3(0, 1, 0),n.Object3D.DefaultMatrixAutoUpdate = !0,n.Object3D.prototype = {
            constructor: n.Object3D, applyMatrix: function (e) {
                this.matrix.multiplyMatrices(e, this.matrix), this.matrix.decompose(this.position, this.quaternion, this.scale)
            }, setRotationFromAxisAngle: function (e, t) {
                this.quaternion.setFromAxisAngle(e, t)
            }, setRotationFromEuler: function (e) {
                this.quaternion.setFromEuler(e, !0)
            }, setRotationFromMatrix: function (e) {
                this.quaternion.setFromRotationMatrix(e)
            }, setRotationFromQuaternion: function (e) {
                this.quaternion.copy(e)
            }, rotateOnAxis: function () {
                var e = new n.Quaternion;
                return function (t, i) {
                    return e.setFromAxisAngle(t, i), this.quaternion.multiply(e), this
                }
            }(), rotateX: function () {
                var e = new n.Vector3(1, 0, 0);
                return function (t) {
                    return this.rotateOnAxis(e, t)
                }
            }(), rotateY: function () {
                var e = new n.Vector3(0, 1, 0);
                return function (t) {
                    return this.rotateOnAxis(e, t)
                }
            }(), rotateZ: function () {
                var e = new n.Vector3(0, 0, 1);
                return function (t) {
                    return this.rotateOnAxis(e, t)
                }
            }(), translateOnAxis: function () {
                var e = new n.Vector3;
                return function (t, i) {
                    return e.copy(t).applyQuaternion(this.quaternion), this.position.add(e.multiplyScalar(i)), this
                }
            }(), translateX: function () {
                var e = new n.Vector3(1, 0, 0);
                return function (t) {
                    return this.translateOnAxis(e, t)
                }
            }(), translateY: function () {
                var e = new n.Vector3(0, 1, 0);
                return function (t) {
                    return this.translateOnAxis(e, t)
                }
            }(), translateZ: function () {
                var e = new n.Vector3(0, 0, 1);
                return function (t) {
                    return this.translateOnAxis(e, t)
                }
            }(), localToWorld: function (e) {
                return e.applyMatrix4(this.matrixWorld)
            }, worldToLocal: function () {
                var e = new n.Matrix4;
                return function (t) {
                    return t.applyMatrix4(e.getInverse(this.matrixWorld))
                }
            }(), lookAt: function () {
                var e = new n.Matrix4;
                return function (t) {
                    e.lookAt(t, this.position, this.up), this.quaternion.setFromRotationMatrix(e)
                }
            }(), add: function (e) {
                if (arguments.length > 1) {
                    for (var t = 0; t < arguments.length; t++)this.add(arguments[t]);
                    return this
                }
                return e === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e), this) : (e instanceof n.Object3D ? (null !== e.parent && e.parent.remove(e), e.parent = this, e.dispatchEvent({type: "added"}), this.children.push(e)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e), this)
            }, remove: function (e) {
                if (arguments.length > 1)for (var t = 0; t < arguments.length; t++)this.remove(arguments[t]);
                var i = this.children.indexOf(e);
                -1 !== i && (e.parent = null, e.dispatchEvent({type: "removed"}), this.children.splice(i, 1))
            }, getObjectById: function (e) {
                return this.getObjectByProperty("id", e)
            }, getObjectByName: function (e) {
                return this.getObjectByProperty("name", e)
            }, getObjectByProperty: function (e, t) {
                if (this[e] === t)return this;
                for (var i = 0, n = this.children.length; n > i; i++) {
                    var r = this.children[i], o = r.getObjectByProperty(e, t);
                    if (void 0 !== o)return o
                }
            }, getWorldPosition: function (e) {
                var t = e || new n.Vector3;
                return this.updateMatrixWorld(!0), t.setFromMatrixPosition(this.matrixWorld)
            }, getWorldQuaternion: function () {
                var e = new n.Vector3, t = new n.Vector3;
                return function (i) {
                    var r = i || new n.Quaternion;
                    return this.updateMatrixWorld(!0), this.matrixWorld.decompose(e, r, t), r
                }
            }(), getWorldRotation: function () {
                var e = new n.Quaternion;
                return function (t) {
                    var i = t || new n.Euler;
                    return this.getWorldQuaternion(e), i.setFromQuaternion(e, this.rotation.order, !1)
                }
            }(), getWorldScale: function () {
                var e = new n.Vector3, t = new n.Quaternion;
                return function (i) {
                    var r = i || new n.Vector3;
                    return this.updateMatrixWorld(!0), this.matrixWorld.decompose(e, t, r), r
                }
            }(), getWorldDirection: function () {
                var e = new n.Quaternion;
                return function (t) {
                    var i = t || new n.Vector3;
                    return this.getWorldQuaternion(e), i.set(0, 0, 1).applyQuaternion(e)
                }
            }(), raycast: function () {
            }, traverse: function (e) {
                e(this);
                for (var t = this.children, i = 0, n = t.length; n > i; i++)t[i].traverse(e)
            }, traverseVisible: function (e) {
                if (this.visible !== !1) {
                    e(this);
                    for (var t = this.children, i = 0, n = t.length; n > i; i++)t[i].traverseVisible(e)
                }
            }, traverseAncestors: function (e) {
                var t = this.parent;
                null !== t && (e(t), t.traverseAncestors(e))
            }, updateMatrix: function () {
                this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0
            }, updateMatrixWorld: function (e) {
                this.matrixAutoUpdate === !0 && this.updateMatrix(), (this.matrixWorldNeedsUpdate === !0 || e === !0) && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0);
                for (var t = 0, i = this.children.length; i > t; t++)this.children[t].updateMatrixWorld(e)
            }, toJSON: function (e) {
                function t(e) {
                    var t = [];
                    for (var i in e) {
                        var n = e[i];
                        delete n.metadata, t.push(n)
                    }
                    return t
                }

                var i = void 0 === e, n = {};
                i && (e = {geometries: {}, materials: {}, textures: {}, images: {}}, n.metadata = {
                    version: 4.4,
                    type: "Object",
                    generator: "Object3D.toJSON"
                });
                var r = {};
                if (r.uuid = this.uuid, r.type = this.type, "" !== this.name && (r.name = this.name), "{}" !== JSON.stringify(this.userData) && (r.userData = this.userData), this.castShadow === !0 && (r.castShadow = !0), this.receiveShadow === !0 && (r.receiveShadow = !0), this.visible === !1 && (r.visible = !1), r.matrix = this.matrix.toArray(), void 0 !== this.geometry && (void 0 === e.geometries[this.geometry.uuid] && (e.geometries[this.geometry.uuid] = this.geometry.toJSON(e)), r.geometry = this.geometry.uuid), void 0 !== this.material && (void 0 === e.materials[this.material.uuid] && (e.materials[this.material.uuid] = this.material.toJSON(e)), r.material = this.material.uuid), this.children.length > 0) {
                    r.children = [];
                    for (var o = 0; o < this.children.length; o++)r.children.push(this.children[o].toJSON(e).object)
                }
                if (i) {
                    var a = t(e.geometries), s = t(e.materials), l = t(e.textures), h = t(e.images);
                    a.length > 0 && (n.geometries = a), s.length > 0 && (n.materials = s), l.length > 0 && (n.textures = l), h.length > 0 && (n.images = h)
                }
                return n.object = r, n
            }, clone: function (e) {
                return (new this.constructor).copy(this, e)
            }, copy: function (e, t) {
                if (void 0 === t && (t = !0), this.name = e.name, this.up.copy(e.up), this.position.copy(e.position), this.quaternion.copy(e.quaternion), this.scale.copy(e.scale), this.rotationAutoUpdate = e.rotationAutoUpdate, this.matrix.copy(e.matrix), this.matrixWorld.copy(e.matrixWorld), this.matrixAutoUpdate = e.matrixAutoUpdate, this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate, this.visible = e.visible, this.castShadow = e.castShadow, this.receiveShadow = e.receiveShadow, this.frustumCulled = e.frustumCulled, this.renderOrder = e.renderOrder, this.userData = JSON.parse(JSON.stringify(e.userData)), t === !0)for (var i = 0; i < e.children.length; i++) {
                    var n = e.children[i];
                    this.add(n.clone())
                }
                return this
            }
        },n.EventDispatcher.prototype.apply(n.Object3D.prototype),n.Object3DIdCount = 0,n.Face3 = function (e, t, i, r, o, a) {
            this.a = e, this.b = t, this.c = i, this.normal = r instanceof n.Vector3 ? r : new n.Vector3, this.vertexNormals = Array.isArray(r) ? r : [], this.color = o instanceof n.Color ? o : new n.Color, this.vertexColors = Array.isArray(o) ? o : [], this.materialIndex = void 0 !== a ? a : 0
        },n.Face3.prototype = {
            constructor: n.Face3, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                this.a = e.a, this.b = e.b, this.c = e.c, this.normal.copy(e.normal), this.color.copy(e.color), this.materialIndex = e.materialIndex;
                for (var t = 0, i = e.vertexNormals.length; i > t; t++)this.vertexNormals[t] = e.vertexNormals[t].clone();
                for (var t = 0, i = e.vertexColors.length; i > t; t++)this.vertexColors[t] = e.vertexColors[t].clone();
                return this
            }
        },n.BufferAttribute = function (e, t) {
            this.uuid = n.Math.generateUUID(), this.array = e, this.itemSize = t, this.dynamic = !1, this.updateRange = {
                offset: 0,
                count: -1
            }, this.version = 0
        },n.BufferAttribute.prototype = {
            constructor: n.BufferAttribute, get count() {
                return this.array.length / this.itemSize
            }, set needsUpdate(e) {
                e === !0 && this.version++
            }, setDynamic: function (e) {
                return this.dynamic = e, this
            }, copy: function (e) {
                return this.array = new e.array.constructor(e.array), this.itemSize = e.itemSize, this.dynamic = e.dynamic, this
            }, copyAt: function (e, t, i) {
                e *= this.itemSize, i *= t.itemSize;
                for (var n = 0, r = this.itemSize; r > n; n++)this.array[e + n] = t.array[i + n];
                return this
            }, copyArray: function (e) {
                return this.array.set(e), this
            }, copyColorsArray: function (e) {
                for (var t = this.array, i = 0, r = 0, o = e.length; o > r; r++) {
                    var a = e[r];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", r), a = new n.Color), t[i++] = a.r, t[i++] = a.g, t[i++] = a.b
                }
                return this
            }, copyIndicesArray: function (e) {
                for (var t = this.array, i = 0, n = 0, r = e.length; r > n; n++) {
                    var o = e[n];
                    t[i++] = o.a, t[i++] = o.b, t[i++] = o.c
                }
                return this
            }, copyVector2sArray: function (e) {
                for (var t = this.array, i = 0, r = 0, o = e.length; o > r; r++) {
                    var a = e[r];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", r), a = new n.Vector2), t[i++] = a.x, t[i++] = a.y
                }
                return this
            }, copyVector3sArray: function (e) {
                for (var t = this.array, i = 0, r = 0, o = e.length; o > r; r++) {
                    var a = e[r];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", r), a = new n.Vector3), t[i++] = a.x, t[i++] = a.y, t[i++] = a.z
                }
                return this
            }, copyVector4sArray: function (e) {
                for (var t = this.array, i = 0, r = 0, o = e.length; o > r; r++) {
                    var a = e[r];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", r), a = new n.Vector4), t[i++] = a.x, t[i++] = a.y, t[i++] = a.z, t[i++] = a.w
                }
                return this
            }, set: function (e, t) {
                return void 0 === t && (t = 0), this.array.set(e, t), this
            }, getX: function (e) {
                return this.array[e * this.itemSize]
            }, setX: function (e, t) {
                return this.array[e * this.itemSize] = t, this
            }, getY: function (e) {
                return this.array[e * this.itemSize + 1]
            }, setY: function (e, t) {
                return this.array[e * this.itemSize + 1] = t, this
            }, getZ: function (e) {
                return this.array[e * this.itemSize + 2]
            }, setZ: function (e, t) {
                return this.array[e * this.itemSize + 2] = t, this
            }, getW: function (e) {
                return this.array[e * this.itemSize + 3]
            }, setW: function (e, t) {
                return this.array[e * this.itemSize + 3] = t, this
            }, setXY: function (e, t, i) {
                return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = i, this
            }, setXYZ: function (e, t, i, n) {
                return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = i, this.array[e + 2] = n, this
            }, setXYZW: function (e, t, i, n, r) {
                return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = i, this.array[e + 2] = n, this.array[e + 3] = r, this
            }, clone: function () {
                return (new this.constructor).copy(this)
            }
        },n.Int8Attribute = function (e, t) {
            return new n.BufferAttribute(new Int8Array(e), t)
        },n.Uint8Attribute = function (e, t) {
            return new n.BufferAttribute(new Uint8Array(e), t)
        },n.Uint8ClampedAttribute = function (e, t) {
            return new n.BufferAttribute(new Uint8ClampedArray(e), t)
        },n.Int16Attribute = function (e, t) {
            return new n.BufferAttribute(new Int16Array(e), t)
        },n.Uint16Attribute = function (e, t) {
            return new n.BufferAttribute(new Uint16Array(e), t)
        },n.Int32Attribute = function (e, t) {
            return new n.BufferAttribute(new Int32Array(e), t)
        },n.Uint32Attribute = function (e, t) {
            return new n.BufferAttribute(new Uint32Array(e), t)
        },n.Float32Attribute = function (e, t) {
            return new n.BufferAttribute(new Float32Array(e), t)
        },n.Float64Attribute = function (e, t) {
            return new n.BufferAttribute(new Float64Array(e), t)
        },n.DynamicBufferAttribute = function (e, t) {
            return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."), new n.BufferAttribute(e, t).setDynamic(!0)
        },n.InstancedBufferAttribute = function (e, t, i) {
            n.BufferAttribute.call(this, e, t), this.meshPerAttribute = i || 1
        },n.InstancedBufferAttribute.prototype = Object.create(n.BufferAttribute.prototype),n.InstancedBufferAttribute.prototype.constructor = n.InstancedBufferAttribute,n.InstancedBufferAttribute.prototype.copy = function (e) {
            return n.BufferAttribute.prototype.copy.call(this, e), this.meshPerAttribute = e.meshPerAttribute, this
        },n.InterleavedBuffer = function (e, t) {
            this.uuid = n.Math.generateUUID(), this.array = e, this.stride = t, this.dynamic = !1, this.updateRange = {
                offset: 0,
                count: -1
            }, this.version = 0
        },n.InterleavedBuffer.prototype = {
            constructor: n.InterleavedBuffer, get length() {
                return this.array.length
            }, get count() {
                return this.array.length / this.stride
            }, set needsUpdate(e) {
                e === !0 && this.version++
            }, setDynamic: function (e) {
                return this.dynamic = e, this
            }, copy: function (e) {
                return this.array = new e.array.constructor(e.array), this.stride = e.stride, this.dynamic = e.dynamic, this
            }, copyAt: function (e, t, i) {
                e *= this.stride, i *= t.stride;
                for (var n = 0, r = this.stride; r > n; n++)this.array[e + n] = t.array[i + n];
                return this
            }, set: function (e, t) {
                return void 0 === t && (t = 0), this.array.set(e, t), this
            }, clone: function () {
                return (new this.constructor).copy(this)
            }
        },n.InstancedInterleavedBuffer = function (e, t, i) {
            n.InterleavedBuffer.call(this, e, t), this.meshPerAttribute = i || 1
        },n.InstancedInterleavedBuffer.prototype = Object.create(n.InterleavedBuffer.prototype),n.InstancedInterleavedBuffer.prototype.constructor = n.InstancedInterleavedBuffer,n.InstancedInterleavedBuffer.prototype.copy = function (e) {
            return n.InterleavedBuffer.prototype.copy.call(this, e), this.meshPerAttribute = e.meshPerAttribute, this
        },n.InterleavedBufferAttribute = function (e, t, i) {
            this.uuid = n.Math.generateUUID(), this.data = e, this.itemSize = t, this.offset = i
        },n.InterleavedBufferAttribute.prototype = {
            constructor: n.InterleavedBufferAttribute, get length() {
                return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."), this.array.length
            }, get count() {
                return this.data.count
            }, setX: function (e, t) {
                return this.data.array[e * this.data.stride + this.offset] = t, this
            }, setY: function (e, t) {
                return this.data.array[e * this.data.stride + this.offset + 1] = t, this
            }, setZ: function (e, t) {
                return this.data.array[e * this.data.stride + this.offset + 2] = t, this
            }, setW: function (e, t) {
                return this.data.array[e * this.data.stride + this.offset + 3] = t, this
            }, getX: function (e) {
                return this.data.array[e * this.data.stride + this.offset]
            }, getY: function (e) {
                return this.data.array[e * this.data.stride + this.offset + 1]
            }, getZ: function (e) {
                return this.data.array[e * this.data.stride + this.offset + 2]
            }, getW: function (e) {
                return this.data.array[e * this.data.stride + this.offset + 3]
            }, setXY: function (e, t, i) {
                return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = i, this
            }, setXYZ: function (e, t, i, n) {
                return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = i, this.data.array[e + 2] = n, this
            }, setXYZW: function (e, t, i, n, r) {
                return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = i, this.data.array[e + 2] = n, this.data.array[e + 3] = r, this
            }
        },n.Geometry = function () {
            Object.defineProperty(this, "id", {value: n.GeometryIdCount++}), this.uuid = n.Math.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [[]], this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.verticesNeedUpdate = !1, this.elementsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1
        },n.Geometry.prototype = {
            constructor: n.Geometry, applyMatrix: function (e) {
                for (var t = (new n.Matrix3).getNormalMatrix(e), i = 0, r = this.vertices.length; r > i; i++) {
                    var o = this.vertices[i];
                    o.applyMatrix4(e)
                }
                for (var i = 0, r = this.faces.length; r > i; i++) {
                    var a = this.faces[i];
                    a.normal.applyMatrix3(t).normalize();
                    for (var s = 0, l = a.vertexNormals.length; l > s; s++)a.vertexNormals[s].applyMatrix3(t).normalize()
                }
                return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this.verticesNeedUpdate = !0, this.normalsNeedUpdate = !0, this
            }, rotateX: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Matrix4), e.makeRotationX(t), this.applyMatrix(e), this
                }
            }(), rotateY: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Matrix4), e.makeRotationY(t), this.applyMatrix(e), this
                }
            }(), rotateZ: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Matrix4), e.makeRotationZ(t), this.applyMatrix(e), this
                }
            }(), translate: function () {
                var e;
                return function (t, i, r) {
                    return void 0 === e && (e = new n.Matrix4), e.makeTranslation(t, i, r), this.applyMatrix(e), this
                }
            }(), scale: function () {
                var e;
                return function (t, i, r) {
                    return void 0 === e && (e = new n.Matrix4), e.makeScale(t, i, r), this.applyMatrix(e), this
                }
            }(), lookAt: function () {
                var e;
                return function (t) {
                    void 0 === e && (e = new n.Object3D), e.lookAt(t), e.updateMatrix(), this.applyMatrix(e.matrix)
                }
            }(), fromBufferGeometry: function (e) {
                function t(e, t, r, o) {
                    var a = void 0 !== s ? [u[e].clone(), u[t].clone(), u[r].clone()] : [], f = void 0 !== l ? [i.colors[e].clone(), i.colors[t].clone(), i.colors[r].clone()] : [], g = new n.Face3(e, t, r, a, f, o);
                    i.faces.push(g), void 0 !== h && i.faceVertexUvs[0].push([d[e].clone(), d[t].clone(), d[r].clone()]), void 0 !== c && i.faceVertexUvs[1].push([p[e].clone(), p[t].clone(), p[r].clone()])
                }

                var i = this, r = null !== e.index ? e.index.array : void 0, o = e.attributes, a = o.position.array, s = void 0 !== o.normal ? o.normal.array : void 0, l = void 0 !== o.color ? o.color.array : void 0, h = void 0 !== o.uv ? o.uv.array : void 0, c = void 0 !== o.uv2 ? o.uv2.array : void 0;
                void 0 !== c && (this.faceVertexUvs[1] = []);
                for (var u = [], d = [], p = [], f = 0, g = 0; f < a.length; f += 3, g += 2)i.vertices.push(new n.Vector3(a[f], a[f + 1], a[f + 2])), void 0 !== s && u.push(new n.Vector3(s[f], s[f + 1], s[f + 2])), void 0 !== l && i.colors.push(new n.Color(l[f], l[f + 1], l[f + 2])), void 0 !== h && d.push(new n.Vector2(h[g], h[g + 1])), void 0 !== c && p.push(new n.Vector2(c[g], c[g + 1]));
                if (void 0 !== r) {
                    var m = e.groups;
                    if (m.length > 0)for (var f = 0; f < m.length; f++)for (var v = m[f], A = v.start, y = v.count, g = A, C = A + y; C > g; g += 3)t(r[g], r[g + 1], r[g + 2], v.materialIndex); else for (var f = 0; f < r.length; f += 3)t(r[f], r[f + 1], r[f + 2])
                } else for (var f = 0; f < a.length / 3; f += 3)t(f, f + 1, f + 2);
                return this.computeFaceNormals(), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), this
            }, center: function () {
                this.computeBoundingBox();
                var e = this.boundingBox.center().negate();
                return this.translate(e.x, e.y, e.z), e
            }, normalize: function () {
                this.computeBoundingSphere();
                var e = this.boundingSphere.center, t = this.boundingSphere.radius, i = 0 === t ? 1 : 1 / t, r = new n.Matrix4;
                return r.set(i, 0, 0, -i * e.x, 0, i, 0, -i * e.y, 0, 0, i, -i * e.z, 0, 0, 0, 1), this.applyMatrix(r), this
            }, computeFaceNormals: function () {
                for (var e = new n.Vector3, t = new n.Vector3, i = 0, r = this.faces.length; r > i; i++) {
                    var o = this.faces[i], a = this.vertices[o.a], s = this.vertices[o.b], l = this.vertices[o.c];
                    e.subVectors(l, s), t.subVectors(a, s), e.cross(t), e.normalize(), o.normal.copy(e)
                }
            }, computeVertexNormals: function (e) {
                void 0 === e && (e = !0);
                var t, i, r, o, a, s;
                for (s = new Array(this.vertices.length), t = 0, i = this.vertices.length; i > t; t++)s[t] = new n.Vector3;
                if (e) {
                    var l, h, c, u = new n.Vector3, d = new n.Vector3;
                    for (r = 0, o = this.faces.length; o > r; r++)a = this.faces[r], l = this.vertices[a.a], h = this.vertices[a.b], c = this.vertices[a.c], u.subVectors(c, h), d.subVectors(l, h), u.cross(d), s[a.a].add(u), s[a.b].add(u), s[a.c].add(u)
                } else for (r = 0, o = this.faces.length; o > r; r++)a = this.faces[r], s[a.a].add(a.normal), s[a.b].add(a.normal), s[a.c].add(a.normal);
                for (t = 0, i = this.vertices.length; i > t; t++)s[t].normalize();
                for (r = 0, o = this.faces.length; o > r; r++) {
                    a = this.faces[r];
                    var p = a.vertexNormals;
                    3 === p.length ? (p[0].copy(s[a.a]), p[1].copy(s[a.b]), p[2].copy(s[a.c])) : (p[0] = s[a.a].clone(), p[1] = s[a.b].clone(), p[2] = s[a.c].clone())
                }
                this.faces.length > 0 && (this.normalsNeedUpdate = !0)
            }, computeMorphNormals: function () {
                var e, t, i, r, o;
                for (i = 0, r = this.faces.length; r > i; i++)for (o = this.faces[i], o.__originalFaceNormal ? o.__originalFaceNormal.copy(o.normal) : o.__originalFaceNormal = o.normal.clone(), o.__originalVertexNormals || (o.__originalVertexNormals = []), e = 0, t = o.vertexNormals.length; t > e; e++)o.__originalVertexNormals[e] ? o.__originalVertexNormals[e].copy(o.vertexNormals[e]) : o.__originalVertexNormals[e] = o.vertexNormals[e].clone();
                var a = new n.Geometry;
                for (a.faces = this.faces, e = 0, t = this.morphTargets.length; t > e; e++) {
                    if (!this.morphNormals[e]) {
                        this.morphNormals[e] = {}, this.morphNormals[e].faceNormals = [], this.morphNormals[e].vertexNormals = [];
                        var s, l, h = this.morphNormals[e].faceNormals, c = this.morphNormals[e].vertexNormals;
                        for (i = 0, r = this.faces.length; r > i; i++)s = new n.Vector3, l = {
                            a: new n.Vector3,
                            b: new n.Vector3,
                            c: new n.Vector3
                        }, h.push(s), c.push(l)
                    }
                    var u = this.morphNormals[e];
                    a.vertices = this.morphTargets[e].vertices, a.computeFaceNormals(), a.computeVertexNormals();
                    var s, l;
                    for (i = 0, r = this.faces.length; r > i; i++)o = this.faces[i], s = u.faceNormals[i], l = u.vertexNormals[i], s.copy(o.normal), l.a.copy(o.vertexNormals[0]), l.b.copy(o.vertexNormals[1]), l.c.copy(o.vertexNormals[2])
                }
                for (i = 0, r = this.faces.length; r > i; i++)o = this.faces[i], o.normal = o.__originalFaceNormal, o.vertexNormals = o.__originalVertexNormals
            }, computeTangents: function () {
                console.warn("THREE.Geometry: .computeTangents() has been removed.")
            }, computeLineDistances: function () {
                for (var e = 0, t = this.vertices, i = 0, n = t.length; n > i; i++)i > 0 && (e += t[i].distanceTo(t[i - 1])), this.lineDistances[i] = e
            }, computeBoundingBox: function () {
                null === this.boundingBox && (this.boundingBox = new n.Box3), this.boundingBox.setFromPoints(this.vertices)
            }, computeBoundingSphere: function () {
                null === this.boundingSphere && (this.boundingSphere = new n.Sphere), this.boundingSphere.setFromPoints(this.vertices)
            }, merge: function (e, t, i) {
                if (e instanceof n.Geometry == !1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", e);
                var r, o = this.vertices.length, a = this.vertices, s = e.vertices, l = this.faces, h = e.faces, c = this.faceVertexUvs[0], u = e.faceVertexUvs[0];
                void 0 === i && (i = 0), void 0 !== t && (r = (new n.Matrix3).getNormalMatrix(t));
                for (var d = 0, p = s.length; p > d; d++) {
                    var f = s[d], g = f.clone();
                    void 0 !== t && g.applyMatrix4(t), a.push(g)
                }
                for (d = 0, p = h.length; p > d; d++) {
                    var m, v, A, y = h[d], C = y.vertexNormals, I = y.vertexColors;
                    m = new n.Face3(y.a + o, y.b + o, y.c + o), m.normal.copy(y.normal), void 0 !== r && m.normal.applyMatrix3(r).normalize();
                    for (var b = 0, w = C.length; w > b; b++)v = C[b].clone(), void 0 !== r && v.applyMatrix3(r).normalize(), m.vertexNormals.push(v);
                    m.color.copy(y.color);
                    for (var b = 0, w = I.length; w > b; b++)A = I[b], m.vertexColors.push(A.clone());
                    m.materialIndex = y.materialIndex + i, l.push(m)
                }
                for (d = 0, p = u.length; p > d; d++) {
                    var x = u[d], E = [];
                    if (void 0 !== x) {
                        for (var b = 0, w = x.length; w > b; b++)E.push(x[b].clone());
                        c.push(E)
                    }
                }
            }, mergeMesh: function (e) {
                return e instanceof n.Mesh == !1 ? void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", e) : (e.matrixAutoUpdate && e.updateMatrix(), void this.merge(e.geometry, e.matrix))
            }, mergeVertices: function () {
                var e, t, i, n, r, o, a, s, l = {}, h = [], c = [], u = 4, d = Math.pow(10, u);
                for (i = 0, n = this.vertices.length; n > i; i++)e = this.vertices[i], t = Math.round(e.x * d) + "_" + Math.round(e.y * d) + "_" + Math.round(e.z * d), void 0 === l[t] ? (l[t] = i, h.push(this.vertices[i]), c[i] = h.length - 1) : c[i] = c[l[t]];
                var p = [];
                for (i = 0, n = this.faces.length; n > i; i++) {
                    r = this.faces[i], r.a = c[r.a], r.b = c[r.b], r.c = c[r.c], o = [r.a, r.b, r.c];
                    for (var f = -1, g = 0; 3 > g; g++)if (o[g] === o[(g + 1) % 3]) {
                        f = g, p.push(i);
                        break
                    }
                }
                for (i = p.length - 1; i >= 0; i--) {
                    var m = p[i];
                    for (this.faces.splice(m, 1), a = 0, s = this.faceVertexUvs.length; s > a; a++)this.faceVertexUvs[a].splice(m, 1)
                }
                var v = this.vertices.length - h.length;
                return this.vertices = h, v
            }, sortFacesByMaterialIndex: function () {
                function e(e, t) {
                    return e.materialIndex - t.materialIndex
                }

                for (var t = this.faces, i = t.length, n = 0; i > n; n++)t[n]._id = n;
                t.sort(e);
                var r, o, a = this.faceVertexUvs[0], s = this.faceVertexUvs[1];
                a && a.length === i && (r = []), s && s.length === i && (o = []);
                for (var n = 0; i > n; n++) {
                    var l = t[n]._id;
                    r && r.push(a[l]), o && o.push(s[l])
                }
                r && (this.faceVertexUvs[0] = r), o && (this.faceVertexUvs[1] = o)
            }, toJSON: function () {
                function e(e, t, i) {
                    return i ? e | 1 << t : e & ~(1 << t)
                }

                function t(e) {
                    var t = e.x.toString() + e.y.toString() + e.z.toString();
                    return void 0 !== d[t] ? d[t] : (d[t] = u.length / 3, u.push(e.x, e.y, e.z), d[t])
                }

                function i(e) {
                    var t = e.r.toString() + e.g.toString() + e.b.toString();
                    return void 0 !== f[t] ? f[t] : (f[t] = p.length, p.push(e.getHex()), f[t])
                }

                function n(e) {
                    var t = e.x.toString() + e.y.toString();
                    return void 0 !== m[t] ? m[t] : (m[t] = g.length / 2, g.push(e.x, e.y), m[t])
                }

                var r = {metadata: {version: 4.4, type: "Geometry", generator: "Geometry.toJSON"}};
                if (r.uuid = this.uuid, r.type = this.type, "" !== this.name && (r.name = this.name), void 0 !== this.parameters) {
                    var o = this.parameters;
                    for (var a in o)void 0 !== o[a] && (r[a] = o[a]);
                    return r
                }
                for (var s = [], l = 0; l < this.vertices.length; l++) {
                    var h = this.vertices[l];
                    s.push(h.x, h.y, h.z)
                }
                for (var c = [], u = [], d = {}, p = [], f = {}, g = [], m = {}, l = 0; l < this.faces.length; l++) {
                    var v = this.faces[l], A = !0, y = !1, C = void 0 !== this.faceVertexUvs[0][l], I = v.normal.length() > 0, b = v.vertexNormals.length > 0, w = 1 !== v.color.r || 1 !== v.color.g || 1 !== v.color.b, x = v.vertexColors.length > 0, E = 0;
                    if (E = e(E, 0, 0), E = e(E, 1, A), E = e(E, 2, y), E = e(E, 3, C), E = e(E, 4, I), E = e(E, 5, b), E = e(E, 6, w), E = e(E, 7, x), c.push(E), c.push(v.a, v.b, v.c), c.push(v.materialIndex), C) {
                        var M = this.faceVertexUvs[0][l];
                        c.push(n(M[0]), n(M[1]), n(M[2]))
                    }
                    if (I && c.push(t(v.normal)), b) {
                        var T = v.vertexNormals;
                        c.push(t(T[0]), t(T[1]), t(T[2]))
                    }
                    if (w && c.push(i(v.color)), x) {
                        var S = v.vertexColors;
                        c.push(i(S[0]), i(S[1]), i(S[2]))
                    }
                }
                return r.data = {}, r.data.vertices = s, r.data.normals = u, p.length > 0 && (r.data.colors = p), g.length > 0 && (r.data.uvs = [g]), r.data.faces = c, r
            }, clone: function () {
                return (new n.Geometry).copy(this)
            }, copy: function (e) {
                this.vertices = [], this.faces = [], this.faceVertexUvs = [[]];
                for (var t = e.vertices, i = 0, n = t.length; n > i; i++)this.vertices.push(t[i].clone());
                for (var r = e.faces, i = 0, n = r.length; n > i; i++)this.faces.push(r[i].clone());
                for (var i = 0, n = e.faceVertexUvs.length; n > i; i++) {
                    var o = e.faceVertexUvs[i];
                    void 0 === this.faceVertexUvs[i] && (this.faceVertexUvs[i] = []);
                    for (var a = 0, s = o.length; s > a; a++) {
                        for (var l = o[a], h = [], c = 0, u = l.length; u > c; c++) {
                            var d = l[c];
                            h.push(d.clone())
                        }
                        this.faceVertexUvs[i].push(h)
                    }
                }
                return this
            }, dispose: function () {
                this.dispatchEvent({type: "dispose"})
            }
        },n.EventDispatcher.prototype.apply(n.Geometry.prototype),n.GeometryIdCount = 0,n.DirectGeometry = function () {
            Object.defineProperty(this, "id", {value: n.GeometryIdCount++}), this.uuid = n.Math.generateUUID(), this.name = "", this.type = "DirectGeometry", this.indices = [], this.vertices = [], this.normals = [], this.colors = [], this.uvs = [], this.uvs2 = [], this.groups = [], this.morphTargets = {}, this.skinWeights = [], this.skinIndices = [], this.boundingBox = null, this.boundingSphere = null, this.verticesNeedUpdate = !1, this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.groupsNeedUpdate = !1
        },n.DirectGeometry.prototype = {
            constructor: n.DirectGeometry,
            computeBoundingBox: n.Geometry.prototype.computeBoundingBox,
            computeBoundingSphere: n.Geometry.prototype.computeBoundingSphere,
            computeFaceNormals: function () {
                console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")
            },
            computeVertexNormals: function () {
                console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")
            },
            computeGroups: function (e) {
                for (var t, i, n = [], r = e.faces, o = 0; o < r.length; o++) {
                    var a = r[o];
                    a.materialIndex !== i && (i = a.materialIndex, void 0 !== t && (t.count = 3 * o - t.start, n.push(t)), t = {
                        start: 3 * o,
                        materialIndex: i
                    })
                }
                void 0 !== t && (t.count = 3 * o - t.start, n.push(t)), this.groups = n
            },
            fromGeometry: function (e) {
                var t, i = e.faces, r = e.vertices, o = e.faceVertexUvs, a = o[0] && o[0].length > 0, s = o[1] && o[1].length > 0, l = e.morphTargets, h = l.length;
                if (h > 0) {
                    t = [];
                    for (var c = 0; h > c; c++)t[c] = [];
                    this.morphTargets.position = t
                }
                var u, d = e.morphNormals, p = d.length;
                if (p > 0) {
                    u = [];
                    for (var c = 0; p > c; c++)u[c] = [];
                    this.morphTargets.normal = u
                }
                for (var f = e.skinIndices, g = e.skinWeights, m = f.length === r.length, v = g.length === r.length, c = 0; c < i.length; c++) {
                    var A = i[c];
                    this.vertices.push(r[A.a], r[A.b], r[A.c]);
                    var y = A.vertexNormals;
                    if (3 === y.length)this.normals.push(y[0], y[1], y[2]); else {
                        var C = A.normal;
                        this.normals.push(C, C, C)
                    }
                    var I = A.vertexColors;
                    if (3 === I.length)this.colors.push(I[0], I[1], I[2]); else {
                        var b = A.color;
                        this.colors.push(b, b, b)
                    }
                    if (a === !0) {
                        var w = o[0][c];
                        void 0 !== w ? this.uvs.push(w[0], w[1], w[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", c), this.uvs.push(new n.Vector2, new n.Vector2, new n.Vector2))
                    }
                    if (s === !0) {
                        var w = o[1][c];
                        void 0 !== w ? this.uvs2.push(w[0], w[1], w[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", c), this.uvs2.push(new n.Vector2, new n.Vector2, new n.Vector2))
                    }
                    for (var x = 0; h > x; x++) {
                        var E = l[x].vertices;
                        t[x].push(E[A.a], E[A.b], E[A.c])
                    }
                    for (var x = 0; p > x; x++) {
                        var M = d[x].vertexNormals[c];
                        u[x].push(M.a, M.b, M.c)
                    }
                    m && this.skinIndices.push(f[A.a], f[A.b], f[A.c]), v && this.skinWeights.push(g[A.a], g[A.b], g[A.c])
                }
                return this.computeGroups(e), this.verticesNeedUpdate = e.verticesNeedUpdate, this.normalsNeedUpdate = e.normalsNeedUpdate, this.colorsNeedUpdate = e.colorsNeedUpdate, this.uvsNeedUpdate = e.uvsNeedUpdate, this.groupsNeedUpdate = e.groupsNeedUpdate, this
            },
            dispose: function () {
                this.dispatchEvent({type: "dispose"})
            }
        },n.EventDispatcher.prototype.apply(n.DirectGeometry.prototype),n.BufferGeometry = function () {
            Object.defineProperty(this, "id", {value: n.GeometryIdCount++}), this.uuid = n.Math.generateUUID(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = {
                start: 0,
                count: 1 / 0
            }
        },n.BufferGeometry.prototype = {
            constructor: n.BufferGeometry, getIndex: function () {
                return this.index
            }, setIndex: function (e) {
                this.index = e
            }, addAttribute: function (e, t) {
                return t instanceof n.BufferAttribute == !1 && t instanceof n.InterleavedBufferAttribute == !1 ? (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."), void this.addAttribute(e, new n.BufferAttribute(arguments[1], arguments[2]))) : "index" === e ? (console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."), void this.setIndex(t)) : (this.attributes[e] = t, this)
            }, getAttribute: function (e) {
                return this.attributes[e]
            }, removeAttribute: function (e) {
                return delete this.attributes[e], this
            }, addGroup: function (e, t, i) {
                this.groups.push({start: e, count: t, materialIndex: void 0 !== i ? i : 0})
            }, clearGroups: function () {
                this.groups = []
            }, setDrawRange: function (e, t) {
                this.drawRange.start = e, this.drawRange.count = t
            }, applyMatrix: function (e) {
                var t = this.attributes.position;
                void 0 !== t && (e.applyToVector3Array(t.array), t.needsUpdate = !0);
                var i = this.attributes.normal;
                if (void 0 !== i) {
                    var r = (new n.Matrix3).getNormalMatrix(e);
                    r.applyToVector3Array(i.array), i.needsUpdate = !0
                }
                return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this
            }, rotateX: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Matrix4), e.makeRotationX(t), this.applyMatrix(e), this
                }
            }(), rotateY: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Matrix4), e.makeRotationY(t), this.applyMatrix(e), this
                }
            }(), rotateZ: function () {
                var e;
                return function (t) {
                    return void 0 === e && (e = new n.Matrix4), e.makeRotationZ(t), this.applyMatrix(e), this
                }
            }(), translate: function () {
                var e;
                return function (t, i, r) {
                    return void 0 === e && (e = new n.Matrix4), e.makeTranslation(t, i, r), this.applyMatrix(e), this
                }
            }(), scale: function () {
                var e;
                return function (t, i, r) {
                    return void 0 === e && (e = new n.Matrix4), e.makeScale(t, i, r), this.applyMatrix(e), this
                }
            }(), lookAt: function () {
                var e;
                return function (t) {
                    void 0 === e && (e = new n.Object3D), e.lookAt(t), e.updateMatrix(), this.applyMatrix(e.matrix)
                }
            }(), center: function () {
                this.computeBoundingBox();
                var e = this.boundingBox.center().negate();
                return this.translate(e.x, e.y, e.z), e
            }, setFromObject: function (e) {
                var t = e.geometry;
                if (e instanceof n.Points || e instanceof n.Line) {
                    var i = new n.Float32Attribute(3 * t.vertices.length, 3), r = new n.Float32Attribute(3 * t.colors.length, 3);
                    if (this.addAttribute("position", i.copyVector3sArray(t.vertices)), this.addAttribute("color", r.copyColorsArray(t.colors)), t.lineDistances && t.lineDistances.length === t.vertices.length) {
                        var o = new n.Float32Attribute(t.lineDistances.length, 1);
                        this.addAttribute("lineDistance", o.copyArray(t.lineDistances))
                    }
                    null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone())
                } else e instanceof n.Mesh && t instanceof n.Geometry && this.fromGeometry(t);
                return this
            }, updateFromObject: function (e) {
                var t = e.geometry;
                if (e instanceof n.Mesh) {
                    var i = t.__directGeometry;
                    if (void 0 === i)return this.fromGeometry(t);
                    i.verticesNeedUpdate = t.verticesNeedUpdate, i.normalsNeedUpdate = t.normalsNeedUpdate, i.colorsNeedUpdate = t.colorsNeedUpdate, i.uvsNeedUpdate = t.uvsNeedUpdate, i.groupsNeedUpdate = t.groupsNeedUpdate, t.verticesNeedUpdate = !1, t.normalsNeedUpdate = !1, t.colorsNeedUpdate = !1, t.uvsNeedUpdate = !1, t.groupsNeedUpdate = !1, t = i
                }
                if (t.verticesNeedUpdate === !0) {
                    var r = this.attributes.position;
                    void 0 !== r && (r.copyVector3sArray(t.vertices), r.needsUpdate = !0), t.verticesNeedUpdate = !1
                }
                if (t.normalsNeedUpdate === !0) {
                    var r = this.attributes.normal;
                    void 0 !== r && (r.copyVector3sArray(t.normals), r.needsUpdate = !0), t.normalsNeedUpdate = !1
                }
                if (t.colorsNeedUpdate === !0) {
                    var r = this.attributes.color;
                    void 0 !== r && (r.copyColorsArray(t.colors), r.needsUpdate = !0), t.colorsNeedUpdate = !1
                }
                if (t.uvsNeedUpdate) {
                    var r = this.attributes.uv;
                    void 0 !== r && (r.copyVector2sArray(t.uvs), r.needsUpdate = !0), t.uvsNeedUpdate = !1
                }
                if (t.lineDistancesNeedUpdate) {
                    var r = this.attributes.lineDistance;
                    void 0 !== r && (r.copyArray(t.lineDistances), r.needsUpdate = !0), t.lineDistancesNeedUpdate = !1
                }
                return t.groupsNeedUpdate && (t.computeGroups(e.geometry), this.groups = t.groups, t.groupsNeedUpdate = !1), this
            }, fromGeometry: function (e) {
                return e.__directGeometry = (new n.DirectGeometry).fromGeometry(e), this.fromDirectGeometry(e.__directGeometry)
            }, fromDirectGeometry: function (e) {
                var t = new Float32Array(3 * e.vertices.length);
                if (this.addAttribute("position", new n.BufferAttribute(t, 3).copyVector3sArray(e.vertices)), e.normals.length > 0) {
                    var i = new Float32Array(3 * e.normals.length);
                    this.addAttribute("normal", new n.BufferAttribute(i, 3).copyVector3sArray(e.normals))
                }
                if (e.colors.length > 0) {
                    var r = new Float32Array(3 * e.colors.length);
                    this.addAttribute("color", new n.BufferAttribute(r, 3).copyColorsArray(e.colors))
                }
                if (e.uvs.length > 0) {
                    var o = new Float32Array(2 * e.uvs.length);
                    this.addAttribute("uv", new n.BufferAttribute(o, 2).copyVector2sArray(e.uvs))
                }
                if (e.uvs2.length > 0) {
                    var a = new Float32Array(2 * e.uvs2.length);
                    this.addAttribute("uv2", new n.BufferAttribute(a, 2).copyVector2sArray(e.uvs2))
                }
                if (e.indices.length > 0) {
                    var s = e.vertices.length > 65535 ? Uint32Array : Uint16Array, l = new s(3 * e.indices.length);
                    this.setIndex(new n.BufferAttribute(l, 1).copyIndicesArray(e.indices))
                }
                this.groups = e.groups;
                for (var h in e.morphTargets) {
                    for (var c = [], u = e.morphTargets[h], d = 0, p = u.length; p > d; d++) {
                        var f = u[d], g = new n.Float32Attribute(3 * f.length, 3);
                        c.push(g.copyVector3sArray(f))
                    }
                    this.morphAttributes[h] = c
                }
                if (e.skinIndices.length > 0) {
                    var m = new n.Float32Attribute(4 * e.skinIndices.length, 4);
                    this.addAttribute("skinIndex", m.copyVector4sArray(e.skinIndices))
                }
                if (e.skinWeights.length > 0) {
                    var v = new n.Float32Attribute(4 * e.skinWeights.length, 4);
                    this.addAttribute("skinWeight", v.copyVector4sArray(e.skinWeights))
                }
                return null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), this
            }, computeBoundingBox: function () {
                new n.Vector3;
                return function () {
                    null === this.boundingBox && (this.boundingBox = new n.Box3);
                    var e = this.attributes.position.array;
                    e && this.boundingBox.setFromArray(e), (void 0 === e || 0 === e.length) && (this.boundingBox.min.set(0, 0, 0), this.boundingBox.max.set(0, 0, 0)), (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this)
                }
            }(), computeBoundingSphere: function () {
                var e = new n.Box3, t = new n.Vector3;
                return function () {
                    null === this.boundingSphere && (this.boundingSphere = new n.Sphere);
                    var i = this.attributes.position.array;
                    if (i) {
                        var r = this.boundingSphere.center;
                        e.setFromArray(i), e.center(r);
                        for (var o = 0, a = 0, s = i.length; s > a; a += 3)t.fromArray(i, a), o = Math.max(o, r.distanceToSquared(t));
                        this.boundingSphere.radius = Math.sqrt(o), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this)
                    }
                }
            }(), computeFaceNormals: function () {
            },
            computeVertexNormals: function () {
                var e = this.index, t = this.attributes, i = this.groups;
                if (t.position) {
                    var r = t.position.array;
                    if (void 0 === t.normal)this.addAttribute("normal", new n.BufferAttribute(new Float32Array(r.length), 3)); else for (var o = t.normal.array, a = 0, s = o.length; s > a; a++)o[a] = 0;
                    var l, h, c, u = t.normal.array, d = new n.Vector3, p = new n.Vector3, f = new n.Vector3, g = new n.Vector3, m = new n.Vector3;
                    if (e) {
                        var v = e.array;
                        0 === i.length && this.addGroup(0, v.length);
                        for (var A = 0, y = i.length; y > A; ++A)for (var C = i[A], I = C.start, b = C.count, a = I, s = I + b; s > a; a += 3)l = 3 * v[a + 0], h = 3 * v[a + 1], c = 3 * v[a + 2], d.fromArray(r, l), p.fromArray(r, h), f.fromArray(r, c), g.subVectors(f, p), m.subVectors(d, p), g.cross(m), u[l] += g.x, u[l + 1] += g.y, u[l + 2] += g.z, u[h] += g.x, u[h + 1] += g.y, u[h + 2] += g.z, u[c] += g.x, u[c + 1] += g.y, u[c + 2] += g.z
                    } else for (var a = 0, s = r.length; s > a; a += 9)d.fromArray(r, a), p.fromArray(r, a + 3), f.fromArray(r, a + 6), g.subVectors(f, p), m.subVectors(d, p), g.cross(m), u[a] = g.x, u[a + 1] = g.y, u[a + 2] = g.z, u[a + 3] = g.x, u[a + 4] = g.y, u[a + 5] = g.z, u[a + 6] = g.x, u[a + 7] = g.y, u[a + 8] = g.z;
                    this.normalizeNormals(), t.normal.needsUpdate = !0
                }
            }, merge: function (e, t) {
                if (e instanceof n.BufferGeometry == !1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", e);
                void 0 === t && (t = 0);
                var i = this.attributes;
                for (var r in i)if (void 0 !== e.attributes[r])for (var o = i[r], a = o.array, s = e.attributes[r], l = s.array, h = s.itemSize, c = 0, u = h * t; c < l.length; c++, u++)a[u] = l[c];
                return this
            }, normalizeNormals: function () {
                for (var e, t, i, n, r = this.attributes.normal.array, o = 0, a = r.length; a > o; o += 3)e = r[o], t = r[o + 1], i = r[o + 2], n = 1 / Math.sqrt(e * e + t * t + i * i), r[o] *= n, r[o + 1] *= n, r[o + 2] *= n
            }, toNonIndexed: function () {
                if (null === this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."), this;
                var e = new n.BufferGeometry, t = this.index.array, i = this.attributes;
                for (var r in i) {
                    for (var o = i[r], a = o.array, s = o.itemSize, l = new a.constructor(t.length * s), h = 0, c = 0, u = 0, d = t.length; d > u; u++) {
                        h = t[u] * s;
                        for (var p = 0; s > p; p++)l[c++] = a[h++]
                    }
                    e.addAttribute(r, new n.BufferAttribute(l, s))
                }
                return e
            }, toJSON: function () {
                var e = {metadata: {version: 4.4, type: "BufferGeometry", generator: "BufferGeometry.toJSON"}};
                if (e.uuid = this.uuid, e.type = this.type, "" !== this.name && (e.name = this.name), void 0 !== this.parameters) {
                    var t = this.parameters;
                    for (var i in t)void 0 !== t[i] && (e[i] = t[i]);
                    return e
                }
                e.data = {attributes: {}};
                var n = this.index;
                if (null !== n) {
                    var r = Array.prototype.slice.call(n.array);
                    e.data.index = {type: n.array.constructor.name, array: r}
                }
                var o = this.attributes;
                for (var i in o) {
                    var a = o[i], r = Array.prototype.slice.call(a.array);
                    e.data.attributes[i] = {itemSize: a.itemSize, type: a.array.constructor.name, array: r}
                }
                var s = this.groups;
                s.length > 0 && (e.data.groups = JSON.parse(JSON.stringify(s)));
                var l = this.boundingSphere;
                return null !== l && (e.data.boundingSphere = {center: l.center.toArray(), radius: l.radius}), e
            }, clone: function () {
                return (new n.BufferGeometry).copy(this)
            }, copy: function (e) {
                var t = e.index;
                null !== t && this.setIndex(t.clone());
                var i = e.attributes;
                for (var n in i) {
                    var r = i[n];
                    this.addAttribute(n, r.clone())
                }
                for (var o = e.groups, a = 0, s = o.length; s > a; a++) {
                    var l = o[a];
                    this.addGroup(l.start, l.count)
                }
                return this
            }, dispose: function () {
                this.dispatchEvent({type: "dispose"})
            }
        },n.EventDispatcher.prototype.apply(n.BufferGeometry.prototype),n.BufferGeometry.MaxIndex = 65535,n.InstancedBufferGeometry = function () {
            n.BufferGeometry.call(this), this.type = "InstancedBufferGeometry", this.maxInstancedCount = void 0
        },n.InstancedBufferGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.InstancedBufferGeometry.prototype.constructor = n.InstancedBufferGeometry,n.InstancedBufferGeometry.prototype.addGroup = function (e, t, i) {
            this.groups.push({start: e, count: t, instances: i})
        },n.InstancedBufferGeometry.prototype.copy = function (e) {
            var t = e.index;
            null !== t && this.setIndex(t.clone());
            var i = e.attributes;
            for (var n in i) {
                var r = i[n];
                this.addAttribute(n, r.clone())
            }
            for (var o = e.groups, a = 0, s = o.length; s > a; a++) {
                var l = o[a];
                this.addGroup(l.start, l.count, l.instances)
            }
            return this
        },n.EventDispatcher.prototype.apply(n.InstancedBufferGeometry.prototype),n.Uniform = function (e, t) {
            this.type = e, this.value = t, this.dynamic = !1
        },n.Uniform.prototype = {
            constructor: n.Uniform, onUpdate: function (e) {
                return this.dynamic = !0, this.onUpdateCallback = e, this
            }
        },n.AnimationClip = function (e, t, i) {
            this.name = e || n.Math.generateUUID(), this.tracks = i, this.duration = void 0 !== t ? t : -1, this.duration < 0 && this.resetDuration(), this.trim(), this.optimize()
        },n.AnimationClip.prototype = {
            constructor: n.AnimationClip, resetDuration: function () {
                for (var e = this.tracks, t = 0, i = 0, n = e.length; i !== n; ++i) {
                    var r = this.tracks[i];
                    t = Math.max(t, r.times[r.times.length - 1])
                }
                this.duration = t
            }, trim: function () {
                for (var e = 0; e < this.tracks.length; e++)this.tracks[e].trim(0, this.duration);
                return this
            }, optimize: function () {
                for (var e = 0; e < this.tracks.length; e++)this.tracks[e].optimize();
                return this
            }
        },Object.assign(n.AnimationClip, {
            parse: function (e) {
                for (var t = [], i = e.tracks, r = 1 / (e.fps || 1), o = 0, a = i.length; o !== a; ++o)t.push(n.KeyframeTrack.parse(i[o]).scale(r));
                return new n.AnimationClip(e.name, e.duration, t)
            }, toJSON: function (e) {
                for (var t = [], i = e.tracks, r = {
                    name: e.name,
                    duration: e.duration,
                    tracks: t
                }, o = 0, a = i.length; o !== a; ++o)t.push(n.KeyframeTrack.toJSON(i[o]));
                return r
            }, CreateFromMorphTargetSequence: function (e, t, i) {
                for (var r = t.length, o = [], a = 0; r > a; a++) {
                    var s = [], l = [];
                    s.push((a + r - 1) % r, a, (a + 1) % r), l.push(0, 1, 0);
                    var h = n.AnimationUtils.getKeyframeOrder(s);
                    s = n.AnimationUtils.sortedArray(s, 1, h), l = n.AnimationUtils.sortedArray(l, 1, h), 0 === s[0] && (s.push(r), l.push(l[0])), o.push(new n.NumberKeyframeTrack(".morphTargetInfluences[" + t[a].name + "]", s, l).scale(1 / i))
                }
                return new n.AnimationClip(e, -1, o)
            }, findByName: function (e, t) {
                for (var i = 0; i < e.length; i++)if (e[i].name === t)return e[i];
                return null
            }, CreateClipsFromMorphTargetSequences: function (e, t) {
                for (var i = {}, r = /^([\w-]*?)([\d]+)$/, o = 0, a = e.length; a > o; o++) {
                    var s = e[o], l = s.name.match(r);
                    if (l && l.length > 1) {
                        var h = l[1], c = i[h];
                        c || (i[h] = c = []), c.push(s)
                    }
                }
                var u = [];
                for (var h in i)u.push(n.AnimationClip.CreateFromMorphTargetSequence(h, i[h], t));
                return u
            }, parseAnimation: function (e, t, i) {
                if (!e)return console.error("  no animation in JSONLoader data"), null;
                for (var r = function (e, t, i, r, o) {
                    if (0 !== i.length) {
                        var a = [], s = [];
                        n.AnimationUtils.flattenJSON(i, a, s, r), 0 !== a.length && o.push(new e(t, a, s))
                    }
                }, o = [], a = e.name || "default", s = e.length || -1, l = e.fps || 30, h = e.hierarchy || [], c = 0; c < h.length; c++) {
                    var u = h[c].keys;
                    if (u && 0 != u.length)if (u[0].morphTargets) {
                        for (var d = {}, p = 0; p < u.length; p++)if (u[p].morphTargets)for (var f = 0; f < u[p].morphTargets.length; f++)d[u[p].morphTargets[f]] = -1;
                        for (var g in d) {
                            for (var m = [], v = [], f = 0; f !== u[p].morphTargets.length; ++f) {
                                var A = u[p];
                                m.push(A.time), v.push(A.morphTarget === g ? 1 : 0)
                            }
                            o.push(new n.NumberKeyframeTrack(".morphTargetInfluence[" + g + "]", m, v))
                        }
                        s = d.length * (l || 1)
                    } else {
                        var y = ".bones[" + t[c].name + "]";
                        r(n.VectorKeyframeTrack, y + ".position", u, "pos", o), r(n.QuaternionKeyframeTrack, y + ".quaternion", u, "rot", o), r(n.VectorKeyframeTrack, y + ".scale", u, "scl", o)
                    }
                }
                if (0 === o.length)return null;
                var C = new n.AnimationClip(a, s, o);
                return C
            }
        }),n.AnimationMixer = function (e) {
            this._root = e, this._initMemoryManager(), this._accuIndex = 0, this.time = 0, this.timeScale = 1
        },n.AnimationMixer.prototype = {
            constructor: n.AnimationMixer, clipAction: function (e, t) {
                var i, r = t || this._root, o = r.uuid, a = "string" == typeof e ? e : e.name, s = e !== a ? e : null, l = this._actionsByClip[a];
                if (void 0 !== l) {
                    var h = l.actionByRoot[o];
                    if (void 0 !== h)return h;
                    if (i = l.knownActions[0], s = i._clip, e !== a && e !== s)throw new Error("Different clips with the same name detected!")
                }
                if (null === s)return null;
                var c = new n.AnimationMixer._Action(this, s, t);
                return this._bindAction(c, i), this._addInactiveAction(c, a, o), c
            }, existingAction: function (e, t) {
                var i = t || this._root, n = i.uuid, r = "string" == typeof e ? e : e.name, o = this._actionsByClip[r];
                return void 0 !== o ? o.actionByRoot[n] || null : null
            }, stopAllAction: function () {
                var e = this._actions, t = this._nActiveActions, i = this._bindings, n = this._nActiveBindings;
                this._nActiveActions = 0, this._nActiveBindings = 0;
                for (var r = 0; r !== t; ++r)e[r].reset();
                for (var r = 0; r !== n; ++r)i[r].useCount = 0;
                return this
            }, update: function (e) {
                e *= this.timeScale;
                for (var t = this._actions, i = this._nActiveActions, n = this.time += e, r = Math.sign(e), o = this._accuIndex ^= 1, a = 0; a !== i; ++a) {
                    var s = t[a];
                    s.enabled && s._update(n, e, r, o)
                }
                for (var l = this._bindings, h = this._nActiveBindings, a = 0; a !== h; ++a)l[a].apply(o);
                return this
            }, getRoot: function () {
                return this._root
            }, uncacheClip: function (e) {
                var t = this._actions, i = e.name, n = this._actionsByClip, r = n[i];
                if (void 0 !== r) {
                    for (var o = r.knownActions, a = 0, s = o.length; a !== s; ++a) {
                        var l = o[a];
                        this._deactivateAction(l);
                        var h = l._cacheIndex, c = t[t.length - 1];
                        l._cacheIndex = null, l._byClipCacheIndex = null, c._cacheIndex = h, t[h] = c, t.pop(), this._removeInactiveBindingsForAction(l)
                    }
                    delete n[i]
                }
            }, uncacheRoot: function (e) {
                var t = e.uuid, i = this._actionsByClip;
                for (var n in i) {
                    var r = i[n].actionByRoot, o = r[t];
                    void 0 !== o && (this._deactivateAction(o), this._removeInactiveAction(o))
                }
                var a = this._bindingsByRootAndName, s = a[t];
                if (void 0 !== s)for (var l in s) {
                    var h = s[l];
                    h.restoreOriginalState(), this._removeInactiveBinding(h)
                }
            }, uncacheAction: function (e, t) {
                var i = this.existingAction(e, t);
                null !== i && (this._deactivateAction(i), this._removeInactiveAction(i))
            }
        },n.EventDispatcher.prototype.apply(n.AnimationMixer.prototype),n.AnimationMixer._Action = function (e, t, i) {
            this._mixer = e, this._clip = t, this._localRoot = i || null;
            for (var r = t.tracks, o = r.length, a = new Array(o), s = {
                endingStart: n.ZeroCurvatureEnding,
                endingEnd: n.ZeroCurvatureEnding
            }, l = 0; l !== o; ++l) {
                var h = r[l].createInterpolant(null);
                a[l] = h, h.settings = s
            }
            this._interpolantSettings = s, this._interpolants = a, this._propertyBindings = new Array(o), this._cacheIndex = null, this._byClipCacheIndex = null, this._timeScaleInterpolant = null, this._weightInterpolant = null, this.loop = n.LoopRepeat, this._loopCount = -1, this._startTime = null, this.time = 0, this.timeScale = 1, this._effectiveTimeScale = 1, this.weight = 1, this._effectiveWeight = 1, this.repetitions = 1 / 0, this.paused = !1, this.enabled = !0, this.clampWhenFinished = !1, this.zeroSlopeAtStart = !0, this.zeroSlopeAtEnd = !0
        },n.AnimationMixer._Action.prototype = {
            constructor: n.AnimationMixer._Action, play: function () {
                return this._mixer._activateAction(this), this
            }, stop: function () {
                return this._mixer._deactivateAction(this), this.reset()
            }, reset: function () {
                return this.paused = !1, this.enabled = !0, this.time = 0, this._loopCount = -1, this._startTime = null, this.stopFading().stopWarping()
            }, isRunning: function () {
                this._startTime;
                return this.enabled && !this.paused && 0 !== this.timeScale && null === this._startTime && this._mixer._isActiveAction(this)
            }, isScheduled: function () {
                return this._mixer._isActiveAction(this)
            }, startAt: function (e) {
                return this._startTime = e, this
            }, setLoop: function (e, t) {
                return this.loop = e, this.repetitions = t, this
            }, setEffectiveWeight: function (e) {
                return this.weight = e, this._effectiveWeight = this.enabled ? e : 0, this.stopFading()
            }, getEffectiveWeight: function () {
                return this._effectiveWeight
            }, fadeIn: function (e) {
                return this._scheduleFading(e, 0, 1)
            }, fadeOut: function (e) {
                return this._scheduleFading(e, 1, 0)
            }, crossFadeFrom: function (e, t, i) {
                this._mixer;
                if (e.fadeOut(t), this.fadeIn(t), i) {
                    var n = this._clip.duration, r = e._clip.duration, o = r / n, a = n / r;
                    e.warp(1, o, t), this.warp(a, 1, t)
                }
                return this
            }, crossFadeTo: function (e, t, i) {
                return e.crossFadeFrom(this, t, i)
            }, stopFading: function () {
                var e = this._weightInterpolant;
                return null !== e && (this._weightInterpolant = null, this._mixer._takeBackControlInterpolant(e)), this
            }, setEffectiveTimeScale: function (e) {
                return this.timeScale = e, this._effectiveTimeScale = this.paused ? 0 : e, this.stopWarping()
            }, getEffectiveTimeScale: function () {
                return this._effectiveTimeScale
            }, setDuration: function (e) {
                return this.timeScale = this._clip.duration / e, this.stopWarping()
            }, syncWith: function (e) {
                return this.time = e.time, this.timeScale = e.timeScale, this.stopWarping()
            }, halt: function (e) {
                return this.warp(this._currentTimeScale, 0, e)
            }, warp: function (e, t, i) {
                var n = this._mixer, r = n.time, o = this._timeScaleInterpolant, a = this.timeScale;
                null === o && (o = n._lendControlInterpolant(), this._timeScaleInterpolant = o);
                var s = o.parameterPositions, l = o.sampleValues;
                return s[0] = r, s[1] = r + i, l[0] = e / a, l[1] = t / a, this
            }, stopWarping: function () {
                var e = this._timeScaleInterpolant;
                return null !== e && (this._timeScaleInterpolant = null, this._mixer._takeBackControlInterpolant(e)), this
            }, getMixer: function () {
                return this._mixer
            }, getClip: function () {
                return this._clip
            }, getRoot: function () {
                return this._localRoot || this._mixer._root
            }, _update: function (e, t, i, n) {
                var r = this._startTime;
                if (null !== r) {
                    var o = (e - r) * i;
                    if (0 > o || 0 === i)return;
                    this._startTime = null, t = i * o
                }
                t *= this._updateTimeScale(e);
                var a = this._updateTime(t), s = this._updateWeight(e);
                if (s > 0)for (var l = this._interpolants, h = this._propertyBindings, c = 0, u = l.length; c !== u; ++c)l[c].evaluate(a), h[c].accumulate(n, s)
            }, _updateWeight: function (e) {
                var t = 0;
                if (this.enabled) {
                    t = this.weight;
                    var i = this._weightInterpolant;
                    if (null !== i) {
                        var n = i.evaluate(e)[0];
                        t *= n, e > i.parameterPositions[1] && (this.stopFading(), 0 === n && (this.enabled = !1))
                    }
                }
                return this._effectiveWeight = t, t
            }, _updateTimeScale: function (e) {
                var t = 0;
                if (!this.paused) {
                    t = this.timeScale;
                    var i = this._timeScaleInterpolant;
                    if (null !== i) {
                        var n = i.evaluate(e)[0];
                        t *= n, e > i.parameterPositions[1] && (this.stopWarping(), 0 === t ? this.pause = !0 : this.timeScale = t)
                    }
                }
                return this._effectiveTimeScale = t, t
            }, _updateTime: function (e) {
                var t = this.time + e;
                if (0 === e)return t;
                var i = this._clip.duration, r = this.loop, o = this._loopCount, a = !1;
                switch (r) {
                    case n.LoopOnce:
                        if (-1 === o && (this.loopCount = 0, this._setEndings(!0, !0, !1)), t >= i)t = i; else {
                            if (!(0 > t))break;
                            t = 0
                        }
                        this.clampWhenFinished ? this.pause = !0 : this.enabled = !1, this._mixer.dispatchEvent({
                            type: "finished",
                            action: this,
                            direction: 0 > e ? -1 : 1
                        });
                        break;
                    case n.LoopPingPong:
                        a = !0;
                    case n.LoopRepeat:
                        if (-1 === o && (e > 0 ? (o = 0, this._setEndings(!0, 0 === this.repetitions, a)) : this._setEndings(0 === this.repetitions, !0, a)), t >= i || 0 > t) {
                            var s = Math.floor(t / i);
                            t -= i * s, o += Math.abs(s);
                            var l = this.repetitions - o;
                            if (0 > l) {
                                this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, t = e > 0 ? i : 0, this._mixer.dispatchEvent({
                                    type: "finished",
                                    action: this,
                                    direction: e > 0 ? 1 : -1
                                });
                                break
                            }
                            if (0 === l) {
                                var h = 0 > e;
                                this._setEndings(h, !h, a)
                            } else this._setEndings(!1, !1, a);
                            this._loopCount = o, this._mixer.dispatchEvent({type: "loop", action: this, loopDelta: s})
                        }
                        if (r === n.LoopPingPong && 1 === (1 & o))return this.time = t, i - t
                }
                return this.time = t, t
            }, _setEndings: function (e, t, i) {
                var r = this._interpolantSettings;
                i ? (r.endingStart = n.ZeroSlopeEnding, r.endingEnd = n.ZeroSlopeEnding) : (e ? r.endingStart = this.zeroSlopeAtStart ? n.ZeroSlopeEnding : n.ZeroCurvatureEnding : r.endingStart = n.WrapAroundEnding, t ? r.endingEnd = this.zeroSlopeAtEnd ? n.ZeroSlopeEnding : n.ZeroCurvatureEnding : r.endingEnd = n.WrapAroundEnding)
            }, _scheduleFading: function (e, t, i) {
                var n = this._mixer, r = n.time, o = this._weightInterpolant;
                null === o && (o = n._lendControlInterpolant(), this._weightInterpolant = o);
                var a = o.parameterPositions, s = o.sampleValues;
                return a[0] = r, s[0] = t, a[1] = r + e, s[1] = i, this
            }
        },Object.assign(n.AnimationMixer.prototype, {
            _bindAction: function (e, t) {
                var i = e._localRoot || this._root, r = e._clip.tracks, o = r.length, a = e._propertyBindings, s = e._interpolants, l = i.uuid, h = this._bindingsByRootAndName, c = h[l];
                void 0 === c && (c = {}, h[l] = c);
                for (var u = 0; u !== o; ++u) {
                    var d = r[u], p = d.name, f = c[p];
                    if (void 0 !== f)a[u] = f; else {
                        if (f = a[u], void 0 !== f) {
                            null === f._cacheIndex && (++f.referenceCount, this._addInactiveBinding(f, l, p));
                            continue
                        }
                        var g = t && t._propertyBindings[u].binding.parsedPath;
                        f = new n.PropertyMixer(n.PropertyBinding.create(i, p, g), d.ValueTypeName, d.getValueSize()), ++f.referenceCount, this._addInactiveBinding(f, l, p), a[u] = f
                    }
                    s[u].resultBuffer = f.buffer
                }
            }, _activateAction: function (e) {
                if (!this._isActiveAction(e)) {
                    if (null === e._cacheIndex) {
                        var t = (e._localRoot || this._root).uuid, i = e._clip.name, n = this._actionsByClip[i];
                        this._bindAction(e, n && n.knownActions[0]), this._addInactiveAction(e, i, t)
                    }
                    for (var r = e._propertyBindings, o = 0, a = r.length; o !== a; ++o) {
                        var s = r[o];
                        0 === s.useCount++ && (this._lendBinding(s), s.saveOriginalState())
                    }
                    this._lendAction(e)
                }
            }, _deactivateAction: function (e) {
                if (this._isActiveAction(e)) {
                    for (var t = e._propertyBindings, i = 0, n = t.length; i !== n; ++i) {
                        var r = t[i];
                        0 === --r.useCount && (r.restoreOriginalState(), this._takeBackBinding(r))
                    }
                    this._takeBackAction(e)
                }
            }, _initMemoryManager: function () {
                this._actions = [], this._nActiveActions = 0, this._actionsByClip = {}, this._bindings = [], this._nActiveBindings = 0, this._bindingsByRootAndName = {}, this._controlInterpolants = [], this._nActiveControlInterpolants = 0;
                var e = this;
                this.stats = {
                    actions: {
                        get total() {
                            return e._actions.length
                        }, get inUse() {
                            return e._nActiveActions
                        }
                    }, bindings: {
                        get total() {
                            return e._bindings.length
                        }, get inUse() {
                            return e._nActiveBindings
                        }
                    }, controlInterpolants: {
                        get total() {
                            return e._controlInterpolants.length
                        }, get inUse() {
                            return e._nActiveControlInterpolants
                        }
                    }
                }
            }, _isActiveAction: function (e) {
                var t = e._cacheIndex;
                return null !== t && t < this._nActiveActions
            }, _addInactiveAction: function (e, t, i) {
                var n = this._actions, r = this._actionsByClip, o = r[t];
                if (void 0 === o)o = {knownActions: [e], actionByRoot: {}}, e._byClipCacheIndex = 0, r[t] = o; else {
                    var a = o.knownActions;
                    e._byClipCacheIndex = a.length, a.push(e)
                }
                e._cacheIndex = n.length, n.push(e), o.actionByRoot[i] = e
            }, _removeInactiveAction: function (e) {
                var t = this._actions, i = t[t.length - 1], n = e._cacheIndex;
                i._cacheIndex = n, t[n] = i, t.pop(), e._cacheIndex = null;
                var r = e._clip.name, o = this._actionsByClip, a = o[r], s = a.knownActions, l = s[s.length - 1], h = e._byClipCacheIndex;
                l._byClipCacheIndex = h, s[h] = l, s.pop(), e._byClipCacheIndex = null;
                var c = a.actionByRoot, u = (t._localRoot || this._root).uuid;
                delete c[u], 0 === s.length && delete o[r], this._removeInactiveBindingsForAction(e)
            }, _removeInactiveBindingsForAction: function (e) {
                for (var t = e._propertyBindings, i = 0, n = t.length; i !== n; ++i) {
                    var r = t[i];
                    0 === --r.referenceCount && this._removeInactiveBinding(r)
                }
            }, _lendAction: function (e) {
                var t = this._actions, i = e._cacheIndex, n = this._nActiveActions++, r = t[n];
                e._cacheIndex = n, t[n] = e, r._cacheIndex = i, t[i] = r
            }, _takeBackAction: function (e) {
                var t = this._actions, i = e._cacheIndex, n = --this._nActiveActions, r = t[n];
                e._cacheIndex = n, t[n] = e, r._cacheIndex = i, t[i] = r
            }, _addInactiveBinding: function (e, t, i) {
                var n = this._bindingsByRootAndName, r = n[t], o = this._bindings;
                void 0 === r && (r = {}, n[t] = r), r[i] = e, e._cacheIndex = o.length, o.push(e)
            }, _removeInactiveBinding: function (e) {
                var t = this._bindings, i = e.binding, n = i.rootNode.uuid, r = i.path, o = this._bindingsByRootAndName, a = o[n], s = t[t.length - 1], l = e._cacheIndex;
                s._cacheIndex = l, t[l] = s, t.pop(), delete a[r];
                e:{
                    for (var h in a)break e;
                    delete o[n]
                }
            }, _lendBinding: function (e) {
                var t = this._bindings, i = e._cacheIndex, n = this._nActiveBindings++, r = t[n];
                e._cacheIndex = n, t[n] = e, r._cacheIndex = i, t[i] = r
            }, _takeBackBinding: function (e) {
                var t = this._bindings, i = e._cacheIndex, n = --this._nActiveBindings, r = t[n];
                e._cacheIndex = n, t[n] = e, r._cacheIndex = i, t[i] = r
            }, _lendControlInterpolant: function () {
                var e = this._controlInterpolants, t = this._nActiveControlInterpolants++, i = e[t];
                return void 0 === i && (i = new n.LinearInterpolant(new Float32Array(2), new Float32Array(2), 1, this._controlInterpolantsResultBuffer), i.__cacheIndex = t, e[t] = i), i
            }, _takeBackControlInterpolant: function (e) {
                var t = this._controlInterpolants, i = e.__cacheIndex, n = --this._nActiveControlInterpolants, r = t[n];
                e.__cacheIndex = n, t[n] = e, r.__cacheIndex = i, t[i] = r
            }, _controlInterpolantsResultBuffer: new Float32Array(1)
        }),n.AnimationObjectGroup = function (e) {
            this.uuid = n.Math.generateUUID(), this._objects = Array.prototype.slice.call(arguments), this.nCachedObjects_ = 0;
            var t = {};
            this._indicesByUUID = t;
            for (var i = 0, r = arguments.length; i !== r; ++i)t[arguments[i].uuid] = i;
            this._paths = [], this._parsedPaths = [], this._bindings = [], this._bindingsIndicesByPath = {};
            var o = this;
            this.stats = {
                objects: {
                    get total() {
                        return o._objects.length
                    }, get inUse() {
                        return this.total - o.nCachedObjects_
                    }
                }, get bindingsPerObject() {
                    return o._bindings.length
                }
            }
        },n.AnimationObjectGroup.prototype = {
            constructor: n.AnimationObjectGroup, add: function (e) {
                for (var t = this._objects, i = t.length, r = this.nCachedObjects_, o = this._indicesByUUID, a = this._paths, s = this._parsedPaths, l = this._bindings, h = l.length, c = 0, u = arguments.length; c !== u; ++c) {
                    var d = arguments[c], p = d.uuid, f = o[p];
                    if (void 0 === f) {
                        f = i++, o[p] = f, t.push(d);
                        for (var g = 0, m = h; g !== m; ++g)l[g].push(new n.PropertyBinding(d, a[g], s[g]))
                    } else if (r > f) {
                        var v = t[f], A = --r, y = t[A];
                        o[y.uuid] = f, t[f] = y, o[p] = A, t[A] = d;
                        for (var g = 0, m = h; g !== m; ++g) {
                            var C = l[g], I = C[A], b = C[f];
                            C[f] = I, void 0 === b && (b = new n.PropertyBinding(d, a[g], s[g])), C[A] = b
                        }
                    } else t[f] !== v && console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")
                }
                this.nCachedObjects_ = r
            }, remove: function (e) {
                for (var t = this._objects, i = (t.length, this.nCachedObjects_), n = this._indicesByUUID, r = this._bindings, o = r.length, a = 0, s = arguments.length; a !== s; ++a) {
                    var l = arguments[a], h = l.uuid, c = n[h];
                    if (void 0 !== c && c >= i) {
                        var u = i++, d = t[u];
                        n[d.uuid] = c, t[c] = d, n[h] = u, t[u] = l;
                        for (var p = 0, f = o; p !== f; ++p) {
                            var g = r[p], m = g[u], v = g[c];
                            g[c] = m, g[u] = v
                        }
                    }
                }
                this.nCachedObjects_ = i
            }, uncache: function (e) {
                for (var t = this._objects, i = t.length, n = this.nCachedObjects_, r = this._indicesByUUID, o = this._bindings, a = o.length, s = 0, l = arguments.length; s !== l; ++s) {
                    var h = arguments[s], c = h.uuid, u = r[c];
                    if (void 0 !== u)if (delete r[c], n > u) {
                        var d = --n, p = t[d], f = --i, g = t[f];
                        r[p.uuid] = u, t[u] = p, r[g.uuid] = d, t[d] = g, t.pop();
                        for (var m = 0, v = a; m !== v; ++m) {
                            var A = o[m], y = A[d], C = A[f];
                            A[u] = y, A[d] = C, A.pop()
                        }
                    } else {
                        var f = --i, g = t[f];
                        r[g.uuid] = u, t[u] = g, t.pop();
                        for (var m = 0, v = a; m !== v; ++m) {
                            var A = o[m];
                            A[u] = A[f], A.pop()
                        }
                    }
                }
                this.nCachedObjects_ = n
            }, subscribe_: function (e, t) {
                var i = this._bindingsIndicesByPath, r = i[e], o = this._bindings;
                if (void 0 !== r)return o[r];
                var a = this._paths, s = this._parsedPaths, l = this._objects, h = l.length, c = this.nCachedObjects_, u = new Array(h);
                r = o.length, i[e] = r, a.push(e), s.push(t), o.push(u);
                for (var d = c, p = l.length; d !== p; ++d) {
                    var f = l[d];
                    u[d] = new n.PropertyBinding(f, e, t)
                }
                return u
            }, unsubscribe_: function (e) {
                var t = this._bindingsIndicesByPath, i = t[e];
                if (void 0 !== i) {
                    var n = this._paths, r = this._parsedPaths, o = this._bindings, a = o.length - 1, s = o[a], l = e[a];
                    t[l] = i, o[i] = s, o.pop(), r[i] = r[a], r.pop(), n[i] = n[a], n.pop()
                }
            }
        },n.AnimationUtils = {
            arraySlice: function (e, t, i) {
                return n.AnimationUtils.isTypedArray(e) ? new e.constructor(e.subarray(t, i)) : e.slice(t, i)
            }, convertArray: function (e, t, i) {
                return !e || !i && e.constructor === t ? e : "number" == typeof t.BYTES_PER_ELEMENT ? new t(e) : Array.prototype.slice.call(e)
            }, isTypedArray: function (e) {
                return ArrayBuffer.isView(e) && !(e instanceof DataView)
            }, getKeyframeOrder: function (e) {
                function t(t, i) {
                    return e[t] - e[i]
                }

                for (var i = e.length, n = new Array(i), r = 0; r !== i; ++r)n[r] = r;
                return n.sort(t), n
            }, sortedArray: function (e, t, i) {
                for (var n = e.length, r = new e.constructor(n), o = 0, a = 0; a !== n; ++o)for (var s = i[o] * t, l = 0; l !== t; ++l)r[a++] = e[s + l];
                return r
            }, flattenJSON: function (e, t, i, n) {
                for (var r = 1, o = e[0]; void 0 !== o && void 0 === o[n];)o = e[r++];
                if (void 0 !== o) {
                    var a = o[n];
                    if (void 0 !== a)if (Array.isArray(a)) {
                        do a = o[n], void 0 !== a && (t.push(o.time), i.push.apply(i, a)), o = e[r++]; while (void 0 !== o)
                    } else if (void 0 !== a.toArray) {
                        do a = o[n], void 0 !== a && (t.push(o.time), a.toArray(i, i.length)), o = e[r++]; while (void 0 !== o)
                    } else do a = o[n], void 0 !== a && (t.push(o.time), i.push(a)), o = e[r++]; while (void 0 !== o)
                }
            }
        },n.KeyframeTrack = function (e, t, i, r) {
            if (void 0 === e)throw new Error("track name is undefined");
            if (void 0 === t || 0 === t.length)throw new Error("no keyframes in track named " + e);
            this.name = e, this.times = n.AnimationUtils.convertArray(t, this.TimeBufferType), this.values = n.AnimationUtils.convertArray(i, this.ValueBufferType), this.setInterpolation(r || this.DefaultInterpolation), this.validate(), this.optimize()
        },n.KeyframeTrack.prototype = {
            constructor: n.KeyframeTrack,
            TimeBufferType: Float32Array,
            ValueBufferType: Float32Array,
            DefaultInterpolation: n.InterpolateLinear,
            InterpolantFactoryMethodDiscrete: function (e) {
                return new n.DiscreteInterpolant(this.times, this.values, this.getValueSize(), e)
            },
            InterpolantFactoryMethodLinear: function (e) {
                return new n.LinearInterpolant(this.times, this.values, this.getValueSize(), e)
            },
            InterpolantFactoryMethodSmooth: function (e) {
                return new n.CubicInterpolant(this.times, this.values, this.getValueSize(), e)
            },
            setInterpolation: function (e) {
                var t = void 0;
                switch (e) {
                    case n.InterpolateDiscrete:
                        t = this.InterpolantFactoryMethodDiscrete;
                        break;
                    case n.InterpolateLinear:
                        t = this.InterpolantFactoryMethodLinear;
                        break;
                    case n.InterpolateSmooth:
                        t = this.InterpolantFactoryMethodSmooth
                }
                if (void 0 === t) {
                    var i = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
                    if (void 0 === this.createInterpolant) {
                        if (e === this.DefaultInterpolation)throw new Error(i);
                        this.setInterpolation(this.DefaultInterpolation)
                    }
                    return void console.warn(i)
                }
                this.createInterpolant = t
            },
            getInterpolation: function () {
                switch (this.createInterpolant) {
                    case this.InterpolantFactoryMethodDiscrete:
                        return n.InterpolateDiscrete;
                    case this.InterpolantFactoryMethodLinear:
                        return n.InterpolateLinear;
                    case this.InterpolantFactoryMethodSmooth:
                        return n.InterpolateSmooth
                }
            },
            getValueSize: function () {
                return this.values.length / this.times.length
            },
            shift: function (e) {
                if (0 !== e)for (var t = this.times, i = 0, n = t.length; i !== n; ++i)t[i] += e;
                return this
            },
            scale: function (e) {
                if (1 !== e)for (var t = this.times, i = 0, n = t.length; i !== n; ++i)t[i] *= e;
                return this
            },
            trim: function (e, t) {
                for (var i = this.times, r = i.length, o = 0, a = r - 1; o !== r && i[o] < e;)++o;
                for (; -1 !== a && i[a] > t;)--a;
                if (++a, 0 !== o || a !== r) {
                    o >= a && (a = Math.max(a, 1), o = a - 1);
                    var s = this.getValueSize();
                    this.times = n.AnimationUtils.arraySlice(i, o, a), this.values = n.AnimationUtils.arraySlice(this.values, o * s, a * s)
                }
                return this
            },
            validate: function () {
                var e = !0, t = this.getValueSize();
                t - Math.floor(t) !== 0 && (console.error("invalid value size in track", this), e = !1);
                var i = this.times, r = this.values, o = i.length;
                0 === o && (console.error("track is empty", this), e = !1);
                for (var a = null, s = 0; s !== o; s++) {
                    var l = i[s];
                    if ("number" == typeof l && isNaN(l)) {
                        console.error("time is not a valid number", this, s, l), e = !1;
                        break
                    }
                    if (null !== a && a > l) {
                        console.error("out of order keys", this, s, l, a), e = !1;
                        break
                    }
                    a = l
                }
                if (void 0 !== r && n.AnimationUtils.isTypedArray(r))for (var s = 0, h = r.length; s !== h; ++s) {
                    var c = r[s];
                    if (isNaN(c)) {
                        console.error("value is not a valid number", this, s, c), e = !1;
                        break
                    }
                }
                return e
            },
            optimize: function () {
                for (var e = this.times, t = this.values, i = this.getValueSize(), r = 1, o = 1, a = e.length - 1; a >= o; ++o) {
                    var s = !1, l = e[o], h = e[o + 1];
                    if (l !== h && (1 !== o || l !== l[0]))for (var c = o * i, u = c - i, d = c + i, p = 0; p !== i; ++p) {
                        var f = t[c + p];
                        if (f !== t[u + p] || f !== t[d + p]) {
                            s = !0;
                            break
                        }
                    }
                    if (s) {
                        if (o !== r) {
                            e[r] = e[o];
                            for (var g = o * i, m = r * i, p = 0; p !== i; ++p)t[m + p] = t[g + p]
                        }
                        ++r
                    }
                }
                return r !== e.length && (this.times = n.AnimationUtils.arraySlice(e, 0, r), this.values = n.AnimationUtils.arraySlice(t, 0, r * i)), this
            }
        },Object.assign(n.KeyframeTrack, {
            parse: function (e) {
                if (void 0 === e.type)throw new Error("track type undefined, can not parse");
                var t = n.KeyframeTrack._getTrackTypeForValueTypeName(e.type);
                if (void 0 === e.times) {
                    console.warn("legacy JSON format detected, converting");
                    var i = [], r = [];
                    n.AnimationUtils.flattenJSON(e.keys, i, r, "value"), e.times = i, e.values = r
                }
                return void 0 !== t.parse ? t.parse(e) : new t(e.name, e.times, e.values, e.interpolation)
            }, toJSON: function (e) {
                var t, i = e.constructor;
                if (void 0 !== i.toJSON)t = i.toJSON(e); else {
                    t = {
                        name: e.name,
                        times: n.AnimationUtils.convertArray(e.times, Array),
                        values: n.AnimationUtils.convertArray(e.values, Array)
                    };
                    var r = e.getInterpolation();
                    r !== e.DefaultInterpolation && (t.interpolation = r)
                }
                return t.type = e.ValueTypeName, t
            }, _getTrackTypeForValueTypeName: function (e) {
                switch (e.toLowerCase()) {
                    case"scalar":
                    case"double":
                    case"float":
                    case"number":
                    case"integer":
                        return n.NumberKeyframeTrack;
                    case"vector":
                    case"vector2":
                    case"vector3":
                    case"vector4":
                        return n.VectorKeyframeTrack;
                    case"color":
                        return n.ColorKeyframeTrack;
                    case"quaternion":
                        return n.QuaternionKeyframeTrack;
                    case"bool":
                    case"boolean":
                        return n.BooleanKeyframeTrack;
                    case"string":
                        return n.StringKeyframeTrack
                }
                throw new Error("Unsupported typeName: " + e)
            }
        }),n.PropertyBinding = function (e, t, i) {
            this.path = t, this.parsedPath = i || n.PropertyBinding.parseTrackName(t), this.node = n.PropertyBinding.findNode(e, this.parsedPath.nodeName) || e, this.rootNode = e
        },n.PropertyBinding.prototype = {
            constructor: n.PropertyBinding, getValue: function (e, t) {
                this.bind(), this.getValue(e, t)
            }, setValue: function (e, t) {
                this.bind(), this.setValue(e, t)
            }, bind: function () {
                var e = this.node, t = this.parsedPath, i = t.objectName, r = t.propertyName, o = t.propertyIndex;
                if (e || (e = n.PropertyBinding.findNode(this.rootNode, t.nodeName) || this.rootNode, this.node = e), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, !e)return void console.error("  trying to update node for track: " + this.path + " but it wasn't found.");
                if (i) {
                    var a = t.objectIndex;
                    switch (i) {
                        case"materials":
                            if (!e.material)return void console.error("  can not bind to material as node does not have a material", this);
                            if (!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array", this);
                            e = e.material.materials;
                            break;
                        case"bones":
                            if (!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton", this);
                            e = e.skeleton.bones;
                            for (var s = 0; s < e.length; s++)if (e[s].name === a) {
                                a = s;
                                break
                            }
                            break;
                        default:
                            if (void 0 === e[i])return void console.error("  can not bind to objectName of node, undefined", this);
                            e = e[i]
                    }
                    if (void 0 !== a) {
                        if (void 0 === e[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:", this, e);
                        e = e[a]
                    }
                }
                var l = e[r];
                if (!l) {
                    var h = t.nodeName;
                    return void console.error("  trying to update property for track: " + h + "." + r + " but it wasn't found.", e)
                }
                var c = this.Versioning.None;
                void 0 !== e.needsUpdate ? (c = this.Versioning.NeedsUpdate, this.targetObject = e) : void 0 !== e.matrixWorldNeedsUpdate && (c = this.Versioning.MatrixWorldNeedsUpdate, this.targetObject = e);
                var u = this.BindingType.Direct;
                if (void 0 !== o) {
                    if ("morphTargetInfluences" === r) {
                        if (!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry", this);
                        if (!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets", this);
                        for (var s = 0; s < this.node.geometry.morphTargets.length; s++)if (e.geometry.morphTargets[s].name === o) {
                            o = s;
                            break
                        }
                    }
                    u = this.BindingType.ArrayElement, this.resolvedProperty = l, this.propertyIndex = o
                } else void 0 !== l.fromArray && void 0 !== l.toArray ? (u = this.BindingType.HasFromToArray, this.resolvedProperty = l) : void 0 !== l.length ? (u = this.BindingType.EntireArray, this.resolvedProperty = l) : this.propertyName = r;
                this.getValue = this.GetterByBindingType[u], this.setValue = this.SetterByBindingTypeAndVersioning[u][c]
            }, unbind: function () {
                this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound
            }
        },Object.assign(n.PropertyBinding.prototype, {
            _getValue_unavailable: function () {
            },
            _setValue_unavailable: function () {
            },
            _getValue_unbound: n.PropertyBinding.prototype.getValue,
            _setValue_unbound: n.PropertyBinding.prototype.setValue,
            BindingType: {Direct: 0, EntireArray: 1, ArrayElement: 2, HasFromToArray: 3},
            Versioning: {None: 0, NeedsUpdate: 1, MatrixWorldNeedsUpdate: 2},
            GetterByBindingType: [function (e, t) {
                e[t] = this.node[this.propertyName]
            }, function (e, t) {
                for (var i = this.resolvedProperty, n = 0, r = i.length; n !== r; ++n)e[t++] = i[n]
            }, function (e, t) {
                e[t] = this.resolvedProperty[this.propertyIndex]
            }, function (e, t) {
                this.resolvedProperty.toArray(e, t)
            }],
            SetterByBindingTypeAndVersioning: [[function (e, t) {
                this.node[this.propertyName] = e[t]
            }, function (e, t) {
                this.node[this.propertyName] = e[t], this.targetObject.needsUpdate = !0
            }, function (e, t) {
                this.node[this.propertyName] = e[t], this.targetObject.matrixWorldNeedsUpdate = !0
            }], [function (e, t) {
                for (var i = this.resolvedProperty, n = 0, r = i.length; n !== r; ++n)i[n] = e[t++]
            }, function (e, t) {
                for (var i = this.resolvedProperty, n = 0, r = i.length; n !== r; ++n)i[n] = e[t++];
                this.targetObject.needsUpdate = !0
            }, function (e, t) {
                for (var i = this.resolvedProperty, n = 0, r = i.length; n !== r; ++n)i[n] = e[t++];
                this.targetObject.matrixWorldNeedsUpdate = !0
            }], [function (e, t) {
                this.resolvedProperty[this.propertyIndex] = e[t]
            }, function (e, t) {
                this.resolvedProperty[this.propertyIndex] = e[t], this.targetObject.needsUpdate = !0
            }, function (e, t) {
                this.resolvedProperty[this.propertyIndex] = e[t], this.targetObject.matrixWorldNeedsUpdate = !0
            }], [function (e, t) {
                this.resolvedProperty.fromArray(e, t)
            }, function (e, t) {
                this.resolvedProperty.fromArray(e, t), this.targetObject.needsUpdate = !0
            }, function (e, t) {
                this.resolvedProperty.fromArray(e, t), this.targetObject.matrixWorldNeedsUpdate = !0
            }]]
        }),n.PropertyBinding.Composite = function (e, t, i) {
            var r = i || n.PropertyBinding.parseTrackName(t);
            this._targetGroup = e, this._bindings = e.subscribe_(t, r)
        },n.PropertyBinding.Composite.prototype = {
            constructor: n.PropertyBinding.Composite,
            getValue: function (e, t) {
                this.bind();
                var i = this._targetGroup.nCachedObjects_, n = this._bindings[i];
                void 0 !== n && n.getValue(e, t)
            }, setValue: function (e, t) {
                for (var i = this._bindings, n = this._targetGroup.nCachedObjects_, r = i.length; n !== r; ++n)i[n].setValue(e, t)
            }, bind: function () {
                for (var e = this._bindings, t = this._targetGroup.nCachedObjects_, i = e.length; t !== i; ++t)e[t].bind()
            }, unbind: function () {
                for (var e = this._bindings, t = this._targetGroup.nCachedObjects_, i = e.length; t !== i; ++t)e[t].unbind()
            }
        },n.PropertyBinding.create = function (e, t, i) {
            return e instanceof n.AnimationObjectGroup ? new n.PropertyBinding.Composite(e, t, i) : new n.PropertyBinding(e, t, i)
        },n.PropertyBinding.parseTrackName = function (e) {
            var t = /^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/, i = t.exec(e);
            if (!i)throw new Error("cannot parse trackName at all: " + e);
            i.index === t.lastIndex && t.lastIndex++;
            var n = {nodeName: i[3], objectName: i[5], objectIndex: i[7], propertyName: i[9], propertyIndex: i[11]};
            if (null === n.propertyName || 0 === n.propertyName.length)throw new Error("can not parse propertyName from trackName: " + e);
            return n
        },n.PropertyBinding.findNode = function (e, t) {
            if (!t || "" === t || "root" === t || "." === t || -1 === t || t === e.name || t === e.uuid)return e;
            if (e.skeleton) {
                var i = function (e) {
                    for (var i = 0; i < e.bones.length; i++) {
                        var n = e.bones[i];
                        if (n.name === t)return n
                    }
                    return null
                }, n = i(e.skeleton);
                if (n)return n
            }
            if (e.children) {
                var r = function (e) {
                    for (var i = 0; i < e.length; i++) {
                        var n = e[i];
                        if (n.name === t || n.uuid === t)return n;
                        var o = r(n.children);
                        if (o)return o
                    }
                    return null
                }, o = r(e.children);
                if (o)return o
            }
            return null
        },n.PropertyMixer = function (e, t, i) {
            this.binding = e, this.valueSize = i;
            var n, r = Float64Array;
            switch (t) {
                case"quaternion":
                    n = this._slerp;
                    break;
                case"string":
                case"bool":
                    r = Array, n = this._select;
                    break;
                default:
                    n = this._lerp
            }
            this.buffer = new r(4 * i), this._mixBufferRegion = n, this.cumulativeWeight = 0, this.useCount = 0, this.referenceCount = 0
        },n.PropertyMixer.prototype = {
            constructor: n.PropertyMixer, accumulate: function (e, t) {
                var i = this.buffer, n = this.valueSize, r = e * n + n, o = this.cumulativeWeight;
                if (0 === o) {
                    for (var a = 0; a !== n; ++a)i[r + a] = i[a];
                    o = t
                } else {
                    o += t;
                    var s = t / o;
                    this._mixBufferRegion(i, r, 0, s, n)
                }
                this.cumulativeWeight = o
            }, apply: function (e) {
                var t = this.valueSize, i = this.buffer, n = e * t + t, r = this.cumulativeWeight, o = this.binding;
                if (this.cumulativeWeight = 0, 1 > r) {
                    var a = 3 * t;
                    this._mixBufferRegion(i, n, a, 1 - r, t)
                }
                for (var s = t, l = t + t; s !== l; ++s)if (i[s] !== i[s + t]) {
                    o.setValue(i, n);
                    break
                }
            }, saveOriginalState: function () {
                var e = this.binding, t = this.buffer, i = this.valueSize, n = 3 * i;
                e.getValue(t, n);
                for (var r = i, o = n; r !== o; ++r)t[r] = t[n + r % i];
                this.cumulativeWeight = 0
            }, restoreOriginalState: function () {
                var e = 3 * this.valueSize;
                this.binding.setValue(this.buffer, e)
            }, _select: function (e, t, i, n, r) {
                if (n >= .5)for (var o = 0; o !== r; ++o)e[t + o] = e[i + o]
            }, _slerp: function (e, t, i, r, o) {
                n.Quaternion.slerpFlat(e, t, e, t, e, i, r)
            }, _lerp: function (e, t, i, n, r) {
                for (var o = 1 - n, a = 0; a !== r; ++a) {
                    var s = t + a;
                    e[s] = e[s] * o + e[i + a] * n
                }
            }
        },n.BooleanKeyframeTrack = function (e, t, i) {
            n.KeyframeTrack.call(this, e, t, i)
        },n.BooleanKeyframeTrack.prototype = Object.assign(Object.create(n.KeyframeTrack.prototype), {
            constructor: n.BooleanKeyframeTrack,
            ValueTypeName: "bool",
            ValueBufferType: Array,
            DefaultInterpolation: n.IntepolateDiscrete,
            InterpolantFactoryMethodLinear: void 0,
            InterpolantFactoryMethodSmooth: void 0
        }),n.NumberKeyframeTrack = function (e, t, i, r) {
            n.KeyframeTrack.call(this, e, t, i, r)
        },n.NumberKeyframeTrack.prototype = Object.assign(Object.create(n.KeyframeTrack.prototype), {
            constructor: n.NumberKeyframeTrack,
            ValueTypeName: "number"
        }),n.QuaternionKeyframeTrack = function (e, t, i, r) {
            n.KeyframeTrack.call(this, e, t, i, r)
        },n.QuaternionKeyframeTrack.prototype = Object.assign(Object.create(n.KeyframeTrack.prototype), {
            constructor: n.QuaternionKeyframeTrack,
            ValueTypeName: "quaternion",
            DefaultInterpolation: n.InterpolateLinear,
            InterpolantFactoryMethodLinear: function (e) {
                return new n.QuaternionLinearInterpolant(this.times, this.values, this.getValueSize(), e)
            },
            InterpolantFactoryMethodSmooth: void 0
        }),n.StringKeyframeTrack = function (e, t, i, r) {
            n.KeyframeTrack.call(this, e, t, i, r)
        },n.StringKeyframeTrack.prototype = Object.assign(Object.create(n.KeyframeTrack.prototype), {
            constructor: n.StringKeyframeTrack,
            ValueTypeName: "string",
            ValueBufferType: Array,
            DefaultInterpolation: n.IntepolateDiscrete,
            InterpolantFactoryMethodLinear: void 0,
            InterpolantFactoryMethodSmooth: void 0
        }),n.VectorKeyframeTrack = function (e, t, i, r) {
            n.KeyframeTrack.call(this, e, t, i, r)
        },n.VectorKeyframeTrack.prototype = Object.assign(Object.create(n.KeyframeTrack.prototype), {
            constructor: n.VectorKeyframeTrack,
            ValueTypeName: "vector"
        }),n.Audio = function (e) {
            n.Object3D.call(this), this.type = "Audio", this.context = e.context, this.source = this.context.createBufferSource(), this.source.onended = this.onEnded.bind(this), this.gain = this.context.createGain(), this.gain.connect(e.getInput()), this.autoplay = !1, this.startTime = 0, this.playbackRate = 1, this.isPlaying = !1, this.hasPlaybackControl = !0, this.sourceType = "empty", this.filter = null
        },n.Audio.prototype = Object.create(n.Object3D.prototype),n.Audio.prototype.constructor = n.Audio,n.Audio.prototype.getOutput = function () {
            return this.gain
        },n.Audio.prototype.load = function (e) {
            var t = new n.AudioBuffer(this.context);
            return t.load(e), this.setBuffer(t), this
        },n.Audio.prototype.setNodeSource = function (e) {
            return this.hasPlaybackControl = !1, this.sourceType = "audioNode", this.source = e, this.connect(), this
        },n.Audio.prototype.setBuffer = function (e) {
            var t = this;
            return e.onReady(function (e) {
                t.source.buffer = e, t.sourceType = "buffer", t.autoplay && t.play()
            }), this
        },n.Audio.prototype.play = function () {
            if (this.isPlaying === !0)return void console.warn("THREE.Audio: Audio is already playing.");
            if (this.hasPlaybackControl === !1)return void console.warn("THREE.Audio: this Audio has no playback control.");
            var e = this.context.createBufferSource();
            e.buffer = this.source.buffer, e.loop = this.source.loop, e.onended = this.source.onended, e.start(0, this.startTime), e.playbackRate.value = this.playbackRate, this.isPlaying = !0, this.source = e, this.connect()
        },n.Audio.prototype.pause = function () {
            return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.source.stop(), void(this.startTime = this.context.currentTime))
        },n.Audio.prototype.stop = function () {
            return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.source.stop(), void(this.startTime = 0))
        },n.Audio.prototype.connect = function () {
            null !== this.filter ? (this.source.connect(this.filter), this.filter.connect(this.getOutput())) : this.source.connect(this.getOutput())
        },n.Audio.prototype.disconnect = function () {
            null !== this.filter ? (this.source.disconnect(this.filter), this.filter.disconnect(this.getOutput())) : this.source.disconnect(this.getOutput())
        },n.Audio.prototype.getFilter = function () {
            return this.filter
        },n.Audio.prototype.setFilter = function (e) {
            void 0 === e && (e = null), this.isPlaying === !0 ? (this.disconnect(), this.filter = e, this.connect()) : this.filter = e
        },n.Audio.prototype.setPlaybackRate = function (e) {
            return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.playbackRate = e, void(this.isPlaying === !0 && (this.source.playbackRate.value = this.playbackRate)))
        },n.Audio.prototype.getPlaybackRate = function () {
            return this.playbackRate
        },n.Audio.prototype.onEnded = function () {
            this.isPlaying = !1
        },n.Audio.prototype.setLoop = function (e) {
            return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : void(this.source.loop = e)
        },n.Audio.prototype.getLoop = function () {
            return this.hasPlaybackControl === !1 ? (console.warn("THREE.Audio: this Audio has no playback control."), !1) : this.source.loop
        },n.Audio.prototype.setVolume = function (e) {
            this.gain.gain.value = e
        },n.Audio.prototype.getVolume = function () {
            return this.gain.gain.value
        },n.AudioAnalyser = function (e, t) {
            this.analyser = e.context.createAnalyser(), this.analyser.fftSize = void 0 !== t ? t : 2048, this.data = new Uint8Array(this.analyser.frequencyBinCount), e.getOutput().connect(this.analyser)
        },n.AudioAnalyser.prototype = {
            constructor: n.AudioAnalyser, getData: function () {
                return this.analyser.getByteFrequencyData(this.data), this.data
            }
        },n.AudioBuffer = function (e) {
            this.context = e, this.ready = !1, this.readyCallbacks = []
        },n.AudioBuffer.prototype.load = function (e) {
            var t = this, i = new XMLHttpRequest;
            return i.open("GET", e, !0), i.responseType = "arraybuffer", i.onload = function (e) {
                t.context.decodeAudioData(this.response, function (e) {
                    t.buffer = e, t.ready = !0;
                    for (var i = 0; i < t.readyCallbacks.length; i++)t.readyCallbacks[i](t.buffer);
                    t.readyCallbacks = []
                })
            }, i.send(), this
        },n.AudioBuffer.prototype.onReady = function (e) {
            this.ready ? e(this.buffer) : this.readyCallbacks.push(e)
        },n.PositionalAudio = function (e) {
            n.Audio.call(this, e), this.panner = this.context.createPanner(), this.panner.connect(this.gain)
        },n.PositionalAudio.prototype = Object.create(n.Audio.prototype),n.PositionalAudio.prototype.constructor = n.PositionalAudio,n.PositionalAudio.prototype.getOutput = function () {
            return this.panner
        },n.PositionalAudio.prototype.setRefDistance = function (e) {
            this.panner.refDistance = e
        },n.PositionalAudio.prototype.getRefDistance = function () {
            return this.panner.refDistance
        },n.PositionalAudio.prototype.setRolloffFactor = function (e) {
            this.panner.rolloffFactor = e
        },n.PositionalAudio.prototype.getRolloffFactor = function () {
            return this.panner.rolloffFactor
        },n.PositionalAudio.prototype.setDistanceModel = function (e) {
            this.panner.distanceModel = e
        },n.PositionalAudio.prototype.getDistanceModel = function () {
            return this.panner.distanceModel
        },n.PositionalAudio.prototype.setMaxDistance = function (e) {
            this.panner.maxDistance = e
        },n.PositionalAudio.prototype.getMaxDistance = function () {
            return this.panner.maxDistance
        },n.PositionalAudio.prototype.updateMatrixWorld = function () {
            var e = new n.Vector3;
            return function (t) {
                n.Object3D.prototype.updateMatrixWorld.call(this, t), e.setFromMatrixPosition(this.matrixWorld), this.panner.setPosition(e.x, e.y, e.z)
            }
        }(),n.AudioListener = function () {
            n.Object3D.call(this), this.type = "AudioListener", this.context = new (window.AudioContext || window.webkitAudioContext), this.gain = this.context.createGain(), this.gain.connect(this.context.destination), this.filter = null
        },n.AudioListener.prototype = Object.create(n.Object3D.prototype),n.AudioListener.prototype.constructor = n.AudioListener,n.AudioListener.prototype.getInput = function () {
            return this.gain
        },n.AudioListener.prototype.removeFilter = function () {
            null !== this.filter && (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination), this.gain.connect(this.context.destination), this.filter = null)
        },n.AudioListener.prototype.setFilter = function (e) {
            null !== this.filter ? (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination)) : this.gain.disconnect(this.context.destination), this.filter = e, this.gain.connect(this.filter), this.filter.connect(this.context.destination)
        },n.AudioListener.prototype.getFilter = function () {
            return this.filter
        },n.AudioListener.prototype.setMasterVolume = function (e) {
            this.gain.gain.value = e
        },n.AudioListener.prototype.getMasterVolume = function () {
            return this.gain.gain.value
        },n.AudioListener.prototype.updateMatrixWorld = function () {
            var e = new n.Vector3, t = new n.Quaternion, i = new n.Vector3, r = new n.Vector3;
            return function (o) {
                n.Object3D.prototype.updateMatrixWorld.call(this, o);
                var a = this.context.listener, s = this.up;
                this.matrixWorld.decompose(e, t, i), r.set(0, 0, -1).applyQuaternion(t), a.setPosition(e.x, e.y, e.z), a.setOrientation(r.x, r.y, r.z, s.x, s.y, s.z)
            }
        }(),n.Camera = function () {
            n.Object3D.call(this), this.type = "Camera", this.matrixWorldInverse = new n.Matrix4, this.projectionMatrix = new n.Matrix4
        },n.Camera.prototype = Object.create(n.Object3D.prototype),n.Camera.prototype.constructor = n.Camera,n.Camera.prototype.getWorldDirection = function () {
            var e = new n.Quaternion;
            return function (t) {
                var i = t || new n.Vector3;
                return this.getWorldQuaternion(e), i.set(0, 0, -1).applyQuaternion(e)
            }
        }(),n.Camera.prototype.lookAt = function () {
            var e = new n.Matrix4;
            return function (t) {
                e.lookAt(this.position, t, this.up), this.quaternion.setFromRotationMatrix(e)
            }
        }(),n.Camera.prototype.clone = function () {
            return (new this.constructor).copy(this)
        },n.Camera.prototype.copy = function (e) {
            return n.Object3D.prototype.copy.call(this, e), this.matrixWorldInverse.copy(e.matrixWorldInverse), this.projectionMatrix.copy(e.projectionMatrix), this
        },n.CubeCamera = function (e, t, i) {
            n.Object3D.call(this), this.type = "CubeCamera";
            var r = 90, o = 1, a = new n.PerspectiveCamera(r, o, e, t);
            a.up.set(0, -1, 0), a.lookAt(new n.Vector3(1, 0, 0)), this.add(a);
            var s = new n.PerspectiveCamera(r, o, e, t);
            s.up.set(0, -1, 0), s.lookAt(new n.Vector3(-1, 0, 0)), this.add(s);
            var l = new n.PerspectiveCamera(r, o, e, t);
            l.up.set(0, 0, 1), l.lookAt(new n.Vector3(0, 1, 0)), this.add(l);
            var h = new n.PerspectiveCamera(r, o, e, t);
            h.up.set(0, 0, -1), h.lookAt(new n.Vector3(0, -1, 0)), this.add(h);
            var c = new n.PerspectiveCamera(r, o, e, t);
            c.up.set(0, -1, 0), c.lookAt(new n.Vector3(0, 0, 1)), this.add(c);
            var u = new n.PerspectiveCamera(r, o, e, t);
            u.up.set(0, -1, 0), u.lookAt(new n.Vector3(0, 0, -1)), this.add(u);
            var d = {format: n.RGBFormat, magFilter: n.LinearFilter, minFilter: n.LinearFilter};
            this.renderTarget = new n.WebGLRenderTargetCube(i, i, d), this.updateCubeMap = function (e, t) {
                null === this.parent && this.updateMatrixWorld();
                var i = this.renderTarget, n = i.texture.generateMipmaps;
                i.texture.generateMipmaps = !1, i.activeCubeFace = 0, e.render(t, a, i), i.activeCubeFace = 1, e.render(t, s, i), i.activeCubeFace = 2, e.render(t, l, i), i.activeCubeFace = 3, e.render(t, h, i), i.activeCubeFace = 4, e.render(t, c, i), i.texture.generateMipmaps = n, i.activeCubeFace = 5, e.render(t, u, i), e.setRenderTarget(null)
            }
        },n.CubeCamera.prototype = Object.create(n.Object3D.prototype),n.CubeCamera.prototype.constructor = n.CubeCamera,n.OrthographicCamera = function (e, t, i, r, o, a) {
            n.Camera.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.left = e, this.right = t, this.top = i, this.bottom = r, this.near = void 0 !== o ? o : .1, this.far = void 0 !== a ? a : 2e3, this.updateProjectionMatrix()
        },n.OrthographicCamera.prototype = Object.create(n.Camera.prototype),n.OrthographicCamera.prototype.constructor = n.OrthographicCamera,n.OrthographicCamera.prototype.updateProjectionMatrix = function () {
            var e = (this.right - this.left) / (2 * this.zoom), t = (this.top - this.bottom) / (2 * this.zoom), i = (this.right + this.left) / 2, n = (this.top + this.bottom) / 2;
            this.projectionMatrix.makeOrthographic(i - e, i + e, n + t, n - t, this.near, this.far)
        },n.OrthographicCamera.prototype.copy = function (e) {
            return n.Camera.prototype.copy.call(this, e), this.left = e.left, this.right = e.right, this.top = e.top, this.bottom = e.bottom, this.near = e.near, this.far = e.far, this.zoom = e.zoom, this
        },n.OrthographicCamera.prototype.toJSON = function (e) {
            var t = n.Object3D.prototype.toJSON.call(this, e);
            return t.object.zoom = this.zoom, t.object.left = this.left, t.object.right = this.right, t.object.top = this.top, t.object.bottom = this.bottom, t.object.near = this.near, t.object.far = this.far, t
        },n.PerspectiveCamera = function (e, t, i, r) {
            n.Camera.call(this), this.type = "PerspectiveCamera", this.focalLength = 10, this.zoom = 1, this.fov = void 0 !== e ? e : 50, this.aspect = void 0 !== t ? t : 1, this.near = void 0 !== i ? i : .1, this.far = void 0 !== r ? r : 2e3, this.updateProjectionMatrix()
        },n.PerspectiveCamera.prototype = Object.create(n.Camera.prototype),n.PerspectiveCamera.prototype.constructor = n.PerspectiveCamera,n.PerspectiveCamera.prototype.setLens = function (e, t) {
            void 0 === t && (t = 24), this.fov = 2 * n.Math.radToDeg(Math.atan(t / (2 * e))), this.updateProjectionMatrix()
        },n.PerspectiveCamera.prototype.setViewOffset = function (e, t, i, n, r, o) {
            this.fullWidth = e, this.fullHeight = t, this.x = i, this.y = n, this.width = r, this.height = o, this.updateProjectionMatrix()
        },n.PerspectiveCamera.prototype.updateProjectionMatrix = function () {
            var e = n.Math.radToDeg(2 * Math.atan(Math.tan(.5 * n.Math.degToRad(this.fov)) / this.zoom));
            if (this.fullWidth) {
                var t = this.fullWidth / this.fullHeight, i = Math.tan(n.Math.degToRad(.5 * e)) * this.near, r = -i, o = t * r, a = t * i, s = Math.abs(a - o), l = Math.abs(i - r);
                this.projectionMatrix.makeFrustum(o + this.x * s / this.fullWidth, o + (this.x + this.width) * s / this.fullWidth, i - (this.y + this.height) * l / this.fullHeight, i - this.y * l / this.fullHeight, this.near, this.far)
            } else this.projectionMatrix.makePerspective(e, this.aspect, this.near, this.far)
        },n.PerspectiveCamera.prototype.copy = function (e) {
            return n.Camera.prototype.copy.call(this, e), this.focalLength = e.focalLength, this.zoom = e.zoom, this.fov = e.fov, this.aspect = e.aspect, this.near = e.near, this.far = e.far, this
        },n.PerspectiveCamera.prototype.toJSON = function (e) {
            var t = n.Object3D.prototype.toJSON.call(this, e);
            return t.object.focalLength = this.focalLength, t.object.zoom = this.zoom, t.object.fov = this.fov, t.object.aspect = this.aspect, t.object.near = this.near, t.object.far = this.far, t
        },n.StereoCamera = function () {
            this.type = "StereoCamera", this.aspect = 1, this.cameraL = new n.PerspectiveCamera, this.cameraL.layers.enable(1), this.cameraL.matrixAutoUpdate = !1, this.cameraR = new n.PerspectiveCamera, this.cameraR.layers.enable(2), this.cameraR.matrixAutoUpdate = !1
        },n.StereoCamera.prototype = {
            constructor: n.StereoCamera, update: function () {
                var e, t, i, r, o, a = new n.Matrix4, s = new n.Matrix4;
                return function (l) {
                    var h = e !== l.focalLength || t !== l.fov || i !== l.aspect * this.aspect || r !== l.near || o !== l.far;
                    if (h) {
                        e = l.focalLength, t = l.fov, i = l.aspect * this.aspect, r = l.near, o = l.far;
                        var c, u, d = l.projectionMatrix.clone(), p = .032, f = p * r / e, g = r * Math.tan(n.Math.degToRad(.5 * t));
                        s.elements[12] = -p, a.elements[12] = p, c = -g * i + f, u = g * i + f, d.elements[0] = 2 * r / (u - c), d.elements[8] = (u + c) / (u - c), this.cameraL.projectionMatrix.copy(d), c = -g * i - f, u = g * i - f, d.elements[0] = 2 * r / (u - c), d.elements[8] = (u + c) / (u - c), this.cameraR.projectionMatrix.copy(d)
                    }
                    this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(s), this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(a)
                }
            }()
        },n.Light = function (e, t) {
            n.Object3D.call(this), this.type = "Light", this.color = new n.Color(e), this.intensity = void 0 !== t ? t : 1, this.receiveShadow = void 0
        },n.Light.prototype = Object.create(n.Object3D.prototype),n.Light.prototype.constructor = n.Light,n.Light.prototype.copy = function (e) {
            return n.Object3D.prototype.copy.call(this, e), this.color.copy(e.color), this.intensity = e.intensity, this
        },n.Light.prototype.toJSON = function (e) {
            var t = n.Object3D.prototype.toJSON.call(this, e);
            return t.object.color = this.color.getHex(), t.object.intensity = this.intensity, void 0 !== this.groundColor && (t.object.groundColor = this.groundColor.getHex()), void 0 !== this.distance && (t.object.distance = this.distance), void 0 !== this.angle && (t.object.angle = this.angle), void 0 !== this.decay && (t.object.decay = this.decay), void 0 !== this.penumbra && (t.object.penumbra = this.penumbra), t
        },n.LightShadow = function (e) {
            this.camera = e, this.bias = 0, this.radius = 1, this.mapSize = new n.Vector2(512, 512), this.map = null, this.matrix = new n.Matrix4
        },n.LightShadow.prototype = {
            constructor: n.LightShadow, copy: function (e) {
                return this.camera = e.camera.clone(), this.bias = e.bias, this.radius = e.radius, this.mapSize.copy(e.mapSize), this
            }, clone: function () {
                return (new this.constructor).copy(this)
            }
        },n.AmbientLight = function (e, t) {
            n.Light.call(this, e, t), this.type = "AmbientLight", this.castShadow = void 0
        },n.AmbientLight.prototype = Object.create(n.Light.prototype),n.AmbientLight.prototype.constructor = n.AmbientLight,n.DirectionalLight = function (e, t) {
            n.Light.call(this, e, t), this.type = "DirectionalLight", this.position.set(0, 1, 0), this.updateMatrix(), this.target = new n.Object3D, this.shadow = new n.LightShadow(new n.OrthographicCamera(-5, 5, 5, -5, .5, 500))
        },n.DirectionalLight.prototype = Object.create(n.Light.prototype),n.DirectionalLight.prototype.constructor = n.DirectionalLight,n.DirectionalLight.prototype.copy = function (e) {
            return n.Light.prototype.copy.call(this, e), this.target = e.target.clone(), this.shadow = e.shadow.clone(), this
        },n.HemisphereLight = function (e, t, i) {
            n.Light.call(this, e, i), this.type = "HemisphereLight", this.castShadow = void 0, this.position.set(0, 1, 0), this.updateMatrix(), this.groundColor = new n.Color(t)
        },n.HemisphereLight.prototype = Object.create(n.Light.prototype),n.HemisphereLight.prototype.constructor = n.HemisphereLight,n.HemisphereLight.prototype.copy = function (e) {
            return n.Light.prototype.copy.call(this, e), this.groundColor.copy(e.groundColor), this
        },n.PointLight = function (e, t, i, r) {
            n.Light.call(this, e, t), this.type = "PointLight", this.distance = void 0 !== i ? i : 0, this.decay = void 0 !== r ? r : 1, this.shadow = new n.LightShadow(new n.PerspectiveCamera(90, 1, .5, 500))
        },n.PointLight.prototype = Object.create(n.Light.prototype),n.PointLight.prototype.constructor = n.PointLight,Object.defineProperty(n.PointLight.prototype, "power", {
            get: function () {
                return 4 * this.intensity * Math.PI
            }, set: function (e) {
                this.intensity = e / (4 * Math.PI)
            }
        }),n.PointLight.prototype.copy = function (e) {
            return n.Light.prototype.copy.call(this, e), this.distance = e.distance, this.decay = e.decay, this.shadow = e.shadow.clone(), this
        },n.SpotLight = function (e, t, i, r, o, a) {
            n.Light.call(this, e, t), this.type = "SpotLight", this.position.set(0, 1, 0), this.updateMatrix(), this.target = new n.Object3D, this.distance = void 0 !== i ? i : 0, this.angle = void 0 !== r ? r : Math.PI / 3, this.penumbra = void 0 !== o ? o : 0, this.decay = void 0 !== a ? a : 1, this.shadow = new n.LightShadow(new n.PerspectiveCamera(50, 1, .5, 500))
        },n.SpotLight.prototype = Object.create(n.Light.prototype),n.SpotLight.prototype.constructor = n.SpotLight,Object.defineProperty(n.SpotLight.prototype, "power", {
            get: function () {
                return this.intensity * Math.PI
            }, set: function (e) {
                this.intensity = e / Math.PI
            }
        }),n.SpotLight.prototype.copy = function (e) {
            return n.Light.prototype.copy.call(this, e), this.distance = e.distance, this.angle = e.angle, this.penumbra = e.penumbra, this.decay = e.decay, this.target = e.target.clone(), this.shadow = e.shadow.clone(), this
        },n.Cache = {
            enabled: !1, files: {}, add: function (e, t) {
                this.enabled !== !1 && (this.files[e] = t)
            }, get: function (e) {
                return this.enabled !== !1 ? this.files[e] : void 0
            }, remove: function (e) {
                delete this.files[e]
            }, clear: function () {
                this.files = {}
            }
        },n.Loader = function () {
            this.onLoadStart = function () {
            }, this.onLoadProgress = function () {
            }, this.onLoadComplete = function () {
            }
        },n.Loader.prototype = {
            constructor: n.Loader, crossOrigin: void 0, extractUrlBase: function (e) {
                var t = e.split("/");
                return 1 === t.length ? "./" : (t.pop(), t.join("/") + "/")
            }, initMaterials: function (e, t, i) {
                for (var n = [], r = 0; r < e.length; ++r)n[r] = this.createMaterial(e[r], t, i);
                return n
            }, createMaterial: function () {
                var e, t, i;
                return function (r, o, a) {
                    function s(e, i, r, s, h) {
                        var c, u = o + e, d = n.Loader.Handlers.get(u);
                        null !== d ? c = d.load(u) : (t.setCrossOrigin(a), c = t.load(u)), void 0 !== i && (c.repeat.fromArray(i), 1 !== i[0] && (c.wrapS = n.RepeatWrapping), 1 !== i[1] && (c.wrapT = n.RepeatWrapping)), void 0 !== r && c.offset.fromArray(r), void 0 !== s && ("repeat" === s[0] && (c.wrapS = n.RepeatWrapping), "mirror" === s[0] && (c.wrapS = n.MirroredRepeatWrapping), "repeat" === s[1] && (c.wrapT = n.RepeatWrapping), "mirror" === s[1] && (c.wrapT = n.MirroredRepeatWrapping)), void 0 !== h && (c.anisotropy = h);
                        var p = n.Math.generateUUID();
                        return l[p] = c, p
                    }

                    void 0 === e && (e = new n.Color), void 0 === t && (t = new n.TextureLoader), void 0 === i && (i = new n.MaterialLoader);
                    var l = {}, h = {uuid: n.Math.generateUUID(), type: "MeshLambertMaterial"};
                    for (var c in r) {
                        var u = r[c];
                        switch (c) {
                            case"DbgColor":
                            case"DbgIndex":
                            case"opticalDensity":
                            case"illumination":
                                break;
                            case"DbgName":
                                h.name = u;
                                break;
                            case"blending":
                                h.blending = n[u];
                                break;
                            case"colorAmbient":
                            case"mapAmbient":
                                console.warn("THREE.Loader.createMaterial:", c, "is no longer supported.");
                                break;
                            case"colorDiffuse":
                                h.color = e.fromArray(u).getHex();
                                break;
                            case"colorSpecular":
                                h.specular = e.fromArray(u).getHex();
                                break;
                            case"colorEmissive":
                                h.emissive = e.fromArray(u).getHex();
                                break;
                            case"specularCoef":
                                h.shininess = u;
                                break;
                            case"shading":
                                "basic" === u.toLowerCase() && (h.type = "MeshBasicMaterial"), "phong" === u.toLowerCase() && (h.type = "MeshPhongMaterial");
                                break;
                            case"mapDiffuse":
                                h.map = s(u, r.mapDiffuseRepeat, r.mapDiffuseOffset, r.mapDiffuseWrap, r.mapDiffuseAnisotropy);
                                break;
                            case"mapDiffuseRepeat":
                            case"mapDiffuseOffset":
                            case"mapDiffuseWrap":
                            case"mapDiffuseAnisotropy":
                                break;
                            case"mapLight":
                                h.lightMap = s(u, r.mapLightRepeat, r.mapLightOffset, r.mapLightWrap, r.mapLightAnisotropy);
                                break;
                            case"mapLightRepeat":
                            case"mapLightOffset":
                            case"mapLightWrap":
                            case"mapLightAnisotropy":
                                break;
                            case"mapAO":
                                h.aoMap = s(u, r.mapAORepeat, r.mapAOOffset, r.mapAOWrap, r.mapAOAnisotropy);
                                break;
                            case"mapAORepeat":
                            case"mapAOOffset":
                            case"mapAOWrap":
                            case"mapAOAnisotropy":
                                break;
                            case"mapBump":
                                h.bumpMap = s(u, r.mapBumpRepeat, r.mapBumpOffset, r.mapBumpWrap, r.mapBumpAnisotropy);
                                break;
                            case"mapBumpScale":
                                h.bumpScale = u;
                                break;
                            case"mapBumpRepeat":
                            case"mapBumpOffset":
                            case"mapBumpWrap":
                            case"mapBumpAnisotropy":
                                break;
                            case"mapNormal":
                                h.normalMap = s(u, r.mapNormalRepeat, r.mapNormalOffset, r.mapNormalWrap, r.mapNormalAnisotropy);
                                break;
                            case"mapNormalFactor":
                                h.normalScale = [u, u];
                                break;
                            case"mapNormalRepeat":
                            case"mapNormalOffset":
                            case"mapNormalWrap":
                            case"mapNormalAnisotropy":
                                break;
                            case"mapSpecular":
                                h.specularMap = s(u, r.mapSpecularRepeat, r.mapSpecularOffset, r.mapSpecularWrap, r.mapSpecularAnisotropy);
                                break;
                            case"mapSpecularRepeat":
                            case"mapSpecularOffset":
                            case"mapSpecularWrap":
                            case"mapSpecularAnisotropy":
                                break;
                            case"mapAlpha":
                                h.alphaMap = s(u, r.mapAlphaRepeat, r.mapAlphaOffset, r.mapAlphaWrap, r.mapAlphaAnisotropy);
                                break;
                            case"mapAlphaRepeat":
                            case"mapAlphaOffset":
                            case"mapAlphaWrap":
                            case"mapAlphaAnisotropy":
                                break;
                            case"flipSided":
                                h.side = n.BackSide;
                                break;
                            case"doubleSided":
                                h.side = n.DoubleSide;
                                break;
                            case"transparency":
                                console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"), h.opacity = u;
                                break;
                            case"depthTest":
                            case"depthWrite":
                            case"colorWrite":
                            case"opacity":
                            case"reflectivity":
                            case"transparent":
                            case"visible":
                            case"wireframe":
                                h[c] = u;
                                break;
                            case"vertexColors":
                                u === !0 && (h.vertexColors = n.VertexColors), "face" === u && (h.vertexColors = n.FaceColors);
                                break;
                            default:
                                console.error("THREE.Loader.createMaterial: Unsupported", c, u)
                        }
                    }
                    return "MeshBasicMaterial" === h.type && delete h.emissive, "MeshPhongMaterial" !== h.type && delete h.specular, h.opacity < 1 && (h.transparent = !0), i.setTextures(l), i.parse(h)
                }
            }()
        },n.Loader.Handlers = {
            handlers: [], add: function (e, t) {
                this.handlers.push(e, t)
            }, get: function (e) {
                for (var t = this.handlers, i = 0, n = t.length; n > i; i += 2) {
                    var r = t[i], o = t[i + 1];
                    if (r.test(e))return o
                }
                return null
            }
        },n.XHRLoader = function (e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager
        },n.XHRLoader.prototype = {
            constructor: n.XHRLoader, load: function (e, t, i, r) {
                void 0 !== this.path && (e = this.path + e);
                var o = this, a = n.Cache.get(e);
                if (void 0 !== a)return t && setTimeout(function () {
                    t(a)
                }, 0), a;
                var s = new XMLHttpRequest;
                return s.overrideMimeType("text/plain"), s.open("GET", e, !0), s.addEventListener("load", function (i) {
                    var a = i.target.response;
                    n.Cache.add(e, a), 200 === this.status ? (t && t(a), o.manager.itemEnd(e)) : 0 === this.status ? (console.warn("THREE.XHRLoader: HTTP Status 0 received."), t && t(a), o.manager.itemEnd(e)) : (r && r(i), o.manager.itemError(e))
                }, !1), void 0 !== i && s.addEventListener("progress", function (e) {
                    i(e)
                }, !1), s.addEventListener("error", function (t) {
                    r && r(t), o.manager.itemError(e)
                }, !1), void 0 !== this.responseType && (s.responseType = this.responseType), void 0 !== this.withCredentials && (s.withCredentials = this.withCredentials), s.send(null), o.manager.itemStart(e), s
            }, setPath: function (e) {
                this.path = e
            }, setResponseType: function (e) {
                this.responseType = e
            }, setWithCredentials: function (e) {
                this.withCredentials = e
            }
        },n.FontLoader = function (e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager
        },n.FontLoader.prototype = {
            constructor: n.FontLoader, load: function (e, t, i, r) {
                var o = new n.XHRLoader(this.manager);
                o.load(e, function (e) {
                    t(new n.Font(JSON.parse(e.substring(65, e.length - 2))))
                }, i, r)
            }
        },n.ImageLoader = function (e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager
        },n.ImageLoader.prototype = {
            constructor: n.ImageLoader, load: function (e, t, i, r) {
                void 0 !== this.path && (e = this.path + e);
                var o = this, a = n.Cache.get(e);
                if (void 0 !== a)return o.manager.itemStart(e), t ? setTimeout(function () {
                    t(a), o.manager.itemEnd(e)
                }, 0) : o.manager.itemEnd(e), a;
                var s = document.createElement("img");
                return s.addEventListener("load", function (i) {
                    n.Cache.add(e, this), t && t(this), o.manager.itemEnd(e)
                }, !1), void 0 !== i && s.addEventListener("progress", function (e) {
                    i(e)
                }, !1), s.addEventListener("error", function (t) {
                    r && r(t), o.manager.itemError(e)
                }, !1), void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin), o.manager.itemStart(e), s.src = e, s
            }, setCrossOrigin: function (e) {
                this.crossOrigin = e
            }, setPath: function (e) {
                this.path = e
            }
        },n.JSONLoader = function (e) {
            "boolean" == typeof e && (console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."), e = void 0), this.manager = void 0 !== e ? e : n.DefaultLoadingManager, this.withCredentials = !1
        },n.JSONLoader.prototype = {
            constructor: n.JSONLoader, get statusDomElement() {
                return void 0 === this._statusDomElement && (this._statusDomElement = document.createElement("div")), console.warn("THREE.JSONLoader: .statusDomElement has been removed."), this._statusDomElement
            }, load: function (e, t, i, r) {
                var o = this, a = this.texturePath && "string" == typeof this.texturePath ? this.texturePath : n.Loader.prototype.extractUrlBase(e), s = new n.XHRLoader(this.manager);
                s.setWithCredentials(this.withCredentials), s.load(e, function (i) {
                    var n = JSON.parse(i), r = n.metadata;
                    if (void 0 !== r) {
                        var s = r.type;
                        if (void 0 !== s) {
                            if ("object" === s.toLowerCase())return void console.error("THREE.JSONLoader: " + e + " should be loaded with THREE.ObjectLoader instead.");
                            if ("scene" === s.toLowerCase())return void console.error("THREE.JSONLoader: " + e + " should be loaded with THREE.SceneLoader instead.")
                        }
                    }
                    var l = o.parse(n, a);
                    t(l.geometry, l.materials)
                }, i, r)
            }, setTexturePath: function (e) {
                this.texturePath = e
            }, parse: function (e, t) {
                function i(t) {
                    function i(e, t) {
                        return e & 1 << t
                    }

                    var r, o, a, l, h, c, u, d, p, f, g, m, v, A, y, C, I, b, w, x, E, M, T, S, P, _, L, D = e.faces, R = e.vertices, B = e.normals, O = e.colors, F = 0;
                    if (void 0 !== e.uvs) {
                        for (r = 0; r < e.uvs.length; r++)e.uvs[r].length && F++;
                        for (r = 0; F > r; r++)s.faceVertexUvs[r] = []
                    }
                    for (l = 0, h = R.length; h > l;)b = new n.Vector3, b.x = R[l++] * t, b.y = R[l++] * t, b.z = R[l++] * t, s.vertices.push(b);
                    for (l = 0, h = D.length; h > l;)if (f = D[l++], g = i(f, 0), m = i(f, 1), v = i(f, 3), A = i(f, 4), y = i(f, 5), C = i(f, 6), I = i(f, 7), g) {
                        if (x = new n.Face3, x.a = D[l], x.b = D[l + 1], x.c = D[l + 3], E = new n.Face3, E.a = D[l + 1], E.b = D[l + 2], E.c = D[l + 3], l += 4, m && (p = D[l++], x.materialIndex = p, E.materialIndex = p), a = s.faces.length, v)for (r = 0; F > r; r++)for (S = e.uvs[r], s.faceVertexUvs[r][a] = [], s.faceVertexUvs[r][a + 1] = [], o = 0; 4 > o; o++)d = D[l++], _ = S[2 * d], L = S[2 * d + 1], P = new n.Vector2(_, L), 2 !== o && s.faceVertexUvs[r][a].push(P), 0 !== o && s.faceVertexUvs[r][a + 1].push(P);
                        if (A && (u = 3 * D[l++], x.normal.set(B[u++], B[u++], B[u]), E.normal.copy(x.normal)), y)for (r = 0; 4 > r; r++)u = 3 * D[l++], T = new n.Vector3(B[u++], B[u++], B[u]), 2 !== r && x.vertexNormals.push(T), 0 !== r && E.vertexNormals.push(T);
                        if (C && (c = D[l++], M = O[c], x.color.setHex(M), E.color.setHex(M)), I)for (r = 0; 4 > r; r++)c = D[l++], M = O[c], 2 !== r && x.vertexColors.push(new n.Color(M)), 0 !== r && E.vertexColors.push(new n.Color(M));
                        s.faces.push(x), s.faces.push(E)
                    } else {
                        if (w = new n.Face3, w.a = D[l++], w.b = D[l++], w.c = D[l++], m && (p = D[l++], w.materialIndex = p), a = s.faces.length, v)for (r = 0; F > r; r++)for (S = e.uvs[r], s.faceVertexUvs[r][a] = [], o = 0; 3 > o; o++)d = D[l++], _ = S[2 * d], L = S[2 * d + 1], P = new n.Vector2(_, L), s.faceVertexUvs[r][a].push(P);
                        if (A && (u = 3 * D[l++], w.normal.set(B[u++], B[u++], B[u])), y)for (r = 0; 3 > r; r++)u = 3 * D[l++], T = new n.Vector3(B[u++], B[u++], B[u]), w.vertexNormals.push(T);
                        if (C && (c = D[l++], w.color.setHex(O[c])), I)for (r = 0; 3 > r; r++)c = D[l++], w.vertexColors.push(new n.Color(O[c]));
                        s.faces.push(w)
                    }
                }

                function r() {
                    var t = void 0 !== e.influencesPerVertex ? e.influencesPerVertex : 2;
                    if (e.skinWeights)for (var i = 0, r = e.skinWeights.length; r > i; i += t) {
                        var o = e.skinWeights[i], a = t > 1 ? e.skinWeights[i + 1] : 0, l = t > 2 ? e.skinWeights[i + 2] : 0, h = t > 3 ? e.skinWeights[i + 3] : 0;
                        s.skinWeights.push(new n.Vector4(o, a, l, h))
                    }
                    if (e.skinIndices)for (var i = 0, r = e.skinIndices.length; r > i; i += t) {
                        var c = e.skinIndices[i], u = t > 1 ? e.skinIndices[i + 1] : 0, d = t > 2 ? e.skinIndices[i + 2] : 0, p = t > 3 ? e.skinIndices[i + 3] : 0;
                        s.skinIndices.push(new n.Vector4(c, u, d, p))
                    }
                    s.bones = e.bones, s.bones && s.bones.length > 0 && (s.skinWeights.length !== s.skinIndices.length || s.skinIndices.length !== s.vertices.length) && console.warn("When skinning, number of vertices (" + s.vertices.length + "), skinIndices (" + s.skinIndices.length + "), and skinWeights (" + s.skinWeights.length + ") should match.")
                }

                function o(t) {
                    if (void 0 !== e.morphTargets)for (var i = 0, r = e.morphTargets.length; r > i; i++) {
                        s.morphTargets[i] = {}, s.morphTargets[i].name = e.morphTargets[i].name, s.morphTargets[i].vertices = [];
                        for (var o = s.morphTargets[i].vertices, a = e.morphTargets[i].vertices, l = 0, h = a.length; h > l; l += 3) {
                            var c = new n.Vector3;
                            c.x = a[l] * t, c.y = a[l + 1] * t, c.z = a[l + 2] * t, o.push(c)
                        }
                    }
                    if (void 0 !== e.morphColors && e.morphColors.length > 0) {
                        console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');
                        for (var u = s.faces, d = e.morphColors[0].colors, i = 0, r = u.length; r > i; i++)u[i].color.fromArray(d, 3 * i);
                    }
                }

                function a() {
                    var t = [], i = [];
                    void 0 !== e.animation && i.push(e.animation), void 0 !== e.animations && (e.animations.length ? i = i.concat(e.animations) : i.push(e.animations));
                    for (var r = 0; r < i.length; r++) {
                        var o = n.AnimationClip.parseAnimation(i[r], s.bones);
                        o && t.push(o)
                    }
                    if (s.morphTargets) {
                        var a = n.AnimationClip.CreateClipsFromMorphTargetSequences(s.morphTargets, 10);
                        t = t.concat(a)
                    }
                    t.length > 0 && (s.animations = t)
                }

                var s = new n.Geometry, l = void 0 !== e.scale ? 1 / e.scale : 1;
                if (i(l), r(), o(l), a(), s.computeFaceNormals(), s.computeBoundingSphere(), void 0 === e.materials || 0 === e.materials.length)return {geometry: s};
                var h = n.Loader.prototype.initMaterials(e.materials, t, this.crossOrigin);
                return {geometry: s, materials: h}
            }
        },n.LoadingManager = function (e, t, i) {
            var n = this, r = !1, o = 0, a = 0;
            this.onStart = void 0, this.onLoad = e, this.onProgress = t, this.onError = i, this.itemStart = function (e) {
                a++, r === !1 && void 0 !== n.onStart && n.onStart(e, o, a), r = !0
            }, this.itemEnd = function (e) {
                o++, void 0 !== n.onProgress && n.onProgress(e, o, a), o === a && (r = !1, void 0 !== n.onLoad && n.onLoad())
            }, this.itemError = function (e) {
                void 0 !== n.onError && n.onError(e)
            }
        },n.DefaultLoadingManager = new n.LoadingManager,n.BufferGeometryLoader = function (e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager
        },n.BufferGeometryLoader.prototype = {
            constructor: n.BufferGeometryLoader, load: function (e, t, i, r) {
                var o = this, a = new n.XHRLoader(o.manager);
                a.load(e, function (e) {
                    t(o.parse(JSON.parse(e)))
                }, i, r)
            }, parse: function (e) {
                var t = new n.BufferGeometry, i = e.data.index, r = {
                    Int8Array: Int8Array,
                    Uint8Array: Uint8Array,
                    Uint8ClampedArray: Uint8ClampedArray,
                    Int16Array: Int16Array,
                    Uint16Array: Uint16Array,
                    Int32Array: Int32Array,
                    Uint32Array: Uint32Array,
                    Float32Array: Float32Array,
                    Float64Array: Float64Array
                };
                if (void 0 !== i) {
                    var o = new r[i.type](i.array);
                    t.setIndex(new n.BufferAttribute(o, 1))
                }
                var a = e.data.attributes;
                for (var s in a) {
                    var l = a[s], o = new r[l.type](l.array);
                    t.addAttribute(s, new n.BufferAttribute(o, l.itemSize))
                }
                var h = e.data.groups || e.data.drawcalls || e.data.offsets;
                if (void 0 !== h)for (var c = 0, u = h.length; c !== u; ++c) {
                    var d = h[c];
                    t.addGroup(d.start, d.count, d.materialIndex)
                }
                var p = e.data.boundingSphere;
                if (void 0 !== p) {
                    var f = new n.Vector3;
                    void 0 !== p.center && f.fromArray(p.center), t.boundingSphere = new n.Sphere(f, p.radius)
                }
                return t
            }
        },n.MaterialLoader = function (e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager, this.textures = {}
        },n.MaterialLoader.prototype = {
            constructor: n.MaterialLoader, load: function (e, t, i, r) {
                var o = this, a = new n.XHRLoader(o.manager);
                a.load(e, function (e) {
                    t(o.parse(JSON.parse(e)))
                }, i, r)
            }, setTextures: function (e) {
                this.textures = e
            }, getTexture: function (e) {
                var t = this.textures;
                return void 0 === t[e] && console.warn("THREE.MaterialLoader: Undefined texture", e), t[e]
            }, parse: function (e) {
                var t = new n[e.type];
                if (void 0 !== e.uuid && (t.uuid = e.uuid), void 0 !== e.name && (t.name = e.name), void 0 !== e.color && t.color.setHex(e.color), void 0 !== e.roughness && (t.roughness = e.roughness), void 0 !== e.metalness && (t.metalness = e.metalness), void 0 !== e.emissive && t.emissive.setHex(e.emissive), void 0 !== e.specular && t.specular.setHex(e.specular), void 0 !== e.shininess && (t.shininess = e.shininess), void 0 !== e.uniforms && (t.uniforms = e.uniforms), void 0 !== e.vertexShader && (t.vertexShader = e.vertexShader), void 0 !== e.fragmentShader && (t.fragmentShader = e.fragmentShader), void 0 !== e.vertexColors && (t.vertexColors = e.vertexColors), void 0 !== e.shading && (t.shading = e.shading), void 0 !== e.blending && (t.blending = e.blending), void 0 !== e.side && (t.side = e.side), void 0 !== e.opacity && (t.opacity = e.opacity), void 0 !== e.transparent && (t.transparent = e.transparent), void 0 !== e.alphaTest && (t.alphaTest = e.alphaTest), void 0 !== e.depthTest && (t.depthTest = e.depthTest), void 0 !== e.depthWrite && (t.depthWrite = e.depthWrite), void 0 !== e.colorWrite && (t.colorWrite = e.colorWrite), void 0 !== e.wireframe && (t.wireframe = e.wireframe), void 0 !== e.wireframeLinewidth && (t.wireframeLinewidth = e.wireframeLinewidth), void 0 !== e.size && (t.size = e.size), void 0 !== e.sizeAttenuation && (t.sizeAttenuation = e.sizeAttenuation), void 0 !== e.map && (t.map = this.getTexture(e.map)), void 0 !== e.alphaMap && (t.alphaMap = this.getTexture(e.alphaMap), t.transparent = !0), void 0 !== e.bumpMap && (t.bumpMap = this.getTexture(e.bumpMap)), void 0 !== e.bumpScale && (t.bumpScale = e.bumpScale), void 0 !== e.normalMap && (t.normalMap = this.getTexture(e.normalMap)), void 0 !== e.normalScale) {
                    var i = e.normalScale;
                    Array.isArray(i) === !1 && (i = [i, i]), t.normalScale = (new n.Vector2).fromArray(i)
                }
                if (void 0 !== e.displacementMap && (t.displacementMap = this.getTexture(e.displacementMap)), void 0 !== e.displacementScale && (t.displacementScale = e.displacementScale), void 0 !== e.displacementBias && (t.displacementBias = e.displacementBias), void 0 !== e.roughnessMap && (t.roughnessMap = this.getTexture(e.roughnessMap)), void 0 !== e.metalnessMap && (t.metalnessMap = this.getTexture(e.metalnessMap)), void 0 !== e.emissiveMap && (t.emissiveMap = this.getTexture(e.emissiveMap)), void 0 !== e.emissiveIntensity && (t.emissiveIntensity = e.emissiveIntensity), void 0 !== e.specularMap && (t.specularMap = this.getTexture(e.specularMap)), void 0 !== e.envMap && (t.envMap = this.getTexture(e.envMap), t.combine = n.MultiplyOperation), e.reflectivity && (t.reflectivity = e.reflectivity), void 0 !== e.lightMap && (t.lightMap = this.getTexture(e.lightMap)), void 0 !== e.lightMapIntensity && (t.lightMapIntensity = e.lightMapIntensity), void 0 !== e.aoMap && (t.aoMap = this.getTexture(e.aoMap)), void 0 !== e.aoMapIntensity && (t.aoMapIntensity = e.aoMapIntensity), void 0 !== e.materials)for (var r = 0, o = e.materials.length; o > r; r++)t.materials.push(this.parse(e.materials[r]));
                return t
            }
        },n.ObjectLoader = function (e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager, this.texturePath = ""
        },n.ObjectLoader.prototype = {
            constructor: n.ObjectLoader, load: function (e, t, i, r) {
                "" === this.texturePath && (this.texturePath = e.substring(0, e.lastIndexOf("/") + 1));
                var o = this, a = new n.XHRLoader(o.manager);
                a.load(e, function (e) {
                    o.parse(JSON.parse(e), t)
                }, i, r)
            }, setTexturePath: function (e) {
                this.texturePath = e
            }, setCrossOrigin: function (e) {
                this.crossOrigin = e
            }, parse: function (e, t) {
                var i = this.parseGeometries(e.geometries), n = this.parseImages(e.images, function () {
                    void 0 !== t && t(a)
                }), r = this.parseTextures(e.textures, n), o = this.parseMaterials(e.materials, r), a = this.parseObject(e.object, i, o);
                return e.animations && (a.animations = this.parseAnimations(e.animations)), (void 0 === e.images || 0 === e.images.length) && void 0 !== t && t(a), a
            }, parseGeometries: function (e) {
                var t = {};
                if (void 0 !== e)for (var i = new n.JSONLoader, r = new n.BufferGeometryLoader, o = 0, a = e.length; a > o; o++) {
                    var s, l = e[o];
                    switch (l.type) {
                        case"PlaneGeometry":
                        case"PlaneBufferGeometry":
                            s = new n[l.type](l.width, l.height, l.widthSegments, l.heightSegments);
                            break;
                        case"BoxGeometry":
                        case"BoxBufferGeometry":
                        case"CubeGeometry":
                            s = new n[l.type](l.width, l.height, l.depth, l.widthSegments, l.heightSegments, l.depthSegments);
                            break;
                        case"CircleGeometry":
                        case"CircleBufferGeometry":
                            s = new n[l.type](l.radius, l.segments, l.thetaStart, l.thetaLength);
                            break;
                        case"CylinderGeometry":
                        case"CylinderBufferGeometry":
                            s = new n[l.type](l.radiusTop, l.radiusBottom, l.height, l.radialSegments, l.heightSegments, l.openEnded, l.thetaStart, l.thetaLength);
                            break;
                        case"SphereGeometry":
                        case"SphereBufferGeometry":
                            s = new n[l.type](l.radius, l.widthSegments, l.heightSegments, l.phiStart, l.phiLength, l.thetaStart, l.thetaLength);
                            break;
                        case"DodecahedronGeometry":
                            s = new n.DodecahedronGeometry(l.radius, l.detail);
                            break;
                        case"IcosahedronGeometry":
                            s = new n.IcosahedronGeometry(l.radius, l.detail);
                            break;
                        case"OctahedronGeometry":
                            s = new n.OctahedronGeometry(l.radius, l.detail);
                            break;
                        case"TetrahedronGeometry":
                            s = new n.TetrahedronGeometry(l.radius, l.detail);
                            break;
                        case"RingGeometry":
                        case"RingBufferGeometry":
                            s = new n[l.type](l.innerRadius, l.outerRadius, l.thetaSegments, l.phiSegments, l.thetaStart, l.thetaLength);
                            break;
                        case"TorusGeometry":
                        case"TorusBufferGeometry":
                            s = new n[l.type](l.radius, l.tube, l.radialSegments, l.tubularSegments, l.arc);
                            break;
                        case"TorusKnotGeometry":
                        case"TorusKnotBufferGeometry":
                            s = new n[l.type](l.radius, l.tube, l.tubularSegments, l.radialSegments, l.p, l.q);
                            break;
                        case"LatheGeometry":
                            s = new n.LatheGeometry(l.points, l.segments, l.phiStart, l.phiLength);
                            break;
                        case"BufferGeometry":
                            s = r.parse(l);
                            break;
                        case"Geometry":
                            s = i.parse(l.data, this.texturePath).geometry;
                            break;
                        default:
                            console.warn('THREE.ObjectLoader: Unsupported geometry type "' + l.type + '"');
                            continue
                    }
                    s.uuid = l.uuid, void 0 !== l.name && (s.name = l.name), t[l.uuid] = s
                }
                return t
            }, parseMaterials: function (e, t) {
                var i = {};
                if (void 0 !== e) {
                    var r = new n.MaterialLoader;
                    r.setTextures(t);
                    for (var o = 0, a = e.length; a > o; o++) {
                        var s = r.parse(e[o]);
                        i[s.uuid] = s
                    }
                }
                return i
            }, parseAnimations: function (e) {
                for (var t = [], i = 0; i < e.length; i++) {
                    var r = n.AnimationClip.parse(e[i]);
                    t.push(r)
                }
                return t
            }, parseImages: function (e, t) {
                function i(e) {
                    return r.manager.itemStart(e), s.load(e, function () {
                        r.manager.itemEnd(e)
                    })
                }

                var r = this, o = {};
                if (void 0 !== e && e.length > 0) {
                    var a = new n.LoadingManager(t), s = new n.ImageLoader(a);
                    s.setCrossOrigin(this.crossOrigin);
                    for (var l = 0, h = e.length; h > l; l++) {
                        var c = e[l], u = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url) ? c.url : r.texturePath + c.url;
                        o[c.uuid] = i(u)
                    }
                }
                return o
            }, parseTextures: function (e, t) {
                function i(e) {
                    return "number" == typeof e ? e : (console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.", e), n[e])
                }

                var r = {};
                if (void 0 !== e)for (var o = 0, a = e.length; a > o; o++) {
                    var s = e[o];
                    void 0 === s.image && console.warn('THREE.ObjectLoader: No "image" specified for', s.uuid), void 0 === t[s.image] && console.warn("THREE.ObjectLoader: Undefined image", s.image);
                    var l = new n.Texture(t[s.image]);
                    l.needsUpdate = !0, l.uuid = s.uuid, void 0 !== s.name && (l.name = s.name), void 0 !== s.mapping && (l.mapping = i(s.mapping)), void 0 !== s.offset && (l.offset = new n.Vector2(s.offset[0], s.offset[1])), void 0 !== s.repeat && (l.repeat = new n.Vector2(s.repeat[0], s.repeat[1])), void 0 !== s.minFilter && (l.minFilter = i(s.minFilter)), void 0 !== s.magFilter && (l.magFilter = i(s.magFilter)), void 0 !== s.anisotropy && (l.anisotropy = s.anisotropy), Array.isArray(s.wrap) && (l.wrapS = i(s.wrap[0]), l.wrapT = i(s.wrap[1])), r[s.uuid] = l
                }
                return r
            }, parseObject: function () {
                var e = new n.Matrix4;
                return function (t, i, r) {
                    function o(e) {
                        return void 0 === i[e] && console.warn("THREE.ObjectLoader: Undefined geometry", e), i[e]
                    }

                    function a(e) {
                        return void 0 !== e ? (void 0 === r[e] && console.warn("THREE.ObjectLoader: Undefined material", e), r[e]) : void 0
                    }

                    var s;
                    switch (t.type) {
                        case"Scene":
                            s = new n.Scene;
                            break;
                        case"PerspectiveCamera":
                            s = new n.PerspectiveCamera(t.fov, t.aspect, t.near, t.far);
                            break;
                        case"OrthographicCamera":
                            s = new n.OrthographicCamera(t.left, t.right, t.top, t.bottom, t.near, t.far);
                            break;
                        case"AmbientLight":
                            s = new n.AmbientLight(t.color, t.intensity);
                            break;
                        case"DirectionalLight":
                            s = new n.DirectionalLight(t.color, t.intensity);
                            break;
                        case"PointLight":
                            s = new n.PointLight(t.color, t.intensity, t.distance, t.decay);
                            break;
                        case"SpotLight":
                            s = new n.SpotLight(t.color, t.intensity, t.distance, t.angle, t.penumbra, t.decay);
                            break;
                        case"HemisphereLight":
                            s = new n.HemisphereLight(t.color, t.groundColor, t.intensity);
                            break;
                        case"Mesh":
                            var l = o(t.geometry), h = a(t.material);
                            s = l.bones && l.bones.length > 0 ? new n.SkinnedMesh(l, h) : new n.Mesh(l, h);
                            break;
                        case"LOD":
                            s = new n.LOD;
                            break;
                        case"Line":
                            s = new n.Line(o(t.geometry), a(t.material), t.mode);
                            break;
                        case"PointCloud":
                        case"Points":
                            s = new n.Points(o(t.geometry), a(t.material));
                            break;
                        case"Sprite":
                            s = new n.Sprite(a(t.material));
                            break;
                        case"Group":
                            s = new n.Group;
                            break;
                        default:
                            s = new n.Object3D
                    }
                    if (s.uuid = t.uuid, void 0 !== t.name && (s.name = t.name), void 0 !== t.matrix ? (e.fromArray(t.matrix), e.decompose(s.position, s.quaternion, s.scale)) : (void 0 !== t.position && s.position.fromArray(t.position), void 0 !== t.rotation && s.rotation.fromArray(t.rotation), void 0 !== t.scale && s.scale.fromArray(t.scale)), void 0 !== t.castShadow && (s.castShadow = t.castShadow), void 0 !== t.receiveShadow && (s.receiveShadow = t.receiveShadow), void 0 !== t.visible && (s.visible = t.visible), void 0 !== t.userData && (s.userData = t.userData), void 0 !== t.children)for (var c in t.children)s.add(this.parseObject(t.children[c], i, r));
                    if ("LOD" === t.type)for (var u = t.levels, d = 0; d < u.length; d++) {
                        var p = u[d], c = s.getObjectByProperty("uuid", p.object);
                        void 0 !== c && s.addLevel(c, p.distance)
                    }
                    return s
                }
            }()
        },n.TextureLoader = function (e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager
        },n.TextureLoader.prototype = {
            constructor: n.TextureLoader, load: function (e, t, i, r) {
                var o = new n.Texture, a = new n.ImageLoader(this.manager);
                return a.setCrossOrigin(this.crossOrigin), a.setPath(this.path), a.load(e, function (e) {
                    o.image = e, o.needsUpdate = !0, void 0 !== t && t(o)
                }, i, r), o
            }, setCrossOrigin: function (e) {
                this.crossOrigin = e
            }, setPath: function (e) {
                this.path = e
            }
        },n.CubeTextureLoader = function (e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager
        },n.CubeTextureLoader.prototype = {
            constructor: n.CubeTextureLoader, load: function (e, t, i, r) {
                function o(i) {
                    s.load(e[i], function (e) {
                        a.images[i] = e, l++, 6 === l && (a.needsUpdate = !0, t && t(a))
                    }, void 0, r)
                }

                var a = new n.CubeTexture, s = new n.ImageLoader(this.manager);
                s.setCrossOrigin(this.crossOrigin), s.setPath(this.path);
                for (var l = 0, h = 0; h < e.length; ++h)o(h);
                return a
            }, setCrossOrigin: function (e) {
                this.crossOrigin = e
            }, setPath: function (e) {
                this.path = e
            }
        },n.DataTextureLoader = n.BinaryTextureLoader = function (e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager, this._parser = null
        },n.BinaryTextureLoader.prototype = {
            constructor: n.BinaryTextureLoader, load: function (e, t, i, r) {
                var o = this, a = new n.DataTexture, s = new n.XHRLoader(this.manager);
                return s.setResponseType("arraybuffer"), s.load(e, function (e) {
                    var i = o._parser(e);
                    i && (void 0 !== i.image ? a.image = i.image : void 0 !== i.data && (a.image.width = i.width, a.image.height = i.height, a.image.data = i.data), a.wrapS = void 0 !== i.wrapS ? i.wrapS : n.ClampToEdgeWrapping, a.wrapT = void 0 !== i.wrapT ? i.wrapT : n.ClampToEdgeWrapping, a.magFilter = void 0 !== i.magFilter ? i.magFilter : n.LinearFilter, a.minFilter = void 0 !== i.minFilter ? i.minFilter : n.LinearMipMapLinearFilter, a.anisotropy = void 0 !== i.anisotropy ? i.anisotropy : 1, void 0 !== i.format && (a.format = i.format), void 0 !== i.type && (a.type = i.type), void 0 !== i.mipmaps && (a.mipmaps = i.mipmaps), 1 === i.mipmapCount && (a.minFilter = n.LinearFilter), a.needsUpdate = !0, t && t(a, i))
                }, i, r), a
            }
        },n.CompressedTextureLoader = function (e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager, this._parser = null
        },n.CompressedTextureLoader.prototype = {
            constructor: n.CompressedTextureLoader, load: function (e, t, i, r) {
                function o(o) {
                    h.load(e[o], function (e) {
                        var i = a._parser(e, !0);
                        s[o] = {
                            width: i.width,
                            height: i.height,
                            format: i.format,
                            mipmaps: i.mipmaps
                        }, c += 1, 6 === c && (1 === i.mipmapCount && (l.minFilter = n.LinearFilter), l.format = i.format, l.needsUpdate = !0, t && t(l))
                    }, i, r)
                }

                var a = this, s = [], l = new n.CompressedTexture;
                l.image = s;
                var h = new n.XHRLoader(this.manager);
                if (h.setPath(this.path), h.setResponseType("arraybuffer"), Array.isArray(e))for (var c = 0, u = 0, d = e.length; d > u; ++u)o(u); else h.load(e, function (e) {
                    var i = a._parser(e, !0);
                    if (i.isCubemap)for (var r = i.mipmaps.length / i.mipmapCount, o = 0; r > o; o++) {
                        s[o] = {mipmaps: []};
                        for (var h = 0; h < i.mipmapCount; h++)s[o].mipmaps.push(i.mipmaps[o * i.mipmapCount + h]), s[o].format = i.format, s[o].width = i.width, s[o].height = i.height
                    } else l.image.width = i.width, l.image.height = i.height, l.mipmaps = i.mipmaps;
                    1 === i.mipmapCount && (l.minFilter = n.LinearFilter), l.format = i.format, l.needsUpdate = !0, t && t(l)
                }, i, r);
                return l
            }, setPath: function (e) {
                this.path = e
            }
        },n.Material = function () {
            Object.defineProperty(this, "id", {value: n.MaterialIdCount++}), this.uuid = n.Math.generateUUID(), this.name = "", this.type = "Material", this.side = n.FrontSide, this.opacity = 1, this.transparent = !1, this.blending = n.NormalBlending, this.blendSrc = n.SrcAlphaFactor, this.blendDst = n.OneMinusSrcAlphaFactor, this.blendEquation = n.AddEquation, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthFunc = n.LessEqualDepth, this.depthTest = !0, this.depthWrite = !0, this.colorWrite = !0, this.precision = null, this.polygonOffset = !1, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.alphaTest = 0, this.premultipliedAlpha = !1, this.overdraw = 0, this.visible = !0, this._needsUpdate = !0
        },n.Material.prototype = {
            constructor: n.Material, get needsUpdate() {
                return this._needsUpdate
            }, set needsUpdate(e) {
                e === !0 && this.update(), this._needsUpdate = e
            }, setValues: function (e) {
                if (void 0 !== e)for (var t in e) {
                    var i = e[t];
                    if (void 0 !== i) {
                        var r = this[t];
                        void 0 !== r ? r instanceof n.Color ? r.set(i) : r instanceof n.Vector3 && i instanceof n.Vector3 ? r.copy(i) : "overdraw" === t ? this[t] = Number(i) : this[t] = i : console.warn("THREE." + this.type + ": '" + t + "' is not a property of this material.")
                    } else console.warn("THREE.Material: '" + t + "' parameter is undefined.")
                }
            }, toJSON: function (e) {
                function t(e) {
                    var t = [];
                    for (var i in e) {
                        var n = e[i];
                        delete n.metadata, t.push(n)
                    }
                    return t
                }

                var i = void 0 === e;
                i && (e = {textures: {}, images: {}});
                var r = {metadata: {version: 4.4, type: "Material", generator: "Material.toJSON"}};
                if (r.uuid = this.uuid, r.type = this.type, "" !== this.name && (r.name = this.name), this.color instanceof n.Color && (r.color = this.color.getHex()), .5 !== this.roughness && (r.roughness = this.roughness), .5 !== this.metalness && (r.metalness = this.metalness), this.emissive instanceof n.Color && (r.emissive = this.emissive.getHex()), this.specular instanceof n.Color && (r.specular = this.specular.getHex()), void 0 !== this.shininess && (r.shininess = this.shininess), this.map instanceof n.Texture && (r.map = this.map.toJSON(e).uuid), this.alphaMap instanceof n.Texture && (r.alphaMap = this.alphaMap.toJSON(e).uuid), this.lightMap instanceof n.Texture && (r.lightMap = this.lightMap.toJSON(e).uuid), this.bumpMap instanceof n.Texture && (r.bumpMap = this.bumpMap.toJSON(e).uuid, r.bumpScale = this.bumpScale), this.normalMap instanceof n.Texture && (r.normalMap = this.normalMap.toJSON(e).uuid, r.normalScale = this.normalScale.toArray()), this.displacementMap instanceof n.Texture && (r.displacementMap = this.displacementMap.toJSON(e).uuid, r.displacementScale = this.displacementScale, r.displacementBias = this.displacementBias), this.roughnessMap instanceof n.Texture && (r.roughnessMap = this.roughnessMap.toJSON(e).uuid), this.metalnessMap instanceof n.Texture && (r.metalnessMap = this.metalnessMap.toJSON(e).uuid), this.emissiveMap instanceof n.Texture && (r.emissiveMap = this.emissiveMap.toJSON(e).uuid), this.specularMap instanceof n.Texture && (r.specularMap = this.specularMap.toJSON(e).uuid), this.envMap instanceof n.Texture && (r.envMap = this.envMap.toJSON(e).uuid, r.reflectivity = this.reflectivity), void 0 !== this.size && (r.size = this.size), void 0 !== this.sizeAttenuation && (r.sizeAttenuation = this.sizeAttenuation), void 0 !== this.vertexColors && this.vertexColors !== n.NoColors && (r.vertexColors = this.vertexColors), void 0 !== this.shading && this.shading !== n.SmoothShading && (r.shading = this.shading), void 0 !== this.blending && this.blending !== n.NormalBlending && (r.blending = this.blending), void 0 !== this.side && this.side !== n.FrontSide && (r.side = this.side), this.opacity < 1 && (r.opacity = this.opacity), this.transparent === !0 && (r.transparent = this.transparent), this.alphaTest > 0 && (r.alphaTest = this.alphaTest), this.premultipliedAlpha === !0 && (r.premultipliedAlpha = this.premultipliedAlpha), this.wireframe === !0 && (r.wireframe = this.wireframe), this.wireframeLinewidth > 1 && (r.wireframeLinewidth = this.wireframeLinewidth), i) {
                    var o = t(e.textures), a = t(e.images);
                    o.length > 0 && (r.textures = o), a.length > 0 && (r.images = a)
                }
                return r
            }, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                return this.name = e.name, this.side = e.side, this.opacity = e.opacity, this.transparent = e.transparent, this.blending = e.blending, this.blendSrc = e.blendSrc, this.blendDst = e.blendDst, this.blendEquation = e.blendEquation, this.blendSrcAlpha = e.blendSrcAlpha, this.blendDstAlpha = e.blendDstAlpha, this.blendEquationAlpha = e.blendEquationAlpha, this.depthFunc = e.depthFunc, this.depthTest = e.depthTest, this.depthWrite = e.depthWrite, this.colorWrite = e.colorWrite, this.precision = e.precision, this.polygonOffset = e.polygonOffset, this.polygonOffsetFactor = e.polygonOffsetFactor, this.polygonOffsetUnits = e.polygonOffsetUnits, this.alphaTest = e.alphaTest, this.premultipliedAlpha = e.premultipliedAlpha, this.overdraw = e.overdraw, this.visible = e.visible, this
            }, update: function () {
                this.dispatchEvent({type: "update"})
            }, dispose: function () {
                this.dispatchEvent({type: "dispose"})
            }
        },n.EventDispatcher.prototype.apply(n.Material.prototype),n.MaterialIdCount = 0,n.LineBasicMaterial = function (e) {
            n.Material.call(this), this.type = "LineBasicMaterial", this.color = new n.Color(16777215), this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.blending = n.NormalBlending, this.vertexColors = n.NoColors, this.fog = !0, this.setValues(e)
        },n.LineBasicMaterial.prototype = Object.create(n.Material.prototype),n.LineBasicMaterial.prototype.constructor = n.LineBasicMaterial,n.LineBasicMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.linewidth = e.linewidth, this.linecap = e.linecap, this.linejoin = e.linejoin, this.vertexColors = e.vertexColors, this.fog = e.fog, this
        },n.LineDashedMaterial = function (e) {
            n.Material.call(this), this.type = "LineDashedMaterial", this.color = new n.Color(16777215), this.linewidth = 1, this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.blending = n.NormalBlending, this.vertexColors = n.NoColors, this.fog = !0, this.setValues(e)
        },n.LineDashedMaterial.prototype = Object.create(n.Material.prototype),n.LineDashedMaterial.prototype.constructor = n.LineDashedMaterial,n.LineDashedMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.linewidth = e.linewidth, this.scale = e.scale, this.dashSize = e.dashSize, this.gapSize = e.gapSize, this.vertexColors = e.vertexColors, this.fog = e.fog, this
        },n.MeshBasicMaterial = function (e) {
            n.Material.call(this), this.type = "MeshBasicMaterial", this.color = new n.Color(16777215), this.map = null, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = n.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = n.SmoothShading, this.blending = n.NormalBlending, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = n.NoColors, this.skinning = !1, this.morphTargets = !1, this.setValues(e)
        },n.MeshBasicMaterial.prototype = Object.create(n.Material.prototype),n.MeshBasicMaterial.prototype.constructor = n.MeshBasicMaterial,n.MeshBasicMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.fog = e.fog, this.shading = e.shading, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.vertexColors = e.vertexColors, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this
        },n.MeshLambertMaterial = function (e) {
            n.Material.call(this), this.type = "MeshLambertMaterial", this.color = new n.Color(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new n.Color(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = n.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.blending = n.NormalBlending, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = n.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e)
        },n.MeshLambertMaterial.prototype = Object.create(n.Material.prototype),n.MeshLambertMaterial.prototype.constructor = n.MeshLambertMaterial,n.MeshLambertMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.fog = e.fog, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.vertexColors = e.vertexColors, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this
        },n.MeshPhongMaterial = function (e) {
            n.Material.call(this), this.type = "MeshPhongMaterial", this.color = new n.Color(16777215), this.specular = new n.Color(1118481), this.shininess = 30, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new n.Color(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalScale = new n.Vector2(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = n.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = n.SmoothShading, this.blending = n.NormalBlending, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = n.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e)
        },n.MeshPhongMaterial.prototype = Object.create(n.Material.prototype),n.MeshPhongMaterial.prototype.constructor = n.MeshPhongMaterial,n.MeshPhongMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.specular.copy(e.specular), this.shininess = e.shininess, this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.fog = e.fog, this.shading = e.shading, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.vertexColors = e.vertexColors, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this
        },n.MeshStandardMaterial = function (e) {
            n.Material.call(this), this.type = "MeshStandardMaterial", this.color = new n.Color(16777215), this.roughness = .5, this.metalness = .5, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new n.Color(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalScale = new n.Vector2(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapIntensity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = n.SmoothShading, this.blending = n.NormalBlending, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = n.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e)
        },n.MeshStandardMaterial.prototype = Object.create(n.Material.prototype),n.MeshStandardMaterial.prototype.constructor = n.MeshStandardMaterial,n.MeshStandardMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.roughness = e.roughness, this.metalness = e.metalness, this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.roughnessMap = e.roughnessMap, this.metalnessMap = e.metalnessMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.envMapIntensity = e.envMapIntensity, this.refractionRatio = e.refractionRatio, this.fog = e.fog, this.shading = e.shading, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.vertexColors = e.vertexColors, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this
        },n.MeshDepthMaterial = function (e) {
            n.Material.call(this), this.type = "MeshDepthMaterial", this.morphTargets = !1, this.wireframe = !1, this.wireframeLinewidth = 1, this.setValues(e)
        },n.MeshDepthMaterial.prototype = Object.create(n.Material.prototype),n.MeshDepthMaterial.prototype.constructor = n.MeshDepthMaterial,n.MeshDepthMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this
        },n.MeshNormalMaterial = function (e) {
            n.Material.call(this, e), this.type = "MeshNormalMaterial", this.wireframe = !1, this.wireframeLinewidth = 1, this.morphTargets = !1, this.setValues(e)
        },n.MeshNormalMaterial.prototype = Object.create(n.Material.prototype),n.MeshNormalMaterial.prototype.constructor = n.MeshNormalMaterial,n.MeshNormalMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this
        },n.MultiMaterial = function (e) {
            this.uuid = n.Math.generateUUID(), this.type = "MultiMaterial", this.materials = e instanceof Array ? e : [], this.visible = !0
        },n.MultiMaterial.prototype = {
            constructor: n.MultiMaterial, toJSON: function (e) {
                for (var t = {
                    metadata: {version: 4.2, type: "material", generator: "MaterialExporter"},
                    uuid: this.uuid,
                    type: this.type,
                    materials: []
                }, i = this.materials, n = 0, r = i.length; r > n; n++) {
                    var o = i[n].toJSON(e);
                    delete o.metadata, t.materials.push(o)
                }
                return t.visible = this.visible, t
            }, clone: function () {
                for (var e = new this.constructor, t = 0; t < this.materials.length; t++)e.materials.push(this.materials[t].clone());
                return e.visible = this.visible, e
            }
        },n.PointsMaterial = function (e) {
            n.Material.call(this), this.type = "PointsMaterial", this.color = new n.Color(16777215), this.map = null, this.size = 1, this.sizeAttenuation = !0, this.blending = n.NormalBlending, this.vertexColors = n.NoColors, this.fog = !0, this.setValues(e)
        },n.PointsMaterial.prototype = Object.create(n.Material.prototype),n.PointsMaterial.prototype.constructor = n.PointsMaterial,n.PointsMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.size = e.size, this.sizeAttenuation = e.sizeAttenuation, this.vertexColors = e.vertexColors, this.fog = e.fog, this
        },n.ShaderMaterial = function (e) {
            n.Material.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.vertexShader = "void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", this.fragmentShader = "void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", this.shading = n.SmoothShading, this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.vertexColors = n.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.extensions = {
                derivatives: !1,
                fragDepth: !1,
                drawBuffers: !1,
                shaderTextureLOD: !1
            }, this.defaultAttributeValues = {
                color: [1, 1, 1],
                uv: [0, 0],
                uv2: [0, 0]
            }, this.index0AttributeName = void 0, void 0 !== e && (void 0 !== e.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."), this.setValues(e))
        },n.ShaderMaterial.prototype = Object.create(n.Material.prototype),n.ShaderMaterial.prototype.constructor = n.ShaderMaterial,n.ShaderMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.fragmentShader = e.fragmentShader, this.vertexShader = e.vertexShader, this.uniforms = n.UniformsUtils.clone(e.uniforms), this.defines = e.defines, this.shading = e.shading, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.fog = e.fog, this.lights = e.lights, this.vertexColors = e.vertexColors,
                this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this.extensions = e.extensions, this
        },n.ShaderMaterial.prototype.toJSON = function (e) {
            var t = n.Material.prototype.toJSON.call(this, e);
            return t.uniforms = this.uniforms, t.vertexShader = this.vertexShader, t.fragmentShader = this.fragmentShader, t
        },n.RawShaderMaterial = function (e) {
            n.ShaderMaterial.call(this, e), this.type = "RawShaderMaterial"
        },n.RawShaderMaterial.prototype = Object.create(n.ShaderMaterial.prototype),n.RawShaderMaterial.prototype.constructor = n.RawShaderMaterial,n.SpriteMaterial = function (e) {
            n.Material.call(this), this.type = "SpriteMaterial", this.color = new n.Color(16777215), this.map = null, this.rotation = 0, this.fog = !1, this.setValues(e)
        },n.SpriteMaterial.prototype = Object.create(n.Material.prototype),n.SpriteMaterial.prototype.constructor = n.SpriteMaterial,n.SpriteMaterial.prototype.copy = function (e) {
            return n.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.rotation = e.rotation, this.fog = e.fog, this
        },n.Texture = function (e, t, i, r, o, a, s, l, h) {
            Object.defineProperty(this, "id", {value: n.TextureIdCount++}), this.uuid = n.Math.generateUUID(), this.name = "", this.sourceFile = "", this.image = void 0 !== e ? e : n.Texture.DEFAULT_IMAGE, this.mipmaps = [], this.mapping = void 0 !== t ? t : n.Texture.DEFAULT_MAPPING, this.wrapS = void 0 !== i ? i : n.ClampToEdgeWrapping, this.wrapT = void 0 !== r ? r : n.ClampToEdgeWrapping, this.magFilter = void 0 !== o ? o : n.LinearFilter, this.minFilter = void 0 !== a ? a : n.LinearMipMapLinearFilter, this.anisotropy = void 0 !== h ? h : 1, this.format = void 0 !== s ? s : n.RGBAFormat, this.type = void 0 !== l ? l : n.UnsignedByteType, this.offset = new n.Vector2(0, 0), this.repeat = new n.Vector2(1, 1), this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this.encoding = n.LinearEncoding, this.version = 0, this.onUpdate = null
        },n.Texture.DEFAULT_IMAGE = void 0,n.Texture.DEFAULT_MAPPING = n.UVMapping,n.Texture.prototype = {
            constructor: n.Texture,
            set needsUpdate(e) {
                e === !0 && this.version++
            },
            clone: function () {
                return (new this.constructor).copy(this)
            },
            copy: function (e) {
                return this.image = e.image, this.mipmaps = e.mipmaps.slice(0), this.mapping = e.mapping, this.wrapS = e.wrapS, this.wrapT = e.wrapT, this.magFilter = e.magFilter, this.minFilter = e.minFilter, this.anisotropy = e.anisotropy, this.format = e.format, this.type = e.type, this.offset.copy(e.offset), this.repeat.copy(e.repeat), this.generateMipmaps = e.generateMipmaps, this.premultiplyAlpha = e.premultiplyAlpha, this.flipY = e.flipY, this.unpackAlignment = e.unpackAlignment, this.encoding = e.encoding, this
            },
            toJSON: function (e) {
                function t(e) {
                    var t;
                    return void 0 !== e.toDataURL ? t = e : (t = document.createElement("canvas"), t.width = e.width, t.height = e.height, t.getContext("2d").drawImage(e, 0, 0, e.width, e.height)), t.width > 2048 || t.height > 2048 ? t.toDataURL("image/jpeg", .6) : t.toDataURL("image/png")
                }

                if (void 0 !== e.textures[this.uuid])return e.textures[this.uuid];
                var i = {
                    metadata: {version: 4.4, type: "Texture", generator: "Texture.toJSON"},
                    uuid: this.uuid,
                    name: this.name,
                    mapping: this.mapping,
                    repeat: [this.repeat.x, this.repeat.y],
                    offset: [this.offset.x, this.offset.y],
                    wrap: [this.wrapS, this.wrapT],
                    minFilter: this.minFilter,
                    magFilter: this.magFilter,
                    anisotropy: this.anisotropy
                };
                if (void 0 !== this.image) {
                    var r = this.image;
                    void 0 === r.uuid && (r.uuid = n.Math.generateUUID()), void 0 === e.images[r.uuid] && (e.images[r.uuid] = {
                        uuid: r.uuid,
                        url: t(r)
                    }), i.image = r.uuid
                }
                return e.textures[this.uuid] = i, i
            },
            dispose: function () {
                this.dispatchEvent({type: "dispose"})
            },
            transformUv: function (e) {
                if (this.mapping === n.UVMapping) {
                    if (e.multiply(this.repeat), e.add(this.offset), e.x < 0 || e.x > 1)switch (this.wrapS) {
                        case n.RepeatWrapping:
                            e.x = e.x - Math.floor(e.x);
                            break;
                        case n.ClampToEdgeWrapping:
                            e.x = e.x < 0 ? 0 : 1;
                            break;
                        case n.MirroredRepeatWrapping:
                            1 === Math.abs(Math.floor(e.x) % 2) ? e.x = Math.ceil(e.x) - e.x : e.x = e.x - Math.floor(e.x)
                    }
                    if (e.y < 0 || e.y > 1)switch (this.wrapT) {
                        case n.RepeatWrapping:
                            e.y = e.y - Math.floor(e.y);
                            break;
                        case n.ClampToEdgeWrapping:
                            e.y = e.y < 0 ? 0 : 1;
                            break;
                        case n.MirroredRepeatWrapping:
                            1 === Math.abs(Math.floor(e.y) % 2) ? e.y = Math.ceil(e.y) - e.y : e.y = e.y - Math.floor(e.y)
                    }
                    this.flipY && (e.y = 1 - e.y)
                }
            }
        },n.EventDispatcher.prototype.apply(n.Texture.prototype),n.TextureIdCount = 0,n.CanvasTexture = function (e, t, i, r, o, a, s, l, h) {
            n.Texture.call(this, e, t, i, r, o, a, s, l, h), this.needsUpdate = !0
        },n.CanvasTexture.prototype = Object.create(n.Texture.prototype),n.CanvasTexture.prototype.constructor = n.CanvasTexture,n.CubeTexture = function (e, t, i, r, o, a, s, l, h) {
            e = void 0 !== e ? e : [], t = void 0 !== t ? t : n.CubeReflectionMapping, n.Texture.call(this, e, t, i, r, o, a, s, l, h), this.flipY = !1
        },n.CubeTexture.prototype = Object.create(n.Texture.prototype),n.CubeTexture.prototype.constructor = n.CubeTexture,Object.defineProperty(n.CubeTexture.prototype, "images", {
            get: function () {
                return this.image
            }, set: function (e) {
                this.image = e
            }
        }),n.CompressedTexture = function (e, t, i, r, o, a, s, l, h, c, u) {
            n.Texture.call(this, null, a, s, l, h, c, r, o, u), this.image = {
                width: t,
                height: i
            }, this.mipmaps = e, this.flipY = !1, this.generateMipmaps = !1
        },n.CompressedTexture.prototype = Object.create(n.Texture.prototype),n.CompressedTexture.prototype.constructor = n.CompressedTexture,n.DataTexture = function (e, t, i, r, o, a, s, l, h, c, u) {
            n.Texture.call(this, null, a, s, l, h, c, r, o, u), this.image = {
                data: e,
                width: t,
                height: i
            }, this.magFilter = void 0 !== h ? h : n.NearestFilter, this.minFilter = void 0 !== c ? c : n.NearestFilter, this.flipY = !1, this.generateMipmaps = !1
        },n.DataTexture.prototype = Object.create(n.Texture.prototype),n.DataTexture.prototype.constructor = n.DataTexture,n.VideoTexture = function (e, t, i, r, o, a, s, l, h) {
            function c() {
                requestAnimationFrame(c), e.readyState === e.HAVE_ENOUGH_DATA && (u.needsUpdate = !0)
            }

            n.Texture.call(this, e, t, i, r, o, a, s, l, h), this.generateMipmaps = !1;
            var u = this;
            c()
        },n.VideoTexture.prototype = Object.create(n.Texture.prototype),n.VideoTexture.prototype.constructor = n.VideoTexture,n.Group = function () {
            n.Object3D.call(this), this.type = "Group"
        },n.Group.prototype = Object.create(n.Object3D.prototype),n.Group.prototype.constructor = n.Group,n.Points = function (e, t) {
            n.Object3D.call(this), this.type = "Points", this.geometry = void 0 !== e ? e : new n.Geometry, this.material = void 0 !== t ? t : new n.PointsMaterial({color: 16777215 * Math.random()})
        },n.Points.prototype = Object.create(n.Object3D.prototype),n.Points.prototype.constructor = n.Points,n.Points.prototype.raycast = function () {
            var e = new n.Matrix4, t = new n.Ray, i = new n.Sphere;
            return function (r, o) {
                function a(e, i) {
                    var n = t.distanceSqToPoint(e);
                    if (d > n) {
                        var a = t.closestPointToPoint(e);
                        a.applyMatrix4(h);
                        var l = r.ray.origin.distanceTo(a);
                        if (l < r.near || l > r.far)return;
                        o.push({
                            distance: l,
                            distanceToRay: Math.sqrt(n),
                            point: a.clone(),
                            index: i,
                            face: null,
                            object: s
                        })
                    }
                }

                var s = this, l = this.geometry, h = this.matrixWorld, c = r.params.Points.threshold;
                if (null === l.boundingSphere && l.computeBoundingSphere(), i.copy(l.boundingSphere), i.applyMatrix4(h), r.ray.intersectsSphere(i) !== !1) {
                    e.getInverse(h), t.copy(r.ray).applyMatrix4(e);
                    var u = c / ((this.scale.x + this.scale.y + this.scale.z) / 3), d = u * u, p = new n.Vector3;
                    if (l instanceof n.BufferGeometry) {
                        var f = l.index, g = l.attributes, m = g.position.array;
                        if (null !== f)for (var v = f.array, A = 0, y = v.length; y > A; A++) {
                            var C = v[A];
                            p.fromArray(m, 3 * C), a(p, C)
                        } else for (var A = 0, I = m.length / 3; I > A; A++)p.fromArray(m, 3 * A), a(p, A)
                    } else for (var b = l.vertices, A = 0, I = b.length; I > A; A++)a(b[A], A)
                }
            }
        }(),n.Points.prototype.clone = function () {
            return new this.constructor(this.geometry, this.material).copy(this)
        },n.Line = function (e, t, i) {
            return 1 === i ? (console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."), new n.LineSegments(e, t)) : (n.Object3D.call(this), this.type = "Line", this.geometry = void 0 !== e ? e : new n.Geometry, void(this.material = void 0 !== t ? t : new n.LineBasicMaterial({color: 16777215 * Math.random()})))
        },n.Line.prototype = Object.create(n.Object3D.prototype),n.Line.prototype.constructor = n.Line,n.Line.prototype.raycast = function () {
            var e = new n.Matrix4, t = new n.Ray, i = new n.Sphere;
            return function (r, o) {
                var a = r.linePrecision, s = a * a, l = this.geometry, h = this.matrixWorld;
                if (null === l.boundingSphere && l.computeBoundingSphere(), i.copy(l.boundingSphere), i.applyMatrix4(h), r.ray.intersectsSphere(i) !== !1) {
                    e.getInverse(h), t.copy(r.ray).applyMatrix4(e);
                    var c = new n.Vector3, u = new n.Vector3, d = new n.Vector3, p = new n.Vector3, f = this instanceof n.LineSegments ? 2 : 1;
                    if (l instanceof n.BufferGeometry) {
                        var g = l.index, m = l.attributes, v = m.position.array;
                        if (null !== g)for (var A = g.array, y = 0, C = A.length - 1; C > y; y += f) {
                            var I = A[y], b = A[y + 1];
                            c.fromArray(v, 3 * I), u.fromArray(v, 3 * b);
                            var w = t.distanceSqToSegment(c, u, p, d);
                            if (!(w > s)) {
                                p.applyMatrix4(this.matrixWorld);
                                var x = r.ray.origin.distanceTo(p);
                                x < r.near || x > r.far || o.push({
                                    distance: x,
                                    point: d.clone().applyMatrix4(this.matrixWorld),
                                    index: y,
                                    face: null,
                                    faceIndex: null,
                                    object: this
                                })
                            }
                        } else for (var y = 0, C = v.length / 3 - 1; C > y; y += f) {
                            c.fromArray(v, 3 * y), u.fromArray(v, 3 * y + 3);
                            var w = t.distanceSqToSegment(c, u, p, d);
                            if (!(w > s)) {
                                p.applyMatrix4(this.matrixWorld);
                                var x = r.ray.origin.distanceTo(p);
                                x < r.near || x > r.far || o.push({
                                    distance: x,
                                    point: d.clone().applyMatrix4(this.matrixWorld),
                                    index: y,
                                    face: null,
                                    faceIndex: null,
                                    object: this
                                })
                            }
                        }
                    } else if (l instanceof n.Geometry)for (var E = l.vertices, M = E.length, y = 0; M - 1 > y; y += f) {
                        var w = t.distanceSqToSegment(E[y], E[y + 1], p, d);
                        if (!(w > s)) {
                            p.applyMatrix4(this.matrixWorld);
                            var x = r.ray.origin.distanceTo(p);
                            x < r.near || x > r.far || o.push({
                                distance: x,
                                point: d.clone().applyMatrix4(this.matrixWorld),
                                index: y,
                                face: null,
                                faceIndex: null,
                                object: this
                            })
                        }
                    }
                }
            }
        }(),n.Line.prototype.clone = function () {
            return new this.constructor(this.geometry, this.material).copy(this)
        },n.LineStrip = 0,n.LinePieces = 1,n.LineSegments = function (e, t) {
            n.Line.call(this, e, t), this.type = "LineSegments"
        },n.LineSegments.prototype = Object.create(n.Line.prototype),n.LineSegments.prototype.constructor = n.LineSegments,n.Mesh = function (e, t) {
            n.Object3D.call(this), this.type = "Mesh", this.geometry = void 0 !== e ? e : new n.Geometry, this.material = void 0 !== t ? t : new n.MeshBasicMaterial({color: 16777215 * Math.random()}), this.drawMode = n.TrianglesDrawMode, this.updateMorphTargets()
        },n.Mesh.prototype = Object.create(n.Object3D.prototype),n.Mesh.prototype.constructor = n.Mesh,n.Mesh.prototype.setDrawMode = function (e) {
            this.drawMode = e
        },n.Mesh.prototype.updateMorphTargets = function () {
            if (void 0 !== this.geometry.morphTargets && this.geometry.morphTargets.length > 0) {
                this.morphTargetBase = -1, this.morphTargetInfluences = [], this.morphTargetDictionary = {};
                for (var e = 0, t = this.geometry.morphTargets.length; t > e; e++)this.morphTargetInfluences.push(0), this.morphTargetDictionary[this.geometry.morphTargets[e].name] = e
            }
        },n.Mesh.prototype.getMorphTargetIndexByName = function (e) {
            return void 0 !== this.morphTargetDictionary[e] ? this.morphTargetDictionary[e] : (console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target " + e + " does not exist. Returning 0."), 0)
        },n.Mesh.prototype.raycast = function () {
            function e(e, t, i, r, o, a, s) {
                return n.Triangle.barycoordFromPoint(e, t, i, r, m), o.multiplyScalar(m.x), a.multiplyScalar(m.y), s.multiplyScalar(m.z), o.add(a).add(s), o.clone()
            }

            function t(e, t, i, r, o, a, s) {
                var l, h = e.material;
                if (l = h.side === n.BackSide ? i.intersectTriangle(a, o, r, !0, s) : i.intersectTriangle(r, o, a, h.side !== n.DoubleSide, s), null === l)return null;
                A.copy(s), A.applyMatrix4(e.matrixWorld);
                var c = t.ray.origin.distanceTo(A);
                return c < t.near || c > t.far ? null : {distance: c, point: A.clone(), object: e}
            }

            function i(i, r, o, a, c, u, d, m) {
                s.fromArray(a, 3 * u), l.fromArray(a, 3 * d), h.fromArray(a, 3 * m);
                var A = t(i, r, o, s, l, h, v);
                return A && (c && (p.fromArray(c, 2 * u), f.fromArray(c, 2 * d), g.fromArray(c, 2 * m), A.uv = e(v, s, l, h, p, f, g)), A.face = new n.Face3(u, d, m, n.Triangle.normal(s, l, h)), A.faceIndex = u), A
            }

            var r = new n.Matrix4, o = new n.Ray, a = new n.Sphere, s = new n.Vector3, l = new n.Vector3, h = new n.Vector3, c = new n.Vector3, u = new n.Vector3, d = new n.Vector3, p = new n.Vector2, f = new n.Vector2, g = new n.Vector2, m = new n.Vector3, v = new n.Vector3, A = new n.Vector3;
            return function (m, A) {
                var y = this.geometry, C = this.material, I = this.matrixWorld;
                if (void 0 !== C && (null === y.boundingSphere && y.computeBoundingSphere(), a.copy(y.boundingSphere), a.applyMatrix4(I), m.ray.intersectsSphere(a) !== !1 && (r.getInverse(I), o.copy(m.ray).applyMatrix4(r), null === y.boundingBox || o.intersectsBox(y.boundingBox) !== !1))) {
                    var b, w;
                    if (y instanceof n.BufferGeometry) {
                        var x, E, M, T = y.index, S = y.attributes, P = S.position.array;
                        if (void 0 !== S.uv && (b = S.uv.array), null !== T)for (var _ = T.array, L = 0, D = _.length; D > L; L += 3)x = _[L], E = _[L + 1], M = _[L + 2], w = i(this, m, o, P, b, x, E, M), w && (w.faceIndex = Math.floor(L / 3), A.push(w)); else for (var L = 0, D = P.length; D > L; L += 9)x = L / 3, E = x + 1, M = x + 2, w = i(this, m, o, P, b, x, E, M), w && (w.index = x, A.push(w))
                    } else if (y instanceof n.Geometry) {
                        var R, B, O, F = C instanceof n.MultiMaterial, k = F === !0 ? C.materials : null, N = y.vertices, U = y.faces, V = y.faceVertexUvs[0];
                        V.length > 0 && (b = V);
                        for (var z = 0, G = U.length; G > z; z++) {
                            var H = U[z], j = F === !0 ? k[H.materialIndex] : C;
                            if (void 0 !== j) {
                                if (R = N[H.a], B = N[H.b], O = N[H.c], j.morphTargets === !0) {
                                    var W = y.morphTargets, Y = this.morphTargetInfluences;
                                    s.set(0, 0, 0), l.set(0, 0, 0), h.set(0, 0, 0);
                                    for (var X = 0, Q = W.length; Q > X; X++) {
                                        var Z = Y[X];
                                        if (0 !== Z) {
                                            var q = W[X].vertices;
                                            s.addScaledVector(c.subVectors(q[H.a], R), Z), l.addScaledVector(u.subVectors(q[H.b], B), Z), h.addScaledVector(d.subVectors(q[H.c], O), Z)
                                        }
                                    }
                                    s.add(R), l.add(B), h.add(O), R = s, B = l, O = h
                                }
                                if (w = t(this, m, o, R, B, O, v)) {
                                    if (b) {
                                        var K = b[z];
                                        p.copy(K[0]), f.copy(K[1]), g.copy(K[2]), w.uv = e(v, R, B, O, p, f, g)
                                    }
                                    w.face = H, w.faceIndex = z, A.push(w)
                                }
                            }
                        }
                    }
                }
            }
        }(),n.Mesh.prototype.clone = function () {
            return new this.constructor(this.geometry, this.material).copy(this)
        },n.Bone = function (e) {
            n.Object3D.call(this), this.type = "Bone", this.skin = e
        },n.Bone.prototype = Object.create(n.Object3D.prototype),n.Bone.prototype.constructor = n.Bone,n.Bone.prototype.copy = function (e) {
            return n.Object3D.prototype.copy.call(this, e), this.skin = e.skin, this
        },n.Skeleton = function (e, t, i) {
            if (this.useVertexTexture = void 0 !== i ? i : !0, this.identityMatrix = new n.Matrix4, e = e || [], this.bones = e.slice(0), this.useVertexTexture) {
                var r = Math.sqrt(4 * this.bones.length);
                r = n.Math.nextPowerOfTwo(Math.ceil(r)), r = Math.max(r, 4), this.boneTextureWidth = r, this.boneTextureHeight = r, this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4), this.boneTexture = new n.DataTexture(this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, n.RGBAFormat, n.FloatType)
            } else this.boneMatrices = new Float32Array(16 * this.bones.length);
            if (void 0 === t)this.calculateInverses(); else if (this.bones.length === t.length)this.boneInverses = t.slice(0); else {
                console.warn("THREE.Skeleton bonInverses is the wrong length."), this.boneInverses = [];
                for (var o = 0, a = this.bones.length; a > o; o++)this.boneInverses.push(new n.Matrix4)
            }
        },n.Skeleton.prototype.calculateInverses = function () {
            this.boneInverses = [];
            for (var e = 0, t = this.bones.length; t > e; e++) {
                var i = new n.Matrix4;
                this.bones[e] && i.getInverse(this.bones[e].matrixWorld), this.boneInverses.push(i)
            }
        },n.Skeleton.prototype.pose = function () {
            for (var e, t = 0, i = this.bones.length; i > t; t++)e = this.bones[t], e && e.matrixWorld.getInverse(this.boneInverses[t]);
            for (var t = 0, i = this.bones.length; i > t; t++)e = this.bones[t], e && (e.parent ? (e.matrix.getInverse(e.parent.matrixWorld), e.matrix.multiply(e.matrixWorld)) : e.matrix.copy(e.matrixWorld), e.matrix.decompose(e.position, e.quaternion, e.scale))
        },n.Skeleton.prototype.update = function () {
            var e = new n.Matrix4;
            return function () {
                for (var t = 0, i = this.bones.length; i > t; t++) {
                    var n = this.bones[t] ? this.bones[t].matrixWorld : this.identityMatrix;
                    e.multiplyMatrices(n, this.boneInverses[t]), e.flattenToArrayOffset(this.boneMatrices, 16 * t)
                }
                this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
            }
        }(),n.Skeleton.prototype.clone = function () {
            return new n.Skeleton(this.bones, this.boneInverses, this.useVertexTexture)
        },n.SkinnedMesh = function (e, t, i) {
            n.Mesh.call(this, e, t), this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new n.Matrix4, this.bindMatrixInverse = new n.Matrix4;
            var r = [];
            if (this.geometry && void 0 !== this.geometry.bones) {
                for (var o, a, s = 0, l = this.geometry.bones.length; l > s; ++s)a = this.geometry.bones[s], o = new n.Bone(this), r.push(o), o.name = a.name, o.position.fromArray(a.pos), o.quaternion.fromArray(a.rotq), void 0 !== a.scl && o.scale.fromArray(a.scl);
                for (var s = 0, l = this.geometry.bones.length; l > s; ++s)a = this.geometry.bones[s], -1 !== a.parent && null !== a.parent ? r[a.parent].add(r[s]) : this.add(r[s])
            }
            this.normalizeSkinWeights(), this.updateMatrixWorld(!0), this.bind(new n.Skeleton(r, void 0, i), this.matrixWorld)
        },n.SkinnedMesh.prototype = Object.create(n.Mesh.prototype),n.SkinnedMesh.prototype.constructor = n.SkinnedMesh,n.SkinnedMesh.prototype.bind = function (e, t) {
            this.skeleton = e, void 0 === t && (this.updateMatrixWorld(!0), this.skeleton.calculateInverses(), t = this.matrixWorld), this.bindMatrix.copy(t), this.bindMatrixInverse.getInverse(t)
        },n.SkinnedMesh.prototype.pose = function () {
            this.skeleton.pose()
        },n.SkinnedMesh.prototype.normalizeSkinWeights = function () {
            if (this.geometry instanceof n.Geometry)for (var e = 0; e < this.geometry.skinWeights.length; e++) {
                var t = this.geometry.skinWeights[e], i = 1 / t.lengthManhattan();
                i !== 1 / 0 ? t.multiplyScalar(i) : t.set(1, 0, 0, 0)
            } else if (this.geometry instanceof n.BufferGeometry)for (var r = new n.Vector4, o = this.geometry.attributes.skinWeight, e = 0; e < o.count; e++) {
                r.x = o.getX(e), r.y = o.getY(e), r.z = o.getZ(e), r.w = o.getW(e);
                var i = 1 / r.lengthManhattan();
                i !== 1 / 0 ? r.multiplyScalar(i) : r.set(1, 0, 0, 0), o.setXYZW(e, r.x, r.y, r.z, r.w)
            }
        },n.SkinnedMesh.prototype.updateMatrixWorld = function (e) {
            n.Mesh.prototype.updateMatrixWorld.call(this, !0), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh unrecognized bindMode: " + this.bindMode)
        },n.SkinnedMesh.prototype.clone = function () {
            return new this.constructor(this.geometry, this.material, this.useVertexTexture).copy(this)
        },n.LOD = function () {
            n.Object3D.call(this), this.type = "LOD", Object.defineProperties(this, {
                levels: {
                    enumerable: !0,
                    value: []
                }, objects: {
                    get: function () {
                        return console.warn("THREE.LOD: .objects has been renamed to .levels."), this.levels
                    }
                }
            })
        },n.LOD.prototype = Object.create(n.Object3D.prototype),n.LOD.prototype.constructor = n.LOD,n.LOD.prototype.addLevel = function (e, t) {
            void 0 === t && (t = 0), t = Math.abs(t);
            for (var i = this.levels, n = 0; n < i.length && !(t < i[n].distance); n++);
            i.splice(n, 0, {distance: t, object: e}), this.add(e)
        },n.LOD.prototype.getObjectForDistance = function (e) {
            for (var t = this.levels, i = 1, n = t.length; n > i && !(e < t[i].distance); i++);
            return t[i - 1].object
        },n.LOD.prototype.raycast = function () {
            var e = new n.Vector3;
            return function (t, i) {
                e.setFromMatrixPosition(this.matrixWorld);
                var n = t.ray.origin.distanceTo(e);
                this.getObjectForDistance(n).raycast(t, i)
            }
        }(),n.LOD.prototype.update = function () {
            var e = new n.Vector3, t = new n.Vector3;
            return function (i) {
                var n = this.levels;
                if (n.length > 1) {
                    e.setFromMatrixPosition(i.matrixWorld), t.setFromMatrixPosition(this.matrixWorld);
                    var r = e.distanceTo(t);
                    n[0].object.visible = !0;
                    for (var o = 1, a = n.length; a > o && r >= n[o].distance; o++)n[o - 1].object.visible = !1, n[o].object.visible = !0;
                    for (; a > o; o++)n[o].object.visible = !1
                }
            }
        }(),n.LOD.prototype.copy = function (e) {
            n.Object3D.prototype.copy.call(this, e, !1);
            for (var t = e.levels, i = 0, r = t.length; r > i; i++) {
                var o = t[i];
                this.addLevel(o.object.clone(), o.distance)
            }
            return this
        },n.LOD.prototype.toJSON = function (e) {
            var t = n.Object3D.prototype.toJSON.call(this, e);
            t.object.levels = [];
            for (var i = this.levels, r = 0, o = i.length; o > r; r++) {
                var a = i[r];
                t.object.levels.push({object: a.object.uuid, distance: a.distance})
            }
            return t
        },n.Sprite = function () {
            var e = new Uint16Array([0, 1, 2, 0, 2, 3]), t = new Float32Array([-.5, -.5, 0, .5, -.5, 0, .5, .5, 0, -.5, .5, 0]), i = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), r = new n.BufferGeometry;
            return r.setIndex(new n.BufferAttribute(e, 1)), r.addAttribute("position", new n.BufferAttribute(t, 3)), r.addAttribute("uv", new n.BufferAttribute(i, 2)), function (e) {
                n.Object3D.call(this), this.type = "Sprite", this.geometry = r, this.material = void 0 !== e ? e : new n.SpriteMaterial
            }
        }(),n.Sprite.prototype = Object.create(n.Object3D.prototype),n.Sprite.prototype.constructor = n.Sprite,n.Sprite.prototype.raycast = function () {
            var e = new n.Vector3;
            return function (t, i) {
                e.setFromMatrixPosition(this.matrixWorld);
                var n = t.ray.distanceSqToPoint(e), r = this.scale.x * this.scale.y;
                n > r || i.push({distance: Math.sqrt(n), point: this.position, face: null, object: this})
            }
        }(),n.Sprite.prototype.clone = function () {
            return new this.constructor(this.material).copy(this)
        },n.Particle = n.Sprite,n.LensFlare = function (e, t, i, r, o) {
            n.Object3D.call(this), this.lensFlares = [], this.positionScreen = new n.Vector3, this.customUpdateCallback = void 0, void 0 !== e && this.add(e, t, i, r, o)
        },n.LensFlare.prototype = Object.create(n.Object3D.prototype),n.LensFlare.prototype.constructor = n.LensFlare,n.LensFlare.prototype.add = function (e, t, i, r, o, a) {
            void 0 === t && (t = -1), void 0 === i && (i = 0), void 0 === a && (a = 1), void 0 === o && (o = new n.Color(16777215)), void 0 === r && (r = n.NormalBlending), i = Math.min(i, Math.max(0, i)), this.lensFlares.push({
                texture: e,
                size: t,
                distance: i,
                x: 0,
                y: 0,
                z: 0,
                scale: 1,
                rotation: 0,
                opacity: a,
                color: o,
                blending: r
            })
        },n.LensFlare.prototype.updateLensFlares = function () {
            var e, t, i = this.lensFlares.length, n = 2 * -this.positionScreen.x, r = 2 * -this.positionScreen.y;
            for (e = 0; i > e; e++)t = this.lensFlares[e], t.x = this.positionScreen.x + n * t.distance, t.y = this.positionScreen.y + r * t.distance, t.wantedRotation = t.x * Math.PI * .25, t.rotation += .25 * (t.wantedRotation - t.rotation)
        },n.LensFlare.prototype.copy = function (e) {
            n.Object3D.prototype.copy.call(this, e), this.positionScreen.copy(e.positionScreen), this.customUpdateCallback = e.customUpdateCallback;
            for (var t = 0, i = e.lensFlares.length; i > t; t++)this.lensFlares.push(e.lensFlares[t]);
            return this
        },n.Scene = function () {
            n.Object3D.call(this), this.type = "Scene", this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0
        },n.Scene.prototype = Object.create(n.Object3D.prototype),n.Scene.prototype.constructor = n.Scene,n.Scene.prototype.copy = function (e, t) {
            return n.Object3D.prototype.copy.call(this, e, t), null !== e.fog && (this.fog = e.fog.clone()), null !== e.overrideMaterial && (this.overrideMaterial = e.overrideMaterial.clone()), this.autoUpdate = e.autoUpdate, this.matrixAutoUpdate = e.matrixAutoUpdate, this
        },n.Fog = function (e, t, i) {
            this.name = "", this.color = new n.Color(e), this.near = void 0 !== t ? t : 1, this.far = void 0 !== i ? i : 1e3
        },n.Fog.prototype.clone = function () {
            return new n.Fog(this.color.getHex(), this.near, this.far)
        },n.FogExp2 = function (e, t) {
            this.name = "", this.color = new n.Color(e), this.density = void 0 !== t ? t : 25e-5
        },n.FogExp2.prototype.clone = function () {
            return new n.FogExp2(this.color.getHex(), this.density)
        },n.ShaderChunk = {},n.ShaderChunk.alphamap_fragment = "#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",n.ShaderChunk.alphamap_pars_fragment = "#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif\n",n.ShaderChunk.alphatest_fragment = "#ifdef ALPHATEST\n	if ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",n.ShaderChunk.aomap_fragment = "#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n	#endif\n#endif\n",n.ShaderChunk.aomap_pars_fragment = "#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",n.ShaderChunk.begin_vertex = "\nvec3 transformed = vec3( position );\n",n.ShaderChunk.beginnormal_vertex = "\nvec3 objectNormal = vec3( normal );\n",n.ShaderChunk.bsdfs = "bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n	return any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n		if( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n			float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n			float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n			return distanceFalloff * maxDistanceCutoffFactor;\n#else\n			return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n		}\n		return 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	return 1.0 / ( gl * gv );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_GGX_Smith( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n	return specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",n.ShaderChunk.bumpmap_pars_fragment = "#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 );\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif\n",n.ShaderChunk.color_fragment = "#ifdef USE_COLOR\n	diffuseColor.rgb *= vColor;\n#endif",n.ShaderChunk.color_pars_fragment = "#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif\n",n.ShaderChunk.color_pars_vertex = "#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",n.ShaderChunk.color_vertex = "#ifdef USE_COLOR\n	vColor.xyz = color.xyz;\n#endif",n.ShaderChunk.common = "#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	float distance = dot( planeNormal, point - pointOnPlane );\n	return - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",n.ShaderChunk.cube_uv_reflection_fragment = "#ifdef ENVMAP_TYPE_CUBE_UV\nconst float cubeUV_textureSize = 1024.0;\nint getFaceFromDirection(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    int face = -1;\n    if( absDirection.x > absDirection.z ) {\n        if(absDirection.x > absDirection.y )\n            face = direction.x > 0.0 ? 0 : 3;\n        else\n            face = direction.y > 0.0 ? 1 : 4;\n    }\n    else {\n        if(absDirection.z > absDirection.y )\n            face = direction.z > 0.0 ? 2 : 5;\n        else\n            face = direction.y > 0.0 ? 1 : 4;\n    }\n    return face;\n}\nconst float cubeUV_maxLods1 = log2(cubeUV_textureSize*0.25) - 1.0;\nconst float cubeUV_rangeClamp = exp2((6.0 - 1.0) * 2.0);\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n    float scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n    float dxRoughness = dFdx(roughness);\n    float dyRoughness = dFdy(roughness);\n    vec3 dx = dFdx( vec * scale * dxRoughness );\n    vec3 dy = dFdy( vec * scale * dyRoughness );\n    float d = max( dot( dx, dx ), dot( dy, dy ) );\n    d = clamp(d, 1.0, cubeUV_rangeClamp);\n    float mipLevel = 0.5 * log2(d);\n    return vec2(floor(mipLevel), fract(mipLevel));\n}\nconst float cubeUV_maxLods2 = log2(cubeUV_textureSize*0.25) - 2.0;\nconst float cubeUV_rcpTextureSize = 1.0 / cubeUV_textureSize;\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n    mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n    float a = 16.0 * cubeUV_rcpTextureSize;\n    vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n    vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n    float powScale = exp2_packed.x * exp2_packed.y;\n    float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n    float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n    bool bRes = mipLevel == 0.0;\n    scale =  bRes && (scale < a) ? a : scale;\n    vec3 r;\n    vec2 offset;\n    int face = getFaceFromDirection(direction);\n    float rcpPowScale = 1.0 / powScale;\n    if( face == 0) {\n        r = vec3(direction.x, -direction.z, direction.y);\n        offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n    }\n    else if( face == 1) {\n        r = vec3(direction.y, direction.x, direction.z);\n        offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n    }\n    else if( face == 2) {\n        r = vec3(direction.z, direction.x, direction.y);\n        offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n    }\n    else if( face == 3) {\n        r = vec3(direction.x, direction.z, direction.y);\n        offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n    }\n    else if( face == 4) {\n        r = vec3(direction.y, direction.x, -direction.z);\n        offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n    }\n    else {\n        r = vec3(direction.z, -direction.x, direction.y);\n        offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n    }\n    r = normalize(r);\n    float texelOffset = 0.5 * cubeUV_rcpTextureSize;\n    vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n    vec2 base = offset + vec2( texelOffset );\n    return base + s * ( scale - 2.0 * texelOffset );\n}\nconst float cubeUV_maxLods3 = log2(cubeUV_textureSize*0.25) - 3.0;\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n    float roughnessVal = roughness* cubeUV_maxLods3;\n    float r1 = floor(roughnessVal);\n    float r2 = r1 + 1.0;\n    float t = fract(roughnessVal);\n    vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n    float s = mipInfo.y;\n    float level0 = mipInfo.x;\n    float level1 = level0 + 1.0;\n    level1 = level1 > 5.0 ? 5.0 : level1;\n    level0 += min( floor( s + 0.5 ), 5.0 );\n    vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n    vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n    vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n    vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n    vec4 result = mix(color10, color20, t);\n    return vec4(result.rgb, 1.0);\n}\n#endif\n",
        n.ShaderChunk.defaultnormal_vertex = "#ifdef FLIP_SIDED\n	objectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",n.ShaderChunk.displacementmap_vertex = "#ifdef USE_DISPLACEMENTMAP\n	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",n.ShaderChunk.displacementmap_pars_vertex = "#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif\n",n.ShaderChunk.emissivemap_fragment = "#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",n.ShaderChunk.emissivemap_pars_fragment = "#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif\n",n.ShaderChunk.encodings_pars_fragment = "\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",n.ShaderChunk.encodings_fragment = "  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",n.ShaderChunk.envmap_fragment = "#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#else\n		float flipNormal = 1.0;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n	envColor = envMapTexelToLinear( envColor );\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif\n",n.ShaderChunk.envmap_pars_fragment = "#if defined( USE_ENVMAP ) || defined( STANDARD )\n	uniform float reflectivity;\n	uniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( STANDARD )\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif\n",n.ShaderChunk.envmap_pars_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n	varying vec3 vReflect;\n	uniform float refractionRatio;\n#endif\n",n.ShaderChunk.envmap_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n	vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	#ifdef ENVMAP_MODE_REFLECTION\n		vReflect = reflect( cameraToVertex, worldNormal );\n	#else\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n	#endif\n#endif\n",n.ShaderChunk.fog_fragment = "#ifdef USE_FOG\n	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	#ifdef FOG_EXP2\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",n.ShaderChunk.fog_pars_fragment = "#ifdef USE_FOG\n	uniform vec3 fogColor;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",n.ShaderChunk.lightmap_fragment = "#ifdef USE_LIGHTMAP\n	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",n.ShaderChunk.lightmap_pars_fragment = "#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",n.ShaderChunk.lights_lambert_vertex = "vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n	vLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		directLight = getPointDirectLightIrradiance( pointLights[ i ], geometry );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		directLight = getSpotDirectLightIrradiance( spotLights[ i ], geometry );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directLight = getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		#ifdef DOUBLE_SIDED\n			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n		#endif\n	}\n#endif\n",n.ShaderChunk.lights_pars = "uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	return irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	IncidentLight getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry ) {\n		IncidentLight directLight;\n		directLight.color = directionalLight.color;\n		directLight.direction = directionalLight.direction;\n		directLight.visible = true;\n		return directLight;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	IncidentLight getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry ) {\n		IncidentLight directLight;\n		vec3 lVector = pointLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		if ( testLightInRange( lightDistance, pointLight.distance ) ) {\n			directLight.color = pointLight.color;\n			directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n		return directLight;\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	IncidentLight getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry ) {\n		IncidentLight directLight;\n		vec3 lVector = spotLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		float angleCos = dot( directLight.direction, spotLight.direction );\n		if ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n			directLight.color = spotLight.color;\n			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n		return directLight;\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n		float dotNL = dot( geometry.normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			irradiance *= PI;\n		#endif\n		return irradiance;\n	}\n#endif\n#if defined( USE_ENVMAP ) && defined( STANDARD )\n	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n		#ifdef DOUBLE_SIDED\n			float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		#else\n			float flipNormal = 1.0;\n		#endif\n		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n			#endif\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n		#else\n			vec4 envMapColor = vec4( 0.0 );\n		#endif\n		envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		return PI * envMapColor.rgb * envMapIntensity;\n	}\n	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		float maxMIPLevelScalar = float( maxMIPLevel );\n		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n	}\n	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n		#else\n			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n		#endif\n		#ifdef DOUBLE_SIDED\n			float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		#else\n			float flipNormal = 1.0;\n		#endif\n		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n			#endif\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n		#elif defined( ENVMAP_TYPE_EQUIREC )\n			vec2 sampleUV;\n			sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n			sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n			#endif\n		#elif defined( ENVMAP_TYPE_SPHERE )\n			vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#endif\n		#endif\n		envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		return envMapColor.rgb * envMapIntensity;\n	}\n#endif\n",n.ShaderChunk.lights_phong_fragment = "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",n.ShaderChunk.lights_phong_pars_fragment = "#ifdef USE_ENVMAP\n	varying vec3 vWorldPosition;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )	(0)\n",n.ShaderChunk.lights_phong_pars_vertex = "#ifdef USE_ENVMAP\n	varying vec3 vWorldPosition;\n#endif\n",n.ShaderChunk.lights_phong_vertex = "#ifdef USE_ENVMAP\n	vWorldPosition = worldPosition.xyz;\n#endif\n",n.ShaderChunk.lights_standard_fragment = "StandardMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\nmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n",n.ShaderChunk.lights_standard_pars_fragment = "struct StandardMaterial {\n	vec3	diffuseColor;\n	float	specularRoughness;\n	vec3	specularColor;\n};\nvoid RE_Direct_Standard( const in IncidentLight directLight, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n}\nvoid RE_IndirectDiffuse_Standard( const in vec3 irradiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Standard( const in vec3 radiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n}\n#define RE_Direct				RE_Direct_Standard\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Standard\n#define RE_IndirectSpecular		RE_IndirectSpecular_Standard\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",n.ShaderChunk.lights_template = "\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		directLight = getPointDirectLightIrradiance( pointLight, geometry );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		directLight = getSpotDirectLightIrradiance( spotLight, geometry );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		directLight = getDirectionalDirectLightIrradiance( directionalLight, geometry );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#ifdef USE_LIGHTMAP\n		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			lightMapIrradiance *= PI;\n		#endif\n		irradiance += lightMapIrradiance;\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		}\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n	 	irradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n	#endif\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n	RE_IndirectSpecular( radiance, geometry, material, reflectedLight );\n#endif\n",n.ShaderChunk.logdepthbuf_fragment = "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",n.ShaderChunk.logdepthbuf_pars_fragment = "#ifdef USE_LOGDEPTHBUF\n	uniform float logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n#endif\n",n.ShaderChunk.logdepthbuf_pars_vertex = "#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n	uniform float logDepthBufFC;\n#endif",n.ShaderChunk.logdepthbuf_vertex = "#ifdef USE_LOGDEPTHBUF\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n	#else\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n	#endif\n#endif\n",n.ShaderChunk.map_fragment = "#ifdef USE_MAP\n	vec4 texelColor = texture2D( map, vUv );\n	texelColor = mapTexelToLinear( texelColor );\n	diffuseColor *= texelColor;\n#endif\n",n.ShaderChunk.map_pars_fragment = "#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n",n.ShaderChunk.map_particle_fragment = "#ifdef USE_MAP\n	vec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n	diffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",n.ShaderChunk.map_particle_pars_fragment = "#ifdef USE_MAP\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n#endif\n",n.ShaderChunk.metalnessmap_fragment = "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.r;\n#endif\n",n.ShaderChunk.metalnessmap_pars_fragment = "#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",n.ShaderChunk.morphnormal_vertex = "#ifdef USE_MORPHNORMALS\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",n.ShaderChunk.morphtarget_pars_vertex = "#ifdef USE_MORPHTARGETS\n	#ifndef USE_MORPHNORMALS\n	uniform float morphTargetInfluences[ 8 ];\n	#else\n	uniform float morphTargetInfluences[ 4 ];\n	#endif\n#endif",n.ShaderChunk.morphtarget_vertex = "#ifdef USE_MORPHTARGETS\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n	#ifndef USE_MORPHNORMALS\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n	#endif\n#endif\n",n.ShaderChunk.normal_fragment = "#ifdef FLAT_SHADED\n	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#endif\n#endif\n#ifdef USE_NORMALMAP\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",n.ShaderChunk.normalmap_pars_fragment = "#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n	}\n#endif\n",n.ShaderChunk.premultiplied_alpha_fragment = "#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",n.ShaderChunk.project_vertex = "#ifdef USE_SKINNING\n	vec4 mvPosition = modelViewMatrix * skinned;\n#else\n	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",n.ShaderChunk.roughnessmap_fragment = "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.r;\n#endif\n",n.ShaderChunk.roughnessmap_pars_fragment = "#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",n.ShaderChunk.shadowmap_pars_fragment = "#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n	float unpackDepth( const in vec4 rgba_depth ) {\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		return dot( rgba_depth, bit_shift );\n	}\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackDepth( texture2D( depths, uv ) ) );\n	}\n	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n		const vec2 offset = vec2( 0.0, 1.0 );\n		vec2 texelSize = vec2( 1.0 ) / size;\n		vec2 centroidUV = floor( uv * size + 0.5 ) / size;\n		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n		vec2 f = fract( uv * size + 0.5 );\n		float a = mix( lb, lt, f.y );\n		float b = mix( rb, rt, f.y );\n		float c = mix( a, b, f.x );\n		return c;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			return (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			return (\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return 1.0;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		vec3 bd3D = normalize( lightToPosition );\n		float dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif\n",
        n.ShaderChunk.shadowmap_pars_vertex = "#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n#endif\n",n.ShaderChunk.shadowmap_vertex = "#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n#endif\n",n.ShaderChunk.shadowmask_pars_fragment = "float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#endif\n	return shadow;\n}\n",n.ShaderChunk.skinbase_vertex = "#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",n.ShaderChunk.skinning_pars_vertex = "#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	#ifdef BONE_TEXTURE\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n		mat4 getBoneMatrix( const in float i ) {\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n			y = dy * ( y + 0.5 );\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n			mat4 bone = mat4( v1, v2, v3, v4 );\n			return bone;\n		}\n	#else\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n		mat4 getBoneMatrix( const in float i ) {\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n		}\n	#endif\n#endif\n",n.ShaderChunk.skinning_vertex = "#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n#endif\n",n.ShaderChunk.skinnormal_vertex = "#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",n.ShaderChunk.specularmap_fragment = "float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",n.ShaderChunk.specularmap_pars_fragment = "#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",n.ShaderChunk.tonemapping_fragment = "#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",n.ShaderChunk.tonemapping_pars_fragment = "#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",n.ShaderChunk.uv2_pars_fragment = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",n.ShaderChunk.uv2_pars_vertex = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n#endif",n.ShaderChunk.uv2_vertex = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = uv2;\n#endif",n.ShaderChunk.uv_pars_fragment = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n#endif",n.ShaderChunk.uv_pars_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n#endif\n",n.ShaderChunk.uv_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",n.ShaderChunk.worldpos_vertex = "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( STANDARD ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n	#ifdef USE_SKINNING\n		vec4 worldPosition = modelMatrix * skinned;\n	#else\n		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n	#endif\n#endif\n",n.UniformsUtils = {
            merge: function (e) {
                for (var t = {}, i = 0; i < e.length; i++) {
                    var n = this.clone(e[i]);
                    for (var r in n)t[r] = n[r]
                }
                return t
            }, clone: function (e) {
                var t = {};
                for (var i in e) {
                    t[i] = {};
                    for (var r in e[i]) {
                        var o = e[i][r];
                        o instanceof n.Color || o instanceof n.Vector2 || o instanceof n.Vector3 || o instanceof n.Vector4 || o instanceof n.Matrix3 || o instanceof n.Matrix4 || o instanceof n.Texture ? t[i][r] = o.clone() : Array.isArray(o) ? t[i][r] = o.slice() : t[i][r] = o
                    }
                }
                return t
            }
        },n.UniformsLib = {
            common: {
                diffuse: {type: "c", value: new n.Color(15658734)},
                opacity: {type: "f", value: 1},
                map: {type: "t", value: null},
                offsetRepeat: {type: "v4", value: new n.Vector4(0, 0, 1, 1)},
                specularMap: {type: "t", value: null},
                alphaMap: {type: "t", value: null},
                envMap: {type: "t", value: null},
                flipEnvMap: {type: "f", value: -1},
                reflectivity: {type: "f", value: 1},
                refractionRatio: {type: "f", value: .98}
            },
            aomap: {aoMap: {type: "t", value: null}, aoMapIntensity: {type: "f", value: 1}},
            lightmap: {lightMap: {type: "t", value: null}, lightMapIntensity: {type: "f", value: 1}},
            emissivemap: {emissiveMap: {type: "t", value: null}},
            bumpmap: {bumpMap: {type: "t", value: null}, bumpScale: {type: "f", value: 1}},
            normalmap: {normalMap: {type: "t", value: null}, normalScale: {type: "v2", value: new n.Vector2(1, 1)}},
            displacementmap: {
                displacementMap: {type: "t", value: null},
                displacementScale: {type: "f", value: 1},
                displacementBias: {type: "f", value: 0}
            },
            roughnessmap: {roughnessMap: {type: "t", value: null}},
            metalnessmap: {metalnessMap: {type: "t", value: null}},
            fog: {
                fogDensity: {type: "f", value: 25e-5},
                fogNear: {type: "f", value: 1},
                fogFar: {type: "f", value: 2e3},
                fogColor: {type: "c", value: new n.Color(16777215)}
            },
            lights: {
                ambientLightColor: {type: "fv", value: []},
                directionalLights: {
                    type: "sa",
                    value: [],
                    properties: {
                        direction: {type: "v3"},
                        color: {type: "c"},
                        shadow: {type: "i"},
                        shadowBias: {type: "f"},
                        shadowRadius: {type: "f"},
                        shadowMapSize: {type: "v2"}
                    }
                },
                directionalShadowMap: {type: "tv", value: []},
                directionalShadowMatrix: {type: "m4v", value: []},
                spotLights: {
                    type: "sa",
                    value: [],
                    properties: {
                        color: {type: "c"},
                        position: {type: "v3"},
                        direction: {type: "v3"},
                        distance: {type: "f"},
                        coneCos: {type: "f"},
                        penumbraCos: {type: "f"},
                        decay: {type: "f"},
                        shadow: {type: "i"},
                        shadowBias: {type: "f"},
                        shadowRadius: {type: "f"},
                        shadowMapSize: {type: "v2"}
                    }
                },
                spotShadowMap: {type: "tv", value: []},
                spotShadowMatrix: {type: "m4v", value: []},
                pointLights: {
                    type: "sa",
                    value: [],
                    properties: {
                        color: {type: "c"},
                        position: {type: "v3"},
                        decay: {type: "f"},
                        distance: {type: "f"},
                        shadow: {type: "i"},
                        shadowBias: {type: "f"},
                        shadowRadius: {type: "f"},
                        shadowMapSize: {type: "v2"}
                    }
                },
                pointShadowMap: {type: "tv", value: []},
                pointShadowMatrix: {type: "m4v", value: []},
                hemisphereLights: {
                    type: "sa",
                    value: [],
                    properties: {direction: {type: "v3"}, skyColor: {type: "c"}, groundColor: {type: "c"}}
                }
            },
            points: {
                diffuse: {type: "c", value: new n.Color(15658734)},
                opacity: {type: "f", value: 1},
                size: {type: "f", value: 1},
                scale: {type: "f", value: 1},
                map: {type: "t", value: null},
                offsetRepeat: {type: "v4", value: new n.Vector4(0, 0, 1, 1)}
            }
        },n.ShaderChunk.cube_frag = "uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n	#include <logdepthbuf_fragment>\n}\n",n.ShaderChunk.cube_vert = "varying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n	#include <logdepthbuf_vertex>\n}\n",n.ShaderChunk.depth_frag = "uniform float mNear;\nuniform float mFar;\nuniform float opacity;\n#include <common>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	float color = 1.0 - smoothstep( mNear, mFar, depth );\n	gl_FragColor = vec4( vec3( color ), opacity );\n}\n",n.ShaderChunk.depth_vert = "#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n}\n",n.ShaderChunk.depthRGBA_frag = "#include <common>\n#include <logdepthbuf_pars_fragment>\nvec4 pack_depth( const in float depth ) {\n	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bit_mask;\n	return res;\n}\nvoid main() {\n	#include <logdepthbuf_fragment>\n	#ifdef USE_LOGDEPTHBUF_EXT\n		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n	#else\n		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n	#endif\n}\n",n.ShaderChunk.depthRGBA_vert = "#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <skinbase_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n}\n",n.ShaderChunk.distanceRGBA_frag = "uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\nvec4 pack1K ( float depth ) {\n	depth /= 1000.0;\n	const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bitSh * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bitMsk;\n	return res;\n}\nfloat unpack1K ( vec4 color ) {\n	const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n	return dot( color, bitSh ) * 1000.0;\n}\nvoid main () {\n	gl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\n}\n",n.ShaderChunk.distanceRGBA_vert = "varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\nvoid main() {\n	#include <skinbase_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	vWorldPosition = worldPosition;\n}\n",n.ShaderChunk.equirect_frag = "uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec3 direction = normalize( vWorldPosition );\n	vec2 sampleUV;\n	sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <logdepthbuf_fragment>\n}\n",n.ShaderChunk.equirect_vert = "varying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n	#include <logdepthbuf_vertex>\n}\n",n.ShaderChunk.linedashed_frag = "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",n.ShaderChunk.linedashed_vert = "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n}\n",n.ShaderChunk.meshbasic_frag = "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight;\n	reflectedLight.directDiffuse = vec3( 0.0 );\n	reflectedLight.directSpecular = vec3( 0.0 );\n	reflectedLight.indirectDiffuse = diffuseColor.rgb;\n	reflectedLight.indirectSpecular = vec3( 0.0 );\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",n.ShaderChunk.meshbasic_vert = "#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_ENVMAP\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n}\n",n.ShaderChunk.meshlambert_frag = "uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <emissivemap_fragment>\n	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n	#include <lightmap_fragment>\n	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n	#else\n		reflectedLight.directDiffuse = vLightFront;\n	#endif\n	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",n.ShaderChunk.meshlambert_vert = "#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_lambert_vertex>\n	#include <shadowmap_vertex>\n}\n",n.ShaderChunk.meshphong_frag = "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_template>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",n.ShaderChunk.meshphong_vert = "#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <lights_phong_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_phong_vertex>\n	#include <shadowmap_vertex>\n}\n",n.ShaderChunk.meshstandard_frag = "#define STANDARD\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_standard_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n	#include <lights_standard_fragment>\n	#include <lights_template>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",n.ShaderChunk.meshstandard_vert = "#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n}\n",n.ShaderChunk.normal_frag = "uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n	#include <logdepthbuf_fragment>\n}\n",n.ShaderChunk.normal_vert = "varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	vNormal = normalize( normalMatrix * normal );\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n}\n",n.ShaderChunk.points_frag = "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",n.ShaderChunk.points_vert = "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <begin_vertex>\n	#include <project_vertex>\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / - mvPosition.z );\n	#else\n		gl_PointSize = size;\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n}\n",n.ShaderLib = {
            basic: {
                uniforms: n.UniformsUtils.merge([n.UniformsLib.common, n.UniformsLib.aomap, n.UniformsLib.fog]),
                vertexShader: n.ShaderChunk.meshbasic_vert,
                fragmentShader: n.ShaderChunk.meshbasic_frag
            },
            lambert: {
                uniforms: n.UniformsUtils.merge([n.UniformsLib.common, n.UniformsLib.aomap, n.UniformsLib.lightmap, n.UniformsLib.emissivemap, n.UniformsLib.fog, n.UniformsLib.lights, {
                    emissive: {
                        type: "c",
                        value: new n.Color(0)
                    }
                }]), vertexShader: n.ShaderChunk.meshlambert_vert, fragmentShader: n.ShaderChunk.meshlambert_frag
            },
            phong: {
                uniforms: n.UniformsUtils.merge([n.UniformsLib.common, n.UniformsLib.aomap, n.UniformsLib.lightmap, n.UniformsLib.emissivemap, n.UniformsLib.bumpmap, n.UniformsLib.normalmap, n.UniformsLib.displacementmap, n.UniformsLib.fog, n.UniformsLib.lights, {
                    emissive: {
                        type: "c",
                        value: new n.Color(0)
                    }, specular: {type: "c", value: new n.Color(1118481)}, shininess: {type: "f", value: 30}
                }]), vertexShader: n.ShaderChunk.meshphong_vert, fragmentShader: n.ShaderChunk.meshphong_frag
            },
            standard: {
                uniforms: n.UniformsUtils.merge([n.UniformsLib.common, n.UniformsLib.aomap, n.UniformsLib.lightmap, n.UniformsLib.emissivemap, n.UniformsLib.bumpmap, n.UniformsLib.normalmap, n.UniformsLib.displacementmap, n.UniformsLib.roughnessmap, n.UniformsLib.metalnessmap, n.UniformsLib.fog, n.UniformsLib.lights, {
                    emissive: {
                        type: "c",
                        value: new n.Color(0)
                    },
                    roughness: {type: "f", value: .5},
                    metalness: {type: "f", value: 0},
                    envMapIntensity: {type: "f", value: 1}
                }]), vertexShader: n.ShaderChunk.meshstandard_vert, fragmentShader: n.ShaderChunk.meshstandard_frag
            },
            points: {
                uniforms: n.UniformsUtils.merge([n.UniformsLib.points, n.UniformsLib.fog]),
                vertexShader: n.ShaderChunk.points_vert,
                fragmentShader: n.ShaderChunk.points_frag
            },
            dashed: {
                uniforms: n.UniformsUtils.merge([n.UniformsLib.common, n.UniformsLib.fog, {
                    scale: {
                        type: "f",
                        value: 1
                    }, dashSize: {type: "f", value: 1}, totalSize: {type: "f", value: 2}
                }]), vertexShader: n.ShaderChunk.linedashed_vert, fragmentShader: n.ShaderChunk.linedashed_frag
            },
            depth: {
                uniforms: {
                    mNear: {type: "f", value: 1},
                    mFar: {type: "f", value: 2e3},
                    opacity: {type: "f", value: 1}
                }, vertexShader: n.ShaderChunk.depth_vert, fragmentShader: n.ShaderChunk.depth_frag
            },
            normal: {
                uniforms: {opacity: {type: "f", value: 1}},
                vertexShader: n.ShaderChunk.normal_vert,
                fragmentShader: n.ShaderChunk.normal_frag
            },
            cube: {
                uniforms: {tCube: {type: "t", value: null}, tFlip: {type: "f", value: -1}},
                vertexShader: n.ShaderChunk.cube_vert,
                fragmentShader: n.ShaderChunk.cube_frag
            },
            equirect: {
                uniforms: {tEquirect: {type: "t", value: null}, tFlip: {type: "f", value: -1}},
                vertexShader: n.ShaderChunk.equirect_vert,
                fragmentShader: n.ShaderChunk.equirect_frag
            },
            depthRGBA: {
                uniforms: {},
                vertexShader: n.ShaderChunk.depthRGBA_vert,
                fragmentShader: n.ShaderChunk.depthRGBA_frag
            },
            distanceRGBA: {
                uniforms: {lightPos: {type: "v3", value: new n.Vector3(0, 0, 0)}},
                vertexShader: n.ShaderChunk.distanceRGBA_vert,
                fragmentShader: n.ShaderChunk.distanceRGBA_frag
            }
        },n.WebGLRenderer = function (e) {
            function t() {
                return null === ye ? De : 1
            }

            function i(e, t, i, n) {
                se === !0 && (e *= n, t *= n, i *= n), Xe.clearColor(e, t, i, n)
            }

            function r() {
                Xe.init(), Xe.scissor(xe.copy(Re).multiplyScalar(De)), Xe.viewport(Me.copy(Oe).multiplyScalar(De)), i(Se.r, Se.g, Se.b, Pe)
            }

            function o() {
                Ae = null, we = null, be = "", Ie = -1, Xe.reset()
            }

            function a(e) {
                e.preventDefault(), o(), r(), Qe.clear()
            }

            function s(e) {
                var t = e.target;
                t.removeEventListener("dispose", s), c(t), Ve.textures--
            }

            function l(e) {
                var t = e.target;
                t.removeEventListener("dispose", l), u(t), Ve.textures--
            }

            function h(e) {
                var t = e.target;
                t.removeEventListener("dispose", h), d(t)
            }

            function c(e) {
                var t = Qe.get(e);
                if (e.image && t.__image__webglTextureCube)Ge.deleteTexture(t.__image__webglTextureCube); else {
                    if (void 0 === t.__webglInit)return;
                    Ge.deleteTexture(t.__webglTexture)
                }
                Qe["delete"](e)
            }

            function u(e) {
                var t = Qe.get(e), i = Qe.get(e.texture);
                if (e && void 0 !== i.__webglTexture) {
                    if (Ge.deleteTexture(i.__webglTexture), e instanceof n.WebGLRenderTargetCube)for (var r = 0; 6 > r; r++)Ge.deleteFramebuffer(t.__webglFramebuffer[r]), Ge.deleteRenderbuffer(t.__webglDepthbuffer[r]); else Ge.deleteFramebuffer(t.__webglFramebuffer),
                        Ge.deleteRenderbuffer(t.__webglDepthbuffer);
                    Qe["delete"](e.texture), Qe["delete"](e)
                }
            }

            function d(e) {
                p(e), Qe["delete"](e)
            }

            function p(e) {
                var t = Qe.get(e).program;
                e.program = void 0, void 0 !== t && qe.releaseProgram(t)
            }

            function f(e, t, i, r) {
                var o;
                if (i instanceof n.InstancedBufferGeometry && (o = We.get("ANGLE_instanced_arrays"), null === o))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                void 0 === r && (r = 0), Xe.initAttributes();
                var a = i.attributes, s = t.getAttributes(), l = e.defaultAttributeValues;
                for (var h in s) {
                    var c = s[h];
                    if (c >= 0) {
                        var u = a[h];
                        if (void 0 !== u) {
                            var d = u.itemSize, p = Ze.getAttributeBuffer(u);
                            if (u instanceof n.InterleavedBufferAttribute) {
                                var f = u.data, g = f.stride, m = u.offset;
                                f instanceof n.InstancedInterleavedBuffer ? (Xe.enableAttributeAndDivisor(c, f.meshPerAttribute, o), void 0 === i.maxInstancedCount && (i.maxInstancedCount = f.meshPerAttribute * f.count)) : Xe.enableAttribute(c), Ge.bindBuffer(Ge.ARRAY_BUFFER, p), Ge.vertexAttribPointer(c, d, Ge.FLOAT, !1, g * f.array.BYTES_PER_ELEMENT, (r * g + m) * f.array.BYTES_PER_ELEMENT)
                            } else u instanceof n.InstancedBufferAttribute ? (Xe.enableAttributeAndDivisor(c, u.meshPerAttribute, o), void 0 === i.maxInstancedCount && (i.maxInstancedCount = u.meshPerAttribute * u.count)) : Xe.enableAttribute(c), Ge.bindBuffer(Ge.ARRAY_BUFFER, p), Ge.vertexAttribPointer(c, d, Ge.FLOAT, !1, 0, r * d * 4)
                        } else if (void 0 !== l) {
                            var v = l[h];
                            if (void 0 !== v)switch (v.length) {
                                case 2:
                                    Ge.vertexAttrib2fv(c, v);
                                    break;
                                case 3:
                                    Ge.vertexAttrib3fv(c, v);
                                    break;
                                case 4:
                                    Ge.vertexAttrib4fv(c, v);
                                    break;
                                default:
                                    Ge.vertexAttrib1fv(c, v)
                            }
                        }
                    }
                }
                Xe.disableUnusedAttributes()
            }

            function g(e, t) {
                return Math.abs(t[0]) - Math.abs(e[0])
            }

            function m(e, t) {
                return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.material.id !== t.material.id ? e.material.id - t.material.id : e.z !== t.z ? e.z - t.z : e.id - t.id
            }

            function v(e, t) {
                return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.z !== t.z ? t.z - e.z : e.id - t.id
            }

            function A(e, t, i, n, r) {
                var o, a;
                i.transparent ? (o = de, a = ++pe) : (o = ce, a = ++ue);
                var s = o[a];
                void 0 !== s ? (s.id = e.id, s.object = e, s.geometry = t, s.material = i, s.z = Ne.z, s.group = r) : (s = {
                    id: e.id,
                    object: e,
                    geometry: t,
                    material: i,
                    z: Ne.z,
                    group: r
                }, o.push(s))
            }

            function y(e, t) {
                if (e.visible !== !1) {
                    if (e.layers.test(t.layers))if (e instanceof n.Light)he.push(e); else if (e instanceof n.Sprite)(e.frustumCulled === !1 || Fe.intersectsObject(e) === !0) && ge.push(e); else if (e instanceof n.LensFlare)me.push(e); else if (e instanceof n.ImmediateRenderObject)ve.sortObjects === !0 && (Ne.setFromMatrixPosition(e.matrixWorld), Ne.applyProjection(ke)), A(e, null, e.material, Ne.z, null); else if ((e instanceof n.Mesh || e instanceof n.Line || e instanceof n.Points) && (e instanceof n.SkinnedMesh && e.skeleton.update(), e.frustumCulled === !1 || Fe.intersectsObject(e) === !0)) {
                        var i = e.material;
                        if (i.visible === !0) {
                            ve.sortObjects === !0 && (Ne.setFromMatrixPosition(e.matrixWorld), Ne.applyProjection(ke));
                            var r = Ze.update(e);
                            if (i instanceof n.MultiMaterial)for (var o = r.groups, a = i.materials, s = 0, l = o.length; l > s; s++) {
                                var h = o[s], c = a[h.materialIndex];
                                c.visible === !0 && A(e, r, c, Ne.z, h)
                            } else A(e, r, i, Ne.z, null)
                        }
                    }
                    for (var u = e.children, s = 0, l = u.length; l > s; s++)y(u[s], t)
                }
            }

            function C(e, t, i, r) {
                for (var o = 0, a = e.length; a > o; o++) {
                    var s = e[o], l = s.object, h = s.geometry, c = void 0 === r ? s.material : r, u = s.group;
                    if (l.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse, l.matrixWorld), l.normalMatrix.getNormalMatrix(l.modelViewMatrix), l instanceof n.ImmediateRenderObject) {
                        b(c);
                        var d = x(t, i, c, l);
                        be = "", l.render(function (e) {
                            ve.renderBufferImmediate(e, d, c)
                        })
                    } else ve.renderBufferDirect(t, i, h, c, l, u)
                }
            }

            function I(e, t, i) {
                var r = Qe.get(e), o = qe.getParameters(e, Ue, t, i), a = qe.getProgramCode(e, o), s = r.program, l = !0;
                if (void 0 === s)e.addEventListener("dispose", h); else if (s.code !== a)p(e); else {
                    if (void 0 !== o.shaderID)return;
                    l = !1
                }
                if (l) {
                    if (o.shaderID) {
                        var c = n.ShaderLib[o.shaderID];
                        r.__webglShader = {
                            name: e.type,
                            uniforms: n.UniformsUtils.clone(c.uniforms),
                            vertexShader: c.vertexShader,
                            fragmentShader: c.fragmentShader
                        }
                    } else r.__webglShader = {
                        name: e.type,
                        uniforms: e.uniforms,
                        vertexShader: e.vertexShader,
                        fragmentShader: e.fragmentShader
                    };
                    e.__webglShader = r.__webglShader, s = qe.acquireProgram(e, o, a), r.program = s, e.program = s
                }
                var u = s.getAttributes();
                if (e.morphTargets) {
                    e.numSupportedMorphTargets = 0;
                    for (var d = 0; d < ve.maxMorphTargets; d++)u["morphTarget" + d] >= 0 && e.numSupportedMorphTargets++
                }
                if (e.morphNormals) {
                    e.numSupportedMorphNormals = 0;
                    for (var d = 0; d < ve.maxMorphNormals; d++)u["morphNormal" + d] >= 0 && e.numSupportedMorphNormals++
                }
                r.uniformsList = [];
                var f = r.__webglShader.uniforms, g = r.program.getUniforms();
                for (var m in f) {
                    var v = g[m];
                    v && r.uniformsList.push([r.__webglShader.uniforms[m], v])
                }
                (e instanceof n.MeshPhongMaterial || e instanceof n.MeshLambertMaterial || e instanceof n.MeshStandardMaterial || e.lights) && (r.lightsHash = Ue.hash, f.ambientLightColor.value = Ue.ambient, f.directionalLights.value = Ue.directional, f.spotLights.value = Ue.spot, f.pointLights.value = Ue.point, f.hemisphereLights.value = Ue.hemi, f.directionalShadowMap.value = Ue.directionalShadowMap, f.directionalShadowMatrix.value = Ue.directionalShadowMatrix, f.spotShadowMap.value = Ue.spotShadowMap, f.spotShadowMatrix.value = Ue.spotShadowMatrix, f.pointShadowMap.value = Ue.pointShadowMap, f.pointShadowMatrix.value = Ue.pointShadowMatrix), r.hasDynamicUniforms = !1;
                for (var A = 0, y = r.uniformsList.length; y > A; A++) {
                    var C = r.uniformsList[A][0];
                    if (C.dynamic === !0) {
                        r.hasDynamicUniforms = !0;
                        break
                    }
                }
            }

            function b(e) {
                w(e), e.transparent === !0 ? Xe.setBlending(e.blending, e.blendEquation, e.blendSrc, e.blendDst, e.blendEquationAlpha, e.blendSrcAlpha, e.blendDstAlpha, e.premultipliedAlpha) : Xe.setBlending(n.NoBlending), Xe.setDepthFunc(e.depthFunc), Xe.setDepthTest(e.depthTest), Xe.setDepthWrite(e.depthWrite), Xe.setColorWrite(e.colorWrite), Xe.setPolygonOffset(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits)
            }

            function w(e) {
                e.side !== n.DoubleSide ? Xe.enable(Ge.CULL_FACE) : Xe.disable(Ge.CULL_FACE), Xe.setFlipSided(e.side === n.BackSide)
            }

            function x(e, t, i, r) {
                Te = 0;
                var o = Qe.get(i);
                void 0 === o.program && (i.needsUpdate = !0), void 0 !== o.lightsHash && o.lightsHash !== Ue.hash && (i.needsUpdate = !0), i.needsUpdate && (I(i, t, r), i.needsUpdate = !1);
                var a = !1, s = !1, l = !1, h = o.program, c = h.getUniforms(), u = o.__webglShader.uniforms;
                if (h.id !== Ae && (Ge.useProgram(h.program), Ae = h.id, a = !0, s = !0, l = !0), i.id !== Ie && (Ie = i.id, s = !0), (a || e !== we) && (Ge.uniformMatrix4fv(c.projectionMatrix, !1, e.projectionMatrix.elements), Ye.logarithmicDepthBuffer && Ge.uniform1f(c.logDepthBufFC, 2 / (Math.log(e.far + 1) / Math.LN2)), e !== we && (we = e, s = !0, l = !0), (i instanceof n.ShaderMaterial || i instanceof n.MeshPhongMaterial || i instanceof n.MeshStandardMaterial || i.envMap) && void 0 !== c.cameraPosition && (Ne.setFromMatrixPosition(e.matrixWorld), Ge.uniform3f(c.cameraPosition, Ne.x, Ne.y, Ne.z)), (i instanceof n.MeshPhongMaterial || i instanceof n.MeshLambertMaterial || i instanceof n.MeshBasicMaterial || i instanceof n.MeshStandardMaterial || i instanceof n.ShaderMaterial || i.skinning) && void 0 !== c.viewMatrix && Ge.uniformMatrix4fv(c.viewMatrix, !1, e.matrixWorldInverse.elements), void 0 !== c.toneMappingExposure && Ge.uniform1f(c.toneMappingExposure, ve.toneMappingExposure), void 0 !== c.toneMappingWhitePoint && Ge.uniform1f(c.toneMappingWhitePoint, ve.toneMappingWhitePoint)), i.skinning)if (r.bindMatrix && void 0 !== c.bindMatrix && Ge.uniformMatrix4fv(c.bindMatrix, !1, r.bindMatrix.elements), r.bindMatrixInverse && void 0 !== c.bindMatrixInverse && Ge.uniformMatrix4fv(c.bindMatrixInverse, !1, r.bindMatrixInverse.elements), Ye.floatVertexTextures && r.skeleton && r.skeleton.useVertexTexture) {
                    if (void 0 !== c.boneTexture) {
                        var d = F();
                        Ge.uniform1i(c.boneTexture, d), ve.setTexture(r.skeleton.boneTexture, d)
                    }
                    void 0 !== c.boneTextureWidth && Ge.uniform1i(c.boneTextureWidth, r.skeleton.boneTextureWidth), void 0 !== c.boneTextureHeight && Ge.uniform1i(c.boneTextureHeight, r.skeleton.boneTextureHeight)
                } else r.skeleton && r.skeleton.boneMatrices && void 0 !== c.boneGlobalMatrices && Ge.uniformMatrix4fv(c.boneGlobalMatrices, !1, r.skeleton.boneMatrices);
                return s && ((i instanceof n.MeshPhongMaterial || i instanceof n.MeshLambertMaterial || i instanceof n.MeshStandardMaterial || i.lights) && B(u, l), t && i.fog && _(u, t), (i instanceof n.MeshBasicMaterial || i instanceof n.MeshLambertMaterial || i instanceof n.MeshPhongMaterial || i instanceof n.MeshStandardMaterial) && M(u, i), i instanceof n.LineBasicMaterial ? T(u, i) : i instanceof n.LineDashedMaterial ? (T(u, i), S(u, i)) : i instanceof n.PointsMaterial ? P(u, i) : i instanceof n.MeshLambertMaterial ? L(u, i) : i instanceof n.MeshPhongMaterial ? D(u, i) : i instanceof n.MeshStandardMaterial ? R(u, i) : i instanceof n.MeshDepthMaterial ? (u.mNear.value = e.near, u.mFar.value = e.far, u.opacity.value = i.opacity) : i instanceof n.MeshNormalMaterial && (u.opacity.value = i.opacity), N(o.uniformsList)), O(c, r), void 0 !== c.modelMatrix && Ge.uniformMatrix4fv(c.modelMatrix, !1, r.matrixWorld.elements), o.hasDynamicUniforms === !0 && E(o.uniformsList, r, e), h
            }

            function E(e, t, i) {
                for (var n = [], r = 0, o = e.length; o > r; r++) {
                    var a = e[r][0], s = a.onUpdateCallback;
                    void 0 !== s && (s.bind(a)(t, i), n.push(e[r]))
                }
                N(n)
            }

            function M(e, t) {
                e.opacity.value = t.opacity, e.diffuse.value = t.color, t.emissive && e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity), e.map.value = t.map, e.specularMap.value = t.specularMap, e.alphaMap.value = t.alphaMap, t.aoMap && (e.aoMap.value = t.aoMap, e.aoMapIntensity.value = t.aoMapIntensity);
                var i;
                if (t.map ? i = t.map : t.specularMap ? i = t.specularMap : t.displacementMap ? i = t.displacementMap : t.normalMap ? i = t.normalMap : t.bumpMap ? i = t.bumpMap : t.roughnessMap ? i = t.roughnessMap : t.metalnessMap ? i = t.metalnessMap : t.alphaMap ? i = t.alphaMap : t.emissiveMap && (i = t.emissiveMap), void 0 !== i) {
                    i instanceof n.WebGLRenderTarget && (i = i.texture);
                    var r = i.offset, o = i.repeat;
                    e.offsetRepeat.value.set(r.x, r.y, o.x, o.y)
                }
                e.envMap.value = t.envMap, e.flipEnvMap.value = t.envMap instanceof n.WebGLRenderTargetCube ? 1 : -1, e.reflectivity.value = t.reflectivity, e.refractionRatio.value = t.refractionRatio
            }

            function T(e, t) {
                e.diffuse.value = t.color, e.opacity.value = t.opacity
            }

            function S(e, t) {
                e.dashSize.value = t.dashSize, e.totalSize.value = t.dashSize + t.gapSize, e.scale.value = t.scale
            }

            function P(e, t) {
                if (e.diffuse.value = t.color, e.opacity.value = t.opacity, e.size.value = t.size * De, e.scale.value = te.clientHeight / 2, e.map.value = t.map, null !== t.map) {
                    var i = t.map.offset, n = t.map.repeat;
                    e.offsetRepeat.value.set(i.x, i.y, n.x, n.y)
                }
            }

            function _(e, t) {
                e.fogColor.value = t.color, t instanceof n.Fog ? (e.fogNear.value = t.near, e.fogFar.value = t.far) : t instanceof n.FogExp2 && (e.fogDensity.value = t.density)
            }

            function L(e, t) {
                t.lightMap && (e.lightMap.value = t.lightMap, e.lightMapIntensity.value = t.lightMapIntensity), t.emissiveMap && (e.emissiveMap.value = t.emissiveMap)
            }

            function D(e, t) {
                e.specular.value = t.specular, e.shininess.value = Math.max(t.shininess, 1e-4), t.lightMap && (e.lightMap.value = t.lightMap, e.lightMapIntensity.value = t.lightMapIntensity), t.emissiveMap && (e.emissiveMap.value = t.emissiveMap), t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale), t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale)), t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias)
            }

            function R(e, t) {
                e.roughness.value = t.roughness, e.metalness.value = t.metalness, t.roughnessMap && (e.roughnessMap.value = t.roughnessMap), t.metalnessMap && (e.metalnessMap.value = t.metalnessMap), t.lightMap && (e.lightMap.value = t.lightMap, e.lightMapIntensity.value = t.lightMapIntensity), t.emissiveMap && (e.emissiveMap.value = t.emissiveMap), t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale), t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale)), t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias), t.envMap && (e.envMapIntensity.value = t.envMapIntensity)
            }

            function B(e, t) {
                e.ambientLightColor.needsUpdate = t, e.directionalLights.needsUpdate = t, e.pointLights.needsUpdate = t, e.spotLights.needsUpdate = t, e.hemisphereLights.needsUpdate = t
            }

            function O(e, t) {
                Ge.uniformMatrix4fv(e.modelViewMatrix, !1, t.modelViewMatrix.elements), e.normalMatrix && Ge.uniformMatrix3fv(e.normalMatrix, !1, t.normalMatrix.elements)
            }

            function F() {
                var e = Te;
                return e >= Ye.maxTextures && console.warn("WebGLRenderer: trying to use " + e + " texture units while this GPU supports only " + Ye.maxTextures), Te += 1, e
            }

            function k(e, t, i, r) {
                var o, a;
                if ("1i" === t)Ge.uniform1i(i, r); else if ("1f" === t)Ge.uniform1f(i, r); else if ("2f" === t)Ge.uniform2f(i, r[0], r[1]); else if ("3f" === t)Ge.uniform3f(i, r[0], r[1], r[2]); else if ("4f" === t)Ge.uniform4f(i, r[0], r[1], r[2], r[3]); else if ("1iv" === t)Ge.uniform1iv(i, r); else if ("3iv" === t)Ge.uniform3iv(i, r); else if ("1fv" === t)Ge.uniform1fv(i, r); else if ("2fv" === t)Ge.uniform2fv(i, r); else if ("3fv" === t)Ge.uniform3fv(i, r); else if ("4fv" === t)Ge.uniform4fv(i, r); else if ("Matrix2fv" === t)Ge.uniformMatrix2fv(i, !1, r); else if ("Matrix3fv" === t)Ge.uniformMatrix3fv(i, !1, r); else if ("Matrix4fv" === t)Ge.uniformMatrix4fv(i, !1, r); else if ("i" === t)Ge.uniform1i(i, r); else if ("f" === t)Ge.uniform1f(i, r); else if ("v2" === t)Ge.uniform2f(i, r.x, r.y); else if ("v3" === t)Ge.uniform3f(i, r.x, r.y, r.z); else if ("v4" === t)Ge.uniform4f(i, r.x, r.y, r.z, r.w); else if ("c" === t)Ge.uniform3f(i, r.r, r.g, r.b); else if ("s" === t) {
                    var s = e.properties;
                    for (var l in s) {
                        var h = s[l], c = i[l], u = r[l];
                        k(h, h.type, c, u)
                    }
                } else if ("sa" === t)for (var s = e.properties, d = 0, p = r.length; p > d; d++)for (var l in s) {
                    var h = s[l], c = i[d][l], u = r[d][l];
                    k(h, h.type, c, u)
                } else if ("iv1" === t)Ge.uniform1iv(i, r); else if ("iv" === t)Ge.uniform3iv(i, r); else if ("fv1" === t)Ge.uniform1fv(i, r); else if ("fv" === t)Ge.uniform3fv(i, r); else if ("v2v" === t) {
                    void 0 === e._array && (e._array = new Float32Array(2 * r.length));
                    for (var d = 0, f = 0, g = r.length; g > d; d++, f += 2)e._array[f + 0] = r[d].x, e._array[f + 1] = r[d].y;
                    Ge.uniform2fv(i, e._array)
                } else if ("v3v" === t) {
                    void 0 === e._array && (e._array = new Float32Array(3 * r.length));
                    for (var d = 0, m = 0, g = r.length; g > d; d++, m += 3)e._array[m + 0] = r[d].x, e._array[m + 1] = r[d].y, e._array[m + 2] = r[d].z;
                    Ge.uniform3fv(i, e._array)
                } else if ("v4v" === t) {
                    void 0 === e._array && (e._array = new Float32Array(4 * r.length));
                    for (var d = 0, v = 0, g = r.length; g > d; d++, v += 4)e._array[v + 0] = r[d].x, e._array[v + 1] = r[d].y, e._array[v + 2] = r[d].z, e._array[v + 3] = r[d].w;
                    Ge.uniform4fv(i, e._array)
                } else if ("m2" === t)Ge.uniformMatrix2fv(i, !1, r.elements); else if ("m3" === t)Ge.uniformMatrix3fv(i, !1, r.elements); else if ("m3v" === t) {
                    void 0 === e._array && (e._array = new Float32Array(9 * r.length));
                    for (var d = 0, g = r.length; g > d; d++)r[d].flattenToArrayOffset(e._array, 9 * d);
                    Ge.uniformMatrix3fv(i, !1, e._array)
                } else if ("m4" === t)Ge.uniformMatrix4fv(i, !1, r.elements); else if ("m4v" === t) {
                    void 0 === e._array && (e._array = new Float32Array(16 * r.length));
                    for (var d = 0, g = r.length; g > d; d++)r[d].flattenToArrayOffset(e._array, 16 * d);
                    Ge.uniformMatrix4fv(i, !1, e._array)
                } else if ("t" === t) {
                    if (o = r, a = F(), Ge.uniform1i(i, a), !o)return;
                    o instanceof n.CubeTexture || Array.isArray(o.image) && 6 === o.image.length ? Y(o, a) : o instanceof n.WebGLRenderTargetCube ? X(o.texture, a) : o instanceof n.WebGLRenderTarget ? ve.setTexture(o.texture, a) : ve.setTexture(o, a)
                } else if ("tv" === t) {
                    void 0 === e._array && (e._array = []);
                    for (var d = 0, g = e.value.length; g > d; d++)e._array[d] = F();
                    Ge.uniform1iv(i, e._array);
                    for (var d = 0, g = e.value.length; g > d; d++)o = e.value[d], a = e._array[d], o && (o instanceof n.CubeTexture || o.image instanceof Array && 6 === o.image.length ? Y(o, a) : o instanceof n.WebGLRenderTarget ? ve.setTexture(o.texture, a) : o instanceof n.WebGLRenderTargetCube ? X(o.texture, a) : ve.setTexture(o, a))
                } else console.warn("THREE.WebGLRenderer: Unknown uniform type: " + t)
            }

            function N(e) {
                for (var t = 0, i = e.length; i > t; t++) {
                    var n = e[t][0];
                    if (n.needsUpdate !== !1) {
                        var r = n.type, o = e[t][1], a = n.value;
                        k(n, r, o, a)
                    }
                }
            }

            function U(e, t) {
                var i, r, o, a, s, l, h = 0, c = 0, u = 0, d = t.matrixWorldInverse, p = 0, f = 0, g = 0, m = 0, v = 0;
                for (Ue.shadowsPointLight = 0, i = 0, r = e.length; r > i; i++)if (o = e[i], a = o.color, s = o.intensity, l = o.distance, o instanceof n.AmbientLight)h += a.r * s, c += a.g * s, u += a.b * s; else if (o instanceof n.DirectionalLight) {
                    var A = Ke.get(o);
                    A.color.copy(o.color).multiplyScalar(o.intensity), A.direction.setFromMatrixPosition(o.matrixWorld), Ne.setFromMatrixPosition(o.target.matrixWorld), A.direction.sub(Ne), A.direction.transformDirection(d), A.shadow = o.castShadow, o.castShadow && (A.shadowBias = o.shadow.bias, A.shadowRadius = o.shadow.radius, A.shadowMapSize = o.shadow.mapSize, Ue.shadows[v++] = o), Ue.directionalShadowMap[p] = o.shadow.map, Ue.directionalShadowMatrix[p] = o.shadow.matrix, Ue.directional[p++] = A
                } else if (o instanceof n.SpotLight) {
                    var A = Ke.get(o);
                    A.position.setFromMatrixPosition(o.matrixWorld), A.position.applyMatrix4(d), A.color.copy(a).multiplyScalar(s), A.distance = l, A.direction.setFromMatrixPosition(o.matrixWorld), Ne.setFromMatrixPosition(o.target.matrixWorld), A.direction.sub(Ne), A.direction.transformDirection(d), A.coneCos = Math.cos(o.angle), A.penumbraCos = Math.cos(o.angle * (1 - o.penumbra)), A.decay = 0 === o.distance ? 0 : o.decay, A.shadow = o.castShadow, o.castShadow && (A.shadowBias = o.shadow.bias, A.shadowRadius = o.shadow.radius, A.shadowMapSize = o.shadow.mapSize, Ue.shadows[v++] = o), Ue.spotShadowMap[g] = o.shadow.map, Ue.spotShadowMatrix[g] = o.shadow.matrix, Ue.spot[g++] = A
                } else if (o instanceof n.PointLight) {
                    var A = Ke.get(o);
                    A.position.setFromMatrixPosition(o.matrixWorld), A.position.applyMatrix4(d), A.color.copy(o.color).multiplyScalar(o.intensity), A.distance = o.distance, A.decay = 0 === o.distance ? 0 : o.decay, A.shadow = o.castShadow, o.castShadow && (A.shadowBias = o.shadow.bias, A.shadowRadius = o.shadow.radius, A.shadowMapSize = o.shadow.mapSize, Ue.shadows[v++] = o), Ue.pointShadowMap[f] = o.shadow.map, void 0 === Ue.pointShadowMatrix[f] && (Ue.pointShadowMatrix[f] = new n.Matrix4), Ne.setFromMatrixPosition(o.matrixWorld).negate(), Ue.pointShadowMatrix[f].identity().setPosition(Ne), Ue.point[f++] = A
                } else if (o instanceof n.HemisphereLight) {
                    var A = Ke.get(o);
                    A.direction.setFromMatrixPosition(o.matrixWorld), A.direction.transformDirection(d), A.direction.normalize(), A.skyColor.copy(o.color).multiplyScalar(s), A.groundColor.copy(o.groundColor).multiplyScalar(s), Ue.hemi[m++] = A
                }
                Ue.ambient[0] = h, Ue.ambient[1] = c, Ue.ambient[2] = u, Ue.directional.length = p, Ue.spot.length = g, Ue.point.length = f, Ue.hemi.length = m, Ue.shadows.length = v, Ue.hash = p + "," + f + "," + g + "," + m + "," + v
            }

            function V(e, t, i) {
                var r;
                if (i ? (Ge.texParameteri(e, Ge.TEXTURE_WRAP_S, ee(t.wrapS)), Ge.texParameteri(e, Ge.TEXTURE_WRAP_T, ee(t.wrapT)), Ge.texParameteri(e, Ge.TEXTURE_MAG_FILTER, ee(t.magFilter)), Ge.texParameteri(e, Ge.TEXTURE_MIN_FILTER, ee(t.minFilter))) : (Ge.texParameteri(e, Ge.TEXTURE_WRAP_S, Ge.CLAMP_TO_EDGE), Ge.texParameteri(e, Ge.TEXTURE_WRAP_T, Ge.CLAMP_TO_EDGE), (t.wrapS !== n.ClampToEdgeWrapping || t.wrapT !== n.ClampToEdgeWrapping) && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.", t), Ge.texParameteri(e, Ge.TEXTURE_MAG_FILTER, $(t.magFilter)), Ge.texParameteri(e, Ge.TEXTURE_MIN_FILTER, $(t.minFilter)), t.minFilter !== n.NearestFilter && t.minFilter !== n.LinearFilter && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.", t)), r = We.get("EXT_texture_filter_anisotropic")) {
                    if (t.type === n.FloatType && null === We.get("OES_texture_float_linear"))return;
                    if (t.type === n.HalfFloatType && null === We.get("OES_texture_half_float_linear"))return;
                    (t.anisotropy > 1 || Qe.get(t).__currentAnisotropy) && (Ge.texParameterf(e, r.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(t.anisotropy, ve.getMaxAnisotropy())), Qe.get(t).__currentAnisotropy = t.anisotropy)
                }
            }

            function z(e, t, i) {
                void 0 === e.__webglInit && (e.__webglInit = !0, t.addEventListener("dispose", s), e.__webglTexture = Ge.createTexture(), Ve.textures++), Xe.activeTexture(Ge.TEXTURE0 + i), Xe.bindTexture(Ge.TEXTURE_2D, e.__webglTexture), Ge.pixelStorei(Ge.UNPACK_FLIP_Y_WEBGL, t.flipY), Ge.pixelStorei(Ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultiplyAlpha), Ge.pixelStorei(Ge.UNPACK_ALIGNMENT, t.unpackAlignment);
                var r = G(t.image, Ye.maxTextureSize);
                j(t) && H(r) === !1 && (r = W(r));
                var o = H(r), a = ee(t.format), l = ee(t.type);
                V(Ge.TEXTURE_2D, t, o);
                var h, c = t.mipmaps;
                if (t instanceof n.DataTexture)if (c.length > 0 && o) {
                    for (var u = 0, d = c.length; d > u; u++)h = c[u], Xe.texImage2D(Ge.TEXTURE_2D, u, a, h.width, h.height, 0, a, l, h.data);
                    t.generateMipmaps = !1
                } else Xe.texImage2D(Ge.TEXTURE_2D, 0, a, r.width, r.height, 0, a, l, r.data); else if (t instanceof n.CompressedTexture)for (var u = 0, d = c.length; d > u; u++)h = c[u], t.format !== n.RGBAFormat && t.format !== n.RGBFormat ? Xe.getCompressedTextureFormats().indexOf(a) > -1 ? Xe.compressedTexImage2D(Ge.TEXTURE_2D, u, a, h.width, h.height, 0, h.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : Xe.texImage2D(Ge.TEXTURE_2D, u, a, h.width, h.height, 0, a, l, h.data); else if (c.length > 0 && o) {
                    for (var u = 0, d = c.length; d > u; u++)h = c[u], Xe.texImage2D(Ge.TEXTURE_2D, u, a, a, l, h);
                    t.generateMipmaps = !1
                } else Xe.texImage2D(Ge.TEXTURE_2D, 0, a, a, l, r);
                t.generateMipmaps && o && Ge.generateMipmap(Ge.TEXTURE_2D), e.__version = t.version, t.onUpdate && t.onUpdate(t)
            }

            function G(e, t) {
                if (e.width > t || e.height > t) {
                    var i = t / Math.max(e.width, e.height), n = document.createElement("canvas");
                    n.width = Math.floor(e.width * i), n.height = Math.floor(e.height * i);
                    var r = n.getContext("2d");
                    return r.drawImage(e, 0, 0, e.width, e.height, 0, 0, n.width, n.height), console.warn("THREE.WebGLRenderer: image is too big (" + e.width + "x" + e.height + "). Resized to " + n.width + "x" + n.height, e), n
                }
                return e
            }

            function H(e) {
                return n.Math.isPowerOfTwo(e.width) && n.Math.isPowerOfTwo(e.height)
            }

            function j(e) {
                return e.wrapS !== n.ClampToEdgeWrapping || e.wrapT !== n.ClampToEdgeWrapping ? !0 : e.minFilter !== n.NearestFilter && e.minFilter !== n.LinearFilter ? !0 : !1
            }

            function W(e) {
                if (e instanceof HTMLImageElement || e instanceof HTMLCanvasElement) {
                    var t = document.createElement("canvas");
                    t.width = n.Math.nearestPowerOfTwo(e.width), t.height = n.Math.nearestPowerOfTwo(e.height);
                    var i = t.getContext("2d");
                    return i.drawImage(e, 0, 0, t.width, t.height), console.warn("THREE.WebGLRenderer: image is not power of two (" + e.width + "x" + e.height + "). Resized to " + t.width + "x" + t.height, e), t
                }
                return e
            }

            function Y(e, t) {
                var i = Qe.get(e);
                if (6 === e.image.length)if (e.version > 0 && i.__version !== e.version) {
                    i.__image__webglTextureCube || (e.addEventListener("dispose", s), i.__image__webglTextureCube = Ge.createTexture(), Ve.textures++), Xe.activeTexture(Ge.TEXTURE0 + t), Xe.bindTexture(Ge.TEXTURE_CUBE_MAP, i.__image__webglTextureCube), Ge.pixelStorei(Ge.UNPACK_FLIP_Y_WEBGL, e.flipY);
                    for (var r = e instanceof n.CompressedTexture, o = e.image[0] instanceof n.DataTexture, a = [], l = 0; 6 > l; l++)!ve.autoScaleCubemaps || r || o ? a[l] = o ? e.image[l].image : e.image[l] : a[l] = G(e.image[l], Ye.maxCubemapSize);
                    var h = a[0], c = H(h), u = ee(e.format), d = ee(e.type);
                    V(Ge.TEXTURE_CUBE_MAP, e, c);
                    for (var l = 0; 6 > l; l++)if (r)for (var p, f = a[l].mipmaps, g = 0, m = f.length; m > g; g++)p = f[g], e.format !== n.RGBAFormat && e.format !== n.RGBFormat ? Xe.getCompressedTextureFormats().indexOf(u) > -1 ? Xe.compressedTexImage2D(Ge.TEXTURE_CUBE_MAP_POSITIVE_X + l, g, u, p.width, p.height, 0, p.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()") : Xe.texImage2D(Ge.TEXTURE_CUBE_MAP_POSITIVE_X + l, g, u, p.width, p.height, 0, u, d, p.data); else o ? Xe.texImage2D(Ge.TEXTURE_CUBE_MAP_POSITIVE_X + l, 0, u, a[l].width, a[l].height, 0, u, d, a[l].data) : Xe.texImage2D(Ge.TEXTURE_CUBE_MAP_POSITIVE_X + l, 0, u, u, d, a[l]);
                    e.generateMipmaps && c && Ge.generateMipmap(Ge.TEXTURE_CUBE_MAP), i.__version = e.version, e.onUpdate && e.onUpdate(e)
                } else Xe.activeTexture(Ge.TEXTURE0 + t), Xe.bindTexture(Ge.TEXTURE_CUBE_MAP, i.__image__webglTextureCube)
            }

            function X(e, t) {
                Xe.activeTexture(Ge.TEXTURE0 + t), Xe.bindTexture(Ge.TEXTURE_CUBE_MAP, Qe.get(e).__webglTexture)
            }

            function Q(e, t, i, n) {
                var r = ee(t.texture.format), o = ee(t.texture.type);
                Xe.texImage2D(n, 0, r, t.width, t.height, 0, r, o, null), Ge.bindFramebuffer(Ge.FRAMEBUFFER, e), Ge.framebufferTexture2D(Ge.FRAMEBUFFER, i, n, Qe.get(t.texture).__webglTexture, 0), Ge.bindFramebuffer(Ge.FRAMEBUFFER, null)
            }

            function Z(e, t) {
                Ge.bindRenderbuffer(Ge.RENDERBUFFER, e), t.depthBuffer && !t.stencilBuffer ? (Ge.renderbufferStorage(Ge.RENDERBUFFER, Ge.DEPTH_COMPONENT16, t.width, t.height), Ge.framebufferRenderbuffer(Ge.FRAMEBUFFER, Ge.DEPTH_ATTACHMENT, Ge.RENDERBUFFER, e)) : t.depthBuffer && t.stencilBuffer ? (Ge.renderbufferStorage(Ge.RENDERBUFFER, Ge.DEPTH_STENCIL, t.width, t.height), Ge.framebufferRenderbuffer(Ge.FRAMEBUFFER, Ge.DEPTH_STENCIL_ATTACHMENT, Ge.RENDERBUFFER, e)) : Ge.renderbufferStorage(Ge.RENDERBUFFER, Ge.RGBA4, t.width, t.height), Ge.bindRenderbuffer(Ge.RENDERBUFFER, null)
            }

            function q(e) {
                var t = Qe.get(e), i = e instanceof n.WebGLRenderTargetCube;
                if (i) {
                    t.__webglDepthbuffer = [];
                    for (var r = 0; 6 > r; r++)Ge.bindFramebuffer(Ge.FRAMEBUFFER, t.__webglFramebuffer[r]), t.__webglDepthbuffer[r] = Ge.createRenderbuffer(), Z(t.__webglDepthbuffer[r], e)
                } else Ge.bindFramebuffer(Ge.FRAMEBUFFER, t.__webglFramebuffer), t.__webglDepthbuffer = Ge.createRenderbuffer(), Z(t.__webglDepthbuffer, e);
                Ge.bindFramebuffer(Ge.FRAMEBUFFER, null)
            }

            function K(e) {
                var t = Qe.get(e), i = Qe.get(e.texture);
                e.addEventListener("dispose", l), i.__webglTexture = Ge.createTexture(), Ve.textures++;
                var r = e instanceof n.WebGLRenderTargetCube, o = n.Math.isPowerOfTwo(e.width) && n.Math.isPowerOfTwo(e.height);
                if (r) {
                    t.__webglFramebuffer = [];
                    for (var a = 0; 6 > a; a++)t.__webglFramebuffer[a] = Ge.createFramebuffer()
                } else t.__webglFramebuffer = Ge.createFramebuffer();
                if (r) {
                    Xe.bindTexture(Ge.TEXTURE_CUBE_MAP, i.__webglTexture), V(Ge.TEXTURE_CUBE_MAP, e.texture, o);
                    for (var a = 0; 6 > a; a++)Q(t.__webglFramebuffer[a], e, Ge.COLOR_ATTACHMENT0, Ge.TEXTURE_CUBE_MAP_POSITIVE_X + a);
                    e.texture.generateMipmaps && o && Ge.generateMipmap(Ge.TEXTURE_CUBE_MAP), Xe.bindTexture(Ge.TEXTURE_CUBE_MAP, null)
                } else Xe.bindTexture(Ge.TEXTURE_2D, i.__webglTexture), V(Ge.TEXTURE_2D, e.texture, o), Q(t.__webglFramebuffer, e, Ge.COLOR_ATTACHMENT0, Ge.TEXTURE_2D), e.texture.generateMipmaps && o && Ge.generateMipmap(Ge.TEXTURE_2D), Xe.bindTexture(Ge.TEXTURE_2D, null);
                e.depthBuffer && q(e)
            }

            function J(e) {
                var t = e instanceof n.WebGLRenderTargetCube ? Ge.TEXTURE_CUBE_MAP : Ge.TEXTURE_2D, i = Qe.get(e.texture).__webglTexture;
                Xe.bindTexture(t, i), Ge.generateMipmap(t), Xe.bindTexture(t, null)
            }

            function $(e) {
                return e === n.NearestFilter || e === n.NearestMipMapNearestFilter || e === n.NearestMipMapLinearFilter ? Ge.NEAREST : Ge.LINEAR
            }

            function ee(e) {
                var t;
                if (e === n.RepeatWrapping)return Ge.REPEAT;
                if (e === n.ClampToEdgeWrapping)return Ge.CLAMP_TO_EDGE;
                if (e === n.MirroredRepeatWrapping)return Ge.MIRRORED_REPEAT;
                if (e === n.NearestFilter)return Ge.NEAREST;
                if (e === n.NearestMipMapNearestFilter)return Ge.NEAREST_MIPMAP_NEAREST;
                if (e === n.NearestMipMapLinearFilter)return Ge.NEAREST_MIPMAP_LINEAR;
                if (e === n.LinearFilter)return Ge.LINEAR;
                if (e === n.LinearMipMapNearestFilter)return Ge.LINEAR_MIPMAP_NEAREST;
                if (e === n.LinearMipMapLinearFilter)return Ge.LINEAR_MIPMAP_LINEAR;
                if (e === n.UnsignedByteType)return Ge.UNSIGNED_BYTE;
                if (e === n.UnsignedShort4444Type)return Ge.UNSIGNED_SHORT_4_4_4_4;
                if (e === n.UnsignedShort5551Type)return Ge.UNSIGNED_SHORT_5_5_5_1;
                if (e === n.UnsignedShort565Type)return Ge.UNSIGNED_SHORT_5_6_5;
                if (e === n.ByteType)return Ge.BYTE;
                if (e === n.ShortType)return Ge.SHORT;
                if (e === n.UnsignedShortType)return Ge.UNSIGNED_SHORT;
                if (e === n.IntType)return Ge.INT;
                if (e === n.UnsignedIntType)return Ge.UNSIGNED_INT;
                if (e === n.FloatType)return Ge.FLOAT;
                if (t = We.get("OES_texture_half_float"), null !== t && e === n.HalfFloatType)return t.HALF_FLOAT_OES;
                if (e === n.AlphaFormat)return Ge.ALPHA;
                if (e === n.RGBFormat)return Ge.RGB;
                if (e === n.RGBAFormat)return Ge.RGBA;
                if (e === n.LuminanceFormat)return Ge.LUMINANCE;
                if (e === n.LuminanceAlphaFormat)return Ge.LUMINANCE_ALPHA;
                if (e === n.AddEquation)return Ge.FUNC_ADD;
                if (e === n.SubtractEquation)return Ge.FUNC_SUBTRACT;
                if (e === n.ReverseSubtractEquation)return Ge.FUNC_REVERSE_SUBTRACT;
                if (e === n.ZeroFactor)return Ge.ZERO;
                if (e === n.OneFactor)return Ge.ONE;
                if (e === n.SrcColorFactor)return Ge.SRC_COLOR;
                if (e === n.OneMinusSrcColorFactor)return Ge.ONE_MINUS_SRC_COLOR;
                if (e === n.SrcAlphaFactor)return Ge.SRC_ALPHA;
                if (e === n.OneMinusSrcAlphaFactor)return Ge.ONE_MINUS_SRC_ALPHA;
                if (e === n.DstAlphaFactor)return Ge.DST_ALPHA;
                if (e === n.OneMinusDstAlphaFactor)return Ge.ONE_MINUS_DST_ALPHA;
                if (e === n.DstColorFactor)return Ge.DST_COLOR;
                if (e === n.OneMinusDstColorFactor)return Ge.ONE_MINUS_DST_COLOR;
                if (e === n.SrcAlphaSaturateFactor)return Ge.SRC_ALPHA_SATURATE;
                if (t = We.get("WEBGL_compressed_texture_s3tc"), null !== t) {
                    if (e === n.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;
                    if (e === n.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                    if (e === n.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                    if (e === n.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT
                }
                if (t = We.get("WEBGL_compressed_texture_pvrtc"), null !== t) {
                    if (e === n.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                    if (e === n.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                    if (e === n.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                    if (e === n.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
                }
                if (t = We.get("WEBGL_compressed_texture_etc1"), null !== t && e === n.RGB_ETC1_Format)return t.COMPRESSED_RGB_ETC1_WEBGL;
                if (t = We.get("EXT_blend_minmax"), null !== t) {
                    if (e === n.MinEquation)return t.MIN_EXT;
                    if (e === n.MaxEquation)return t.MAX_EXT
                }
                return 0
            }

            console.log("THREE.WebGLRenderer", n.REVISION), e = e || {};
            var te = void 0 !== e.canvas ? e.canvas : document.createElement("canvas"), ie = void 0 !== e.context ? e.context : null, ne = void 0 !== e.alpha ? e.alpha : !1, re = void 0 !== e.depth ? e.depth : !0, oe = void 0 !== e.stencil ? e.stencil : !0, ae = void 0 !== e.antialias ? e.antialias : !1, se = void 0 !== e.premultipliedAlpha ? e.premultipliedAlpha : !0, le = void 0 !== e.preserveDrawingBuffer ? e.preserveDrawingBuffer : !1, he = [], ce = [], ue = -1, de = [], pe = -1, fe = new Float32Array(8), ge = [], me = [];
            this.domElement = te, this.context = null, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.gammaFactor = 2, this.gammaInput = !1, this.gammaOutput = !1, this.physicallyCorrectLights = !1, this.toneMapping = n.LinearToneMapping, this.toneMappingExposure = 1, this.toneMappingWhitePoint = 1, this.maxMorphTargets = 8, this.maxMorphNormals = 4, this.autoScaleCubemaps = !0;
            var ve = this, Ae = null, ye = null, Ce = null, Ie = -1, be = "", we = null, xe = new n.Vector4, Ee = null, Me = new n.Vector4, Te = 0, Se = new n.Color(0), Pe = 0, _e = te.width, Le = te.height, De = 1, Re = new n.Vector4(0, 0, _e, Le), Be = !1, Oe = new n.Vector4(0, 0, _e, Le), Fe = new n.Frustum, ke = new n.Matrix4, Ne = new n.Vector3, Ue = {
                hash: "",
                ambient: [0, 0, 0],
                directional: [],
                directionalShadowMap: [],
                directionalShadowMatrix: [],
                spot: [],
                spotShadowMap: [],
                spotShadowMatrix: [],
                point: [],
                pointShadowMap: [],
                pointShadowMatrix: [],
                hemi: [],
                shadows: [],
                shadowsPointLight: 0
            }, Ve = {geometries: 0, textures: 0}, ze = {calls: 0, vertices: 0, faces: 0, points: 0};
            this.info = {render: ze, memory: Ve, programs: null};
            var Ge;
            try {
                var He = {
                    alpha: ne,
                    depth: re,
                    stencil: oe,
                    antialias: ae,
                    premultipliedAlpha: se,
                    preserveDrawingBuffer: le
                };
                if (Ge = ie || te.getContext("webgl", He) || te.getContext("experimental-webgl", He), null === Ge)throw null !== te.getContext("webgl") ? "Error creating WebGL context with your selected attributes." : "Error creating WebGL context.";
                void 0 === Ge.getShaderPrecisionFormat && (Ge.getShaderPrecisionFormat = function () {
                    return {rangeMin: 1, rangeMax: 1, precision: 1}
                }), te.addEventListener("webglcontextlost", a, !1)
            } catch (je) {
                console.error("THREE.WebGLRenderer: " + je)
            }
            var We = new n.WebGLExtensions(Ge);
            We.get("OES_texture_float"), We.get("OES_texture_float_linear"), We.get("OES_texture_half_float"), We.get("OES_texture_half_float_linear"), We.get("OES_standard_derivatives"), We.get("ANGLE_instanced_arrays"), We.get("OES_element_index_uint") && (n.BufferGeometry.MaxIndex = 4294967296);
            var Ye = new n.WebGLCapabilities(Ge, We, e), Xe = new n.WebGLState(Ge, We, ee), Qe = new n.WebGLProperties, Ze = new n.WebGLObjects(Ge, Qe, this.info), qe = new n.WebGLPrograms(this, Ye), Ke = new n.WebGLLights;
            this.info.programs = qe.programs;
            var Je = new n.WebGLBufferRenderer(Ge, We, ze), $e = new n.WebGLIndexedBufferRenderer(Ge, We, ze);
            r(), this.context = Ge, this.capabilities = Ye, this.extensions = We, this.properties = Qe, this.state = Xe;
            var et = new n.WebGLShadowMap(this, Ue, Ze);
            this.shadowMap = et;
            var tt = new n.SpritePlugin(this, ge), it = new n.LensFlarePlugin(this, me);
            this.getContext = function () {
                return Ge
            }, this.getContextAttributes = function () {
                return Ge.getContextAttributes()
            }, this.forceContextLoss = function () {
                We.get("WEBGL_lose_context").loseContext()
            }, this.getMaxAnisotropy = function () {
                var e;
                return function () {
                    if (void 0 !== e)return e;
                    var t = We.get("EXT_texture_filter_anisotropic");
                    return e = null !== t ? Ge.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
                }
            }(), this.getPrecision = function () {
                return Ye.precision
            }, this.getPixelRatio = function () {
                return De
            }, this.setPixelRatio = function (e) {
                void 0 !== e && (De = e, this.setSize(Oe.z, Oe.w, !1))
            }, this.getSize = function () {
                return {width: _e, height: Le}
            }, this.setSize = function (e, t, i) {
                _e = e, Le = t, te.width = e * De, te.height = t * De, i !== !1 && (te.style.width = e + "px", te.style.height = t + "px"), this.setViewport(0, 0, e, t)
            }, this.setViewport = function (e, t, i, n) {
                Xe.viewport(Oe.set(e, t, i, n))
            }, this.setScissor = function (e, t, i, n) {
                Xe.scissor(Re.set(e, t, i, n))
            }, this.setScissorTest = function (e) {
                Xe.setScissorTest(Be = e)
            }, this.getClearColor = function () {
                return Se
            }, this.setClearColor = function (e, t) {
                Se.set(e), Pe = void 0 !== t ? t : 1, i(Se.r, Se.g, Se.b, Pe)
            }, this.getClearAlpha = function () {
                return Pe
            }, this.setClearAlpha = function (e) {
                Pe = e, i(Se.r, Se.g, Se.b, Pe)
            }, this.clear = function (e, t, i) {
                var n = 0;
                (void 0 === e || e) && (n |= Ge.COLOR_BUFFER_BIT), (void 0 === t || t) && (n |= Ge.DEPTH_BUFFER_BIT), (void 0 === i || i) && (n |= Ge.STENCIL_BUFFER_BIT), Ge.clear(n)
            }, this.clearColor = function () {
                this.clear(!0, !1, !1)
            }, this.clearDepth = function () {
                this.clear(!1, !0, !1)
            }, this.clearStencil = function () {
                this.clear(!1, !1, !0)
            }, this.clearTarget = function (e, t, i, n) {
                this.setRenderTarget(e), this.clear(t, i, n)
            }, this.resetGLState = o, this.dispose = function () {
                te.removeEventListener("webglcontextlost", a, !1)
            }, this.renderBufferImmediate = function (e, t, i) {
                Xe.initAttributes();
                var r = Qe.get(e);
                e.hasPositions && !r.position && (r.position = Ge.createBuffer()), e.hasNormals && !r.normal && (r.normal = Ge.createBuffer()), e.hasUvs && !r.uv && (r.uv = Ge.createBuffer()), e.hasColors && !r.color && (r.color = Ge.createBuffer());
                var o = t.getAttributes();
                if (e.hasPositions && (Ge.bindBuffer(Ge.ARRAY_BUFFER, r.position), Ge.bufferData(Ge.ARRAY_BUFFER, e.positionArray, Ge.DYNAMIC_DRAW), Xe.enableAttribute(o.position), Ge.vertexAttribPointer(o.position, 3, Ge.FLOAT, !1, 0, 0)), e.hasNormals) {
                    if (Ge.bindBuffer(Ge.ARRAY_BUFFER, r.normal), "MeshPhongMaterial" !== i.type && "MeshStandardMaterial" !== i.type && i.shading === n.FlatShading)for (var a = 0, s = 3 * e.count; s > a; a += 9) {
                        var l = e.normalArray, h = (l[a + 0] + l[a + 3] + l[a + 6]) / 3, c = (l[a + 1] + l[a + 4] + l[a + 7]) / 3, u = (l[a + 2] + l[a + 5] + l[a + 8]) / 3;
                        l[a + 0] = h, l[a + 1] = c, l[a + 2] = u, l[a + 3] = h, l[a + 4] = c, l[a + 5] = u, l[a + 6] = h, l[a + 7] = c, l[a + 8] = u
                    }
                    Ge.bufferData(Ge.ARRAY_BUFFER, e.normalArray, Ge.DYNAMIC_DRAW), Xe.enableAttribute(o.normal), Ge.vertexAttribPointer(o.normal, 3, Ge.FLOAT, !1, 0, 0)
                }
                e.hasUvs && i.map && (Ge.bindBuffer(Ge.ARRAY_BUFFER, r.uv), Ge.bufferData(Ge.ARRAY_BUFFER, e.uvArray, Ge.DYNAMIC_DRAW), Xe.enableAttribute(o.uv), Ge.vertexAttribPointer(o.uv, 2, Ge.FLOAT, !1, 0, 0)), e.hasColors && i.vertexColors !== n.NoColors && (Ge.bindBuffer(Ge.ARRAY_BUFFER, r.color), Ge.bufferData(Ge.ARRAY_BUFFER, e.colorArray, Ge.DYNAMIC_DRAW), Xe.enableAttribute(o.color), Ge.vertexAttribPointer(o.color, 3, Ge.FLOAT, !1, 0, 0)), Xe.disableUnusedAttributes(), Ge.drawArrays(Ge.TRIANGLES, 0, e.count), e.count = 0
            }, this.renderBufferDirect = function (e, i, r, o, a, s) {
                b(o);
                var l = x(e, i, o, a), h = !1, c = r.id + "_" + l.id + "_" + o.wireframe;
                c !== be && (be = c, h = !0);
                var u = a.morphTargetInfluences;
                if (void 0 !== u) {
                    for (var d = [], p = 0, m = u.length; m > p; p++) {
                        var v = u[p];
                        d.push([v, p])
                    }
                    d.sort(g), d.length > 8 && (d.length = 8);
                    for (var A = r.morphAttributes, p = 0, m = d.length; m > p; p++) {
                        var v = d[p];
                        if (fe[p] = v[0], 0 !== v[0]) {
                            var y = v[1];
                            o.morphTargets === !0 && A.position && r.addAttribute("morphTarget" + p, A.position[y]), o.morphNormals === !0 && A.normal && r.addAttribute("morphNormal" + p, A.normal[y])
                        } else o.morphTargets === !0 && r.removeAttribute("morphTarget" + p), o.morphNormals === !0 && r.removeAttribute("morphNormal" + p)
                    }
                    var C = l.getUniforms();
                    null !== C.morphTargetInfluences && Ge.uniform1fv(C.morphTargetInfluences, fe), h = !0
                }
                var y = r.index, I = r.attributes.position;
                o.wireframe === !0 && (y = Ze.getWireframeAttribute(r));
                var w;
                null !== y ? (w = $e, w.setIndex(y)) : w = Je, h && (f(o, l, r), null !== y && Ge.bindBuffer(Ge.ELEMENT_ARRAY_BUFFER, Ze.getAttributeBuffer(y)));
                var E = 0, M = 1 / 0;
                null !== y ? M = y.count : void 0 !== I && (M = I.count);
                var T = r.drawRange.start, S = r.drawRange.count, P = null !== s ? s.start : 0, _ = null !== s ? s.count : 1 / 0, L = Math.max(E, T, P), D = Math.min(E + M, T + S, P + _) - 1, R = Math.max(0, D - L + 1);
                if (a instanceof n.Mesh)if (o.wireframe === !0)Xe.setLineWidth(o.wireframeLinewidth * t()), w.setMode(Ge.LINES); else switch (a.drawMode) {
                    case n.TrianglesDrawMode:
                        w.setMode(Ge.TRIANGLES);
                        break;
                    case n.TriangleStripDrawMode:
                        w.setMode(Ge.TRIANGLE_STRIP);
                        break;
                    case n.TriangleFanDrawMode:
                        w.setMode(Ge.TRIANGLE_FAN)
                } else if (a instanceof n.Line) {
                    var B = o.linewidth;
                    void 0 === B && (B = 1), Xe.setLineWidth(B * t()), a instanceof n.LineSegments ? w.setMode(Ge.LINES) : w.setMode(Ge.LINE_STRIP)
                } else a instanceof n.Points && w.setMode(Ge.POINTS);
                r instanceof n.InstancedBufferGeometry ? r.maxInstancedCount > 0 && w.renderInstances(r, L, R) : w.render(L, R)
            }, this.render = function (e, t, i, r) {
                if (t instanceof n.Camera == !1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
                var o = e.fog;
                if (be = "", Ie = -1, we = null, e.autoUpdate === !0 && e.updateMatrixWorld(), null === t.parent && t.updateMatrixWorld(), t.matrixWorldInverse.getInverse(t.matrixWorld), ke.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), Fe.setFromMatrix(ke), he.length = 0, ue = -1, pe = -1, ge.length = 0, me.length = 0, y(e, t), ce.length = ue + 1, de.length = pe + 1, ve.sortObjects === !0 && (ce.sort(m), de.sort(v)), U(he, t), et.render(e, t), ze.calls = 0, ze.vertices = 0, ze.faces = 0, ze.points = 0, void 0 === i && (i = null), this.setRenderTarget(i), (this.autoClear || r) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil), e.overrideMaterial) {
                    var a = e.overrideMaterial;
                    C(ce, t, o, a), C(de, t, o, a)
                } else Xe.setBlending(n.NoBlending), C(ce, t, o), C(de, t, o);
                if (tt.render(e, t), it.render(e, t, Me), i) {
                    var s = i.texture;
                    s.generateMipmaps && H(i) && s.minFilter !== n.NearestFilter && s.minFilter !== n.LinearFilter && J(i)
                }
                Xe.setDepthTest(!0), Xe.setDepthWrite(!0), Xe.setColorWrite(!0)
            }, this.setFaceCulling = function (e, t) {
                e === n.CullFaceNone ? Xe.disable(Ge.CULL_FACE) : (t === n.FrontFaceDirectionCW ? Ge.frontFace(Ge.CW) : Ge.frontFace(Ge.CCW), e === n.CullFaceBack ? Ge.cullFace(Ge.BACK) : e === n.CullFaceFront ? Ge.cullFace(Ge.FRONT) : Ge.cullFace(Ge.FRONT_AND_BACK), Xe.enable(Ge.CULL_FACE))
            }, this.setTexture = function (e, t) {
                var i = Qe.get(e);
                if (e.version > 0 && i.__version !== e.version) {
                    var n = e.image;
                    return void 0 === n ? void console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined", e) : n.complete === !1 ? void console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete", e) : void z(i, e, t)
                }
                Xe.activeTexture(Ge.TEXTURE0 + t), Xe.bindTexture(Ge.TEXTURE_2D, i.__webglTexture)
            }, this.getCurrentRenderTarget = function () {
                return ye
            }, this.setRenderTarget = function (e) {
                ye = e, e && void 0 === Qe.get(e).__webglFramebuffer && K(e);
                var t, i = e instanceof n.WebGLRenderTargetCube;
                if (e) {
                    var r = Qe.get(e);
                    t = i ? r.__webglFramebuffer[e.activeCubeFace] : r.__webglFramebuffer, xe.copy(e.scissor), Ee = e.scissorTest, Me.copy(e.viewport)
                } else t = null, xe.copy(Re).multiplyScalar(De), Ee = Be, Me.copy(Oe).multiplyScalar(De);
                if (Ce !== t && (Ge.bindFramebuffer(Ge.FRAMEBUFFER, t), Ce = t), Xe.scissor(xe), Xe.setScissorTest(Ee), Xe.viewport(Me), i) {
                    var o = Qe.get(e.texture);
                    Ge.framebufferTexture2D(Ge.FRAMEBUFFER, Ge.COLOR_ATTACHMENT0, Ge.TEXTURE_CUBE_MAP_POSITIVE_X + e.activeCubeFace, o.__webglTexture, e.activeMipMapLevel)
                }
            }, this.readRenderTargetPixels = function (e, t, i, r, o, a) {
                if (e instanceof n.WebGLRenderTarget == !1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
                var s = Qe.get(e).__webglFramebuffer;
                if (s) {
                    var l = !1;
                    s !== Ce && (Ge.bindFramebuffer(Ge.FRAMEBUFFER, s), l = !0);
                    try {
                        var h = e.texture;
                        if (h.format !== n.RGBAFormat && ee(h.format) !== Ge.getParameter(Ge.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
                        if (!(h.type === n.UnsignedByteType || ee(h.type) === Ge.getParameter(Ge.IMPLEMENTATION_COLOR_READ_TYPE) || h.type === n.FloatType && We.get("WEBGL_color_buffer_float") || h.type === n.HalfFloatType && We.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
                        Ge.checkFramebufferStatus(Ge.FRAMEBUFFER) === Ge.FRAMEBUFFER_COMPLETE ? Ge.readPixels(t, i, r, o, ee(h.format), ee(h.type), a) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")
                    } finally {
                        l && Ge.bindFramebuffer(Ge.FRAMEBUFFER, Ce)
                    }
                }
            }
        },n.WebGLRenderTarget = function (e, t, i) {
            this.uuid = n.Math.generateUUID(), this.width = e, this.height = t, this.scissor = new n.Vector4(0, 0, e, t), this.scissorTest = !1, this.viewport = new n.Vector4(0, 0, e, t), i = i || {}, void 0 === i.minFilter && (i.minFilter = n.LinearFilter), this.texture = new n.Texture(void 0, void 0, i.wrapS, i.wrapT, i.magFilter, i.minFilter, i.format, i.type, i.anisotropy), this.depthBuffer = void 0 !== i.depthBuffer ? i.depthBuffer : !0, this.stencilBuffer = void 0 !== i.stencilBuffer ? i.stencilBuffer : !0
        },n.WebGLRenderTarget.prototype = {
            constructor: n.WebGLRenderTarget, setSize: function (e, t) {
                (this.width !== e || this.height !== t) && (this.width = e, this.height = t, this.dispose()), this.viewport.set(0, 0, e, t), this.scissor.set(0, 0, e, t)
            }, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (e) {
                return this.width = e.width, this.height = e.height, this.viewport.copy(e.viewport), this.texture = e.texture.clone(), this.depthBuffer = e.depthBuffer, this.stencilBuffer = e.stencilBuffer, this
            }, dispose: function () {
                this.dispatchEvent({type: "dispose"})
            }
        },n.EventDispatcher.prototype.apply(n.WebGLRenderTarget.prototype),n.WebGLRenderTargetCube = function (e, t, i) {
            n.WebGLRenderTarget.call(this, e, t, i), this.activeCubeFace = 0, this.activeMipMapLevel = 0
        },n.WebGLRenderTargetCube.prototype = Object.create(n.WebGLRenderTarget.prototype),n.WebGLRenderTargetCube.prototype.constructor = n.WebGLRenderTargetCube,n.WebGLBufferRenderer = function (e, t, i) {
            function r(e) {
                s = e
            }

            function o(t, n) {
                e.drawArrays(s, t, n), i.calls++, i.vertices += n, s === e.TRIANGLES && (i.faces += n / 3)
            }

            function a(r) {
                var o = t.get("ANGLE_instanced_arrays");
                if (null === o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                var a = r.attributes.position, l = 0;
                a instanceof n.InterleavedBufferAttribute ? (l = a.data.count, o.drawArraysInstancedANGLE(s, 0, l, r.maxInstancedCount)) : (l = a.count, o.drawArraysInstancedANGLE(s, 0, l, r.maxInstancedCount)), i.calls++, i.vertices += l * r.maxInstancedCount, s === e.TRIANGLES && (i.faces += r.maxInstancedCount * l / 3)
            }

            var s;
            this.setMode = r, this.render = o, this.renderInstances = a
        },n.WebGLIndexedBufferRenderer = function (e, t, i) {
            function n(e) {
                s = e
            }

            function r(i) {
                i.array instanceof Uint32Array && t.get("OES_element_index_uint") ? (l = e.UNSIGNED_INT, h = 4) : (l = e.UNSIGNED_SHORT, h = 2)
            }

            function o(t, n) {
                e.drawElements(s, n, l, t * h), i.calls++, i.vertices += n, s === e.TRIANGLES && (i.faces += n / 3)
            }

            function a(n, r, o) {
                var a = t.get("ANGLE_instanced_arrays");
                return null === a ? void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.") : (a.drawElementsInstancedANGLE(s, o, l, r * h, n.maxInstancedCount), i.calls++, i.vertices += o * n.maxInstancedCount, void(s === e.TRIANGLES && (i.faces += n.maxInstancedCount * o / 3)))
            }

            var s, l, h;
            this.setMode = n, this.setIndex = r, this.render = o, this.renderInstances = a
        },n.WebGLExtensions = function (e) {
            var t = {};
            this.get = function (i) {
                if (void 0 !== t[i])return t[i];
                var n;
                switch (i) {
                    case"EXT_texture_filter_anisotropic":
                        n = e.getExtension("EXT_texture_filter_anisotropic") || e.getExtension("MOZ_EXT_texture_filter_anisotropic") || e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                        break;
                    case"WEBGL_compressed_texture_s3tc":
                        n = e.getExtension("WEBGL_compressed_texture_s3tc") || e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                        break;
                    case"WEBGL_compressed_texture_pvrtc":
                        n = e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                        break;
                    case"WEBGL_compressed_texture_etc1":
                        n = e.getExtension("WEBGL_compressed_texture_etc1");
                        break;
                    default:
                        n = e.getExtension(i)
                }
                return null === n && console.warn("THREE.WebGLRenderer: " + i + " extension not supported."), t[i] = n, n
            }
        },n.WebGLCapabilities = function (e, t, i) {
            function n(t) {
                if ("highp" === t) {
                    if (e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_FLOAT).precision > 0 && e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_FLOAT).precision > 0)return "highp";
                    t = "mediump"
                }
                return "mediump" === t && e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_FLOAT).precision > 0 && e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_FLOAT).precision > 0 ? "mediump" : "lowp"
            }

            this.getMaxPrecision = n, this.precision = void 0 !== i.precision ? i.precision : "highp", this.logarithmicDepthBuffer = void 0 !== i.logarithmicDepthBuffer ? i.logarithmicDepthBuffer : !1, this.maxTextures = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS), this.maxVertexTextures = e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS), this.maxTextureSize = e.getParameter(e.MAX_TEXTURE_SIZE), this.maxCubemapSize = e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE), this.maxAttributes = e.getParameter(e.MAX_VERTEX_ATTRIBS), this.maxVertexUniforms = e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS), this.maxVaryings = e.getParameter(e.MAX_VARYING_VECTORS), this.maxFragmentUniforms = e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS), this.vertexTextures = this.maxVertexTextures > 0, this.floatFragmentTextures = !!t.get("OES_texture_float"), this.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;
            var r = n(this.precision);
            r !== this.precision && (console.warn("THREE.WebGLRenderer:", this.precision, "not supported, using", r, "instead."), this.precision = r), this.logarithmicDepthBuffer && (this.logarithmicDepthBuffer = !!t.get("EXT_frag_depth"))
        },n.WebGLGeometries = function (e, t, i) {
            function r(e) {
                var t = e.geometry;
                if (void 0 !== c[t.id])return c[t.id];
                t.addEventListener("dispose", o);
                var r;
                return t instanceof n.BufferGeometry ? r = t : t instanceof n.Geometry && (void 0 === t._bufferGeometry && (t._bufferGeometry = (new n.BufferGeometry).setFromObject(e)), r = t._bufferGeometry), c[t.id] = r, i.memory.geometries++, r
            }

            function o(e) {
                var n = e.target, r = c[n.id];
                null !== r.index && s(r.index), l(r.attributes), n.removeEventListener("dispose", o), delete c[n.id];
                var a = t.get(n);
                a.wireframe && s(a.wireframe), t["delete"](n);
                var h = t.get(r);
                h.wireframe && s(h.wireframe), t["delete"](r), i.memory.geometries--
            }

            function a(e) {
                return e instanceof n.InterleavedBufferAttribute ? t.get(e.data).__webglBuffer : t.get(e).__webglBuffer
            }

            function s(t) {
                var i = a(t);
                void 0 !== i && (e.deleteBuffer(i), h(t))
            }

            function l(e) {
                for (var t in e)s(e[t])
            }

            function h(e) {
                e instanceof n.InterleavedBufferAttribute ? t["delete"](e.data) : t["delete"](e)
            }

            var c = {};
            this.get = r
        },n.WebGLLights = function () {
            var e = {};
            this.get = function (t) {
                if (void 0 !== e[t.id])return e[t.id];
                var i;
                switch (t.type) {
                    case"DirectionalLight":
                        i = {
                            direction: new n.Vector3,
                            color: new n.Color,
                            shadow: !1,
                            shadowBias: 0,
                            shadowRadius: 1,
                            shadowMapSize: new n.Vector2
                        };
                        break;
                    case"SpotLight":
                        i = {
                            position: new n.Vector3,
                            direction: new n.Vector3,
                            color: new n.Color,
                            distance: 0,
                            coneCos: 0,
                            penumbraCos: 0,
                            decay: 0,
                            shadow: !1,
                            shadowBias: 0,
                            shadowRadius: 1,
                            shadowMapSize: new n.Vector2
                        };
                        break;
                    case"PointLight":
                        i = {
                            position: new n.Vector3,
                            color: new n.Color,
                            distance: 0,
                            decay: 0,
                            shadow: !1,
                            shadowBias: 0,
                            shadowRadius: 1,
                            shadowMapSize: new n.Vector2
                        };
                        break;
                    case"HemisphereLight":
                        i = {direction: new n.Vector3, skyColor: new n.Color, groundColor: new n.Color}
                }
                return e[t.id] = i, i
            }
        },n.WebGLObjects = function (e, t, i) {
            function r(t) {
                var i = u.get(t);
                t.geometry instanceof n.Geometry && i.updateFromObject(t);
                var r = i.index, a = i.attributes;
                null !== r && o(r, e.ELEMENT_ARRAY_BUFFER);
                for (var s in a)o(a[s], e.ARRAY_BUFFER);
                var l = i.morphAttributes;
                for (var s in l)for (var h = l[s], c = 0, d = h.length; d > c; c++)o(h[c], e.ARRAY_BUFFER);
                return i
            }

            function o(e, i) {
                var r = e instanceof n.InterleavedBufferAttribute ? e.data : e, o = t.get(r);
                void 0 === o.__webglBuffer ? a(o, r, i) : o.version !== r.version && s(o, r, i)
            }

            function a(t, i, n) {
                t.__webglBuffer = e.createBuffer(), e.bindBuffer(n, t.__webglBuffer);
                var r = i.dynamic ? e.DYNAMIC_DRAW : e.STATIC_DRAW;
                e.bufferData(n, i.array, r), t.version = i.version
            }

            function s(t, i, n) {
                e.bindBuffer(n, t.__webglBuffer), i.dynamic === !1 || -1 === i.updateRange.count ? e.bufferSubData(n, 0, i.array) : 0 === i.updateRange.count ? console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.") : (e.bufferSubData(n, i.updateRange.offset * i.array.BYTES_PER_ELEMENT, i.array.subarray(i.updateRange.offset, i.updateRange.offset + i.updateRange.count)), i.updateRange.count = 0), t.version = i.version
            }

            function l(e) {
                return e instanceof n.InterleavedBufferAttribute ? t.get(e.data).__webglBuffer : t.get(e).__webglBuffer
            }

            function h(i) {
                var r = t.get(i);
                if (void 0 !== r.wireframe)return r.wireframe;
                var a = [], s = i.index, l = i.attributes, h = l.position;
                if (null !== s)for (var u = {}, d = s.array, p = 0, f = d.length; f > p; p += 3) {
                    var g = d[p + 0], m = d[p + 1], v = d[p + 2];
                    c(u, g, m) && a.push(g, m), c(u, m, v) && a.push(m, v), c(u, v, g) && a.push(v, g)
                } else for (var d = l.position.array, p = 0, f = d.length / 3 - 1; f > p; p += 3) {
                    var g = p + 0, m = p + 1, v = p + 2;
                    a.push(g, m, m, v, v, g)
                }
                var A = h.count > 65535 ? Uint32Array : Uint16Array, y = new n.BufferAttribute(new A(a), 1);
                return o(y, e.ELEMENT_ARRAY_BUFFER), r.wireframe = y, y
            }

            function c(e, t, i) {
                if (t > i) {
                    var n = t;
                    t = i, i = n
                }
                var r = e[t];
                return void 0 === r ? (e[t] = [i], !0) : -1 === r.indexOf(i) ? (r.push(i), !0) : !1
            }

            var u = new n.WebGLGeometries(e, t, i);
            this.getAttributeBuffer = l, this.getWireframeAttribute = h, this.update = r
        },n.WebGLProgram = function () {
            function e(e) {
                switch (e) {
                    case n.LinearEncoding:
                        return ["Linear", "( value )"];
                    case n.sRGBEncoding:
                        return ["sRGB", "( value )"];
                    case n.RGBEEncoding:
                        return ["RGBE", "( value )"];
                    case n.RGBM7Encoding:
                        return ["RGBM", "( value, 7.0 )"];
                    case n.RGBM16Encoding:
                        return ["RGBM", "( value, 16.0 )"];
                    case n.RGBDEncoding:
                        return ["RGBD", "( value, 256.0 )"];
                    case n.GammaEncoding:
                        return ["Gamma", "( value, float( GAMMA_FACTOR ) )"];
                    default:
                        throw new Error("unsupported encoding: " + e)
                }
            }

            function t(t, i) {
                var n = e(i);
                return "vec4 " + t + "( vec4 value ) { return " + n[0] + "ToLinear" + n[1] + "; }"
            }

            function i(t, i) {
                var n = e(i);
                return "vec4 " + t + "( vec4 value ) { return LinearTo" + n[0] + n[1] + "; }"
            }

            function r(e, t) {
                var i;
                switch (t) {
                    case n.LinearToneMapping:
                        i = "Linear";
                        break;
                    case n.ReinhardToneMapping:
                        i = "Reinhard";
                        break;
                    case n.Uncharted2ToneMapping:
                        i = "Uncharted2";
                        break;
                    case n.CineonToneMapping:
                        i = "OptimizedCineon";
                        break;
                    default:
                        throw new Error("unsupported toneMapping: " + t)
                }
                return "vec3 " + e + "( vec3 color ) { return " + i + "ToneMapping( color ); }"
            }

            function o(e, t, i) {
                e = e || {};
                var n = [e.derivatives || t.envMapCubeUV || t.bumpMap || t.normalMap || t.flatShading ? "#extension GL_OES_standard_derivatives : enable" : "", (e.fragDepth || t.logarithmicDepthBuffer) && i.get("EXT_frag_depth") ? "#extension GL_EXT_frag_depth : enable" : "", e.drawBuffers && i.get("WEBGL_draw_buffers") ? "#extension GL_EXT_draw_buffers : require" : "", (e.shaderTextureLOD || t.envMap) && i.get("EXT_shader_texture_lod") ? "#extension GL_EXT_shader_texture_lod : enable" : ""];
                return n.filter(h).join("\n")
            }

            function a(e) {
                var t = [];
                for (var i in e) {
                    var n = e[i];
                    n !== !1 && t.push("#define " + i + " " + n)
                }
                return t.join("\n")
            }

            function s(e, t, i) {
                for (var n = {}, r = e.getProgramParameter(t, e.ACTIVE_UNIFORMS), o = 0; r > o; o++) {
                    var a = e.getActiveUniform(t, o), s = a.name, l = e.getUniformLocation(t, s), h = f.exec(s);
                    if (h) {
                        var c = h[1], u = h[2], d = n[c];
                        d || (d = n[c] = {}), d[u] = l
                    } else if (h = g.exec(s)) {
                        var p = h[1], v = h[2], A = h[3], y = n[p];
                        y || (y = n[p] = []);
                        var C = y[v];
                        C || (C = y[v] = {}), C[A] = l
                    } else if (h = m.exec(s)) {
                        var p = h[1];
                        n[p] = l
                    } else n[s] = l
                }
                return n
            }

            function l(e, t, i) {
                for (var n = {}, r = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES), o = 0; r > o; o++) {
                    var a = e.getActiveAttrib(t, o), s = a.name;
                    n[s] = e.getAttribLocation(t, s)
                }
                return n
            }

            function h(e) {
                return "" !== e
            }

            function c(e, t) {
                return e.replace(/NUM_DIR_LIGHTS/g, t.numDirLights).replace(/NUM_SPOT_LIGHTS/g, t.numSpotLights).replace(/NUM_POINT_LIGHTS/g, t.numPointLights).replace(/NUM_HEMI_LIGHTS/g, t.numHemiLights)
            }

            function u(e) {
                function t(e, t) {
                    var i = n.ShaderChunk[t];
                    if (void 0 === i)throw new Error("Can not resolve #include <" + t + ">");
                    return u(i)
                }

                var i = /#include +<([\w\d.]+)>/g;
                return e.replace(i, t)
            }

            function d(e) {
                function t(e, t, i, n) {
                    for (var r = "", o = parseInt(t); o < parseInt(i); o++)r += n.replace(/\[ i \]/g, "[ " + o + " ]");
                    return r
                }

                var i = /for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;
                return e.replace(i, t)
            }

            var p = 0, f = /^([\w\d_]+)\.([\w\d_]+)$/, g = /^([\w\d_]+)\[(\d+)\]\.([\w\d_]+)$/, m = /^([\w\d_]+)\[0\]$/;
            return function (e, f, g, m) {
                var v = e.context, A = g.extensions, y = g.defines, C = g.__webglShader.vertexShader, I = g.__webglShader.fragmentShader, b = "SHADOWMAP_TYPE_BASIC";
                m.shadowMapType === n.PCFShadowMap ? b = "SHADOWMAP_TYPE_PCF" : m.shadowMapType === n.PCFSoftShadowMap && (b = "SHADOWMAP_TYPE_PCF_SOFT");
                var w = "ENVMAP_TYPE_CUBE", x = "ENVMAP_MODE_REFLECTION", E = "ENVMAP_BLENDING_MULTIPLY";
                if (m.envMap) {
                    switch (g.envMap.mapping) {
                        case n.CubeReflectionMapping:
                        case n.CubeRefractionMapping:
                            w = "ENVMAP_TYPE_CUBE";
                            break;
                        case n.CubeUVReflectionMapping:
                        case n.CubeUVRefractionMapping:
                            w = "ENVMAP_TYPE_CUBE_UV";
                            break;
                        case n.EquirectangularReflectionMapping:
                        case n.EquirectangularRefractionMapping:
                            w = "ENVMAP_TYPE_EQUIREC";
                            break;
                        case n.SphericalReflectionMapping:
                            w = "ENVMAP_TYPE_SPHERE"
                    }
                    switch (g.envMap.mapping) {
                        case n.CubeRefractionMapping:
                        case n.EquirectangularRefractionMapping:
                            x = "ENVMAP_MODE_REFRACTION"
                    }
                    switch (g.combine) {
                        case n.MultiplyOperation:
                            E = "ENVMAP_BLENDING_MULTIPLY";
                            break;
                        case n.MixOperation:
                            E = "ENVMAP_BLENDING_MIX";
                            break;
                        case n.AddOperation:
                            E = "ENVMAP_BLENDING_ADD"
                    }
                }
                var M, T, S = e.gammaFactor > 0 ? e.gammaFactor : 1, P = o(A, m, e.extensions), _ = a(y), L = v.createProgram();
                g instanceof n.RawShaderMaterial ? (M = "", T = "") : (M = ["precision " + m.precision + " float;", "precision " + m.precision + " int;", "#define SHADER_NAME " + g.__webglShader.name, _, m.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", "#define GAMMA_FACTOR " + S, "#define MAX_BONES " + m.maxBones, m.map ? "#define USE_MAP" : "", m.envMap ? "#define USE_ENVMAP" : "", m.envMap ? "#define " + x : "", m.lightMap ? "#define USE_LIGHTMAP" : "", m.aoMap ? "#define USE_AOMAP" : "", m.emissiveMap ? "#define USE_EMISSIVEMAP" : "", m.bumpMap ? "#define USE_BUMPMAP" : "", m.normalMap ? "#define USE_NORMALMAP" : "", m.displacementMap && m.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", m.specularMap ? "#define USE_SPECULARMAP" : "", m.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", m.metalnessMap ? "#define USE_METALNESSMAP" : "", m.alphaMap ? "#define USE_ALPHAMAP" : "", m.vertexColors ? "#define USE_COLOR" : "", m.flatShading ? "#define FLAT_SHADED" : "", m.skinning ? "#define USE_SKINNING" : "", m.useVertexTexture ? "#define BONE_TEXTURE" : "", m.morphTargets ? "#define USE_MORPHTARGETS" : "", m.morphNormals && m.flatShading === !1 ? "#define USE_MORPHNORMALS" : "", m.doubleSided ? "#define DOUBLE_SIDED" : "", m.flipSided ? "#define FLIP_SIDED" : "", m.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", m.shadowMapEnabled ? "#define " + b : "", m.pointLightShadows > 0 ? "#define POINT_LIGHT_SHADOWS" : "", m.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", m.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", m.logarithmicDepthBuffer && e.extensions.get("EXT_frag_depth") ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_COLOR", "	attribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "	attribute vec3 morphTarget0;", "	attribute vec3 morphTarget1;", "	attribute vec3 morphTarget2;", "	attribute vec3 morphTarget3;", "	#ifdef USE_MORPHNORMALS", "		attribute vec3 morphNormal0;", "		attribute vec3 morphNormal1;", "		attribute vec3 morphNormal2;", "		attribute vec3 morphNormal3;", "	#else", "		attribute vec3 morphTarget4;", "		attribute vec3 morphTarget5;", "		attribute vec3 morphTarget6;", "		attribute vec3 morphTarget7;", "	#endif", "#endif", "#ifdef USE_SKINNING", "	attribute vec4 skinIndex;", "	attribute vec4 skinWeight;", "#endif", "\n"].filter(h).join("\n"), T = [P, "precision " + m.precision + " float;", "precision " + m.precision + " int;", "#define SHADER_NAME " + g.__webglShader.name, _, m.alphaTest ? "#define ALPHATEST " + m.alphaTest : "", "#define GAMMA_FACTOR " + S, m.useFog && m.fog ? "#define USE_FOG" : "", m.useFog && m.fogExp ? "#define FOG_EXP2" : "", m.map ? "#define USE_MAP" : "", m.envMap ? "#define USE_ENVMAP" : "", m.envMap ? "#define " + w : "", m.envMap ? "#define " + x : "", m.envMap ? "#define " + E : "", m.lightMap ? "#define USE_LIGHTMAP" : "", m.aoMap ? "#define USE_AOMAP" : "", m.emissiveMap ? "#define USE_EMISSIVEMAP" : "", m.bumpMap ? "#define USE_BUMPMAP" : "", m.normalMap ? "#define USE_NORMALMAP" : "", m.specularMap ? "#define USE_SPECULARMAP" : "", m.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", m.metalnessMap ? "#define USE_METALNESSMAP" : "", m.alphaMap ? "#define USE_ALPHAMAP" : "", m.vertexColors ? "#define USE_COLOR" : "", m.flatShading ? "#define FLAT_SHADED" : "", m.doubleSided ? "#define DOUBLE_SIDED" : "", m.flipSided ? "#define FLIP_SIDED" : "", m.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", m.shadowMapEnabled ? "#define " + b : "", m.pointLightShadows > 0 ? "#define POINT_LIGHT_SHADOWS" : "", m.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", m.physicallyCorrectLights ? "#define PHYSICALLY_CORRECT_LIGHTS" : "", m.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", m.logarithmicDepthBuffer && e.extensions.get("EXT_frag_depth") ? "#define USE_LOGDEPTHBUF_EXT" : "", m.envMap && e.extensions.get("EXT_shader_texture_lod") ? "#define TEXTURE_LOD_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", m.toneMapping !== n.NoToneMapping ? "#define TONE_MAPPING" : "", m.toneMapping !== n.NoToneMapping ? n.ShaderChunk.tonemapping_pars_fragment : "", m.toneMapping !== n.NoToneMapping ? r("toneMapping", m.toneMapping) : "", m.outputEncoding || m.mapEncoding || m.envMapEncoding || m.emissiveMapEncoding ? n.ShaderChunk.encodings_pars_fragment : "", m.mapEncoding ? t("mapTexelToLinear", m.mapEncoding) : "", m.envMapEncoding ? t("envMapTexelToLinear", m.envMapEncoding) : "", m.emissiveMapEncoding ? t("emissiveMapTexelToLinear", m.emissiveMapEncoding) : "", m.outputEncoding ? i("linearToOutputTexel", m.outputEncoding) : "", "\n"].filter(h).join("\n")), C = u(C, m), C = c(C, m), I = u(I, m), I = c(I, m), g instanceof n.ShaderMaterial == !1 && (C = d(C), I = d(I));
                var D = M + C, R = T + I, B = n.WebGLShader(v, v.VERTEX_SHADER, D), O = n.WebGLShader(v, v.FRAGMENT_SHADER, R);
                v.attachShader(L, B), v.attachShader(L, O), void 0 !== g.index0AttributeName ? v.bindAttribLocation(L, 0, g.index0AttributeName) : m.morphTargets === !0 && v.bindAttribLocation(L, 0, "position"), v.linkProgram(L);
                var F = v.getProgramInfoLog(L), k = v.getShaderInfoLog(B), N = v.getShaderInfoLog(O), U = !0, V = !0;
                v.getProgramParameter(L, v.LINK_STATUS) === !1 ? (U = !1, console.error("THREE.WebGLProgram: shader error: ", v.getError(), "gl.VALIDATE_STATUS", v.getProgramParameter(L, v.VALIDATE_STATUS), "gl.getProgramInfoLog", F, k, N)) : "" !== F ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", F) : ("" === k || "" === N) && (V = !1), V && (this.diagnostics = {
                    runnable: U,
                    material: g,
                    programLog: F,
                    vertexShader: {log: k, prefix: M},
                    fragmentShader: {log: N, prefix: T}
                }), v.deleteShader(B), v.deleteShader(O);
                var z;
                this.getUniforms = function () {
                    return void 0 === z && (z = s(v, L)), z
                };
                var G;
                return this.getAttributes = function () {
                    return void 0 === G && (G = l(v, L)), G
                }, this.destroy = function () {
                    v.deleteProgram(L), this.program = void 0
                }, Object.defineProperties(this, {
                    uniforms: {
                        get: function () {
                            return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."), this.getUniforms()
                        }
                    }, attributes: {
                        get: function () {
                            return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."), this.getAttributes()
                        }
                    }
                }), this.id = p++, this.code = f, this.usedTimes = 1, this.program = L, this.vertexShader = B, this.fragmentShader = O, this
            }
        }(),n.WebGLPrograms = function (e, t) {
            function i(e) {
                if (t.floatVertexTextures && e && e.skeleton && e.skeleton.useVertexTexture)return 1024;
                var i = t.maxVertexUniforms, r = Math.floor((i - 20) / 4), o = r;
                return void 0 !== e && e instanceof n.SkinnedMesh && (o = Math.min(e.skeleton.bones.length, o), o < e.skeleton.bones.length && console.warn("WebGLRenderer: too many bones - " + e.skeleton.bones.length + ", this GPU supports just " + o + " (try OpenGL instead of ANGLE)")), o
            }

            function r(e, t) {
                var i;
                return e ? e instanceof n.Texture ? i = e.encoding : e instanceof n.WebGLRenderTarget && (i = e.texture.encoding) : i = n.LinearEncoding, i === n.LinearEncoding && t && (i = n.GammaEncoding), i
            }

            var o = [], a = {
                MeshDepthMaterial: "depth",
                MeshNormalMaterial: "normal",
                MeshBasicMaterial: "basic",
                MeshLambertMaterial: "lambert",
                MeshPhongMaterial: "phong",
                MeshStandardMaterial: "standard",
                LineBasicMaterial: "basic",
                LineDashedMaterial: "dashed",
                PointsMaterial: "points"
            }, s = ["precision", "supportsVertexTextures", "map", "mapEncoding", "envMap", "envMapMode", "envMapEncoding", "lightMap", "aoMap", "emissiveMap", "emissiveMapEncoding", "bumpMap", "normalMap", "displacementMap", "specularMap", "roughnessMap", "metalnessMap", "alphaMap", "combine", "vertexColors", "fog", "useFog", "fogExp", "flatShading", "sizeAttenuation", "logarithmicDepthBuffer", "skinning", "maxBones", "useVertexTexture", "morphTargets", "morphNormals", "maxMorphTargets", "maxMorphNormals", "premultipliedAlpha", "numDirLights", "numPointLights", "numSpotLights", "numHemiLights", "shadowMapEnabled", "pointLightShadows", "toneMapping", "physicallyCorrectLights", "shadowMapType", "alphaTest", "doubleSided", "flipSided"];
            this.getParameters = function (o, s, l, h) {
                var c = a[o.type], u = i(h), d = e.getPrecision();
                null !== o.precision && (d = t.getMaxPrecision(o.precision), d !== o.precision && console.warn("THREE.WebGLProgram.getParameters:", o.precision, "not supported, using", d, "instead."));
                var p = {
                    shaderID: c,
                    precision: d,
                    supportsVertexTextures: t.vertexTextures,
                    outputEncoding: r(e.getCurrentRenderTarget(), e.gammaOutput),
                    map: !!o.map,
                    mapEncoding: r(o.map, e.gammaInput),
                    envMap: !!o.envMap,
                    envMapMode: o.envMap && o.envMap.mapping,
                    envMapEncoding: r(o.envMap, e.gammaInput),
                    envMapCubeUV: !!o.envMap && (o.envMap.mapping === n.CubeUVReflectionMapping || o.envMap.mapping === n.CubeUVRefractionMapping),
                    lightMap: !!o.lightMap,
                    aoMap: !!o.aoMap,
                    emissiveMap: !!o.emissiveMap,
                    emissiveMapEncoding: r(o.emissiveMap, e.gammaInput),
                    bumpMap: !!o.bumpMap,
                    normalMap: !!o.normalMap,
                    displacementMap: !!o.displacementMap,
                    roughnessMap: !!o.roughnessMap,
                    metalnessMap: !!o.metalnessMap,
                    specularMap: !!o.specularMap,
                    alphaMap: !!o.alphaMap,
                    combine: o.combine,
                    vertexColors: o.vertexColors,
                    fog: l,
                    useFog: o.fog,
                    fogExp: l instanceof n.FogExp2,
                    flatShading: o.shading === n.FlatShading,
                    sizeAttenuation: o.sizeAttenuation,
                    logarithmicDepthBuffer: t.logarithmicDepthBuffer,
                    skinning: o.skinning,
                    maxBones: u,
                    useVertexTexture: t.floatVertexTextures && h && h.skeleton && h.skeleton.useVertexTexture,
                    morphTargets: o.morphTargets,
                    morphNormals: o.morphNormals,
                    maxMorphTargets: e.maxMorphTargets,
                    maxMorphNormals: e.maxMorphNormals,
                    numDirLights: s.directional.length,
                    numPointLights: s.point.length,
                    numSpotLights: s.spot.length,
                    numHemiLights: s.hemi.length,
                    pointLightShadows: s.shadowsPointLight,
                    shadowMapEnabled: e.shadowMap.enabled && h.receiveShadow && s.shadows.length > 0,
                    shadowMapType: e.shadowMap.type,
                    toneMapping: e.toneMapping,
                    physicallyCorrectLights: e.physicallyCorrectLights,
                    premultipliedAlpha: o.premultipliedAlpha,
                    alphaTest: o.alphaTest,
                    doubleSided: o.side === n.DoubleSide,
                    flipSided: o.side === n.BackSide
                };
                return p
            }, this.getProgramCode = function (e, t) {
                var i = [];
                if (t.shaderID ? i.push(t.shaderID) : (i.push(e.fragmentShader), i.push(e.vertexShader)), void 0 !== e.defines)for (var n in e.defines)i.push(n), i.push(e.defines[n]);
                for (var r = 0; r < s.length; r++) {
                    var o = s[r];
                    i.push(o), i.push(t[o])
                }
                return i.join()
            }, this.acquireProgram = function (t, i, r) {
                for (var a, s = 0, l = o.length; l > s; s++) {
                    var h = o[s];
                    if (h.code === r) {
                        a = h, ++a.usedTimes;
                        break
                    }
                }
                return void 0 === a && (a = new n.WebGLProgram(e, r, t, i), o.push(a)), a
            }, this.releaseProgram = function (e) {
                if (0 === --e.usedTimes) {
                    var t = o.indexOf(e);
                    o[t] = o[o.length - 1], o.pop(), e.destroy()
                }
            }, this.programs = o
        },n.WebGLProperties = function () {
            var e = {};
            this.get = function (t) {
                var i = t.uuid, n = e[i];
                return void 0 === n && (n = {}, e[i] = n), n
            }, this["delete"] = function (t) {
                delete e[t.uuid]
            }, this.clear = function () {
                e = {}
            }
        },n.WebGLShader = function () {
            function e(e) {
                for (var t = e.split("\n"), i = 0; i < t.length; i++)t[i] = i + 1 + ": " + t[i];
                return t.join("\n")
            }

            return function (t, i, n) {
                var r = t.createShader(i);
                return t.shaderSource(r, n), t.compileShader(r), t.getShaderParameter(r, t.COMPILE_STATUS) === !1 && console.error("THREE.WebGLShader: Shader couldn't compile."), "" !== t.getShaderInfoLog(r) && console.warn("THREE.WebGLShader: gl.getShaderInfoLog()", i === t.VERTEX_SHADER ? "vertex" : "fragment", t.getShaderInfoLog(r), e(n)), r
            }
        }(),n.WebGLShadowMap = function (e, t, i) {
            function r(e, t, i, r) {
                var o = e.geometry, a = null, s = v, l = e.customDepthMaterial;
                if (i && (s = A, l = e.customDistanceMaterial), l)a = l; else {
                    var h = void 0 !== o.morphTargets && o.morphTargets.length > 0 && t.morphTargets, c = e instanceof n.SkinnedMesh && t.skinning, u = 0;
                    h && (u |= f), c && (u |= g), a = s[u]
                }
                return a.visible = t.visible, a.wireframe = t.wireframe, a.wireframeLinewidth = t.wireframeLinewidth, i && void 0 !== a.uniforms.lightPos && a.uniforms.lightPos.value.copy(r), a
            }

            function o(e, t, i) {
                if (e.visible !== !1) {
                    if (e.layers.test(t.layers) && (e instanceof n.Mesh || e instanceof n.Line || e instanceof n.Points) && e.castShadow && (e.frustumCulled === !1 || l.intersectsObject(e) === !0)) {
                        var r = e.material;
                        r.visible === !0 && (e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse, e.matrixWorld), p.push(e))
                    }
                    for (var a = e.children, s = 0, h = a.length; h > s; s++)o(a[s], t, i)
                }
            }

            for (var a = e.context, s = e.state, l = new n.Frustum, h = new n.Matrix4, c = new n.Vector2, u = new n.Vector3, d = new n.Vector3, p = [], f = 1, g = 2, m = (f | g) + 1, v = new Array(m), A = new Array(m), y = [new n.Vector3(1, 0, 0), new n.Vector3(-1, 0, 0), new n.Vector3(0, 0, 1), new n.Vector3(0, 0, -1), new n.Vector3(0, 1, 0), new n.Vector3(0, -1, 0)], C = [new n.Vector3(0, 1, 0), new n.Vector3(0, 1, 0), new n.Vector3(0, 1, 0), new n.Vector3(0, 1, 0), new n.Vector3(0, 0, 1), new n.Vector3(0, 0, -1)], I = [new n.Vector4, new n.Vector4, new n.Vector4, new n.Vector4, new n.Vector4, new n.Vector4], b = n.ShaderLib.depthRGBA, w = n.UniformsUtils.clone(b.uniforms), x = n.ShaderLib.distanceRGBA, E = n.UniformsUtils.clone(x.uniforms), M = 0; M !== m; ++M) {
                var T = 0 !== (M & f), S = 0 !== (M & g), P = new n.ShaderMaterial({
                    uniforms: w,
                    vertexShader: b.vertexShader,
                    fragmentShader: b.fragmentShader,
                    morphTargets: T,
                    skinning: S
                });
                v[M] = P;
                var _ = new n.ShaderMaterial({
                    defines: {USE_SHADOWMAP: ""},
                    uniforms: E,
                    vertexShader: x.vertexShader,
                    fragmentShader: x.fragmentShader,
                    morphTargets: T,
                    skinning: S
                });
                A[M] = _
            }
            var L = this;
            this.enabled = !1, this.autoUpdate = !0, this.needsUpdate = !1, this.type = n.PCFShadowMap, this.cullFace = n.CullFaceFront, this.render = function (f, g) {
                var m, v, A = t.shadows;
                if (0 !== A.length && L.enabled !== !1 && (L.autoUpdate !== !1 || L.needsUpdate !== !1)) {
                    s.clearColor(1, 1, 1, 1), s.disable(a.BLEND), s.enable(a.CULL_FACE), a.frontFace(a.CCW), a.cullFace(L.cullFace === n.CullFaceFront ? a.FRONT : a.BACK), s.setDepthTest(!0), s.setScissorTest(!1);
                    for (var b = 0, w = A.length; w > b; b++) {
                        var x = A[b], E = x.shadow, M = E.camera;
                        if (c.copy(E.mapSize), x instanceof n.PointLight) {
                            m = 6, v = !0;
                            var T = c.x, S = c.y;
                            I[0].set(2 * T, S, T, S), I[1].set(0, S, T, S), I[2].set(3 * T, S, T, S), I[3].set(T, S, T, S), I[4].set(3 * T, 0, T, S), I[5].set(T, 0, T, S), c.x *= 4, c.y *= 2
                        } else m = 1, v = !1;
                        if (null === E.map) {
                            var P = {minFilter: n.NearestFilter, magFilter: n.NearestFilter, format: n.RGBAFormat};
                            E.map = new n.WebGLRenderTarget(c.x, c.y, P), x instanceof n.SpotLight && (M.aspect = c.x / c.y), M.updateProjectionMatrix()
                        }
                        var _ = E.map, D = E.matrix;
                        d.setFromMatrixPosition(x.matrixWorld), M.position.copy(d), e.setRenderTarget(_), e.clear();
                        for (var R = 0; m > R; R++) {
                            if (v) {
                                u.copy(M.position), u.add(y[R]), M.up.copy(C[R]), M.lookAt(u);
                                var B = I[R];
                                s.viewport(B)
                            } else u.setFromMatrixPosition(x.target.matrixWorld), M.lookAt(u);
                            M.updateMatrixWorld(), M.matrixWorldInverse.getInverse(M.matrixWorld), D.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), D.multiply(M.projectionMatrix), D.multiply(M.matrixWorldInverse), h.multiplyMatrices(M.projectionMatrix, M.matrixWorldInverse), l.setFromMatrix(h), p.length = 0, o(f, g, M);
                            for (var O = 0, F = p.length; F > O; O++) {
                                var k = p[O], N = i.update(k), U = k.material;
                                if (U instanceof n.MultiMaterial)for (var V = N.groups, z = U.materials, G = 0, H = V.length; H > G; G++) {
                                    var j = V[G], W = z[j.materialIndex];
                                    if (W.visible === !0) {
                                        var Y = r(k, W, v, d);
                                        e.renderBufferDirect(M, null, N, Y, k, j)
                                    }
                                } else {
                                    var Y = r(k, U, v, d);
                                    e.renderBufferDirect(M, null, N, Y, k, null)
                                }
                            }
                        }
                    }
                    var X = e.getClearColor(), Q = e.getClearAlpha();
                    e.setClearColor(X, Q), s.enable(a.BLEND), L.cullFace === n.CullFaceFront && a.cullFace(a.BACK), L.needsUpdate = !1
                }
            }
        },n.WebGLState = function (e, t, i) {
            var r = this, o = new n.Vector4, a = new Uint8Array(16), s = new Uint8Array(16), l = new Uint8Array(16), h = {}, c = null, u = null, d = null, p = null, f = null, g = null, m = null, v = null, A = !1, y = null, C = null, I = null, b = null, w = null, x = null, E = null, M = null, T = null, S = null, P = null, _ = null, L = null, D = null, R = null, B = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS), O = void 0, F = {}, k = new n.Vector4, N = null, U = null, V = new n.Vector4, z = new n.Vector4, G = e.createTexture();
            e.bindTexture(e.TEXTURE_2D, G), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR), e.texImage2D(e.TEXTURE_2D, 0, e.RGB, 1, 1, 0, e.RGB, e.UNSIGNED_BYTE, new Uint8Array(3)), this.init = function () {
                this.clearColor(0, 0, 0, 1), this.clearDepth(1), this.clearStencil(0), this.enable(e.DEPTH_TEST), e.depthFunc(e.LEQUAL), e.frontFace(e.CCW), e.cullFace(e.BACK), this.enable(e.CULL_FACE), this.enable(e.BLEND), e.blendEquation(e.FUNC_ADD), e.blendFunc(e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA)
            }, this.initAttributes = function () {
                for (var e = 0, t = a.length; t > e; e++)a[e] = 0
            }, this.enableAttribute = function (i) {
                if (a[i] = 1, 0 === s[i] && (e.enableVertexAttribArray(i), s[i] = 1), 0 !== l[i]) {
                    var n = t.get("ANGLE_instanced_arrays");
                    n.vertexAttribDivisorANGLE(i, 0), l[i] = 0
                }
            }, this.enableAttributeAndDivisor = function (t, i, n) {
                a[t] = 1, 0 === s[t] && (e.enableVertexAttribArray(t), s[t] = 1), l[t] !== i && (n.vertexAttribDivisorANGLE(t, i), l[t] = i)
            }, this.disableUnusedAttributes = function () {
                for (var t = 0, i = s.length; i > t; t++)s[t] !== a[t] && (e.disableVertexAttribArray(t), s[t] = 0)
            }, this.enable = function (t) {
                h[t] !== !0 && (e.enable(t), h[t] = !0)
            }, this.disable = function (t) {
                h[t] !== !1 && (e.disable(t), h[t] = !1)
            }, this.getCompressedTextureFormats = function () {
                if (null === c && (c = [], t.get("WEBGL_compressed_texture_pvrtc") || t.get("WEBGL_compressed_texture_s3tc") || t.get("WEBGL_compressed_texture_etc1")))for (var i = e.getParameter(e.COMPRESSED_TEXTURE_FORMATS), n = 0; n < i.length; n++)c.push(i[n]);
                return c
            }, this.setBlending = function (t, r, o, a, s, l, h, c) {
                t === n.NoBlending ? this.disable(e.BLEND) : this.enable(e.BLEND), (t !== u || c !== A) && (t === n.AdditiveBlending ? c ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.ONE, e.ONE, e.ONE, e.ONE)) : (e.blendEquation(e.FUNC_ADD), e.blendFunc(e.SRC_ALPHA, e.ONE)) : t === n.SubtractiveBlending ? c ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.ZERO, e.ZERO, e.ONE_MINUS_SRC_COLOR, e.ONE_MINUS_SRC_ALPHA)) : (e.blendEquation(e.FUNC_ADD), e.blendFunc(e.ZERO, e.ONE_MINUS_SRC_COLOR)) : t === n.MultiplyBlending ? c ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.ZERO, e.ZERO, e.SRC_COLOR, e.SRC_ALPHA)) : (e.blendEquation(e.FUNC_ADD), e.blendFunc(e.ZERO, e.SRC_COLOR)) : c ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.ONE, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA)) : (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA)), u = t, A = c), t === n.CustomBlending ? (s = s || r, l = l || o, h = h || a, (r !== d || s !== g) && (e.blendEquationSeparate(i(r), i(s)), d = r, g = s), (o !== p || a !== f || l !== m || h !== v) && (e.blendFuncSeparate(i(o), i(a), i(l), i(h)), p = o, f = a, m = l, v = h)) : (d = null, p = null, f = null, g = null, m = null, v = null)
            }, this.setDepthFunc = function (t) {
                if (y !== t) {
                    if (t)switch (t) {
                        case n.NeverDepth:
                            e.depthFunc(e.NEVER);
                            break;
                        case n.AlwaysDepth:
                            e.depthFunc(e.ALWAYS);
                            break;
                        case n.LessDepth:
                            e.depthFunc(e.LESS);
                            break;
                        case n.LessEqualDepth:
                            e.depthFunc(e.LEQUAL);
                            break;
                        case n.EqualDepth:
                            e.depthFunc(e.EQUAL);
                            break;
                        case n.GreaterEqualDepth:
                            e.depthFunc(e.GEQUAL);
                            break;
                        case n.GreaterDepth:
                            e.depthFunc(e.GREATER);
                            break;
                        case n.NotEqualDepth:
                            e.depthFunc(e.NOTEQUAL);
                            break;
                        default:
                            e.depthFunc(e.LEQUAL)
                    } else e.depthFunc(e.LEQUAL);
                    y = t
                }
            }, this.setDepthTest = function (t) {
                t ? this.enable(e.DEPTH_TEST) : this.disable(e.DEPTH_TEST)
            }, this.setDepthWrite = function (t) {
                C !== t && (e.depthMask(t), C = t)
            }, this.setColorWrite = function (t) {
                I !== t && (e.colorMask(t, t, t, t), I = t)
            }, this.setStencilFunc = function (t, i, n) {
                (w !== t || x !== i || E !== n) && (e.stencilFunc(t, i, n), w = t, x = i, E = n)
            }, this.setStencilOp = function (t, i, n) {
                (M !== t || T !== i || S !== n) && (e.stencilOp(t, i, n), M = t, T = i, S = n)
            }, this.setStencilTest = function (t) {
                t ? this.enable(e.STENCIL_TEST) : this.disable(e.STENCIL_TEST)
            }, this.setStencilWrite = function (t) {
                b !== t && (e.stencilMask(t), b = t)
            }, this.setFlipSided = function (t) {
                P !== t && (t ? e.frontFace(e.CW) : e.frontFace(e.CCW), P = t)
            }, this.setLineWidth = function (t) {
                t !== _ && (e.lineWidth(t), _ = t)
            }, this.setPolygonOffset = function (t, i, n) {
                t ? this.enable(e.POLYGON_OFFSET_FILL) : this.disable(e.POLYGON_OFFSET_FILL), !t || L === i && D === n || (e.polygonOffset(i, n), L = i, D = n)
            }, this.getScissorTest = function () {
                return R
            }, this.setScissorTest = function (t) {
                R = t, t ? this.enable(e.SCISSOR_TEST) : this.disable(e.SCISSOR_TEST)
            }, this.activeTexture = function (t) {
                void 0 === t && (t = e.TEXTURE0 + B - 1), O !== t && (e.activeTexture(t), O = t)
            }, this.bindTexture = function (t, i) {
                void 0 === O && r.activeTexture();
                var n = F[O];
                void 0 === n && (n = {
                    type: void 0,
                    texture: void 0
                }, F[O] = n), (n.type !== t || n.texture !== i) && (e.bindTexture(t, i || G), n.type = t, n.texture = i)
            }, this.compressedTexImage2D = function () {
                try {
                    e.compressedTexImage2D.apply(e, arguments)
                } catch (t) {
                    console.error(t)
                }
            }, this.texImage2D = function () {
                try {
                    e.texImage2D.apply(e, arguments)
                } catch (t) {
                    console.error(t)
                }
            }, this.clearColor = function (t, i, n, r) {
                o.set(t, i, n, r), k.equals(o) === !1 && (e.clearColor(t, i, n, r), k.copy(o))
            }, this.clearDepth = function (t) {
                N !== t && (e.clearDepth(t), N = t)
            }, this.clearStencil = function (t) {
                U !== t && (e.clearStencil(t), U = t)
            }, this.scissor = function (t) {
                V.equals(t) === !1 && (e.scissor(t.x, t.y, t.z, t.w), V.copy(t))
            }, this.viewport = function (t) {
                z.equals(t) === !1 && (e.viewport(t.x, t.y, t.z, t.w), z.copy(t))
            }, this.reset = function () {
                for (var t = 0; t < s.length; t++)1 === s[t] && (e.disableVertexAttribArray(t), s[t] = 0);
                h = {}, c = null, O = void 0, F = {}, u = null, I = null, C = null, b = null, P = null
            }
        },n.LensFlarePlugin = function (e, t) {
            function i() {
                var e = new Float32Array([-1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1]), t = new Uint16Array([0, 1, 2, 0, 2, 3]);
                o = p.createBuffer(), a = p.createBuffer(), p.bindBuffer(p.ARRAY_BUFFER, o), p.bufferData(p.ARRAY_BUFFER, e, p.STATIC_DRAW), p.bindBuffer(p.ELEMENT_ARRAY_BUFFER, a), p.bufferData(p.ELEMENT_ARRAY_BUFFER, t, p.STATIC_DRAW), u = p.createTexture(), d = p.createTexture(), f.bindTexture(p.TEXTURE_2D, u), p.texImage2D(p.TEXTURE_2D, 0, p.RGB, 16, 16, 0, p.RGB, p.UNSIGNED_BYTE, null), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_S, p.CLAMP_TO_EDGE), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_T, p.CLAMP_TO_EDGE), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MAG_FILTER, p.NEAREST), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MIN_FILTER, p.NEAREST), f.bindTexture(p.TEXTURE_2D, d), p.texImage2D(p.TEXTURE_2D, 0, p.RGBA, 16, 16, 0, p.RGBA, p.UNSIGNED_BYTE, null), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_S, p.CLAMP_TO_EDGE), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_T, p.CLAMP_TO_EDGE), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MAG_FILTER, p.NEAREST), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MIN_FILTER, p.NEAREST), c = p.getParameter(p.MAX_VERTEX_TEXTURE_IMAGE_UNITS) > 0;
                var i;
                i = c ? {
                    vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "uniform sampler2D occlusionMap;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if ( renderType == 2 ) {", "vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );", "vVisibility =        visibility.r / 9.0;", "vVisibility *= 1.0 - visibility.g / 9.0;", "vVisibility *=       visibility.b / 9.0;", "vVisibility *= 1.0 - visibility.a / 9.0;", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
                    fragmentShader: ["uniform lowp int renderType;", "uniform sampler2D map;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "if ( renderType == 0 ) {", "gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );", "} else if ( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * vVisibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
                } : {
                    vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if ( renderType == 2 ) {", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
                    fragmentShader: ["precision mediump float;", "uniform lowp int renderType;", "uniform sampler2D map;", "uniform sampler2D occlusionMap;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "void main() {", "if ( renderType == 0 ) {", "gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );", "} else if ( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;", "visibility = ( 1.0 - visibility / 4.0 );", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * visibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
                }, s = r(i), l = {
                    vertex: p.getAttribLocation(s, "position"),
                    uv: p.getAttribLocation(s, "uv")
                }, h = {
                    renderType: p.getUniformLocation(s, "renderType"),
                    map: p.getUniformLocation(s, "map"),
                    occlusionMap: p.getUniformLocation(s, "occlusionMap"),
                    opacity: p.getUniformLocation(s, "opacity"),
                    color: p.getUniformLocation(s, "color"),
                    scale: p.getUniformLocation(s, "scale"),
                    rotation: p.getUniformLocation(s, "rotation"),
                    screenPosition: p.getUniformLocation(s, "screenPosition")
                }
            }

            function r(t) {
                var i = p.createProgram(), n = p.createShader(p.FRAGMENT_SHADER), r = p.createShader(p.VERTEX_SHADER), o = "precision " + e.getPrecision() + " float;\n";
                return p.shaderSource(n, o + t.fragmentShader), p.shaderSource(r, o + t.vertexShader), p.compileShader(n), p.compileShader(r), p.attachShader(i, n), p.attachShader(i, r), p.linkProgram(i), i
            }

            var o, a, s, l, h, c, u, d, p = e.context, f = e.state;
            this.render = function (r, g, m) {
                if (0 !== t.length) {
                    var v = new n.Vector3, A = m.w / m.z, y = .5 * m.z, C = .5 * m.w, I = 16 / m.w, b = new n.Vector2(I * A, I), w = new n.Vector3(1, 1, 0), x = new n.Vector2(1, 1);
                    void 0 === s && i(), p.useProgram(s), f.initAttributes(), f.enableAttribute(l.vertex), f.enableAttribute(l.uv), f.disableUnusedAttributes(), p.uniform1i(h.occlusionMap, 0), p.uniform1i(h.map, 1), p.bindBuffer(p.ARRAY_BUFFER, o), p.vertexAttribPointer(l.vertex, 2, p.FLOAT, !1, 16, 0), p.vertexAttribPointer(l.uv, 2, p.FLOAT, !1, 16, 8), p.bindBuffer(p.ELEMENT_ARRAY_BUFFER, a), f.disable(p.CULL_FACE), f.setDepthWrite(!1);
                    for (var E = 0, M = t.length; M > E; E++) {
                        I = 16 / m.w, b.set(I * A, I);
                        var T = t[E];
                        if (v.set(T.matrixWorld.elements[12], T.matrixWorld.elements[13], T.matrixWorld.elements[14]), v.applyMatrix4(g.matrixWorldInverse), v.applyProjection(g.projectionMatrix), w.copy(v), x.x = w.x * y + y, x.y = w.y * C + C, c || x.x > 0 && x.x < m.z && x.y > 0 && x.y < m.w) {
                            f.activeTexture(p.TEXTURE0), f.bindTexture(p.TEXTURE_2D, null), f.activeTexture(p.TEXTURE1), f.bindTexture(p.TEXTURE_2D, u), p.copyTexImage2D(p.TEXTURE_2D, 0, p.RGB, m.x + x.x - 8, m.y + x.y - 8, 16, 16, 0), p.uniform1i(h.renderType, 0), p.uniform2f(h.scale, b.x, b.y), p.uniform3f(h.screenPosition, w.x, w.y, w.z), f.disable(p.BLEND), f.enable(p.DEPTH_TEST), p.drawElements(p.TRIANGLES, 6, p.UNSIGNED_SHORT, 0), f.activeTexture(p.TEXTURE0), f.bindTexture(p.TEXTURE_2D, d), p.copyTexImage2D(p.TEXTURE_2D, 0, p.RGBA, m.x + x.x - 8, m.y + x.y - 8, 16, 16, 0), p.uniform1i(h.renderType, 1), f.disable(p.DEPTH_TEST), f.activeTexture(p.TEXTURE1), f.bindTexture(p.TEXTURE_2D, u), p.drawElements(p.TRIANGLES, 6, p.UNSIGNED_SHORT, 0), T.positionScreen.copy(w), T.customUpdateCallback ? T.customUpdateCallback(T) : T.updateLensFlares(), p.uniform1i(h.renderType, 2), f.enable(p.BLEND);
                            for (var S = 0, P = T.lensFlares.length; P > S; S++) {
                                var _ = T.lensFlares[S];
                                _.opacity > .001 && _.scale > .001 && (w.x = _.x, w.y = _.y, w.z = _.z, I = _.size * _.scale / m.w, b.x = I * A, b.y = I, p.uniform3f(h.screenPosition, w.x, w.y, w.z), p.uniform2f(h.scale, b.x, b.y), p.uniform1f(h.rotation, _.rotation), p.uniform1f(h.opacity, _.opacity), p.uniform3f(h.color, _.color.r, _.color.g, _.color.b), f.setBlending(_.blending, _.blendEquation, _.blendSrc, _.blendDst), e.setTexture(_.texture, 1), p.drawElements(p.TRIANGLES, 6, p.UNSIGNED_SHORT, 0))
                            }
                        }
                    }
                    f.enable(p.CULL_FACE), f.enable(p.DEPTH_TEST), f.setDepthWrite(!0), e.resetGLState()
                }
            }
        },n.SpritePlugin = function (e, t) {
            function i() {
                var e = new Float32Array([-.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1]), t = new Uint16Array([0, 1, 2, 0, 2, 3]);
                a = d.createBuffer(), s = d.createBuffer(), d.bindBuffer(d.ARRAY_BUFFER, a), d.bufferData(d.ARRAY_BUFFER, e, d.STATIC_DRAW), d.bindBuffer(d.ELEMENT_ARRAY_BUFFER, s), d.bufferData(d.ELEMENT_ARRAY_BUFFER, t, d.STATIC_DRAW), l = r(), h = {
                    position: d.getAttribLocation(l, "position"),
                    uv: d.getAttribLocation(l, "uv")
                }, c = {
                    uvOffset: d.getUniformLocation(l, "uvOffset"),
                    uvScale: d.getUniformLocation(l, "uvScale"),
                    rotation: d.getUniformLocation(l, "rotation"),
                    scale: d.getUniformLocation(l, "scale"),
                    color: d.getUniformLocation(l, "color"),
                    map: d.getUniformLocation(l, "map"),
                    opacity: d.getUniformLocation(l, "opacity"),
                    modelViewMatrix: d.getUniformLocation(l, "modelViewMatrix"),
                    projectionMatrix: d.getUniformLocation(l, "projectionMatrix"),
                    fogType: d.getUniformLocation(l, "fogType"),
                    fogDensity: d.getUniformLocation(l, "fogDensity"),
                    fogNear: d.getUniformLocation(l, "fogNear"),
                    fogFar: d.getUniformLocation(l, "fogFar"),
                    fogColor: d.getUniformLocation(l, "fogColor"),
                    alphaTest: d.getUniformLocation(l, "alphaTest")
                };
                var i = document.createElement("canvas");
                i.width = 8, i.height = 8;
                var o = i.getContext("2d");
                o.fillStyle = "white", o.fillRect(0, 0, 8, 8), u = new n.Texture(i), u.needsUpdate = !0
            }

            function r() {
                var t = d.createProgram(), i = d.createShader(d.VERTEX_SHADER), n = d.createShader(d.FRAGMENT_SHADER);
                return d.shaderSource(i, ["precision " + e.getPrecision() + " float;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform float rotation;", "uniform vec2 scale;", "uniform vec2 uvOffset;", "uniform vec2 uvScale;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uvOffset + uv * uvScale;", "vec2 alignedPosition = position * scale;", "vec2 rotatedPosition;", "rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;", "rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;", "vec4 finalPosition;", "finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );", "finalPosition.xy += rotatedPosition;", "finalPosition = projectionMatrix * finalPosition;", "gl_Position = finalPosition;", "}"].join("\n")), d.shaderSource(n, ["precision " + e.getPrecision() + " float;", "uniform vec3 color;", "uniform sampler2D map;", "uniform float opacity;", "uniform int fogType;", "uniform vec3 fogColor;", "uniform float fogDensity;", "uniform float fogNear;", "uniform float fogFar;", "uniform float alphaTest;", "varying vec2 vUV;", "void main() {", "vec4 texture = texture2D( map, vUV );", "if ( texture.a < alphaTest ) discard;", "gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );", "if ( fogType > 0 ) {", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "float fogFactor = 0.0;", "if ( fogType == 1 ) {", "fogFactor = smoothstep( fogNear, fogFar, depth );", "} else {", "const float LOG2 = 1.442695;", "fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );", "fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );", "}", "gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );", "}", "}"].join("\n")), d.compileShader(i), d.compileShader(n), d.attachShader(t, i), d.attachShader(t, n), d.linkProgram(t), t
            }

            function o(e, t) {
                return e.renderOrder !== t.renderOrder ? e.renderOrder - t.renderOrder : e.z !== t.z ? t.z - e.z : t.id - e.id
            }

            var a, s, l, h, c, u, d = e.context, p = e.state, f = new n.Vector3, g = new n.Quaternion, m = new n.Vector3;
            this.render = function (r, v) {
                if (0 !== t.length) {
                    void 0 === l && i(), d.useProgram(l), p.initAttributes(), p.enableAttribute(h.position), p.enableAttribute(h.uv), p.disableUnusedAttributes(), p.disable(d.CULL_FACE), p.enable(d.BLEND), d.bindBuffer(d.ARRAY_BUFFER, a), d.vertexAttribPointer(h.position, 2, d.FLOAT, !1, 16, 0), d.vertexAttribPointer(h.uv, 2, d.FLOAT, !1, 16, 8), d.bindBuffer(d.ELEMENT_ARRAY_BUFFER, s), d.uniformMatrix4fv(c.projectionMatrix, !1, v.projectionMatrix.elements), p.activeTexture(d.TEXTURE0), d.uniform1i(c.map, 0);
                    var A = 0, y = 0, C = r.fog;
                    C ? (d.uniform3f(c.fogColor, C.color.r, C.color.g, C.color.b), C instanceof n.Fog ? (d.uniform1f(c.fogNear, C.near), d.uniform1f(c.fogFar, C.far), d.uniform1i(c.fogType, 1), A = 1, y = 1) : C instanceof n.FogExp2 && (d.uniform1f(c.fogDensity, C.density), d.uniform1i(c.fogType, 2), A = 2, y = 2)) : (d.uniform1i(c.fogType, 0), A = 0, y = 0);
                    for (var I = 0, b = t.length; b > I; I++) {
                        var w = t[I];
                        w.modelViewMatrix.multiplyMatrices(v.matrixWorldInverse, w.matrixWorld), w.z = -w.modelViewMatrix.elements[14]
                    }
                    t.sort(o);
                    for (var x = [], I = 0, b = t.length; b > I; I++) {
                        var w = t[I], E = w.material;
                        d.uniform1f(c.alphaTest, E.alphaTest), d.uniformMatrix4fv(c.modelViewMatrix, !1, w.modelViewMatrix.elements), w.matrixWorld.decompose(f, g, m), x[0] = m.x, x[1] = m.y;
                        var M = 0;
                        r.fog && E.fog && (M = y), A !== M && (d.uniform1i(c.fogType, M), A = M), null !== E.map ? (d.uniform2f(c.uvOffset, E.map.offset.x, E.map.offset.y), d.uniform2f(c.uvScale, E.map.repeat.x, E.map.repeat.y)) : (d.uniform2f(c.uvOffset, 0, 0), d.uniform2f(c.uvScale, 1, 1)), d.uniform1f(c.opacity, E.opacity), d.uniform3f(c.color, E.color.r, E.color.g, E.color.b), d.uniform1f(c.rotation, E.rotation), d.uniform2fv(c.scale, x), p.setBlending(E.blending, E.blendEquation, E.blendSrc, E.blendDst), p.setDepthTest(E.depthTest), p.setDepthWrite(E.depthWrite), E.map && E.map.image && E.map.image.width ? e.setTexture(E.map, 0) : e.setTexture(u, 0), d.drawElements(d.TRIANGLES, 6, d.UNSIGNED_SHORT, 0)
                    }
                    p.enable(d.CULL_FACE), e.resetGLState()
                }
            }
        },Object.defineProperties(n.Box2.prototype, {
            empty: {
                value: function () {
                    return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."), this.isEmpty()
                }
            }, isIntersectionBox: {
                value: function (e) {
                    return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(e)
                }
            }
        }),Object.defineProperties(n.Box3.prototype, {
            empty: {
                value: function () {
                    return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."), this.isEmpty()
                }
            }, isIntersectionBox: {
                value: function (e) {
                    return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(e)
                }
            }, isIntersectionSphere: {
                value: function (e) {
                    return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."), this.intersectsSphere(e)
                }
            }
        }),Object.defineProperties(n.Matrix3.prototype, {
            multiplyVector3: {
                value: function (e) {
                    return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), e.applyMatrix3(this)
                }
            }, multiplyVector3Array: {
                value: function (e) {
                    return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(e)
                }
            }
        }),Object.defineProperties(n.Matrix4.prototype, {
            extractPosition: {
                value: function (e) {
                    return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."), this.copyPosition(e)
                }
            }, setRotationFromQuaternion: {
                value: function (e) {
                    return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."), this.makeRotationFromQuaternion(e)
                }
            }, multiplyVector3: {
                value: function (e) {
                    return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."), e.applyProjection(this)
                }
            }, multiplyVector4: {
                value: function (e) {
                    return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this)
                }
            }, multiplyVector3Array: {
                value: function (e) {
                    return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(e)
                }
            }, rotateAxis: {
                value: function (e) {
                    console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), e.transformDirection(this)
                }
            }, crossVector: {
                value: function (e) {
                    return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this)
                }
            }, translate: {
                value: function (e) {
                    console.error("THREE.Matrix4: .translate() has been removed.")
                }
            }, rotateX: {
                value: function (e) {
                    console.error("THREE.Matrix4: .rotateX() has been removed.")
                }
            }, rotateY: {
                value: function (e) {
                    console.error("THREE.Matrix4: .rotateY() has been removed.")
                }
            }, rotateZ: {
                value: function (e) {
                    console.error("THREE.Matrix4: .rotateZ() has been removed.")
                }
            }, rotateByAxis: {
                value: function (e, t) {
                    console.error("THREE.Matrix4: .rotateByAxis() has been removed.")
                }
            }
        }),Object.defineProperties(n.Plane.prototype, {
            isIntersectionLine: {
                value: function (e) {
                    return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."), this.intersectsLine(e)
                }
            }
        }),Object.defineProperties(n.Quaternion.prototype, {
            multiplyVector3: {
                value: function (e) {
                    return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), e.applyQuaternion(this)
                }
            }
        }),Object.defineProperties(n.Ray.prototype, {
            isIntersectionBox: {
                value: function (e) {
                    return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(e)
                }
            }, isIntersectionPlane: {
                value: function (e) {
                    return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."), this.intersectsPlane(e)
                }
            }, isIntersectionSphere: {
                value: function (e) {
                    return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."), this.intersectsSphere(e)
                }
            }
        }),Object.defineProperties(n.Vector3.prototype, {
            setEulerFromRotationMatrix: {
                value: function () {
                    console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
                }
            }, setEulerFromQuaternion: {
                value: function () {
                    console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
                }
            }, getPositionFromMatrix: {
                value: function (e) {
                    return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), this.setFromMatrixPosition(e)
                }
            }, getScaleFromMatrix: {
                value: function (e) {
                    return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), this.setFromMatrixScale(e)
                }
            }, getColumnFromMatrix: {
                value: function (e, t) {
                    return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), this.setFromMatrixColumn(e, t)
                }
            }
        }),n.Face4 = function (e, t, i, r, o, a, s) {
            return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."), new n.Face3(e, t, i, o, a, s)
        },n.Vertex = function (e, t, i) {
            return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."), new n.Vector3(e, t, i)
        },Object.defineProperties(n.Object3D.prototype, {
            eulerOrder: {
                get: function () {
                    return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order
                }, set: function (e) {
                    console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order = e
                }
            }, getChildByName: {
                value: function (e) {
                    return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."), this.getObjectByName(e)
                }
            }, renderDepth: {
                set: function (e) {
                    console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")
                }
            }, translate: {
                value: function (e, t) {
                    return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."), this.translateOnAxis(t, e)
                }
            }, useQuaternion: {
                get: function () {
                    console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
                }, set: function (e) {
                    console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
                }
            }
        }),Object.defineProperties(n, {
            PointCloud: {
                value: function (e, t) {
                    return console.warn("THREE.PointCloud has been renamed to THREE.Points."), new n.Points(e, t)
                }
            }, ParticleSystem: {
                value: function (e, t) {
                    return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."), new n.Points(e, t)
                }
            }
        }),Object.defineProperties(n.Light.prototype, {
            onlyShadow: {
                set: function (e) {
                    console.warn("THREE.Light: .onlyShadow has been removed.")
                }
            }, shadowCameraFov: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."), this.shadow.camera.fov = e
                }
            }, shadowCameraLeft: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."), this.shadow.camera.left = e
                }
            }, shadowCameraRight: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."), this.shadow.camera.right = e
                }
            }, shadowCameraTop: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."), this.shadow.camera.top = e
                }
            }, shadowCameraBottom: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."), this.shadow.camera.bottom = e
                }
            }, shadowCameraNear: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."), this.shadow.camera.near = e
                }
            }, shadowCameraFar: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."), this.shadow.camera.far = e
                }
            }, shadowCameraVisible: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")
                }
            }, shadowBias: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowBias is now .shadow.bias."), this.shadow.bias = e
                }
            }, shadowDarkness: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowDarkness has been removed.")
                }
            }, shadowMapWidth: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."), this.shadow.mapSize.width = e
                }
            }, shadowMapHeight: {
                set: function (e) {
                    console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."), this.shadow.mapSize.height = e
                }
            }
        }),Object.defineProperties(n.BufferAttribute.prototype, {
            length: {
                get: function () {
                    return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."), this.array.length
                }
            }
        }),Object.defineProperties(n.BufferGeometry.prototype, {
            drawcalls: {
                get: function () {
                    return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."), this.groups
                }
            }, offsets: {
                get: function () {
                    return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."), this.groups
                }
            }, addIndex: {
                value: function (e) {
                    console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."), this.setIndex(e)
                }
            }, addDrawCall: {
                value: function (e, t, i) {
                    void 0 !== i && console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."), console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."), this.addGroup(e, t)
                }
            }, clearDrawCalls: {
                value: function () {
                    console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."), this.clearGroups()
                }
            }, computeTangents: {
                value: function () {
                    console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")
                }
            }, computeOffsets: {
                value: function () {
                    console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")
                }
            }
        }),Object.defineProperties(n.Material.prototype, {
            wrapAround: {
                get: function () {
                    console.warn("THREE." + this.type + ": .wrapAround has been removed.")
                }, set: function (e) {
                    console.warn("THREE." + this.type + ": .wrapAround has been removed.")
                }
            }, wrapRGB: {
                get: function () {
                    return console.warn("THREE." + this.type + ": .wrapRGB has been removed."), new n.Color
                }
            }
        }),Object.defineProperties(n, {
            PointCloudMaterial: {
                value: function (e) {
                    return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."), new n.PointsMaterial(e)
                }
            }, ParticleBasicMaterial: {
                value: function (e) {
                    return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."), new n.PointsMaterial(e)
                }
            }, ParticleSystemMaterial: {
                value: function (e) {
                    return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."), new n.PointsMaterial(e)
                }
            }
        }),Object.defineProperties(n.MeshPhongMaterial.prototype, {
            metal: {
                get: function () {
                    return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."), !1
                }, set: function (e) {
                    console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")
                }
            }
        }),Object.defineProperties(n.ShaderMaterial.prototype, {
            derivatives: {
                get: function () {
                    return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."), this.extensions.derivatives
                }, set: function (e) {
                    console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."), this.extensions.derivatives = e
                }
            }
        }),Object.defineProperties(n.WebGLRenderer.prototype, {
            supportsFloatTextures: {
                value: function () {
                    return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."), this.extensions.get("OES_texture_float")
                }
            }, supportsHalfFloatTextures: {
                value: function () {
                    return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."), this.extensions.get("OES_texture_half_float")
                }
            }, supportsStandardDerivatives: {
                value: function () {
                    return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."), this.extensions.get("OES_standard_derivatives")
                }
            }, supportsCompressedTextureS3TC: {
                value: function () {
                    return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."), this.extensions.get("WEBGL_compressed_texture_s3tc")
                }
            }, supportsCompressedTexturePVRTC: {
                value: function () {
                    return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."), this.extensions.get("WEBGL_compressed_texture_pvrtc")
                }
            }, supportsBlendMinMax: {
                value: function () {
                    return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."), this.extensions.get("EXT_blend_minmax")
                }
            }, supportsVertexTextures: {
                value: function () {
                    return this.capabilities.vertexTextures
                }
            }, supportsInstancedArrays: {
                value: function () {
                    return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."), this.extensions.get("ANGLE_instanced_arrays")
                }
            }, enableScissorTest: {
                value: function (e) {
                    console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."), this.setScissorTest(e)
                }
            }, initMaterial: {
                value: function () {
                    console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
                }
            }, addPrePlugin: {
                value: function () {
                    console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
                }
            }, addPostPlugin: {
                value: function () {
                    console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
                }
            }, updateShadowMap: {
                value: function () {
                    console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
                }
            }, shadowMapEnabled: {
                get: function () {
                    return this.shadowMap.enabled
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."), this.shadowMap.enabled = e
                }
            }, shadowMapType: {
                get: function () {
                    return this.shadowMap.type
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."), this.shadowMap.type = e
                }
            }, shadowMapCullFace: {
                get: function () {
                    return this.shadowMap.cullFace
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."), this.shadowMap.cullFace = e
                }
            }
        }),Object.defineProperties(n.WebGLRenderTarget.prototype, {
            wrapS: {
                get: function () {
                    return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS = e
                }
            }, wrapT: {
                get: function () {
                    return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT = e
                }
            }, magFilter: {
                get: function () {
                    return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), this.texture.magFilter
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), this.texture.magFilter = e
                }
            }, minFilter: {
                get: function () {
                    return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), this.texture.minFilter
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), this.texture.minFilter = e
                }
            }, anisotropy: {
                get: function () {
                    return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), this.texture.anisotropy
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), this.texture.anisotropy = e
                }
            }, offset: {
                get: function () {
                    return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset = e
                }
            }, repeat: {
                get: function () {
                    return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat = e
                }
            }, format: {
                get: function () {
                    return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format = e
                }
            }, type: {
                get: function () {
                    return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type = e
                }
            }, generateMipmaps: {
                get: function () {
                    return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), this.texture.generateMipmaps
                }, set: function (e) {
                    console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), this.texture.generateMipmaps = e
                }
            }
        }),n.GeometryUtils = {
            merge: function (e, t, i) {
                console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
                var r;
                t instanceof n.Mesh && (t.matrixAutoUpdate && t.updateMatrix(), r = t.matrix, t = t.geometry), e.merge(t, r, i)
            }, center: function (e) {
                return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."), e.center()
            }
        },n.ImageUtils = {
            crossOrigin: void 0, loadTexture: function (e, t, i, r) {
                console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");
                var o = new n.TextureLoader;
                o.setCrossOrigin(this.crossOrigin);
                var a = o.load(e, i, void 0, r);
                return t && (a.mapping = t), a
            }, loadTextureCube: function (e, t, i, r) {
                console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");
                var o = new n.CubeTextureLoader;
                o.setCrossOrigin(this.crossOrigin);
                var a = o.load(e, i, void 0, r);
                return t && (a.mapping = t), a
            }, loadCompressedTexture: function () {
                console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
            }, loadCompressedTextureCube: function () {
                console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
            }
        },n.Projector = function () {
            console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."), this.projectVector = function (e, t) {
                console.warn("THREE.Projector: .projectVector() is now vector.project()."), e.project(t)
            }, this.unprojectVector = function (e, t) {
                console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."), e.unproject(t)
            }, this.pickingRay = function (e, t) {
                console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")
            }
        },n.CanvasRenderer = function () {
            console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"), this.domElement = document.createElement("canvas"), this.clear = function () {
            }, this.render = function () {
            }, this.setClearColor = function () {
            }, this.setSize = function () {
            }
        },n.MeshFaceMaterial = n.MultiMaterial,n.CurveUtils = {
            tangentQuadraticBezier: function (e, t, i, n) {
                return 2 * (1 - e) * (i - t) + 2 * e * (n - i)
            }, tangentCubicBezier: function (e, t, i, n, r) {
                return -3 * t * (1 - e) * (1 - e) + 3 * i * (1 - e) * (1 - e) - 6 * e * i * (1 - e) + 6 * e * n * (1 - e) - 3 * e * e * n + 3 * e * e * r
            }, tangentSpline: function (e, t, i, n, r) {
                var o = 6 * e * e - 6 * e, a = 3 * e * e - 4 * e + 1, s = -6 * e * e + 6 * e, l = 3 * e * e - 2 * e;
                return o + a + s + l
            }, interpolate: function (e, t, i, n, r) {
                var o = .5 * (i - e), a = .5 * (n - t), s = r * r, l = r * s;
                return (2 * t - 2 * i + o + a) * l + (-3 * t + 3 * i - 2 * o - a) * s + o * r + t
            }
        },n.SceneUtils = {
            createMultiMaterialObject: function (e, t) {
                for (var i = new n.Group, r = 0, o = t.length; o > r; r++)i.add(new n.Mesh(e, t[r]));
                return i
            }, detach: function (e, t, i) {
                e.applyMatrix(t.matrixWorld), t.remove(e), i.add(e)
            }, attach: function (e, t, i) {
                var r = new n.Matrix4;
                r.getInverse(i.matrixWorld), e.applyMatrix(r), t.remove(e), i.add(e)
            }
        },n.ShapeUtils = {
            area: function (e) {
                for (var t = e.length, i = 0, n = t - 1, r = 0; t > r; n = r++)i += e[n].x * e[r].y - e[r].x * e[n].y;
                return .5 * i
            }, triangulate: function () {
                function e(e, t, i, n, r, o) {
                    var a, s, l, h, c, u, d, p, f;
                    if (s = e[o[t]].x, l = e[o[t]].y, h = e[o[i]].x, c = e[o[i]].y, u = e[o[n]].x, d = e[o[n]].y, Number.EPSILON > (h - s) * (d - l) - (c - l) * (u - s))return !1;
                    var g, m, v, A, y, C, I, b, w, x, E, M, T, S, P;
                    for (g = u - h, m = d - c, v = s - u, A = l - d, y = h - s, C = c - l, a = 0; r > a; a++)if (p = e[o[a]].x, f = e[o[a]].y, !(p === s && f === l || p === h && f === c || p === u && f === d) && (I = p - s, b = f - l, w = p - h, x = f - c, E = p - u, M = f - d, P = g * x - m * w, T = y * b - C * I, S = v * M - A * E, P >= -Number.EPSILON && S >= -Number.EPSILON && T >= -Number.EPSILON))return !1;
                    return !0
                }

                return function (t, i) {
                    var r = t.length;
                    if (3 > r)return null;
                    var o, a, s, l = [], h = [], c = [];
                    if (n.ShapeUtils.area(t) > 0)for (a = 0; r > a; a++)h[a] = a; else for (a = 0; r > a; a++)h[a] = r - 1 - a;
                    var u = r, d = 2 * u;
                    for (a = u - 1; u > 2;) {
                        if (d-- <= 0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"), i ? c : l;
                        if (o = a, o >= u && (o = 0), a = o + 1, a >= u && (a = 0), s = a + 1, s >= u && (s = 0), e(t, o, a, s, u, h)) {
                            var p, f, g, m, v;
                            for (p = h[o], f = h[a], g = h[s], l.push([t[p], t[f], t[g]]), c.push([h[o], h[a], h[s]]), m = a, v = a + 1; u > v; m++, v++)h[m] = h[v];
                            u--, d = 2 * u
                        }
                    }
                    return i ? c : l
                }
            }(), triangulateShape: function (e, t) {
                function i(e, t, i) {
                    return e.x !== t.x ? e.x < t.x ? e.x <= i.x && i.x <= t.x : t.x <= i.x && i.x <= e.x : e.y < t.y ? e.y <= i.y && i.y <= t.y : t.y <= i.y && i.y <= e.y
                }

                function r(e, t, n, r, o) {
                    var a = t.x - e.x, s = t.y - e.y, l = r.x - n.x, h = r.y - n.y, c = e.x - n.x, u = e.y - n.y, d = s * l - a * h, p = s * c - a * u;
                    if (Math.abs(d) > Number.EPSILON) {
                        var f;
                        if (d > 0) {
                            if (0 > p || p > d)return [];
                            if (f = h * c - l * u, 0 > f || f > d)return []
                        } else {
                            if (p > 0 || d > p)return [];
                            if (f = h * c - l * u, f > 0 || d > f)return []
                        }
                        if (0 === f)return !o || 0 !== p && p !== d ? [e] : [];
                        if (f === d)return !o || 0 !== p && p !== d ? [t] : [];
                        if (0 === p)return [n];
                        if (p === d)return [r];
                        var g = f / d;
                        return [{x: e.x + g * a, y: e.y + g * s}]
                    }
                    if (0 !== p || h * c !== l * u)return [];
                    var m = 0 === a && 0 === s, v = 0 === l && 0 === h;
                    if (m && v)return e.x !== n.x || e.y !== n.y ? [] : [e];
                    if (m)return i(n, r, e) ? [e] : [];
                    if (v)return i(e, t, n) ? [n] : [];
                    var A, y, C, I, b, w, x, E;
                    return 0 !== a ? (e.x < t.x ? (A = e, C = e.x, y = t, I = t.x) : (A = t, C = t.x, y = e, I = e.x), n.x < r.x ? (b = n, x = n.x, w = r, E = r.x) : (b = r, x = r.x, w = n, E = n.x)) : (e.y < t.y ? (A = e, C = e.y, y = t, I = t.y) : (A = t, C = t.y, y = e, I = e.y), n.y < r.y ? (b = n, x = n.y, w = r, E = r.y) : (b = r, x = r.y, w = n, E = n.y)), x >= C ? x > I ? [] : I === x ? o ? [] : [b] : E >= I ? [b, y] : [b, w] : C > E ? [] : C === E ? o ? [] : [A] : E >= I ? [A, y] : [A, w]
                }

                function o(e, t, i, n) {
                    var r = t.x - e.x, o = t.y - e.y, a = i.x - e.x, s = i.y - e.y, l = n.x - e.x, h = n.y - e.y, c = r * s - o * a, u = r * h - o * l;
                    if (Math.abs(c) > Number.EPSILON) {
                        var d = l * s - h * a;
                        return c > 0 ? u >= 0 && d >= 0 : u >= 0 || d >= 0
                    }
                    return u > 0
                }

                function a(e, t) {
                    function i(e, t) {
                        var i = A.length - 1, n = e - 1;
                        0 > n && (n = i);
                        var r = e + 1;
                        r > i && (r = 0);
                        var a = o(A[e], A[n], A[r], s[t]);
                        if (!a)return !1;
                        var l = s.length - 1, h = t - 1;
                        0 > h && (h = l);
                        var c = t + 1;
                        return c > l && (c = 0), a = o(s[t], s[h], s[c], A[e]), a ? !0 : !1
                    }

                    function n(e, t) {
                        var i, n, o;
                        for (i = 0; i < A.length; i++)if (n = i + 1, n %= A.length, o = r(e, t, A[i], A[n], !0), o.length > 0)return !0;
                        return !1
                    }

                    function a(e, i) {
                        var n, o, a, s, l;
                        for (n = 0; n < y.length; n++)for (o = t[y[n]], a = 0; a < o.length; a++)if (s = a + 1, s %= o.length, l = r(e, i, o[a], o[s], !0), l.length > 0)return !0;
                        return !1
                    }

                    for (var s, l, h, c, u, d, p, f, g, m, v, A = e.concat(), y = [], C = [], I = 0, b = t.length; b > I; I++)y.push(I);
                    for (var w = 0, x = 2 * y.length; y.length > 0;) {
                        if (x--, 0 > x) {
                            console.log("Infinite Loop! Holes left:" + y.length + ", Probably Hole outside Shape!");
                            break
                        }
                        for (h = w; h < A.length; h++) {
                            c = A[h], l = -1;
                            for (var I = 0; I < y.length; I++)if (d = y[I], p = c.x + ":" + c.y + ":" + d, void 0 === C[p]) {
                                s = t[d];
                                for (var E = 0; E < s.length; E++)if (u = s[E], i(h, E) && !n(c, u) && !a(c, u)) {
                                    l = E, y.splice(I, 1), f = A.slice(0, h + 1), g = A.slice(h), m = s.slice(l), v = s.slice(0, l + 1), A = f.concat(m).concat(v).concat(g), w = h;
                                    break
                                }
                                if (l >= 0)break;
                                C[p] = !0
                            }
                            if (l >= 0)break
                        }
                    }
                    return A
                }

                for (var s, l, h, c, u, d, p = {}, f = e.concat(), g = 0, m = t.length; m > g; g++)Array.prototype.push.apply(f, t[g]);
                for (s = 0, l = f.length; l > s; s++)u = f[s].x + ":" + f[s].y, void 0 !== p[u] && console.warn("THREE.Shape: Duplicate point", u), p[u] = s;
                var v = a(e, t), A = n.ShapeUtils.triangulate(v, !1);
                for (s = 0, l = A.length; l > s; s++)for (c = A[s], h = 0; 3 > h; h++)u = c[h].x + ":" + c[h].y, d = p[u], void 0 !== d && (c[h] = d);
                return A.concat()
            }, isClockWise: function (e) {
                return n.ShapeUtils.area(e) < 0
            }, b2: function () {
                function e(e, t) {
                    var i = 1 - e;
                    return i * i * t
                }

                function t(e, t) {
                    return 2 * (1 - e) * e * t
                }

                function i(e, t) {
                    return e * e * t
                }

                return function (n, r, o, a) {
                    return e(n, r) + t(n, o) + i(n, a)
                }
            }(), b3: function () {
                function e(e, t) {
                    var i = 1 - e;
                    return i * i * i * t
                }

                function t(e, t) {
                    var i = 1 - e;
                    return 3 * i * i * e * t
                }

                function i(e, t) {
                    var i = 1 - e;
                    return 3 * i * e * e * t
                }

                function n(e, t) {
                    return e * e * e * t
                }

                return function (r, o, a, s, l) {
                    return e(r, o) + t(r, a) + i(r, s) + n(r, l)
                }
            }()
        },n.Curve = function () {
        },n.Curve.prototype = {
            constructor: n.Curve, getPoint: function (e) {
                return console.warn("THREE.Curve: Warning, getPoint() not implemented!"), null
            }, getPointAt: function (e) {
                var t = this.getUtoTmapping(e);
                return this.getPoint(t)
            }, getPoints: function (e) {
                e || (e = 5);
                var t, i = [];
                for (t = 0; e >= t; t++)i.push(this.getPoint(t / e));
                return i
            }, getSpacedPoints: function (e) {
                e || (e = 5);
                var t, i = [];
                for (t = 0; e >= t; t++)i.push(this.getPointAt(t / e));
                return i
            }, getLength: function () {
                var e = this.getLengths();
                return e[e.length - 1]
            }, getLengths: function (e) {
                if (e || (e = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length === e + 1 && !this.needsUpdate)return this.cacheArcLengths;
                this.needsUpdate = !1;
                var t, i, n = [], r = this.getPoint(0), o = 0;
                for (n.push(0), i = 1; e >= i; i++)t = this.getPoint(i / e), o += t.distanceTo(r), n.push(o), r = t;
                return this.cacheArcLengths = n, n
            }, updateArcLengths: function () {
                this.needsUpdate = !0, this.getLengths()
            }, getUtoTmapping: function (e, t) {
                var i, n = this.getLengths(), r = 0, o = n.length;
                i = t ? t : e * n[o - 1];
                for (var a, s = 0, l = o - 1; l >= s;)if (r = Math.floor(s + (l - s) / 2), a = n[r] - i, 0 > a)s = r + 1; else {
                    if (!(a > 0)) {
                        l = r;
                        break
                    }
                    l = r - 1
                }
                if (r = l, n[r] === i) {
                    var h = r / (o - 1);
                    return h
                }
                var c = n[r], u = n[r + 1], d = u - c, p = (i - c) / d, h = (r + p) / (o - 1);
                return h
            }, getTangent: function (e) {
                var t = 1e-4, i = e - t, n = e + t;
                0 > i && (i = 0), n > 1 && (n = 1);
                var r = this.getPoint(i), o = this.getPoint(n), a = o.clone().sub(r);
                return a.normalize()
            }, getTangentAt: function (e) {
                var t = this.getUtoTmapping(e);
                return this.getTangent(t)
            }
        },n.Curve.create = function (e, t) {
            return e.prototype = Object.create(n.Curve.prototype), e.prototype.constructor = e, e.prototype.getPoint = t, e
        },n.CurvePath = function () {
            this.curves = [], this.autoClose = !1
        },n.CurvePath.prototype = Object.create(n.Curve.prototype),n.CurvePath.prototype.constructor = n.CurvePath,n.CurvePath.prototype.add = function (e) {
            this.curves.push(e)
        },n.CurvePath.prototype.closePath = function () {
            var e = this.curves[0].getPoint(0), t = this.curves[this.curves.length - 1].getPoint(1);
            e.equals(t) || this.curves.push(new n.LineCurve(t, e))
        },n.CurvePath.prototype.getPoint = function (e) {
            for (var t = e * this.getLength(), i = this.getCurveLengths(), n = 0; n < i.length;) {
                if (i[n] >= t) {
                    var r = i[n] - t, o = this.curves[n], a = 1 - r / o.getLength();
                    return o.getPointAt(a)
                }
                n++
            }
            return null
        },n.CurvePath.prototype.getLength = function () {
            var e = this.getCurveLengths();
            return e[e.length - 1]
        },n.CurvePath.prototype.getCurveLengths = function () {
            if (this.cacheLengths && this.cacheLengths.length === this.curves.length)return this.cacheLengths;
            for (var e = [], t = 0, i = 0, n = this.curves.length; n > i; i++)t += this.curves[i].getLength(), e.push(t);
            return this.cacheLengths = e, e
        },n.CurvePath.prototype.createPointsGeometry = function (e) {
            var t = this.getPoints(e);
            return this.createGeometry(t)
        },n.CurvePath.prototype.createSpacedPointsGeometry = function (e) {
            var t = this.getSpacedPoints(e);
            return this.createGeometry(t)
        },n.CurvePath.prototype.createGeometry = function (e) {
            for (var t = new n.Geometry, i = 0, r = e.length; r > i; i++) {
                var o = e[i];
                t.vertices.push(new n.Vector3(o.x, o.y, o.z || 0))
            }
            return t
        },n.Font = function (e) {
            this.data = e
        },n.Font.prototype = {
            constructor: n.Font, generateShapes: function (e, t, i) {
                function r(e) {
                    for (var i = String(e).split(""), n = t / a.resolution, r = 0, s = [], l = 0; l < i.length; l++) {
                        var h = o(i[l], n, r);
                        r += h.offset, s.push(h.path)
                    }
                    return s
                }

                function o(e, t, r) {
                    var o = a.glyphs[e] || a.glyphs["?"];
                    if (o) {
                        var s, l, h, c, u, d, p, f, g, m, v, A = new n.Path, y = [], C = n.ShapeUtils.b2, I = n.ShapeUtils.b3;
                        if (o.o)for (var b = o._cachedOutline || (o._cachedOutline = o.o.split(" ")), w = 0, x = b.length; x > w;) {
                            var E = b[w++];
                            switch (E) {
                                case"m":
                                    s = b[w++] * t + r, l = b[w++] * t, A.moveTo(s, l);
                                    break;
                                case"l":
                                    s = b[w++] * t + r, l = b[w++] * t, A.lineTo(s, l);
                                    break;
                                case"q":
                                    if (h = b[w++] * t + r, c = b[w++] * t, p = b[w++] * t + r, f = b[w++] * t, A.quadraticCurveTo(p, f, h, c), v = y[y.length - 1]) {
                                        u = v.x, d = v.y;
                                        for (var M = 1; i >= M; M++) {
                                            var T = M / i;
                                            C(T, u, p, h), C(T, d, f, c)
                                        }
                                    }
                                    break;
                                case"b":
                                    if (h = b[w++] * t + r, c = b[w++] * t, p = b[w++] * t + r, f = b[w++] * t, g = b[w++] * t + r, m = b[w++] * t, A.bezierCurveTo(p, f, g, m, h, c), v = y[y.length - 1]) {
                                        u = v.x, d = v.y;
                                        for (var M = 1; i >= M; M++) {
                                            var T = M / i;
                                            I(T, u, p, g, h), I(T, d, f, m, c)
                                        }
                                    }
                            }
                        }
                        return {offset: o.ha * t, path: A}
                    }
                }

                void 0 === t && (t = 100), void 0 === i && (i = 4);
                for (var a = this.data, s = r(e), l = [], h = 0, c = s.length; c > h; h++)Array.prototype.push.apply(l, s[h].toShapes());
                return l
            }
        },n.Path = function (e) {
            n.CurvePath.call(this), this.actions = [], e && this.fromPoints(e)
        },n.Path.prototype = Object.create(n.CurvePath.prototype),n.Path.prototype.constructor = n.Path,n.Path.prototype.fromPoints = function (e) {
            this.moveTo(e[0].x, e[0].y);
            for (var t = 1, i = e.length; i > t; t++)this.lineTo(e[t].x, e[t].y)
        },n.Path.prototype.moveTo = function (e, t) {
            this.actions.push({action: "moveTo", args: [e, t]})
        },n.Path.prototype.lineTo = function (e, t) {
            var i = this.actions[this.actions.length - 1].args, r = i[i.length - 2], o = i[i.length - 1], a = new n.LineCurve(new n.Vector2(r, o), new n.Vector2(e, t));
            this.curves.push(a), this.actions.push({action: "lineTo", args: [e, t]})
        },n.Path.prototype.quadraticCurveTo = function (e, t, i, r) {
            var o = this.actions[this.actions.length - 1].args, a = o[o.length - 2], s = o[o.length - 1], l = new n.QuadraticBezierCurve(new n.Vector2(a, s), new n.Vector2(e, t), new n.Vector2(i, r));
            this.curves.push(l), this.actions.push({action: "quadraticCurveTo", args: [e, t, i, r]})
        },n.Path.prototype.bezierCurveTo = function (e, t, i, r, o, a) {
            var s = this.actions[this.actions.length - 1].args, l = s[s.length - 2], h = s[s.length - 1], c = new n.CubicBezierCurve(new n.Vector2(l, h), new n.Vector2(e, t), new n.Vector2(i, r), new n.Vector2(o, a));
            this.curves.push(c), this.actions.push({action: "bezierCurveTo", args: [e, t, i, r, o, a]})
        },n.Path.prototype.splineThru = function (e) {
            var t = Array.prototype.slice.call(arguments), i = this.actions[this.actions.length - 1].args, r = i[i.length - 2], o = i[i.length - 1], a = [new n.Vector2(r, o)];
            Array.prototype.push.apply(a, e);
            var s = new n.SplineCurve(a);
            this.curves.push(s), this.actions.push({action: "splineThru", args: t})
        },n.Path.prototype.arc = function (e, t, i, n, r, o) {
            var a = this.actions[this.actions.length - 1].args, s = a[a.length - 2], l = a[a.length - 1];
            this.absarc(e + s, t + l, i, n, r, o)
        },n.Path.prototype.absarc = function (e, t, i, n, r, o) {
            this.absellipse(e, t, i, i, n, r, o)
        },n.Path.prototype.ellipse = function (e, t, i, n, r, o, a, s) {
            var l = this.actions[this.actions.length - 1].args, h = l[l.length - 2], c = l[l.length - 1];
            this.absellipse(e + h, t + c, i, n, r, o, a, s)
        },n.Path.prototype.absellipse = function (e, t, i, r, o, a, s, l) {
            var h = [e, t, i, r, o, a, s, l || 0], c = new n.EllipseCurve(e, t, i, r, o, a, s, l);
            this.curves.push(c);
            var u = c.getPoint(1);
            h.push(u.x), h.push(u.y), this.actions.push({action: "ellipse", args: h})
        },n.Path.prototype.getSpacedPoints = function (e) {
            e || (e = 40);
            for (var t = [], i = 0; e > i; i++)t.push(this.getPoint(i / e));
            return this.autoClose && t.push(t[0]), t
        },n.Path.prototype.getPoints = function (e) {
            e = e || 12;
            for (var t, i, r, o, a, s, l, h, c, u, d, p = n.ShapeUtils.b2, f = n.ShapeUtils.b3, g = [], m = 0, v = this.actions.length; v > m; m++) {
                var A = this.actions[m], y = A.action, C = A.args;
                switch (y) {
                    case"moveTo":
                        g.push(new n.Vector2(C[0], C[1]));
                        break;
                    case"lineTo":
                        g.push(new n.Vector2(C[0], C[1]));
                        break;
                    case"quadraticCurveTo":
                        t = C[2], i = C[3], a = C[0], s = C[1], g.length > 0 ? (c = g[g.length - 1], l = c.x, h = c.y) : (c = this.actions[m - 1].args, l = c[c.length - 2], h = c[c.length - 1]);
                        for (var I = 1; e >= I; I++) {
                            var b = I / e;
                            u = p(b, l, a, t), d = p(b, h, s, i), g.push(new n.Vector2(u, d))
                        }
                        break;
                    case"bezierCurveTo":
                        t = C[4], i = C[5], a = C[0], s = C[1], r = C[2], o = C[3], g.length > 0 ? (c = g[g.length - 1], l = c.x, h = c.y) : (c = this.actions[m - 1].args, l = c[c.length - 2], h = c[c.length - 1]);
                        for (var I = 1; e >= I; I++) {
                            var b = I / e;
                            u = f(b, l, a, r, t), d = f(b, h, s, o, i), g.push(new n.Vector2(u, d))
                        }
                        break;
                    case"splineThru":
                        c = this.actions[m - 1].args;
                        var w = new n.Vector2(c[c.length - 2], c[c.length - 1]), x = [w], E = e * C[0].length;
                        x = x.concat(C[0]);
                        for (var M = new n.SplineCurve(x), I = 1; E >= I; I++)g.push(M.getPointAt(I / E));
                        break;
                    case"arc":
                        for (var T, S = C[0], P = C[1], _ = C[2], L = C[3], D = C[4], R = !!C[5], B = D - L, O = 2 * e, I = 1; O >= I; I++) {
                            var b = I / O;
                            R || (b = 1 - b), T = L + b * B, u = S + _ * Math.cos(T), d = P + _ * Math.sin(T), g.push(new n.Vector2(u, d))
                        }
                        break;
                    case"ellipse":
                        var T, F, k, S = C[0], P = C[1], N = C[2], U = C[3], L = C[4], D = C[5], R = !!C[6], V = C[7], B = D - L, O = 2 * e;
                        0 !== V && (F = Math.cos(V), k = Math.sin(V));
                        for (var I = 1; O >= I; I++) {
                            var b = I / O;
                            if (R || (b = 1 - b), T = L + b * B, u = S + N * Math.cos(T), d = P + U * Math.sin(T), 0 !== V) {
                                var z = u, G = d;
                                u = (z - S) * F - (G - P) * k + S, d = (z - S) * k + (G - P) * F + P
                            }
                            g.push(new n.Vector2(u, d))
                        }
                }
            }
            var H = g[g.length - 1];
            return Math.abs(H.x - g[0].x) < Number.EPSILON && Math.abs(H.y - g[0].y) < Number.EPSILON && g.splice(g.length - 1, 1), this.autoClose && g.push(g[0]), g
        },n.Path.prototype.toShapes = function (e, t) {
            function i(e) {
                for (var t = [], i = new n.Path, r = 0, o = e.length; o > r; r++) {
                    var a = e[r], s = a.args, l = a.action;
                    "moveTo" === l && 0 !== i.actions.length && (t.push(i), i = new n.Path), i[l].apply(i, s)
                }
                return 0 !== i.actions.length && t.push(i), t
            }

            function r(e) {
                for (var t = [], i = 0, r = e.length; r > i; i++) {
                    var o = e[i], a = new n.Shape;
                    a.actions = o.actions, a.curves = o.curves, t.push(a)
                }
                return t
            }

            function o(e, t) {
                for (var i = t.length, n = !1, r = i - 1, o = 0; i > o; r = o++) {
                    var a = t[r], s = t[o], l = s.x - a.x, h = s.y - a.y;
                    if (Math.abs(h) > Number.EPSILON) {
                        if (0 > h && (a = t[o], l = -l, s = t[r], h = -h), e.y < a.y || e.y > s.y)continue;
                        if (e.y === a.y) {
                            if (e.x === a.x)return !0
                        } else {
                            var c = h * (e.x - a.x) - l * (e.y - a.y);
                            if (0 === c)return !0;
                            if (0 > c)continue;
                            n = !n
                        }
                    } else {
                        if (e.y !== a.y)continue;
                        if (s.x <= e.x && e.x <= a.x || a.x <= e.x && e.x <= s.x)return !0
                    }
                }
                return n
            }

            var a = n.ShapeUtils.isClockWise, s = i(this.actions);
            if (0 === s.length)return [];
            if (t === !0)return r(s);
            var l, h, c, u = [];
            if (1 === s.length)return h = s[0], c = new n.Shape, c.actions = h.actions, c.curves = h.curves, u.push(c), u;
            var d = !a(s[0].getPoints());
            d = e ? !d : d;
            var p, f = [], g = [], m = [], v = 0;
            g[v] = void 0, m[v] = [];
            for (var A = 0, y = s.length; y > A; A++)h = s[A], p = h.getPoints(), l = a(p), l = e ? !l : l, l ? (!d && g[v] && v++, g[v] = {
                s: new n.Shape,
                p: p
            }, g[v].s.actions = h.actions, g[v].s.curves = h.curves, d && v++, m[v] = []) : m[v].push({h: h, p: p[0]});
            if (!g[0])return r(s);
            if (g.length > 1) {
                for (var C = !1, I = [], b = 0, w = g.length; w > b; b++)f[b] = [];
                for (var b = 0, w = g.length; w > b; b++)for (var x = m[b], E = 0; E < x.length; E++) {
                    for (var M = x[E], T = !0, S = 0; S < g.length; S++)o(M.p, g[S].p) && (b !== S && I.push({
                        froms: b,
                        tos: S,
                        hole: E
                    }), T ? (T = !1, f[S].push(M)) : C = !0);
                    T && f[b].push(M)
                }
                I.length > 0 && (C || (m = f))
            }
            for (var P, A = 0, _ = g.length; _ > A; A++) {
                c = g[A].s, u.push(c), P = m[A];
                for (var L = 0, D = P.length; D > L; L++)c.holes.push(P[L].h)
            }
            return u
        },n.Shape = function () {
            n.Path.apply(this, arguments), this.holes = []
        },n.Shape.prototype = Object.create(n.Path.prototype),n.Shape.prototype.constructor = n.Shape,n.Shape.prototype.extrude = function (e) {
            return new n.ExtrudeGeometry(this, e)
        },n.Shape.prototype.makeGeometry = function (e) {
            return new n.ShapeGeometry(this, e)
        },n.Shape.prototype.getPointsHoles = function (e) {
            for (var t = [], i = 0, n = this.holes.length; n > i; i++)t[i] = this.holes[i].getPoints(e);
            return t
        },n.Shape.prototype.extractAllPoints = function (e) {
            return {shape: this.getPoints(e), holes: this.getPointsHoles(e)}
        },n.Shape.prototype.extractPoints = function (e) {
            return this.extractAllPoints(e)
        },n.LineCurve = function (e, t) {
            this.v1 = e, this.v2 = t
        },n.LineCurve.prototype = Object.create(n.Curve.prototype),n.LineCurve.prototype.constructor = n.LineCurve,n.LineCurve.prototype.getPoint = function (e) {
            var t = this.v2.clone().sub(this.v1);
            return t.multiplyScalar(e).add(this.v1), t
        },n.LineCurve.prototype.getPointAt = function (e) {
            return this.getPoint(e)
        },n.LineCurve.prototype.getTangent = function (e) {
            var t = this.v2.clone().sub(this.v1);
            return t.normalize()
        },n.QuadraticBezierCurve = function (e, t, i) {
            this.v0 = e, this.v1 = t, this.v2 = i
        },n.QuadraticBezierCurve.prototype = Object.create(n.Curve.prototype),n.QuadraticBezierCurve.prototype.constructor = n.QuadraticBezierCurve,n.QuadraticBezierCurve.prototype.getPoint = function (e) {
            var t = n.ShapeUtils.b2;
            return new n.Vector2(t(e, this.v0.x, this.v1.x, this.v2.x), t(e, this.v0.y, this.v1.y, this.v2.y))
        },n.QuadraticBezierCurve.prototype.getTangent = function (e) {
            var t = n.CurveUtils.tangentQuadraticBezier;
            return new n.Vector2(t(e, this.v0.x, this.v1.x, this.v2.x), t(e, this.v0.y, this.v1.y, this.v2.y)).normalize()
        },n.CubicBezierCurve = function (e, t, i, n) {
            this.v0 = e, this.v1 = t, this.v2 = i, this.v3 = n
        },n.CubicBezierCurve.prototype = Object.create(n.Curve.prototype),n.CubicBezierCurve.prototype.constructor = n.CubicBezierCurve,n.CubicBezierCurve.prototype.getPoint = function (e) {
            var t = n.ShapeUtils.b3;
            return new n.Vector2(t(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), t(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y))
        },n.CubicBezierCurve.prototype.getTangent = function (e) {
            var t = n.CurveUtils.tangentCubicBezier;
            return new n.Vector2(t(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), t(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y)).normalize()
        },n.SplineCurve = function (e) {
            this.points = void 0 == e ? [] : e
        },n.SplineCurve.prototype = Object.create(n.Curve.prototype),n.SplineCurve.prototype.constructor = n.SplineCurve,n.SplineCurve.prototype.getPoint = function (e) {
            var t = this.points, i = (t.length - 1) * e, r = Math.floor(i), o = i - r, a = t[0 === r ? r : r - 1], s = t[r], l = t[r > t.length - 2 ? t.length - 1 : r + 1], h = t[r > t.length - 3 ? t.length - 1 : r + 2], c = n.CurveUtils.interpolate;
            return new n.Vector2(c(a.x, s.x, l.x, h.x, o), c(a.y, s.y, l.y, h.y, o))
        },n.EllipseCurve = function (e, t, i, n, r, o, a, s) {
            this.aX = e, this.aY = t, this.xRadius = i, this.yRadius = n, this.aStartAngle = r, this.aEndAngle = o, this.aClockwise = a, this.aRotation = s || 0
        },n.EllipseCurve.prototype = Object.create(n.Curve.prototype),n.EllipseCurve.prototype.constructor = n.EllipseCurve,n.EllipseCurve.prototype.getPoint = function (e) {
            var t = this.aEndAngle - this.aStartAngle;
            0 > t && (t += 2 * Math.PI), t > 2 * Math.PI && (t -= 2 * Math.PI);
            var i;
            i = this.aClockwise === !0 ? this.aEndAngle + (1 - e) * (2 * Math.PI - t) : this.aStartAngle + e * t;
            var r = this.aX + this.xRadius * Math.cos(i), o = this.aY + this.yRadius * Math.sin(i);
            if (0 !== this.aRotation) {
                var a = Math.cos(this.aRotation), s = Math.sin(this.aRotation), l = r, h = o;
                r = (l - this.aX) * a - (h - this.aY) * s + this.aX, o = (l - this.aX) * s + (h - this.aY) * a + this.aY
            }
            return new n.Vector2(r, o)
        },n.ArcCurve = function (e, t, i, r, o, a) {
            n.EllipseCurve.call(this, e, t, i, i, r, o, a)
        },n.ArcCurve.prototype = Object.create(n.EllipseCurve.prototype),n.ArcCurve.prototype.constructor = n.ArcCurve,n.LineCurve3 = n.Curve.create(function (e, t) {
            this.v1 = e, this.v2 = t
        }, function (e) {
            var t = new n.Vector3;
            return t.subVectors(this.v2, this.v1), t.multiplyScalar(e), t.add(this.v1), t
        }),n.QuadraticBezierCurve3 = n.Curve.create(function (e, t, i) {
            this.v0 = e, this.v1 = t, this.v2 = i
        }, function (e) {
            var t = n.ShapeUtils.b2;
            return new n.Vector3(t(e, this.v0.x, this.v1.x, this.v2.x), t(e, this.v0.y, this.v1.y, this.v2.y), t(e, this.v0.z, this.v1.z, this.v2.z))
        }),n.CubicBezierCurve3 = n.Curve.create(function (e, t, i, n) {
            this.v0 = e, this.v1 = t, this.v2 = i, this.v3 = n
        }, function (e) {
            var t = n.ShapeUtils.b3;
            return new n.Vector3(t(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), t(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y), t(e, this.v0.z, this.v1.z, this.v2.z, this.v3.z))
        }),n.SplineCurve3 = n.Curve.create(function (e) {
            console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"), this.points = void 0 == e ? [] : e
        }, function (e) {
            var t = this.points, i = (t.length - 1) * e, r = Math.floor(i), o = i - r, a = t[0 == r ? r : r - 1], s = t[r], l = t[r > t.length - 2 ? t.length - 1 : r + 1], h = t[r > t.length - 3 ? t.length - 1 : r + 2], c = n.CurveUtils.interpolate;
            return new n.Vector3(c(a.x, s.x, l.x, h.x, o), c(a.y, s.y, l.y, h.y, o), c(a.z, s.z, l.z, h.z, o))
        }),n.CatmullRomCurve3 = function () {
            function e() {
            }

            var t = new n.Vector3, i = new e, r = new e, o = new e;
            return e.prototype.init = function (e, t, i, n) {
                this.c0 = e, this.c1 = i, this.c2 = -3 * e + 3 * t - 2 * i - n, this.c3 = 2 * e - 2 * t + i + n
            }, e.prototype.initNonuniformCatmullRom = function (e, t, i, n, r, o, a) {
                var s = (t - e) / r - (i - e) / (r + o) + (i - t) / o, l = (i - t) / o - (n - t) / (o + a) + (n - i) / a;
                s *= o, l *= o, this.init(t, i, s, l)
            }, e.prototype.initCatmullRom = function (e, t, i, n, r) {
                this.init(t, i, r * (i - e), r * (n - t))
            }, e.prototype.calc = function (e) {
                var t = e * e, i = t * e;
                return this.c0 + this.c1 * e + this.c2 * t + this.c3 * i
            }, n.Curve.create(function (e) {
                this.points = e || [], this.closed = !1
            }, function (e) {
                var a, s, l, h, c = this.points;
                h = c.length, 2 > h && console.log("duh, you need at least 2 points"), a = (h - (this.closed ? 0 : 1)) * e, s = Math.floor(a), l = a - s, this.closed ? s += s > 0 ? 0 : (Math.floor(Math.abs(s) / c.length) + 1) * c.length : 0 === l && s === h - 1 && (s = h - 2, l = 1);
                var u, d, p, f;
                if (this.closed || s > 0 ? u = c[(s - 1) % h] : (t.subVectors(c[0], c[1]).add(c[0]), u = t), d = c[s % h], p = c[(s + 1) % h], this.closed || h > s + 2 ? f = c[(s + 2) % h] : (t.subVectors(c[h - 1], c[h - 2]).add(c[h - 1]), f = t), void 0 === this.type || "centripetal" === this.type || "chordal" === this.type) {
                    var g = "chordal" === this.type ? .5 : .25, m = Math.pow(u.distanceToSquared(d), g), v = Math.pow(d.distanceToSquared(p), g), A = Math.pow(p.distanceToSquared(f), g);
                    1e-4 > v && (v = 1), 1e-4 > m && (m = v), 1e-4 > A && (A = v), i.initNonuniformCatmullRom(u.x, d.x, p.x, f.x, m, v, A), r.initNonuniformCatmullRom(u.y, d.y, p.y, f.y, m, v, A), o.initNonuniformCatmullRom(u.z, d.z, p.z, f.z, m, v, A)
                } else if ("catmullrom" === this.type) {
                    var y = void 0 !== this.tension ? this.tension : .5;
                    i.initCatmullRom(u.x, d.x, p.x, f.x, y), r.initCatmullRom(u.y, d.y, p.y, f.y, y), o.initCatmullRom(u.z, d.z, p.z, f.z, y)
                }
                var C = new n.Vector3(i.calc(l), r.calc(l), o.calc(l));
                return C
            })
        }(),n.ClosedSplineCurve3 = function (e) {
            console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."), n.CatmullRomCurve3.call(this, e), this.type = "catmullrom", this.closed = !0
        },n.ClosedSplineCurve3.prototype = Object.create(n.CatmullRomCurve3.prototype),n.BoxGeometry = function (e, t, i, r, o, a) {
            n.Geometry.call(this), this.type = "BoxGeometry", this.parameters = {
                width: e,
                height: t,
                depth: i,
                widthSegments: r,
                heightSegments: o,
                depthSegments: a
            }, this.fromBufferGeometry(new n.BoxBufferGeometry(e, t, i, r, o, a)), this.mergeVertices()
        },n.BoxGeometry.prototype = Object.create(n.Geometry.prototype),n.BoxGeometry.prototype.constructor = n.BoxGeometry,n.CubeGeometry = n.BoxGeometry,n.BoxBufferGeometry = function (e, t, i, r, o, a) {
            function s(e, t, i) {
                var n = 0;
                return n += e * t * 2, n += e * i * 2, n += i * t * 2, 4 * n
            }

            function l(e, t, i, r, o, a, s, l, c, u, I) {
                for (var b = a / c, w = s / u, x = a / 2, E = s / 2, M = l / 2, T = c + 1, S = u + 1, P = 0, _ = 0, L = new n.Vector3, D = 0; S > D; D++)for (var R = D * w - E, B = 0; T > B; B++) {
                    var O = B * b - x;
                    L[e] = O * r, L[t] = R * o, L[i] = M, p[m] = L.x, p[m + 1] = L.y, p[m + 2] = L.z, L[e] = 0, L[t] = 0, L[i] = l > 0 ? 1 : -1, f[m] = L.x, f[m + 1] = L.y, f[m + 2] = L.z, g[v] = B / c, g[v + 1] = 1 - D / u, m += 3, v += 2, P += 1
                }
                for (D = 0; u > D; D++)for (B = 0; c > B; B++) {
                    var F = y + B + T * D, k = y + B + T * (D + 1), N = y + (B + 1) + T * (D + 1), U = y + (B + 1) + T * D;
                    d[A] = F, d[A + 1] = k, d[A + 2] = U, d[A + 3] = k, d[A + 4] = N, d[A + 5] = U, A += 6, _ += 6
                }
                h.addGroup(C, _, I), C += _, y += P
            }

            n.BufferGeometry.call(this), this.type = "BoxBufferGeometry", this.parameters = {
                width: e,
                height: t,
                depth: i,
                widthSegments: r,
                heightSegments: o,
                depthSegments: a
            };
            var h = this;
            r = Math.floor(r) || 1, o = Math.floor(o) || 1, a = Math.floor(a) || 1;
            var c = s(r, o, a), u = c / 4 * 6, d = new (u > 65535 ? Uint32Array : Uint16Array)(u), p = new Float32Array(3 * c), f = new Float32Array(3 * c), g = new Float32Array(2 * c), m = 0, v = 0, A = 0, y = 0, C = 0;
            l("z", "y", "x", -1, -1, i, t, e, a, o, 0), l("z", "y", "x", 1, -1, i, t, -e, a, o, 1), l("x", "z", "y", 1, 1, e, i, t, r, a, 2), l("x", "z", "y", 1, -1, e, i, -t, r, a, 3), l("x", "y", "z", 1, -1, e, t, i, r, o, 4), l("x", "y", "z", -1, -1, e, t, -i, r, o, 5), this.setIndex(new n.BufferAttribute(d, 1)), this.addAttribute("position", new n.BufferAttribute(p, 3)), this.addAttribute("normal", new n.BufferAttribute(f, 3)), this.addAttribute("uv", new n.BufferAttribute(g, 2))
        },n.BoxBufferGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.BoxBufferGeometry.prototype.constructor = n.BoxBufferGeometry,n.CircleGeometry = function (e, t, i, r) {
            n.Geometry.call(this), this.type = "CircleGeometry", this.parameters = {
                radius: e,
                segments: t,
                thetaStart: i,
                thetaLength: r
            }, this.fromBufferGeometry(new n.CircleBufferGeometry(e, t, i, r))
        },n.CircleGeometry.prototype = Object.create(n.Geometry.prototype),n.CircleGeometry.prototype.constructor = n.CircleGeometry,n.CircleBufferGeometry = function (e, t, i, r) {
            n.BufferGeometry.call(this), this.type = "CircleBufferGeometry", this.parameters = {
                radius: e,
                segments: t,
                thetaStart: i,
                thetaLength: r
            }, e = e || 50, t = void 0 !== t ? Math.max(3, t) : 8, i = void 0 !== i ? i : 0,
                r = void 0 !== r ? r : 2 * Math.PI;
            var o = t + 2, a = new Float32Array(3 * o), s = new Float32Array(3 * o), l = new Float32Array(2 * o);
            s[2] = 1, l[0] = .5, l[1] = .5;
            for (var h = 0, c = 3, u = 2; t >= h; h++, c += 3, u += 2) {
                var d = i + h / t * r;
                a[c] = e * Math.cos(d), a[c + 1] = e * Math.sin(d), s[c + 2] = 1, l[u] = (a[c] / e + 1) / 2, l[u + 1] = (a[c + 1] / e + 1) / 2
            }
            for (var p = [], c = 1; t >= c; c++)p.push(c, c + 1, 0);
            this.setIndex(new n.BufferAttribute(new Uint16Array(p), 1)), this.addAttribute("position", new n.BufferAttribute(a, 3)), this.addAttribute("normal", new n.BufferAttribute(s, 3)), this.addAttribute("uv", new n.BufferAttribute(l, 2)), this.boundingSphere = new n.Sphere(new n.Vector3, e)
        },n.CircleBufferGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.CircleBufferGeometry.prototype.constructor = n.CircleBufferGeometry,n.CylinderBufferGeometry = function (e, t, i, r, o, a, s, l) {
            function h() {
                var e = (r + 1) * (o + 1);
                return a === !1 && (e += 2 * (r + 1) + 2 * r), e
            }

            function c() {
                var e = r * o * 2 * 3;
                return a === !1 && (e += 2 * r * 3), e
            }

            function u() {
                var a, h, c = new n.Vector3, u = new n.Vector3, d = (t - e) / i;
                for (h = 0; o >= h; h++) {
                    var p = [], f = h / o, w = f * (t - e) + e;
                    for (a = 0; r >= a; a++) {
                        var x = a / r;
                        u.x = w * Math.sin(x * l + s), u.y = -f * i + b, u.z = w * Math.cos(x * l + s), m.setXYZ(y, u.x, u.y, u.z), c.copy(u), (0 === e && 0 === h || 0 === t && h === o) && (c.x = Math.sin(x * l + s), c.z = Math.cos(x * l + s)), c.setY(Math.sqrt(c.x * c.x + c.z * c.z) * d).normalize(), v.setXYZ(y, c.x, c.y, c.z), A.setXY(y, x, 1 - f), p.push(y), y++
                    }
                    I.push(p)
                }
                for (a = 0; r > a; a++)for (h = 0; o > h; h++) {
                    var E = I[h][a], M = I[h + 1][a], T = I[h + 1][a + 1], S = I[h][a + 1];
                    g.setX(C, E), C++, g.setX(C, M), C++, g.setX(C, S), C++, g.setX(C, M), C++, g.setX(C, T), C++, g.setX(C, S), C++
                }
            }

            function d(i) {
                var o, a, h, c = new n.Vector2, u = new n.Vector3, d = i === !0 ? e : t, p = i === !0 ? 1 : -1;
                for (a = y, o = 1; r >= o; o++)m.setXYZ(y, 0, b * p, 0), v.setXYZ(y, 0, p, 0), i === !0 ? (c.x = o / r, c.y = 0) : (c.x = (o - 1) / r, c.y = 1), A.setXY(y, c.x, c.y), y++;
                for (h = y, o = 0; r >= o; o++) {
                    var f = o / r;
                    u.x = d * Math.sin(f * l + s), u.y = b * p, u.z = d * Math.cos(f * l + s), m.setXYZ(y, u.x, u.y, u.z), v.setXYZ(y, 0, p, 0), A.setXY(y, f, i === !0 ? 1 : 0), y++
                }
                for (o = 0; r > o; o++) {
                    var I = a + o, w = h + o;
                    i === !0 ? (g.setX(C, w), C++, g.setX(C, w + 1), C++, g.setX(C, I), C++) : (g.setX(C, w + 1), C++, g.setX(C, w), C++, g.setX(C, I), C++)
                }
            }

            n.BufferGeometry.call(this), this.type = "CylinderBufferGeometry", this.parameters = {
                radiusTop: e,
                radiusBottom: t,
                height: i,
                radialSegments: r,
                heightSegments: o,
                openEnded: a,
                thetaStart: s,
                thetaLength: l
            }, e = void 0 !== e ? e : 20, t = void 0 !== t ? t : 20, i = void 0 !== i ? i : 100, r = Math.floor(r) || 8, o = Math.floor(o) || 1, a = void 0 !== a ? a : !1, s = void 0 !== s ? s : 0, l = void 0 !== l ? l : 2 * Math.PI;
            var p = h(), f = c(), g = new n.BufferAttribute(new (f > 65535 ? Uint32Array : Uint16Array)(f), 1), m = new n.BufferAttribute(new Float32Array(3 * p), 3), v = new n.BufferAttribute(new Float32Array(3 * p), 3), A = new n.BufferAttribute(new Float32Array(2 * p), 2), y = 0, C = 0, I = [], b = i / 2;
            u(), a === !1 && (e > 0 && d(!0), t > 0 && d(!1)), this.setIndex(g), this.addAttribute("position", m), this.addAttribute("normal", v), this.addAttribute("uv", A)
        },n.CylinderBufferGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.CylinderBufferGeometry.prototype.constructor = n.CylinderBufferGeometry,n.CylinderGeometry = function (e, t, i, r, o, a, s, l) {
            n.Geometry.call(this), this.type = "CylinderGeometry", this.parameters = {
                radiusTop: e,
                radiusBottom: t,
                height: i,
                radialSegments: r,
                heightSegments: o,
                openEnded: a,
                thetaStart: s,
                thetaLength: l
            }, this.fromBufferGeometry(new n.CylinderBufferGeometry(e, t, i, r, o, a, s, l)), this.mergeVertices()
        },n.CylinderGeometry.prototype = Object.create(n.Geometry.prototype),n.CylinderGeometry.prototype.constructor = n.CylinderGeometry,n.EdgesGeometry = function (e, t) {
            function i(e, t) {
                return e - t
            }

            n.BufferGeometry.call(this), t = void 0 !== t ? t : 1;
            var r, o = Math.cos(n.Math.degToRad(t)), a = [0, 0], s = {}, l = ["a", "b", "c"];
            e instanceof n.BufferGeometry ? (r = new n.Geometry, r.fromBufferGeometry(e)) : r = e.clone(), r.mergeVertices(), r.computeFaceNormals();
            for (var h = r.vertices, c = r.faces, u = 0, d = c.length; d > u; u++)for (var p = c[u], f = 0; 3 > f; f++) {
                a[0] = p[l[f]], a[1] = p[l[(f + 1) % 3]], a.sort(i);
                var g = a.toString();
                void 0 === s[g] ? s[g] = {vert1: a[0], vert2: a[1], face1: u, face2: void 0} : s[g].face2 = u
            }
            var m = [];
            for (var g in s) {
                var v = s[g];
                if (void 0 === v.face2 || c[v.face1].normal.dot(c[v.face2].normal) <= o) {
                    var A = h[v.vert1];
                    m.push(A.x), m.push(A.y), m.push(A.z), A = h[v.vert2], m.push(A.x), m.push(A.y), m.push(A.z)
                }
            }
            this.addAttribute("position", new n.BufferAttribute(new Float32Array(m), 3))
        },n.EdgesGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.EdgesGeometry.prototype.constructor = n.EdgesGeometry,n.ExtrudeGeometry = function (e, t) {
            return "undefined" == typeof e ? void(e = []) : (n.Geometry.call(this), this.type = "ExtrudeGeometry", e = Array.isArray(e) ? e : [e], this.addShapeList(e, t), void this.computeFaceNormals())
        },n.ExtrudeGeometry.prototype = Object.create(n.Geometry.prototype),n.ExtrudeGeometry.prototype.constructor = n.ExtrudeGeometry,n.ExtrudeGeometry.prototype.addShapeList = function (e, t) {
            for (var i = e.length, n = 0; i > n; n++) {
                var r = e[n];
                this.addShape(r, t)
            }
        },n.ExtrudeGeometry.prototype.addShape = function (e, t) {
            function i(e, t, i) {
                return t || console.error("THREE.ExtrudeGeometry: vec does not exist"), t.clone().multiplyScalar(i).add(e)
            }

            function r(e, t, i) {
                var r, o, a = 1, s = e.x - t.x, l = e.y - t.y, h = i.x - e.x, c = i.y - e.y, u = s * s + l * l, d = s * c - l * h;
                if (Math.abs(d) > Number.EPSILON) {
                    var p = Math.sqrt(u), f = Math.sqrt(h * h + c * c), g = t.x - l / p, m = t.y + s / p, v = i.x - c / f, A = i.y + h / f, y = ((v - g) * c - (A - m) * h) / (s * c - l * h);
                    r = g + s * y - e.x, o = m + l * y - e.y;
                    var C = r * r + o * o;
                    if (2 >= C)return new n.Vector2(r, o);
                    a = Math.sqrt(C / 2)
                } else {
                    var I = !1;
                    s > Number.EPSILON ? h > Number.EPSILON && (I = !0) : s < -Number.EPSILON ? h < -Number.EPSILON && (I = !0) : Math.sign(l) === Math.sign(c) && (I = !0), I ? (r = -l, o = s, a = Math.sqrt(u)) : (r = s, o = l, a = Math.sqrt(u / 2))
                }
                return new n.Vector2(r / a, o / a)
            }

            function o() {
                if (C) {
                    var e = 0, t = H * e;
                    for (Y = 0; j > Y; Y++)G = O[Y], h(G[2] + t, G[1] + t, G[0] + t);
                    for (e = b + 2 * y, t = H * e, Y = 0; j > Y; Y++)G = O[Y], h(G[0] + t, G[1] + t, G[2] + t)
                } else {
                    for (Y = 0; j > Y; Y++)G = O[Y], h(G[2], G[1], G[0]);
                    for (Y = 0; j > Y; Y++)G = O[Y], h(G[0] + H * b, G[1] + H * b, G[2] + H * b)
                }
            }

            function a() {
                var e = 0;
                for (s(F, e), e += F.length, T = 0, S = R.length; S > T; T++)M = R[T], s(M, e), e += M.length
            }

            function s(e, t) {
                var i, n;
                for (Y = e.length; --Y >= 0;) {
                    i = Y, n = Y - 1, 0 > n && (n = e.length - 1);
                    var r = 0, o = b + 2 * y;
                    for (r = 0; o > r; r++) {
                        var a = H * r, s = H * (r + 1), l = t + i + a, h = t + n + a, u = t + n + s, d = t + i + s;
                        c(l, h, u, d, e, r, o, i, n)
                    }
                }
            }

            function l(e, t, i) {
                P.vertices.push(new n.Vector3(e, t, i))
            }

            function h(e, t, i) {
                e += _, t += _, i += _, P.faces.push(new n.Face3(e, t, i, null, null, 0));
                var r = E.generateTopUV(P, e, t, i);
                P.faceVertexUvs[0].push(r)
            }

            function c(e, t, i, r, o, a, s, l, h) {
                e += _, t += _, i += _, r += _, P.faces.push(new n.Face3(e, t, r, null, null, 1)), P.faces.push(new n.Face3(t, i, r, null, null, 1));
                var c = E.generateSideWallUV(P, e, t, i, r);
                P.faceVertexUvs[0].push([c[0], c[1], c[3]]), P.faceVertexUvs[0].push([c[1], c[2], c[3]])
            }

            var u, d, p, f, g, m = void 0 !== t.amount ? t.amount : 100, v = void 0 !== t.bevelThickness ? t.bevelThickness : 6, A = void 0 !== t.bevelSize ? t.bevelSize : v - 2, y = void 0 !== t.bevelSegments ? t.bevelSegments : 3, C = void 0 !== t.bevelEnabled ? t.bevelEnabled : !0, I = void 0 !== t.curveSegments ? t.curveSegments : 12, b = void 0 !== t.steps ? t.steps : 1, w = t.extrudePath, x = !1, E = void 0 !== t.UVGenerator ? t.UVGenerator : n.ExtrudeGeometry.WorldUVGenerator;
            w && (u = w.getSpacedPoints(b), x = !0, C = !1, d = void 0 !== t.frames ? t.frames : new n.TubeGeometry.FrenetFrames(w, b, !1), p = new n.Vector3, f = new n.Vector3, g = new n.Vector3), C || (y = 0, v = 0, A = 0);
            var M, T, S, P = this, _ = this.vertices.length, L = e.extractPoints(I), D = L.shape, R = L.holes, B = !n.ShapeUtils.isClockWise(D);
            if (B) {
                for (D = D.reverse(), T = 0, S = R.length; S > T; T++)M = R[T], n.ShapeUtils.isClockWise(M) && (R[T] = M.reverse());
                B = !1
            }
            var O = n.ShapeUtils.triangulateShape(D, R), F = D;
            for (T = 0, S = R.length; S > T; T++)M = R[T], D = D.concat(M);
            for (var k, N, U, V, z, G, H = D.length, j = O.length, W = [], Y = 0, X = F.length, Q = X - 1, Z = Y + 1; X > Y; Y++, Q++, Z++)Q === X && (Q = 0), Z === X && (Z = 0), W[Y] = r(F[Y], F[Q], F[Z]);
            var q, K = [], J = W.concat();
            for (T = 0, S = R.length; S > T; T++) {
                for (M = R[T], q = [], Y = 0, X = M.length, Q = X - 1, Z = Y + 1; X > Y; Y++, Q++, Z++)Q === X && (Q = 0), Z === X && (Z = 0), q[Y] = r(M[Y], M[Q], M[Z]);
                K.push(q), J = J.concat(q)
            }
            for (k = 0; y > k; k++) {
                for (U = k / y, V = v * (1 - U), N = A * Math.sin(U * Math.PI / 2), Y = 0, X = F.length; X > Y; Y++)z = i(F[Y], W[Y], N), l(z.x, z.y, -V);
                for (T = 0, S = R.length; S > T; T++)for (M = R[T], q = K[T], Y = 0, X = M.length; X > Y; Y++)z = i(M[Y], q[Y], N), l(z.x, z.y, -V)
            }
            for (N = A, Y = 0; H > Y; Y++)z = C ? i(D[Y], J[Y], N) : D[Y], x ? (f.copy(d.normals[0]).multiplyScalar(z.x), p.copy(d.binormals[0]).multiplyScalar(z.y), g.copy(u[0]).add(f).add(p), l(g.x, g.y, g.z)) : l(z.x, z.y, 0);
            var $;
            for ($ = 1; b >= $; $++)for (Y = 0; H > Y; Y++)z = C ? i(D[Y], J[Y], N) : D[Y], x ? (f.copy(d.normals[$]).multiplyScalar(z.x), p.copy(d.binormals[$]).multiplyScalar(z.y), g.copy(u[$]).add(f).add(p), l(g.x, g.y, g.z)) : l(z.x, z.y, m / b * $);
            for (k = y - 1; k >= 0; k--) {
                for (U = k / y, V = v * (1 - U), N = A * Math.sin(U * Math.PI / 2), Y = 0, X = F.length; X > Y; Y++)z = i(F[Y], W[Y], N), l(z.x, z.y, m + V);
                for (T = 0, S = R.length; S > T; T++)for (M = R[T], q = K[T], Y = 0, X = M.length; X > Y; Y++)z = i(M[Y], q[Y], N), x ? l(z.x, z.y + u[b - 1].y, u[b - 1].x + V) : l(z.x, z.y, m + V)
            }
            o(), a()
        },n.ExtrudeGeometry.WorldUVGenerator = {
            generateTopUV: function (e, t, i, r) {
                var o = e.vertices, a = o[t], s = o[i], l = o[r];
                return [new n.Vector2(a.x, a.y), new n.Vector2(s.x, s.y), new n.Vector2(l.x, l.y)]
            }, generateSideWallUV: function (e, t, i, r, o) {
                var a = e.vertices, s = a[t], l = a[i], h = a[r], c = a[o];
                return Math.abs(s.y - l.y) < .01 ? [new n.Vector2(s.x, 1 - s.z), new n.Vector2(l.x, 1 - l.z), new n.Vector2(h.x, 1 - h.z), new n.Vector2(c.x, 1 - c.z)] : [new n.Vector2(s.y, 1 - s.z), new n.Vector2(l.y, 1 - l.z), new n.Vector2(h.y, 1 - h.z), new n.Vector2(c.y, 1 - c.z)]
            }
        },n.ShapeGeometry = function (e, t) {
            n.Geometry.call(this), this.type = "ShapeGeometry", Array.isArray(e) === !1 && (e = [e]), this.addShapeList(e, t), this.computeFaceNormals()
        },n.ShapeGeometry.prototype = Object.create(n.Geometry.prototype),n.ShapeGeometry.prototype.constructor = n.ShapeGeometry,n.ShapeGeometry.prototype.addShapeList = function (e, t) {
            for (var i = 0, n = e.length; n > i; i++)this.addShape(e[i], t);
            return this
        },n.ShapeGeometry.prototype.addShape = function (e, t) {
            void 0 === t && (t = {});
            var i, r, o, a = void 0 !== t.curveSegments ? t.curveSegments : 12, s = t.material, l = void 0 === t.UVGenerator ? n.ExtrudeGeometry.WorldUVGenerator : t.UVGenerator, h = this.vertices.length, c = e.extractPoints(a), u = c.shape, d = c.holes, p = !n.ShapeUtils.isClockWise(u);
            if (p) {
                for (u = u.reverse(), i = 0, r = d.length; r > i; i++)o = d[i], n.ShapeUtils.isClockWise(o) && (d[i] = o.reverse());
                p = !1
            }
            var f = n.ShapeUtils.triangulateShape(u, d);
            for (i = 0, r = d.length; r > i; i++)o = d[i], u = u.concat(o);
            var g, m, v = u.length, A = f.length;
            for (i = 0; v > i; i++)g = u[i], this.vertices.push(new n.Vector3(g.x, g.y, 0));
            for (i = 0; A > i; i++) {
                m = f[i];
                var y = m[0] + h, C = m[1] + h, I = m[2] + h;
                this.faces.push(new n.Face3(y, C, I, null, null, s)), this.faceVertexUvs[0].push(l.generateTopUV(this, y, C, I))
            }
        },n.LatheBufferGeometry = function (e, t, i, r) {
            n.BufferGeometry.call(this), this.type = "LatheBufferGeometry", this.parameters = {
                points: e,
                segments: t,
                phiStart: i,
                phiLength: r
            }, t = Math.floor(t) || 12, i = i || 0, r = r || 2 * Math.PI, r = n.Math.clamp(r, 0, 2 * Math.PI);
            var o, a, s, l = (t + 1) * e.length, h = t * e.length * 2 * 3, c = new n.BufferAttribute(new (h > 65535 ? Uint32Array : Uint16Array)(h), 1), u = new n.BufferAttribute(new Float32Array(3 * l), 3), d = new n.BufferAttribute(new Float32Array(2 * l), 2), p = 0, f = 0, g = (1 / (e.length - 1), 1 / t), m = new n.Vector3, v = new n.Vector2;
            for (a = 0; t >= a; a++) {
                var A = i + a * g * r, y = Math.sin(A), C = Math.cos(A);
                for (s = 0; s <= e.length - 1; s++)m.x = e[s].x * y, m.y = e[s].y, m.z = e[s].x * C, u.setXYZ(p, m.x, m.y, m.z), v.x = a / t, v.y = s / (e.length - 1), d.setXY(p, v.x, v.y), p++
            }
            for (a = 0; t > a; a++)for (s = 0; s < e.length - 1; s++) {
                o = s + a * e.length;
                var I = o, b = o + e.length, w = o + e.length + 1, x = o + 1;
                c.setX(f, I), f++, c.setX(f, b), f++, c.setX(f, x), f++, c.setX(f, b), f++, c.setX(f, w), f++, c.setX(f, x), f++
            }
            if (this.setIndex(c), this.addAttribute("position", u), this.addAttribute("uv", d), this.computeVertexNormals(), r === 2 * Math.PI) {
                var E = this.attributes.normal.array, M = new n.Vector3, T = new n.Vector3, S = new n.Vector3;
                for (o = t * e.length * 3, a = 0, s = 0; a < e.length; a++, s += 3)M.x = E[s + 0], M.y = E[s + 1], M.z = E[s + 2], T.x = E[o + s + 0], T.y = E[o + s + 1], T.z = E[o + s + 2], S.addVectors(M, T).normalize(), E[s + 0] = E[o + s + 0] = S.x, E[s + 1] = E[o + s + 1] = S.y, E[s + 2] = E[o + s + 2] = S.z
            }
        },n.LatheBufferGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.LatheBufferGeometry.prototype.constructor = n.LatheBufferGeometry,n.LatheGeometry = function (e, t, i, r) {
            n.Geometry.call(this), this.type = "LatheGeometry", this.parameters = {
                points: e,
                segments: t,
                phiStart: i,
                phiLength: r
            }, this.fromBufferGeometry(new n.LatheBufferGeometry(e, t, i, r)), this.mergeVertices()
        },n.LatheGeometry.prototype = Object.create(n.Geometry.prototype),n.LatheGeometry.prototype.constructor = n.LatheGeometry,n.PlaneGeometry = function (e, t, i, r) {
            n.Geometry.call(this), this.type = "PlaneGeometry", this.parameters = {
                width: e,
                height: t,
                widthSegments: i,
                heightSegments: r
            }, this.fromBufferGeometry(new n.PlaneBufferGeometry(e, t, i, r))
        },n.PlaneGeometry.prototype = Object.create(n.Geometry.prototype),n.PlaneGeometry.prototype.constructor = n.PlaneGeometry,n.PlaneBufferGeometry = function (e, t, i, r) {
            n.BufferGeometry.call(this), this.type = "PlaneBufferGeometry", this.parameters = {
                width: e,
                height: t,
                widthSegments: i,
                heightSegments: r
            };
            for (var o = e / 2, a = t / 2, s = Math.floor(i) || 1, l = Math.floor(r) || 1, h = s + 1, c = l + 1, u = e / s, d = t / l, p = new Float32Array(h * c * 3), f = new Float32Array(h * c * 3), g = new Float32Array(h * c * 2), m = 0, v = 0, A = 0; c > A; A++)for (var y = A * d - a, C = 0; h > C; C++) {
                var I = C * u - o;
                p[m] = I, p[m + 1] = -y, f[m + 2] = 1, g[v] = C / s, g[v + 1] = 1 - A / l, m += 3, v += 2
            }
            m = 0;
            for (var b = new (p.length / 3 > 65535 ? Uint32Array : Uint16Array)(s * l * 6), A = 0; l > A; A++)for (var C = 0; s > C; C++) {
                var w = C + h * A, x = C + h * (A + 1), E = C + 1 + h * (A + 1), M = C + 1 + h * A;
                b[m] = w, b[m + 1] = x, b[m + 2] = M, b[m + 3] = x, b[m + 4] = E, b[m + 5] = M, m += 6
            }
            this.setIndex(new n.BufferAttribute(b, 1)), this.addAttribute("position", new n.BufferAttribute(p, 3)), this.addAttribute("normal", new n.BufferAttribute(f, 3)), this.addAttribute("uv", new n.BufferAttribute(g, 2))
        },n.PlaneBufferGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.PlaneBufferGeometry.prototype.constructor = n.PlaneBufferGeometry,n.RingBufferGeometry = function (e, t, i, r, o, a) {
            n.BufferGeometry.call(this), this.type = "RingBufferGeometry", this.parameters = {
                innerRadius: e,
                outerRadius: t,
                thetaSegments: i,
                phiSegments: r,
                thetaStart: o,
                thetaLength: a
            }, e = e || 20, t = t || 50, o = void 0 !== o ? o : 0, a = void 0 !== a ? a : 2 * Math.PI, i = void 0 !== i ? Math.max(3, i) : 8, r = void 0 !== r ? Math.max(1, r) : 1;
            var s, l, h, c = (i + 1) * (r + 1), u = i * r * 2 * 3, d = new n.BufferAttribute(new (u > 65535 ? Uint32Array : Uint16Array)(u), 1), p = new n.BufferAttribute(new Float32Array(3 * c), 3), f = new n.BufferAttribute(new Float32Array(3 * c), 3), g = new n.BufferAttribute(new Float32Array(2 * c), 2), m = 0, v = 0, A = e, y = (t - e) / r, C = new n.Vector3, I = new n.Vector2;
            for (l = 0; r >= l; l++) {
                for (h = 0; i >= h; h++)s = o + h / i * a, C.x = A * Math.cos(s), C.y = A * Math.sin(s), p.setXYZ(m, C.x, C.y, C.z), f.setXYZ(m, 0, 0, 1), I.x = (C.x / t + 1) / 2, I.y = (C.y / t + 1) / 2, g.setXY(m, I.x, I.y), m++;
                A += y
            }
            for (l = 0; r > l; l++) {
                var b = l * (i + 1);
                for (h = 0; i > h; h++) {
                    s = h + b;
                    var w = s, x = s + i + 1, E = s + i + 2, M = s + 1;
                    d.setX(v, w), v++, d.setX(v, x), v++, d.setX(v, E), v++, d.setX(v, w), v++, d.setX(v, E), v++, d.setX(v, M), v++
                }
            }
            this.setIndex(d), this.addAttribute("position", p), this.addAttribute("normal", f), this.addAttribute("uv", g)
        },n.RingBufferGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.RingBufferGeometry.prototype.constructor = n.RingBufferGeometry,n.RingGeometry = function (e, t, i, r, o, a) {
            n.Geometry.call(this), this.type = "RingGeometry", this.parameters = {
                innerRadius: e,
                outerRadius: t,
                thetaSegments: i,
                phiSegments: r,
                thetaStart: o,
                thetaLength: a
            }, this.fromBufferGeometry(new n.RingBufferGeometry(e, t, i, r, o, a))
        },n.RingGeometry.prototype = Object.create(n.Geometry.prototype),n.RingGeometry.prototype.constructor = n.RingGeometry,n.SphereGeometry = function (e, t, i, r, o, a, s) {
            n.Geometry.call(this), this.type = "SphereGeometry", this.parameters = {
                radius: e,
                widthSegments: t,
                heightSegments: i,
                phiStart: r,
                phiLength: o,
                thetaStart: a,
                thetaLength: s
            }, this.fromBufferGeometry(new n.SphereBufferGeometry(e, t, i, r, o, a, s))
        },n.SphereGeometry.prototype = Object.create(n.Geometry.prototype),n.SphereGeometry.prototype.constructor = n.SphereGeometry,n.SphereBufferGeometry = function (e, t, i, r, o, a, s) {
            n.BufferGeometry.call(this), this.type = "SphereBufferGeometry", this.parameters = {
                radius: e,
                widthSegments: t,
                heightSegments: i,
                phiStart: r,
                phiLength: o,
                thetaStart: a,
                thetaLength: s
            }, e = e || 50, t = Math.max(3, Math.floor(t) || 8), i = Math.max(2, Math.floor(i) || 6), r = void 0 !== r ? r : 0, o = void 0 !== o ? o : 2 * Math.PI, a = void 0 !== a ? a : 0, s = void 0 !== s ? s : Math.PI;
            for (var l = a + s, h = (t + 1) * (i + 1), c = new n.BufferAttribute(new Float32Array(3 * h), 3), u = new n.BufferAttribute(new Float32Array(3 * h), 3), d = new n.BufferAttribute(new Float32Array(2 * h), 2), p = 0, f = [], g = new n.Vector3, m = 0; i >= m; m++) {
                for (var v = [], A = m / i, y = 0; t >= y; y++) {
                    var C = y / t, I = -e * Math.cos(r + C * o) * Math.sin(a + A * s), b = e * Math.cos(a + A * s), w = e * Math.sin(r + C * o) * Math.sin(a + A * s);
                    g.set(I, b, w).normalize(), c.setXYZ(p, I, b, w), u.setXYZ(p, g.x, g.y, g.z), d.setXY(p, C, 1 - A), v.push(p), p++
                }
                f.push(v)
            }
            for (var x = [], m = 0; i > m; m++)for (var y = 0; t > y; y++) {
                var E = f[m][y + 1], M = f[m][y], T = f[m + 1][y], S = f[m + 1][y + 1];
                (0 !== m || a > 0) && x.push(E, M, S), (m !== i - 1 || l < Math.PI) && x.push(M, T, S)
            }
            this.setIndex(new (c.count > 65535 ? n.Uint32Attribute : n.Uint16Attribute)(x, 1)), this.addAttribute("position", c), this.addAttribute("normal", u), this.addAttribute("uv", d), this.boundingSphere = new n.Sphere(new n.Vector3, e)
        },n.SphereBufferGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.SphereBufferGeometry.prototype.constructor = n.SphereBufferGeometry,n.TextGeometry = function (e, t) {
            t = t || {};
            var i = t.font;
            if (i instanceof n.Font == !1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."), new n.Geometry;
            var r = i.generateShapes(e, t.size, t.curveSegments);
            t.amount = void 0 !== t.height ? t.height : 50, void 0 === t.bevelThickness && (t.bevelThickness = 10), void 0 === t.bevelSize && (t.bevelSize = 8), void 0 === t.bevelEnabled && (t.bevelEnabled = !1), n.ExtrudeGeometry.call(this, r, t), this.type = "TextGeometry"
        },n.TextGeometry.prototype = Object.create(n.ExtrudeGeometry.prototype),n.TextGeometry.prototype.constructor = n.TextGeometry,n.TorusBufferGeometry = function (e, t, i, r, o) {
            n.BufferGeometry.call(this), this.type = "TorusBufferGeometry", this.parameters = {
                radius: e,
                tube: t,
                radialSegments: i,
                tubularSegments: r,
                arc: o
            }, e = e || 100, t = t || 40, i = Math.floor(i) || 8, r = Math.floor(r) || 6, o = o || 2 * Math.PI;
            var a, s, l = (i + 1) * (r + 1), h = i * r * 2 * 3, c = new (h > 65535 ? Uint32Array : Uint16Array)(h), u = new Float32Array(3 * l), d = new Float32Array(3 * l), p = new Float32Array(2 * l), f = 0, g = 0, m = 0, v = new n.Vector3, A = new n.Vector3, y = new n.Vector3;
            for (a = 0; i >= a; a++)for (s = 0; r >= s; s++) {
                var C = s / r * o, I = a / i * Math.PI * 2;
                A.x = (e + t * Math.cos(I)) * Math.cos(C), A.y = (e + t * Math.cos(I)) * Math.sin(C), A.z = t * Math.sin(I), u[f] = A.x, u[f + 1] = A.y, u[f + 2] = A.z, v.x = e * Math.cos(C), v.y = e * Math.sin(C), y.subVectors(A, v).normalize(), d[f] = y.x, d[f + 1] = y.y, d[f + 2] = y.z, p[g] = s / r, p[g + 1] = a / i, f += 3, g += 2
            }
            for (a = 1; i >= a; a++)for (s = 1; r >= s; s++) {
                var b = (r + 1) * a + s - 1, w = (r + 1) * (a - 1) + s - 1, x = (r + 1) * (a - 1) + s, E = (r + 1) * a + s;
                c[m] = b, c[m + 1] = w, c[m + 2] = E, c[m + 3] = w, c[m + 4] = x, c[m + 5] = E, m += 6
            }
            this.setIndex(new n.BufferAttribute(c, 1)), this.addAttribute("position", new n.BufferAttribute(u, 3)), this.addAttribute("normal", new n.BufferAttribute(d, 3)), this.addAttribute("uv", new n.BufferAttribute(p, 2))
        },n.TorusBufferGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.TorusBufferGeometry.prototype.constructor = n.TorusBufferGeometry,n.TorusGeometry = function (e, t, i, r, o) {
            n.Geometry.call(this), this.type = "TorusGeometry", this.parameters = {
                radius: e,
                tube: t,
                radialSegments: i,
                tubularSegments: r,
                arc: o
            }, this.fromBufferGeometry(new n.TorusBufferGeometry(e, t, i, r, o))
        },n.TorusGeometry.prototype = Object.create(n.Geometry.prototype),n.TorusGeometry.prototype.constructor = n.TorusGeometry,n.TorusKnotBufferGeometry = function (e, t, i, r, o, a) {
            function s(e, t, i, n, r) {
                var o = Math.cos(e), a = Math.sin(e), s = i / t * e, l = Math.cos(s);
                r.x = n * (2 + l) * .5 * o, r.y = n * (2 + l) * a * .5, r.z = n * Math.sin(s) * .5
            }

            n.BufferGeometry.call(this), this.type = "TorusKnotBufferGeometry", this.parameters = {
                radius: e,
                tube: t,
                tubularSegments: i,
                radialSegments: r,
                p: o,
                q: a
            }, e = e || 100, t = t || 40, i = Math.floor(i) || 64, r = Math.floor(r) || 8, o = o || 2, a = a || 3;
            var l, h, c = (r + 1) * (i + 1), u = r * i * 2 * 3, d = new n.BufferAttribute(new (u > 65535 ? Uint32Array : Uint16Array)(u), 1), p = new n.BufferAttribute(new Float32Array(3 * c), 3), f = new n.BufferAttribute(new Float32Array(3 * c), 3), g = new n.BufferAttribute(new Float32Array(2 * c), 2), m = 0, v = 0, A = new n.Vector3, y = new n.Vector3, C = new n.Vector2, I = new n.Vector3, b = new n.Vector3, w = new n.Vector3, x = new n.Vector3, E = new n.Vector3;
            for (l = 0; i >= l; ++l) {
                var M = l / i * o * Math.PI * 2;
                for (s(M, o, a, e, I), s(M + .01, o, a, e, b), x.subVectors(b, I), E.addVectors(b, I), w.crossVectors(x, E), E.crossVectors(w, x), w.normalize(), E.normalize(), h = 0; r >= h; ++h) {
                    var T = h / r * Math.PI * 2, S = -t * Math.cos(T), P = t * Math.sin(T);
                    A.x = I.x + (S * E.x + P * w.x), A.y = I.y + (S * E.y + P * w.y), A.z = I.z + (S * E.z + P * w.z), p.setXYZ(m, A.x, A.y, A.z), y.subVectors(A, I).normalize(), f.setXYZ(m, y.x, y.y, y.z), C.x = l / i, C.y = h / r, g.setXY(m, C.x, C.y), m++
                }
            }
            for (h = 1; i >= h; h++)for (l = 1; r >= l; l++) {
                var _ = (r + 1) * (h - 1) + (l - 1), L = (r + 1) * h + (l - 1), D = (r + 1) * h + l, R = (r + 1) * (h - 1) + l;
                d.setX(v, _), v++, d.setX(v, L), v++, d.setX(v, R), v++, d.setX(v, L), v++, d.setX(v, D), v++, d.setX(v, R), v++
            }
            this.setIndex(d), this.addAttribute("position", p), this.addAttribute("normal", f), this.addAttribute("uv", g)
        },n.TorusKnotBufferGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.TorusKnotBufferGeometry.prototype.constructor = n.TorusKnotBufferGeometry,n.TorusKnotGeometry = function (e, t, i, r, o, a, s) {
            n.Geometry.call(this), this.type = "TorusKnotGeometry", this.parameters = {
                radius: e,
                tube: t,
                tubularSegments: i,
                radialSegments: r,
                p: o,
                q: a
            }, void 0 !== s && console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."), this.fromBufferGeometry(new n.TorusKnotBufferGeometry(e, t, i, r, o, a)), this.mergeVertices()
        },n.TorusKnotGeometry.prototype = Object.create(n.Geometry.prototype),n.TorusKnotGeometry.prototype.constructor = n.TorusKnotGeometry,n.TubeGeometry = function (e, t, i, r, o, a) {
            function s(e, t, i) {
                return _.vertices.push(new n.Vector3(e, t, i)) - 1
            }

            n.Geometry.call(this), this.type = "TubeGeometry", this.parameters = {
                path: e,
                segments: t,
                radius: i,
                radialSegments: r,
                closed: o,
                taper: a
            }, t = t || 64, i = i || 1, r = r || 8, o = o || !1, a = a || n.TubeGeometry.NoTaper;
            var l, h, c, u, d, p, f, g, m, v, A, y, C, I, b, w, x, E, M, T, S, P = [], _ = this, L = t + 1, D = new n.Vector3, R = new n.TubeGeometry.FrenetFrames(e, t, o), B = R.tangents, O = R.normals, F = R.binormals;
            for (this.tangents = B, this.normals = O, this.binormals = F, v = 0; L > v; v++)for (P[v] = [], u = v / (L - 1), m = e.getPointAt(u), l = B[v], h = O[v], c = F[v], p = i * a(u), A = 0; r > A; A++)d = A / r * 2 * Math.PI, f = -p * Math.cos(d), g = p * Math.sin(d), D.copy(m), D.x += f * h.x + g * c.x, D.y += f * h.y + g * c.y, D.z += f * h.z + g * c.z, P[v][A] = s(D.x, D.y, D.z);
            for (v = 0; t > v; v++)for (A = 0; r > A; A++)y = o ? (v + 1) % t : v + 1, C = (A + 1) % r, I = P[v][A], b = P[y][A], w = P[y][C], x = P[v][C], E = new n.Vector2(v / t, A / r), M = new n.Vector2((v + 1) / t, A / r), T = new n.Vector2((v + 1) / t, (A + 1) / r), S = new n.Vector2(v / t, (A + 1) / r), this.faces.push(new n.Face3(I, b, x)), this.faceVertexUvs[0].push([E, M, S]), this.faces.push(new n.Face3(b, w, x)), this.faceVertexUvs[0].push([M.clone(), T, S.clone()]);
            this.computeFaceNormals(), this.computeVertexNormals()
        },n.TubeGeometry.prototype = Object.create(n.Geometry.prototype),n.TubeGeometry.prototype.constructor = n.TubeGeometry,n.TubeGeometry.NoTaper = function (e) {
            return 1
        },n.TubeGeometry.SinusoidalTaper = function (e) {
            return Math.sin(Math.PI * e)
        },n.TubeGeometry.FrenetFrames = function (e, t, i) {
            function r() {
                f[0] = new n.Vector3, g[0] = new n.Vector3, a = Number.MAX_VALUE, s = Math.abs(p[0].x), l = Math.abs(p[0].y), h = Math.abs(p[0].z), a >= s && (a = s, d.set(1, 0, 0)), a >= l && (a = l, d.set(0, 1, 0)), a >= h && d.set(0, 0, 1), m.crossVectors(p[0], d).normalize(), f[0].crossVectors(p[0], m), g[0].crossVectors(p[0], f[0])
            }

            var o, a, s, l, h, c, u, d = new n.Vector3, p = [], f = [], g = [], m = new n.Vector3, v = new n.Matrix4, A = t + 1;
            for (this.tangents = p, this.normals = f, this.binormals = g, c = 0; A > c; c++)u = c / (A - 1), p[c] = e.getTangentAt(u), p[c].normalize();
            for (r(), c = 1; A > c; c++)f[c] = f[c - 1].clone(), g[c] = g[c - 1].clone(), m.crossVectors(p[c - 1], p[c]), m.length() > Number.EPSILON && (m.normalize(), o = Math.acos(n.Math.clamp(p[c - 1].dot(p[c]), -1, 1)), f[c].applyMatrix4(v.makeRotationAxis(m, o))), g[c].crossVectors(p[c], f[c]);
            if (i)for (o = Math.acos(n.Math.clamp(f[0].dot(f[A - 1]), -1, 1)), o /= A - 1, p[0].dot(m.crossVectors(f[0], f[A - 1])) > 0 && (o = -o), c = 1; A > c; c++)f[c].applyMatrix4(v.makeRotationAxis(p[c], o * c)), g[c].crossVectors(p[c], f[c])
        },n.PolyhedronGeometry = function (e, t, i, r) {
            function o(e) {
                var t = e.normalize().clone();
                t.index = u.vertices.push(t) - 1;
                var i = l(e) / 2 / Math.PI + .5, r = h(e) / Math.PI + .5;
                return t.uv = new n.Vector2(i, 1 - r), t
            }

            function a(e, t, i, r) {
                var o = new n.Face3(e.index, t.index, i.index, [e.clone(), t.clone(), i.clone()], void 0, r);
                u.faces.push(o), C.copy(e).add(t).add(i).divideScalar(3);
                var a = l(C);
                u.faceVertexUvs[0].push([c(e.uv, e, a), c(t.uv, t, a), c(i.uv, i, a)])
            }

            function s(e, t) {
                for (var i = Math.pow(2, t), n = o(u.vertices[e.a]), r = o(u.vertices[e.b]), s = o(u.vertices[e.c]), l = [], h = e.materialIndex, c = 0; i >= c; c++) {
                    l[c] = [];
                    for (var d = o(n.clone().lerp(s, c / i)), p = o(r.clone().lerp(s, c / i)), f = i - c, g = 0; f >= g; g++)0 === g && c === i ? l[c][g] = d : l[c][g] = o(d.clone().lerp(p, g / f))
                }
                for (var c = 0; i > c; c++)for (var g = 0; 2 * (i - c) - 1 > g; g++) {
                    var m = Math.floor(g / 2);
                    g % 2 === 0 ? a(l[c][m + 1], l[c + 1][m], l[c][m], h) : a(l[c][m + 1], l[c + 1][m + 1], l[c + 1][m], h)
                }
            }

            function l(e) {
                return Math.atan2(e.z, -e.x)
            }

            function h(e) {
                return Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z))
            }

            function c(e, t, i) {
                return 0 > i && 1 === e.x && (e = new n.Vector2(e.x - 1, e.y)), 0 === t.x && 0 === t.z && (e = new n.Vector2(i / 2 / Math.PI + .5, e.y)), e.clone()
            }

            n.Geometry.call(this), this.type = "PolyhedronGeometry", this.parameters = {
                vertices: e,
                indices: t,
                radius: i,
                detail: r
            }, i = i || 1, r = r || 0;
            for (var u = this, d = 0, p = e.length; p > d; d += 3)o(new n.Vector3(e[d], e[d + 1], e[d + 2]));
            for (var f = this.vertices, g = [], d = 0, m = 0, p = t.length; p > d; d += 3, m++) {
                var v = f[t[d]], A = f[t[d + 1]], y = f[t[d + 2]];
                g[m] = new n.Face3(v.index, A.index, y.index, [v.clone(), A.clone(), y.clone()], void 0, m)
            }
            for (var C = new n.Vector3, d = 0, p = g.length; p > d; d++)s(g[d], r);
            for (var d = 0, p = this.faceVertexUvs[0].length; p > d; d++) {
                var I = this.faceVertexUvs[0][d], b = I[0].x, w = I[1].x, x = I[2].x, E = Math.max(b, w, x), M = Math.min(b, w, x);
                E > .9 && .1 > M && (.2 > b && (I[0].x += 1), .2 > w && (I[1].x += 1), .2 > x && (I[2].x += 1))
            }
            for (var d = 0, p = this.vertices.length; p > d; d++)this.vertices[d].multiplyScalar(i);
            this.mergeVertices(), this.computeFaceNormals(), this.boundingSphere = new n.Sphere(new n.Vector3, i)
        },n.PolyhedronGeometry.prototype = Object.create(n.Geometry.prototype),n.PolyhedronGeometry.prototype.constructor = n.PolyhedronGeometry,n.DodecahedronGeometry = function (e, t) {
            var i = (1 + Math.sqrt(5)) / 2, r = 1 / i, o = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -r, -i, 0, -r, i, 0, r, -i, 0, r, i, -r, -i, 0, -r, i, 0, r, -i, 0, r, i, 0, -i, 0, -r, i, 0, -r, -i, 0, r, i, 0, r], a = [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9];
            n.PolyhedronGeometry.call(this, o, a, e, t), this.type = "DodecahedronGeometry", this.parameters = {
                radius: e,
                detail: t
            }
        },n.DodecahedronGeometry.prototype = Object.create(n.PolyhedronGeometry.prototype),n.DodecahedronGeometry.prototype.constructor = n.DodecahedronGeometry,n.IcosahedronGeometry = function (e, t) {
            var i = (1 + Math.sqrt(5)) / 2, r = [-1, i, 0, 1, i, 0, -1, -i, 0, 1, -i, 0, 0, -1, i, 0, 1, i, 0, -1, -i, 0, 1, -i, i, 0, -1, i, 0, 1, -i, 0, -1, -i, 0, 1], o = [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1];
            n.PolyhedronGeometry.call(this, r, o, e, t), this.type = "IcosahedronGeometry", this.parameters = {
                radius: e,
                detail: t
            }
        },n.IcosahedronGeometry.prototype = Object.create(n.PolyhedronGeometry.prototype),n.IcosahedronGeometry.prototype.constructor = n.IcosahedronGeometry,n.OctahedronGeometry = function (e, t) {
            var i = [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1], r = [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2];
            n.PolyhedronGeometry.call(this, i, r, e, t), this.type = "OctahedronGeometry", this.parameters = {
                radius: e,
                detail: t
            }
        },n.OctahedronGeometry.prototype = Object.create(n.PolyhedronGeometry.prototype),n.OctahedronGeometry.prototype.constructor = n.OctahedronGeometry,n.TetrahedronGeometry = function (e, t) {
            var i = [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1], r = [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1];
            n.PolyhedronGeometry.call(this, i, r, e, t), this.type = "TetrahedronGeometry", this.parameters = {
                radius: e,
                detail: t
            }
        },n.TetrahedronGeometry.prototype = Object.create(n.PolyhedronGeometry.prototype),n.TetrahedronGeometry.prototype.constructor = n.TetrahedronGeometry,n.ParametricGeometry = function (e, t, i) {
            n.Geometry.call(this), this.type = "ParametricGeometry", this.parameters = {func: e, slices: t, stacks: i};
            var r, o, a, s, l, h = this.vertices, c = this.faces, u = this.faceVertexUvs[0], d = t + 1;
            for (r = 0; i >= r; r++)for (l = r / i, o = 0; t >= o; o++)s = o / t, a = e(s, l), h.push(a);
            var p, f, g, m, v, A, y, C;
            for (r = 0; i > r; r++)for (o = 0; t > o; o++)p = r * d + o, f = r * d + o + 1, g = (r + 1) * d + o + 1, m = (r + 1) * d + o, v = new n.Vector2(o / t, r / i), A = new n.Vector2((o + 1) / t, r / i), y = new n.Vector2((o + 1) / t, (r + 1) / i), C = new n.Vector2(o / t, (r + 1) / i), c.push(new n.Face3(p, f, m)), u.push([v, A, C]), c.push(new n.Face3(f, g, m)), u.push([A.clone(), y, C.clone()]);
            this.computeFaceNormals(), this.computeVertexNormals()
        },n.ParametricGeometry.prototype = Object.create(n.Geometry.prototype),n.ParametricGeometry.prototype.constructor = n.ParametricGeometry,n.WireframeGeometry = function (e) {
            function t(e, t) {
                return e - t
            }

            n.BufferGeometry.call(this);
            var i = [0, 0], r = {}, o = ["a", "b", "c"];
            if (e instanceof n.Geometry) {
                for (var a = e.vertices, s = e.faces, l = 0, h = new Uint32Array(6 * s.length), c = 0, u = s.length; u > c; c++)for (var d = s[c], p = 0; 3 > p; p++) {
                    i[0] = d[o[p]], i[1] = d[o[(p + 1) % 3]], i.sort(t);
                    var f = i.toString();
                    void 0 === r[f] && (h[2 * l] = i[0], h[2 * l + 1] = i[1], r[f] = !0, l++)
                }
                for (var g = new Float32Array(2 * l * 3), c = 0, u = l; u > c; c++)for (var p = 0; 2 > p; p++) {
                    var m = a[h[2 * c + p]], v = 6 * c + 3 * p;
                    g[v + 0] = m.x, g[v + 1] = m.y, g[v + 2] = m.z
                }
                this.addAttribute("position", new n.BufferAttribute(g, 3))
            } else if (e instanceof n.BufferGeometry)if (null !== e.index) {
                var A = e.index.array, a = e.attributes.position, y = e.groups, l = 0;
                0 === y.length && e.addGroup(0, A.length);
                for (var h = new Uint32Array(2 * A.length), C = 0, I = y.length; I > C; ++C)for (var b = y[C], w = b.start, x = b.count, c = w, E = w + x; E > c; c += 3)for (var p = 0; 3 > p; p++) {
                    i[0] = A[c + p], i[1] = A[c + (p + 1) % 3], i.sort(t);
                    var f = i.toString();
                    void 0 === r[f] && (h[2 * l] = i[0], h[2 * l + 1] = i[1], r[f] = !0, l++)
                }
                for (var g = new Float32Array(2 * l * 3), c = 0, u = l; u > c; c++)for (var p = 0; 2 > p; p++) {
                    var v = 6 * c + 3 * p, M = h[2 * c + p];
                    g[v + 0] = a.getX(M), g[v + 1] = a.getY(M), g[v + 2] = a.getZ(M)
                }
                this.addAttribute("position", new n.BufferAttribute(g, 3))
            } else {
                for (var a = e.attributes.position.array, l = a.length / 3, T = l / 3, g = new Float32Array(2 * l * 3), c = 0, u = T; u > c; c++)for (var p = 0; 3 > p; p++) {
                    var v = 18 * c + 6 * p, S = 9 * c + 3 * p;
                    g[v + 0] = a[S], g[v + 1] = a[S + 1], g[v + 2] = a[S + 2];
                    var M = 9 * c + 3 * ((p + 1) % 3);
                    g[v + 3] = a[M], g[v + 4] = a[M + 1], g[v + 5] = a[M + 2]
                }
                this.addAttribute("position", new n.BufferAttribute(g, 3))
            }
        },n.WireframeGeometry.prototype = Object.create(n.BufferGeometry.prototype),n.WireframeGeometry.prototype.constructor = n.WireframeGeometry,n.AxisHelper = function (e) {
            e = e || 1;
            var t = new Float32Array([0, 0, 0, e, 0, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 0, e]), i = new Float32Array([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1]), r = new n.BufferGeometry;
            r.addAttribute("position", new n.BufferAttribute(t, 3)), r.addAttribute("color", new n.BufferAttribute(i, 3));
            var o = new n.LineBasicMaterial({vertexColors: n.VertexColors});
            n.LineSegments.call(this, r, o)
        },n.AxisHelper.prototype = Object.create(n.LineSegments.prototype),n.AxisHelper.prototype.constructor = n.AxisHelper,n.ArrowHelper = function () {
            var e = new n.Geometry;
            e.vertices.push(new n.Vector3(0, 0, 0), new n.Vector3(0, 1, 0));
            var t = new n.CylinderGeometry(0, .5, 1, 5, 1);
            return t.translate(0, -.5, 0), function (i, r, o, a, s, l) {
                n.Object3D.call(this), void 0 === a && (a = 16776960), void 0 === o && (o = 1), void 0 === s && (s = .2 * o), void 0 === l && (l = .2 * s), this.position.copy(r), this.line = new n.Line(e, new n.LineBasicMaterial({color: a})), this.line.matrixAutoUpdate = !1, this.add(this.line), this.cone = new n.Mesh(t, new n.MeshBasicMaterial({color: a})), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(i), this.setLength(o, s, l)
            }
        }(),n.ArrowHelper.prototype = Object.create(n.Object3D.prototype),n.ArrowHelper.prototype.constructor = n.ArrowHelper,n.ArrowHelper.prototype.setDirection = function () {
            var e, t = new n.Vector3;
            return function (i) {
                i.y > .99999 ? this.quaternion.set(0, 0, 0, 1) : i.y < -.99999 ? this.quaternion.set(1, 0, 0, 0) : (t.set(i.z, 0, -i.x).normalize(), e = Math.acos(i.y), this.quaternion.setFromAxisAngle(t, e))
            }
        }(),n.ArrowHelper.prototype.setLength = function (e, t, i) {
            void 0 === t && (t = .2 * e), void 0 === i && (i = .2 * t), this.line.scale.set(1, Math.max(0, e - t), 1), this.line.updateMatrix(), this.cone.scale.set(i, t, i), this.cone.position.y = e, this.cone.updateMatrix()
        },n.ArrowHelper.prototype.setColor = function (e) {
            this.line.material.color.set(e), this.cone.material.color.set(e)
        },n.BoxHelper = function (e) {
            var t = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]), i = new Float32Array(24), r = new n.BufferGeometry;
            r.setIndex(new n.BufferAttribute(t, 1)), r.addAttribute("position", new n.BufferAttribute(i, 3)), n.LineSegments.call(this, r, new n.LineBasicMaterial({color: 16776960})), void 0 !== e && this.update(e)
        },n.BoxHelper.prototype = Object.create(n.LineSegments.prototype),n.BoxHelper.prototype.constructor = n.BoxHelper,n.BoxHelper.prototype.update = function () {
            var e = new n.Box3;
            return function (t) {
                if (e.setFromObject(t), !e.isEmpty()) {
                    var i = e.min, n = e.max, r = this.geometry.attributes.position, o = r.array;
                    o[0] = n.x, o[1] = n.y, o[2] = n.z, o[3] = i.x, o[4] = n.y, o[5] = n.z, o[6] = i.x, o[7] = i.y, o[8] = n.z, o[9] = n.x, o[10] = i.y, o[11] = n.z, o[12] = n.x, o[13] = n.y, o[14] = i.z, o[15] = i.x, o[16] = n.y, o[17] = i.z, o[18] = i.x, o[19] = i.y, o[20] = i.z, o[21] = n.x, o[22] = i.y, o[23] = i.z, r.needsUpdate = !0, this.geometry.computeBoundingSphere()
                }
            }
        }(),n.BoundingBoxHelper = function (e, t) {
            var i = void 0 !== t ? t : 8947848;
            this.object = e, this.box = new n.Box3, n.Mesh.call(this, new n.BoxGeometry(1, 1, 1), new n.MeshBasicMaterial({
                color: i,
                wireframe: !0
            }))
        },n.BoundingBoxHelper.prototype = Object.create(n.Mesh.prototype),n.BoundingBoxHelper.prototype.constructor = n.BoundingBoxHelper,n.BoundingBoxHelper.prototype.update = function () {
            this.box.setFromObject(this.object), this.box.size(this.scale), this.box.center(this.position)
        },n.CameraHelper = function (e) {
            function t(e, t, n) {
                i(e, n), i(t, n)
            }

            function i(e, t) {
                r.vertices.push(new n.Vector3), r.colors.push(new n.Color(t)), void 0 === a[e] && (a[e] = []), a[e].push(r.vertices.length - 1)
            }

            var r = new n.Geometry, o = new n.LineBasicMaterial({
                color: 16777215,
                vertexColors: n.FaceColors
            }), a = {}, s = 16755200, l = 16711680, h = 43775, c = 16777215, u = 3355443;
            t("n1", "n2", s), t("n2", "n4", s), t("n4", "n3", s), t("n3", "n1", s), t("f1", "f2", s), t("f2", "f4", s), t("f4", "f3", s), t("f3", "f1", s), t("n1", "f1", s), t("n2", "f2", s), t("n3", "f3", s), t("n4", "f4", s), t("p", "n1", l), t("p", "n2", l), t("p", "n3", l), t("p", "n4", l), t("u1", "u2", h), t("u2", "u3", h), t("u3", "u1", h), t("c", "t", c), t("p", "c", u), t("cn1", "cn2", u), t("cn3", "cn4", u), t("cf1", "cf2", u), t("cf3", "cf4", u), n.LineSegments.call(this, r, o), this.camera = e, this.camera.updateProjectionMatrix(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = a, this.update()
        },n.CameraHelper.prototype = Object.create(n.LineSegments.prototype),n.CameraHelper.prototype.constructor = n.CameraHelper,n.CameraHelper.prototype.update = function () {
            function e(e, n, a, s) {
                r.set(n, a, s).unproject(o);
                var l = i[e];
                if (void 0 !== l)for (var h = 0, c = l.length; c > h; h++)t.vertices[l[h]].copy(r)
            }

            var t, i, r = new n.Vector3, o = new n.Camera;
            return function () {
                t = this.geometry, i = this.pointMap;
                var n = 1, r = 1;
                o.projectionMatrix.copy(this.camera.projectionMatrix), e("c", 0, 0, -1), e("t", 0, 0, 1), e("n1", -n, -r, -1), e("n2", n, -r, -1), e("n3", -n, r, -1), e("n4", n, r, -1), e("f1", -n, -r, 1), e("f2", n, -r, 1), e("f3", -n, r, 1), e("f4", n, r, 1), e("u1", .7 * n, 1.1 * r, -1), e("u2", .7 * -n, 1.1 * r, -1), e("u3", 0, 2 * r, -1), e("cf1", -n, 0, 1), e("cf2", n, 0, 1), e("cf3", 0, -r, 1), e("cf4", 0, r, 1), e("cn1", -n, 0, -1), e("cn2", n, 0, -1), e("cn3", 0, -r, -1), e("cn4", 0, r, -1), t.verticesNeedUpdate = !0
            }
        }(),n.DirectionalLightHelper = function (e, t) {
            n.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, t = t || 1;
            var i = new n.Geometry;
            i.vertices.push(new n.Vector3(-t, t, 0), new n.Vector3(t, t, 0), new n.Vector3(t, -t, 0), new n.Vector3(-t, -t, 0), new n.Vector3(-t, t, 0));
            var r = new n.LineBasicMaterial({fog: !1});
            r.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.lightPlane = new n.Line(i, r), this.add(this.lightPlane), i = new n.Geometry, i.vertices.push(new n.Vector3, new n.Vector3), r = new n.LineBasicMaterial({fog: !1}), r.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine = new n.Line(i, r), this.add(this.targetLine), this.update()
        },n.DirectionalLightHelper.prototype = Object.create(n.Object3D.prototype),n.DirectionalLightHelper.prototype.constructor = n.DirectionalLightHelper,n.DirectionalLightHelper.prototype.dispose = function () {
            this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), this.targetLine.material.dispose()
        },n.DirectionalLightHelper.prototype.update = function () {
            var e = new n.Vector3, t = new n.Vector3, i = new n.Vector3;
            return function () {
                e.setFromMatrixPosition(this.light.matrixWorld), t.setFromMatrixPosition(this.light.target.matrixWorld), i.subVectors(t, e), this.lightPlane.lookAt(i), this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine.geometry.vertices[1].copy(i), this.targetLine.geometry.verticesNeedUpdate = !0, this.targetLine.material.color.copy(this.lightPlane.material.color)
            }
        }(),n.EdgesHelper = function (e, t, i) {
            var r = void 0 !== t ? t : 16777215;
            n.LineSegments.call(this, new n.EdgesGeometry(e.geometry, i), new n.LineBasicMaterial({color: r})), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1
        },n.EdgesHelper.prototype = Object.create(n.LineSegments.prototype),n.EdgesHelper.prototype.constructor = n.EdgesHelper,n.FaceNormalsHelper = function (e, t, i, r) {
            this.object = e, this.size = void 0 !== t ? t : 1;
            var o = void 0 !== i ? i : 16776960, a = void 0 !== r ? r : 1, s = 0, l = this.object.geometry;
            l instanceof n.Geometry ? s = l.faces.length : console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");
            var h = new n.BufferGeometry, c = new n.Float32Attribute(2 * s * 3, 3);
            h.addAttribute("position", c), n.LineSegments.call(this, h, new n.LineBasicMaterial({
                color: o,
                linewidth: a
            })), this.matrixAutoUpdate = !1, this.update()
        },n.FaceNormalsHelper.prototype = Object.create(n.LineSegments.prototype),n.FaceNormalsHelper.prototype.constructor = n.FaceNormalsHelper,n.FaceNormalsHelper.prototype.update = function () {
            var e = new n.Vector3, t = new n.Vector3, i = new n.Matrix3;
            return function () {
                this.object.updateMatrixWorld(!0), i.getNormalMatrix(this.object.matrixWorld);
                for (var n = this.object.matrixWorld, r = this.geometry.attributes.position, o = this.object.geometry, a = o.vertices, s = o.faces, l = 0, h = 0, c = s.length; c > h; h++) {
                    var u = s[h], d = u.normal;
                    e.copy(a[u.a]).add(a[u.b]).add(a[u.c]).divideScalar(3).applyMatrix4(n), t.copy(d).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e), r.setXYZ(l, e.x, e.y, e.z), l += 1, r.setXYZ(l, t.x, t.y, t.z), l += 1
                }
                return r.needsUpdate = !0, this
            }
        }(),n.GridHelper = function (e, t) {
            var i = new n.Geometry, r = new n.LineBasicMaterial({vertexColors: n.VertexColors});
            this.color1 = new n.Color(4473924), this.color2 = new n.Color(8947848);
            for (var o = -e; e >= o; o += t) {
                i.vertices.push(new n.Vector3(-e, 0, o), new n.Vector3(e, 0, o), new n.Vector3(o, 0, -e), new n.Vector3(o, 0, e));
                var a = 0 === o ? this.color1 : this.color2;
                i.colors.push(a, a, a, a)
            }
            n.LineSegments.call(this, i, r)
        },n.GridHelper.prototype = Object.create(n.LineSegments.prototype),n.GridHelper.prototype.constructor = n.GridHelper,n.GridHelper.prototype.setColors = function (e, t) {
            this.color1.set(e), this.color2.set(t), this.geometry.colorsNeedUpdate = !0
        },n.HemisphereLightHelper = function (e, t) {
            n.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.colors = [new n.Color, new n.Color];
            var i = new n.SphereGeometry(t, 4, 2);
            i.rotateX(-Math.PI / 2);
            for (var r = 0, o = 8; o > r; r++)i.faces[r].color = this.colors[4 > r ? 0 : 1];
            var a = new n.MeshBasicMaterial({vertexColors: n.FaceColors, wireframe: !0});
            this.lightSphere = new n.Mesh(i, a), this.add(this.lightSphere), this.update()
        },n.HemisphereLightHelper.prototype = Object.create(n.Object3D.prototype),n.HemisphereLightHelper.prototype.constructor = n.HemisphereLightHelper,n.HemisphereLightHelper.prototype.dispose = function () {
            this.lightSphere.geometry.dispose(), this.lightSphere.material.dispose()
        },n.HemisphereLightHelper.prototype.update = function () {
            var e = new n.Vector3;
            return function () {
                this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity), this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity), this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()), this.lightSphere.geometry.colorsNeedUpdate = !0
            }
        }(),n.PointLightHelper = function (e, t) {
            this.light = e, this.light.updateMatrixWorld();
            var i = new n.SphereGeometry(t, 4, 2), r = new n.MeshBasicMaterial({wireframe: !0, fog: !1});
            r.color.copy(this.light.color).multiplyScalar(this.light.intensity), n.Mesh.call(this, i, r), this.matrix = this.light.matrixWorld, this.matrixAutoUpdate = !1
        },n.PointLightHelper.prototype = Object.create(n.Mesh.prototype),n.PointLightHelper.prototype.constructor = n.PointLightHelper,n.PointLightHelper.prototype.dispose = function () {
            this.geometry.dispose(), this.material.dispose()
        },n.PointLightHelper.prototype.update = function () {
            this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
        },n.SkeletonHelper = function (e) {
            this.bones = this.getBoneList(e);
            for (var t = new n.Geometry, i = 0; i < this.bones.length; i++) {
                var r = this.bones[i];
                r.parent instanceof n.Bone && (t.vertices.push(new n.Vector3), t.vertices.push(new n.Vector3), t.colors.push(new n.Color(0, 0, 1)), t.colors.push(new n.Color(0, 1, 0)))
            }
            t.dynamic = !0;
            var o = new n.LineBasicMaterial({
                vertexColors: n.VertexColors,
                depthTest: !1,
                depthWrite: !1,
                transparent: !0
            });
            n.LineSegments.call(this, t, o), this.root = e, this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.update()
        },n.SkeletonHelper.prototype = Object.create(n.LineSegments.prototype),n.SkeletonHelper.prototype.constructor = n.SkeletonHelper,n.SkeletonHelper.prototype.getBoneList = function (e) {
            var t = [];
            e instanceof n.Bone && t.push(e);
            for (var i = 0; i < e.children.length; i++)t.push.apply(t, this.getBoneList(e.children[i]));
            return t
        },n.SkeletonHelper.prototype.update = function () {
            for (var e = this.geometry, t = (new n.Matrix4).getInverse(this.root.matrixWorld), i = new n.Matrix4, r = 0, o = 0; o < this.bones.length; o++) {
                var a = this.bones[o];
                a.parent instanceof n.Bone && (i.multiplyMatrices(t, a.matrixWorld), e.vertices[r].setFromMatrixPosition(i), i.multiplyMatrices(t, a.parent.matrixWorld), e.vertices[r + 1].setFromMatrixPosition(i), r += 2)
            }
            e.verticesNeedUpdate = !0, e.computeBoundingSphere()
        },n.SpotLightHelper = function (e) {
            n.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1;
            var t = new n.CylinderGeometry(0, 1, 1, 8, 1, !0);
            t.translate(0, -.5, 0), t.rotateX(-Math.PI / 2);
            var i = new n.MeshBasicMaterial({wireframe: !0, fog: !1});
            this.cone = new n.Mesh(t, i), this.add(this.cone), this.update()
        },n.SpotLightHelper.prototype = Object.create(n.Object3D.prototype),n.SpotLightHelper.prototype.constructor = n.SpotLightHelper,n.SpotLightHelper.prototype.dispose = function () {
            this.cone.geometry.dispose(), this.cone.material.dispose()
        },n.SpotLightHelper.prototype.update = function () {
            var e = new n.Vector3, t = new n.Vector3;
            return function () {
                var i = this.light.distance ? this.light.distance : 1e4, n = i * Math.tan(this.light.angle);
                this.cone.scale.set(n, n, i), e.setFromMatrixPosition(this.light.matrixWorld), t.setFromMatrixPosition(this.light.target.matrixWorld), this.cone.lookAt(t.sub(e)), this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
            }
        }(),n.VertexNormalsHelper = function (e, t, i, r) {
            this.object = e, this.size = void 0 !== t ? t : 1;
            var o = void 0 !== i ? i : 16711680, a = void 0 !== r ? r : 1, s = 0, l = this.object.geometry;
            l instanceof n.Geometry ? s = 3 * l.faces.length : l instanceof n.BufferGeometry && (s = l.attributes.normal.count);
            var h = new n.BufferGeometry, c = new n.Float32Attribute(2 * s * 3, 3);
            h.addAttribute("position", c), n.LineSegments.call(this, h, new n.LineBasicMaterial({
                color: o,
                linewidth: a
            })), this.matrixAutoUpdate = !1, this.update()
        },n.VertexNormalsHelper.prototype = Object.create(n.LineSegments.prototype),n.VertexNormalsHelper.prototype.constructor = n.VertexNormalsHelper,n.VertexNormalsHelper.prototype.update = function () {
            var e = new n.Vector3, t = new n.Vector3, i = new n.Matrix3;
            return function () {
                var r = ["a", "b", "c"];
                this.object.updateMatrixWorld(!0), i.getNormalMatrix(this.object.matrixWorld);
                var o = this.object.matrixWorld, a = this.geometry.attributes.position, s = this.object.geometry;
                if (s instanceof n.Geometry)for (var l = s.vertices, h = s.faces, c = 0, u = 0, d = h.length; d > u; u++)for (var p = h[u], f = 0, g = p.vertexNormals.length; g > f; f++) {
                    var m = l[p[r[f]]], v = p.vertexNormals[f];
                    e.copy(m).applyMatrix4(o), t.copy(v).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e), a.setXYZ(c, e.x, e.y, e.z), c += 1, a.setXYZ(c, t.x, t.y, t.z), c += 1
                } else if (s instanceof n.BufferGeometry)for (var A = s.attributes.position, y = s.attributes.normal, c = 0, f = 0, g = A.count; g > f; f++)e.set(A.getX(f), A.getY(f), A.getZ(f)).applyMatrix4(o), t.set(y.getX(f), y.getY(f), y.getZ(f)), t.applyMatrix3(i).normalize().multiplyScalar(this.size).add(e), a.setXYZ(c, e.x, e.y, e.z), c += 1, a.setXYZ(c, t.x, t.y, t.z), c += 1;
                return a.needsUpdate = !0, this
            }
        }(),n.WireframeHelper = function (e, t) {
            var i = void 0 !== t ? t : 16777215;
            n.LineSegments.call(this, new n.WireframeGeometry(e.geometry), new n.LineBasicMaterial({color: i})), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1
        },n.WireframeHelper.prototype = Object.create(n.LineSegments.prototype),n.WireframeHelper.prototype.constructor = n.WireframeHelper,n.ImmediateRenderObject = function (e) {
            n.Object3D.call(this), this.material = e, this.render = function (e) {
            }
        },n.ImmediateRenderObject.prototype = Object.create(n.Object3D.prototype),n.ImmediateRenderObject.prototype.constructor = n.ImmediateRenderObject,n.MorphBlendMesh = function (e, t) {
            n.Mesh.call(this, e, t), this.animationsMap = {}, this.animationsList = [];
            var i = this.geometry.morphTargets.length, r = "__default", o = 0, a = i - 1, s = i / 1;
            this.createAnimation(r, o, a, s), this.setAnimationWeight(r, 1)
        },n.MorphBlendMesh.prototype = Object.create(n.Mesh.prototype),n.MorphBlendMesh.prototype.constructor = n.MorphBlendMesh,n.MorphBlendMesh.prototype.createAnimation = function (e, t, i, n) {
            var r = {
                start: t,
                end: i,
                length: i - t + 1,
                fps: n,
                duration: (i - t) / n,
                lastFrame: 0,
                currentFrame: 0,
                active: !1,
                time: 0,
                direction: 1,
                weight: 1,
                directionBackwards: !1,
                mirroredLoop: !1
            };
            this.animationsMap[e] = r, this.animationsList.push(r)
        },n.MorphBlendMesh.prototype.autoCreateAnimations = function (e) {
            for (var t, i = /([a-z]+)_?(\d+)/i, n = {}, r = this.geometry, o = 0, a = r.morphTargets.length; a > o; o++) {
                var s = r.morphTargets[o], l = s.name.match(i);
                if (l && l.length > 1) {
                    var h = l[1];
                    n[h] || (n[h] = {start: 1 / 0, end: -(1 / 0)});
                    var c = n[h];
                    o < c.start && (c.start = o), o > c.end && (c.end = o), t || (t = h)
                }
            }
            for (var h in n) {
                var c = n[h];
                this.createAnimation(h, c.start, c.end, e)
            }
            this.firstAnimation = t
        },n.MorphBlendMesh.prototype.setAnimationDirectionForward = function (e) {
            var t = this.animationsMap[e];
            t && (t.direction = 1, t.directionBackwards = !1)
        },n.MorphBlendMesh.prototype.setAnimationDirectionBackward = function (e) {
            var t = this.animationsMap[e];
            t && (t.direction = -1, t.directionBackwards = !0)
        },n.MorphBlendMesh.prototype.setAnimationFPS = function (e, t) {
            var i = this.animationsMap[e];
            i && (i.fps = t, i.duration = (i.end - i.start) / i.fps)
        },n.MorphBlendMesh.prototype.setAnimationDuration = function (e, t) {
            var i = this.animationsMap[e];
            i && (i.duration = t, i.fps = (i.end - i.start) / i.duration)
        },n.MorphBlendMesh.prototype.setAnimationWeight = function (e, t) {
            var i = this.animationsMap[e];
            i && (i.weight = t)
        },n.MorphBlendMesh.prototype.setAnimationTime = function (e, t) {
            var i = this.animationsMap[e];
            i && (i.time = t)
        },n.MorphBlendMesh.prototype.getAnimationTime = function (e) {
            var t = 0, i = this.animationsMap[e];
            return i && (t = i.time), t
        },n.MorphBlendMesh.prototype.getAnimationDuration = function (e) {
            var t = -1, i = this.animationsMap[e];
            return i && (t = i.duration), t
        },n.MorphBlendMesh.prototype.playAnimation = function (e) {
            var t = this.animationsMap[e];
            t ? (t.time = 0, t.active = !0) : console.warn("THREE.MorphBlendMesh: animation[" + e + "] undefined in .playAnimation()")
        },n.MorphBlendMesh.prototype.stopAnimation = function (e) {
            var t = this.animationsMap[e];
            t && (t.active = !1)
        },n.MorphBlendMesh.prototype.update = function (e) {
            for (var t = 0, i = this.animationsList.length; i > t; t++) {
                var r = this.animationsList[t];
                if (r.active) {
                    var o = r.duration / r.length;
                    r.time += r.direction * e, r.mirroredLoop ? (r.time > r.duration || r.time < 0) && (r.direction *= -1, r.time > r.duration && (r.time = r.duration, r.directionBackwards = !0), r.time < 0 && (r.time = 0, r.directionBackwards = !1)) : (r.time = r.time % r.duration, r.time < 0 && (r.time += r.duration));
                    var a = r.start + n.Math.clamp(Math.floor(r.time / o), 0, r.length - 1), s = r.weight;
                    a !== r.currentFrame && (this.morphTargetInfluences[r.lastFrame] = 0, this.morphTargetInfluences[r.currentFrame] = 1 * s, this.morphTargetInfluences[a] = 0, r.lastFrame = r.currentFrame, r.currentFrame = a);
                    var l = r.time % o / o;
                    r.directionBackwards && (l = 1 - l), r.currentFrame !== r.lastFrame ? (this.morphTargetInfluences[r.currentFrame] = l * s, this.morphTargetInfluences[r.lastFrame] = (1 - l) * s) : this.morphTargetInfluences[r.currentFrame] = s
                }
            }
        },"undefined" != typeof i ? ("undefined" != typeof t && t.exports && (i = t.exports = n), i.THREE = n) : this.THREE = n
    }, {}]
}, {}, [93]);